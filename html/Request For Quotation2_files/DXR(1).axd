var ASPx = ASPx || {};
var dx = dx || {};
(function module(ASPx, dx) {
ASPx.modules = { Utils: module };
if(!ASPx.attachToReady)
 ASPx.attachToReady = function (callback) { ASPx.Evt.AttachEventToElement(window, "load", callback); };
if(!ASPx.attachToLoad)
 ASPx.attachToLoad = function(callback) { ASPx.Evt.AttachEventToDocumentCore("DOMContentLoaded", callback); };
ASPx.EmptyObject = { };
ASPx.FalseFunction = function() { return false; };
ASPx.SSLSecureBlankUrl = '/DXR.axd?r=1_86-UA2wr';
ASPx.EmptyImageUrl = '/DXR.axd?r=1_87-UA2wr';
ASPx.VersionInfo = 'Version=\'22.2.3.0\', File Version=\'22.2.3.0\', Date Modified=\'2023/9/25 12:41:53\'';
ASPx.Platform = 'ASP';
ASPx.DoctypeMode = 'Html5';
ASPx.InvalidDimension = -10000;
ASPx.InvalidPosition = -10000;
ASPx.AbsoluteLeftPosition = -10000;
ASPx.EmptyGuid = "00000000-0000-0000-0000-000000000000";
ASPx.CallbackSeparator = ":";
ASPx.ItemIndexSeparator = "i";
ASPx.CallbackResultPrefix = "/*DX*/";
ASPx.StyleValueEncodedSemicolon = "DXsmcln";
ASPx.AccessibilityEmptyUrl = "javascript:;";
ASPx.AccessibilityPronounceTimeout = 500;
ASPx.MaxMobileWindowWidth = 576;
ASPx.PossibleNumberDecimalSeparators = [",", "."];
ASPx.CultureInfo = {
 twoDigitYearMax: 2029,
 ts: ":",
 ds: "/",
 am: "AM",
 pm: "PM",
 monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""],
 genMonthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""],
 abbrMonthNames: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""],
 abbrDayNames: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
 dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
 invariantCultureDecimalPoint: ".",
 numDecimalPoint: ".",
 numPrec: 2,
 numGroupSeparator: ",", 
 numGroups: [ 3 ],
 numNegPattern: 1,
 numPosInf: "Infinity", 
 numNegInf: "-Infinity", 
 numNan: "NaN",
 currency: "$",
 currDecimalPoint: ".",
 currPrec: 2,
 currGroupSeparator: ",",
 currGroups: [ 3 ],
 currPosPattern: 0,
 currNegPattern: 0,
 percentPattern: 0,
 shortTime: "h:mm tt",
 longTime: "h:mm:ss tt",
 shortDate: "M/d/yyyy",
 longDate: "dddd, MMMM d, yyyy",
 monthDay: "MMMM d",
 yearMonth: "MMMM yyyy"
};
ASPx.CultureInfo.genMonthNames = ASPx.CultureInfo.monthNames;
ASPx.Position = {
 Left: "Left",
 Right: "Right",
 Top: "Top",
 Bottom: "Bottom"
};
ASPx.FOCUS_TIMEOUT = 100;
function setInnerHtmlInternal(el, trustedHtmlString) { 
 el.innerHTML = trustedHtmlString;
}
var DateUtils = { };
DateUtils.GetInvariantDateString = function(date) {
 if(!date)
  return "01/01/0001";
 var day = date.getDate();
 var month = date.getMonth() + 1;
 var year = date.getFullYear();
 var result = "";
 if(month < 10)
  result += "0";
 result += month.toString() + "/";
 if(day < 10)
  result += "0";
 result += day.toString() + "/";
 if(year < 1000)
  result += "0";
 result += year.toString();
 return result;
};
DateUtils.GetInvariantDateTimeString = function(date) {
 var dateTimeString = DateUtils.GetInvariantDateString(date);
 var time = {
  h: date.getHours(),
  m: date.getMinutes(),
  s: date.getSeconds()
 };
 for(var key in time) {
  if(time.hasOwnProperty(key)) {
   var str = time[key].toString();
   if(str.length < 2)
    str = "0" + str;
   time[key] = str;
  }
 }
 dateTimeString += " " + time.h + ":" + time.m + ":" + time.s;
 var msec = date.getMilliseconds();
 if(msec > 0)
  dateTimeString += "." + ("000" + msec.toString()).substr(-3);
 return dateTimeString;
};
DateUtils.ExpandTwoDigitYear = function(value) {
 value += 1900;
 if(value + 99 < ASPx.CultureInfo.twoDigitYearMax)
  value += 100;
 return value;  
};
DateUtils.GetTimeZoneOffsetDifference = function(firstDate, secondDate) {
 if(!secondDate)
  secondDate = DateUtils.GetUtcDate(firstDate);
 return 60000 * (firstDate.getTimezoneOffset() - secondDate.getTimezoneOffset());
};
DateUtils.GetTimeZoneOffset = function(date) {
 var isECMA262Support = (ASPx.Browser.Chrome && ASPx.Browser.Version >= 67) || ASPx.Browser.EdgeWebKit;
 if(!isECMA262Support)
  return date.getTimezoneOffset() * 60000;
 var utcDate = DateUtils.GetUtcDate(date);
 var utcTimezoneOffsetDifference = DateUtils.GetTimeZoneOffsetDifference(date);
 if(utcTimezoneOffsetDifference !== 0)
  utcDate.setTime(utcDate.valueOf() + utcTimezoneOffsetDifference);
 return utcDate - date;
};
DateUtils.GetUtcDate = function(date) {
 var utcFullYear = date.getUTCFullYear();
 var result = new Date(utcFullYear, date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), date.getUTCMilliseconds());
 if(utcFullYear < 100)
  result.setFullYear(utcFullYear);
 return result;
};
DateUtils.ToUtcTime = function(date) {
 var result = new Date();
 result.setTime(date.valueOf() + ASPx.DateUtils.GetTimeZoneOffset(date));
 return result;
};
DateUtils.ToLocalTime = function(date) {
 var result = new Date();
 result.setTime(date.valueOf() - ASPx.DateUtils.GetTimeZoneOffset(date));
 return result; 
};
DateUtils.AreDatesEqualExact = function(date1, date2) {
 if(date1 == null && date2 == null)
  return true;
 if(date1 == null || date2 == null)
  return false;
 return date1.getTime() == date2.getTime(); 
};
DateUtils.FixTimezoneGap = function(oldDate, newDate) {
 var diff = newDate.getHours() - oldDate.getHours();
 if(diff == 0)
  return;
 var sign = (diff == 1 || diff == -23) ? -1 : 1;
 var trial = new Date(newDate.getTime() + sign * 3600000);
 var isDateChangedAsExpected = newDate.getHours() - trial.getHours() === diff;
 if(isDateChangedAsExpected && (sign > 0 || trial.getDate() == newDate.getDate()))
  newDate.setTime(trial.getTime());
};
DateUtils.GetDecadeStartYear = function(year) {
 return 10 * Math.floor(year / 10);
};
DateUtils.GetCenturyStartYear = function(year) {
 return 100 * Math.floor(year / 100);
};
DateUtils.GetCorrectedYear = function(date, pickerType) {
 var year = date.getFullYear();
 return pickerType != ASPx.DatePickerType.Decades ? year : DateUtils.GetDecadeStartYear(year);
};
DateUtils.GetCorrectedMonth = function(date, pickerType) {
 return pickerType < ASPx.DatePickerType.Years ? date.getMonth() : 0;
};
DateUtils.GetCorrectedDay = function(date, pickerType) {
 return pickerType == ASPx.DatePickerType.Days ? date.getDate() : 1;
};
DateUtils.CorrectDateByPickerType = function(date, pickerType) {
 if(!ASPx.IsExists(pickerType))
  pickerType = ASPx.DatePickerType.Days;
 if(!date || pickerType == ASPx.DatePickerType.Days)
  return date;
 var correctedYear = DateUtils.GetCorrectedYear(date, pickerType);
 var result = new Date(
  correctedYear,
  DateUtils.GetCorrectedMonth(date, pickerType),
  DateUtils.GetCorrectedDay(date, pickerType),
  date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()
 );
 result.setFullYear(correctedYear);
 return result;
};
DateUtils.GetYearRangeFormatString = function(startYear, rangeLength) {
 return startYear + " - " + (startYear + rangeLength - 1);
};
ASPx.DateUtils = DateUtils;
var Timer = { };
Timer.ClearTimer = function(timerID){
 if(timerID > -1)
  window.clearTimeout(timerID);
 return -1;
};
Timer.ClearInterval = function(timerID){
 if(timerID > -1)
  window.clearInterval(timerID);
 return -1;
};
var setControlBoundTimer = function(handler, control, setTimerFunction, clearTimerFunction, delay) {
 var timerId;
 var getTimerId = function() { return timerId; };
 var controlMainElement = control.GetMainElement();
 var boundHandler = function() {
  var controlExists = control && ASPx.GetControlCollection().Get(control.name) === control && control.GetMainElement() === controlMainElement;
  if(controlExists)
   handler.aspxBind(control)();
  else {
   clearTimerFunction(getTimerId());
   controlMainElement = null;
  }
 };
 timerId = setTimerFunction(boundHandler, delay);
 return timerId;
};
Timer.SetControlBoundTimeout = function(handler, control, delay) {
 return setControlBoundTimer(handler, control, window.setTimeout, Timer.ClearTimer, delay);
};
Timer.SetControlBoundInterval = function(handler, control, delay) {
 return setControlBoundTimer(handler, control, window.setInterval, Timer.ClearInterval, delay);
};
Timer.Throttle = function(func, delay) {
 var isThrottled = false,
   savedArgs,
   savedThis = this;
 function wrapper() {
  if(isThrottled) {
   savedArgs = arguments;
   savedThis = this;
   return;
  }
  func.apply(this, arguments);
  isThrottled = true;
  setTimeout(function() {
   isThrottled = false;
   if(savedArgs) {
    wrapper.apply(savedThis, savedArgs);
    savedArgs = null;
   }
  }, delay);
 }
 wrapper.cancel = function() {
  clearTimeout(delay);
  delay = savedArgs = savedThis = null;
 };
 return wrapper;
};
ASPx.Timer = Timer;
var Browser = { };
Browser.UserAgent = navigator.userAgent.toLowerCase();
Browser.Mozilla = false;
Browser.IE = false;
Browser.Firefox = false;
Browser.Netscape = false;
Browser.Safari = false;
Browser.Chrome = false;
Browser.Opera = false;
Browser.Edge = false;
Browser.EdgeWebKit = false;
Browser.Version = undefined; 
Browser.MajorVersion = undefined; 
Browser.WindowsPlatform = false;
Browser.MacOSPlatform = false;
Browser.MacOSMobilePlatform = false;
Browser.AndroidMobilePlatform = false;
Browser.PlaformMajorVersion = false;
Browser.WindowsPhonePlatform = false;
Browser.AndroidDefaultBrowser = false;
Browser.AndroidChromeBrowser = false;
Browser.SamsungAndroidDevice = false;
Browser.WebKitTouchUI = false;
Browser.MSTouchUI = false;
Browser.TouchUI = false;
Browser.WebKitFamily = false; 
Browser.NetscapeFamily = false; 
Browser.VirtualKeyboardSupported = false;
Browser.Info = "";
Browser.IsQuirksMode = document.compatMode === "BackCompat";
function indentPlatformMajorVersion(userAgent) {
 var regex = /(?:(?:windows nt|macintosh|mac os|cpu os|cpu iphone os|android|windows phone|linux) )(\d+)(?:[-0-9_.])*/;
 var matches = regex.exec(userAgent);
 if(matches)
  Browser.PlaformMajorVersion = matches[1];
}
function getIECompatibleVersionString() {
 if(document.compatible) {
  for(var i = 0; i < document.compatible.length; i++)
   if(document.compatible[i].userAgent === "IE" && document.compatible[i].version)
    return document.compatible[i].version.toLowerCase();
 }
 return "";
}
Browser.IdentUserAgent = function(userAgent, ignoreDocumentMode) {
 var browserTypesOrderedList = ["Mozilla", "IE", "Firefox", "Netscape", "Safari", "Chrome", "Opera", "Opera10", "EdgeWebKit", "Edge" ];
 var defaultBrowserType = "IE";
 var defaultPlatform = "Win";
 var defaultVersions = { Safari: 2, Chrome: 0.1, Mozilla: 1.9, Netscape: 8, Firefox: 2, Opera: 9, IE: 6, Edge: 12 };
 if(!userAgent || userAgent.length == 0) {
  fillUserAgentInfo(browserTypesOrderedList, defaultBrowserType, defaultVersions[defaultBrowserType], defaultPlatform);
  return;
 }
 userAgent = userAgent.toLowerCase();
 indentPlatformMajorVersion(userAgent);
 try {
  var platformIdentStrings = {
   "Windows": "Win",
   "Macintosh": "Mac",
   "Mac OS": "Mac",
   "Mac_PowerPC": "Mac",
   "cpu os": "MacMobile",
   "cpu iphone os": "MacMobile",
   "Android": "Android",
   "!Windows Phone": "WinPhone",
   "!WPDesktop": "WinPhone",
   "!ZuneWP": "WinPhone"
  };
  var optSlashOrSpace = "(?:/|\\s*)?";
  var version = "(\\d+)(?:\\.((?:\\d+?[1-9])|\\d)0*?)?";
  var optComma = "(?:,)?";
  var appleVersion = "(\\d+)(?:\\.((?:\\d+?[1-9])|\\d)" + optComma + "0*?)?"; 
  var optVersion = "(?:" + version + ")?";
  var patterns = {
   Safari: "applewebkit(?:.*?(?:version/" + appleVersion + "[\\.\\w\\d]*?(?:\\s+mobile\/\\S*)?\\s+safari))?",
   Chrome: "(?:chrome|crios)(?!frame)" + optSlashOrSpace + optVersion,
   Mozilla: "mozilla(?:.*rv:" + optVersion + ".*Gecko)?",
   Netscape: "(?:netscape|navigator)\\d*/?\\s*" + optVersion,
   Firefox: "firefox" + optSlashOrSpace + optVersion,
   Opera: "(?:opera|\sopr)" + optSlashOrSpace + optVersion,
   Opera10: "opera.*\\s*version" + optSlashOrSpace + optVersion,
   IE: "msie\\s*" + optVersion,
   EdgeWebKit: "edg" + optSlashOrSpace + optVersion,
   Edge: "edge" + optSlashOrSpace + optVersion
  };
  var browserType;
  var version = -1;
  for(var i = 0; i < browserTypesOrderedList.length; i++) {
   var browserTypeCandidate = browserTypesOrderedList[i];
   var regExp = new RegExp(patterns[browserTypeCandidate], "i");
   if(regExp.compile)
    regExp.compile(patterns[browserTypeCandidate], "i");
   var matches = regExp.exec(userAgent);
   if(matches && matches.index >= 0) {
    if(browserType == "IE" && version >= 11 && browserTypeCandidate == "Safari") 
     continue;
    browserType = browserTypeCandidate;
    if(browserType == "Opera10")
     browserType = "Opera";
    var tridentPattern = "trident" + optSlashOrSpace + optVersion;
    version = Browser.GetBrowserVersion(userAgent, matches, tridentPattern, getIECompatibleVersionString());
    if(browserType == "Mozilla" && version >= 11)
     browserType = "IE";
   }
  }
  if(!browserType)
   browserType = defaultBrowserType;
  var browserVersionDetected = version != -1;
  if(!browserVersionDetected)
   version = defaultVersions[browserType];
  var platform;
  var minOccurenceIndex = Number.MAX_VALUE;
  for(var identStr in platformIdentStrings) {
   if(!platformIdentStrings.hasOwnProperty(identStr)) continue;
   var importantIdent = identStr.substr(0,1) == "!";
   var occurenceIndex = userAgent.indexOf((importantIdent ? identStr.substr(1) : identStr).toLowerCase());
   if(occurenceIndex >= 0 && (occurenceIndex < minOccurenceIndex || importantIdent)) {
    minOccurenceIndex = importantIdent ? 0 : occurenceIndex;
    platform = platformIdentStrings[identStr];
   }
  }
  var samsungPattern = "SM-[A-Z]";
  var matches = userAgent.toUpperCase().match(samsungPattern);
  var isSamsungAndroidDevice = matches && matches.length > 0;
  if(platform == "WinPhone" && version < 9)
   version = Math.floor(getVersionFromTrident(userAgent, "trident" + optSlashOrSpace + optVersion));
  if(!ignoreDocumentMode && browserType == "IE" && version > 7 && document.documentMode < version)
   version = document.documentMode;
  if(platform == "WinPhone")
   version = Math.max(9, version);
  if(!platform)
   platform = defaultPlatform;
  if(platform == platformIdentStrings["cpu os"] && !browserVersionDetected) 
   version = 4;
  fillUserAgentInfo(browserTypesOrderedList, browserType, version, platform, isSamsungAndroidDevice);
 } catch(e) {
  fillUserAgentInfo(browserTypesOrderedList, defaultBrowserType, defaultVersions[defaultBrowserType], defaultPlatform);
 }
};
function getVersionFromMatches(matches) {
 var result = -1;
 var versionStr = "";
 if(matches[1]) {
  versionStr += matches[1];
  if(matches[2])
   versionStr += "." + matches[2];
 }
 if(versionStr != "") {
  result = parseFloat(versionStr);
  if(isNaN(result))
   result = -1;
 }
 return result;
}
function getVersionFromTrident(userAgent, tridentPattern) {
 var tridentDiffFromVersion = 4;
 var matches = new RegExp(tridentPattern, "i").exec(userAgent);
 return getVersionFromMatches(matches) + tridentDiffFromVersion;
}
Browser.GetBrowserVersion = function(userAgent, matches, tridentPattern, ieCompatibleVersionString) {
 var version = getVersionFromMatches(matches);
 if(ieCompatibleVersionString) {
  var versionFromTrident = getVersionFromTrident(userAgent, tridentPattern);
  if(ieCompatibleVersionString === "edge" || parseInt(ieCompatibleVersionString) === versionFromTrident)
   return versionFromTrident;
 }
 return version;
};
function fillUserAgentInfo(browserTypesOrderedList, browserType, version, platform, isSamsungAndroidDevice) {
 for(var i = 0; i < browserTypesOrderedList.length; i++) {
  var type = browserTypesOrderedList[i];
  Browser[type] = type == browserType;
 }
 Browser.Version = Math.floor(10.0 * version) / 10.0;
 Browser.MajorVersion = Math.floor(Browser.Version);
 Browser.WindowsPlatform = platform == "Win" || platform == "WinPhone";
 Browser.MacOSPlatform = platform == "Mac";
 var isMacWithTouchSupport = platform == "Mac" && (!!window.ontouchstart || getMaxTouchPoints() > 0); 
 Browser.MacOSMobilePlatform = platform == "MacMobile" || isMacWithTouchSupport;
 if(Browser.MacOSMobilePlatform)
  Browser.MacOSPlatform = false;
 Browser.AndroidMobilePlatform = platform == "Android";
 Browser.WindowsPhonePlatform = platform == "WinPhone";
 Browser.WebKitFamily = Browser.Safari || Browser.Chrome || Browser.Opera && Browser.MajorVersion >= 15 || Browser.EdgeWebKit;
 Browser.NetscapeFamily = Browser.Netscape || Browser.Mozilla || Browser.Firefox;
 Browser.WebKitTouchUI = Browser.MacOSMobilePlatform || Browser.AndroidMobilePlatform;
 var isIETouchUI = Browser.IE && Browser.MajorVersion > 9 && Browser.WindowsPlatform && Browser.UserAgent.toLowerCase().indexOf("touch") >= 0;
 Browser.MSTouchUI = isIETouchUI || ((Browser.Edge || (Browser.EdgeWebKit && !Browser.AndroidMobilePlatform)) && !!getMaxTouchPoints());
 Browser.TouchUI = Browser.WebKitTouchUI || Browser.MSTouchUI;
 Browser.MobileUI = Browser.WebKitTouchUI || Browser.WindowsPhonePlatform;
 Browser.AndroidDefaultBrowser = Browser.AndroidMobilePlatform && !Browser.Chrome;
 Browser.AndroidChromeBrowser = Browser.AndroidMobilePlatform && Browser.Chrome;
 if(isSamsungAndroidDevice)
  Browser.SamsungAndroidDevice = isSamsungAndroidDevice;
 if(Browser.MSTouchUI) {
  var isARMArchitecture = Browser.UserAgent.toLowerCase().indexOf("arm;") > -1;    
  Browser.VirtualKeyboardSupported = isARMArchitecture || Browser.WindowsPhonePlatform;   
 } else {
  Browser.VirtualKeyboardSupported = Browser.MobileUI;
 }
 fillDocumentElementBrowserTypeClassNames(browserTypesOrderedList);
}
function getMaxTouchPoints() { 
 var result = navigator.maxTouchPoints;
 if(window.testingTouchMode)
  result = 10;
 return result;
}
function fillDocumentElementBrowserTypeClassNames(browserTypesOrderedList) {
 var documentElementClassName = "";
 var browserTypeslist = browserTypesOrderedList.concat(["WindowsPlatform", "MacOSPlatform", "MacOSMobilePlatform", "AndroidMobilePlatform",
   "WindowsPhonePlatform", "WebKitFamily", "WebKitTouchUI", "MSTouchUI", "TouchUI", "AndroidDefaultBrowser", "MobileUI"]);
 for(var i = 0; i < browserTypeslist.length; i++) {
  var type = browserTypeslist[i];
  if(Browser[type])
   documentElementClassName += "dx" + type + " ";
 }
 documentElementClassName += "dxBrowserVersion-" + Browser.MajorVersion;
 if(document && document.documentElement) {
  if(document.documentElement.className != "")
   documentElementClassName = " " + documentElementClassName;
  document.documentElement.className += documentElementClassName;
  Browser.Info = documentElementClassName;
 }
}
Browser.SupportsStickyPositioning = function() {
 return this.Chrome && this.MajorVersion >= 56
  || this.Firefox && this.MajorVersion >= 32
  || this.Safari && this.MajorVersion >= 6 && this.Version !== "6"
  || this.Opera && this.MajorVersion >= 42;
};
Browser.IdentUserAgent(Browser.UserAgent);
ASPx.Browser = Browser;
ASPx.BlankUrl = Browser.Opera ? "about:blank" : "";
ASPx.FillDocumentElementDXThemeCssClassName = function(dxThemeName) {
 document.documentElement.className += " dxTheme-" + dxThemeName;
};
var Data = { };
Data.ArrayInsert = function(array, element, position){
 if(0 <= position && position < array.length){
  for(var i = array.length; i > position; i --)
   array[i] = array[i - 1];
  array[position] = element;
 }
 else
  array.push(element);
};
Data.ArrayRemove = function(array, element){
 var index = Data.ArrayIndexOf(array, element);
 if(index > -1) Data.ArrayRemoveAt(array, index);
};
Data.ArrayRemoveAt = function(array, index){
 if(index >= 0  && index < array.length){
  for(var i = index; i < array.length - 1; i++)
   array[i] = array[i + 1];
  array.pop();
 }
};
Data.ArrayClear = function(array){
 while(array.length > 0)
  array.pop();
};
Data.ArrayIndexOf = function(array, element, comparer) {
 if(!comparer) {
  for(var i = 0; i < array.length; i++) {
   if(array[i] == element)
    return i;
  }
 } else {
  for(var i = 0; i < array.length; i++) {
   if(comparer(array[i], element))
    return i;
  }
 }
 return -1;
};
Data.ArrayContains = function(array, element) { 
 return Data.ArrayIndexOf(array, element) >= 0;
};
Data.ArrayEqual = function(array1, array2) {
 var count1 = array1.length;
 var count2 = array2.length;
 if(count1 != count2)
  return false;
 for(var i = 0; i < count1; i++)
  if(array1[i] != array2[i])
   return false;
 return true;
};
Data.ArraySame = function(array1, array2) {
 if(array1.length !== array2.length)
  return false;
 return array1.every(function(elem) { return Data.ArrayContains(array2, elem); });
};
Data.ArrayGetIntegerEdgeValues = function(array) {
 var arrayToSort = Data.CollectionToArray(array);
 Data.ArrayIntegerAscendingSort(arrayToSort);
 return {
  start: arrayToSort[0],
  end: arrayToSort[arrayToSort.length - 1]
 };
};
Data.ArrayIntegerAscendingSort = function(array){
 Data.ArrayIntegerSort(array);
};
Data.ArrayIntegerSort = function(array, desc) {
 array.sort(function(i1, i2) {
  var res = 0;
  if(i1 > i2)
   res = 1;
  else if(i1 < i2)
   res = -1;
  if(desc)
   res *= -1;
  return res;
 });
};
Data.CollectionsUnionToArray = function(firstCollection, secondCollection) {
 var result = [];
 var firstCollectionLength = firstCollection.length;
 var secondCollectionLength = secondCollection.length;
 for(var i = 0; i < firstCollectionLength + secondCollectionLength; i++) {
  if(i < firstCollectionLength)
   result.push(firstCollection[i]);
  else
   result.push(secondCollection[i - firstCollectionLength]);
 }
 return result;
};
Data.CollectionToArray = function(collection) {
 var array = [];
 for(var i = 0; i < collection.length; i++)
  array.push(collection[i]);
 return array;
};
Data.CreateHashTableFromArray = function(array) {
 var hash = [];
 for(var i = 0; i < array.length; i++)
  hash[array[i]] = 1;
 return hash;
};
Data.CreateIndexHashTableFromArray = function(array) {
 var hash = [];
 for(var i = 0; i < array.length; i++)
  hash[array[i]] = i;
 return hash;
};
Data.ArrayToHash = function(array, getKeyFunc, getValueFunc) {
 if(!(array instanceof Array)) 
  return { };
 return array.reduce(function(map, element, index) { 
  var key = getKeyFunc(element, index);
  var value = getValueFunc(element, index);
  map[key] = value;
  return map; 
 }, { });
};
Data.Sum = function(array, getValueFunc) {
 if(!(array instanceof Array)) 
  return 0;
 return array.reduce(function(prevValue, item) {
  var value = getValueFunc ? getValueFunc(item) : item;
  if(!ASPx.IsNumber(value))
   value = 0;
  return prevValue + value;
 }, 0);
};
Data.Min = function(array, getValueFunc) { return CalculateArrayMinMax(array, getValueFunc, false); };
Data.Max = function(array, getValueFunc) { return CalculateArrayMinMax(array, getValueFunc, true); };
var CalculateArrayMinMax = function(array, getValueFunc, isMax) {
 if(!(array instanceof Array)) 
  return 0;
 var startValue = isMax ? Number.NEGATIVE_INFINITY : Number.POSITIVE_INFINITY;
 return array.reduce(function(prevValue, item) {
  var value = getValueFunc ? getValueFunc(item) : item;
  if(!ASPx.IsNumber(value))
   value = startValue;
  var func = isMax ? Math.max : Math.min;
  return func(value, prevValue);
 }, startValue);
};
var defaultBinarySearchComparer = function(array, index, value) {
 var arrayElement = array[index];
 if(arrayElement == value)
  return 0;
 else
  return arrayElement < value ? -1 : 1;
};
Data.NearestLeftBinarySearchComparer = function(array, index, value) { 
 var arrayElement = array[index];
 var leftPoint = arrayElement < value;
 var lastLeftPoint = leftPoint && index == array.length - 1;
 var nearestLeftPoint = lastLeftPoint || (leftPoint && array[index + 1] >= value);
 if(nearestLeftPoint)
  return 0;
 else
  return arrayElement < value ? -1 : 1;
};
Data.ArrayBinarySearch = function(array, value, binarySearchComparer, startIndex, length) {
 if(!binarySearchComparer)
  binarySearchComparer = defaultBinarySearchComparer;
 if(!ASPx.IsExists(startIndex))
  startIndex = 0;
 if(!ASPx.IsExists(length))
  length = array.length - startIndex;
 var endIndex = (startIndex + length) - 1;
 while(startIndex <= endIndex) {
  var middle = (startIndex + ((endIndex - startIndex) >> 1));
  var compareResult = binarySearchComparer(array, middle, value);
  if(compareResult == 0)
   return middle;
  if(compareResult < 0)
   startIndex = middle + 1;
  else
   endIndex = middle - 1;
 }
 return -(startIndex + 1);
};
Data.ArrayFlatten = function(arrayOfArrays) {
 return [].concat.apply([], arrayOfArrays);
};
Data.GetDistinctArray = function(array) {
 var resultArray = [];
 for(var i = 0; i < array.length; i++) {
  var currentEntry = array[i];
  if(Data.ArrayIndexOf(resultArray, currentEntry) == -1) {
   resultArray.push(currentEntry);
  }
 }
 return resultArray;
};
Data.ForEach = function(arr, callback) {
 if(Array.prototype.forEach) {
  Array.prototype.forEach.call(arr, callback);
 } else {
  for(var i = 0, len = arr.length; i < len; i++) {
   callback(arr[i], i, arr);
  }
 }
};
Data.MergeHashTables = function(target, object) {
 if(!object || typeof (object) == "string")
  return target;
 if(!target)
  target = {};
 for(var key in object)
  if(key && !(key in target))
   target[key] = object[key];
 return target;
};
Data.Range = function(count, start) {
 count = parseInt(count) || 0;
 start = parseInt(start) || 0;
 if(count < 0) count = 0;
 if(start < 0) start = 0;
 return Array.apply(null, Array(count)).map(function(val, i) { return start + i; });
};
ASPx.Data = Data;
var Cookie = { };
Cookie.DelCookie = function(name){
 setCookieInternal(name, "", new Date(1970, 1, 1));
};
Cookie.GetCookie = function(name) {
 name = escape(name);
 var cookies = document.cookie.split(';');
 for(var i = 0; i < cookies.length; i++) {
  var cookie = Str.Trim(cookies[i]);
  if(cookie.indexOf(name + "=") == 0)
   return unescape(cookie.substring(name.length + 1, cookie.length));
  else if(cookie.indexOf(name + ";") == 0 || cookie === name)
   return "";
 }
 return null;
};
Cookie.SetCookie = function(name, value, expirationDate){
 if(!ASPx.IsExists(value)) {
  Cookie.DelCookie(name);
  return;
 }
 if(!ASPx.Ident.IsDate(expirationDate)) {
  expirationDate = new Date();
  expirationDate.setFullYear(expirationDate.getFullYear() + 1);
 }
 setCookieInternal(name, value, expirationDate);
};
function setCookieInternal(name, value, date){
 document.cookie = escape(name) + "=" + escape(value.toString()) + "; expires=" + date.toGMTString() + "; path=/";
}
ASPx.Cookie = Cookie;
ASPx.ImageUtils = {
 GetImageSrc: function (image){
  return image.src;
 },
 SetImageSrc: function(image, src){
  image.src = src;
 },
 SetSize: function(image, width, height){
  image.style.width = width + "px";
  image.style.height = height + "px";
 },
 GetSize: function(image, isWidth) {
  return (isWidth ? ASPx.GetElementOffsetWidth(image) : ASPx.GetElementOffsetHeight(image));
 }
};
var Str = { };
Str.ApplyReplacement = function(text, replecementTable) {
 if(typeof(text) != "string")
  text = text.toString();
 for(var i = 0; i < replecementTable.length; i++) {
  var replacement = replecementTable[i];
  text = text.replace(replacement[0], replacement[1]);
 }
 return text;
};
Str.CompleteReplace = function(text, regexp, newSubStr) {
 if(typeof(text) != "string")
  text = text.toString();
 var textPrev;
 do {
  textPrev = text;
  text = text.replace(regexp, newSubStr);
 } while(text != textPrev);
 return text;
};
Str.EncodeHtml = function(html) {
 return Str.ApplyReplacement(html, [
  [ /&amp;/g,  '&ampx;'  ], [ /&/g, '&amp;'  ],
  [ /&quot;/g, '&quotx;' ], [ /"/g, '&quot;' ],
  [ /&lt;/g,   '&ltx;'   ], [ /</g, '&lt;'   ],
  [ /&gt;/g,   '&gtx;'   ], [ />/g, '&gt;'   ]
 ]);
};
Str.DecodeHtml = function(html) {
 return Str.ApplyReplacement(html, [
  [ /&gt;/g,   '>' ], [ /&gtx;/g,  '&gt;'   ],
  [ /&lt;/g,   '<' ], [ /&ltx;/g,  '&lt;'   ],
  [ /&quot;/g, '"' ], [ /&quotx;/g,'&quot;' ],
  [ /&amp;/g,  '&' ], [ /&ampx;/g, '&amp;'  ]
 ]);
};
Str.DecodeHtmlViaTextArea = function(html) {
 var textArea = document.createElement("TEXTAREA");
 setInnerHtmlInternal(textArea, html);
 return textArea.value;
};
Str.TrimStart = function(str) { 
 return trimInternal(str, true);
};
Str.TrimEnd = function(str) { 
 return trimInternal(str, false, true);
};
Str.Trim = function(str) { 
 return trimInternal(str, true, true); 
};
Str.EscapeForRegEx = function(str) {
 return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
};
var whiteSpaces = { 
 0x0009: 1, 0x000a: 1, 0x000b: 1, 0x000c: 1, 0x000d: 1, 0x0020: 1, 0x0085: 1, 
 0x00a0: 1, 0x1680: 1, 0x180e: 1, 0x2000: 1, 0x2001: 1, 0x2002: 1, 0x2003: 1, 
 0x2004: 1, 0x2005: 1, 0x2006: 1, 0x2007: 1, 0x2008: 1, 0x2009: 1, 0x200a: 1, 
 0x200b: 1, 0x2028: 1, 0x2029: 1, 0x202f: 1, 0x205f: 1, 0x3000: 1, 0xfeff: 1
};
var caretWidth = 1;
function trimInternal(source, trimStart, trimEnd) {
 var len = source.length;
 if(!len)
  return source;
 var result = "";
 if(len < 0xBABA1) 
  result = trimSource(source, trimStart, trimEnd);
 else
  result = trimLargeSource(source, len, trimStart, trimEnd);
 return Str.ClearString(result);
}
function trimSource(source, trimStart, trimEnd) {
 var result = source;
 if(trimStart)
  result = result.replace(/^\s+/, "");
 if(trimEnd)
  result = result.replace(/\s+$/, "");
 return result;
}
function trimLargeSource(source, len, trimStart, trimEnd) {
 var start = 0;
 if(trimEnd) {
  while(len > 0 && whiteSpaces[source.charCodeAt(len - 1)]) {
   len--;
  }
 }
 if(trimStart && len > 0) {
  while(start < len && whiteSpaces[source.charCodeAt(start)]) {
   start++;
  }
 }
 return source.substring(start, len);
}
var inlineStringLength = 12;
Str.ClearString = function(str) { 
 if(!ASPx.Browser.Chrome)
  return str;
 return str.length < inlineStringLength ? str : JSON.parse(JSON.stringify(str));
};
Str.Insert = function(str, subStr, index) { 
 var leftText = str.slice(0, index);
 var rightText = str.slice(index);
 return leftText + subStr + rightText;
};
Str.InsertEx = function(str, subStr, startIndex, endIndex) { 
 var leftText = str.slice(0, startIndex);
 var rightText = str.slice(endIndex);
 return leftText + subStr + rightText;
};
var greekSLFSigmaChar = String.fromCharCode(962);
var greekSLSigmaChar = String.fromCharCode(963);
Str.PrepareStringForFilter = function(s, saveCaseSensitive){
 if(!saveCaseSensitive)
  s = s.toLowerCase();
 if(ASPx.Browser.WebKitFamily) {
  return s.replace(new RegExp(greekSLFSigmaChar, "g"), greekSLSigmaChar);
 }
 return s;
};
Str.GetCoincideCharCount = function(text, filter, textMatchingDelegate) {
 var coincideText = ASPx.Str.PrepareStringForFilter(filter);
 var originText = ASPx.Str.PrepareStringForFilter(text);
 while(coincideText != "" && !textMatchingDelegate(originText, coincideText)) {
  coincideText = coincideText.slice(0, -1);
 }
 return coincideText.length;
};
Str.EndsWith = function(str, suffix) {
 return str.indexOf(suffix, str.length - suffix.length) !== -1;
};
ASPx.Str = Str;
var Xml = { };
Xml.Parse = function(xmlStr) {
 if(window.DOMParser) {
  var parser = new DOMParser();
  return parser.parseFromString(xmlStr, "text/xml");
 }
 else if(window.ActiveXObject) {
  var xmlDoc = new window.ActiveXObject("Microsoft.XMLDOM");
  if(xmlDoc) {
   xmlDoc.async = false;
   xmlDoc.loadXML(xmlStr);
   return xmlDoc;
  }
 }
 return null;
};
ASPx.Xml = Xml;
ASPx.Key = {
 F1     : 112,
 F2     : 113,
 F3     : 114,
 F4     : 115,
 F5     : 116,
 F6     : 117,
 F7     : 118,
 F8     : 119,
 F9     : 120,
 F10    : 121,
 F11    : 122,
 F12    : 123,
 Ctrl   : 17,
 Shift  : 16,
 Alt    : 18,
 Enter  : 13,
 Home   : 36,
 End    : 35,
 Left   : 37,
 Right  : 39,
 Up     : 38,
 Down   : 40,
 PageUp    : 33,
 PageDown  : 34,
 Esc    : 27,
 Space  : 32,
 Tab    : 9,
 Backspace : 8,
 Delete    : 46,
 Insert    : 45,
 ContextMenu  : 93,
 Windows   : 91,
 Decimal   : 110,
 CapsLock  : 20
};
ASPx.ModifierKey = {
 None: 0,
 Ctrl: 1 << (0 + 16),
 Shift: 1 << (2 + 16),
 Alt: 1 << (4 + 16),
 Meta: 1 << (8 + 16)
};
ASPx.KeyCode = {
 Backspace : 8,
 Tab    : 9,
 Enter  : 13,
 Pause  : 19,
 CapsLock  : 20,
 Esc    : 27,
 Space  : 32,
 PageUp    : 33,
 PageDown  : 34,
 End    : 35,
 Home   : 36,
 Left   : 37,
 Up     : 38,
 Right  : 39,
 Down   : 40,
 Insert    : 45,
 Delete    : 46,
 Key_0  : 48,
 Key_1  : 49,
 Key_2  : 50,
 Key_3  : 51,
 Key_4  : 52,
 Key_5  : 53,
 Key_6  : 54,
 Key_7  : 55,
 Key_8  : 56,
 Key_9  : 57,
 Key_a  : 65,
 Key_b  : 66,
 Key_c  : 67,
 Key_d  : 68,
 Key_e  : 69,
 Key_f  : 70,
 Key_g  : 71,
 Key_h  : 72,
 Key_i  : 73,
 Key_j  : 74,
 Key_k  : 75,
 Key_l  : 76,
 Key_m  : 77,
 Key_n  : 78,
 Key_o  : 79,
 Key_p  : 80,
 Key_q  : 81,
 Key_r  : 82,
 Key_s  : 83,
 Key_t  : 84,
 Key_u  : 85,
 Key_v  : 86,
 Key_w  : 87,
 Key_x  : 88,
 Key_y  : 89,
 Key_z  : 90,
 Windows   : 91,
 ContextMenu  : 93,
 Numpad_0  : 96,
 Numpad_1  : 97,
 Numpad_2  : 98,
 Numpad_3  : 99,
 Numpad_4  : 100,
 Numpad_5  : 101,
 Numpad_6  : 102,
 Numpad_7  : 103,
 Numpad_8  : 104,
 Numpad_9  : 105,
 Multiply  : 106,
 Add    : 107,
 Subtract  : 109,
 Decimal   : 110,
 Divide    : 111,
 F1     : 112,
 F2     : 113,
 F3     : 114,
 F4     : 115,
 F5     : 116,
 F6     : 117,
 F7     : 118,
 F8     : 119,
 F9     : 120,
 F10    : 121,
 F11    : 122,
 F12    : 123,
 NumLock   : 144,
 ScrollLock   : 145,
 Semicolon : 186,
 Equals    : 187,
 Comma  : 188,
 Dash   : 189,
 Period    : 190,
 ForwardSlash : 191,
 GraveAccent  : 192,
 OpenBracket  : 219,
 BackSlash : 220,
 CloseBracket : 221,
 SingleQuote  : 222
};
ASPx.ScrollBarMode = { Hidden: 0, Visible: 1, Auto: 2 };
ASPx.ColumnResizeMode = { None: 0, Control: 1, NextColumn: 2 };
var Selection = { };
Selection.Set = function(input, startPos, endPos, scrollToSelection, isApi) {
 if(!ASPx.IsExistsElement(input))
  return;
 var isInputFocused = ASPx.GetActiveElement() === input;
 var isInputNativeFocusLocked = ASPx.VirtualKeyboardUI.getInputNativeFocusLocked();
 if(!isApi && Browser.VirtualKeyboardSupported && (!isInputFocused || isInputNativeFocusLocked))
  return;
 var textLen = input.value.length;
 startPos = ASPx.GetDefinedValue(startPos, 0);
 endPos = ASPx.GetDefinedValue(endPos, textLen);
 if(startPos < 0)
  startPos = 0;
 if(endPos < 0 || endPos > textLen)
  endPos = textLen;
 if(startPos > endPos)
  startPos = endPos;
 var makeReadOnly = false;
 if(Browser.WebKitFamily && input.readOnly) {
  input.readOnly = false;
  makeReadOnly = true;
 }
 try {
  if(Browser.Firefox && Browser.Version >= 8) 
   input.setSelectionRange(startPos, endPos, "backward");
  else {
   forceScrollToSelectionRange(input, startPos, endPos);
   input.setSelectionRange(startPos, endPos);
  }
  if(Browser.Opera || Browser.Firefox || Browser.Chrome || Browser.Edge || Browser.EdgeWebKit) 
   input.focus();
 } catch(e) { }
 if(scrollToSelection && input.tagName == 'TEXTAREA') {
  var scrollHeight = input.scrollHeight;
  var approxCaretPos = startPos;
  var scrollTop = Math.max(Math.round(approxCaretPos * scrollHeight / textLen  - input.clientHeight / 2), 0);
  input.scrollTop = scrollTop;
 }
 if(makeReadOnly)
  input.readOnly = true;
};
var getTextWidthBeforePos = function(input, pos) {
 return ASPx.GetSizeOfText(input.value.toString().substr(0, pos), ASPx.GetCurrentStyle(input)).width;
};
var forceScrollToSelectionRange = function(input, startPos, endPos) {
 if(endPos === input.value.length)
  input.scrollLeft = input.scrollWidth;
 else if(startPos === 0 && endPos === 0)
  input.scrollLeft = 0;
 else {
  var inputRawWidth = ASPx.GetElementOffsetWidth(input) - ASPx.GetLeftRightBordersAndPaddingsSummaryValue(input);
  if(inputRawWidth < input.scrollWidth) {
   var widthBeforeEndPos = getTextWidthBeforePos(input, endPos) + caretWidth;
   if(input.scrollLeft < widthBeforeEndPos - inputRawWidth)
    input.scrollLeft = widthBeforeEndPos - inputRawWidth;
   else {
    var widthBeforeStartPos = getTextWidthBeforePos(input, startPos) - caretWidth;
    if(input.scrollLeft > widthBeforeStartPos)
     input.scrollLeft = widthBeforeStartPos;
   }
  }
 }
};
Selection.GetInfo = function(input) {
 var start, end;
 try {
  start = input.selectionStart;
  end = input.selectionEnd;
 } catch (e) {
 }
 return { startPos: start, endPos: end };
};
Selection.GetExtInfo = function(input) {
 var start = 0, end = 0;
 try {
  start = input.selectionStart;
  end = input.selectionEnd;
 } catch (e) {
 }
 return {startPos: start, endPos: end}; 
};
Selection.SetCaretPosition = function(input, caretPos) {
 if(typeof caretPos === "undefined" || caretPos < 0)
  caretPos = input.value.length;
 Selection.Set(input, caretPos, caretPos, true);
};
Selection.GetCaretPosition = function(element, isDialogMode) {
 var pos = 0;
 if("selectionStart" in element) {
  pos = element.selectionStart;
 } else if("selection" in document) {
  element.focus();
  var sel = document.selection.createRange(),
   selLength = document.selection.createRange().text.length;
  sel.moveStart("character", -element.value.length);
  pos = sel.text.length - selLength;
 }
 if(isDialogMode && !pos) {
  pos = element.value.length - 1;
 }
 return pos;
};
Selection.Clear = function() {
 try {
  if(window.getSelection) {
   window.getSelection().removeAllRanges();
  }
  else if(document.selection) {
   if(document.selection.empty)
    document.selection.empty();
   else if(document.selection.clear)
    document.selection.clear();
  }
 } catch(e) {
 }
};
Selection.ClearOnMouseMove = function(evt) {
 Selection.Clear();
};
Selection.SetElementSelectionEnabled = function(element, value) {
 var userSelectValue = value ? "" : "none";
 var func = value ? Evt.DetachEventFromElement : Evt.AttachEventToElement;
 if(Browser.Firefox)
  element.style.MozUserSelect = userSelectValue;
 else if(Browser.WebKitFamily)
  element.style.webkitUserSelect = userSelectValue;
 else if(Browser.Edge)
  element.style.msUserSelect = userSelectValue;
 else if(Browser.Opera)
  func(element, "mousemove", Selection.Clear);
 else {
  func(element, "selectstart", ASPx.FalseFunction);
  func(element, "mousemove", Selection.Clear);
 }
};
Selection.SetElementAsUnselectable = function(element, isWithChild, recursive) {
 if(element && element.nodeType == 1) {
  element.unselectable = "on";
  if(Browser.NetscapeFamily)
   element.onmousedown = ASPx.FalseFunction;
  if(Browser.WebKitFamily)
   Evt.AttachEventToElement(element, "mousedown", Evt.PreventEventAndBubble);
  if(isWithChild === true){
   for(var j = 0; j < element.childNodes.length; j ++)
    Selection.SetElementAsUnselectable(element.childNodes[j], (!!recursive ? true : false), (!!recursive));
  }
 }
};
Selection.AreEqual = function(selection1, selection2) {
 return selection1.startPos === selection2.startPos && selection1.endPos === selection2.endPos;
};
ASPx.Selection = Selection;
var MouseScroller = { };
MouseScroller.MinimumOffset = 10;
MouseScroller.Create = function(getElement, getScrollXElement, getScrollYElement, needPreventScrolling, vertRecursive, onMouseDown, onMouseMove, onMouseUp, onMouseUpMissed) {
 var element = getElement();
 if(!element) 
  return;
 if(!element.dxMouseScroller)
  element.dxMouseScroller = new MouseScroller.Extender(getElement, getScrollXElement, getScrollYElement, needPreventScrolling, vertRecursive, onMouseDown, onMouseMove, onMouseUp, onMouseUpMissed);
 return element.dxMouseScroller;
};
MouseScroller.Extender = function(getElement, getScrollXElement, getScrollYElement, needPreventScrolling, vertRecursive, onMouseDown, onMouseMove, onMouseUp, onMouseUpMissed) {
 this.getElement = getElement;
 this.getScrollXElement = getScrollXElement;
 this.getScrollYElement = getScrollYElement;
 this.needPreventScrolling = needPreventScrolling;
 this.vertRecursive = !!vertRecursive;
 this.createHandlers(onMouseDown || function() { }, onMouseMove || function() { }, onMouseUp || function() { }, onMouseUpMissed || function() { });
 this.update();
};
MouseScroller.Extender.prototype = {
 update: function() {
  if(this.element)
   Evt.DetachEventFromElement(this.element, ASPx.TouchUIHelper.touchMouseDownEventName, this.mouseDownHandler);
  this.element = this.getElement();
  Evt.AttachEventToElement(this.element, ASPx.TouchUIHelper.touchMouseDownEventName, this.mouseDownHandler);  
  Evt.AttachEventToElement(this.element, "click", this.mouseClickHandler);   
  if(Browser.MSTouchUI && this.element.className.indexOf(ASPx.TouchUIHelper.msTouchDraggableClassName) < 0)
   this.element.className += " " + ASPx.TouchUIHelper.msTouchDraggableClassName;
  this.scrollXElement = this.getScrollXElement();
  this.scrollYElement = this.getScrollYElement();
 },
 createHandlers: function(onMouseDown, onMouseMove, onMouseUp, onMouseUpMissed) {
  var mouseDownCounter = 0;
  this.onMouseDown = onMouseDown;
  this.onMouseMove = onMouseMove;
  this.onMouseUp = onMouseUp;  
  this.mouseDownHandler = function(e) {
   if(mouseDownCounter++ > 0) {
    this.finishScrolling();
    onMouseUpMissed();
   }
   var eventSource = Evt.GetEventSource(e);
   var requirePreventCustonScroll = ASPx.IsExists(ASPx.TouchUIHelper.RequirePreventCustomScroll) && ASPx.TouchUIHelper.RequirePreventCustomScroll(eventSource, this.element);
   this.requirePreventScroll = requirePreventCustonScroll || this.needPreventScrolling && this.needPreventScrolling(eventSource);
   if(this.requirePreventScroll)
    return;
   this.scrollableTreeLine = this.GetScrollableElements();
   this.firstX = this.prevX = Evt.GetEventX(e);
   this.firstY = this.prevY = Evt.GetEventY(e);
   Evt.AttachEventToDocument(ASPx.TouchUIHelper.touchMouseMoveEventName, this.mouseMoveHandler);
   Evt.AttachEventToDocument(ASPx.TouchUIHelper.touchMouseUpEventName, this.mouseUpHandler);
   this.onMouseDown(e);
  }.aspxBind(this);
  this.mouseMoveHandler = function(e) {
   if(ASPx.TouchUIHelper.isGesture)
    return;
   var x = Evt.GetEventX(e);
   var y = Evt.GetEventY(e);
   var xDiff = this.prevX - x;
   var yDiff = this.prevY - y;
   if(this.vertRecursive) {
    var isTopDirection = yDiff < 0;
    this.scrollYElement = this.GetElementForVertScrolling(isTopDirection, this.prevIsTopDirection, this.scrollYElement);
    this.prevIsTopDirection = isTopDirection;
   }
   if(this.scrollXElement && xDiff != 0)
    this.scrollXElement.scrollLeft += xDiff;
   if(this.scrollYElement && yDiff != 0) {
    this.scrollYElement.scrollTop += yDiff;
    var isOuterScrollableElement = this.scrollableTreeLine[this.scrollableTreeLine.length - 1] == this.scrollYElement;
    if(isOuterScrollableElement)
     y += yDiff;
   }
   this.prevX = x;
   this.prevY = y;
   Evt.PreventEvent(e);
   this.onMouseMove(e);
  }.aspxBind(this);
  this.mouseUpHandler = function(e) {
   this.finishScrolling();
   this.onMouseUp(e);
  }.aspxBind(this);
  this.mouseClickHandler = function(e){
   if(this.requirePreventScroll || (ASPx.IsExists(e.isTrusted) && !e.isTrusted))
    return;
   var xDiff = this.firstX - Evt.GetEventX(e);
   var yDiff = this.firstY - Evt.GetEventY(e);
   if(xDiff > MouseScroller.MinimumOffset || yDiff > MouseScroller.MinimumOffset)
    return Evt.PreventEventAndBubble(e);
  }.aspxBind(this);
  this.finishScrolling = function() {
   Evt.DetachEventFromDocument(ASPx.TouchUIHelper.touchMouseMoveEventName, this.mouseMoveHandler);
   Evt.DetachEventFromDocument(ASPx.TouchUIHelper.touchMouseUpEventName, this.mouseUpHandler);
   this.scrollableTreeLine = [];
   this.prevIsTopDirection = null;
   mouseDownCounter--;
  };
 },
 GetScrollableElements: function() {
  if(!this.vertRecursive) return [ ];
  var isHtmlScrollableElement = !ASPx.Browser.IsQuirksMode && !ASPx.Browser.Safari;
  var outerScrollableElementTag = isHtmlScrollableElement ? "HTML" : "BODY";
  return ASPx.GetElementTreeLine(this.element, null, function(el) { return el == document; })
   .filter(function(el) {
    var tagName = el.tagName;
    if(isHtmlScrollableElement && tagName == "BODY")
     return false;
    return ASPx.IsScrollableElement(el, false, true) || tagName == outerScrollableElementTag || el.dxScrollable;
   }.bind(this));
 },
 GetElementForVertScrolling: function(currentIsTop, prevIsTop, prevElement) {
  if(prevElement && currentIsTop === prevIsTop && this.GetVertScrollExcess(prevElement, currentIsTop) > 0)
   return prevElement;
  for(var i = 0; i < this.scrollableTreeLine.length; i++) {
   var element = this.scrollableTreeLine[i];
   var excess = this.GetVertScrollExcess(element, currentIsTop);
   if(excess > 0)
    return element;
  }
  return null;
 },
 GetVertScrollExcess: function(element, isTop) {
  if(isTop)
   return element.scrollTop;
  var isDocument = element.tagName == "HTML" || ASPx.Browser.Safari && !ASPx.Browser.IsQuirksMode && element.tagName == "BODY";
  var clientHeight = isDocument ? ASPx.GetDocumentClientHeight() : element.clientHeight;
  return element.scrollHeight - clientHeight - element.scrollTop;
 }
};
ASPx.MouseScroller = MouseScroller;
var Evt = { };
Evt.GetEvent = function(evt){
 return evt; 
};
Evt.IsEventPrevented = function(evt) {
 return evt.defaultPrevented || evt.returnValue === false;
};
Evt.PreventEvent = function(evt){
 if(evt.preventDefault) {
  if(evt.cancelable)
   evt.preventDefault();
 }
 else
  evt.returnValue = false;
 return false;
};
Evt.PreventEventAndBubble = function(evt){
 Evt.PreventEvent(evt);
 if(evt.stopPropagation)
  evt.stopPropagation();
 evt.cancelBubble = true;
 return false;
};
Evt.CancelBubble = function(evt){
 evt.stopPropagation();
 return false;
};
Evt.PreventImageDragging = function(image) {
 if(image)
  image.ondragstart = function() { return false; };
};
Evt.PreventDragStart = function(evt) {
 evt = Evt.GetEvent(evt);
 var element = Evt.GetEventSource(evt);
 if(element.releaseCapture)
  element.releaseCapture(); 
 return false;
};
Evt.PreventElementDrag = function(element) {
 Evt.AttachEventToElement(element, "mousedown", Evt.PreventEvent);
};
Evt.PreventElementDragAndSelect = function(element, skipMouseMove, skipIESelect){
 if(Browser.WebKitFamily)
  Evt.AttachEventToElement(element, "selectstart", Evt.PreventEventAndBubble);
};
Evt.GetEventSource = function(evt){
 if(!ASPx.IsExists(evt)) return null; 
 return evt.srcElement ? evt.srcElement : evt.target;
};
Evt.GetKeyCode = function(srcEvt) {
 return Browser.NetscapeFamily || Browser.Opera ? srcEvt.which : srcEvt.keyCode;
};
function clientEventRequiresDocScrollCorrection() {
 var isSafariVerLess3 = Browser.Safari && Browser.Version < 3,
  isMacOSMobileVerLess51 = Browser.MacOSMobilePlatform && Browser.Version < 5.1;
 return Browser.AndroidDefaultBrowser || Browser.AndroidChromeBrowser || !(isSafariVerLess3 || isMacOSMobileVerLess51);
}
Evt.GetEventX = function(evt){
 if(ASPx.TouchUIHelper.isTouchEvent(evt))
  return ASPx.TouchUIHelper.getEventX(evt);
 return evt.clientX + (clientEventRequiresDocScrollCorrection() ? ASPx.GetDocumentScrollLeft() : 0);
};
Evt.GetEventY = function(evt){
 if(ASPx.TouchUIHelper.isTouchEvent(evt))
  return ASPx.TouchUIHelper.getEventY(evt);
 return evt.clientY + (clientEventRequiresDocScrollCorrection() ? ASPx.GetDocumentScrollTop() : 0 );
};
Evt.IsLeftButtonPressed = function(evt) {
 if(ASPx.TouchUIHelper.isTouchEvent(evt))
  return true;
 evt = Evt.GetEvent(evt);
 if(!evt) return false;
 if(Browser.WebKitFamily) {
  if(evt.type === "pointermove")
   return evt.buttons === 1;
  return evt.which == 1;
 } else if(Browser.NetscapeFamily || Browser.Edge) {
  if(evt.type === ASPx.TouchUIHelper.touchMouseMoveEventName)
   return evt.buttons === 1;
  return evt.which == 1;
 } else if(Browser.Opera)
  return evt.button == 0;
 return true;
};
Evt.IsRightButtonPressed = function(evt){
 evt = Evt.GetEvent(evt);
 if(!ASPx.IsExists(evt)) return false;
 if(Browser.IE || Browser.Edge) {
  if(evt.type === "pointermove")
   return evt.buttons === 2;
  return evt.button == 2;
 }
 else if(Browser.NetscapeFamily || Browser.WebKitFamily)
  return evt.which == 3;
 else if (Browser.Opera)
  return evt.button == 1;
 return true;
};
Evt.GetWheelDelta = function(evt) {
 var ret;
 if(Browser.NetscapeFamily && Browser.MajorVersion < 17)
  ret = -evt.detail;
 else if(Browser.Safari)
  ret = evt.wheelDelta;
 else
  ret = -evt.deltaY;
 if(Browser.Opera && Browser.Version < 9)
  ret = -ret;
 return ret;
};
Evt.IsWheelEventWithDirection = function(evt) {
 return ASPx.Data.ArrayContains(["wheel", "mousewheel"], evt.type);
};
Evt.GetWheelDeltaX = function(evt) {
 if(evt.type === "wheel")
  return -evt.deltaX;
 if(evt.type === "mousewheel")
  return evt.wheelDeltaX;
};
Evt.GetWheelDeltaY = function(evt) {
 if(evt.type === "wheel")
  return -evt.deltaY;
 if(evt.type === "mousewheel")
  return evt.wheelDeltaY;
};
Evt.IsPassiveListenersSupported = function() {
 if(Browser.Chrome && Browser.MajorVersion > 69 || Browser.Edge && Browser.MajorVersion > 15 || Browser.Firefox && Browser.MajorVersion > 62)
  return true;
 if(Evt.isPassiveListenersSupported === undefined) {
  Evt.isPassiveListenersSupported = false;
  try {
   var options = Object.defineProperty({}, "passive", { get: function() { Evt.isPassiveListenersSupported = true; } });
   window.addEventListener("test", options, options);
   window.removeEventListener("test", options, options);
  }
  catch(err) { Evt.isPassiveListenersSupported = false; }
 }
 return !!Evt.isPassiveListenersSupported;
};
Evt.AttachEventToElement = function(element, eventName, func, onlyBubbling, passive) {
 if(element.addEventListener)
  element.addEventListener(eventName, func, Evt.IsPassiveListenersSupported() ? { capture: !onlyBubbling, passive: !!passive } : !onlyBubbling);
 else
  element.attachEvent("on" + eventName, func);
};
Evt.DetachEventFromElement = function(element, eventName, func, onlyBubbling) {
 if(element.removeEventListener)
  element.removeEventListener(eventName, func, Evt.IsPassiveListenersSupported() ? { capture: !onlyBubbling } : !onlyBubbling);
 else
  element.detachEvent("on" + eventName, func);
};
Evt.AttachEventToDocument = function(eventName, func) {
 var attachingAllowed = ASPx.TouchUIHelper.onEventAttachingToDocument(eventName, func);
 if(attachingAllowed)
  Evt.AttachEventToDocumentCore(eventName, func);
};
Evt.AttachEventToDocumentCore = function(eventName, func) {
 Evt.AttachEventToElement(document, eventName, func);
};
Evt.DetachEventFromDocument = function(eventName, func) {
 Evt.DetachEventFromDocumentCore(eventName, func);
 ASPx.TouchUIHelper.onEventDettachedFromDocument(eventName, func);
};
Evt.DetachEventFromDocumentCore = function(eventName, func){
 Evt.DetachEventFromElement(document, eventName, func);
};
Evt.GetMouseWheelEventName = function() {
 if(Browser.Safari)
  return "mousewheel";
 if(Browser.NetscapeFamily && Browser.MajorVersion < 17)
  return "DOMMouseScroll";
 return "wheel";
};
Evt.AttachMouseEnterToElement = function (element, onMouseOverHandler, onMouseOutHandler) {
 Evt.AttachEventToElement(element, ASPx.TouchUIHelper.pointerEnabled ? ASPx.TouchUIHelper.pointerOverEventName : "mouseover", function (evt) { mouseEnterHandler(evt, element, onMouseOverHandler, onMouseOutHandler); });
 Evt.AttachEventToElement(element, ASPx.TouchUIHelper.pointerEnabled ? ASPx.TouchUIHelper.pointerOutEventName : "mouseout", function (evt) { mouseEnterHandler(evt, element, onMouseOverHandler, onMouseOutHandler); });
};
Evt.GetEventRelatedTarget = function(evt, isMouseOverEvent) {
 return evt.relatedTarget || (isMouseOverEvent ? evt.srcElement : evt.toElement);
};
function mouseEnterHandler(evt, element, onMouseOverHandler, onMouseOutHandler) {
 var isMouseOverExecuted = !!element.dxMouseOverExecuted;
 var isMouseOverEvent = (evt.type == "mouseover" || evt.type == ASPx.TouchUIHelper.pointerOverEventName);
 if(isMouseOverEvent && isMouseOverExecuted || !isMouseOverEvent && !isMouseOverExecuted)
  return;
 var source = Evt.GetEventRelatedTarget(evt, isMouseOverEvent);
 if(!ASPx.GetIsParent(element, source)) {
  element.dxMouseOverExecuted = isMouseOverEvent;
  if(isMouseOverEvent)
   onMouseOverHandler(element);
  else
   onMouseOutHandler(element);
 }
 else if(isMouseOverEvent && !isMouseOverExecuted) {
  element.dxMouseOverExecuted = true;
  onMouseOverHandler(element);
 }
}
Evt.DispatchEvent = function(target, eventName, canBubble, cancellable) {
 var event = document.createEvent("Event");
 event.initEvent(eventName, canBubble || false, cancellable || false);
 target.dispatchEvent(event);
};
Evt.EmulateDocumentOnMouseDown = function(evt) {
 Evt.EmulateOnMouseDown(document, evt);
};
Evt.EmulateOnMouseDown = function(element, evt) {
 if(!Browser.WebKitFamily){
  var emulatedEvt = document.createEvent("MouseEvents");
  emulatedEvt.initMouseEvent("mousedown", true, true, window, 0, evt.screenX, evt.screenY, 
   evt.clientX, evt.clientY, evt.ctrlKey, evt.altKey, evt.shiftKey, false, 0, null);
  element.dispatchEvent(emulatedEvt);
 }
};
Evt.EmulateOnMouseEvent = function (type, element, evt) {
 evt.type = type;
 var emulatedEvt = document.createEvent("MouseEvents");
 emulatedEvt.initMouseEvent(type, true, true, window, 0, evt.screenX, evt.screenY,
  evt.clientX, evt.clientY, evt.ctrlKey, evt.altKey, evt.shiftKey, false, 0, null);
 emulatedEvt.target = element;
 element.dispatchEvent(emulatedEvt);
};
Evt.EmulateMouseClick = function (element, evt) {
 var x = ASPx.GetElementOffsetWidth(element) / 2;
 var y = ASPx.GetElementOffsetHeight(element) / 2;
 if (!evt)
  evt = {
   bubbles: true,
   cancelable: true,
   view: window,
   detail: 1,
   screenX: 0,
   screenY: 0,
   clientX: x,
   clientY: y,
   ctrlKey: false,
   altKey: false,
   shiftKey: false,
   metaKey: false,
   button: 0,
   relatedTarget: null
  };
 Evt.EmulateOnMouseEvent("mousedown", element, evt);
 Evt.EmulateOnMouseEvent("mouseup", element, evt);
 Evt.EmulateOnMouseEvent("click", element, evt);
};
Evt.DoElementClick = function(element) {
 try{
  element.click();
 }
 catch(e){ 
 }
};
Evt.IsActionKeyPressed = function(evt) {
 return evt.keyCode === ASPx.Key.Space ||
     evt.keyCode === ASPx.Key.Enter ||
    (evt.keyCode === ASPx.Key.Down && evt.altKey);
};
Evt.InvokeMouseClickByKeyDown = function(evt, handler) {
 if(Evt.IsActionKeyPressed(evt)) {
  ASPx.Evt.PreventEvent(evt); 
  if(!handler)
   ASPx.Evt.GetEventSource(evt).onclick();
  else
   handler(evt);
 }
};
Evt.AttachContextMenuToElement = function (element, handler, onlyBubbling) {
 if (ASPx.TouchUIHelper.useLongTapHelper())
  element.detachContextMenuEventHandler = ASPx.TouchUIHelper.attachLongTapHandler(element, handler, onlyBubbling);
 else
  Evt.AttachEventToElement(element, "contextmenu", handler, onlyBubbling);
};
Evt.DetachContextMenuFromElement = function (element, handler) {
 if (element.detachContextMenuEventHandler)
  element.detachContextMenuEventHandler();
 else
  Evt.DetachEventFromElement(element, "contextmenu", handler);
};
Evt.PreventContextMenuOnElement = function(element) {
 Evt.AttachContextMenuToElement(element, function(evt) {
  Evt.PreventEvent(evt);
 });
};
ASPx.Evt = Evt;
var Attr = { };
Attr.GetAttribute = function(obj, attrName){
 if(obj.getAttribute)
  return obj.getAttribute(attrName);
 else if(obj.getPropertyValue) {
  if(Browser.Firefox) { 
   try {
    return obj.getPropertyValue(attrName);
   } catch(e) {
    return obj[attrName];
   }
  }
  return obj.getPropertyValue(attrName);
 }
 return null;
};
Attr.SetAttribute = function(obj, attrName, value){
 if(obj.setAttribute)
  obj.setAttribute(attrName, value);
 else if(obj.setProperty)
  obj.setProperty(attrName, value, "");
};
Attr.ToggleAttribute = function(obj, attrName, value, condition) {
 if(condition)
  Attr.SetAttribute(obj, attrName, value);
 else
  Attr.RemoveAttribute(obj, attrName);
};
Attr.RemoveAttribute = function(obj, attrName){
 if(obj.removeAttribute)
  obj.removeAttribute(attrName);
 else if(obj.removeProperty)
  obj.removeProperty(attrName);
};
Attr.IsExistsAttribute = function(obj, attrName){
 var value = Attr.GetAttribute(obj, attrName);
 return (value != null) && (value !== "");
};
Attr.SetOrRemoveAttribute = function(obj, attrName, value) {
 if(!value)
  Attr.RemoveAttribute(obj, attrName);
 else
  Attr.SetAttribute(obj, attrName, value);
};
Attr.SaveAttribute = function(obj, attrName, savedObj, savedAttrName){
 if(!Attr.IsExistsAttribute(savedObj, savedAttrName)){
  var oldValue = Attr.IsExistsAttribute(obj, attrName) ? Attr.GetAttribute(obj, attrName) : ASPx.EmptyObject;
  Attr.SetAttribute(savedObj, savedAttrName, oldValue);
 }
};
Attr.SaveStyleAttribute = function(obj, attrName){
 Attr.SaveAttribute(obj.style, attrName, obj, "saved" + attrName);
};
Attr.ChangeAttributeExtended = function(obj, attrName, savedObj, savedAttrName, newValue){
 Attr.SaveAttribute(obj, attrName, savedObj, savedAttrName);
 Attr.SetAttribute(obj, attrName, newValue);
};
Attr.ChangeAttribute = function(obj, attrName, newValue){
 Attr.ChangeAttributeExtended(obj, attrName, obj, "saved" + attrName, newValue);
};
Attr.ChangeStyleAttribute = function(obj, attrName, newValue){
 Attr.ChangeAttributeExtended(obj.style, attrName, obj, "saved" + attrName, newValue);
};
Attr.ResetAttributeExtended = function(obj, attrName, savedObj, savedAttrName){
 Attr.SaveAttribute(obj, attrName, savedObj, savedAttrName);
 Attr.SetAttribute(obj, attrName, "");
 Attr.RemoveAttribute(obj, attrName);
};
Attr.ResetAttribute = function(obj, attrName){
 Attr.ResetAttributeExtended(obj, attrName, obj, "saved" + attrName);
};
Attr.ResetStyleAttribute = function(obj, attrName){
 Attr.ResetAttributeExtended(obj.style, attrName, obj, "saved" + attrName);
};
Attr.RestoreAttributeExtended = function(obj, attrName, savedObj, savedAttrName){
 if(Attr.IsExistsAttribute(savedObj, savedAttrName)){
  var oldValue = Attr.GetAttribute(savedObj, savedAttrName);
  if(oldValue != ASPx.EmptyObject)
   Attr.SetAttribute(obj, attrName, oldValue);
  else
   Attr.RemoveAttribute(obj, attrName);
  Attr.RemoveAttribute(savedObj, savedAttrName);
  return true;
 }
 return false;
};
Attr.RestoreAttribute = function(obj, attrName){
 return Attr.RestoreAttributeExtended(obj, attrName, obj, "saved" + attrName);
};
Attr.RestoreStyleAttribute = function(obj, attrName){
 return Attr.RestoreAttributeExtended(obj.style, attrName, obj, "saved" + attrName);
};
Attr.CopyAllAttributes = function(sourceElem, destElement) {
 var attrs = sourceElem.attributes;
 for(var n = 0; n < attrs.length; n++) {
  var attr = attrs[n];
  if(attr.specified) {
   var attrName = attr.nodeName;
   var attrValue = sourceElem.getAttribute(attrName, 2);
   if(attrValue == null)
    attrValue = attr.nodeValue;
   destElement.setAttribute(attrName, attrValue, 0); 
  }
 }
 if(sourceElem.style.cssText !== '')
  destElement.style.cssText = sourceElem.style.cssText;
};
Attr.RemoveAllAttributes = function(element, excludedAttributes) {
 var excludedAttributesHashTable = {};
 if(excludedAttributes)
  excludedAttributesHashTable = Data.CreateHashTableFromArray(excludedAttributes);
 if(element.attributes) {
  var attrArray = element.attributes;
  for(var i = 0; i < attrArray.length; i++) {
   var attrName = attrArray[i].name;
   if(!ASPx.IsExists(excludedAttributesHashTable[attrName.toLowerCase()])) {
    try {
     attrArray.removeNamedItem(attrName);
    } catch (e) { }
   }
  }
 }
};
Attr.RemoveStyleAttribute = function(element, attrName) {
 if(element.style) {
  if(Browser.Firefox && element.style[attrName]) 
   element.style[attrName] = "";
  if(element.style.removeAttribute && element.style.removeAttribute != "")
   element.style.removeAttribute(attrName);
  else if(element.style.removeProperty && element.style.removeProperty != "")
   element.style.removeProperty(attrName);
 }
};
Attr.RemoveAllStyles = function(element) {
 if(element.style) {
  for(var key in element.style)
   Attr.RemoveStyleAttribute(element, key);
    Attr.RemoveAttribute(element, "style");
 }
};
Attr.GetTabIndexAttributeName = function(){
 return "tabindex";
};
Attr.ChangeTabIndexAttribute = function(element){
 var attribute = Attr.GetTabIndexAttributeName(); 
 if(Attr.GetAttribute(element, attribute) != -1)
    Attr.ChangeAttribute(element, attribute, -1);
};
Attr.SaveTabIndexAttributeAndReset = function(element) {
 var attribute = Attr.GetTabIndexAttributeName();
 Attr.SaveAttribute(element, attribute, element, "saved" + attribute);
 Attr.SetAttribute(element, attribute, -1);
};
Attr.RestoreTabIndexAttribute = function(element){
 var attribute = Attr.GetTabIndexAttributeName();
 if(Attr.IsExistsAttribute(element, attribute)) {
  if(Attr.GetAttribute(element, attribute) == -1) {
   if(Attr.IsExistsAttribute(element, "saved" + attribute)){
    var oldValue = Attr.GetAttribute(element, "saved" + attribute);
    if(oldValue != ASPx.EmptyObject)
     Attr.SetAttribute(element, attribute, oldValue);
    else {
     if(Browser.WebKitFamily) 
      Attr.SetAttribute(element, attribute, 0); 
     Attr.RemoveAttribute(element, attribute);   
    }
    Attr.RemoveAttribute(element, "saved" + attribute); 
   }
  }
 }
};
Attr.ChangeAttributesMethod = function(enabled){
 return enabled ? Attr.RestoreAttribute : Attr.ResetAttribute;
};
Attr.InitiallyChangeAttributesMethod = function(enabled){
 return enabled ? Attr.ChangeAttribute : Attr.ResetAttribute;
};
Attr.ChangeStyleAttributesMethod = function(enabled){
 return enabled ? Attr.RestoreStyleAttribute : Attr.ResetStyleAttribute;
};
Attr.InitiallyChangeStyleAttributesMethod = function(enabled){
 return enabled ? Attr.ChangeStyleAttribute : Attr.ResetStyleAttribute;
};
Attr.ChangeEventsMethod = function(enabled){
 return enabled ? Evt.AttachEventToElement : Evt.DetachEventFromElement;
};
Attr.ChangeDocumentEventsMethod = function(enabled){
 return enabled ? Evt.AttachEventToDocument : Evt.DetachEventFromDocument;
};
Attr.ChangeCellSpanCount = function(cell, value, isColumnSpan) {
 if(!cell) return;
 var propertyKey = isColumnSpan ? "colSpan" : "rowSpan";
 var prevValue = cell[propertyKey];
 if(value > 1)
  cell[propertyKey] = value;
 else if(prevValue !== 1)
  Attr.RemoveAttribute(cell, propertyKey);
};
Attr.AppendScriptType = function(script) {
 if(!isHtml5Mode())
  script.type = "text/javascript";
};
Attr.AppendStyleType = function(style) {
 if(!isHtml5Mode())
  style.type = "text/css";
};
function isHtml5Mode() {
 return ASPx.DoctypeMode === "Html5";
}
ASPx.Attr = Attr;
var Aria = {
 atomic: "aria-atomic",
 checked: "aria-checked",
 descendant: "aria-activedescendant",
 described: "aria-describedby",
 disabled: "aria-disabled",
 expanded: "aria-expanded",
 haspopup: "aria-haspopup",
 invalid: "aria-invalid",
 label: "aria-label",
 labelled: "aria-labelledby",
 level: "aria-level",
 owns: "aria-owns",
 posinset: "aria-posinset",
 role: "role",
 selected: "aria-selected",
 setsize: "aria-setsize",
 valuemax: "aria-valuemax",
 valuemin: "aria-valuemin",
 valuenow: "aria-valuenow"
};
Aria.SetOrRemoveDescendant = function(obj, value) {
 ASPx.Attr.SetOrRemoveAttribute(obj, Aria.descendant, value);
};
Aria.SetOrRemoveLabel = function(obj, value) {
 ASPx.Attr.SetOrRemoveAttribute(obj, Aria.label, value);
};
Aria.SetOrRemoveDisabled = function(obj, value) {
 ASPx.Attr.SetOrRemoveAttribute(obj, Aria.disabled, value);
};
Aria.AppendLabel = function(obj, value, checkExists) {
 var currentValue = ASPx.Attr.GetAttribute(obj, Aria.label) || "";
 var resultParts = [ ];
 if(currentValue)
  resultParts.push(currentValue);
 var needAppendValue = value && (!checkExists || currentValue.indexOf(value) == -1);
 if(needAppendValue)
  resultParts.push(value);
 ASPx.Attr.SetAttribute(obj, Aria.label, resultParts.join(" "));
};
Aria.SetOrRemoveLabelled = function(obj, value) {
 ASPx.Attr.SetOrRemoveAttribute(obj, Aria.labelled, value);
};
Aria.SetApplicationRole = function(obj) {
  ASPx.Attr.SetAttribute(obj, Aria.role, "application");
};
Aria.SetSilence = function(obj) {
 ASPx.Attr.SetAttribute(obj, Aria.label, ";");
};
Aria.SetExpanded = function(obj, expanded) {
 if(!obj || !ASPx.Attr.GetAttribute(obj, Aria.expanded)) return;
 Aria.SetBoolAttribute(obj, Aria.expanded, expanded);
};
Aria.SetAtomic = function(obj, value) {
 Aria.SetBoolAttribute(obj, Aria.atomic, value);
};
Aria.SetBoolAttribute = function(obj, attribute, value) {
 if(value)
  ASPx.Attr.SetAttribute(obj, attribute, true);
 else 
  ASPx.Attr.SetAttribute(obj, attribute, false);
};
ASPx.Attr.Aria = Aria;
var Color = { };
function _aspxToHex(d) {
 return (d < 16) ? ("0" + d.toString(16)) : d.toString(16);
}
Color.RGBRegexp = /rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/;
Color.RGBARegexp = /rgba?\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,?\s*([0-9]*\.?[0-9]*)\s*\)/;
Color.ColorToHexadecimal = function(colorValue, isRGBA) {
 if(typeof(colorValue) == "number") {
  var r = colorValue & 0xFF;
  var g = (colorValue >> 8) & 0xFF;
  var b = (colorValue >> 16) & 0xFF;
  return "#" + _aspxToHex(r) + _aspxToHex(g) + _aspxToHex(b);
 }
 if(colorValue && (colorValue.substr(0, 3).toLowerCase() == "rgb")) {
  var regResult = colorValue.toLowerCase().match(isRGBA ? Color.RGBARegexp : Color.RGBRegexp);
  if(regResult) {
   var r = parseInt(regResult[1]);
   var g = parseInt(regResult[2]);
   var b = parseInt(regResult[3]);
   if (isRGBA)
    return { r: r, g: g, b: b, a: regResult[4] !== undefined ? parseFloat(regResult[4]) : 1 };
   return "#" + _aspxToHex(r) + _aspxToHex(g) + _aspxToHex(b);
  }
  return null;
 } 
 if(colorValue && (colorValue.charAt(0) == "#"))
  return colorValue;
 return null;
};
Color.Names = {
 AddColorNames: function(stringResourcesObj) {
  if(stringResourcesObj) {
   for(var key in stringResourcesObj)
    if(stringResourcesObj.hasOwnProperty(key))
     this[key] = stringResourcesObj[key];
  }
 }
};
ASPx.Color = Color;
var Url = { };
Url.Navigate = function(url, target) {
 var javascriptPrefix = "javascript:";
 if(!url || url === "")
  return;
 else if(url.indexOf(javascriptPrefix) != -1)
  eval(url.substr(javascriptPrefix.length));
 else {
  try {
   if(target != "")
    navigateTo(url, target);
   else
    location.href = url;
  }
  catch(e) {
  }
 }
};
Url.NavigateByLink = function(linkElement) {
 Url.Navigate(Attr.GetAttribute(linkElement, "href"), linkElement.target);
};
Url.GetAbsoluteUrl = function(url) {
 if(url)
  url = Url.getURLObject(url).href;
 return url;
};
Url.Redirect = function(url) {
 window.location.href = url;
};
var absolutePathPrefixes = 
 [ "about:", "file:///", "ftp://", "gopher://", "http://", "https://", "javascript:", "mailto:", "news:", "res://", "telnet://", "view-source:" ];
Url.isAbsoluteUrl = function(url) {
 if (url) {
  for (var i = 0; i < absolutePathPrefixes.length; i++) {
   if(url.indexOf(absolutePathPrefixes[i]) == 0)
    return true;
  }
 }
 return false;
};
Url.getURLObject = function(url) {
 var link = document.createElement('A');
 link.href = url || "";
 return { 
  href: link.href,
  protocol: link.protocol,
  host: link.host,
  port: link.port,
  pathname: link.pathname,
  search: link.search,
  hash: link.hash
 }; 
};
Url.getRootRelativeUrl = function(url) {
 return getRelativeUrl(url, !Url.isRootRelativeUrl(url), true); 
};
Url.getPathRelativeUrl = function(url) {
 return getRelativeUrl(url, !Url.isPathRelativeUrl(url), false);
};
function getRelativeUrl(url, isValid, isRootRelative) {
 if(url && !(/data:([^;]+\/?[^;]*)(;charset=[^;]*)?(;base64,)/.test(url)) && isValid) {
  var urlObject = Url.getURLObject(url);
  var baseUrlObject = Url.getURLObject();
  if(!Url.isAbsoluteUrl(url) || urlObject.host === baseUrlObject.host && urlObject.protocol === baseUrlObject.protocol) {
   url = urlObject.pathname;
   if(!isRootRelative)
    url = getPathRelativeUrl(baseUrlObject.pathname, url);
   url = url + urlObject.search + urlObject.hash;
  }
 }
 return url;   
}
function getPathRelativeUrl(baseUrl, url) {
 var requestSegments = getSegments(baseUrl, false);
 var urlSegments = getSegments(url, true);
 return buildPathRelativeUrl(requestSegments, urlSegments, 0, 0, "");
}
function getSegments(url, addTail) {
 var segments = [];
 var startIndex = 0;
 var endIndex = -1;
 while ((endIndex = url.indexOf("/", startIndex)) != -1) {
  segments.push(url.substring(startIndex, ++endIndex));
  startIndex = endIndex;
 }
 if(addTail && startIndex < url.length)
  segments.push(url.substring(startIndex, url.length)); 
 return segments;
}
function buildPathRelativeUrl(requestSegments, urlSegments, reqIndex, urlIndex, buffer) {
 if(urlIndex >= urlSegments.length)
  return buffer;
 if(reqIndex >= requestSegments.length)
  return buildPathRelativeUrl(requestSegments, urlSegments, reqIndex, urlIndex + 1, buffer + urlSegments[urlIndex]);
 if(requestSegments[reqIndex] === urlSegments[urlIndex] && urlIndex === reqIndex)
  return buildPathRelativeUrl(requestSegments, urlSegments, reqIndex + 1, urlIndex + 1, buffer);
 return buildPathRelativeUrl(requestSegments, urlSegments, reqIndex + 1, urlIndex, buffer + "../");
}
Url.isPathRelativeUrl = function(url) {
 return !!url && !Url.isAbsoluteUrl(url) && url.indexOf("/") != 0;  
};
Url.isRootRelativeUrl = function(url) {
 return !!url && !Url.isAbsoluteUrl(url) && url.indexOf("/") == 0 && url.indexOf("//") != 0;
};
function navigateTo(url, target) {
 var lowerCaseTarget = target.toLowerCase();
 if("_top" == lowerCaseTarget)
  top.location.href = url;
 else if("_self" == lowerCaseTarget)
  location.href = url;
 else if("_search" == lowerCaseTarget)
  openInNewWindow(url);
 else if("_media" == lowerCaseTarget)
  openInNewWindow(url);
 else if("_parent" == lowerCaseTarget)
  window.parent.location.href = url;
 else if("_blank" == lowerCaseTarget)
  openInNewWindow(url);
 else {
  var frame = getFrame(top.frames, target);
  if(frame != null)
   frame.location.href = url;
  else
   openInNewWindow(url);
 }
}
function openInNewWindow(url) {
 if(ASPx.Browser.Safari)
  openInNewWindowViaIframe(url);
 else {
  var newWindow = window.open();
  newWindow.opener = null;
  newWindow.location = url;
 }
}
function openInNewWindowViaIframe(url) {
 var iframe = document.createElement('iframe');
 iframe.style.display = 'none';
 document.body.appendChild(iframe);
 var iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
 var openArgs = '"' + url + '"';
 var script = iframeDoc.createElement('script');
 script.type = 'text/javascript';
 script.text = 'window.parent = null; ' +
  'window.top = null;' +
  'window.frameElement = null;' +
  'var child = window.open(' + openArgs + ');' +
  'child.opener = null';
 iframeDoc.body.appendChild(script);
 document.body.removeChild(iframe);
}
ASPx.Url = Url;
var Json = { };
function isValid(JsonString) {
 return !(/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(JsonString.replace(/"(\\.|[^"\\])*"/g, '')));
}
Json.Eval = function(jsonString, controlName) {
 if(isValid(jsonString)) {
  return eval("(" + jsonString + ")");
 } else {
  throw new Error(controlName + " received incorrect JSON-data: " + jsonString);
 }
};
Json.ToJson = function(param, skipEncodeHtml){
 var paramType = typeof(param);
 if((paramType == "undefined") || (param == null))
  return null;
 if((paramType == "object") && (typeof(param.__toJson) == "function"))
  return param.__toJson();
 if((paramType == "number") || (paramType == "boolean"))
  return param;
 if(param.constructor == Date)
  return dateToJson(param);
 if(paramType == "string") {
  var result = param.replace(/\\/g, "\\\\");
  result = result.replace(/"/g, "\\\"");
  result = result.replace(/\n/g, "\\n");
  result = result.replace(/\r/g, "\\r");
  if(!skipEncodeHtml) {
   result = result.replace(/</g, "\\u003c");
   result = result.replace(/>/g, "\\u003e");
  }
  return "\"" + result + "\"";
 }
 if(param.constructor == Array){
  var values = [];
  for(var i = 0; i < param.length; i++) {
   var jsonValue = Json.ToJson(param[i], skipEncodeHtml);
   if(jsonValue === null)
    jsonValue = "null";
   values.push(jsonValue);
  }
  return "[" + values.join(",") + "]";
 }
 var exceptKeys = {};
 if(ASPx.Ident.IsArray(param.__toJsonExceptKeys))
  exceptKeys = Data.CreateHashTableFromArray(param.__toJsonExceptKeys);
 exceptKeys["__toJsonExceptKeys"] = 1;
 var values = [];
 for(var key in param) {
  if(param.hasOwnProperty(key)) {
   if(ASPx.IsFunction(param[key]))
    continue;
   if(exceptKeys[key] == 1)
    continue;
   values.push(Json.ToJson(key) + ":" + Json.ToJson(param[key], skipEncodeHtml));
  }
 }
 return "{" + values.join(",") + "}";
};
function dateToJson(date) {
 var result = [ 
  date.getFullYear(),
  date.getMonth(),
  date.getDate()
 ];
 var time = {
  h: date.getHours(),
  m: date.getMinutes(),
  s: date.getSeconds(),
  ms: date.getMilliseconds()
 };
 if(time.h || time.m || time.s || time.ms)
  result.push(time.h);
 if(time.m || time.s || time.ms)
  result.push(time.m);
 if(time.s || time.ms)
  result.push(time.s);
 if(time.ms)
  result.push(time.ms);
 return "new Date(" + result.join() + ")";
}
ASPx.Json = Json;
ASPx.CreateClass = function(parentClass, properties) {
 if(arguments.length == 1) {
  properties = parentClass;
  parentClass = null;
 }
 var ret = function() {
  if(ret.preparing) 
   return delete(ret.preparing);
  if(ret.constr) {
   this.constructor = ret;
   ret.constr.apply(this, arguments);
  }
 };
 ret.prototype = {};
 if(parentClass) {
  parentClass.preparing = true;
  for(var name in parentClass) {
   if(parentClass.hasOwnProperty(name) && name != 'constr' && ASPx.IsFunction(parentClass[name]) && !ret[name])
    ret[name] = parentClass[name].aspxBind(parentClass);
  }
  ret.prototype = new parentClass;
  ret.prototype.constructor = parentClass;
  ret.constr = parentClass;
 }
 if(properties) {
  var constructorName = "constructor";
  for(var name in properties) {
   if(!properties.hasOwnProperty(name)) 
    continue;
   var getter = Object.getOwnPropertyDescriptor(properties, name).get;
   var setter = Object.getOwnPropertyDescriptor(properties, name).set;
   if(getter || setter)
    Object.defineProperty(ret.prototype, name, {
     set: setter,
     get: getter,
     enumerable: true,
     configurable: true
    });
   if(name != constructorName && !getter && !setter)
    ret.prototype[name] = properties[name];
  }
  if(properties[constructorName] && properties[constructorName] != Object)
   ret.constr = properties[constructorName];
 }
 return ret;
};
var registeredMixins = {};
ASPx.GetMixin = function (name, baseClass) {
 var mixinCache = baseClass._mixins || (baseClass._mixins = {});
 var resultClass = mixinCache[name];
 if (!resultClass) {
  var mixinCodeBuilder = registeredMixins[name];
  if (!mixinCodeBuilder)
   throw new Error("mixin with the '" + name + "' is not registered");
  var mixinCode = mixinCodeBuilder(baseClass);
  mixinCode.mixinName = name;
  resultClass = ASPx.CreateClass(baseClass, mixinCode);
  mixinCache[name] = resultClass;
 }
 return resultClass;
};
ASPx.RegisterMixin = function() {
 var name = arguments.length == 1 ? "mixin_" + ASPx.CreateGuid() : arguments[0];
 var mixinCodeBuilder = arguments[arguments.length - 1];
 if (registeredMixins[name])
  throw new Error("mixin with the '" + name + "' name is already defined");
 registeredMixins[name] = mixinCodeBuilder;
 return function(baseClass) { return ASPx.GetMixin(name, baseClass); };
};
ASPx.FormatCallbackArg = function(prefix, arg) {
 if(prefix == null && arg == null)
  return ""; 
 if(prefix == null) prefix = "";
 if(arg == null) arg = "";
 if(arg != null && !ASPx.IsExists(arg.length) && ASPx.IsExists(arg.value))
  arg = arg.value;
 arg = arg.toString();
 return [prefix, '|', arg.length, '|' , arg].join('');
};
ASPx.FormatCallbackArgs = function(callbackData) {
 var sb = [ ];
 for(var i = 0; i < callbackData.length; i++)
  sb.push(ASPx.FormatCallbackArg(callbackData[i][0], callbackData[i][1]));
 return sb.join("");
};
ASPx.ParseShortcutString = function(shortcutString) {
 if(!shortcutString)
  return 0;
 var isCtrlKey = false;
 var isShiftKey = false;
 var isAltKey = false;
 var isMetaKey = false;
 var keyCode = null;
 var shcKeys = shortcutString.toString().split("+");
 if(shcKeys.length > 0) {
  for(var i = 0; i < shcKeys.length; i++) {
   var key = Str.Trim(shcKeys[i].toUpperCase());
   switch (key) {
    case "CONTROL":
    case "CONTROLKEY":
    case "CTRL":
     isCtrlKey = true;
     break;
    case "SHIFT":
    case "SHIFTKEY":
     isShiftKey = true;
     break;
    case "ALT":
     isAltKey = true;
     break;
    case "CMD":
     isMetaKey = true;
     break;
    case "F1": keyCode = ASPx.Key.F1; break;
    case "F2": keyCode = ASPx.Key.F2; break;
    case "F3": keyCode = ASPx.Key.F3; break;
    case "F4": keyCode = ASPx.Key.F4; break;
    case "F5": keyCode = ASPx.Key.F5; break;
    case "F6": keyCode = ASPx.Key.F6; break;
    case "F7": keyCode = ASPx.Key.F7; break;
    case "F8": keyCode = ASPx.Key.F8; break;
    case "F9": keyCode = ASPx.Key.F9; break;
    case "F10":   keyCode = ASPx.Key.F10; break;
    case "F11":   keyCode = ASPx.Key.F11; break;
    case "F12":   keyCode = ASPx.Key.F12; break;
    case "RETURN":
    case "ENTER": keyCode = ASPx.Key.Enter; break;
    case "HOME":  keyCode = ASPx.Key.Home; break;
    case "END":   keyCode = ASPx.Key.End; break;
    case "LEFT":  keyCode = ASPx.Key.Left; break;
    case "RIGHT": keyCode = ASPx.Key.Right; break;
    case "UP": keyCode = ASPx.Key.Up; break;
    case "DOWN":  keyCode = ASPx.Key.Down; break;
    case "PAGEUP": keyCode = ASPx.Key.PageUp; break;
    case "PAGEDOWN": keyCode = ASPx.Key.PageDown; break;
    case "SPACE": keyCode = ASPx.Key.Space; break;
    case "TAB":   keyCode = ASPx.Key.Tab; break;
    case "BACKSPACE": 
    case "BACK": keyCode = ASPx.Key.Backspace; break;
    case "CONTEXT": keyCode = ASPx.Key.ContextMenu; break;
    case "ESCAPE":
    case "ESC":
     keyCode = ASPx.Key.Esc;
     break;
    case "DELETE":
    case "DEL":
     keyCode = ASPx.Key.Delete;
     break;
    case "INSERT":
    case "INS":
     keyCode = ASPx.Key.Insert;
     break;
    case "PLUS":
     keyCode = "+".charCodeAt(0);
     break;
    default:
     keyCode = key.charCodeAt(0);
     break;
   }
  }
 } else
  ASPx.ShowErrorAlert("Invalid shortcut");
 return ASPx.GetShortcutCode(keyCode, isCtrlKey, isShiftKey, isAltKey, isMetaKey);
};
ASPx.GetShortcutCode = function(keyCode, isCtrlKey, isShiftKey, isAltKey, isMetaKey) {
 var value = keyCode;
 value |= isCtrlKey ? ASPx.ModifierKey.Ctrl : 0;
 value |= isShiftKey ? ASPx.ModifierKey.Shift : 0;
 value |= isAltKey ? ASPx.ModifierKey.Alt : 0;
 value |= isMetaKey ? ASPx.ModifierKey.Meta : 0;
 return value;
};
ASPx.GetShortcutCodeByEvent = function(evt) {
 return ASPx.GetShortcutCode(Evt.GetKeyCode(evt), evt.ctrlKey, evt.shiftKey, evt.altKey, ASPx.Browser.MacOSPlatform ? evt.metaKey : false);
};
ASPx.IsPasteShortcut = function(evt) {
 if(evt.type === "paste")
  return true;
 var keyCode = Evt.GetKeyCode(evt);
 if(Browser.NetscapeFamily && evt.which == 0)  
  keyCode = evt.keyCode;
 return (evt.ctrlKey && (keyCode == 118  || (keyCode == 86))) ||
     (evt.shiftKey && !evt.ctrlKey && !evt.altKey &&
     (keyCode == ASPx.Key.Insert)) ;
};
var NotPrintableKeyCodes = null;
ASPx.IsPrintableKey = function(keyCode) {
 if (!NotPrintableKeyCodes)
  NotPrintableKeyCodes = Object.keys(ASPx.Key).map(function(key) { return ASPx.Key[key]; });
 return !ASPx.Data.ArrayContains(NotPrintableKeyCodes, keyCode);
};
ASPx.SetFocus = function(element, selectAction) {
 function focusCore(element, selectAction){
  try {
    element.focus();
    if(selectAction) {
     var currentSelection = Selection.GetInfo(element);
     if(currentSelection.startPos == currentSelection.endPos) {
      switch(selectAction) {
       case "start":
        Selection.SetCaretPosition(element, 0);
        break;
       case "all":
        Selection.Set(element);
        break;
      }
     }
    }
   } catch (e) {
  }
 }
 if(ASPxClientUtils.iOSPlatform || ASPxClientUtils.androidPlatform) 
  focusCore(element, selectAction);
 else {
  window.setTimeout(function() { 
   focusCore(element, selectAction);
  }, ASPx.FOCUS_TIMEOUT);
 }
};
ASPx.IsFocusableCore = function(element, skipContainerVisibilityCheck) {
 var current = element;
 while(current && current.nodeType == 1) {
  if(current == element || !skipContainerVisibilityCheck(current)) {
   var tagName = current.tagName.toUpperCase();
   if(tagName == "BODY")
    return true;
   var disabledElementTags = ["INPUT", "BUTTON", "TEXTAREA", "SELECT", "OPTION"];
   if(disabledElementTags.indexOf(tagName) !== -1 && current.disabled || !ASPx.GetElementDisplay(current) || !ASPx.GetElementVisibility(current))
    return false;
  }
  current = current.parentNode;
 }
 return true;
};
ASPx.IsFocusable = function(element) {
 return ASPx.IsFocusableCore(element, ASPx.FalseFunction);
};
ASPx.RemoveFocus = function(parent) {
 var div = document.createElement('div');
 div.tabIndex = "-1";
 concealDivElement(div);
 parent.appendChild(div);
 if(ASPx.IsFocusable(div))
  div.focus();
 ASPx.RemoveElement(div);
};
function concealDivElement(div){
 div.style.position = "absolute";
 div.style.left = 0;
 div.style.top = 0;
 if(ASPx.Browser.WebKitFamily) {
  div.style.opacity = 0;
  div.style.width = 1;
  div.style.height = 1;
 } else {
  div.style.border = 0;
  div.style.width = 0;
  div.style.height = 0;
 }
}
var ActionElementsCache = ASPx.CreateClass(null, {
 constructor: function() {
  this.usageCounter = 0;
  this.elements = [ ];
  this.values = [ ];
 },
 IsActive: function() { return this.usageCounter > 0; },
 BeginUsage: function() {
  this.usageCounter++;
 },
 EndUsage: function() {
  this.usageCounter--;
  if(this.usageCounter === 0)
   this.Clear();
 },
 Add: function(element, value) {
  var index = this.elements.length;
  this.elements[index] = element;
  this.values[index] = value;
 },
 Get: function(element) { 
  var index = this.elements.indexOf(element);
  var hasValue = index > -1;
  var value = hasValue ? this.values[index] : undefined;
  return { hasValue: hasValue, value: value };
 },
 Clear: function() { 
  this.elements = [ ];
  this.values = [ ];
 }
});
ASPx.ActionElementsCache = new ActionElementsCache();
ASPx.IsActionElement = function(element) {
 if(!ASPx.IsExistsElement(element))
  return false;
 var useCache = ASPx.ActionElementsCache.IsActive();
 if(useCache) {
  var cacheValue = ASPx.ActionElementsCache.Get(element);
  if(cacheValue.hasValue)
   return cacheValue.value;
 }
 var isActionElement = ASPx.IsActionElementCore(element);
 if(useCache)
  ASPx.ActionElementsCache.Add(element, isActionElement);
 return isActionElement;
};
ASPx.IsActionElementCore = function(element) {
 var tabIndex = parseInt(ASPx.Attr.GetAttribute(element, ASPx.Attr.GetTabIndexAttributeName()));
 var hasTabIndex = !isNaN(tabIndex);
 var hasNonNegativeTabIndex = hasTabIndex && tabIndex > -1;
 var hasNegativeTabIndex = hasTabIndex && tabIndex < 0;
 var tagName = element.tagName;
 var focusableElementTags = ["BUTTON", "SELECT", "TEXTAREA", "OPTION", "IFRAME"];
 var isFocusableCore = ASPx.IsFocusable(element);
 var isFocusableTag = focusableElementTags.indexOf(tagName) !== -1;
 var isFocusableLink = tagName === "A" && (!!element.href || hasNonNegativeTabIndex);
 var isFocusableInput = tagName === "INPUT" && element.type.toLowerCase() !== "hidden";
 var isFocusableByTabIndex = tagName !== "INPUT" && hasNonNegativeTabIndex;
 var isEditableDiv = tagName == "DIV" && element.contentEditable === "true";
 return isFocusableCore && !hasNegativeTabIndex && (isFocusableTag || isFocusableLink || isFocusableInput || isFocusableByTabIndex || isEditableDiv);
};
ASPx.GetCanBeActiveElementsInContainer = function(container) {
 var canBeActiveTags = ["INPUT", "A", "UL", "BUTTON", "TEXTAREA", "SELECT", "IFRAME"],
  canBeActiveElements = [];
 Data.ForEach(canBeActiveTags, function(tag) {
  var elements = container.getElementsByTagName(tag);
  canBeActiveElements = canBeActiveElements.concat([].slice.call(elements));
 });
 return canBeActiveElements;
};
function isActionElementAllowedByPredicate(element, predicate) {
  var allowedByPredicate = !predicate || predicate(element);
  return allowedByPredicate && ASPx.IsActionElement(element);
}
ASPx.FindChildActionElements = function(container, predicate) {
 return ASPx.GetNodes(container, function(el) {
  return isActionElementAllowedByPredicate(el, predicate);
 });
};
ASPx.FindAllSortedActionElements = function(container, predicate) {
 var result = [ ];
 if(!container || !container.getElementsByTagName) return result;
 var actionElements = ASPx.FindChildActionElements(container, predicate);
 var getTabOrderValue = function(el) {
  var tabIndex = parseInt(ASPx.Attr.GetAttribute(el, ASPx.Attr.GetTabIndexAttributeName()));
  return isNaN(tabIndex) ? 0 : tabIndex;
 };
 var positiveTabIndexElements = actionElements.filter(function(x) { return getTabOrderValue(x) > 0; });
 var nonPositiveTabIndexElements = actionElements.filter(function(x) { return getTabOrderValue(x) === 0; });
 var sortedTabIndexElements = positiveTabIndexElements.sort(function(x, y) { return getTabOrderValue(x) - getTabOrderValue(y); });
 result = sortedTabIndexElements.concat(nonPositiveTabIndexElements);
 return result;
};
ASPx.FindFirstChildActionElement = function(container, predicate) {
 if(!container || isActionElementAllowedByPredicate(container, predicate))
  return !container ? null : container;
 var sortedActionElements = ASPx.FindAllSortedActionElements(container, predicate);
 return sortedActionElements[0];
};
ASPx.FindLastChildActionElement = function(container, predicate) {
 if(!container)
  return null;
 var sortedActionElements = ASPx.FindAllSortedActionElements(container, predicate);
 var actionElement = sortedActionElements[sortedActionElements.length - 1];
 if(!actionElement && isActionElementAllowedByPredicate(container, predicate))
  actionElement = container;
 return actionElement;
};
ASPx.GetParentClientControls = function(name) {
 var nameParts = name.split("_");
 var result = [ ];
 var controlCollection = ASPx.GetControlCollection();
 for(var i = 1; i <= nameParts.length; i++) {
  var controlName = nameParts.slice(0, i).join("_");
  var control = controlCollection.Get(controlName);
  if(control)
   result.push(control);
 }
 return result;
};
ASPx.GetRootClientControl = function(childControlName) {
 var parentControls = ASPx.GetParentClientControls(childControlName);
 return parentControls[0];
};
ASPx.GetClientControlByElementID = function(elementID) {
 var parentControls = ASPx.GetParentClientControls(elementID);
 return parentControls[parentControls.length - 1];
};
ASPx.IsExists = function(obj){
 return (typeof(obj) != "undefined") && (obj != null);
};
ASPx.IsFunction = function(obj){
 return typeof(obj) == "function";
};
ASPx.IsNumber = function(str) {
 return !isNaN(parseFloat(str)) && isFinite(str);
};
ASPx.GetDefinedValue = function(value, defaultValue){
 return (typeof(value) != "undefined") ? value : defaultValue;
};
ASPx.CorrectJSFloatNumber = function(number) {
 var ret = 21; 
 var numString = number.toPrecision(21);
 numString = numString.replace("-", ""); 
 var integerDigitsCount = numString.indexOf(ASPx.PossibleNumberDecimalSeparators[0]);
 if(integerDigitsCount < 0)
  integerDigitsCount = numString.indexOf(ASPx.PossibleNumberDecimalSeparators[1]);
 var floatDigitsCount = numString.length - integerDigitsCount - 1;
 if(floatDigitsCount < 10)
  return number;
 if(integerDigitsCount > 0) {
  ret = integerDigitsCount + 12;
 }
 var toPrecisionNumber = Math.min(ret, 21);
 var newValueString = number.toPrecision(toPrecisionNumber);
 return parseFloat(newValueString, 10);
};
ASPx.CorrectRounding = function(number, step) { 
 var regex = /[,|.](.*)/,
  isFloatValue = regex.test(number),
  isFloatStep = regex.test(step);
 if(isFloatValue || isFloatStep) {
  var valueAccuracy = (isFloatValue) ? regex.exec(number)[0].length - 1 : 0,
   stepAccuracy = (isFloatStep) ? regex.exec(step)[0].length - 1 : 0,
   accuracy = Math.max(valueAccuracy, stepAccuracy);
  var multiplier = Math.pow(10, accuracy);
  number = Math.round((number + step) * multiplier) / multiplier;
  return number;
 }
 return number + step;
};
ASPx.GetActiveElement = function() {
 try{ return document.activeElement; } catch(e) { return null; }
};
var verticalScrollBarWidth;
ASPx.GetVerticalScrollBarWidth = function() {
 if(typeof(verticalScrollBarWidth) == "undefined") {
  var container = document.createElement("DIV");
  container.style.cssText = "position: absolute; top: 0px; left: 0px; visibility: hidden; width: 200px; height: 150px; overflow: hidden; box-sizing: content-box";
  document.body.appendChild(container);
  var child = document.createElement("P");
  container.appendChild(child);
  child.style.cssText = "width: 100%; height: 200px;";
  var widthWithoutScrollBar = child.offsetWidth;
  container.style.overflow = "scroll";
  var widthWithScrollBar = child.offsetWidth;
  if(widthWithoutScrollBar == widthWithScrollBar)
   widthWithScrollBar = container.clientWidth;
  verticalScrollBarWidth = widthWithoutScrollBar - widthWithScrollBar;
  document.body.removeChild(container);
 }
 return verticalScrollBarWidth;
};
function hideScrollBarCore(element, scrollName) {
 if(element.tagName == "IFRAME") {
  if((element.scrolling == "yes") || (element.scrolling == "auto")) {
   Attr.ChangeAttribute(element, "scrolling", "no");
   return true;
  }
 }
 else if(element.tagName == "DIV") {
  if((element.style[scrollName] == "scroll") || (element.style[scrollName] == "auto")) {
   Attr.ChangeStyleAttribute(element, scrollName, "hidden");
   return true;
  }
 }
 return false;
}
function restoreScrollBarCore(element, scrollName) {
 if(element.tagName == "IFRAME")
  return Attr.RestoreAttribute(element, "scrolling");
 else if(element.tagName == "DIV")
  return Attr.RestoreStyleAttribute(element, scrollName);
 return false;
}
ASPx.SetScrollBarVisibilityCore = function(element, scrollName, isVisible) {
 return isVisible ? restoreScrollBarCore(element, scrollName) : hideScrollBarCore(element, scrollName);
};
ASPx.SetScrollBarVisibility = function(element, isVisible) {
 if(ASPx.SetScrollBarVisibilityCore(element, "overflow", isVisible)) 
  return true;
 var result = ASPx.SetScrollBarVisibilityCore(element, "overflowX", isVisible)
  || ASPx.SetScrollBarVisibilityCore(element, "overflowY", isVisible);
 return result;
};
ASPx.SetInnerHtml = function(element, html) {
 setInnerHtmlInternal(element, html);
};
ASPx.GetInnerText = function(container) {
 if(Browser.Safari && Browser.MajorVersion <= 5) {
  var filter = getHtml2PlainTextFilter();
  setInnerHtmlInternal(filter, container.innerHTML);
  ASPx.SetElementDisplay(filter, true);
  var innerText = filter.innerText;
  ASPx.SetElementDisplay(filter, false);
  return innerText;
 } else if(Browser.NetscapeFamily || Browser.WebKitFamily || (Browser.IE && Browser.Version >= 9) || Browser.Edge) {
  return container.textContent;
 } else
  return container.innerText;
};
ASPx.GetEllipsisTooltipText = function(element) {
 var innerText = ASPx.GetInnerText(element);
 innerText = ASPx.RemoveComment(innerText);
 return innerText;
};
ASPx.RemoveComment = function(text) {
 var result = text;
 var commentStart = "<!--";
 var commentEnd = "//-->";
 var positionStart = result.indexOf(commentStart);
 while(positionStart > -1) {
  var positionEnd = result.indexOf(commentEnd);
  var startStr = result.substring(0, positionStart);
  var endStr = result.substring(positionEnd + commentEnd.length);
  result = startStr + endStr;
  positionStart = result.indexOf(commentStart);
 }
 return result;
};
var html2PlainTextFilter = null;
function getHtml2PlainTextFilter() {
 if(html2PlainTextFilter == null) {
  html2PlainTextFilter = document.createElement("DIV");
  html2PlainTextFilter.style.width = "0";
  html2PlainTextFilter.style.height = "0";
  html2PlainTextFilter.style.overflow = "visible";
  ASPx.SetElementDisplay(html2PlainTextFilter, false);
  document.body.appendChild(html2PlainTextFilter);
 }
 return html2PlainTextFilter;
}
ASPx.CreateHiddenField = function(name, id, parent) {
 var input = document.createElement("INPUT");
 input.setAttribute("type", "hidden");
 if(name)
  input.setAttribute("name", name);
 if(id)
  input.setAttribute("id", id);
 if(parent)
  parent.appendChild(input);
 return input;
};
ASPx.CloneObject = function(srcObject) {
 if(typeof(srcObject) != 'object' || srcObject == null)
  return srcObject;
 var newObject = {};
 for(var i in srcObject)
  newObject[i] = srcObject[i];
 return newObject;
};
ASPx.InsertRowsBefore = function(table, rowsHtml, index) {
 var row = null;
 if(index >= 0 && index < table.rows.length)
  row = table.rows[index];
 insertRowsBefore(table, rowsHtml, row);
};
var insertRowsBefore = function(table, rowsHtml, row) {
 if(!row && table.tBodies.length > 0) {
  row = document.createElement("TR");
  table.tBodies[0].appendChild(row);
  row.shouldRemove = true;
 }
 if(row) {
  row.insertAdjacentHTML("beforeBegin", rowsHtml);
  if(row.shouldRemove)
   ASPx.RemoveElement(row);
 }
};
ASPx.IsPercentageSize = function(size) {
 return size && size.indexOf('%') != -1;
};
ASPx.GetElementById = function(id) {
 if(document.getElementById)
  return document.getElementById(id);
 else
  return document.all[id];
};
ASPx.GetElementByIdInDocument = function(documentObj, id) {
 if(documentObj.getElementById)
  return documentObj.getElementById(id);
 else
  return documentObj.all[id];
};
ASPx.GetIsParent = function(parentElement, element) {
 if(!parentElement || !element)
  return false;
 while(element){
  if(element === parentElement)
   return true;
  if(element.tagName === "BODY")
   return false;
  element = element.parentNode;
 }
 return false;
};
ASPx.GetParentById = function(element, id) {
 element = element.parentNode;
 while(element){
  if(element.id === id)
   return element;
  element = element.parentNode;
 }
 return null;
};
ASPx.GetParentByPartialId = function(element, idPart){
 while(element && element.tagName != "BODY") {
  if(element.id && element.id.match(idPart)) 
   return element;
  element = element.parentNode;
 }
 return null;
};
ASPx.GetParentByTagName = function(element, tagName) {
 tagName = tagName.toUpperCase();
 while(element) {
  if(element.tagName === "BODY")
   return null;
  if(element.tagName === tagName)
   return element;
  element = element.parentNode;
 }
 return null;
};
function getParentByCondition(element, conditionArg, condition) {
 while(element != null) {
  if(element.tagName == "BODY" || element.nodeName == "#document")
   return null;
  if (condition(element, conditionArg))
   return element;
  element = element.parentNode;
 }
 return null;
}
ASPx.GetParentByPartialClassName = function(element, className) {
 return getParentByCondition(element, className, ASPx.ElementContainsCssClass);
};
ASPx.GetParentByClassName = function(element, className) {
 return getParentByCondition(element, className, ASPx.ElementHasCssClass);
};
ASPx.GetParentBySelector = function (element, selector) {
 return getParentByCondition(element, selector, ASPx.ElementMatchesSelector);
};
ASPx.GetParentByTagNameAndAttributeValue = function(element, tagName, attrName, attrValue) {
 tagName = tagName.toUpperCase();
 while(element != null) {
  if(element.tagName == "BODY")
   return null;
  if(element.tagName == tagName && element[attrName] == attrValue)
   return element;
  element = element.parentNode;
 }
 return null;
};
ASPx.GetParent = function(element, testFunc){
 if (!ASPx.IsExists(testFunc)) return null;
 while(element != null && element.tagName != "BODY"){
  if(testFunc(element))
   return element;
  element = element.parentNode;
 }
 return null;
};
ASPx.GetElementTreeLine = function(element, stopTagName, stopFunc) {
 var result = [];
 stopTagName = stopTagName || "BODY";
 while(element != null) {
  if(!stopFunc && element.tagName == stopTagName)
   break;
  if(stopFunc && stopFunc(element))
   break;
  result.push(element);
  element = element.parentNode;
 }
 return result;
};
ASPx.IsScrollableElement = function(element, isHorzScrollable, isVertScrollable) {
 isHorzScrollable = ASPx.IsExists(isHorzScrollable) ? isHorzScrollable : true;
 isVertScrollable = ASPx.IsExists(isVertScrollable) ? isVertScrollable : true;
 var style = ASPx.GetCurrentStyle(element);
 var overflowStyleNames = ["overflow"];
 if(isHorzScrollable)
  overflowStyleNames.push("overflowX");
 if(isVertScrollable)
  overflowStyleNames.push("overflowY");
 for(var i = 0; i < overflowStyleNames.length; i++)
  if(style[overflowStyleNames[i]] == "scroll" || style[overflowStyleNames[i]] == "auto")
   return true;
 return false;
};
ASPx.GetPreviousSibling = function(el) {
 if(el.previousElementSibling) {
  return el.previousElementSibling;
 } else {
  while(el = el.previousSibling) {
   if(el.nodeType === 1)
    return el;
  }
 }
};
ASPx.ElementMatchesSelector = (function (e) {
 return (function (matches) {
  return function (el, selector) { return !!el && !!selector && matches.call(el, selector); };
 })(e.matches || e.matchesSelector || e.webkitMatchesSelector || e.mozMatchesSelector || e.msMatchesSelector || e.oMatchesSelector);
})(Element.prototype);
ASPx.ElementHasCssClass = function(element, className) {
 try {
  var elementClasses;
  var classList = ASPx.GetClassNameList(element);
  if(!classList) {
   var elementClassName = ASPx.GetClassName(element);
   if(!elementClassName) {
    return false;
   }
   elementClasses = elementClassName.split(" ");
  }
  var classNames = className.split(" ");
  for(var i = classNames.length - 1; i >= 0; i--) {
   if(classList) {
    if(classList.indexOf(classNames[i]) === -1)
     return false;
    continue;
   }
   if(Data.ArrayIndexOf(elementClasses, classNames[i]) < 0)
    return false;
  }
  return true;
 } catch(e) {
  return false;
 }
};
ASPx.ElementContainsCssClass = function(element, className) {
 try {
  var elementClassName = ASPx.GetClassName(element);
  if(!elementClassName) {
   return false;
  }
  return elementClassName.indexOf(className) != -1;
 } catch(e) {
  return false;
 }
};
ASPx.AddClassNameToElement = function (element, className) {
 if(!element || typeof(className) !== "string" ) return;
 className = className.trim();
 if(!ASPx.ElementHasCssClass(element, className) && className !== "") {
  var oldClassName = ASPx.GetClassName(element);
  ASPx.SetClassName(element, (oldClassName === "") ? className : oldClassName + " " + className);
 }
};
ASPx.AddClassNamesToElement = function(element, classNames) {
 Data.ForEach(classNames, function(className) { ASPx.AddClassNameToElement(element, className); });
};
ASPx.CombineCssClasses = function() {
 return Array.prototype.slice.call(arguments).join(" ");
};
ASPx.RemoveClassNameFromElement = function(element, className) {
 if(!element) return;
 var elementClassName = ASPx.GetClassName(element);
 var updClassName = " " + elementClassName + " ";
 var newClassName = updClassName.replace(" " + className + " ", " ");
 if(updClassName.length != newClassName.length)
  ASPx.SetClassName(element, Str.Trim(newClassName));  
};
ASPx.RemoveClassNamesFromElement = function(element, classNames) {
 if(!element) return;
 for(var i = 0; i < classNames.length; i++) {
  var className = classNames[i];
  element.classList.remove(className);
 }
};
ASPx.ToggleClassNameToElement = function(element, className, toggleState) {
 if(!toggleState)
  ASPx.RemoveClassNameFromElement(element, className);
 if(toggleState && !ASPx.ElementHasCssClass(element, className))
  ASPx.AddClassNameToElement(element, className);
};
ASPx.GetClassNameList = function(element) {
 var result = [];
 if(element) {
  if(element.tagName === "svg") {
   result = ASPx.GetClassName(element).replace(/^\s+|\s+$/g, '').split(/\s+/);
  }
  else {
   result = element.classList ? [].slice.call(element.classList) : ASPx.GetClassName(element).replace(/^\s+|\s+$/g, '').split(/\s+/);
  }
 }
 return result;
};
ASPx.GetClassName = function(element) {
 var result = "";
 if(element) {
  if(element.tagName === "svg") {
   result = element.className.baseVal;
  }
  else {
   result = element.className ? element.className : "";
  }
 }
 return result;
};
ASPx.SetClassName = function(element, className) {
 if(element.tagName === "svg") {
  element.className.baseVal = Str.Trim(className);
 }
 else {
  element.className = Str.Trim(className);
 }
};
ASPx.GetElementOffsetWidth = function(element) {
 if(element.tagName === "svg") {
  return element.getBoundingClientRect().width;
 }
 else {
  return element.offsetWidth;
 }
};
ASPx.GetElementOffsetHeight = function(element) {
 if(element.tagName === "svg") {
  return element.getBoundingClientRect().height;
 }
 else {
  return element.offsetHeight;
 }
};
function nodeListToArray(nodeList, filter) {
 var result = [];
 for(var i = 0, element; element = nodeList[i]; i++) {
  if(filter && !filter(element))
   continue;
  result.push(element);
 }
 return result;
}
ASPx.NodeListToArray = nodeListToArray;
function getItemByIndex(collection, index) {
 if(!index) index = 0;
 if(collection != null && collection.length > index)
  return collection[index];
 return null;
}
ASPx.GetChildNodesByQuerySelector = function (parent, selector) {
 return nodeListToArray(parent.querySelectorAll(selector), function (el) { return el.parentNode === parent; });
};
ASPx.GetChildNodesByClassName = function(parent, className) {
 if(!parent) return [];
 if(parent.querySelectorAll) {
  var children = parent.querySelectorAll('.' + className);
  return nodeListToArray(children, function(element) { 
   return element.parentNode === parent;
  });
 }
 return ASPx.GetChildNodes(parent, function(elem) { return elem.className && ASPx.ElementHasCssClass(elem, className); });
};
ASPx.GetChildNodesByPartialClassName = function(element, className) {
 return ASPx.GetChildElementNodesByPredicate(element,
  function(child) {
   return ASPx.ElementContainsCssClass(child, className);
  });
};
ASPx.GetChildByPartialClassName = function(element, className, index) {
 if(element != null){    
  var collection = ASPx.GetChildNodesByPartialClassName(element, className);
  return getItemByIndex(collection, index);
 }
 return null;
};
ASPx.GetChildByClassName = function(element, className, index) {
 if(element != null){    
  var collection = ASPx.GetChildNodesByClassName(element, className);
  return getItemByIndex(collection, index);
 }
 return null;
};
ASPx.GetNodesByPartialClassName = function(element, className) {
 if(element.querySelectorAll) {
  var list = element.querySelectorAll('*[class*=' + className + ']');
  return nodeListToArray(list);
 }
 var collection = element.all || element.getElementsByTagName('*');
 var ret = [ ];
 if(collection != null) {
  for(var i = 0; i < collection.length; i ++) {
   if(ASPx.ElementContainsCssClass(collection[i], className))
    ret.push(collection[i]);
  }
 }
 return ret;
};
ASPx.GetNodesByClassName = function(parent, className) {
 if(parent.querySelectorAll) {
  var children = parent.querySelectorAll('.' + className);
  return nodeListToArray(children);
 }
 return ASPx.GetNodes(parent, function(elem) { return elem.className && ASPx.ElementHasCssClass(elem, className); });
};
ASPx.GetNodeByClassName = function(element, className, index) {
 if(element != null){    
  var collection = ASPx.GetNodesByClassName(element, className);
  return getItemByIndex(collection, index);
 }
 return null;
};
ASPx.GetChildById = function(element, id) {
 if(element.all) {
  var child = element.all[id];
  if(!child) {
   child = element.all(id); 
   if(!child)
    return null; 
  } 
  if(!ASPx.IsExists(child.length)) 
   return child;
  else
   return ASPx.GetElementById(id);
 }
 else
  return ASPx.GetElementById(id);
};
ASPx.GetNodesByPartialId = function(element, partialName, list) {
 if(element.id && element.id.indexOf(partialName) > -1) 
  list.push(element);
 if(element.childNodes) {
  for(var i = 0; i < element.childNodes.length; i ++) 
   ASPx.GetNodesByPartialId(element.childNodes[i], partialName, list);
 }
};
ASPx.GetNodesByTagName = function(element, tagName) {
 var tagNameToUpper = tagName.toUpperCase();
 var result = null;
 if(element) {
  if(element.getElementsByTagName) {
   result = element.getElementsByTagName(tagNameToUpper);
   if(result.length === 0) {
    result = element.getElementsByTagName(tagName);
   }
  }
  else if(element.all && element.all.tags !== undefined)
   result = Browser.Netscape ? element.all.tags[tagNameToUpper] : element.all.tags(tagNameToUpper);
 }
 return result;
};
ASPx.GetNodeByTagName = function(element, tagName, index) {
 if(element != null){    
  var collection = ASPx.GetNodesByTagName(element, tagName);
  return getItemByIndex(collection, index);
 }
 return null;
};
ASPx.GetChildNodesByTagName = function(parent, tagName) {
 return ASPx.GetChildNodes(parent, function (child) { return child.tagName === tagName; });
};
ASPx.GetChildByTagName = function(element, tagName, index) {
 if(element != null){    
  var collection = ASPx.GetChildNodesByTagName(element, tagName);
  return getItemByIndex(collection, index);
 }
 return null;
};
ASPx.RetrieveByPredicate = function(scourceCollection, predicate) {
 var result = [];
 for(var i = 0; i < scourceCollection.length; i++) {
  var element = scourceCollection[i];
  if(!predicate || predicate(element)) 
   result.push(element);
 }
 return result;
};
ASPx.GetChildNodes = function(parent, predicate) {
 return ASPx.RetrieveByPredicate(parent.childNodes, predicate);
};
ASPx.GetNodes = function(parent, predicate) {
 var c = parent.all || parent.getElementsByTagName('*');
 return ASPx.RetrieveByPredicate(c, predicate);
};
ASPx.GetChildElementNodes = function(parent) {
 if(!parent) return null;
 return ASPx.GetChildNodes(parent, function(e) { return e.nodeType == 1; });
};
ASPx.GetChildElementNodesByPredicate = function(parent, predicate) {
 if(!parent) return null;
 if(!predicate) return ASPx.GetChildElementNodes(parent);
 return ASPx.GetChildNodes(parent, function(e) { return e.nodeType == 1 && predicate(e); });
};
ASPx.GetTextNode = function(element, index) {
 if(element != null){
  var collection = [ ];
  ASPx.GetTextNodes(element, collection);
  return getItemByIndex(collection, index);
 }
 return null;
};
ASPx.GetTextNodes = function(element, collection) {
 if(element.tagName === "svg")
  return;
 for(var i = 0; i < element.childNodes.length; i ++){
  var childNode = element.childNodes[i];
  if(ASPx.IsExists(childNode.nodeValue))
   collection.push(childNode);
  ASPx.GetTextNodes(childNode, collection);
 }
};
ASPx.GetNormalizedTextNode = function(element, index) {
 var textNode = ASPx.GetTextNode(element, index);
 if(textNode != null)
  ASPx.MergeAdjacentTextNodes(textNode);
 return textNode;
};
ASPx.MergeAdjacentTextNodes = function(firstTextNode) {
 if(!ASPx.IsExists(firstTextNode.nodeValue))
  return;
 var textNode = firstTextNode;
 while(textNode.nextSibling && ASPx.IsExists(textNode.nextSibling.nodeValue)) {
  textNode.nodeValue += textNode.nextSibling.nodeValue;
  textNode.parentNode.removeChild(textNode.nextSibling);
 }
};
ASPx.GetElementDocument = function(element) {
 return element.document || element.ownerDocument;
};
ASPx.RemoveElement = function(element) {
 if(element && element.parentNode)
  element.parentNode.removeChild(element);
};
ASPx.ReplaceTagName = function(element, newTagName, cloneChilds) {
 if(element.nodeType != 1)
  return null;
 if(element.nodeName == newTagName)
  return element;
 cloneChilds = cloneChilds !== undefined ? cloneChilds : true;
 var doc = element.ownerDocument;
 var newElem = doc.createElement(newTagName);
 Attr.CopyAllAttributes(element, newElem);
 if(cloneChilds) {
  for(var i = 0; i < element.childNodes.length; i++)
   newElem.appendChild(element.childNodes[i].cloneNode(true));
 }
 else {
  for(var child; child = element.firstChild; )
   newElem.appendChild(child);
 }
 element.parentNode.replaceChild(newElem, element);
 return newElem;
};
ASPx.RemoveOuterTags = function(element) {
 var docFragment = element.ownerDocument.createDocumentFragment();
 for(var i = 0; i < element.childNodes.length; i++)
  docFragment.appendChild(element.childNodes[i].cloneNode(true));
 element.parentNode.replaceChild(docFragment, element);
};
ASPx.WrapElementInNewElement = function(element, newElementTagName) { 
 var wrapElement = null;
 var docFragment = element.ownerDocument.createDocumentFragment();
 wrapElement = element.ownerDocument.createElement(newElementTagName);
 docFragment.appendChild(wrapElement);
 wrapElement.appendChild(element.cloneNode(true));
 element.parentNode.replaceChild(docFragment, element);
 return wrapElement;
};
ASPx.InsertElementAfter = function(newElement, targetElement) {
 var parentElem = targetElement.parentNode;
 if(parentElem.childNodes[parentElem.childNodes.length - 1] == targetElement)
  parentElem.appendChild(newElement);
 else if(newElement !== targetElement.nextSibling)
  parentElem.insertBefore(newElement, targetElement.nextSibling);
};
ASPx.SetElementOpacity = function(element, value) {
  element.style.opacity = value;
};
ASPx.GetElementOpacity = function(element) {
 return parseFloat(ASPx.GetCurrentStyle(element).opacity);
};
ASPx.HiddenChangable = "dx-hc";
ASPx.DefaultDisplayNoneSelectors = [ "dxmodalSys" ];
ASPx.DefaultDisplaySelectors = ["show"];
function getIsDefaultDisplayNone(element) {
 for(var i = 0; i < ASPx.DefaultDisplayNoneSelectors.length; i++) {
  if(ASPx.ElementHasCssClass(element, ASPx.DefaultDisplayNoneSelectors[i]))
   return true;
 }
 return false;
}
ASPx.GetElementDisplay = function(element, isCurrentStyle) {
 if(isCurrentStyle) {
  var currentStyle = ASPx.GetCurrentStyle(element);
  if(currentStyle)
   return currentStyle.display != "none";
 }
 if(getIsDefaultDisplayNone(element))
  return element.style.display != "none" && element.style.display != "" || ASPx.DefaultDisplaySelectors.some(function(s) { return ASPx.ElementHasCssClass(element, s); });
 return element.style.display != "none" && !ASPx.ElementHasCssClass(element, ASPx.HiddenChangable);
};
ASPx.SetElementDisplay = function(element, value) {
 if(!element) return;
 if(ASPx.ElementHasCssClass(element, ASPx.HiddenChangable))
  ASPx.RemoveClassNameFromElement(element, ASPx.HiddenChangable);
 if(typeof(value) === "string")
  element.style.display = value;
 else if(getIsDefaultDisplayNone(element))
  element.style.display = value ? (element.tagName === "TABLE" ? "table" : "block") : "";
 else if(!value)
  element.style.display = "none";
 else
  element.style.display = "";
};
ASPx.GetElementVisibility = function(element, isCurrentStyle) {
 if(isCurrentStyle) {
  var currentStyle = ASPx.GetCurrentStyle(element);
  if(currentStyle)
   return currentStyle.visibility != "hidden";
 }
 return element.style.visibility != "hidden";
};
ASPx.SetElementVisibility = function(element, value) {
 if(!element) return;
 if(typeof(value) === "string")
  element.style.visibility = value;
 else
  element.style.visibility = value ? "visible" : "hidden";
};
ASPx.IsElementVisible = function(element, isCurrentStyle) {
 if(!element) return false;
 while(element && element.tagName != "BODY") {
  if(!ASPx.GetElementDisplay(element, isCurrentStyle) || (!ASPx.GetElementVisibility(element, isCurrentStyle) && !Attr.IsExistsAttribute(element, "errorFrame")))
     return false;
  element = element.parentNode;
 }
 return true;
};
ASPx.IsElementDisplayed = function(element) {
 if(!element) return false;
 while(element && element.tagName != "BODY") {
  if(!ASPx.GetElementDisplay(element))
     return false;
  element = element.parentNode;
 }
 return true;
};
ASPx.GetElementInitializedFlag = function(element) {
 return element["dxinit"];
};
ASPx.SetElementInitializedFlag = function(element) {
 element["dxinit"] = true;
};
ASPx.AddStyleSheetLinkToDocument = function(doc, linkUrl) {
 var newLink = createStyleLink(doc, linkUrl);
 var head = ASPx.GetHeadElementOrCreateIfNotExist(doc);
 head.appendChild(newLink);
 return newLink;
};
ASPx.GetHeadElementOrCreateIfNotExist = function(doc) {
 var elements = ASPx.GetNodesByTagName(doc, "head");
 var head = null;
 if(elements.length == 0) {
  head = doc.createElement("head");
  head.visibility = "hidden";
  doc.insertBefore(head, doc.body);
 } else
  head = elements[0];
 return head;
};
function createStyleLink(doc, url) {
 var newLink = doc.createElement("link");
 Attr.SetAttribute(newLink, "href", url);
 Attr.SetAttribute(newLink, "rel", "stylesheet");
 Attr.AppendStyleType(newLink);
 return newLink;
}
ASPx.GetCurrentStyle = function(element) {
 if(document.defaultView && document.defaultView.getComputedStyle) { 
  var result = document.defaultView.getComputedStyle(element, null);
  if(!result && Browser.Firefox && window.frameElement) {
   var changes = [];
   var curElement = window.frameElement;
   while(!(result = document.defaultView.getComputedStyle(element, null))) {
    changes.push([curElement, curElement.style.display]);
    ASPx.SetStylesCore(curElement, "display", "block", true);
    curElement = curElement.tagName == "BODY" ? curElement.ownerDocument.defaultView.frameElement : curElement.parentNode;
   }
   result = ASPx.CloneObject(result);
   for(var ch, i = 0; ch = changes[i]; i++)
    ASPx.SetStylesCore(ch[0], "display", ch[1]);
   var dummy = document.body.offsetWidth; 
  }
  if(Browser.Firefox && Browser.MajorVersion >= 62 && window.frameElement && result.length === 0) { 
   result = ASPx.CloneObject(result);
   result.display = element.style.display;
  }
  return result;
 }
 return window.getComputedStyle(element, null);
};
ASPx.CreateStyleSheetInDocument = function(doc) {
 if(doc.createStyleSheet) {
  try {
   return doc.createStyleSheet();
  }
  catch(e) {
   var message = "The CSS link limit (31) has been exceeded. Please enable CSS merging or reduce the number of CSS files on the page. For details, see http://www.devexpress.com/Support/Center/p/K18487.aspx.";
   throw new Error(message);
  }
 }
 else {
  var styleSheet = doc.createElement("STYLE");
  ASPx.GetNodeByTagName(doc, "HEAD", 0).appendChild(styleSheet);
  return styleSheet.sheet;
 }
};
ASPx.currentStyleSheet = null;
ASPx.GetCurrentStyleSheet = function() {
 if(!ASPx.currentStyleSheet)
  ASPx.currentStyleSheet = ASPx.CreateStyleSheetInDocument(document);
 return ASPx.currentStyleSheet;
};
function getStyleSheetRules(styleSheet){
 try {
  if (styleSheet.href && styleSheet.href.indexOf("file:///") === 0)
   return null;
  return styleSheet.cssRules;
 }
 catch(e) {
  return null;
 }
}
ASPx.cachedCssRules = { };
ASPx.GetStyleSheetRules = function (className, stylesStorageDocument) {
 if(ASPx.cachedCssRules[className]) {
  if(ASPx.cachedCssRules[className] != ASPx.EmptyObject)
   return ASPx.cachedCssRules[className];
  return null;
 }
 var result = iterateStyleSheetRules(stylesStorageDocument, function(rule) {
  if(rule.selectorText == "." + className){
   ASPx.cachedCssRules[className] = rule;
   return rule;
  }
 });
 if(ASPx.IsExists(result))
  return result;
 ASPx.cachedCssRules[className] = ASPx.EmptyObject;
 return null;
};
function iterateStyleSheetRules(stylesStorageDocument, callback) {
 var doc = stylesStorageDocument || document;
 for(var i = 0; i < doc.styleSheets.length; i ++){
  var styleSheet = doc.styleSheets[i];
  var rules = getStyleSheetRules(styleSheet);
  if(rules != null){
   for(var j = 0; j < rules.length; j ++) {
    var result = callback(rules[j]);
    if(result !== undefined)
     return result;
   }
  }
 }
}
ASPx.ProcessStyleSheetRules = function(prefix, callback) {
 iterateStyleSheetRules(null, function(rule) {
  if(!!rule.selectorText && rule.selectorText.indexOf(prefix) === 0) {
   var name = rule.selectorText.substring(prefix.length);
   var result = callback(name, rule.style, rule);
   if(result !== undefined)
    return result;
  }
 });
};
ASPx.ClearCachedCssRules = function(){
 ASPx.cachedCssRules = { };
};
var styleCount = 0;
var styleNameCache = { };
ASPx.CreateImportantStyleRule = function(styleSheet, cssText, postfix, prefix) {
 styleSheet = styleSheet || ASPx.GetCurrentStyleSheet();
 var cacheKey = (postfix ? postfix + "||" : "") + cssText + (prefix ? "||" + prefix : "");
 if(styleNameCache[cacheKey])
  return styleNameCache[cacheKey];
 prefix = prefix ? prefix + " " : "";
 var className = "dxh" + styleCount + (postfix ? postfix : "");
 ASPx.AddStyleSheetRule(styleSheet, prefix + "." + className, ASPx.CreateImportantCssText(cssText));
 styleCount++;
 styleNameCache[cacheKey] = className;
 return className; 
};
ASPx.CreateImportantCssText = function(cssText) {
 var newText = "";
 var hasEncodedSemicolon = cssText.indexOf(ASPx.StyleValueEncodedSemicolon) > -1;
 var attributes = cssText.split(";");
 for(var i = 0; i < attributes.length; i++) {
  var rule = attributes[i];
  if(rule != "")
   newText += ASPx.CreateImportantCssRule(rule, hasEncodedSemicolon);
 }
 return newText;
};
ASPx.CreateImportantCssRule = function(rule, hasEncodedSemicolon) {
 var result = rule;
 if(hasEncodedSemicolon) {
  var regex = new RegExp(ASPx.StyleValueEncodedSemicolon, "g");
  result = result.replace(regex, ";");
 }
 result = result + " !important;";
 return result;
};
ASPx.AddStyleSheetRule = function(styleSheet, selector, cssText){
 if(!cssText) return;
 var index = styleSheet.cssRules.length;
 styleSheet.insertRule(selector + " { " + cssText + " }", index);
 return styleSheet.cssRules[index];
};
ASPx.GetPointerCursor = function() {
 return "pointer";
};
ASPx.SetPointerCursor = function(element) {
 if(element.style.cursor == "")
  element.style.cursor = ASPx.GetPointerCursor();
};
ASPx.SetElementFloat = function(element, value) {
 if(ASPx.IsExists(element.style.cssFloat))
  element.style.cssFloat = value;
 else if(ASPx.IsExists(element.style.styleFloat))
  element.style.styleFloat = value;
 else
  Attr.SetAttribute(element.style, "float", value);
};
ASPx.GetElementFloat = function(element) {
 var currentStyle = ASPx.GetCurrentStyle(element);
 if(ASPx.IsExists(currentStyle.cssFloat))
  return currentStyle.cssFloat;
 if(ASPx.IsExists(currentStyle.styleFloat))
  return currentStyle.styleFloat;
 return Attr.GetAttribute(currentStyle, "float");
};
function getElementDirection(element) {
 return ASPx.GetCurrentStyle(element).direction;
}
ASPx.IsElementRightToLeft = function(element) {
 return getElementDirection(element) == "rtl";
};
ASPx.AdjustVerticalMarginsInContainer = function(container) {
 var containerBorderAndPaddings = ASPx.GetTopBottomBordersAndPaddingsSummaryValue(container);
 var flowElements = [], floatElements = [], floatTextElements = [];
 var maxHeight = 0, maxFlowHeight = 0;
 for(var i = 0; i < container.childNodes.length; i++) {
  var element = container.childNodes[i];
  if(!element.offsetHeight) continue;
  ASPx.ClearVerticalMargins(element);
 }
 for(var i = 0; i < container.childNodes.length; i++) {
  var element = container.childNodes[i];
  if(!element.offsetHeight) continue;
  var float = ASPx.GetElementFloat(element);
  var isFloat = (float === "left" || float === "right");
  if(isFloat)
   floatElements.push(element);
  else {
   flowElements.push(element);
   if(element.tagName !== "IMG"){
    if(!ASPx.IsTextWrapped(element))
     element.style.verticalAlign = 'baseline'; 
    floatTextElements.push(element);
   }
   if(element.tagName === "DIV")
    Attr.ChangeStyleAttribute(element, "float", "left"); 
  }
  if(element.offsetHeight > maxHeight) 
   maxHeight = element.offsetHeight;
  if(!isFloat && element.offsetHeight > maxFlowHeight) 
   maxFlowHeight = element.offsetHeight;
 }
 for(var i = 0; i < flowElements.length; i++) 
  Attr.RestoreStyleAttribute(flowElements[i], "float");
 var containerBorderAndPaddings = ASPx.GetTopBottomBordersAndPaddingsSummaryValue(container);
 var containerHeight = container.offsetHeight - containerBorderAndPaddings;
 if(maxHeight == containerHeight) {
  var verticalAlign = ASPx.GetCurrentStyle(container).verticalAlign;
  for(var i = 0; i < floatTextElements.length; i++)
   floatTextElements[i].style.verticalAlign = '';
  containerHeight = container.offsetHeight - containerBorderAndPaddings;
  for(var i = 0; i < floatElements.length; i++)
   adjustVerticalMarginsCore(floatElements[i], containerHeight, verticalAlign, true);
  for(var i = 0; i < flowElements.length; i++) {
   if(maxFlowHeight != maxHeight)
    adjustVerticalMarginsCore(flowElements[i], containerHeight, verticalAlign);
  }
 }
};
ASPx.AdjustVerticalMargins = function(element) {
 ASPx.ClearVerticalMargins(element);
 var parentElement = element.parentNode;
 var parentHeight = parentElement.getBoundingClientRect().height - ASPx.GetTopBottomBordersAndPaddingsSummaryValue(parentElement);
 adjustVerticalMarginsCore(element, parentHeight, ASPx.GetCurrentStyle(parentElement).verticalAlign);
};
function adjustVerticalMarginsCore(element, parentHeight, verticalAlign, toBottom) {
 var marginTop;
 if(verticalAlign == "top")
  marginTop = 0;
 else if(verticalAlign == "bottom")
  marginTop = parentHeight - element.getBoundingClientRect().height;
 else
  marginTop = (parentHeight - element.getBoundingClientRect().height) / 2;
 if(marginTop !== 0){
  element.style.marginTop = marginTop + "px";
 }
}
ASPx.ClearVerticalMargins = function(element) {
 element.style.marginTop = "";
 element.style.marginBottom = "";
};
ASPx.AdjustHeightInContainer = function(container) {
 var height = container.offsetHeight - ASPx.GetTopBottomBordersAndPaddingsSummaryValue(container);
 for(var i = 0; i < container.childNodes.length; i++) {
  var element = container.childNodes[i];
  if(!element.offsetHeight) continue;
  ASPx.ClearHeight(element);
 }
 var elements = [];
 var childrenHeight = 0;
 for(var i = 0; i < container.childNodes.length; i++) {
  var element = container.childNodes[i];
  if(!element.offsetHeight) continue;
  childrenHeight += element.offsetHeight + ASPx.GetTopBottomMargins(element);
  elements.push(element);
 }
 if(elements.length > 0 && childrenHeight < height) {
  var correctedHeight = 0;
  for(var i = 0; i < elements.length; i++) {
   var elementHeight = 0;
   if(i < elements.length - 1){
    var elementHeight = Math.floor(height / elements.length);
    correctedHeight += elementHeight;
   }
   else{
    var elementHeight = height - correctedHeight;
    if(elementHeight < 0) elementHeight = 0;
   }
   adjustHeightCore(elements[i], elementHeight);
  }
 }
};
ASPx.AdjustHeight = function(element) {
 ASPx.ClearHeight(element);
 var parentElement = element.parentNode;
 var height = parentElement.getBoundingClientRect().height - ASPx.GetTopBottomBordersAndPaddingsSummaryValue(parentElement);
 adjustHeightCore(element, height);
};
function adjustHeightCore(element, height) {
 var height = height - ASPx.GetTopBottomBordersAndPaddingsSummaryValue(element);
 if(height < 0) height = 0;
 element.style.height = height + "px";
}
ASPx.ClearHeight = function(element) {
 element.style.height = "";
};
ASPx.ShrinkWrappedTextInContainer = function(container) {
 if(!container) return;
 for(var i = 0; i < container.childNodes.length; i++){
  var child = container.childNodes[i];
  if(child.style && ASPx.IsTextWrapped(child)) {
   Attr.ChangeStyleAttribute(child, "width", "1px");
   child.shrinkedTextContainer = true;
  }
 }
};
ASPx.AdjustWrappedTextInContainer = function(container) {
 if(!container) return;
 var textContainer, leftWidth = 0, rightWidth = 0;
 for(var i = 0; i < container.childNodes.length; i++){
  var child = container.childNodes[i];
  if(child.tagName === "BR")
   return;
  if(!child.tagName)
   continue;
  if(child.tagName !== "IMG"){
   textContainer = child;
   if(ASPx.IsTextWrapped(textContainer)){
    if(!textContainer.shrinkedTextContainer)
     textContainer.style.width = "";
    textContainer.style.marginRight = "";
   }
  }
  else {
   if(ASPx.GetElementOffsetWidth(child)=== 0)
    Evt.AttachEventToElement(child, "load", function(evt) { ASPx.AdjustWrappedTextInContainer(container); });
   else {
    var width = ASPx.GetElementOffsetWidth(child) + ASPx.GetLeftRightMargins(child);
    if(textContainer)
     rightWidth += width;
    else
     leftWidth += width;
   }
  }
 }
 if(textContainer && ASPx.IsTextWrapped(textContainer)) {
  var containerWidth = ASPx.GetElementOffsetWidth(container) - ASPx.GetLeftRightBordersAndPaddingsSummaryValue(container);
  if(textContainer.shrinkedTextContainer) {
   Attr.RestoreStyleAttribute(textContainer, "width");
   Attr.ChangeStyleAttribute(container, "width", containerWidth + "px");
  }
  if(ASPx.GetElementOffsetWidth(textContainer) + leftWidth + rightWidth >= containerWidth) {
    if(rightWidth > 0 && !textContainer.shrinkedTextContainer)
    textContainer.style.width = (containerWidth - rightWidth) + "px";
   else if(leftWidth > 0){
    if(ASPx.IsElementRightToLeft(container))
     textContainer.style.marginLeft = leftWidth + "px";
    else
     textContainer.style.marginRight = leftWidth + "px";
   }
  }
 }
};
ASPx.IsTextWrapped = function(element) {
 return element && ASPx.GetCurrentStyle(element).whiteSpace !== "nowrap";
};
ASPx.IsValidPosition = function(pos){
 return pos != ASPx.InvalidPosition && pos != -ASPx.InvalidPosition;
};
ASPx.getSpriteMainElement = function(element) {
 var cssClassMarker = "dx-acc";
 if(ASPx.ElementContainsCssClass(element, cssClassMarker))
  return element;
 if(element.parentNode && ASPx.ElementContainsCssClass(element.parentNode, cssClassMarker))
  return element.parentNode;
 return element;
};
ASPx.GetAbsoluteX = function(curEl){
 return ASPx.GetAbsolutePositionX(curEl);
};
ASPx.GetAbsoluteY = function(curEl){
 return ASPx.GetAbsolutePositionY(curEl);
};
ASPx.SetAbsoluteX = function(element, x){
 element.style.left = ASPx.PrepareClientPosForElement(x, element, true) + "px";
};
ASPx.SetAbsoluteY = function(element, y){
 element.style.top = ASPx.PrepareClientPosForElement(y, element, false) + "px";
};
ASPx.GetAbsolutePositionX = function(element){
 if(Browser.Firefox && Browser.Version >= 3)
  return getAbsolutePositionX_FF3(element);
 else if(Browser.Opera)
  return getAbsolutePositionX_Opera(element);
 else if(Browser.NetscapeFamily && (!Browser.Firefox || Browser.Version < 3))
  return getAbsolutePositionX_NS(element);
 else if(Browser.WebKitFamily || Browser.Edge)
  return getAbsolutePositionX_FF3(element);
 else
  return getAbsolutePositionX_Other(element);
};
function getAbsolutePositionX_Opera(curEl){
 var isFirstCycle = true;
 var pos = getAbsoluteScrollOffset_OperaFF(curEl, true);
 while(curEl != null) {
  pos += curEl.offsetLeft;
  if(!isFirstCycle)
   pos -= curEl.scrollLeft;
  curEl = curEl.offsetParent;
  isFirstCycle = false;
 }
 pos += document.body.scrollLeft;
 return pos;
}
function getAbsolutePositionX_FF3(element){
 if(element == null) return 0;
 var x = element.getBoundingClientRect().left + ASPx.GetDocumentScrollLeft();
 return x;
}
function getAbsolutePositionX_NS(curEl){
 var pos = getAbsoluteScrollOffset_OperaFF(curEl, true);
 var isFirstCycle = true;
 while(curEl != null) {
  pos += curEl.offsetLeft;
  if(!isFirstCycle && curEl.offsetParent != null)
   pos -= curEl.scrollLeft;
  if(!isFirstCycle && Browser.Firefox){
   var style = ASPx.GetCurrentStyle(curEl);
   if(curEl.tagName == "DIV" && style.overflow != "visible")
    pos += ASPx.PxToInt(style.borderLeftWidth);
  }
  isFirstCycle = false;
  curEl = curEl.offsetParent;
 }
 return pos;
}
function getAbsolutePositionX_Other(curEl){
 var pos = 0;
 var isFirstCycle = true;
 while(curEl != null) {
  pos += curEl.offsetLeft;
  if(!isFirstCycle && curEl.offsetParent != null)
   pos -= curEl.scrollLeft;
  isFirstCycle = false;
  curEl = curEl.offsetParent;
 }
 return pos;
}
ASPx.GetAbsolutePositionY = function(element){
 if(Browser.Firefox && Browser.Version >= 3)
  return getAbsolutePositionY_FF3(element);
 else if(Browser.Opera)
  return getAbsolutePositionY_Opera(element);
 else if(Browser.NetscapeFamily && (!Browser.Firefox || Browser.Version < 3))
  return getAbsolutePositionY_NS(element);
 else if(Browser.WebKitFamily || Browser.Edge)
  return getAbsolutePositionY_FF3(element);
 else
  return getAbsolutePositionY_Other(element);
};
function getAbsolutePositionY_Opera(curEl){
 var isFirstCycle = true;
 if(curEl && curEl.tagName == "TR" && curEl.cells.length > 0)
  curEl = curEl.cells[0];
 var pos = getAbsoluteScrollOffset_OperaFF(curEl, false);
 while(curEl != null) {
  pos += curEl.offsetTop;
  if(!isFirstCycle)
   pos -= curEl.scrollTop;
  curEl = curEl.offsetParent;
  isFirstCycle = false;
 }
 pos += document.body.scrollTop;
 return pos;
}
function getAbsolutePositionY_FF3(element){
 if(element == null) return 0;
 var y = element.getBoundingClientRect().top + ASPx.GetDocumentScrollTop();
 return y;
}
function getAbsolutePositionY_NS(curEl){
 var pos = getAbsoluteScrollOffset_OperaFF(curEl, false);
 var isFirstCycle = true;
 while(curEl != null) {
  pos += curEl.offsetTop;
  if(!isFirstCycle && curEl.offsetParent != null)
   pos -= curEl.scrollTop;
  if(!isFirstCycle && Browser.Firefox){
   var style = ASPx.GetCurrentStyle(curEl);
   if(curEl.tagName == "DIV" && style.overflow != "visible")
    pos += ASPx.PxToInt(style.borderTopWidth);
  }
  isFirstCycle = false;
  curEl = curEl.offsetParent;
 }
 return pos;
}
function getAbsoluteScrollOffset_OperaFF(curEl, isX) {
 var pos = 0;   
 var isFirstCycle = true;
 while(curEl != null) {
  if(curEl.tagName == "BODY")
   break;
  var style = ASPx.GetCurrentStyle(curEl);
  if(style.position == "absolute")
   break;
  if(!isFirstCycle && curEl.tagName == "DIV" && (style.position == "" || style.position == "static"))
   pos -= isX ? curEl.scrollLeft : curEl.scrollTop;
  curEl = curEl.parentNode;
  isFirstCycle = false;
 }
 return pos; 
}
function getAbsolutePositionY_Other(curEl){
 var pos = 0;
 var isFirstCycle = true;
 while(curEl != null) {
  pos += curEl.offsetTop;
  if(!isFirstCycle && curEl.offsetParent != null)
   pos -= curEl.scrollTop;
  isFirstCycle = false;
  curEl = curEl.offsetParent;
 }
 return pos;
}
function createElementMock(element) {
 var div = document.createElement('DIV');
 div.style.top = "0px";
 div.style.left = "0px";
 div.visibility = "hidden";
 div.style.position = ASPx.GetCurrentStyle(element).position;
 return div;
}
ASPx.PrepareClientPosElementForOtherParent = function(pos, element, otherParent, isX) {
 if(element.parentNode == otherParent)
  return ASPx.PrepareClientPosForElement(pos, element, isX);
 var elementMock = createElementMock(element);
 otherParent.appendChild(elementMock); 
 var preparedPos = ASPx.PrepareClientPosForElement(pos, elementMock, isX);
 otherParent.removeChild(elementMock);
 return preparedPos;
};
ASPx.PrepareClientPosForElement = function(pos, element, isX) {
 pos -= ASPx.GetPositionElementOffset(element, isX);
 return pos;
};
function getExperimentalPositionOffset(element, isX) {
 var div = createElementMock(element);
 if(div.style.position == "static")
  div.style.position = "absolute";
 element.parentNode.appendChild(div); 
 var realPos = isX ? ASPx.GetAbsoluteX(div) : ASPx.GetAbsoluteY(div);
 element.parentNode.removeChild(div);
 return realPos;
}
ASPx.GetPositionElementOffset = function(element, isX) {
 return getExperimentalPositionOffset(element, isX);
};
ASPx.GetSizeOfText = function(text, textCss) {
 var testContainer = document.createElement("tester");
 var defaultLineHeight = ASPx.Browser.Firefox ? "1" : "";
 testContainer.style.fontSize = textCss.fontSize;
 testContainer.style.fontFamily = textCss.fontFamily;
 testContainer.style.fontWeight = textCss.fontWeight;
 testContainer.style.letterSpacing = textCss.letterSpacing;
 testContainer.style.lineHeight = textCss.lineHeight || defaultLineHeight;
 testContainer.style.position = "absolute";
 testContainer.style.top = ASPx.InvalidPosition + "px";
 testContainer.style.left = ASPx.InvalidPosition + "px";
 testContainer.style.width = "auto";
 testContainer.style.whiteSpace = "nowrap";
 testContainer.appendChild(document.createTextNode(text));
 var testElement = document.body.appendChild(testContainer);
 var size = {
  "width": testElement.offsetWidth,
  "height": testElement.offsetHeight
 };
 document.body.removeChild(testElement);
 return size;
};
ASPx.PointToPixel = function(points, addPx) {  
 var result = 0;
 try {
  var indexOfPt = points.toLowerCase().indexOf("pt");
  if(indexOfPt > -1)
   result = parseInt(points.substr(0, indexOfPt)) * 96 / 72;
  else
   result = parseInt(points) * 96 / 72;
  if(addPx)
   result = result + "px";
 } catch(e) {}
 return result;
};
ASPx.PixelToPoint = function(pixels, addPt) { 
 var result = 0;
 try {
  var indexOfPx = pixels.toLowerCase().indexOf("px");
  if(indexOfPx > -1)
   result = parseInt(pixels.substr(0, indexOfPx)) * 72 / 96;
  else
   result = parseInt(pixels) * 72 / 96;
  if(addPt)
   result = result + "pt";
 } catch(e) {}
 return result;         
};
ASPx.PxToInt = function(px) {
 return pxToNumber(px, parseInt);
};
ASPx.PxToFloat = function(px) {
 return pxToNumber(px, parseFloat);
};
function pxToNumber(px, parseFunction) {
 var result = 0;
 if(px != null && px != "") {
  try {
   var indexOfPx = px.indexOf("px");
   if(indexOfPx > -1)
    result = parseFunction(px.substr(0, indexOfPx));
  } catch(e) { }
 }
 return result;
}
ASPx.PercentageToFloat = function(perc) {
 var result = 0;
 if(perc != null && perc != "") {
  try {
   var indexOfPerc = perc.indexOf("%");
   if(indexOfPerc > -1)
    result = parseFloat(perc.substr(0, indexOfPerc)) / 100;
  } catch(e) { }
 }
 return result;
};
ASPx.CreateGuid = function() {
 return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) { 
   var r = Math.random()*16|0,v=c=='x'?r:r&0x3|0x8;
  return v.toString(16);
 });
};
ASPx.GetLeftRightBordersAndPaddingsSummaryValue = function(element, currentStyle) {
 return ASPx.GetLeftRightPaddings(element, currentStyle) + ASPx.GetHorizontalBordersWidth(element, currentStyle);
};
ASPx.GetTopBottomBordersAndPaddingsSummaryValue = function(element, currentStyle) {
 return ASPx.GetTopBottomPaddings(element, currentStyle) + ASPx.GetVerticalBordersWidth(element, currentStyle);
};
ASPx.GetVerticalBordersWidth = function(element, style) {
 if(!ASPx.IsExists(style))
  style = ASPx.GetCurrentStyle(element);
 var res = 0;
 if(style.borderTopStyle != "none")
  res += ASPx.PxToFloat(style.borderTopWidth);
 if(style.borderBottomStyle != "none")
  res += ASPx.PxToFloat(style.borderBottomWidth);
 return res;
};
ASPx.GetHorizontalBordersWidth = function(element, style) {
 if(!ASPx.IsExists(style))
  style = ASPx.GetCurrentStyle(element);
 var res = 0;
 if(style.borderLeftStyle != "none")
  res += ASPx.PxToFloat(style.borderLeftWidth);
 if(style.borderRightStyle != "none")
  res += ASPx.PxToFloat(style.borderRightWidth);
 return res;
};
ASPx.GetTopBottomPaddings = function(element, style) {
 var currentStyle = style ? style : ASPx.GetCurrentStyle(element);
 return ASPx.PxToInt(currentStyle.paddingTop) + ASPx.PxToInt(currentStyle.paddingBottom);
};
ASPx.GetTopPaddings = function(element, style) {
 var currentStyle = style ? style : ASPx.GetCurrentStyle(element);
 return ASPx.PxToInt(currentStyle.paddingTop);
};
ASPx.GetBottomPaddings = function(element, style) {
 var currentStyle = style ? style : ASPx.GetCurrentStyle(element);
 return ASPx.PxToInt(currentStyle.paddingBottom);
};
ASPx.GetLeftRightPaddings = function(element, style) {
 var currentStyle = style ? style : ASPx.GetCurrentStyle(element);
 return ASPx.PxToInt(currentStyle.paddingLeft) + ASPx.PxToInt(currentStyle.paddingRight);
};
ASPx.GetTopBottomMargins = function(element, style) {
 var currentStyle = style ? style : ASPx.GetCurrentStyle(element);
 return ASPx.PxToInt(currentStyle.marginTop) + ASPx.PxToInt(currentStyle.marginBottom);
};
ASPx.GetLeftRightMargins = function(element, style) {
 var currentStyle = style ? style : ASPx.GetCurrentStyle(element);
 return ASPx.PxToInt(currentStyle.marginLeft) + ASPx.PxToInt(currentStyle.marginRight);
};
ASPx.GetClearClientWidth = function(element) {
 return ASPx.GetElementOffsetWidth(element)- ASPx.GetLeftRightBordersAndPaddingsSummaryValue(element);
};
ASPx.GetClearClientHeight = function(element) {
 return ASPx.GetElementOffsetHeight(element) - ASPx.GetTopBottomBordersAndPaddingsSummaryValue(element);
};
ASPx.SetOffsetWidth = function(element, widthValue, currentStyle) {
 if(!ASPx.IsExists(currentStyle))
  currentStyle = ASPx.GetCurrentStyle(element);
 var value = widthValue - ASPx.PxToInt(currentStyle.marginLeft) - ASPx.PxToInt(currentStyle.marginRight);
  value -= ASPx.GetLeftRightBordersAndPaddingsSummaryValue(element, currentStyle);
 if(value > -1)
  element.style.width = value + "px";
};
ASPx.SetOffsetHeight = function(element, heightValue, currentStyle) {
 if(!ASPx.IsExists(currentStyle))
  currentStyle = ASPx.GetCurrentStyle(element);
 var value = heightValue - ASPx.PxToInt(currentStyle.marginTop) - ASPx.PxToInt(currentStyle.marginBottom);
  value -= ASPx.GetTopBottomBordersAndPaddingsSummaryValue(element, currentStyle);
 if(value > -1)
  element.style.height = value + "px";
};
ASPx.FindOffsetParent = function(element) {
 var currentElement = element.parentNode;
 while(ASPx.IsExistsElement(currentElement) && currentElement.tagName != "BODY") {
  if(ASPx.GetElementOffsetWidth(currentElement) > 0 && ASPx.GetElementOffsetHeight(currentElement) > 0)
   return currentElement;
  currentElement = currentElement.parentNode;
 }
 return document.body;
};
ASPx.GetDocumentScrollTop = function(){
 if(Browser.WebKitFamily || Browser.Edge) {
  if(Browser.MacOSMobilePlatform) 
   return window.pageYOffset;
  if(Browser.WebKitFamily)
   return document.documentElement.scrollTop || document.body.scrollTop;
  return document.body.scrollTop;
 }
 else
  return document.documentElement.scrollTop;
};
ASPx.SetDocumentScrollTop = function(scrollTop) {
 if(!Browser.MacOSMobilePlatform && (Browser.Safari || (Browser.Chrome && Browser.Version < 60) || (Browser.Opera && Browser.MajorVersion >= 15) || Browser.Edge))  
  document.body.scrollTop = scrollTop;
 else
  document.documentElement.scrollTop = scrollTop;
};
ASPx.GetDocumentScrollLeft = function(){
 if(Browser.Edge)
  return document.body ? document.body.scrollLeft : document.documentElement.scrollLeft;
 if(Browser.WebKitFamily)
  return document.documentElement.scrollLeft || document.body.scrollLeft;
 return document.documentElement.scrollLeft;
};
ASPx.SetDocumentScrollLeft = function (scrollLeft) {
 if(!Browser.MacOSMobilePlatform && (Browser.Safari || (Browser.Chrome && Browser.Version < 60) || (Browser.Opera && Browser.MajorVersion >= 15) || Browser.Edge))  
  document.body.scrollLeft = scrollLeft;
 else
  document.documentElement.scrollLeft = scrollLeft;
};
ASPx.GetDocumentClientWidth = function(){
 if(document.documentElement.clientWidth == 0)
  return document.body.clientWidth;
 else
  return document.documentElement.clientWidth;
};
ASPx.GetDocumentClientHeight = function() {
 if(Browser.Firefox && window.innerHeight - document.documentElement.clientHeight > ASPx.GetVerticalScrollBarWidth()) {
  return window.innerHeight;
 } else if(Browser.Opera && Browser.Version < 9.6 || document.documentElement.clientHeight == 0) {
   return document.body.clientHeight;
 }
 return document.documentElement.clientHeight;
};
ASPx.GetDocumentWidth = function(){
 var bodyWidth = document.body.offsetWidth;
 var docWidth = document.documentElement.offsetWidth;
 var bodyScrollWidth = document.body.scrollWidth;
 var docScrollWidth = document.documentElement.scrollWidth;
 return getMaxDimensionOf(bodyWidth, docWidth, bodyScrollWidth, docScrollWidth);
};
ASPx.GetDocumentHeight = function(){
 var bodyHeight = document.body.offsetHeight;
 var docHeight = document.documentElement.offsetHeight;
 var bodyScrollHeight = document.body.scrollHeight;
 var docScrollHeight = document.documentElement.scrollHeight;
 var maxHeight = getMaxDimensionOf(bodyHeight, docHeight, bodyScrollHeight, docScrollHeight);
 if(Browser.Opera && Browser.Version >= 9.6){
  if(Browser.Version < 10)
   maxHeight = getMaxDimensionOf(bodyHeight, docHeight, bodyScrollHeight);
  var visibleHeightOfDocument = document.documentElement.clientHeight;
  if(maxHeight > visibleHeightOfDocument)
   maxHeight = getMaxDimensionOf(window.outerHeight, maxHeight);
  else
   maxHeight = document.documentElement.clientHeight;
  return maxHeight;
 }
 return maxHeight;
};
ASPx.GetDocumentMaxClientWidth = function(){
 var bodyWidth = document.body.offsetWidth;
 var docWidth = document.documentElement.offsetWidth;
 var docClientWidth = document.documentElement.clientWidth;
 return getMaxDimensionOf(bodyWidth, docWidth, docClientWidth);
};
ASPx.GetDocumentMaxClientHeight = function(){
 var bodyHeight = document.body.offsetHeight;
 var docHeight = document.documentElement.offsetHeight;
 var docClientHeight = document.documentElement.clientHeight;
 return getMaxDimensionOf(bodyHeight, docHeight, docClientHeight);
};
ASPx.verticalScrollIsNotHidden = null;
ASPx.horizontalScrollIsNotHidden = null;
ASPx.GetVerticalScrollIsNotHidden = function() {
 if(!ASPx.IsExists(ASPx.verticalScrollIsNotHidden))
  ASPx.verticalScrollIsNotHidden = ASPx.GetCurrentStyle(document.body).overflowY !== "hidden"
   && ASPx.GetCurrentStyle(document.documentElement).overflowY !== "hidden";
 return ASPx.verticalScrollIsNotHidden;
};
ASPx.GetHorizontalScrollIsNotHidden = function() {
 if(!ASPx.IsExists(ASPx.horizontalScrollIsNotHidden))
  ASPx.horizontalScrollIsNotHidden = ASPx.GetCurrentStyle(document.body).overflowX !== "hidden"
   && ASPx.GetCurrentStyle(document.documentElement).overflowX !== "hidden";
 return ASPx.horizontalScrollIsNotHidden;
};
ASPx.GetCurrentDocumentWidth = function() {
 var result = ASPx.GetDocumentClientWidth();
 if(!ASPx.Browser.Safari && ASPx.GetVerticalScrollIsNotHidden() && ASPx.GetDocumentHeight() > ASPx.GetDocumentClientHeight())
  result += ASPx.GetVerticalScrollBarWidth();
 return result;
};
ASPx.GetCurrentDocumentHeight = function() {
 var result = ASPx.GetDocumentClientHeight();
 if(!ASPx.Browser.Safari && ASPx.GetHorizontalScrollIsNotHidden() && ASPx.GetDocumentWidth() > ASPx.GetDocumentClientWidth())
  result += ASPx.GetVerticalScrollBarWidth();
 return result;
};
function getMaxDimensionOf(){
 var max = ASPx.InvalidDimension;
 for(var i = 0; i < arguments.length; i++){
  if(max < arguments[i])
   max = arguments[i];
 }
 return max;
}
ASPx.GetClientLeft = function(element) {
 return ASPx.IsExists(element.clientLeft) ? element.clientLeft : (ASPx.GetElementOffsetWidth(element)- element.clientWidth) / 2;
};
ASPx.GetClientTop = function(element) {
 return ASPx.IsExists(element.clientTop) ? element.clientTop : (ASPx.GetElementOffsetHeight(element) - element.clientHeight) / 2;
};
var requestAnimationFrameFunc = window.requestAnimationFrame || function(callback) { callback(); };
var cancelAnimationFrameFunc = window.cancelAnimationFrame || function(id) { };
ASPx.CancelAnimationFrame = function(id) { cancelAnimationFrameFunc(id); };
ASPx.RequestAnimationFrame = function (callback) { return requestAnimationFrameFunc(callback); };
ASPx.SetStyles = function(element, styles, makeImportant) {
 if(ASPx.IsExists(styles.cssText))
  element.style.cssText = styles.cssText;
 if(ASPx.IsExists(styles.className)) {
  ASPx.SetClassName(element, styles.className);
 }
 for(var property in styles) {
  if(!styles.hasOwnProperty(property))
   continue;
  var value = styles[property];
  switch (property) {
   case "cssText":
   case "className":
    break;
   case "float":
    ASPx.SetElementFloat(element, value);
    break;
   case "opacity":
    ASPx.SetElementOpacity(element, value);
    break;
   case "zIndex":
    ASPx.SetStylesCore(element, property, value, makeImportant);
    break;
   default:
    ASPx.SetStylesCore(element, property, value + (typeof (value) == "number" ? "px" : ""), makeImportant);
  }
 }
};
ASPx.SetStylesCore = function(element, property, value, makeImportant) {
 if(makeImportant) {
  var index = property.search("[A-Z]");
  if(index != -1)
   property = property.replace(property.charAt(index), "-" + property.charAt(index).toLowerCase());
  if(element.style.setProperty)
   element.style.setProperty(property, value, "important");
  else 
   element.style.cssText += ";" + property + ":" + value + "!important";
 }
 else
  element.style[property] = value;
};
ASPx.RemoveBordersAndShadows = function(el) {
 if(!el || !el.style)
  return;
 el.style.borderWidth = 0;
 if(ASPx.IsExists(el.style.boxShadow))
  el.style.boxShadow = "none";
 else if(ASPx.IsExists(el.style.MozBoxShadow))
  el.style.MozBoxShadow = "none";
 else if(ASPx.IsExists(el.style.webkitBoxShadow))
  el.style.webkitBoxShadow = "none";
};
ASPx.GetCellSpacing = function(element) {
 var val = parseInt(element.cellSpacing);
 if(!isNaN(val)) return val;
 val = parseInt(ASPx.GetCurrentStyle(element).borderSpacing);
 if(!isNaN(val)) return val;
 return 0;
};
ASPx.GetInnerScrollPositions = function(element) {
 var scrolls = [];
 getInnerScrollPositionsCore(element, scrolls);
 return scrolls;
};
function getInnerScrollPositionsCore(element, scrolls) {
 for(var child = element.firstChild; child; child = child.nextSibling) {
  var scrollTop = child.scrollTop,
   scrollLeft = child.scrollLeft;
  if(scrollTop > 0 || scrollLeft > 0)
   scrolls.push([child, scrollTop, scrollLeft]);
  getInnerScrollPositionsCore(child, scrolls);
 }
}
ASPx.RestoreInnerScrollPositions = function(scrolls) {
 for(var i = 0, scrollArr; scrollArr = scrolls[i]; i++) {
  if(scrollArr[1] > 0)
   scrollArr[0].scrollTop = scrollArr[1];
  if(scrollArr[2] > 0)
   scrollArr[0].scrollLeft = scrollArr[2];
 }
};
ASPx.GetOuterScrollPosition = function(element) {
 while(element && element.tagName !== "BODY") {
  var scrollTop = element.scrollTop,
   scrollLeft = element.scrollLeft;
  if(scrollTop > 0 || scrollLeft > 0) {
   return {
    scrollTop: scrollTop,
    scrollLeft: scrollLeft,
    element: element
   };
  }
  element = element.parentNode;
 }
 return {
  scrollTop: ASPx.GetDocumentScrollTop(),
  scrollLeft: ASPx.GetDocumentScrollLeft()
 };
};
ASPx.RestoreOuterScrollPosition = function(scrollInfo) {
 if(scrollInfo.element) {
  if(scrollInfo.scrollTop > 0)
   scrollInfo.element.scrollTop = scrollInfo.scrollTop;
  if(scrollInfo.scrollLeft > 0)
   scrollInfo.element.scrollLeft = scrollInfo.scrollLeft;
 }
 else {
  if(scrollInfo.scrollTop > 0)
   ASPx.SetDocumentScrollTop(scrollInfo.scrollTop);
  if(scrollInfo.scrollLeft > 0)
   ASPx.SetDocumentScrollLeft(scrollInfo.scrollLeft);
 }
};
ASPx.ChangeElementContainer = function(element, container, savePreviousContainer) {
 if(element.parentNode != container) {
  var parentNode = element.parentNode;
  parentNode.removeChild(element);
  container.appendChild(element);
  if(savePreviousContainer)
   element.previousContainer = parentNode;
 }
};
ASPx.RestoreElementContainer = function(element) {
 if(element.previousContainer) {
  ASPx.ChangeElementContainer(element, element.previousContainer, false);
  element.previousContainer = null;
 }
};
ASPx.MoveChildrenToElement = function(sourceElement, destinationElement){
 while(sourceElement.childNodes.length > 0)
  destinationElement.appendChild(sourceElement.childNodes[0]);
};
ASPx.GetScriptCode = function(script) {
 var useFirstChildElement = Browser.Chrome && Browser.Version < 11 || Browser.Safari && Browser.Version < 5; 
 var text = useFirstChildElement ? script.firstChild.data : script.text;
 var comment = "<!--";
 var pos = text.indexOf(comment);
 if(pos > -1)
  text = text.substr(pos + comment.length);
 return text;
};
ASPx.AppendScript = function(script) {
 var parent = document.getElementsByTagName("head")[0];
 if(!parent)
  parent = document.body;
 if(parent)
  parent.appendChild(script);
};
function getFrame(frames, name) {
 if(frames[name])
  return frames[name];
 for(var i = 0; i < frames.length; i++) {
  try {
   var frame = frames[i];
   if(frame.name == name) 
    return frame; 
   frame = getFrame(frame.frames, name);
   if(frame != null)   
    return frame; 
  } catch(e) {
  } 
 }
 return null;
}
ASPx.IsValidElement = function(element) {
 if(!element) 
  return false;
 if(!(Browser.Firefox && Browser.Version < 4)) {
  if(element.ownerDocument && element.ownerDocument.body && element.ownerDocument.body.compareDocumentPosition)
   return element.ownerDocument.body.compareDocumentPosition(element) % 2 === 0;
 }
 if(!Browser.Opera && element.offsetParent && element.parentNode.tagName)
  return true;
 while(element != null){
  if(element.tagName == "BODY")
   return true;
  element = element.parentNode;
 }
 return false;
};
ASPx.IsValidElements = function(elements) {
 if(!elements)
  return false; 
 for(var i = 0; i < elements.length; i++) {
  if(elements[i] && !ASPx.IsValidElement(elements[i]))
   return false;
 }
 return true;
};
ASPx.IsExistsElement = function(element) {
 return element && ASPx.IsValidElement(element);
};
ASPx.CreateHtmlElementFromString = function(str) {
 var dummy = ASPx.CreateHtmlElement();
 setInnerHtmlInternal(dummy, str);
 return dummy.firstChild;
};
ASPx.CreateHtmlElement = function(tagName, styles) {
 var element = document.createElement(tagName || "DIV");
 if(styles)
  ASPx.SetStyles(element, styles);
 return element;
};
ASPx.RestoreElementOriginalWidth = function(element) {
 if(!ASPx.IsExistsElement(element)) 
  return;
 element.style.width = element.dxOrigWidth = ASPx.GetElementOriginalWidth(element);
};
ASPx.GetElementOriginalWidth = function(element) {
 if(!ASPx.IsExistsElement(element)) 
  return null;
 var width;
 if(!ASPx.IsExists(element.dxOrigWidth)) {
  width = String(element.style.width).length > 0
   ? element.style.width
   : ASPx.GetElementOffsetWidth(element) + "px";
 } else {
  width = element.dxOrigWidth;
 }
 return width;
};
ASPx.DropElementOriginalWidth = function(element) {
 if(ASPx.IsExists(element.dxOrigWidth))
  element.dxOrigWidth = null;
};
ASPx.GetObjectKeys = function(obj) {
 if(!obj) return [ ];
 if(Object.keys)
  return Object.keys(obj);
 var keys = [ ];
 for(var key in obj) {
  if(obj.hasOwnProperty(key))
   keys.push(key);
 }
 return keys;
};
ASPx.ShowErrorAlert = function(message) {
 message = ASPx.Str.DecodeHtmlViaTextArea(message);
 if(ASPx.IsExists(message) && message !== "")
  alert(message);
};
ASPx.ShowKBErrorMessage = function(text, kbid) {
 ASPx.ShowErrorMessage(text + "https://www.devexpress.com/kbid=" + kbid + ".");
};
ASPx.ShowErrorMessage = function(errorMessage) {
 var console = window.console;
 if(!console || !ASPx.IsFunction(console.error))
  return;
 console.error(errorMessage);
};
ASPx.IsInteractiveControl = function(element, extremeParent) { 
 return Data.ArrayIndexOf(["A", "INPUT", "SELECT", "OPTION", "TEXTAREA", "BUTTON", "IFRAME"], element.tagName) > -1;
};
ASPx.IsUrlContainsClientScript = function(url) {
 return url.toLowerCase().indexOf("javascript:") !== -1;
};
ASPx.GetMSAjaxRequestManager = function() {
 if(window.Sys && Sys.WebForms && Sys.WebForms.PageRequestManager && Sys.WebForms.PageRequestManager.getInstance)
  return Sys.WebForms.PageRequestManager.getInstance();
 return null;
};
Function.prototype.aspxBind = function(scope) {
 var func = this;
 return function() {
  return func.apply(scope, arguments);
 };
};
var FilteringUtils = { };
FilteringUtils.EventKeyCodeChangesTheInput = function(evt) {
 if(ASPx.IsPasteShortcut(evt))
  return true;
 else if(evt.ctrlKey && !evt.altKey)
  return false;
 if(ASPx.Browser.AndroidMobilePlatform || ASPx.Browser.MacOSMobilePlatform) return true; 
 var keyCode = ASPx.Evt.GetKeyCode(evt);
 var isSystemKey = ASPx.Key.Windows <= keyCode && keyCode <= ASPx.Key.ContextMenu;
 var isFKey = ASPx.Key.F1 <= keyCode && keyCode <= 127; 
 return ASPx.Key.Delete <= keyCode && !isSystemKey && !isFKey || keyCode == ASPx.Key.Backspace || keyCode == ASPx.Key.Space;
};
FilteringUtils.FormatCallbackArg = function(prefix, arg) {
 return (ASPx.IsExists(arg) ? prefix + "|" + arg.length + ';' + arg + ';' : "");
};
ASPx.FilteringUtils = FilteringUtils;
var FormatStringHelper = { };
FormatStringHelper.PlaceHolderTemplateStruct = function(startIndex, length, index, placeHolderString){
 this.startIndex = startIndex;
 this.realStartIndex = 0;
 this.length = length;
 this.realLength = 0;
 this.index = index;
 this.placeHolderString = placeHolderString;
};
FormatStringHelper.GetPlaceHolderTemplates = function(formatString){
 formatString = this.CollapseDoubleBrackets(formatString);
 var templates = this.CreatePlaceHolderTemplates(formatString);
 return templates;
};
FormatStringHelper.CreatePlaceHolderTemplates = function(formatString){
 var templates = [];
 var templateStrings = formatString.match(/{[^}]+}/g);
 if(templateStrings != null){
  var pos = 0;
  for(var i = 0; i < templateStrings.length; i++){
   var tempString = templateStrings[i];
   var startIndex = formatString.indexOf(tempString, pos);
   var length = tempString.length;
   var indexString = tempString.slice(1).match(/^[0-9]+/);
   var index = parseInt(indexString);
   templates.push(new this.PlaceHolderTemplateStruct(startIndex, length, index, tempString));
   pos = startIndex + length;
  }
 }
 return templates;
};
FormatStringHelper.CollapseDoubleBrackets = function(formatString){
 formatString = this.CollapseOpenDoubleBrackets(formatString);
 formatString = this.CollapseCloseDoubleBrackets(formatString);
 return formatString;
};
FormatStringHelper.CollapseOpenDoubleBrackets = function(formatString){
 return formatString.replace(/{{/g, "_");
};
FormatStringHelper.CollapseCloseDoubleBrackets = function(formatString){
 while(true){
  var index = formatString.lastIndexOf("}}");
  if(index == -1) 
   break;
  else
   formatString = formatString.substr(0, index) + "_" + formatString.substr(index + 2);
 }
 return formatString;
};
ASPx.FormatStringHelper = FormatStringHelper;
var StartWithFilteringUtils = { };
StartWithFilteringUtils.HighlightSuggestedText = function(input, suggestedText, control, onChangeInput){
 if(this.NeedToLockAndoidKeyEvents(control))
  control.LockAndroidKeyEvents();
 var selInfo = ASPx.Selection.GetInfo(input);
 var currentTextLenght = ASPx.Str.GetCoincideCharCount(suggestedText, input.value, 
  function(text, filter) { 
   return text.indexOf(filter) == 0;
  });
 var suggestedTextLenght = suggestedText.length;
 var isSelected = selInfo.startPos == 0 && selInfo.endPos == currentTextLenght && 
  selInfo.endPos == suggestedTextLenght && input.value == suggestedText;
 if(!isSelected) { 
  input.value = suggestedText;
  if(onChangeInput)
   onChangeInput();
  if(this.NeedToLockAndoidKeyEvents(control)) {
   window.setTimeout(function() {
    this.SelectText(input, currentTextLenght, suggestedTextLenght);
    control.UnlockAndroidKeyEvents();
   }.aspxBind(this), control.adroidSamsungBugTimeout);
  } else
   this.SelectText(input, currentTextLenght, suggestedTextLenght);
 }
};
StartWithFilteringUtils.SelectText = function(input, startPos, stopPos) {
 if(startPos < stopPos)
  ASPx.Selection.Set(input, startPos, stopPos);
};
StartWithFilteringUtils.RollbackOneSuggestedChar = function(input){
 var currentText = input.value;
 var cutText = currentText.slice(0, -1);
 if(cutText != currentText)
  input.value = cutText;
};
StartWithFilteringUtils.NeedToLockAndoidKeyEvents = function(control) {
 return ASPx.Browser.AndroidMobilePlatform && control && control.LockAndroidKeyEvents;
};
ASPx.StartWithFilteringUtils = StartWithFilteringUtils;
var ContainsFilteringUtils = { };
ContainsFilteringUtils.ColumnSelectionStruct = function(index, startIndex, length){
 this.index = index;
 this.length = length;
 this.startIndex = startIndex;
};
ContainsFilteringUtils.IsFilterCrossPlaseHolder = function(filterStartIndex, filterEndIndex, template) {
 var left = Math.max(filterStartIndex, template.realStartIndex);
 var right = Math.min(filterEndIndex,  template.realStartIndex + template.realLength);
 return left < right;
};
ContainsFilteringUtils.GetColumnSelectionsForItem = function(itemValues, formatString, filterString) {
 if(formatString == "") 
  return this.GetSelectionForSingleColumnItem(itemValues, filterString); 
 var result = [];
 var formatedString = ASPx.Formatter.Format(formatString, itemValues);
 var filterStartIndex = ASPx.Str.PrepareStringForFilter(formatedString).indexOf(ASPx.Str.PrepareStringForFilter(filterString));
 if(filterStartIndex == -1) return result;
 var filterEndIndex = filterStartIndex + filterString.length;
 var templates = FormatStringHelper.GetPlaceHolderTemplates(formatString);
 this.SupplyTemplatesWithRealValues(itemValues, templates);
 for(var i = 0; i < templates.length ; i++) {
  if(this.IsFilterCrossPlaseHolder(filterStartIndex, filterEndIndex, templates[i])) 
   result.push(this.GetColumnSelectionsForItemValue(templates[i], filterStartIndex, filterEndIndex));
 }
 return result;
};
ContainsFilteringUtils.GetColumnSelectionsForItemValue = function(template, filterStartIndex, filterEndIndex) {
 var selectedTextStartIndex = filterStartIndex < template.realStartIndex ? 0 :
  filterStartIndex - template.realStartIndex;
 var selectedTextEndIndex = filterEndIndex >  template.realStartIndex + template.realLength ? template.realLength :
  filterEndIndex - template.realStartIndex;
 var selectedTextLength = selectedTextEndIndex - selectedTextStartIndex;
 return new this.ColumnSelectionStruct(template.index, selectedTextStartIndex, selectedTextLength);
};
ContainsFilteringUtils.GetSelectionForSingleColumnItem = function(itemValues, filterString) {
 var selectedTextStartIndex = ASPx.Str.PrepareStringForFilter(itemValues[0]).indexOf(ASPx.Str.PrepareStringForFilter(filterString));
 var selectedTextLength = filterString.length;
 return [new this.ColumnSelectionStruct(0, selectedTextStartIndex, selectedTextLength)];
};
ContainsFilteringUtils.ResetFormatStringIndex = function(formatString, index) {
 if(index != 0)
  return formatString.replace(index.toString(), "0");
 return formatString;
};
ContainsFilteringUtils.SupplyTemplatesWithRealValues = function(itemValues, templates) {
 var shift = 0;
 for(var i = 0; i < templates.length; i++) {
  var formatString = this.ResetFormatStringIndex(templates[i].placeHolderString, templates[i].index);
  var currentItemValue = itemValues[templates[i].index];
  templates[i].realLength = ASPx.Formatter.Format(formatString, currentItemValue).length;
  templates[i].realStartIndex  += templates[i].startIndex + shift; 
  shift += templates[i].realLength - templates[i].placeHolderString.length; 
 }
};
ContainsFilteringUtils.PrepareElementText = function(itemText) {
 return itemText ? itemText.replace(/\&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;") : '';
};
ContainsFilteringUtils.UnselectContainsTextInElement = function(element, selection, highlightTagName) {
 var currentText =  ASPx.Attr.GetAttribute (element, "DXText");
 if(ASPx.IsExists(currentText)) {
  currentText = ContainsFilteringUtils.PrepareElementText(currentText);
  ASPx.Security.setInnerHtml(element, currentText === "" ? "&nbsp;" : currentText, ASPx.Security.DataType.Trusted);
 }
};
ContainsFilteringUtils.ReselectContainsTextInElement = function(element, selection, highlightTagName) {
 var currentText = ASPx.GetInnerText(element);
 if(!highlightTagName)
  highlightTagName = "em";
 highlightTagName = highlightTagName.toLowerCase();
 if(currentText.indexOf("</" + highlightTagName + ">") != -1)
  ContainsFilteringUtils.UnselectContainsTextInElement(element, selection, highlightTagName);
 return ContainsFilteringUtils.SelectContainsTextInElement(element, selection, highlightTagName);
};
ContainsFilteringUtils.SelectContainsTextInElement = function(element, selection, highlightTagName) {
 if(selection.startIndex == -1)
  return;
 var currentText =  ASPx.Attr.GetAttribute (element, "DXText");
 if(!ASPx.IsExists(currentText)) ASPx.Attr.SetAttribute (element, "DXText", ASPx.GetInnerText(element));
 if(!highlightTagName)
  highlightTagName = "em";
 highlightTagName = highlightTagName.toLowerCase();
 var oldInnerText = ASPx.GetInnerText(element);
 var newInnerText = ContainsFilteringUtils.PrepareElementText(oldInnerText.substr(0, selection.startIndex)) + "<" + highlightTagName + ">" +
      ContainsFilteringUtils.PrepareElementText(oldInnerText.substr(selection.startIndex, selection.length)) + "</" + highlightTagName + ">" +
      ContainsFilteringUtils.PrepareElementText(oldInnerText.substr(selection.startIndex + selection.length));
 ASPx.Security.setInnerHtml(element, newInnerText, ASPx.Security.DataType.Trusted);
};
ASPx.ContainsFilteringUtils = ContainsFilteringUtils;
ASPx.MakeEqualControlsWidth = function(name1, name2){
 var control1 = ASPx.GetControlCollection().Get(name1);
 var control2 = ASPx.GetControlCollection().Get(name2);
 if(control1 && control2){
  var width = Math.max(control1.GetWidth(), control2.GetWidth());
  control1.SetWidth(width);
  control2.SetWidth(width);
 }
};
ASPx.HighContrastForeColorHighlightColorMap = {
 "#ffff00" : "#008000",
 "#00ff00" : "#0000ff",
 "#ffffff" : "#00838f",
 "#000000" : "#a347ff"
};
var BadgeManagerBase = ASPx.CreateClass(null, {
 createBadge: function(text, iconCssClass) {
  var badge = document.createElement("SPAN");
  ASPx.SetClassName(badge, this.getBadgeClassName());
  if(iconCssClass && iconCssClass.length)
   this.setBadgeIconCssClass(badge, iconCssClass);
  if(text && text.length)
   this.setBadgeText(badge, text);
  return badge;
 },
 findBadge: function(element) {
  if(!element)
   return null;
  return element.querySelector("." + this.getBadgeClassName());
 },
 setBadgeIconCssClass: function(badge, iconCssClass) {
  if(!badge || iconCssClass === undefined)
   return;
  var iconElement = this.getBadgeIconElement(badge);
  if(!iconCssClass) {
   if(iconElement)
    badge.removeChild(iconElement);
  }
  else {
   if(!iconElement) {
    iconElement = document.createElement("SPAN");
    badge.insertBefore(iconElement, badge.childNodes[0]);
   }
   ASPx.SetClassName(iconElement, iconCssClass + " " + this.getBadgeIconDefaultClassName());
  }
 },
 getBadgeIconCssClass: function(element) {
  var badge = this.findBadge(element);
  if(badge) {
   var iconElement = this.getBadgeIconElement(badge);
   var regEx = new RegExp("(?:^|\\s)" + this.getBadgeIconDefaultClassName() + "(?!\\S)");
   return iconElement ? ASPx.Str.Trim(ASPx.GetClassName(iconElement).replace(regEx, "")) : "";
  }
  return "";
 },
 setBadgeText: function(badge, text) {
  if(!badge || text === undefined)
   return;
  var textElement = this.getBadgeTextElement(badge);
  if(!text) {
   if(textElement)
    badge.removeChild(textElement);
  }
  else {
   if(!textElement) {
    textElement = document.createElement("SPAN");
    badge.appendChild(textElement);
   }
   ASPx.Security.setInnerHtml(textElement, text, ASPx.Security.DataType.Trusted);
  }
 },
 getBadgeText: function(element) {
  var badge = this.findBadge(element);
  if(badge) {
   var textElement = this.getBadgeTextElement(badge);
   return textElement ? ASPx.GetInnerText(textElement) : "";
  }
  return "";
 },
 getBadgeClassName: function() {
  return "";
 },
 getBadgeIconDefaultClassName: function() {
  return "";
 },
 getBadgeIconElement: function(badge) {
  return badge.childNodes.length ? badge.querySelector("." + this.getBadgeIconDefaultClassName()) : null;
 },
 getBadgeTextElement: function(badge) {
  return badge.childNodes.length ? badge.querySelector("span:not(." + this.getBadgeIconDefaultClassName() + ")") : null;
 }
});
ASPx.BadgeManagerBase = BadgeManagerBase;
var BadgeManager = ASPx.CreateClass(BadgeManagerBase, {
 getBadgeClassName: function() {
  return "dxBadge";
 },
 getBadgeIconDefaultClassName: function() {
  return "dxBadgeImage";
 },
 createBadgeForButton: function(button) {
  var badge = ASPx.BadgeManager.createBadge();
  var buttonImage = button.GetButtonImage();
  var textContainer = button.GetTextContainer();
  var badgeRightSibling = !!buttonImage ? buttonImage : textContainer;
  badgeRightSibling.parentNode.insertBefore(badge, badgeRightSibling);
  if(button.IsLink() && buttonImage)
   ASPx.SetStyles(badge, { verticalAlign: "middle" });
  return badge;
 },
 createBadgeForToolbar: function(toolbarItem) {
  var badge = ASPx.BadgeManager.createBadge();
  var itemImage = toolbarItem.GetImage();
  var badgeRightSibling = itemImage;
  if(!itemImage) {
   var itemContentElement = toolbarItem.menu.GetItemContentElement(toolbarItem.indexPath);
   badgeRightSibling = toolbarItem.menu.GetContentTextElement(itemContentElement);
  }
  badgeRightSibling.parentNode.insertBefore(badge, badgeRightSibling);
  return badge;
 }
});
ASPx.BadgeManager = new BadgeManager();
var AccessibilityUtils = {
 isInitialized: false,
 highContrastCssClassMarker: "dxHighContrast",
 highContrastBackgroundCssClassMarker: "dxHCB",
 highContrastDefaultBackgroundColor: "#a347ff",
 highContrastThemeActive: false,
 accessibleBackgroundCssMarker: ".dx-runtime-background",
 createAccessibleBackgrounds: function(control) {
  if(!this.highContrastThemeActive || control.accessibleBackgroundsCreated || !control.accessibilityCompliant)
   return;
  var className = this.accessibleBackgroundCssMarker;
  var styleSheetRuleNames = [];
  iterateStyleSheetRules(null, function(rule) {
   var selectorTxt = rule.selectorText;
   if(selectorTxt && selectorTxt.indexOf(className) > -1)
    styleSheetRuleNames.push(ASPx.Str.CompleteReplace(selectorTxt, className, "")); 
  });
  for(var i = 0; i < styleSheetRuleNames.length; i++) {
   var name = styleSheetRuleNames[i];
   var rule = ASPx.GetStyleSheetRules(name.substring(1));
   if(rule && rule.style && rule.style.backgroundImage)
    this.createAccessibleBackground(control.GetMainElement(), rule.style, name);
  }
  control.accessibleBackgroundsCreated = true;
 },
 createAccessibleBackground: function(container, style, selector) {
  if(!container)
   return;
  var backgroundUrl = style.backgroundImage.substring(5, style.backgroundImage.length - 2);
  var elements = container.querySelectorAll(selector);
  var accessibleBackgroundClassName = "dx-acc-bi";
  for(var i = 0; i < elements.length; i++) {
   var element = elements[i];
   if(ASPx.ElementHasCssClass(element, accessibleBackgroundClassName))
    continue;
   var image = null;
   if(element.tagName !== "IMG") {
    ASPx.AddClassNameToElement(element, accessibleBackgroundClassName);
    image = element.ownerDocument.createElement("IMG");
    ASPx.SetStyles(image, { width: "100%", height: "100%" });
    if(element.firstChild)
     element.insertBefore(image, element.firstChild);
    else
     element.appendChild(image);
   } else
    image = element;
   image.src = backgroundUrl;
  }
 },
 createHighContrastBackgroundStyle: function() {
  var style = document.createElement('style');
  ASPx.Attr.AppendStyleType(style);
  var styleContent = [
   "." + this.highContrastCssClassMarker + " ." + this.highContrastBackgroundCssClassMarker + ":after {",
   "border-image: url(" + this.getHighContrastBackgroundUrl() + ") 0 1 0 0 round;",
   "}",
  ];
  setInnerHtmlInternal(style, styleContent.join('\n'));
  document.getElementsByTagName('head')[0].appendChild(style);
 },
 getHighContrastBackgroundUrl: function() {
  var canvas = document.createElement("canvas"),
  ctx = canvas.getContext('2d');
  canvas.width = 1;
  canvas.height = 1;
  ctx.fillStyle = this.getHighContrastBackgroundColor();
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  return canvas.toDataURL();
 },
 getHighContrastBackgroundColor: function() {
  var foreColor = ASPx.GetCurrentStyle(document.body).color;
  var hexColor = ASPx.Color.ColorToHexadecimal(foreColor);
  return ASPx.HighContrastForeColorHighlightColorMap[hexColor] || this.highContrastDefaultBackgroundColor;
 },
 initialize: function() {
  if(this.isInitialized)
   return;
  this.isInitialized = true;
  this.detectHighContrastTheme();
  if(this.highContrastThemeActive)
   this.createHighContrastBackgroundStyle();
 },
 detectHighContrastTheme: function() {
  var testElement = document.createElement("DIV");
  ASPx.SetStyles(testElement, {
   backgroundColor: "rgb(255, 255, 255)",
   display: "none"
  }, true);
  var docElement = document.documentElement;
  docElement.appendChild(testElement);
  var actualBackgroundColor = ASPx.GetCurrentStyle(testElement).backgroundColor;
  docElement.removeChild(testElement);
  if(actualBackgroundColor === "rgb(0, 0, 0)") {
   this.highContrastThemeActive = true;
   ASPx.AddClassNameToElement(docElement, this.highContrastCssClassMarker);
  }
 }
};
ASPx.AccessibilityUtils = AccessibilityUtils;
ASPx.AccessibilityUtils.SendMessageToAssistiveTechnology = function(message) {
 var messageParts = ASPx.Ident.IsArray(message) ? message : [message];
 var args = new ASPxClientControlBeforePronounceEventArgs(messageParts, null);
 ASPx.AccessibilityPronouncer.EnsureInitialize();
 ASPx.AccessibilityPronouncer.Pronounce(args, ASPx.AccessibilityPronouncerType.live);
};
ASPx.AccessibilityUtils.SetFocusAccessible = function(focusableElement) {
 if(!focusableElement)
  return;
 var elementId = focusableElement.id;
 if(!elementId) {
  var namedParent = ASPx.GetParent(focusableElement, function(element) {
   return !!element.id;
  });
  if(ASPx.IsExists(namedParent))
   elementId = namedParent.id;
 }
 var focusableControl = ASPx.GetClientControlByElementID(elementId);
 if(focusableControl && focusableControl.OnAssociatedLabelClick)
  focusableControl.OnAssociatedLabelClick(focusableElement);
 else
  window.setTimeout(function() {
   ASPx.AccessibilityUtils.SetFocusAccessibleCore(focusableElement);
  }, 0);
};
ASPx.AccessibilityUtils.SetFocusAccessibleCore = function(focusableElement) {
 if(!ASPx.IsExists(focusableElement))
  return;
 var isTabIndexChanged = ASPx.ControlTabIndexManager.getInstance().isElementWithChangedIndex(focusableElement);
 if(isTabIndexChanged)
  return;
 if(!ASPx.IsValidElement(focusableElement) && focusableElement.id)
  focusableElement = ASPx.GetElementById(focusableElement.id);
 if(!ASPx.IsActionElement(focusableElement))
  focusableElement = ASPx.RestoreFocusHelper.findNeighbourFocusElement(focusableElement, document.body);
 if(ASPx.IsExistsElement(focusableElement))
  focusableElement.focus();
};
var Security = {
 setInnerHtml: function(el, html, dataType) {
  if(!html) {
   while(el.firstChild)
    ASPx.RemoveElement(el.firstChild);
  } else
   Security.setData(html, function(d) { ASPx.SetInnerHtml.call(window, el, d); }, dataType);
 },
 setText: function(control, text, dataType) { Security.setData(text, control.SetText.aspxBind(control), dataType); },
 safeEncodeHtml: function(html) { return ASPx.Str.EncodeHtml(ASPx.Str.DecodeHtml(html)); },
 setData: function(data, dataSetter, dataType) {
  if(dataType === undefined)
   throw new Error("Specify the dataType");
  if(dataType == Security.DataType.Untrusted)
   data = Security.safeEncodeHtml(data);
  dataSetter(data);
 }
};
Security.DataType = {
 Trusted: 0,
 Untrusted: 1
};
ASPx.EnableCssAnimation = true;
var AnimationTransitionBase = ASPx.CreateClass(null, {
 constructor: function(element, options) {
  if(element) {
   AnimationTransitionBase.Cancel(element);
   this.element = element;
   this.element.aspxTransition = this;
  }
  this.duration = options.duration || AnimationConstants.Durations.DEFAULT;
  this.transition = options.transition || AnimationConstants.Transitions.SINE;
  this.property = options.property;
  this.unit = options.unit || "";
  this.onComplete = options.onComplete;
  this.to = null;
  this.from = null;
 },
 Start: function(from, to) {
  if(to != undefined) {
   this.to = to;
   this.from = from;
   this.SetValue(this.from);
  }
  else
   this.to = from;
 },
 Cancel: function() {
  if(!this.element)
   return;
  try {
   delete this.element.aspxTransition;
  } catch(e) {
   this.element.aspxTransition = undefined;
  }
 },
 GetValue: function() {
  return this.getValueInternal(this.element, this.property);
 },
 SetValue: function(value) {
  this.setValueInternal(this.element, this.property, this.unit, value);
 },
 setValueInternal: function(element, property, unit, value) {
  if(property == "opacity")
   AnimationUtils.setOpacity(element, value);
  else
   element.style[property] = value + unit;
 },
 getValueInternal: function(element, property) {
  if(property == "opacity")
   return ASPx.GetElementOpacity(element);
  var value = parseFloat(element.style[property]);
  return isNaN(value) ? 0 : value;
 },
 performOnComplete: function() {
  if(this.onComplete)
   this.onComplete(this.element);
 },
 getTransition: function() {
  return this.transition;
 }
});
AnimationTransitionBase.Cancel = function(element) {
 if(element.aspxTransition)
  element.aspxTransition.Cancel();
};
var AnimationConstants = {};
AnimationConstants.Durations = {
 SHORT: 200,
 DEFAULT: 400,
 LONG: 600
};
AnimationConstants.Transitions = {
 LINER: {
  Css: "cubic-bezier(0.250, 0.250, 0.750, 0.750)",
  Js: function(progress) { return progress; }
 },
 SINE: {
  Css: "cubic-bezier(0.470, 0.000, 0.745, 0.715)",
  Js: function(progress) { return Math.sin(progress * 1.57); }
 },
 POW: {
  Css: "cubic-bezier(0.755, 0.050, 0.855, 0.060)",
  Js: function(progress) { return Math.pow(progress, 4); }
 },
 POW_EASE_OUT: {
  Css: "cubic-bezier(0.165, 0.840, 0.440, 1.000)",
  Js: function(progress) { return 1 - AnimationConstants.Transitions.POW.Js(1 - progress); }
 },
 RIPPLE: {
  Css: "cubic-bezier(0.47, 0.06, 0.23, 0.99)",
  Js: function(progress) {
   return Math.pow((progress), 3) * 0.47 + 3 * progress * Math.pow((1 - progress), 2) * 0.06 + 3 * Math.pow(progress, 2) *
    (1 - progress) * 0.23 + 0.99 * Math.pow(progress, 3);
  }
 }
};
var JsAnimationTransition = ASPx.CreateClass(AnimationTransitionBase, {
 constructor: function(element, options) {
  this.constructor.prototype.constructor.call(this, element, options);
  this.onStep = options.onStep;
  this.fps = 60;
  this.startTime = null;
 },
 Start: function(from, to) {
  if(from == to) {
   this.from = this.to = from;
   setTimeout(this.complete.aspxBind(this), 0);
  }
  else {
   AnimationTransitionBase.prototype.Start.call(this, from, to);
   if(to == undefined)
    this.from = this.GetValue();
   this.initTimer();
  }
 },
 Cancel: function() {
  AnimationTransitionBase.prototype.Cancel.call(this);
  if(this.timerId)
   clearInterval(this.timerId);
 },
 initTimer: function() {
  this.startTime = new Date();
  this.timerId = window.setInterval(function() { this.onTick(); }.aspxBind(this), 1000 / this.fps);
 },
 onTick: function() {
  var progress = (new Date() - this.startTime) / this.duration;
  if(progress >= 1)
   this.complete();
  else {
   this.update(progress);
   if(this.onStep)
    this.onStep();
  }
 },
 update: function(progress) {
  this.SetValue(this.gatCalculatedValue(this.from, this.to, progress));
 },
 complete: function() {
  this.Cancel();
  this.update(1);
  this.performOnComplete();
 },
 gatCalculatedValue: function(from, to, progress) {
  if(progress == 1)
   return to;
  return from + (to - from) * this.getTransition()(progress);
 },
 getTransition: function() {
  return this.transition.Js;
 }
});
var SimpleAnimationTransition = ASPx.CreateClass(JsAnimationTransition, {
 constructor: function(options) {
  this.constructor.prototype.constructor.call(this, null, options);
  this.transition = options.transition || AnimationConstants.Transitions.POW_EASE_OUT;
  this.onUpdate = options.onUpdate;
  this.lastValue = 0;
 },
 SetValue: function(value) {
  this.onUpdate(value - this.lastValue);
  this.lastValue = value;
 },
 GetValue: function() {
  return this.lastValue;
 },
 performOnComplete: function() {
  if(this.onComplete)
   this.onComplete();
 }
});
var MultipleJsAnimationTransition = ASPx.CreateClass(JsAnimationTransition, {
 constructor: function(element, options) {
  this.constructor.prototype.constructor.call(this, element, options);
  this.properties = {};
 },
 Start: function(properties) {
  this.initProperties(properties);
  this.initTimer();
 },
 initProperties: function(properties) {
  this.properties = properties;
  for(var propName in this.properties)
   if(properties[propName].from == undefined)
    properties[propName].from = this.getValueInternal(this.element, propName);
 },
 update: function(progress) {
  for(var propName in this.properties) {
   if(this.properties.hasOwnProperty(propName)) {
    var property = this.properties[propName];
    if(property.from != property.to)
     this.setValueInternal(this.element, propName, property.unit, this.gatCalculatedValue(property.from, property.to, progress));
   }
  }
 }
});
var CssAnimationTransition = ASPx.CreateClass(AnimationTransitionBase, {
 constructor: function(element, options) {
  this.constructor.prototype.constructor.call(this, element, options);
  this.transitionPropertyName = AnimationUtils.CurrentTransition.property;
  this.eventName = AnimationUtils.CurrentTransition.event;
  this.forceTransitionEndByTimer = true;
  this.needForceTransitionEndByTimerFlag = options.needForceTransitionEndByTimerFlag;
 },
 Start: function(from, to) {
  this.forceTransitionEndByTimer = true;
  AnimationTransitionBase.prototype.Start.call(this, from, to);
  this.startTimerId = window.setTimeout(function() {
   if(this.from == this.to)
    this.onTransitionEnd();
   else {
    var isHidden = ASPx.GetElementOffsetHeight(this.element) == 0 && ASPx.GetElementOffsetWidth(this.element) == 0; 
    if(!isHidden)
     this.prepareElementBeforeAnimation();
    this.SetValue(this.to);
    if(isHidden)
     this.onTransitionEnd();
   }
  }.aspxBind(this), 0);
 },
 Cancel: function() {
  this.forceTransitionEndByTimer = false;
  window.clearTimeout(this.startTimerId);
  AnimationTransitionBase.prototype.Cancel.call(this);
  ASPx.Evt.DetachEventFromElement(this.element, this.eventName, CssAnimationTransition.transitionEnd);
  this.setValueInternal(this.element, this.transitionPropertyName, "", "");
  this.stopAnimation();
 },
 prepareElementBeforeAnimation: function() {
  ASPx.Evt.AttachEventToElement(this.element, this.eventName, CssAnimationTransition.transitionEnd);
  var dummy = this.element.offsetHeight;
  this.element.style[this.transitionPropertyName] = this.getTransitionCssString();
  if(this.needForceTransitionEndByTimer()) {
   setTimeout(function() {
    if(this.forceTransitionEndByTimer && this.element && this.element.aspxTransition) {
     this.element.style[this.transitionPropertyName] = "";
     this.element.aspxTransition.onTransitionEnd();
    }
   }.aspxBind(this), this.duration + 100);
  }
 },
 needForceTransitionEndByTimer: function() {
  if(this.needForceTransitionEndByTimerFlag)
   return true;
  if(ASPx.Browser.Safari && ASPx.Browser.MacOSMobilePlatform && ASPx.Browser.MajorVersion >= 8) 
   return true;
  return ASPx.Browser.AndroidMobilePlatform; 
 },
 stopAnimation: function() {
  this.SetValue(ASPx.GetCurrentStyle(this.element)[this.property]);
 },
 onTransitionEnd: function() {
  this.Cancel();
  this.performOnComplete();
 },
 getTransition: function() {
  return this.transition.Css;
 },
 getTransitionCssString: function() {
  return this.getTransitionCssStringInternal(this.getCssName(this.property));
 },
 getTransitionCssStringInternal: function(cssProperty) {
  return cssProperty + " " + this.duration + "ms " + this.getTransition();
 },
 getCssName: function(property) {
  switch(property) {
   case "marginLeft":
    return "margin-left";
   case "marginTop":
    return "margin-top";
  }
  return property;
 }
});
var MultipleCssAnimationTransition = ASPx.CreateClass(CssAnimationTransition, {
 constructor: function(element, options) {
  this.constructor.prototype.constructor.call(this, element, options);
  this.properties = null;
 },
 Start: function(properties) {
  this.properties = properties;
  this.forEachProperties(function(property, propName) {
   if(property.from !== undefined)
    this.setValueInternal(this.element, propName, property.unit, property.from);
  }.aspxBind(this));
  this.prepareElementBeforeAnimation();
  window.setTimeout(function() {
   this.forEachProperties(function(property, propName) {
    this.setValueInternal(this.element, propName, property.unit, property.to);
   }.aspxBind(this));
  }.aspxBind(this), 0);
 },
 stopAnimation: function() {
  var style = ASPx.GetCurrentStyle(this.element);
  this.forEachProperties(function(property, propName) {
   this.setValueInternal(this.element, propName, "", style[propName]);
  }.aspxBind(this));
 },
 getTransitionCssString: function() {
  var str = "";
  this.forEachProperties(function(property, propName) {
   str += this.getTransitionCssStringInternal(this.getCssName(propName)) + ",";
  }.aspxBind(this));
  str = str.substring(0, str.length - 1);
  return str;
 },
 forEachProperties: function(func) {
  for(var propName in this.properties) {
   if(this.properties.hasOwnProperty(propName)) {
    var property = this.properties[propName];
    if(property.from == undefined)
     property.from = this.getValueInternal(this.element, propName);
    if(property.from != property.to)
     func(property, propName);
   }
  }
 }
});
CssAnimationTransition.transitionEnd = function(evt) {
 var element = evt.target;
 if(element && element.aspxTransition)
  element.aspxTransition.onTransitionEnd();
};
var AnimationUtils = {
 CanUseCssTransition: function() { return ASPx.EnableCssAnimation && this.CurrentTransition; },
 CanUseCssTransform: function() { return this.CanUseCssTransition() && this.CurrentTransform; },
 CurrentTransition: (function() {
  var transitions = [
   { property: "webkitTransition", event: "webkitTransitionEnd" },
   { property: "MozTransition", event: "transitionend" },
   { property: "OTransition", event: "oTransitionEnd" },
   { property: "transition", event: "transitionend" }
  ];
  var fakeElement = document.createElement("DIV");
  for(var i = 0; i < transitions.length; i++)
   if(transitions[i].property in fakeElement.style)
    return transitions[i];
 })(),
 CurrentTransform: (function() {
  var transforms = ["transform", "MozTransform", "-webkit-transform", "msTransform", "OTransform"];
  var fakeElement = document.createElement("DIV");
  for(var i = 0; i < transforms.length; i++)
   if(transforms[i] in fakeElement.style)
    return transforms[i];
 })(),
 SetTransformValue: function(element, position, isTop) {
  if(this.CanUseCssTransform())
   element.style[this.CurrentTransform] = this.GetTransformCssText(position, isTop);
  else
   element.style[!isTop ? "left" : "top"] = position + "px";
 },
 GetTransformValue: function(element, isTop) {
  if(this.CanUseCssTransform()) {
   var cssValue = element.style[this.CurrentTransform];
   return cssValue && cssValue != "none" ? Number(cssValue.replace('matrix(1, 0, 0, 1,', '').replace(')', '').split(',')[!isTop ? 0 : 1]) : 0;
  }
  else
   return !isTop ? element.offsetLeft : element.offsetTop;
 },
 GetTransformCssText: function(position, isTop) {
  if(!position)
   return "none";
  return "matrix(1, 0, 0, 1," + (!isTop ? position : 0) + ", " + (!isTop ? 0 : position) + ")";
 },
 createMultipleAnimationTransition: function (element, options) {
  return this.CanUseCssTransition() && !options.onStep ? new MultipleCssAnimationTransition(element, options) : new MultipleJsAnimationTransition(element, options);
 },
 createSimpleAnimationTransition: function(options) {
  return new SimpleAnimationTransition(options);
 },
 createJsAnimationTransition: function(element, options) {
  return new JsAnimationTransition(element, options);
 },
 createCssAnimationTransition: function(element, options) {
  return new CssAnimationTransition(element, options);
 },
 setOpacity: function(element, value) {
  ASPx.SetElementOpacity(element, value);
 }
};
var AsyncTracker = function() {
 var currentToken,
  lockedTokens,
  onDoneDelegates,
  lockedDelegates;
 function clearState() {
  currentToken = 1;
  lockedTokens = [];
  onDoneDelegates = [];
  lockedDelegates = {};
 }
 clearState();
 var log = function(msg) { };
 function setLog(delegate){
  log = delegate;
 }
 function getLockToken() {
  if(onDoneDelegates.length === 0)
   return -1;
  var token = currentToken++;
  lockedTokens.push(token);
  lockedDelegates[token] = [];
  for (var i = 0; i < onDoneDelegates.length; i++) {
   lockedDelegates[token].push(onDoneDelegates[i]);
  }
  log("module locks token " + token);
  return token;
 }
 function releaseToken(token) {
  if(token < 0) return;
  log("module releasing token " + token);
  ASPx.Data.ArrayRemove(lockedTokens, token);
  delete lockedDelegates[token];
  invokeUnlockedDelegates();
  if(lockedTokens.length === 0)
   clearState();
  log("module released token " + token);
 }
 function invokeUnlockedDelegates() {
  var onDoneDelegate;
  for (var i = onDoneDelegates.length - 1; i >= 0; i--) {
   if(onDoneDelegates[i] && !isDelegateLocked(onDoneDelegates[i])) {
    onDoneDelegate = onDoneDelegates[i];
    delete onDoneDelegates[i];
    onDoneDelegate();
   }
  }
 }
 function isDelegateLocked(delegate) {
  for (var i = lockedTokens.length - 1; i >= 0; i--) {
   var token = lockedTokens[i];
   var delegates = lockedDelegates[token];
   if(delegates) {
    for (var j = delegates.length - 1; j >= 0; j--) {
     if(delegates[j] && delegates[j] === delegate)
      return true;
    }
   }
  }
  return false;
 }
 function track(doDelegate, onDoneDelegate) {
  if(onDoneDelegate)
   onDoneDelegates.push(onDoneDelegate);
  doDelegate();
  if(onDoneDelegate)
   invokeUnlockedDelegates();
 }
 return {
  getLockToken: getLockToken,
  releaseToken: releaseToken,
  track: track,
  setLog:setLog,
 };
};
var GetEditorValuesInContainer = function(containerOrId, processInvisibleEditors, needSerialize) {
 var container = typeof(containerOrId) === "string" ? ASPx.GetElementById(containerOrId) : containerOrId;
 var result = {};
 if(!ASPx.ProcessEditorsInContainer) 
  return result;
 ASPx.ProcessEditorsInContainer(container, function(editor){
  result[editor.name] = GetCorrectedByTypeValue(ASPx.GetEditorValueByControl(editor), needSerialize);
  return true;
 }, null, null, processInvisibleEditors, false);
 return result;
};
var SetEditorValues = function(values) {
 for(var controlName in values) {
  if(values.hasOwnProperty(controlName)) {
   var trackedControl = ASPxClientControl.GetControlCollection().Get(controlName);
   if(!trackedControl)
    continue;
   var setValueMethod = trackedControl.SetTokenCollection || trackedControl.SelectValues || trackedControl.SetValue;
   if(setValueMethod === trackedControl.SelectValues)
    trackedControl.UnselectAll();
   setValueMethod.call(trackedControl, values[controlName]);
  }
 }
};
var GetCorrectedByTypeValue = function(value, needSerialize){
 if(ASPx.Ident.IsArray(value))
  for(var i = 0; i < value.length; i++)
   value[i] = GetCorrectedByTypeValue(value[i]);
 if(needSerialize && ASPx.Ident.IsDate(value))
  return ASPx.DateUtils.GetInvariantDateTimeString(value);
 return value;
};
var ListBoxTemporaryCache = ASPx.CreateClass(null, {
 constructor: function() { 
  this.cache = { };
  this.invalidateTimerID = -1;
 },
 Get: function(key, getObjectFunc, context, args) {
  if(this.invalidateTimerID < 0) {
   this.invalidateTimerID = window.setTimeout(function() {
    this.Invalidate();
   }.aspxBind(this), 0);
  }
  if(!ASPx.IsExists(this.cache[key])) {
   if(!ASPx.IsExists(args))
    args = [ ];
   this.cache[key] = getObjectFunc.apply(context, args);
  }
  return this.cache[key];
 },
 Invalidate: function() {
  this.cache = { };
  this.invalidateTimerID = ASPx.Timer.ClearTimer(this.invalidateTimerID);
 }
});
ASPx.GetEditorValueByControl = function(control, needSerialize) {
 var result;
 if(ASPx.IsMultipleValueOwner(control))
  result = control.GetSelectedValues();
 if(ASPx.IsTokenBox(control)) {
  if(needSerialize)
   result = control.GetTokenValuesCollection();
  else
   result = control.GetTokenCollection();
 }
 if(ASPx.IsDropDownEdit(control))
  result = control.GetKeyValue();
 if(ASPx.IsHtmlEditor(control))
  result = control.GetHtml();
 return result || control.GetValue();
};
ASPx.IsMultipleValueOwner = function(control) {
 return ASPx.IsListBox(control) || ASPx.IsCheckBoxList(control);
};
ASPx.IsCheckBoxList = function(control) {
 return control && typeof(ASPxClientCheckBoxList) != "undefined" && control instanceof ASPxClientCheckBoxList;
};
ASPx.IsListBox = function(control) {
 return control && typeof(ASPxClientListBox) != "undefined" && control instanceof ASPxClientListBox;
};
ASPx.IsComboBox = function(control) {
 return control && typeof(ASPxClientComboBox) != "undefined" && control instanceof ASPxClientComboBox;
};
ASPx.IsTokenBox = function(control) {
 return control && typeof(ASPxClientTokenBox) != "undefined" && control instanceof ASPxClientTokenBox;
};
ASPx.IsDropDownEdit = function(control) {
 return control && typeof (ASPxClientDropDownEdit) != "undefined" && control instanceof ASPxClientDropDownEdit;
};
ASPx.IsGridLookup = function(control) {
 return control && typeof(MVCxClientGridLookup) != "undefined" && control instanceof MVCxClientGridLookup;
};
ASPx.IsSpinEdit = function(control) {
 return control && typeof(ASPxClientSpinEdit) != "undefined" && control instanceof ASPxClientSpinEdit;
};
ASPx.IsHtmlEditor = function(control) {
 return control && typeof (ASPxClientHtmlEditor) != "undefined" && control instanceof ASPxClientHtmlEditor;
};
ASPx.DatePickerType = {
 Days: 0,
 Months: 1,
 Years: 2,
 Decades: 3
};
ASPx.FullScreenUtils = {
 subscribeChange: function(handler) {
  Evt.AttachEventToElement(document, "fullscreenchange", handler);
  Evt.AttachEventToElement(document, "msfullscreenchange", handler); 
  Evt.AttachEventToElement(document, "MSFullscreenChange", handler); 
  Evt.AttachEventToElement(document, "webkitfullscreenchange", handler);
  Evt.AttachEventToElement(document, "mozfullscreenchange", handler);
 },
 unsubscribeChange: function(handler) {
  Evt.DetachEventFromElement(document, "fullscreenchange", handler);
  Evt.DetachEventFromElement(document, "msfullscreenchange", handler);
  Evt.DetachEventFromElement(document, "MSFullscreenChange", handler);
  Evt.DetachEventFromElement(document, "webkitfullscreenchange", handler);
  Evt.DetachEventFromElement(document, "mozfullscreenchange", handler);
 },
 setFullscreen: function(on) {
  var element = window.self.document.body;
  if(on) {
   if(element.requestFullscreen) {
    element.requestFullscreen();
   } else if(element.mozRequestFullScreen) {
    element.mozRequestFullScreen();
   } else if(element.webkitRequestFullscreen) {
    element.webkitRequestFullscreen();
   } else if(element.msRequestFullscreen) {
    element.msRequestFullscreen();
   }
  } else {
   if(document.exitFullscreen) {
    document.exitFullscreen();
   } else if(document.mozCancelFullScreen) {
    document.mozCancelFullScreen();
   } else if(document.webkitCancelFullScreen) {
    document.webkitCancelFullScreen();
   } else if(document.msExitFullscreen) {
    document.msExitFullscreen();
   }
  }
 },
 inFullscreen: function() {
  var fullscreenElement = document.fullscreenElement || document.msFullscreenElement || document.webkitFullscreenElement;
  var isInFullscreen = fullscreenElement === document.body || document.webkitIsFullScreen;
  return !!isInFullscreen;
 }
 };
ASPx.InitializeSVGSprite = function () {
 if (ASPx.SVGSprites && ASPx.SVGSprites.length > 0) {
  var svgContainer = document.getElementById('svgContainer');
  var hasSvgContainer = !!svgContainer;
  if (!hasSvgContainer) {
   svgContainer = document.createElement('div');
   svgContainer.id = 'svgContainer';
   svgContainer.style.display = "none";
   document.body.appendChild(svgContainer);
  }
  for (var i = 0; i < ASPx.SVGSprites.length; i++) {
   svgContainer.innerHTML += ASPx.SVGSprites[i];
  }
  ASPx.SVGSprites = null;
 }
};
var GridDynamicStyleSheetHelper = ASPx.CreateClass(null, {
 constructor: function() {
  this.styleSheet = {};
  this.rules = {};
  this.updateLock = 0;
 },
 Update: function(control, styleName, rules) {
  var key = control.name + "_" + styleName;
  this.BeginUpdate(key);
  this.ChangeRules(key, rules);
  this.EndUpdate(key);
 },
 ChangeRules: function(key, rules) {
  if(key && rules)
   this.rules[key] = rules;
 },
 BeginUpdate: function(key) {
  this.updateLock++;
  this.RemoveStyleSheetElement(key);
 },
 EndUpdate: function(key) {
  this.updateLock--;
  if(this.updateLock !== 0)
   return;
  var styleArgs = [];
  var controlRules = this.rules[key];
  for(var i = 0; i < controlRules.length; i++) {
   var rule = controlRules[i];
   styleArgs.push(rule.selector + " { " + rule.cssText + " } ");
  }
  this.styleSheet[key] = this.CreateStyleSheet(key, styleArgs.join(""));
 },
 CreateStyleSheet: function(key, cssText) {
  var container = document.createElement("DIV");
  ASPx.Security.setInnerHtml(container, "<style type='text/css' id='" + key + "'>" + cssText + "</style>", ASPx.Security.DataType.Trusted);
  styleSheet = ASPx.GetNodeByTagName(container, "style", 0);
  if(styleSheet)
   ASPx.GetNodeByTagName(document, "HEAD", 0).appendChild(styleSheet);
  return styleSheet;
 },
 ClearStyleSheet: function(control, styleName) {
  var key = control.name + "_" + styleName;
  this.RemoveStyleSheetElement(key);
 },
 RemoveStyleSheetElement: function(key) {
  if(this.styleSheet[key]) {
   ASPx.RemoveElement(this.styleSheet[key]);
   delete this.styleSheet[key];
  }
 }
});
GridDynamicStyleSheetHelper.Instance = new GridDynamicStyleSheetHelper();
ASPx.GridDynamicStyleSheetHelper = GridDynamicStyleSheetHelper;
ASPxClientUtils = {};
ASPxClientUtils.agent = Browser.UserAgent;
ASPxClientUtils.opera = Browser.Opera;
ASPxClientUtils.opera9 = Browser.Opera && Browser.MajorVersion == 9;
ASPxClientUtils.safari = Browser.Safari;
ASPxClientUtils.safari3 = Browser.Safari && Browser.MajorVersion == 3;
ASPxClientUtils.safariMacOS = Browser.Safari && Browser.MacOSPlatform;
ASPxClientUtils.chrome = Browser.Chrome;
ASPxClientUtils.ie = Browser.IE;
ASPxClientUtils.ie7 = Browser.IE && Browser.MajorVersion == 7;
ASPxClientUtils.firefox = Browser.Firefox;
ASPxClientUtils.firefox3 = Browser.Firefox && Browser.MajorVersion == 3;
ASPxClientUtils.mozilla = Browser.Mozilla;
ASPxClientUtils.netscape = Browser.Netscape;
ASPxClientUtils.browserVersion = Browser.Version;
ASPxClientUtils.browserMajorVersion = Browser.MajorVersion;
ASPxClientUtils.macOSPlatform = Browser.MacOSPlatform;
ASPxClientUtils.windowsPlatform = Browser.WindowsPlatform;
ASPxClientUtils.webKitFamily = Browser.WebKitFamily;
ASPxClientUtils.netscapeFamily = Browser.NetscapeFamily;
ASPxClientUtils.touchUI = Browser.TouchUI;
ASPxClientUtils.webKitTouchUI = Browser.WebKitTouchUI;
ASPxClientUtils.msTouchUI = Browser.MSTouchUI;
ASPxClientUtils.iOSPlatform = Browser.MacOSMobilePlatform;
ASPxClientUtils.androidPlatform = Browser.AndroidMobilePlatform;
ASPxClientUtils.ArrayInsert = Data.ArrayInsert;
ASPxClientUtils.ArrayRemove = Data.ArrayRemove;
ASPxClientUtils.ArrayRemoveAt = Data.ArrayRemoveAt;
ASPxClientUtils.ArrayClear = Data.ArrayClear;
ASPxClientUtils.ArrayIndexOf = Data.ArrayIndexOf;
ASPxClientUtils.AttachEventToElement = Evt.AttachEventToElement;
ASPxClientUtils.DetachEventFromElement = Evt.DetachEventFromElement;
ASPxClientUtils.GetEventSource = Evt.GetEventSource;
ASPxClientUtils.GetEventX = Evt.GetEventX;
ASPxClientUtils.GetEventY = Evt.GetEventY;
ASPxClientUtils.GetKeyCode = Evt.GetKeyCode;
ASPxClientUtils.PreventEvent = Evt.PreventEvent;
ASPxClientUtils.PreventEventAndBubble = Evt.PreventEventAndBubble;
ASPxClientUtils.PreventDragStart = Evt.PreventDragStart;
ASPxClientUtils.ClearSelection = Selection.Clear;
ASPxClientUtils.IsExists = ASPx.IsExists;
ASPxClientUtils.IsFunction = ASPx.IsFunction;
ASPxClientUtils.GetAbsoluteX = ASPx.GetAbsoluteX;
ASPxClientUtils.GetAbsoluteY = ASPx.GetAbsoluteY;
ASPxClientUtils.SetAbsoluteX = ASPx.SetAbsoluteX;
ASPxClientUtils.SetAbsoluteY = ASPx.SetAbsoluteY;
ASPxClientUtils.GetDocumentScrollTop = ASPx.GetDocumentScrollTop;
ASPxClientUtils.GetDocumentScrollLeft = ASPx.GetDocumentScrollLeft;
ASPxClientUtils.GetDocumentClientWidth = ASPx.GetDocumentClientWidth;
ASPxClientUtils.GetDocumentClientHeight = ASPx.GetDocumentClientHeight;
ASPxClientUtils.AddClassNameToElement = ASPx.AddClassNameToElement;
ASPxClientUtils.RemoveClassNameFromElement = ASPx.RemoveClassNameFromElement;
ASPxClientUtils.ToggleClassName = ASPx.ToggleClassNameToElement;
ASPxClientUtils.GetIsParent = ASPx.GetIsParent;
ASPxClientUtils.GetParentById = ASPx.GetParentById;
ASPxClientUtils.GetParentByTagName = ASPx.GetParentByTagName;
ASPxClientUtils.GetParentByClassName = ASPx.GetParentByPartialClassName;
ASPxClientUtils.GetChildById = ASPx.GetChildById;
ASPxClientUtils.GetChildByTagName = ASPx.GetChildByTagName;
ASPxClientUtils.SetCookie = Cookie.SetCookie;
ASPxClientUtils.GetCookie = Cookie.GetCookie;
ASPxClientUtils.DeleteCookie = Cookie.DelCookie;
ASPxClientUtils.GetShortcutCode = ASPx.GetShortcutCode; 
ASPxClientUtils.GetShortcutCodeByEvent = ASPx.GetShortcutCodeByEvent;
ASPxClientUtils.StringToShortcutCode = ASPx.ParseShortcutString;
ASPxClientUtils.Trim = Str.Trim; 
ASPxClientUtils.TrimStart = Str.TrimStart;
ASPxClientUtils.TrimEnd = Str.TrimEnd;
ASPxClientUtils.GetEditorValuesInContainer = GetEditorValuesInContainer;
ASPxClientUtils.SetEditorValues = SetEditorValues;
ASPxClientUtils.SendMessageToAssistiveTechnology = ASPx.AccessibilityUtils.SendMessageToAssistiveTechnology;
window.ASPxClientUtils = ASPxClientUtils;
window.ListBoxTemporaryCache = ListBoxTemporaryCache;
ASPx.AnimationUtils = AnimationUtils;
ASPx.AnimationTransitionBase = AnimationTransitionBase;
ASPx.AnimationConstants = AnimationConstants;
ASPx.AsyncTracker = AsyncTracker;
ASPx.Security = Security;
})(ASPx, dx);

(function () {
 var ASPx = window.ASPx || {};
 ASPx.ASPxImageLoad = {};
 ASPx.ASPxImageLoad.dxDefaultLoadingImageCssClass = "dxe-loadingImage";
 ASPx.ASPxImageLoad.dxDefaultLoadingImageCssClassRegexp = new RegExp("dx\\w+-loadingImage");
 ASPx.ASPxImageLoad.OnLoad = function (image, customLoadingImage, isOldIE, customBackgroundImageUrl) {
  image.dxCustomBackgroundImageUrl = "";
  image.dxShowLoadingImage = true;
  image.dxCustomLoadingImage = customLoadingImage;
  if (customBackgroundImageUrl != "")
   image.dxCustomBackgroundImageUrl = "url('" + customBackgroundImageUrl + "')";
  ASPx.ASPxImageLoad.prepareImageBackground(image, isOldIE);
  ASPx.ASPxImageLoad.removeHandlers(image);
  image.className = image.className.replace(ASPx.ASPxImageLoad.dxDefaultLoadingImageCssClassRegexp, "");
 };
 ASPx.ASPxImageLoad.removeASPxImageBackground = function (image, isOldIE) {
  if (isOldIE) 
   image.style.removeAttribute("background-image");
  else 
   image.style.backgroundImage = "";
 };
 ASPx.ASPxImageLoad.prepareImageBackground = function (image, isOldIE) {
  ASPx.ASPxImageLoad.removeASPxImageBackground(image, isOldIE);
  if (image.dxCustomBackgroundImageUrl != "")
   image.style.backgroundImage = image.dxCustomBackgroundImageUrl;
 };
 ASPx.ASPxImageLoad.removeHandlers = function (image) {
  image.removeAttribute("onload");
  image.removeAttribute("onabort");
  image.removeAttribute("onerror");
 };
 window.ASPx = ASPx;
})();
(function module(ASPx, options) {
ASPx.modules.Classes = module;
ASPx.classesScriptParsed = false;
ASPx.documentLoaded = false; 
ASPx.CallbackType = {
 Data: "d",
 Common: "c"
};
ASPx.callbackState = {
 aborted: "aborted",
 inTurn: "inTurn",
 sent: "sent"
};
var ASPxClientEvent = ASPx.CreateClass(null, {
 constructor: function() {
  this.handlerInfoList = [];
  this.firingIndex = -1;
 },
 AddHandler: function(handler, executionContext) {
  if(typeof(executionContext) == "undefined")
   executionContext = null;
  this.RemoveHandler(handler, executionContext);
  var handlerInfo = ASPxClientEvent.CreateHandlerInfo(handler, executionContext);
  this.handlerInfoList.push(handlerInfo);
 },
 RemoveHandler: function(handler, executionContext) {
  this.removeHandlerByCondition(function(handlerInfo) {
   return handlerInfo.handler == handler && 
    (!executionContext || handlerInfo.executionContext == executionContext);
  });
 },
 removeHandlerByCondition: function(predicate) {
   for(var i = this.handlerInfoList.length - 1; i >= 0; i--) {
   var handlerInfo = this.handlerInfoList[i];
   if(predicate(handlerInfo)) {
    ASPx.Data.ArrayRemoveAt(this.handlerInfoList, i);
    if(i <= this.firingIndex)
     this.firingIndex--;
   }
  }
 },
 removeHandlerByControlName: function(controlName) {
  this.removeHandlerByCondition(function(handlerInfo) {
   return handlerInfo.executionContext &&  
    handlerInfo.executionContext.name === controlName;
  });
 },
 ClearHandlers: function() {
  this.handlerInfoList.length = 0;
 },
 FireEvent: function(obj, args) {
  for(this.firingIndex = 0; this.firingIndex < this.handlerInfoList.length; this.firingIndex++) {
   var handlerInfo = this.handlerInfoList[this.firingIndex];
   handlerInfo.handler.call(handlerInfo.executionContext, obj, args);
  }
 },
 InsertFirstHandler: function(handler, executionContext){
  if(typeof(executionContext) == "undefined")
   executionContext = null;
  var handlerInfo = ASPxClientEvent.CreateHandlerInfo(handler, executionContext);
  ASPx.Data.ArrayInsert(this.handlerInfoList, handlerInfo, 0);
 },
 IsEmpty: function() {
  return this.handlerInfoList.length == 0;
 }
});
ASPxClientEvent.CreateHandlerInfo = function(handler, executionContext) {
 return {
  handler: handler,
  executionContext: executionContext
 };
};
var ASPxClientEventArgs = ASPx.CreateClass(null, {
 constructor: function() {
 }
});
ASPxClientEventArgs.Empty = new ASPxClientEventArgs();
var ASPxClientCancelEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(){
  this.constructor.prototype.constructor.call(this);
  this.cancel = false;
 }
});
var ASPxClientProcessingModeEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(processOnServer){
  this.constructor.prototype.constructor.call(this);
  this.processOnServer = !!processOnServer;
 }
});
var ASPxClientProcessingModeCancelEventArgs = ASPx.CreateClass(ASPxClientProcessingModeEventArgs, {
 constructor: function(processOnServer){
  this.constructor.prototype.constructor.call(this, processOnServer);
  this.cancel = false;
 }
});
var OrderedMap = ASPx.CreateClass(null, {
 constructor: function(){
  this.entries = {};
  this.firstEntry = null;
  this.lastEntry = null;
 },
 add: function(key, element) {
  var entry = this.addEntry(key, element);
  this.entries[key] = entry;
 },
 remove: function(key) {
  var entry = this.entries[key];
  if(entry === undefined)
   return;
  this.removeEntry(entry);
  delete this.entries[key];
 },
 clear: function() {
  this.markAllEntriesAsRemoved();
  this.entries = {};
  this.firstEntry = null;
  this.lastEntry = null;
 },
 get: function(key) {
  var entry = this.entries[key];
  return entry ? entry.value : undefined;
 },
 forEachEntry: function(processFunc, context) {
  context = context || this;
  for(var entry = this.firstEntry; entry; entry = entry.next) {
   if(entry.removed)
    continue;
   if(processFunc.call(context, entry.key, entry.value))
    return;
  }
 },
 addEntry: function(key, element) {
  var entry = { key: key, value: element, next: null, prev: null };
  if(!this.firstEntry)
   this.firstEntry = entry;
  else {
   entry.prev = this.lastEntry;
   this.lastEntry.next = entry;
  }
  this.lastEntry = entry;
  return entry;
 },
 removeEntry: function(entry) {
  if(this.firstEntry == entry)
   this.firstEntry = entry.next;
  if(this.lastEntry == entry)
   this.lastEntry = entry.prev;
  if(entry.prev)
   entry.prev.next = entry.next;
  if(entry.next)
   entry.next.prev = entry.prev;
  entry.removed = true;
 },
 markAllEntriesAsRemoved: function() {
  for(var entry = this.firstEntry; entry; entry = entry.next)
   entry.removed = true;
 }
});
var CollectionBase = ASPx.CreateClass(null, {
 constructor: function(){
  this.elementsMap = new OrderedMap();
  this.isASPxClientCollection = true;
 },
 Add: function(key, element) {
  this.elementsMap.add(key, element);
 },
 Remove: function(key) {
  this.elementsMap.remove(key);
 },
 Clear: function(){
  this.elementsMap.clear();
 },
 Get: function(key){
  return this.elementsMap.get(key);
 }
});
(function garbageCollector(ASPx, options) {
 ASPx.modules.garbageCollector = garbageCollector;
 var interval = options.GCCheckInterval;
 window.setInterval(collectObjects, interval);
 function canCollectObjects() {
  if (!ASPx.GetControlCollection) return false;
  var collection = ASPx.GetControlCollection();
  return collection && !collection.InCallback();
 }
 function collectObjects() {
  if (!canCollectObjects()) return;
  ASPx.GetControlCollectionCollection().RemoveDisposedControls();
  if(typeof(ASPx.GetStateController) != "undefined")
   ASPx.GetStateController().RemoveDisposedItems();
  if(ASPx.TableScrollHelperCollection)
   ASPx.TableScrollHelperCollection.RemoveDisposedObjects();
  if(ASPx.Ident.scripts.ASPxClientRatingControl)
   ASPxClientRatingControl.RemoveDisposedElementUnderCursor();
  var postHandler = ASPx.GetPostHandler();
  if(postHandler)
   postHandler.RemoveDisposedFormsFromCache();
 }
})(ASPx, options);
var ControlTree = ASPx.CreateClass(null, {
 constructor: function(controlCollection, container, controlFilter) {
  this.container = container;
  this.domMap = { };
  this.rootNode = this.createNode(null, null);
  this.createControlTree(controlCollection, container, controlFilter);
 },
 createControlTree: function(controlCollection, container, controlFilter) {
  controlCollection.ProcessControlsInContainer(container, function(control) {
   control.RegisterInControlTree(this);
  }.aspxBind(this), controlFilter);
  var fixedNodes = [];
  var fixedNodesChildren = [];
  for(var domElementID in this.domMap) {
   if(!this.domMap.hasOwnProperty(domElementID)) continue;
   var node = this.domMap[domElementID];
   var controlOwner = node.control ? node.control.controlOwner : null;
   if(controlOwner && this.domMap[controlOwner.name])
    continue;
   if(this.isFixedNode(node))
    fixedNodes.push(node);
   else {
    var parentNode = this.findParentNode(domElementID);
    parentNode = parentNode || this.rootNode;
    if(this.isFixedNode(parentNode))
     fixedNodesChildren.push(node);
    else {
     var childNode = node.mainNode || node;
     this.addChildNode(parentNode, childNode);
    }
   }
  }
  for(var i = fixedNodes.length - 1; i >= 0; i--)
   this.insertChildNode(this.rootNode, fixedNodes[i], 0);
  for(var i = fixedNodesChildren.length - 1; i >= 0; i--)
   this.insertChildNode(this.rootNode, fixedNodesChildren[i], 0);
 },
 findParentNode: function(id) {
  var element = document.getElementById(id).parentNode;
  while(element && element.tagName !== "BODY") {
   if(element.id) {
    var parentNode = this.domMap[element.id];
    if(parentNode)
     return parentNode;
   }
   element = element.parentNode;
  }
  return null;
 },
 addChildNode: function(node, childNode) {
  if(!childNode.parentNode) {
   node.children.push(childNode);
   childNode.parentNode = node;
  }
 },
 insertChildNode: function(node, childNode, index) {
  if(!childNode.parentNode) {
   ASPx.Data.ArrayInsert(node.children, childNode, index);
   childNode.parentNode = node;
  }
 },
 addRelatedNode: function(node, relatedNode) {
  this.addChildNode(node, relatedNode);
  relatedNode.mainNode = node;
 },
 isFixedNode: function(node) {
  var control = node.mainNode ? node.mainNode.control : node.control;
  return control && control.HasFixedPosition();
 },
 createNode: function(domElementID, control) {
  var node = {
   control: control,
   children: [],
   parentNode: null,
   mainNode: null
  };
  if(domElementID)
   this.domMap[domElementID] = node;
  return node;
 }
});
var ControlAdjuster = ASPx.CreateClass(null, {
 constructor: function() {
 },
 adjustControlsInHierarchy: function(controlCollection, adjustFunc, container, collapseControls, controlFilter) {
  var controlTree = new ASPx.ControlTree(controlCollection, container, controlFilter);
  this.adjustControlsInTree(controlTree.rootNode, adjustFunc, container, collapseControls);
 },
 adjustControlsInTree: function(treeNode, adjustFunc, container, collapseControls) {
  var observer = _aspxGetDomObserver();
  observer.pause(container, true);
  var documentScrollInfo;
  if(collapseControls) {
   documentScrollInfo = ASPx.GetOuterScrollPosition(document.body);
   this.collapseControls(treeNode);
  }
  var adjustNodes = [], 
   autoHeightNodes = [];
  var requireReAdjust = this.forEachControlCore(treeNode, collapseControls, adjustFunc, adjustNodes, autoHeightNodes);
  if(requireReAdjust)
   this.forEachControlsBackward(adjustNodes, collapseControls, adjustFunc);
  else {
   for(var i = 0, node; node = autoHeightNodes[i]; i++)
    node.control.AdjustAutoHeight();
  }
  if(collapseControls)
   ASPx.RestoreOuterScrollPosition(documentScrollInfo);
  observer.resume(container, true);
 },
 forEachControlCore: function(node, collapseControls, processFunc, adjustNodes, autoHeightNodes) {
  var requireReAdjust = false,
   size, newSize;
  if(node.control) {
   var checkReadjustment = collapseControls && node.control.IsControlCollapsed() && node.control.CanCauseReadjustment();
   if(checkReadjustment)
    size = node.control.GetControlPercentMarkerSize(false, true);
   if(node.control.IsControlCollapsed() && !node.control.IsExpandableByAdjustment())
    node.control.ExpandControl();
   node.control.isInsideHierarchyAdjustment = true;
   processFunc(node.control);
   node.control.isInsideHierarchyAdjustment = false;
   if(checkReadjustment) {
    newSize = node.control.GetControlPercentMarkerSize(false, true);
    requireReAdjust = size.width !== newSize.width;
   }
   if(node.control.sizingConfig.supportAutoHeight)
    autoHeightNodes.push(node);
   node.control.ResetControlPercentMarkerSize();
  }
  for(var childNode, i = 0; childNode = node.children[i]; i++)
   requireReAdjust = this.forEachControlCore(childNode, collapseControls, processFunc, adjustNodes, autoHeightNodes) || requireReAdjust;
  adjustNodes.push(node);
  return requireReAdjust;
 },
 forEachControlsBackward: function(adjustNodes, collapseControls, processFunc) {
  for(var i = 0, node; node = adjustNodes[i]; i++)
   this.forEachControlsBackwardCore(node, collapseControls, processFunc);
 },
 forEachControlsBackwardCore: function(node, collapseControls, processFunc) {
  if(node.control)
   processFunc(node.control);
  if(node.children.length > 1) {
   for(var i = 0, childNode; childNode = node.children[i]; i++) {
    if(childNode.control)
     processFunc(childNode.control);
   }
  }
 },
 collapseControls: function(node) {
  for(var childNode, i = 0; childNode = node.children[i]; i++)
   this.collapseControls(childNode);
  if(node.control && node.control.NeedCollapseControl())
   node.control.CollapseControl();
 }
});
var controlAdjuster = null;
function GetControlAdjuster() {
 if(!controlAdjuster)
  controlAdjuster = new ControlAdjuster();
 return controlAdjuster;
}
function _aspxFunctionIsInCallstack(currentCallee, targetFunction, depthLimit) {
 var candidate = currentCallee;
 var depth = 0;
 while(candidate && depth <= depthLimit) {
  candidate = candidate.caller;
  if(candidate == targetFunction)
   return true;
  depth++;
 }
 return false;
}
ASPx.attachToReady(aspxClassesWindowOnLoad);
function aspxClassesWindowOnLoad(){
 ASPx.documentLoaded = true;
 _aspxMoveLinkElements();
 _aspxSweepDuplicatedLinks();
 ResourceManager.SynchronizeResources();
 var externalScriptProcessor = GetExternalScriptProcessor();
 if(externalScriptProcessor)
  externalScriptProcessor.ShowErrorMessages();
 ASPx.AccessibilityUtils.initialize();
 ASPx.GetControlCollection().Initialize();
 _aspxInitializeScripts();
 _aspxInitializeLinks();
 _aspxInitializeFocus();
 ASPx.GetControlCollection().FinalizeInitialization();
}
Ident = { };
Ident.IsDate = function(obj) {
 return obj && obj.constructor == Date;
};
Ident.IsRegExp = function(obj) {
 return obj && obj.constructor === RegExp;
};
Ident.IsArray = function(obj) {
 return obj && obj.constructor == Array;
};
Ident.IsASPxClientCollection = function(obj) {
 return obj && obj.isASPxClientCollection;
};
Ident.IsASPxClientControl = function(obj) {
 return obj && obj instanceof ASPxClientControlBase;
};
Ident.IsASPxClientEdit = function(obj) {
 return obj && obj.isASPxClientEdit;
};
Ident.IsFocusableElementRegardlessTabIndex = function (element) {
 var tagName = element.tagName;
 return tagName == "TEXTAREA" || tagName == "INPUT" || tagName == "A" ||
  tagName == "SELECT" || tagName == "IFRAME" || tagName == "OBJECT" || tagName == "BUTTON";
};
Ident.isDialogInvisibleControl = function(control) {
 return !!ASPx.Dialog && ASPx.Dialog.isDialogInvisibleControl(control);
};
Ident.isBatchEditUnusedEditor = function(control) {
 return !!ASPx.BatchEditHelper && ASPx.BatchEditHelper.isBatchEditUnusedEditor(control);
};
Ident.scripts = {};
if(ASPx.IsFunction(window.WebForm_InitCallbackAddField)) {
 (function() {
  var original = window.WebForm_InitCallbackAddField;
  window.WebForm_InitCallbackAddField = function(name, value) {
   if(typeof(name) == "string" && name)
    original.apply(null, arguments);
  };
 })();
}
ASPx.FireDefaultButton = function(evt, buttonID) {
 if(_aspxIsDefaultButtonEvent(evt, buttonID)) {
  var defaultButton = ASPx.GetElementById(buttonID);
  if(defaultButton && defaultButton.click) {
   if(ASPx.IsFocusable(defaultButton))
    defaultButton.focus();
   ASPx.Evt.DoElementClick(defaultButton);
   ASPx.Evt.PreventEventAndBubble(evt);
   return false;
  }
 }
 return true;
};
function _aspxIsDefaultButtonEvent(evt, defaultButtonID) {
 if(evt.keyCode != ASPx.Key.Enter)
  return false;
 var srcElement = ASPx.Evt.GetEventSource(evt);
 if(!srcElement || srcElement.id === defaultButtonID)
  return true;
 var tagName = srcElement.tagName;
 var type = srcElement.type;
 return tagName != "TEXTAREA" && tagName != "BUTTON" && tagName != "A" &&
  (tagName != "INPUT" || type != "checkbox" && type != "radio" && type != "button" && type != "submit" && type != "reset");
}
var PostHandler = ASPx.CreateClass(null, {
 constructor: function() {
  this.Post = new ASPxClientEvent();
  this.PostFinalization = new ASPxClientEvent();
  this.observableForms = [];
  this.dxCallbackTriggers = {};
  this.lastSubmitElementName = null;
  this.beforeOnSubmit = function() { };
  this.ReplaceGlobalPostFunctions();
  this.HandleDxCallbackBeginning();
  this.HandleMSAjaxRequestBeginning();
 },
 Update: function() {
  this.ReplaceFormsSubmit(true);
 },
 ProcessPostRequest: function(ownerID, isCallback, isMSAjaxRequest, isDXCallback) {
  this.cancelPostProcessing = false;
  this.isMSAjaxRequest = isMSAjaxRequest;
  if(this.SkipRaiseOnPost(ownerID, isCallback, isDXCallback))
   return;
  var args = new PostHandlerOnPostEventArgs(ownerID, isCallback, isMSAjaxRequest, isDXCallback);
  this.Post.FireEvent(this, args);
  this.cancelPostProcessing = args.cancel;
  if(!args.cancel)
   this.PostFinalization.FireEvent(this, args);
 },
 SkipRaiseOnPost: function(ownerID, isCallback, isDXCallback) { 
  if(!isCallback)
   return false;
  var dxOwner = isDXCallback && ASPx.GetControlCollection().GetByName(ownerID);
  if(dxOwner) {
   this.dxCallbackTriggers[dxOwner.uniqueID] = true;
   return false;
  }
  if(this.dxCallbackTriggers[ownerID]) {
   this.dxCallbackTriggers[ownerID] = false;
   return true;
  }
  return false;
 },
 ReplaceGlobalPostFunctions: function() {
  if(ASPx.IsFunction(window.__doPostBack))
   this.ReplaceDoPostBack();
  if(ASPx.IsFunction(window.WebForm_DoCallback))
   this.ReplaceDoCallback();
  if(ASPx.IsFunction(window.WebForm_ExecuteCallback))
   this.ReplaceExecuteCallback();
  this.ReplaceFormsSubmit();
 },
 HandleDxCallbackBeginning: function() {
  ASPx.GetControlCollection().BeforeInitCallback.AddHandler(function(s, e) {
   aspxRaisePostHandlerOnPost(e.callbackOwnerID, true, false, true); 
  });
 },
 HandleMSAjaxRequestBeginning: function() {
  var pageRequestManager = ASPx.GetMSAjaxRequestManager();
  if(pageRequestManager != null && Ident.IsArray(pageRequestManager._onSubmitStatements)) {
   pageRequestManager._onSubmitStatements.unshift(function() {
    var postbackSettings = Sys.WebForms.PageRequestManager.getInstance()._postBackSettings;
    var postHandler = aspxGetPostHandler();
    aspxRaisePostHandlerOnPost(postbackSettings.asyncTarget, true, true);
    return !postHandler.cancelPostProcessing;
   });
  }
 },
 ReplaceDoPostBack: function() {
  var original = __doPostBack;
  __doPostBack = function(eventTarget, eventArgument) {
   var postHandler = aspxGetPostHandler();
   aspxRaisePostHandlerOnPost(eventTarget);
   if(postHandler.cancelPostProcessing)
    return;
   ASPxClientControl.postHandlingLocked = true;
   original(eventTarget, eventArgument);
   delete ASPxClientControl.postHandlingLocked;
  };
 },
 ReplaceDoCallback: function() {
  var original = WebForm_DoCallback;
  WebForm_DoCallback = function(eventTarget, eventArgument, eventCallback, context, errorCallback, useAsync) {
   var postHandler = aspxGetPostHandler();
   aspxRaisePostHandlerOnPost(eventTarget, true);
   if(postHandler.cancelPostProcessing)
    return;
   return original(eventTarget, eventArgument, eventCallback, context, errorCallback, useAsync);
  };
 },
 ReplaceExecuteCallback: function() {
  var original = WebForm_ExecuteCallback;
  var handler = this;
  WebForm_ExecuteCallback = function(callbackObject) {
   var isDxCallback = callbackObject && callbackObject.context && ASPx.GetControlCollection().Get(callbackObject.context) !== null;
   ASPx.callbackProcessed = false;
   original(callbackObject);
   if(ASPx.Browser.Firefox && document.getElementById("__EVENTVALIDATION")) {
    var viewStateField = document.getElementById("__VIEWSTATE");
    if(viewStateField) {
     var response = callbackObject.xmlRequest.responseText;
     var separatorIndex = response.indexOf("|");
     var validationFieldLength = separatorIndex > 0 ? response.substring(0, separatorIndex) : null;
     if(ASPx.IsNumber(validationFieldLength))
      viewStateField.value = viewStateField.value; 
    }
   }
   if(isDxCallback && !ASPx.callbackProcessed) {
    var request = callbackObject.xmlRequest;
    if(handler.HasAppErrorOnCallback(request) && ASPxClientUtils.IsExists(callbackObject.eventCallback))
     callbackObject.eventCallback(handler.GetServerErrorText(), callbackObject.context);
   }
  };
 },
 HasAppErrorOnCallback: function(request) {
  if(!request) return false;
  var isServerError = request.status && request.status == 500;
  var pattern = /<html[^>]*>([\w|\W]*)<\/html>/im;
  var text = request.responseText;
  return isServerError && !!text && pattern.test(text);
 },
 GetServerErrorText: function() {
  return "Internal Server Error";
 }, 
 ReplaceFormsSubmit: function(checkObservableCollection) {
  for(var i = 0; i < document.forms.length; i++) { 
   var form = document.forms[i];
   if(checkObservableCollection && ASPx.Data.ArrayIndexOf(this.observableForms, form) >= 0)
    continue;
   if(form.submit)
    this.ReplaceFormSubmit(form);
   this.ReplaceFormOnSumbit(form);
   this.observableForms.push(form);
  }
 },
 ReplaceFormSubmit: function(form) {
  var originalSubmit = form.submit;
  form.submit = function() {
   var postHandler = aspxGetPostHandler();
   aspxRaisePostHandlerOnPost();
   if(postHandler.cancelPostProcessing)
    return false;
   var callee = arguments.callee;
   this.submit = originalSubmit;
   var submitResult = this.submit();
   this.submit = callee;
   return submitResult;
  };
  form = null;
 },
 ReplaceFormOnSumbit: function(form) {
  var originalSubmit = form.onsubmit;
  form.onsubmit = function() {
   var postHandler = aspxGetPostHandler();
   postHandler.beforeOnSubmit();
   if(postHandler.isMSAjaxRequest)
    postHandler.isMsAjaxRequest = false;
   else
    aspxRaisePostHandlerOnPost(postHandler.GetLastSubmitElementName());
   if(postHandler.cancelPostProcessing)
    return false;
   return ASPx.IsFunction(originalSubmit)
    ? originalSubmit.apply(this, arguments)
    : true;
  };
  form = null;
 },
 SetBeforeOnSubmit: function(action) {
  this.beforeOnSubmit = action;
 },
 SetLastSubmitElementName: function(elementName) {
  this.lastSubmitElementName = elementName;
 },
 GetLastSubmitElementName: function() {
  return this.lastSubmitElementName;
 },
 RemoveDisposedFormsFromCache: function(){
  for(var i = 0; this.observableForms && i < this.observableForms.length; i++){
   var form = this.observableForms[i];
   if(!ASPx.IsExistsElement(form)){
    ASPx.Data.ArrayRemove(this.observableForms, form);
    i--;
   }
  }
 }
});
function aspxRaisePostHandlerOnPost(ownerID, isCallback, isMSAjaxRequest, isDXCallback) {
 if(ASPxClientControl.postHandlingLocked) return;
 var postHandler = aspxGetPostHandler();
 if(postHandler)
  postHandler.ProcessPostRequest(ownerID, isCallback, isMSAjaxRequest, isDXCallback);
}
var aspxPostHandler;
function aspxGetPostHandler() {
 if(!aspxPostHandler)
  aspxPostHandler = new PostHandler();
 return aspxPostHandler;
}
var PostHandlerOnPostEventArgs = ASPx.CreateClass(ASPxClientCancelEventArgs, {
 constructor: function(ownerID, isCallback, isMSAjaxCallback, isDXCallback){
  this.constructor.prototype.constructor.call(this);
  this.ownerID = ownerID;
  this.isCallback = !!isCallback;
  this.isDXCallback = !!isDXCallback;
  this.isMSAjaxCallback = !!isMSAjaxCallback;
 }
});
var ResourceManager = {
 HandlerStr: "DXR.axd?r=",
 ResourceHashes: {},
 SynchronizeResources: function(method){
  if(!method){
   method = function(name, resource) { 
    this.UpdateInputElements(name, resource); 
   }.aspxBind(this);
  }
  var resources = this.GetResourcesData();
  for(var name in resources)
   if(resources.hasOwnProperty(name))
    method(name, resources[name]);
 },
 GetResourcesData: function(){
  return {
   DXScript: this.GetResourcesElementsString(_aspxGetIncludeScripts(), "src", "DXScript"),
   DXCss: this.GetResourcesElementsString(_aspxGetLinks(), "href", "DXCss")
  };
 },
 ParseBundleSrc: function(elements, urlAttr){
  var timeStamp = "";
  var resourceUrlArray = [];
  for(var i = 0; i < elements.length; i++) {
   var resourceUrl = ASPx.Attr.GetAttribute(elements[i], urlAttr);
   if(resourceUrl) {
    var pos = resourceUrl.indexOf(this.HandlerStr);
    if(pos > -1){
     var list = resourceUrl.substr(pos + this.HandlerStr.length);
     var ampPos = list.lastIndexOf("-");
     if(ampPos > -1) {
      timeStamp = list.substr(ampPos);
      list = list.substr(0, ampPos);
     }
     var indexes = list.split(",");
     for(var j = 0; j < indexes.length; j++) {
      resourceUrlArray.push(indexes[j]);
     }
    }
    else
     resourceUrlArray.push(resourceUrl);
   }
  }
  return {
   'resourceUrlArray': resourceUrlArray,
   'timeStamp': timeStamp
  };
 },
 GetResourceHashes: function (id) {
  if (!this.ResourceHashes[id])
   this.ResourceHashes[id] = {};
  return this.ResourceHashes[id];
 },
 GetResourcesElementsString: function (elements, urlAttr, id) {
  var hash = this.GetResourceHashes(id);
  var resourceUrlArray = this.ParseBundleSrc(elements, urlAttr).resourceUrlArray;
  for(var i = 0; i < resourceUrlArray.length; i++) {
   hash[resourceUrlArray[i]] = resourceUrlArray[i];
  }
  var array = [];
  for(var key in hash)
   if(hash.hasOwnProperty(key))
    array.push(key);
  return array.join(",");
 },
 GetNewResourcesElementString: function (element, urlAttr, id) {
  var originalUrl = ASPx.Attr.GetAttribute(element, urlAttr);
  var handlerStrIndex = originalUrl.indexOf(this.HandlerStr);
  var dxResources = handlerStrIndex > -1;
  if(!dxResources) return element[urlAttr];
  var hash = this.GetResourceHashes(id);
  var srcInfo = this.ParseBundleSrc([element], urlAttr);
  var resourceUrlArray = srcInfo.resourceUrlArray;
  var timeStamp = srcInfo.timeStamp;
  var newResourceArray = [];
  for(var i = 0; i < resourceUrlArray.length; i++) {
    if(!hash[resourceUrlArray[i]])
    newResourceArray.push(resourceUrlArray[i]);
  }
  var newResources = "";
  if(newResourceArray.length > 0) {
   var baseUrl = originalUrl.substr(0, handlerStrIndex);
   newResources = baseUrl + this.HandlerStr + newResourceArray.join(",") + timeStamp;
  }
  return newResources;
 },
 UpdateInputElements: function(typeName, list){
  for(var i = 0; i < document.forms.length; i++){
   var inputElement = document.forms[i][typeName];
   if(!inputElement)
    inputElement = this.CreateInputElement(document.forms[i], typeName);
   inputElement.value = list;
  }
 },
 CreateInputElement: function(form, typeName){
  var inputElement = ASPx.CreateHiddenField(typeName);
  form.appendChild(inputElement);
  return inputElement;
 }
};
ASPx.includeScriptPrefix = "dxis_";
ASPx.startupScriptPrefix = "dxss_";
var includeScriptsCache = {};
var createdIncludeScripts = [];
var appendedScriptsCount = 0;
var callbackOwnerNames = [];
var scriptsRestartHandlers = { };
function _aspxIsKnownIncludeScript(script) {
 return !!includeScriptsCache[script.src];
}
function _aspxCacheIncludeScript(script) {
 includeScriptsCache[script.src] = 1;
}
function _aspxProcessScriptsAndLinks(ownerName, isCallback) {
 if(!ASPx.documentLoaded) return; 
 _aspxProcessScripts(ownerName, isCallback);
 getLinkProcessor().process();
 ASPx.ClearCachedCssRules();
}
function _aspxGetStartupScripts(container) {
 return _aspxGetScriptsCore(ASPx.startupScriptPrefix, container);
}
function _aspxGetIncludeScripts() {
 return _aspxGetScriptsCore(ASPx.includeScriptPrefix);
}
function _aspxGetScriptsCore(prefix, container) {
 var result = [];
 var scripts;
 if(ASPx.IsExists(container))
  scripts = ASPx.GetNodesByTagName(container, "SCRIPT");
 else
  scripts = document.getElementsByTagName("SCRIPT");
 for(var i = 0; i < scripts.length; i++) {
  if(scripts[i].id.indexOf(prefix) == 0)
   result.push(scripts[i]);
 }
 return result;
}
function _aspxIsResourceLink(link) {
 if(typeof link !== "string")
  link = link.href;
 return link.toLowerCase().indexOf(ResourceManager.HandlerStr.toLowerCase()) >= 0;
}
function _aspxGetLinks(allLinks) {
 var result = [];
 var links = document.getElementsByTagName("LINK");
 for(var i = 0; i < links.length; i++) {
  if(allLinks || _aspxIsResourceLink(links[i]))
   result.push(links[i]);
 }
 return result;
}
function _aspxIsLinksLoaded() {
 var links = _aspxGetLinks(true);
 for(var i = 0, link; link = links[i]; i++)
  if(link.readyState && link.readyState.toLowerCase() == "loading")
    return false;
 return true;
}
function _aspxInitializeLinks() {
 var links = _aspxGetLinks(true);
 for(var i = 0; i < links.length; i++)
  links[i].loaded = true; 
}
var scriptExecutedAttrName = "data-executed";
var scriptDelayedExecutionAttrName = "data-dx-delayedeval";
ASPx.MarkInnerScriptBlocksAsDelayedExecution = function(scriptsContainer) {
 var scripts = scriptsContainer.querySelectorAll("script[id^=" + ASPx.startupScriptPrefix + "]");
 for(var i = 0; i < scripts.length; i++)
  ASPx.Attr.SetAttribute(scripts[i], scriptDelayedExecutionAttrName, true);
};
function isScriptExecuted(script) {
 return ASPx.Attr.GetAttribute(script, scriptExecutedAttrName);
}
function markScriptAsExecuted(script) {
 if(ASPx.Attr.GetAttribute(script, scriptDelayedExecutionAttrName))
  ASPx.Attr.RemoveAttribute(script, scriptDelayedExecutionAttrName);
 else
  ASPx.Attr.SetAttribute(script, scriptExecutedAttrName, true);
}
function _aspxInitializeScripts() {
 var scripts = _aspxGetIncludeScripts();
 for(var i = 0; i < scripts.length; i++)
  _aspxCacheIncludeScript(scripts[i]);   
 var startupScripts = _aspxGetStartupScripts();
 for(var i = 0; i < startupScripts.length; i++)
  markScriptAsExecuted(startupScripts[i]);
}
function _aspxSweepDuplicatedLinks() {
 var hash = { };
 var links = _aspxGetLinks();
 for(var i = 0; i < links.length; i++) {
  var href = links[i].href;
  if(!href)
   continue;
  if(hash[href]){
   if(!hash[href].loaded && links[i].loaded) {
    ASPx.RemoveElement(hash[href]);
    hash[href] = links[i];
   }
   else
    ASPx.RemoveElement(links[i]);
  }
  else
   hash[href] = links[i];
 }
}
function _aspxSweepDuplicatedScripts() {
 var hash = { };
 var scripts = _aspxGetIncludeScripts();
 for(var i = 0; i < scripts.length; i++) {
  var src = scripts[i].src;
  if(!src) continue;
  if(hash[src])
   ASPx.RemoveElement(scripts[i]);
  else
   hash[src] = scripts[i];
 }
}
function _aspxAreScriptsEqual(script1, script2) {
 return script1.src == script2.src;
}
function _aspxProcessScripts(ownerName, isCallback) {
 var scripts = _aspxGetIncludeScripts();
 var previousCreatedScript = null;
 var firstCreatedScript = null;
 for(var i = 0; i < scripts.length; i++) {
  var script = scripts[i];
  if(script.src == "") continue; 
  if(_aspxIsKnownIncludeScript(script))
   continue;
  var getOnlyNewResources = true;
  var onlyNewScripts = ResourceManager.GetNewResourcesElementString(script, "src", "DXScript", getOnlyNewResources);
  if (onlyNewScripts == "")
   continue;
  var createdScript = document.createElement("script");
  ASPx.Attr.AppendScriptType(createdScript);
  createdScript.src = onlyNewScripts;
  createdScript.id = script.id;
  if(ASPx.Data.ArrayIndexOf(createdIncludeScripts, createdScript, _aspxAreScriptsEqual) >= 0)
   continue;
  createdIncludeScripts.push(createdScript);
  ASPx.RemoveElement(script);
  if(ASPx.Browser.Edge || ASPx.Browser.WebKitFamily || (ASPx.Browser.Firefox && ASPx.Browser.Version >= 4) || ASPx.Browser.IE) {
   createdScript.onload = new Function("ASPx.OnScriptLoadCallback(this, " + isCallback + ");");
   if(firstCreatedScript == null)
    firstCreatedScript = createdScript;
   createdScript.nextCreatedScript = null;
   if(previousCreatedScript != null)
    previousCreatedScript.nextCreatedScript = createdScript;
   previousCreatedScript = createdScript;
  } else {
   createdScript.onload = new Function("ASPx.OnScriptLoadCallback(this);");
   ASPx.AppendScript(createdScript);
   _aspxCacheIncludeScript(createdScript);
  }
 }
 if(firstCreatedScript != null) {
  ASPx.AppendScript(firstCreatedScript);
  _aspxCacheIncludeScript(firstCreatedScript);
 }
 if(isCallback)
  callbackOwnerNames.push(ownerName);
 if(createdIncludeScripts.length == 0) {
  var newLinks = ASPx.GetNodesByTagName(document.body, "link");
  var needProcessLinks = isCallback && newLinks.length > 0;
  if(needProcessLinks)
   needProcessLinks = getLinkProcessor().addLinks(newLinks);
  if(!needProcessLinks)
   ASPx.FinalizeScriptProcessing(isCallback);
 }
}
ASPx.FinalizeScriptProcessing = function(isCallback) {
 createdIncludeScripts = [];
 appendedScriptsCount = 0;
 var linkProcessor = getLinkProcessor();
 if(linkProcessor.hasLinks())
  _aspxSweepDuplicatedLinks();
 linkProcessor.reset();
 _aspxSweepDuplicatedScripts();
 ResourceManager.SynchronizeResources();
 _aspxRunStartupScripts(isCallback);
};
var startupScriptsRunning = false;
function _aspxRunStartupScripts(isCallback, container) {
 startupScriptsRunning = true;
 try {
  _aspxRunStartupScriptsCore(container);
 }
 finally {
  startupScriptsRunning = false;
 }
 if(ASPx.documentLoaded) {
  ASPx.GetControlCollection().ProcessActionByPredicate(
   function(collection) { collection.InitializeElements(isCallback); },
   function(control) { return !ASPx.IsExists(container) || ASPx.GetIsParent(container, control.GetMainElement()); }
  );
  for(var key in scriptsRestartHandlers)
   if(scriptsRestartHandlers.hasOwnProperty(key))
    scriptsRestartHandlers[key]();
  if(isCallback)
   _aspxRunEndCallbackScript();
 }
}
function _aspxIsStartupScriptsRunning(isCallback) {
 return startupScriptsRunning;
}
function _aspxRunStartupScriptsCore(container) {
 var scripts = _aspxGetStartupScripts(container);
 var code;
 for(var i = 0; i < scripts.length; i++){
  var script = scripts[i];
  if(!isScriptExecuted(script)) {
   _aspxEnsureStartupScriptIsUnique(script.id); 
   code = ASPx.GetScriptCode(script);
   eval(code);
   markScriptAsExecuted(script);
  }
 }
}
function _aspxEnsureStartupScriptIsUnique(scriptId) {
 if(!scriptId)
  return;
 var scriptExecutedSelector = "script[" + scriptExecutedAttrName + "='true']#" + scriptId;
 ASPx.RemoveElement(document.querySelector(scriptExecutedSelector));
}
function _aspxRunEndCallbackScript() {
 while(callbackOwnerNames.length > 0) {
  var callbackOwnerName = callbackOwnerNames.pop();
  var callbackOwner = ASPx.GetControlCollection().Get(callbackOwnerName);
  if(callbackOwner)
   callbackOwner.DoEndCallback();
 }
}
ASPx.RunStartupScriptsCreatedOnClient = function(container) {
 _aspxRunStartupScriptsCore(container);
};
ASPx.OnScriptReadyStateChangedCallback = function(scriptElement, isCallback) {
 if(scriptElement.readyState == "loaded") {
  _aspxCacheIncludeScript(scriptElement);
  for(var i = 0; i < createdIncludeScripts.length; i++) {
   var script = createdIncludeScripts[i];
   if(_aspxIsKnownIncludeScript(script)) {
    if(!isScriptExecuted(script)) {
     markScriptAsExecuted(script);
     ASPx.AppendScript(script);
     appendedScriptsCount++;
    }
   } else
    break;
  }
  if(createdIncludeScripts.length == appendedScriptsCount)
   ASPx.FinalizeScriptProcessing(isCallback);
 }
};
ASPx.OnScriptLoadCallback = function(scriptElement, isCallback) {
 appendedScriptsCount++;
 if(scriptElement.nextCreatedScript) {
  ASPx.AppendScript(scriptElement.nextCreatedScript);
  _aspxCacheIncludeScript(scriptElement.nextCreatedScript);
 }
 if(createdIncludeScripts.length == appendedScriptsCount)
  ASPx.FinalizeScriptProcessing(isCallback);
};
function _aspxAddScriptsRestartHandler(objectName, handler) {
 scriptsRestartHandlers[objectName] = handler;
}
function _aspxMoveLinkElements() {
 var head = ASPx.GetNodesByTagName(document, "head")[0];
 var bodyLinks = ASPx.GetNodesByTagName(document.body, "link");
 if(head && bodyLinks.length > 0){
  var headLinks = ASPx.GetNodesByTagName(head, "link");
  var dxLinkAnchor = head.firstChild;
  for(var i = 0; i < headLinks.length; i++){
   if(_aspxIsResourceLink(headLinks[i]))
    dxLinkAnchor = headLinks[i].nextSibling;
  }
  while(bodyLinks.length > 0) 
   head.insertBefore(bodyLinks[0], dxLinkAnchor);
 }
}
var LinkProcessor = ASPx.CreateClass(null, {
 constructor: function() {
  this.linkInfos = [];
  this.loadingObservationTimerID = -1;
 },
 process: function() {
  if(this.hasLinks()) {
   if(this.isLinkLoadEventSupported())
    this.processViaLoadEvent();
   else
    this.processViaTimer();
  }
  else
   _aspxSweepDuplicatedLinks();
  _aspxMoveLinkElements();
 },
 addLinks: function(links) {
  var prevLinkCount = this.linkInfos.length;
  for(var i = 0; i < links.length; i++) {
   var link = links[i];
   if(link.loaded || link.rel != "stylesheet" || !_aspxIsResourceLink(link))
    continue;
   var linkInfo = {
    link: link,
    href: link.href
   };
   this.linkInfos.push(linkInfo);
  }
  return prevLinkCount != this.linkInfos.length;
 },
 hasLinks: function() {
  return this.linkInfos.length > 0;
 },
 reset: function() {
  this.linkInfos = [];
 },
 processViaLoadEvent: function() {
  for(var i = 0, linkInfo; linkInfo = this.linkInfos[i]; i++)
   linkInfo.link.onload = this.onLinkLoad.bind(this);
 },
 isLinkLoadEventSupported: function() {
  return !(ASPx.Browser.Chrome && ASPx.Browser.MajorVersion < 19 || ASPx.Browser.Firefox && ASPx.Browser.MajorVersion < 9 ||
   ASPx.Browser.Safari && ASPx.Browser.MajorVersion < 6 || ASPx.Browser.AndroidDefaultBrowser && ASPx.Browser.MajorVersion < 4.4);
 },
 processViaTimer: function() {
  if(this.loadingObservationTimerID == -1)
   this.onLinksLoadingObserve();
 },
 onLinksLoadingObserve: function() {
  if(this.getIsAllLinksLoaded()) {
   this.loadingObservationTimerID = -1;
   this.onAllLinksLoad();
  }
  else
   this.loadingObservationTimerID = window.setTimeout(this.onLinksLoadingObserve.aspxBind(this), 100);
 },
 getIsAllLinksLoaded: function() {
  var styleSheets = document.styleSheets;
  var loadedLinkHrefs = { };
  for(var i = 0; i < styleSheets.length; i++) {
   var styleSheet = styleSheets[i];
   try {
    if(styleSheet.cssRules)
     loadedLinkHrefs[styleSheet.href] = 1;
   }
   catch(ex) { }
  }
  var loadedLinksCount = 0;
  for(var i = 0, linkInfo; linkInfo = this.linkInfos[i]; i++) {
   if(loadedLinkHrefs[linkInfo.href])
    loadedLinksCount++;
  }
  return loadedLinksCount == this.linkInfos.length;
 },
 onAllLinksLoad: function() {
  this.reset();
  _aspxSweepDuplicatedLinks();
  if(createdIncludeScripts.length == 0)
   ASPx.FinalizeScriptProcessing(true);
 },
 onLinkReadyStateChanged: function(linkElement) {
  if(linkElement.readyState == "complete")
   this.onLinkLoadCore(linkElement);
 },
 onLinkLoad: function(evt) {
  var linkElement = ASPx.Evt.GetEventSource(evt);
  this.onLinkLoadCore(linkElement);
 },
 onLinkLoadCore: function(linkElement) {
  var linkInfo = this.getLinkInfo(linkElement);
  if(!linkInfo) return;
  linkInfo.loaded = true;
  var notLoadedLinks = this.linkInfos.filter(function(info) { return !info.loaded; });
  if(notLoadedLinks.length == 0)
   this.onAllLinksLoad();
 },
 getLinkInfo: function(linkElement) {
  for(var i = 0, linkInfo; linkInfo = this.linkInfos[i]; i++) {
   if(linkInfo.link == linkElement)
    return linkInfo;
  }
 }
});
var linkProcessor = null;
function getLinkProcessor() {
 if(linkProcessor == null)
  linkProcessor = new LinkProcessor();
 return linkProcessor;
}
ASPx.LinkProcessor = LinkProcessor;
var IFrameHelper = ASPx.CreateClass(null, {
 constructor: function(params) {
  this.params = params || {};
  this.params.src = this.params.src || "";
  this.CreateElements();
 },
 CreateElements: function() {
  var elements = IFrameHelper.Create(this.params);
  this.containerElement = elements.container;
  this.iframeElement = elements.iframe;
  this.AttachOnLoadHandler(this, this.iframeElement);
  this.SetLoading(true);
  if(this.params.onCreate)
   this.params.onCreate(this.containerElement, this.iframeElement);
 },
 AttachOnLoadHandler: function(instance, element) {
  ASPx.Evt.AttachEventToElement(element, "load", function() {
   instance.OnLoad(element);
  });
 },
 OnLoad: function(element) {
  this.SetLoading(false, element);
  if(!element.preventCustomOnLoad && this.params.onLoad)
   this.params.onLoad();
 },
 IsLoading: function(element) {
  element = element || this.iframeElement;
  if(element)
   return element.loading;
  return false;
 },
 SetLoading: function(value, element) {
  element = element || this.iframeElement;
  if(element)
   element.loading = value;
 },
 GetContentUrl: function() {
  return this.params.src;
 },
 SetContentUrl: function(url, preventBrowserCaching) {
  if(url) {
   this.params.src = url;
   if(preventBrowserCaching)
    url = IFrameHelper.AddRandomParamToUrl(url);
   this.SetLoading(true);
   this.iframeElement.src = url;
  }
 },
 RefreshContentUrl: function() {
  if(this.IsLoading())
   return;
  this.SetLoading(true);
  var oldContainerElement = this.containerElement;
  var oldIframeElement = this.iframeElement;
  var postfix = "_del" + Math.floor(Math.random()*100000).toString();
  if(this.params.id)
   oldIframeElement.id = this.params.id + postfix;
  if(this.params.name)
   oldIframeElement.name = this.params.name + postfix;
  ASPx.SetStyles(oldContainerElement, { height: 0 });
  this.CreateElements();
  oldIframeElement.preventCustomOnLoad = true;
  oldIframeElement.src = ASPx.BlankUrl;
  window.setTimeout(function() {
   oldContainerElement.parentNode.removeChild(oldContainerElement);
  }, 10000); 
 }
});
IFrameHelper.Create = function(params) {
 var iframeHtmlStringParts = [ "<iframe frameborder='0'" ];
 if(params) {
  if(params.id)
   iframeHtmlStringParts.push(" id='", params.id, "'");
  if(params.name)
   iframeHtmlStringParts.push(" name='", params.name, "'");
  if(params.title)
   iframeHtmlStringParts.push(" title='", params.title, "'");
  if(params.scrolling)
   iframeHtmlStringParts.push(" scrolling='", params.scrolling, "'");
  if(params.src)
   iframeHtmlStringParts.push(" src='", params.src, "'");
 }
 iframeHtmlStringParts.push("></iframe>");
 var containerElement = ASPx.CreateHtmlElementFromString("<div style='border-width: 0px; padding: 0px; margin: 0px'></div>");
 var iframeElement = ASPx.CreateHtmlElementFromString(iframeHtmlStringParts.join(""));
 containerElement.appendChild(iframeElement);
 return {
  container: containerElement,
  iframe: iframeElement
 };
};
IFrameHelper.AddRandomParamToUrl = function(url) {
 var prefix = url.indexOf("?") > -1
  ? "&"
  : "?";
 var param = prefix + Math.floor(Math.random()*100000).toString();
 var anchorIndex = url.indexOf("#");
 return anchorIndex == -1
  ? url + param
  : url.substr(0, anchorIndex) + param + url.substr(anchorIndex);
};
IFrameHelper.GetWindow = function(name) {
 var frameElement = document.getElementById(name);
 return (frameElement != null) ? frameElement.contentWindow : null;
};
IFrameHelper.GetDocument = function(name) {
 var frameElement = document.getElementById(name);
 return (frameElement != null) ? frameElement.contentDocument : null;
};
IFrameHelper.GetDocumentBody = function(name) {
 var doc = IFrameHelper.GetDocument(name);
 return (doc != null) ? doc.body : null;
};
IFrameHelper.GetDocumentHead = function (name) {
 var doc = IFrameHelper.GetDocument(name);
 return (doc != null) ? doc.head || doc.getElementsByTagName('head')[0] : null;
};
IFrameHelper.GetElement = function(name) {
 return document.getElementById(name);
};
var KbdHelper = ASPx.CreateClass(null, {
 constructor: function(control) {
  this.control = control;
  this.ready = false;
  this.clickHandler = this.HandleClick.bind(this);
  this.focusHandler = this.onElementFocus.bind(this);
  this.blurHandler = this.onBlur.bind(this);
 },
 Init: function() {
  if(!this.ready){
   KbdHelper.GlobalInit();
   var elements = this.getFocusableElements();
   for(var i = 0; i < elements.length; i++) {
    var element = elements[i];
    element.tabIndex = Math.max(element.tabIndex, 0);
    ASPx.Evt.AttachEventToElement(element, "click", this.clickHandler);
    ASPx.Evt.AttachEventToElement(element, "focus", this.focusHandler);
    ASPx.Evt.AttachEventToElement(element, "blur", this.blurHandler);
   }
   this.ready = true;
  }
 },
 Dispose: function() {
  if(this.ready) {
   var elements = this.getFocusableElements();
   for(var i = 0; i < elements.length; i++) {
    var element = elements[i];
    element.tabIndex = -1;
    ASPx.Evt.DetachEventFromElement(element, "click", this.clickHandler);
    ASPx.Evt.DetachEventFromElement(element, "focus", this.focusHandler);
    ASPx.Evt.DetachEventFromElement(element, "blur", this.blurHandler);
   }
   this.ready = false;
  }
 },
 onElementFocus: function(e) {
  if(!this.CanFocus(e))
   return true;
  KbdHelper.active = this;
 },
 getFocusableElements: function() {
  return [this.GetFocusableElement()]; 
 },
 GetFocusableElement: function() { return this.control.GetMainElement(); },
 canHandleNoFocusAction: function() { 
  var focusableElements = this.getFocusableElements();
  for(var i = 0; i < focusableElements.length; i++) {
   if(focusableElements[i] === _aspxGetFocusedElement())
    return false;
  }
  return true;
 },
 RequirePreventScrollOnFocus: function() { return false; },
 CanFocus: function(e) {
  var tag = ASPx.Evt.GetEventSource(e).tagName;
  return !(tag === "A" || tag === "TEXTAREA" || tag === "INPUT" || tag === "SELECT" || tag === "IFRAME" || tag === "OBJECT");
 },
 HandleClick: function(e) {
  if(!this.CanFocus(e))
   return;
  this.Focus();
 },
 Focus: function() {
  var preventScroll = this.RequirePreventScrollOnFocus();
  var savedDocumentScrollTop = preventScroll ? ASPx.GetDocumentScrollTop() : -1;
  try {
   this.GetFocusableElement().focus({ preventScroll: preventScroll });
  } catch(e) { }
  if(preventScroll && !this.IsNativePreventScrollOnFocusSupported() && savedDocumentScrollTop !== ASPx.GetDocumentScrollTop())
   ASPx.SetDocumentScrollTop(savedDocumentScrollTop);
 },
 IsNativePreventScrollOnFocusSupported: function() {
  if(this.isNativePreventScrollOnFocusSupported === undefined)
   this.isNativePreventScrollOnFocusSupported = this.CalcIsNativePreventScrollOnFocusSupported();
  return this.isNativePreventScrollOnFocusSupported;
 },
 CalcIsNativePreventScrollOnFocusSupported: function() {
  var result = false;
  try {
   ASPx.GetActiveElement().focus(Object.defineProperty({}, "preventScroll", { get: function() { result = true; } }));
  } catch(e) { result = false; }
  return result;
 },
 onBlur: function(){
  delete KbdHelper.active;
 },
 HandleKeyDown: function(e) { }, 
 HandleKeyPress: function(e) { }, 
 HandleKeyUp: function (e) { },
 HandleNoFocusAction: function(e) { },
 FocusByAccessKey: function () { }
});
KbdHelper.GlobalInit = function() {
 if(KbdHelper.ready)
  return;
 ASPx.Evt.AttachEventToDocument("keydown", KbdHelper.OnKeyDown);
 ASPx.Evt.AttachEventToDocument("keypress", KbdHelper.OnKeyPress);
 ASPx.Evt.AttachEventToDocument("keyup", KbdHelper.OnKeyUp);
 KbdHelper.ready = true; 
};
KbdHelper.swallowKey = false;
KbdHelper.accessKeys = { };
KbdHelper.ProcessKey = function(e, actionName) {
 if(!KbdHelper.active) 
  return;
 if (KbdHelper.active.canHandleNoFocusAction()) {
  KbdHelper.active["HandleNoFocusAction"](e, actionName);
  return;
 }
 var ctl = KbdHelper.active.control;
 if(ctl !== ASPx.GetControlCollection().Get(ctl.name)) {
  delete KbdHelper.active;
  return;
 }
 if(!KbdHelper.swallowKey) 
  KbdHelper.swallowKey = KbdHelper.active[actionName](e);
 if(KbdHelper.swallowKey)
  ASPx.Evt.PreventEvent(e);
};
KbdHelper.OnKeyDown = function(e) {
 KbdHelper.swallowKey = false;
 if(KbdHelper.TryAccessKey(KbdHelper.getKeyName(e)))
  ASPx.Evt.PreventEvent(e);
 else 
  KbdHelper.ProcessKey(e, "HandleKeyDown"); 
};
KbdHelper.OnKeyPress = function(e) { KbdHelper.ProcessKey(e, "HandleKeyPress"); };
KbdHelper.OnKeyUp = function(e) { KbdHelper.ProcessKey(e, "HandleKeyUp"); };
KbdHelper.RegisterAccessKey = function(obj) {
 var key;
 if(obj.accessKey)
  key = "CtrlShift" + obj.accessKey;
 else if(obj.keyTipModeShortcut)
  key = obj.keyTipModeShortcut;
 if(!key) return;
 KbdHelper.accessKeys[key.toLowerCase()] = obj.name;
};
KbdHelper.TryAccessKey = function(code) {
 var key = code.toLowerCase ? code.toLowerCase() : String.fromCharCode(code).toLowerCase();
 var name = KbdHelper.accessKeys[key];
 if(!name) return false;
 var obj = ASPx.GetControlCollection().Get(name);
 return KbdHelper.ClickAccessKey(obj);
};
KbdHelper.ClickAccessKey = function (control) {
 if (!control) return false;
 var el = control.GetMainElement();
 if (!el) return false;
 el.focus();
 setTimeout(function () {
  if (KbdHelper.active && KbdHelper.active.FocusByAccessKey)
   KbdHelper.active.FocusByAccessKey();
 }.aspxBind(this), ASPx.FOCUS_TIMEOUT);
 return true;
};
KbdHelper.getKeyName = function(e) {
 var name = "";
 if(e.altKey)
  name += "Alt";
 if(e.ctrlKey)
  name += "Ctrl";
 if(e.shiftKey)
  name += "Shift";
 var keyCode = e.key || e.code || String.fromCharCode(ASPx.Evt.GetKeyCode(e));
 if(keyCode.match(/key/i))
  name += keyCode.replace(/key/i, "");
 else if(keyCode.match(/digit/i))
  name += keyCode.replace(/digit/i, "");
 else if(keyCode.match(/arrow/i))
  name += keyCode.replace(/arrow/i, "");
 else if(keyCode.match(/ins/i))
  name += "Ins";
 else if(keyCode.match(/del/i))
  name += "Del";
 else if(keyCode.match(/back/i))
  name += "Back";
 else if(!keyCode.match(/alt/i) && !keyCode.match(/control/i) && !keyCode.match(/shift/i))
  name += keyCode;
 return name.replace(/^a-zA-Z0-9/, "");
};
AccessKeysHelper = ASPx.CreateClass(KbdHelper, {
 constructor: function (control) {
  this.constructor.prototype.constructor.call(this, control);
  this.accessKeysVisible = false;
  this.activeKey = null;
  this.accessKey = control.createAccessKey ? control.createAccessKey(control.accessKey) : new AccessKey(control.accessKey);
  this.accessKeys = this.accessKey.accessKeys;
  this.charIndex = 0;
  this.onFocusByAccessKey = null;
  this.onClose = null;
  this.manualStopProcessing = false;
  this.isActive = false;
  this.areAccessKeysShown = false;
 },
 Init: function (control) {
  KbdHelper.prototype.Init.call(this);
  KbdHelper.RegisterAccessKey(control);   
 },
 Add: function (accessKey) {
  this.accessKey.Add(accessKey);
 },
 HandleKeyDown: function (e) {
  var keyCode = ASPx.Evt.GetKeyCode(e);
  var stopProcessing = this.processKeyDown(keyCode);
  if (stopProcessing.value) {
   this.stopProcessing();
   if(this.onClosedOnEscape && (keyCode == ASPx.Key.Esc || stopProcessing.fireEvent))
    this.onClosedOnEscape();
  }
  return stopProcessing;
 },
 HandleNoFocusAction: function (e, actionName) {
  var keyCode = ASPx.Evt.GetKeyCode(e);
  if (this.onClosedOnEscape && keyCode == ASPx.Key.Esc && actionName == "HandleKeyDown")
   this.onClosedOnEscape();
 },
 Activate: function () {
  KbdHelper.ClickAccessKey(this.control);
  this.areAccessKeysShown = true;
 },
 Stop: function() {
  this.stopProcessing();
 },
 stopProcessing: function () {
  this.HideAccessKeys();
  if (KbdHelper.active && this.isActive) {
   this.isActive = false;
   KbdHelper.active.control.GetMainElement().blur();
   delete KbdHelper.active;
  }
 },
 onBlur: function() {
  if (this.manualStopProcessing) {
   this.manualStopProcessing = false;
   return;
  }
  this.HideAccessKeys();
  KbdHelper.prototype.onBlur.call(this);
 },
 processKeyDown: function (keyCode) {
  switch (keyCode) {
   case ASPx.Key.Left:
    this.TryMoveFocusLeft();
    return { value: false };
   case ASPx.Key.Right:
    this.TryMoveFocusRight();
    return { value: false };
   case ASPx.Key.Esc:
    if(this.control.hideAllPopups)
     this.control.hideAllPopups(true, true);
    if(this.activeKey)
     this.activeKey = this.activeKey.Return();
    this.charIndex = 0;
    if (!this.activeKey)
     return { value: true };
    break;
   case ASPx.Key.Enter:
    return { value: true };
   default:
    if (!ASPx.IsPrintableKey(keyCode))
     return { value: false };
    var char = String.fromCharCode(keyCode).toUpperCase();
    var needToContinue = { value: false };
    var keyResult;
    if(this.activeKey)
     keyResult = this.activeKey.TryAccessKey(char, this.charIndex, needToContinue);
    if (needToContinue.value) {
     this.charIndex++;
     return { value: false };
    }
    this.charIndex = 0;
    if(keyResult !== undefined)
     this.activeKey = keyResult;
    else
     return { value: true, fireEvent: true };
    if (!this.activeKey || !this.activeKey.accessKeys || this.activeKey.accessKeys.length == 0) {
     if (this.activeKey && this.activeKey.manualStopProcessing) {
      this.manualStopProcessing = true;
      break;
     }
     return { value: true, fireEvent: true };
    }
  }
  return { value: false };
 },
 TryMoveFocusLeft: function (modifier) {},
 TryMoveFocusRight: function (modifier) {},
 TryMoveFocusUp: function (modifier) {},
 TryMoveFocusDown: function (modifier) {},
 FocusByAccessKey: function() {
  if (this.onFocusByAccessKey)
   this.onFocusByAccessKey();
  this.HideAccessKeys();
  KbdHelper.prototype.FocusByAccessKey.call(this);
  this.activeKey = this.accessKey;
  this.activeKey.execute();
  this.isActive = true;
  this.areAccessKeysShown = true;
 },
 HideAccessKeys: function() {
  this.areAccessKeysShown = false;
  this.hideAccessKeys(this.accessKey);
 },
 Update: function() {
  this.throttleMethod(this.refresh, 100);
 },
 refresh: function() {
  if(this.activeKey && this.areAccessKeysShown) {
   this.activeKey.execute();
  }
 },
 throttleMethod: function(method, delay) {
  clearTimeout(method.timerId);
  method.timerId = setTimeout(function() {
   method.call(this);
  }.aspxBind(this), delay);
 },
 AreAccessKeysShown: function() {
  return this.areAccessKeysShown;
 },
 hideAccessKeys: function (accessKey) {
  for (var i = 0, ak; ak = accessKey.accessKeys[i]; i++) {
   this.hideAccessKeys(ak);
  }
  if (accessKey)
   accessKey.hide();
 },
 HandleClick: function(e) {
  KbdHelper.prototype.HandleClick.call(this, e);
  this.stopProcessing();
 }
});
AccessKey = ASPx.CreateClass(null, {
 constructor: function (popupItem, getPopupElement, keyTipElement, key, onlyClick, manualStopProcessing) {
  this.key = key ? key : keyTipElement ? ASPxClientUtils.Trim(ASPx.GetInnerText(keyTipElement)) : null;
  this.popupItem = popupItem;
  this.getPopupElement = getPopupElement;
  this.keyTipElement = keyTipElement;
  this.accessKeys = [];
  this.needShowChilds = true;
  this.parent = null;
  this.onlyClick = onlyClick;
  this.manualStopProcessing = manualStopProcessing;
 },
 Add: function (accessKey) {
  this.accessKeys.push(accessKey);
  accessKey.parent = this;
 },
 TryAccessKey: function (char, index, needToContinue) {
  if (!this.accessKeys || this.accessKeys.length == 0)
   return;
  for (var i = 0, accessKey; accessKey = this.accessKeys[i]; i++) {
   if (accessKey.key[index] == char && accessKey.isVisible()) {
    if (accessKey.key[index + 1]) {
     needToContinue.value = true;
    }
    else {
     accessKey.execute();
     return accessKey;
    }
   } else {
    accessKey.hide();
   }
  }
  for (var i = 0, accessKey; accessKey = this.accessKeys[i]; i++) {
   var key = accessKey.TryAccessKey(char, index, needToContinue);
   if (key)
    return key;
  }
  return;
 },
 isVisible: function(){
  return ASPx.GetElementVisibility(this.keyTipElement);
 },
 Return: function () {
  this.hideChildAccessKeys();
  if (this.parent) {
   this.parent.showAccessKeys(true);
  }  
  return this.parent;
 },
 execute: function () {
  this.hideAll();
  if (this.popupItem && this.popupItem.accessKeyClick && !this.onlyClick)
   this.popupItem.accessKeyClick();
  if (this.getPopupElement && this.onlyClick)
   ASPx.Evt.EmulateMouseClick(this.getPopupElement(this.popupItem));
  if (this.accessKeys)
   setTimeout(function () {
    this.showAccessKeys(true);
   }.aspxBind(this), 100);
 },
 showAccessKeys: function(directShow) {
  if (!directShow && !this.needShowChilds)
   return;
  for (var i = 0; i < this.accessKeys.length; i++) {
   var accessKey = this.accessKeys[i];
   if (accessKey) {
    var popupElement = accessKey.getPopupElement ? accessKey.getPopupElement(accessKey.popupItem) : null;
    if (popupElement && this.isElementVisible(popupElement)) {
     this.show(accessKey);
    }
    accessKey.showAccessKeys();
   }
  }
 },
 isElementVisible: function (el) { return ASPx.IsElementVisible(el, true); },
 show: function(accessKey) {
  var keyTipElement = accessKey.keyTipElement;
  var popupElement = accessKey.getPopupElement(accessKey.popupItem);
  this.showKeyTipElement(keyTipElement, this.calculateCoordinates(accessKey, keyTipElement, popupElement));
 },
 showKeyTipElement: function (keyTipElement, coordinates) {
  ASPx.SetAbsoluteY(keyTipElement, coordinates.top);
  ASPx.SetAbsoluteX(keyTipElement, coordinates.left);
  ASPx.SetElementVisibility(keyTipElement, true); 
 },
 calculateCoordinates: function (accessKey, keyTipElement, popupElement) {
  var top = ASPx.GetAbsolutePositionY(popupElement);
  var left = ASPx.GetAbsolutePositionX(popupElement);
  if (accessKey.popupItem.getAccessKeyPosition)
   switch (accessKey.popupItem.getAccessKeyPosition()) {
    case "AboveRight":
     left = left + popupElement.offsetWidth - keyTipElement.offsetWidth / 3;
     top = top - keyTipElement.offsetHeight / 2;
     break;
    case "Right":
     left = left + popupElement.offsetWidth - keyTipElement.offsetWidth / 3;
     top = top + popupElement.offsetHeight / 2 - keyTipElement.offsetHeight / 2;
     break;
    case "BelowRight":
     left = left + popupElement.offsetWidth - keyTipElement.offsetWidth / 3;
     top = top + keyTipElement.offsetHeight / 2;
     break;
    default:
     top = top + popupElement.offsetHeight;
     left = left + popupElement.offsetWidth / 2 - keyTipElement.offsetWidth / 2;
     break;
   }
  else {
   top = top + popupElement.offsetHeight;
   left = left + popupElement.offsetWidth / 2 - keyTipElement.offsetWidth / 2;
  }
  return { top: top, left: left };
 },
 hide: function() {
  if (this.keyTipElement)
   ASPx.SetElementVisibility(this.keyTipElement, false);
 },
 hideChildAccessKeys: function () {
  this.hideAccessKeys(this.accessKeys);
 },
 hideAccessKeys: function (accessKeys) {
  if (accessKeys) {
   for (var i = 0, accessKey; accessKey = accessKeys[i]; i++) {
    if (accessKey.keyTipElement)
     accessKey.hide();
    accessKey.hideChildAccessKeys();
   }
  }
 },
 hideAll: function () {
  this.getRoot(this).hideChildAccessKeys();
 },
 getRoot: function (accessKey) {
  if (!accessKey.parent)
   return accessKey;
  return this.getRoot(accessKey.parent);
 }
});
var focusedElement = null;
function aspxOnElementFocused(evt) {
 evt = ASPx.Evt.GetEvent(evt);
 if(evt && evt.target)
  focusedElement = evt.target;
}
function _aspxInitializeFocus() {
 if(!ASPx.GetActiveElement())
  ASPx.Evt.AttachEventToDocument("focus", aspxOnElementFocused);
}
function _aspxGetFocusedElement() {
 var activeElement = ASPx.GetActiveElement();
 return activeElement ? activeElement : focusedElement;
}
CheckBoxCheckState = {
 Checked : "Checked",
 Unchecked : "Unchecked",
 Indeterminate : "Indeterminate"
};
CheckBoxInputKey = { 
 Checked : "C",
 Unchecked : "U",
 Indeterminate : "I"
};
var CheckableElementStateController = ASPx.CreateClass(null, {
 constructor: function(imageProperties) {
  this.checkBoxStates = [];
  this.imageProperties = imageProperties;
  this.customImageMarkerClassName = "dxcbCI";
 },
 GetValueByInputKey: function(inputKey) {
  return this.GetFirstValueBySecondValue("Value", "StateInputKey", inputKey);
 },
 GetInputKeyByValue: function(value) {
  return this.GetFirstValueBySecondValue("StateInputKey", "Value", value);
 },
 GetImagePropertiesNumByInputKey: function(value) {
  return this.GetFirstValueBySecondValue("ImagePropertiesNumber", "StateInputKey", value);
 },
 GetNextCheckBoxValue: function(currentValue, allowGrayed) {
  var currentInputKey = this.GetInputKeyByValue(currentValue);
  var nextInputKey = '';
  switch(currentInputKey) {
   case CheckBoxInputKey.Checked:
    nextInputKey = CheckBoxInputKey.Unchecked; break;
   case CheckBoxInputKey.Unchecked:
    nextInputKey = allowGrayed ? CheckBoxInputKey.Indeterminate : CheckBoxInputKey.Checked; break;
   case CheckBoxInputKey.Indeterminate:
    nextInputKey = CheckBoxInputKey.Checked; break;
  }
  return this.GetValueByInputKey(nextInputKey);
 },
 GetCheckStateByInputKey: function(inputKey) {
  switch(inputKey) {
   case CheckBoxInputKey.Checked: 
    return CheckBoxCheckState.Checked;
   case CheckBoxInputKey.Unchecked: 
    return CheckBoxCheckState.Unchecked;
   case CheckBoxInputKey.Indeterminate: 
    return CheckBoxCheckState.Indeterminate;
  }
 },
 GetValueByCheckState: function(checkState) {
  switch(checkState) {
   case CheckBoxCheckState.Checked: 
    return this.GetValueByInputKey(CheckBoxInputKey.Checked);
   case CheckBoxCheckState.Unchecked: 
    return this.GetValueByInputKey(CheckBoxInputKey.Unchecked);
   case CheckBoxCheckState.Indeterminate: 
    return this.GetValueByInputKey(CheckBoxInputKey.Indeterminate);
  }
 },
 GetFirstValueBySecondValue: function(firstValueName, secondValueName, secondValue) {
  return this.GetValueByFunc(firstValueName, 
   function(checkBoxState) { return checkBoxState[secondValueName] === secondValue; });
 },
 GetValueByFunc: function(valueName, func) {
  for(var i = 0; i < this.checkBoxStates.length; i++) {
   if(func(this.checkBoxStates[i]))
    return this.checkBoxStates[i][valueName];
  }  
 },
 AssignElementClassName: function(element, cssClassPropertyKey, disabledCssClassPropertyKey, assignedClassName) {
  var classNames = [ ];
  for(var i = 0; i < this.imageProperties[cssClassPropertyKey].length; i++) {
   classNames.push(this.imageProperties[disabledCssClassPropertyKey][i]);
   classNames.push(this.imageProperties[cssClassPropertyKey][i]);
  }
  var elementClassName = element.className;
  for(var i = 0; i < classNames.length; i++) {
   var className = classNames[i];
   var index = elementClassName.indexOf(className);
   if(index > -1)
    elementClassName = elementClassName.replace((index == 0 ? '' : ' ') + className, "");
  }
  elementClassName += " " + assignedClassName;
  element.className = elementClassName;
 },
 UpdateInternalCheckBoxDecoration: function(mainElement, inputKey, enabled) {
  var imagePropertiesNumber = this.GetImagePropertiesNumByInputKey(inputKey);
  for(var imagePropertyKey in this.imageProperties) {
   if(this.imageProperties.hasOwnProperty(imagePropertyKey)) {
    var propertyValue = this.imageProperties[imagePropertyKey][imagePropertiesNumber];
    propertyValue = propertyValue || !isNaN(propertyValue) ? propertyValue : "";
    switch(imagePropertyKey) {
     case "0" : mainElement.title = propertyValue; break;
     case "1" : mainElement.style.width = propertyValue + (propertyValue != "" ? "px" : ""); break;
     case "2" : mainElement.style.height = propertyValue + (propertyValue != "" ? "px" : ""); break;
    }
    if(enabled) {
     switch(imagePropertyKey) {
      case "3" : this.SetImageSrc(mainElement, propertyValue); break;
      case "4" : 
       this.AssignElementClassName(mainElement, "4", "8", propertyValue);
       break;
      case "5" : this.SetBackgroundPosition(mainElement, propertyValue, true); break;
      case "6" : this.SetBackgroundPosition(mainElement, propertyValue, false); break;
     }
    } else {
     switch(imagePropertyKey) {
      case "7" : this.SetImageSrc(mainElement, propertyValue); break;
      case "8" : 
       this.AssignElementClassName(mainElement, "4", "8", propertyValue);
       break;
      case "9" : this.SetBackgroundPosition(mainElement, propertyValue, true); break;
      case "10" : this.SetBackgroundPosition(mainElement, propertyValue, false); break;
     }
    }
   }
  }
 },
 SetImageSrc: function(mainElement, src) {
  if(src === ""){
   mainElement.style.backgroundImage = "";
   mainElement.style.backgroundPosition = "";
   ASPx.RemoveClassNameFromElement(mainElement, this.customImageMarkerClassName);
  }
  else{
   mainElement.style.backgroundImage = "url('" + src + "')";
   this.SetBackgroundPosition(mainElement, 0, true);
   this.SetBackgroundPosition(mainElement, 0, false);
   ASPx.AddClassNameToElement(mainElement, this.customImageMarkerClassName);
  }
 },
 SetBackgroundPosition: function(element, value, isX) {
  if(value === "") {
   element.style.backgroundPosition = value;
   return;
  }
  if(element.style.backgroundPosition === "")
   element.style.backgroundPosition = isX ? "-" + value.toString() + "px 0px" : "0px -" + value.toString() + "px";
  else {
   var position = element.style.backgroundPosition.split(' ');
   element.style.backgroundPosition = isX ? '-' + value.toString() + "px " + position[1] :  position[0] + " -" + value.toString() + "px";
  }
 },
 AddState: function(value, stateInputKey, imagePropertiesNumber) {
  this.checkBoxStates.push({
   "Value" : value, 
   "StateInputKey" : stateInputKey, 
   "ImagePropertiesNumber" : imagePropertiesNumber
  });
 },
 GetAriaCheckedValue: function(state) {
  switch(state) {
   case ASPx.CheckBoxCheckState.Checked: return "true";
   case ASPx.CheckBoxCheckState.Unchecked: return "false";
   case ASPx.CheckBoxCheckState.Indeterminate: return "mixed";
   default: return "";
  }
 },
 GetAriaSelectedValue: function(state) {
  switch(state) {
   case ASPx.CheckBoxCheckState.Checked: return "true";
   case ASPx.CheckBoxCheckState.Unchecked: return "false";
   case ASPx.CheckBoxCheckState.Indeterminate: return "undefined";
   default: return "";
  }
 },
 SetAriaCheckedSelectedAttributes: function(mainElement, state) {
  if(mainElement.attributes["aria-checked"] !== undefined) {
   var ariaCheckedValue = this.GetAriaCheckedValue(state);
   mainElement.setAttribute("aria-checked", ariaCheckedValue);
  }
  if(mainElement.attributes["aria-selected"] !== undefined) {
   var ariaSelectedValue = this.GetAriaSelectedValue(state);
   mainElement.setAttribute("aria-selected", ariaSelectedValue);
  }
 }
});
CheckableElementStateController.Create = function(imageProperties, valueChecked, valueUnchecked, valueGrayed, allowGrayed) {
 var stateController = new CheckableElementStateController(imageProperties);
 stateController.AddState(valueChecked, CheckBoxInputKey.Checked, 0);
 stateController.AddState(valueUnchecked, CheckBoxInputKey.Unchecked, 1);
 if(typeof(valueGrayed) != "undefined")
  stateController.AddState(valueGrayed, CheckBoxInputKey.Indeterminate, allowGrayed ? 2 : 1);
 stateController.allowGrayed = allowGrayed;
 return stateController;
};
var CheckableElementHelper = ASPx.CreateClass(null, {
 InternalCheckBoxInitialize: function(internalCheckBox) {
  this.AttachToMainElement(internalCheckBox);
  this.AttachToInputElement(internalCheckBox);
 },
 AttachToMainElement: function(internalCheckBox) {
  var instance = this;
  if(internalCheckBox.mainElement) {
    var toggleEvent = internalCheckBox.displaySwitch ? ASPx.TouchUIHelper.touchMouseDownEventName : "click";
    ASPx.Evt.AttachEventToElement(internalCheckBox.mainElement, toggleEvent,
    function (evt) {
     if(ASPx.Evt.IsRightButtonPressed(evt))
      return;
     instance.InvokeClick(internalCheckBox, evt);
     if(!internalCheckBox.disableCancelBubble)
      return ASPx.Evt.PreventEventAndBubble(evt);
    }
   );
   ASPx.Evt.AttachEventToElement(internalCheckBox.mainElement, "mousedown",
    function (evt) {
     internalCheckBox.Refocus();
    }
   );
   ASPx.Evt.PreventElementDragAndSelect(internalCheckBox.mainElement, true);
  }
 },
 AttachToInputElement: function(internalCheckBox) {
  var instance = this;
  if(internalCheckBox.inputElement && internalCheckBox.mainElement) {
   var checkableElement = internalCheckBox.accessibilityCompliant ? internalCheckBox.mainElement : internalCheckBox.inputElement;
   ASPx.Evt.AttachEventToElement(checkableElement, "focus",
    function (evt) { 
     if(!internalCheckBox.enabled)
      checkableElement.blur();
     else
      internalCheckBox.OnFocus();
    }
   );
   ASPx.Evt.AttachEventToElement(checkableElement, "blur", 
    function (evt) { 
     internalCheckBox.OnLostFocus();
    }
   );
   ASPx.Evt.AttachEventToElement(checkableElement, "keyup",
    function (evt) { 
     if(ASPx.Evt.GetKeyCode(evt) == ASPx.Key.Space)
      instance.InvokeClick(internalCheckBox, evt);
    }
   );
   ASPx.Evt.AttachEventToElement(checkableElement, "keydown",
    function (evt) { 
     if(ASPx.Evt.GetKeyCode(evt) == ASPx.Key.Space)
      return ASPx.Evt.PreventEvent(evt);
    }
   );
  }
 },
 IsKBSInputWrapperExist: function() {
  return ASPx.Browser.Opera || ASPx.Browser.WebKitFamily;
 },
 GetICBMainElementByInput: function(icbInputElement) {
  return this.IsKBSInputWrapperExist() ? icbInputElement.parentNode.parentNode : icbInputElement.parentNode;
 },
 RequirePreventFocus: function() { return false; },
 InvokeClick: function(internalCheckBox, evt) {
  if(internalCheckBox.enabled && !internalCheckBox.GetReadOnly()) {
   var inputElementValue = internalCheckBox.inputElement.value;
   var focusableElement = internalCheckBox.accessibilityCompliant ? internalCheckBox.mainElement : internalCheckBox.inputElement; 
   if(!this.RequirePreventFocus())
    focusableElement.focus();
   internalCheckBox.inputElement.value = inputElementValue; 
   this.InvokeClickCore(internalCheckBox, evt);
   }
 },
 InvokeClickCore: function(internalCheckBox, evt) {
  internalCheckBox.OnClick(evt);
 }
});
CheckableElementHelper.Instance = new CheckableElementHelper();
var CheckBoxInternal = ASPx.CreateClass(null, {
 constructor: function(inputElement, stateController, allowGrayed, allowGrayedByClick, helper, container, storeValueInInput, key, disableCancelBubble,
  accessibilityCompliant, displaySwitch) {
  this.inputElement = inputElement;
  this.mainElement = helper.GetICBMainElementByInput(this.inputElement);
  this.name = (key ? key : this.inputElement.id) + CheckBoxInternal.GetICBMainElementPostfix();
  this.mainElement.id = this.name;
  this.stateController = stateController;
  this.container = container;
  this.allowGrayed = allowGrayed;
  this.allowGrayedByClick = allowGrayedByClick;
  this.autoSwitchEnabled = true;
  this.displaySwitch = displaySwitch;
  this.storeValueInInput = !!storeValueInInput;
  this.storedInputKey = !this.storeValueInInput ? this.inputElement.value : null;
  this.disableCancelBubble = !!disableCancelBubble;
  this.accessibilityCompliant = accessibilityCompliant;
  this.focusDecoration = null;
  this.focused = false;
  this.focusLocked = false;
  this.enabled = !this.mainElement.className.match(/dxWeb_\w+Disabled(\b|_)/);
  this.readOnly = false;
  this.preventFocus = helper.RequirePreventFocus();
  this.CheckedChanged = new ASPxClientEvent();
  this.Focus = new ASPxClientEvent();
  this.LostFocus = new ASPxClientEvent();
  helper.InternalCheckBoxInitialize(this);
 },
 GetReadOnly: function() {
  return this.readOnly;
 },
 ChangeInputElementTabIndex: function() {  
  var changeMethod = this.enabled ? ASPx.Attr.RestoreTabIndexAttribute : ASPx.Attr.SaveTabIndexAttributeAndReset;
  changeMethod(this.inputElement);
 },
 CreateFocusDecoration: function(focusedStyle) {
   this.focusDecoration = new FocusedStyleDecoration(this);
   this.focusDecoration.AddStyle('F', focusedStyle[0], focusedStyle[1]);
   this.focusDecoration.AddPostfix("");
 },
 UpdateFocusDecoration: function() {
  this.focusDecoration.Update();
 },  
 StoreInputKey: function(inputKey) {
  if(this.storeValueInInput)
   this.inputElement.value = inputKey;
  else
   this.storedInputKey = inputKey;
 },
 GetStoredInputKey: function() {
  if(this.storeValueInInput)
   return this.inputElement.value;
  else
   return this.storedInputKey;
 },
 OnClick: function(e) {
  if(this.autoSwitchEnabled) {
   var currentValue = this.GetValue();
   var value = this.stateController.GetNextCheckBoxValue(currentValue, this.allowGrayedByClick && this.allowGrayed);
   this.SetValue(value);
  }
  this.CheckedChanged.FireEvent(this, e);
 },
 OnFocus: function() {
  if(!this.IsFocusLocked()) {
   this.focused = true;
   this.UpdateFocusDecoration();
   this.Focus.FireEvent(this, null);
  } else
   this.UnlockFocus();
 },
 OnLostFocus: function() {
  if(!this.IsFocusLocked()) {
   this.focused = false;
   this.UpdateFocusDecoration();
   this.LostFocus.FireEvent(this, null);
  }
 },
 Refocus: function() {
  if(this.preventFocus) return;
  if(this.focused) {
   this.LockFocus();
   this.inputElement.blur();
   if(ASPx.Browser.MacOSMobilePlatform) {
    window.setTimeout(function() {
     ASPx.SetFocus(this.inputElement);
    }, ASPx.FOCUS_TIMEOUT);
   } else {
    ASPx.SetFocus(this.inputElement);
   }
  }
 },
 LockFocus: function() {
  this.focusLocked = true;
 },
 UnlockFocus: function() {
  this.focusLocked = false;
 },
 IsFocusLocked: function() {
  if(!!ASPx.Attr.GetAttribute(this.mainElement, ASPx.Attr.GetTabIndexAttributeName()))
   return false;
  return this.focusLocked;
 },
 SetValue: function(value, force) {
  var currentValue = this.GetValue();
  if(currentValue !== value || force) {
   var newInputKey = this.stateController.GetInputKeyByValue(value);
   if(newInputKey) {
    this.StoreInputKey(newInputKey);   
    this.stateController.UpdateInternalCheckBoxDecoration(this.mainElement, newInputKey, this.enabled);
   }
  }
  if(this.accessibilityCompliant) {
   var state = this.GetCurrentCheckState();
   this.stateController.SetAriaCheckedSelectedAttributes(this.mainElement, state);
  }
 },
 GetValue: function() {
  return this.stateController.GetValueByInputKey(this.GetCurrentInputKey());
 },
 GetCurrentCheckState: function() {
  return this.stateController.GetCheckStateByInputKey(this.GetCurrentInputKey());
 },
 GetCurrentInputKey: function() {
  return this.GetStoredInputKey();
 },
 GetChecked: function() {
  return this.GetCurrentInputKey() === CheckBoxInputKey.Checked;
 },
 SetChecked: function(checked) {
  var newValue = this.stateController.GetValueByCheckState(checked ? CheckBoxCheckState.Checked : CheckBoxCheckState.Unchecked);
  this.SetValue(newValue);
 },
 SetEnabled: function(enabled) {
  if(this.enabled != enabled) {
   this.enabled = enabled;
   this.stateController.UpdateInternalCheckBoxDecoration(this.mainElement, this.GetCurrentInputKey(), this.enabled);
   this.ChangeInputElementTabIndex();
  }
 },
 GetEnabled: function() {
  return this.enabled;
 }
});
CheckBoxInternal.GetICBMainElementPostfix = function() {
 return "_D";
};
var CheckBoxInternalCollection = ASPx.CreateClass(CollectionBase, {
 constructor: function(imageProperties, allowGrayed, storeValueInInput, helper, disableCancelBubble, accessibilityCompliant) {
  this.constructor.prototype.constructor.call(this);
  this.stateController = allowGrayed 
   ? CheckableElementStateController.Create(imageProperties, CheckBoxInputKey.Checked, CheckBoxInputKey.Unchecked, CheckBoxInputKey.Indeterminate, true)
   : CheckableElementStateController.Create(imageProperties, CheckBoxInputKey.Checked, CheckBoxInputKey.Unchecked);
  this.helper = helper || CheckableElementHelper.Instance;
  this.storeValueInInput = !!storeValueInInput;
  this.disableCancelBubble = !!disableCancelBubble;
  this.accessibilityCompliant = accessibilityCompliant;
 },
 Add: function(key, inputElement, container) {
  this.Remove(key);
  var checkBox = this.CreateInternalCheckBox(key, inputElement, container);
  CollectionBase.prototype.Add.call(this, key, checkBox);
  return checkBox;
 },
 SetImageProperties: function(imageProperties) {
  this.stateController.imageProperties = imageProperties;
 },
 CreateInternalCheckBox: function(key, inputElement, container) {
  return new CheckBoxInternal(inputElement, this.stateController, this.stateController.allowGrayed, false, this.helper, container, 
   this.storeValueInInput, key, this.disableCancelBubble, this.accessibilityCompliant);
 }
});
var FocusedStyleDecoration = ASPx.CreateClass(null, {
 constructor: function(editor) {
  this.editor = editor;
  this.postfixList = [];
  this.styles = {};
  this.innerStyles = {};
 },
 AddPostfix: function(value) {
  this.postfixList.push(value);
 },
 AddStyle: function(key, className, cssText) {
  this.styles[key] = this.CreateRule(className, cssText);
  this.innerStyles[key] = this.CreateRule("", this.FilterInnerCss(cssText));
 },
 CreateRule: function(className, cssText) {
  return ASPx.Str.Trim(className + " " + ASPx.CreateImportantStyleRule(this.GetStyleSheet(), cssText));
 },
 GetStyleSheet: function() {
  return ASPx.GetCurrentStyleSheet();
 },
 FilterInnerCss: function(css) {
  return css.replace(/(border|background-image)[^:]*:[^;]+/gi, "");
 },
 Update: function() {
  for(var i = 0; i < this.postfixList.length; i++) {
   var postfix = this.postfixList[i];
   var inner = postfix.length > 0;
   var element = this.GetElementByPostfix(postfix);
   if(element)
    this.ApplyStyles(element, inner);
  }
 },
 GetElementByPostfix: function(postfix) {
  return ASPx.GetElementById(this.editor.name + postfix);
 },
 ApplyStyles: function(element, inner) {
  this.ApplyFocusedStyle(element, inner);
 },
 ApplyFocusedStyle: function(element, inner) {
  if(this.HasDecoration("F"))
   this.ApplyDecoration("F", element, inner, this.editor.focused);
 },
 HasDecoration: function(key) {
  return !!this.styles[key];
 },
 ApplyDecoration: function(key, element, inner, active) {
  var value = inner ? this.innerStyles[key] : this.styles[key];
  this.RemoveDecoration(element, value);
  if(active)
   ASPx.AddClassNameToElement(element, value);
 },
 RemoveDecoration: function(element, value) {
  ASPx.RemoveClassNameFromElement(element, value);
 },
 ApplyDecorationCore: function() {
 },
 EnsureElementBorder: function(element) {
  var border = parseInt(element.border) || 0;
  element.border = 1;
  element.border = border;
 }
});
var EditorStyleDecoration = ASPx.CreateClass(FocusedStyleDecoration, {
 constructor: function(editor) {
  this.constructor.prototype.constructor.call(this, editor);
  this.lockUpdate = false;
 },
 LockUpdate: function() {
  this.lockUpdate = true;
 },
 UnlockUpdate: function() {
  this.lockUpdate = false;
 },
 IsUpdateLocked: function() {
  return this.lockUpdate;
 },
 Update: function () {
  if(this.IsUpdateLocked())
   return;
  ASPx.FocusedStyleDecoration.prototype.Update.call(this);
 },
 ApplyStyles: function (element, inner) {
  this.ApplyInvalidStyle(element, inner);
  ASPx.FocusedStyleDecoration.prototype.ApplyStyles.call(this, element, inner);
 },
 ApplyInvalidStyle: function (element, inner) {
  if(this.HasDecoration("I")) {
   var isValid = this.editor.GetIsValid();
   this.ApplyDecoration("I", element, inner, !isValid);
  }
 }
});
var TextEditorStyleDecoration = ASPx.CreateClass(EditorStyleDecoration, {
 constructor: function(editor) {
  this.constructor.prototype.constructor.call(this, editor);
  this.nullTextClassName = "";
 },
 ApplyStyles: function(element, inner) {
  ASPx.EditorStyleDecoration.prototype.ApplyStyles.call(this, element, inner);
  this.ApplyNullTextStyle(element, inner);
 },
 ApplyNullTextStyle: function(element, inner) {
  if(!this.HasDecoration("N"))
   return;
  var apply = !this.editor.focused && this.editor.CanApplyNullTextDecoration();
  this.EnsureSpellcheckAttribute(element, apply);
  this.ApplyDecoration("N", element, inner, apply);
 },
 EnsureSpellcheckAttribute: function(element, apply) {
  if(apply)
   ASPx.Attr.ChangeAttribute(element, "spellcheck", "false");
  else
   ASPx.Attr.RestoreAttribute(element, "spellcheck");
 },
 ApplyNullTextClassName: function(active) {
  var nullTextClassName = this.GetNullTextClassName();
  var editorMainElement = this.editor.GetMainElement();
  if(active)
   ASPx.AddClassNameToElement(editorMainElement, nullTextClassName);
  else
   ASPx.RemoveClassNameFromElement(editorMainElement, nullTextClassName);
 },
 GetNullTextClassName: function() {
  if (!this.nullTextClassName)
   this.InitializeNullTextClassName();
  return this.nullTextClassName;
 },
 InitializeNullTextClassName: function() {
  var nullTextStyle = this.styles["N"];
  if (nullTextStyle) {
   var nullTextStyleClassNames = nullTextStyle.split(" ");
   for (var i = 0; i < nullTextStyleClassNames.length; i++)
    if (nullTextStyleClassNames[i].match("dxeNullText"))
     this.nullTextClassName = nullTextStyleClassNames[i];
  }
 }
});
var touchUIHelperUsePointerEvents = (ASPx.Browser.Edge || ASPx.Browser.EdgeWebKit) && ASPx.Browser.MSTouchUI && !!window.PointerEvent;
var TouchUIHelper = {
 isGesture: false,
 isMouseEventFromScrolling: false,
 isNativeScrollingAllowed: true,
 clickSensetivity: 10,
 documentTouchHandlers: {},
 documentEventAttachingAllowed: true,
 msTouchDraggableClassName: "dxMSTouchDraggable",
 touchMouseDownEventName: ASPx.Browser.WebKitTouchUI ? "touchstart" : (touchUIHelperUsePointerEvents ? "pointerdown" : "mousedown"),
 touchMouseUpEventName: ASPx.Browser.WebKitTouchUI ? "touchend" : (touchUIHelperUsePointerEvents ? "pointerup" : "mouseup"),
 touchMouseMoveEventName: ASPx.Browser.WebKitTouchUI ? "touchmove" : (touchUIHelperUsePointerEvents ? "pointermove" : "mousemove"),
 startPreventingTouchMove: function() {
  if(touchUIHelperUsePointerEvents)
   ASPx.Evt.AttachEventToDocument("touchmove", ASPx.Evt.PreventEvent);
 },
 stopPreventingTouchMove: function() {
  if(touchUIHelperUsePointerEvents)
   ASPx.Evt.DetachEventFromDocument("touchmove", ASPx.Evt.PreventEvent);
 },
 isTouchEvent: function(evt) {
  if(!evt) return false;
  return ASPx.Browser.WebKitTouchUI && ASPx.IsExists(evt.changedTouches); 
 },
 isTouchEventName: function(eventName) {
  return ASPx.Browser.WebKitTouchUI && (eventName.indexOf("touch") > -1 || eventName.indexOf("gesture") > -1);
 },
 getEventX: function(evt) {
  var touchPoint = null;
  if(evt.changedTouches.length > 0)
   touchPoint = evt.changedTouches;
  else if(evt.targetTouches.length > 0)
   touchPoint = evt.targetTouches;
  return touchPoint ? touchPoint[0].pageX : 0;
 },
 getEventY: function(evt) { 
  var touchPoint = null;
  if(evt.changedTouches.length > 0)
   touchPoint = evt.changedTouches;
  else if(evt.targetTouches.length > 0)
   touchPoint = evt.targetTouches;
  return touchPoint ? touchPoint[0].pageY : 0;
 },
 getWebkitMajorVersion: function(){
  if(!this.webkitMajorVersion){
   var regExp = new RegExp("applewebkit/(\\d+)", "i");
   var matches = regExp.exec(ASPx.Browser.UserAgent);
   if(matches && matches.index >= 1)
    this.webkitMajorVersion = matches[1];
  }
  return this.webkitMajorVersion;
 },
 getIsLandscapeOrientation: function(){
  if(ASPx.Browser.MacOSMobilePlatform || ASPx.Browser.AndroidMobilePlatform)
   return Math.abs(window.orientation) == 90;
  return ASPx.GetDocumentClientWidth() > ASPx.GetDocumentClientHeight();
 },
 nativeScrollingSupported: function() {
  var allowedSafariVersion = ASPx.Browser.Version >= 5.1 && ASPx.Browser.Version < 8; 
  var webkitMajorVersion = this.getWebkitMajorVersion();
  var allowedWebKitVersion = webkitMajorVersion > 533 && webkitMajorVersion < 600;
  return (ASPx.Browser.MacOSMobilePlatform && (allowedSafariVersion || allowedWebKitVersion))
   || (ASPx.Browser.AndroidMobilePlatform && ASPx.Browser.PlaformMajorVersion >= 3) || (ASPx.Browser.MSTouchUI);
 },
 makeScrollableIfRequired: function(element, options) {
  if(ASPx.Browser.WebKitTouchUI && element) {
   var overflow = ASPx.GetCurrentStyle(element).overflow;
   if(element.tagName == "DIV" &&  overflow != "hidden" && overflow != "visible" ){
    return this.MakeScrollable(element);
   }
  }
 },
 preventScrollOnEvent: function(evt){
 },
 handleFastTapIfRequired: function(evt, action, preventCommonClickEvents) {
  if(ASPx.Browser.WebKitTouchUI && evt.type == 'touchstart' && action) {
   this.FastTapHelper.HandleFastTap(evt, action, preventCommonClickEvents);
   return true;
  }
  return false;
 },
 ensureDocumentSizesCorrect: function (){
  return (document.documentElement.clientWidth - document.documentElement.clientHeight) / (screen.width - screen.height) > 0;
 },
 ensureOrientationChanged: function(onOrientationChangedFunction){
  if(ASPxClientUtils.iOSPlatform || this.ensureDocumentSizesCorrect())
   onOrientationChangedFunction();
  else {
   window.setTimeout(function(){
    this.ensureOrientationChanged(onOrientationChangedFunction);
   }.aspxBind(this), 100);
  }
 },
 onEventAttachingToDocument: function(eventName, func){
  if(ASPx.Browser.MacOSMobilePlatform && this.isTouchEventName(eventName)) {
   if(!this.documentTouchHandlers[eventName])
    this.documentTouchHandlers[eventName] = [];
   this.documentTouchHandlers[eventName].push(func);
   return this.documentEventAttachingAllowed;
  }
  return true;
 },
 onEventDettachedFromDocument: function(eventName, func){
  if(ASPx.Browser.MacOSMobilePlatform && this.isTouchEventName(eventName)) {
   var handlers = this.documentTouchHandlers[eventName];
   if(handlers)
    ASPx.Data.ArrayRemove(handlers, func);
  }
 },
 processDocumentTouchEventHandlers: function(proc) {
  var touchEventNames = ["touchstart", "touchend", "touchmove", "gesturestart", "gestureend"];
  for(var i = 0; i < touchEventNames.length; i++) {
   var eventName = touchEventNames[i];
   var handlers = this.documentTouchHandlers[eventName];
   if(handlers) {
    for(var j = 0; j < handlers.length; j++) {
     proc(eventName,handlers[j]);
    }
   }
  }
 },
 removeDocumentTouchEventHandlers: function() {
  if(ASPx.Browser.MacOSMobilePlatform) {
   this.documentEventAttachingAllowed = false;
   this.processDocumentTouchEventHandlers(ASPx.Evt.DetachEventFromDocumentCore);
  }
 },
 restoreDocumentTouchEventHandlers: function () {
  if(ASPx.Browser.MacOSMobilePlatform) {
   this.documentEventAttachingAllowed = true;
   this.processDocumentTouchEventHandlers(ASPx.Evt.AttachEventToDocumentCore);
  }
 },
 IsNativeScrolling: function() {
  return TouchUIHelper.nativeScrollingSupported() && TouchUIHelper.isNativeScrollingAllowed;
 },
 pointerEnabled: !!(window.PointerEvent || window.MSPointerEvent),
 pointerDownEventName: window.PointerEvent ? "pointerdown" : "MSPointerDown",
 pointerUpEventName: window.PointerEvent ? "pointerup" : "MSPointerUp",
 pointerCancelEventName: window.PointerEvent ? "pointercancel" : "MSPointerCancel",
 pointerMoveEventName: window.PointerEvent ? "pointermove" : "MSPointerMove",
 pointerOverEventName: window.PointerEvent ? "pointerover" : "MSPointerOver",
 pointerOutEventName: window.PointerEvent ? "pointerout" : "MSPointerOut",
 pointerType: {
  Touch: "touch",
  Pen: "pen",
  Mouse: "mouse"
 },
 msGestureEnabled: !!(window.PointerEvent || window.MSPointerEvent) && typeof(MSGesture) != "undefined",
 msTouchCreateGesturesWrapper: function(element, onTap){
  if(!TouchUIHelper.msGestureEnabled) 
   return;
  var gesture = new MSGesture();
  gesture.target = element;
  ASPx.Evt.AttachEventToElement(element, TouchUIHelper.pointerDownEventName, function(evt){
   gesture.addPointer(evt.pointerId);
  });
  ASPx.Evt.AttachEventToElement(element, TouchUIHelper.pointerUpEventName, function(evt){
   gesture.stop();
  });
  if(onTap)
   ASPx.Evt.AttachEventToElement(element, "MSGestureTap", onTap);
  return gesture;
 },
 useLongTapHelper: function () {
  return ASPx.Browser.Safari && ASPx.Browser.TouchUI;
 },
 attachLongTapHandler: function(element, handler, onlyBubbling) {
  var timerID = -1;
  var timeout = 1000;
  var event = null;
  var preventClickEvent = false;
  var startX = -1;
  var startY = -1;
  var pixelLimit = 5;
  function onTouchMouseDown(evt) {
   abortWating();
   event = evt;
   startX = evt.pageX;
   startY = evt.pageY;
   preventClickEvent = false;
   timerID = window.setTimeout(onTimeout, timeout);
  }
  function onTouchMouseMove(evt) {
   if (!isUnderTouch())
    return;
   var shiftX = Math.abs(startX - evt.pageX),
    shiftY = Math.abs(startY - evt.pageY),
    maxShift = Math.max(shiftX, shiftY);
   if (maxShift > pixelLimit)
    abortWating();
  }
  function onTouchMouseUp(evt) {
   abortWating();
   if (preventClickEvent) {
    ASPx.Evt.PreventEventAndBubble(evt);
    preventClickEvent = false;
   }
  }
  function onTimeout() {
   handler(event);
   preventClickEvent = true;
   abortWatingInternal();
  }
  function isUnderTouch() {
   return timerID !== -1;
  }
  function abortWating() {
   if (isUnderTouch()) {
    window.clearTimeout(timerID);
    abortWatingInternal();
   }
  }
  function abortWatingInternal() {
   timerID = -1;
   event = null;
  }
  ASPx.Evt.AttachEventToElement(element, TouchUIHelper.touchMouseDownEventName, onTouchMouseDown, onlyBubbling);
  ASPx.Evt.AttachEventToElement(element, TouchUIHelper.touchMouseMoveEventName, onTouchMouseMove, onlyBubbling);
  ASPx.Evt.AttachEventToElement(element, TouchUIHelper.touchMouseUpEventName, onTouchMouseUp, onlyBubbling);
  element.style["-webkit-user-select"] = "none";
  return function () {
   ASPx.Evt.DetachEventFromElement(element, TouchUIHelper.touchMouseDownEventName, onTouchMouseDown);
   ASPx.Evt.DetachEventFromElement(element, TouchUIHelper.touchMouseMoveEventName, onTouchMouseMove);
   ASPx.Evt.DetachEventFromElement(element, TouchUIHelper.touchMouseUpEventName, onTouchMouseUp);
   element.style["-webkit-user-select"] = "";
  };
 }
};
var CacheHelper = {};
CacheHelper.GetCachedValueCore = function(obj, key, func, cacheObj, fillValueMethod) {
 if(!cacheObj)
  cacheObj = obj;
 if(!cacheObj.cache)
  cacheObj.cache = {};
 if(!key) 
  key = "default";
 fillValueMethod(obj, key, func, cacheObj);
 return cacheObj.cache[key];
};
CacheHelper.GetCachedValue = function(obj, key, func, cacheObj) {
 return CacheHelper.GetCachedValueCore(obj, key, func, cacheObj, 
  function(obj, key, func, cacheObj) {
   if(!ASPx.IsExists(cacheObj.cache[key]))
    cacheObj.cache[key] = func.apply(obj, []);
  });
};
CacheHelper.GetCachedElement = function(obj, key, func, cacheObj) {
 return CacheHelper.GetCachedValueCore(obj, key, func, cacheObj, 
  function(obj, key, func, cacheObj) {
   if(!ASPx.IsValidElement(cacheObj.cache[key]))
    cacheObj.cache[key] = func.apply(obj, []);
  });
};
CacheHelper.GetCachedElements = function(obj, key, func, cacheObj) {
 return CacheHelper.GetCachedValueCore(obj, key, func, cacheObj, 
  function(obj, key, func, cacheObj) {
   if(!ASPx.IsValidElements(cacheObj.cache[key])){
    var elements = func.apply(obj, []);
    if(!Ident.IsArray(elements))
     elements = [elements];
    cacheObj.cache[key] = elements;
   }
  });
};
CacheHelper.GetCachedElementById = function(obj, id, cacheObj) {
 return CacheHelper.GetCachedElement(obj, id, function() { return ASPx.GetElementById(id); }, cacheObj);
};
CacheHelper.GetCachedChildById = function(obj, parent, id, cacheObj) {
 return CacheHelper.GetCachedElement(obj, id, function() { return ASPx.GetChildById(parent, id); }, cacheObj);
};
CacheHelper.DropCachedValue = function(cacheObj, key) {
 cacheObj.cache[key] = null;
};  
CacheHelper.DropCache = function(cacheObj) {
 cacheObj.cache = null;
};  
var DomObserver = ASPx.CreateClass(null, {
 constructor: function() {
  this.items = { };
 },
 subscribe: function(elementID, callbackFunc) {
  var item = this.items[elementID];
  if(item)
   this.unsubscribe(elementID);
  item = {
   elementID: elementID,
   callbackFunc: callbackFunc,
   pauseCount: 0
  };
  this.prepareItem(item);
  this.items[elementID] = item;
 },
 prepareItem: function(item) {
 },
 unsubscribe: function(elementID) {
  this.items[elementID] = null;
 },
 getItemElement: function(item) {
  var element = this.getElementById(item.elementID);
  if(element)
   return element;
  this.unsubscribe(item.elementID);
  return null;
 },
 getElementById: function(elementID) {
  var element = document.getElementById(elementID);
  return element && ASPx.IsValidElement(element) ? element : null;
 },
 pause: function(element, includeSubtree) {
  this.changeItemsState(element, includeSubtree, true);
 },
 resume: function(element, includeSubtree) {
  this.changeItemsState(element, includeSubtree, false);
 },
 forEachItem: function(processFunc, context) {
  context = context || this;
  for(var itemName in this.items) {
   if(!this.items.hasOwnProperty(itemName))
    continue;
   var item = this.items[itemName];
   if(item) {
    var needBreak = processFunc.call(context, item);
    if(needBreak)
     return;
   }
  }
 },
 changeItemsState: function(element, includeSubtree, pause) {
  this.forEachItem(function(item) {
   if(!element)
    this.changeItemState(item, pause);
   else {
    var itemElement = this.getItemElement(item);
    if(itemElement && (element == itemElement || (includeSubtree && ASPx.GetIsParent(element, itemElement)))) {
     this.changeItemState(item, pause);
     if(!includeSubtree)
      return true;
    }
   }
  }.aspxBind(this));
 },
 changeItemState: function(item, pause) {
  if(pause)
   this.pauseItem(item);
  else
   this.resumeItem(item);
 },
 pauseItem: function(item) {
  item.paused = true;
  item.pauseCount++;
 },
 resumeItem: function(item) {
  if(item.pauseCount > 0) {
   if(item.pauseCount == 1)
    item.paused = false;
   item.pauseCount--;
  }
 }
});
DomObserver.IsMutationObserverAvailable = function() {
 return !!window.MutationObserver;
};
var TimerObserver = ASPx.CreateClass(DomObserver, {
 constructor: function() {
  this.constructor.prototype.constructor.call(this);
  this.timerID = -1;
  this.observationTimeout = 300;
 },
 subscribe: function(elementID, callbackFunc) {
  DomObserver.prototype.subscribe.call(this, elementID, callbackFunc);
  if(!this.isActivated())
   this.startObserving();
 },
 isActivated: function() {
  return this.timerID !== -1;
 },
 startObserving: function() {
  if(this.isActivated())
   window.clearTimeout(this.timerID);
  this.timerID = window.setTimeout(this.onTimeout, this.observationTimeout);
 },
 onTimeout: function() {
  var observer = _aspxGetDomObserver();
  observer.doObserve();
  observer.startObserving();
 },
 doObserve: function() {
  if(!ASPx.documentLoaded) return;
  this.forEachItem(function(item) {
   if(!item.paused)
    this.doObserveForItem(item);
  }.aspxBind(this));
 },
 doObserveForItem: function(item) {
  var element = this.getItemElement(item);
  if(element)
   item.callbackFunc.call(this, element);
 }
});
var MutationObserver = ASPx.CreateClass(DomObserver, {
 constructor: function() {
  this.constructor.prototype.constructor.call(this);
  this.callbackTimeout = 10;
 },
 prepareItem: function(item) {
  item.callbackTimerID = -1;
  var target = this.getElementById(item.elementID);
  if(!target)
   return;
  var observerCallbackFunc = function() {
   if(item.callbackTimerID === -1) {
    var timeoutHander = function() {
     item.callbackTimerID = -1;
     item.callbackFunc.call(this, target);
    }.aspxBind(this);
    item.callbackTimerID = window.setTimeout(timeoutHander, this.callbackTimeout);
   }
  }.aspxBind(this);
  var observer = new window.MutationObserver(observerCallbackFunc);
  var config = { attributes: true, childList: true, characterData: true, subtree: true };
  observer.observe(target, config);
  item.observer = observer;
  item.config = config;
 },
 unsubscribe: function(elementID) {
  var item = this.items[elementID];
  if(item) {
   item.observer.disconnect();
   item.observer = null;
  }
  DomObserver.prototype.unsubscribe.call(this, elementID);
 },
 pauseItem: function(item) {
  DomObserver.prototype.pauseItem.call(this, item);
  item.observer.disconnect();
 },
 resumeItem: function(item) {
  DomObserver.prototype.resumeItem.call(this, item);
  if(!item.paused) {
   var target = this.getItemElement(item);
   if(target)
    item.observer.observe(target, item.config);
  }
 }
});
var domObserver = null;
function _aspxGetDomObserver() {
 if(domObserver == null)
  domObserver = DomObserver.IsMutationObserverAvailable() ? new MutationObserver() : new TimerObserver();
 return domObserver;
}
var ControlUpdateWatcher = ASPx.CreateClass(null, {
 constructor: function() {
  this.helpers = { };
  this.clearLockerTimerID = -1;
  this.clearLockerTimerDelay = 15;
  this.postProcessing = false;
  this.init();
 },
 init: function() {
  var postHandler = aspxGetPostHandler();
  postHandler.Post.AddHandler(this.OnPost, this);
 },
 Add: function(helper) {
  this.helpers[helper.GetName()] = helper;
 },
 CanSendCallback: function(dxCallbackOwner, arg) {
  this.LockConfirmOnBeforeWindowUnload();
  var modifiedHelpers = this.FilterModifiedHelpersByDXCallbackOwner(this.GetModifiedHelpers(), dxCallbackOwner, arg);
  if(modifiedHelpers.length === 0) return true;
  var modifiedHelpersInfo = this.GetToConfirmAndToResetLists(modifiedHelpers, dxCallbackOwner.name);
  if(!modifiedHelpersInfo) return true;
  if(modifiedHelpersInfo.toConfirm.length === 0) {
   this.ResetClientChanges(modifiedHelpersInfo.toReset);
   return true;
  }
  var helper = modifiedHelpersInfo.toConfirm[0];
  if(!confirm(helper.GetConfirmUpdateText()))
   return false;
  this.ResetClientChanges(modifiedHelpersInfo.toReset);
  return true;
 },
 OnPost: function(s, e) {
  if(this.isDxCallback(e))
   return;
  this.postProcessing = true;
  this.LockConfirmOnBeforeWindowUnload();
  var modifiedHelpersInfo = this.GetModifedHelpersInfo(e);
  if(!modifiedHelpersInfo)
   return;
  if(modifiedHelpersInfo.toConfirm.length === 0) {
   this.ResetClientChanges(modifiedHelpersInfo.toReset);
   return;
  }
  var helper = modifiedHelpersInfo.toConfirm[0];
  if(!confirm(helper.GetConfirmUpdateText())) {
   e.cancel = true;
   this.finishPostProcessing();
  }
  if(!e.cancel)
   this.ResetClientChanges(modifiedHelpersInfo.toReset);
 },
 isDxCallback: function(e) {
  return e.isDXCallback || this.isInternalUploadControlCallback();
 },
 isInternalUploadControlCallback: function() {
  var isInCallback = false;
  for(var key in this.helpers) {
   if(this.helpers.hasOwnProperty(key)) {
    var helper = this.helpers[key];
    isInCallback = isInCallback || helper.isInUploadCallback();
   }
  }
  return isInCallback;
 },
 finishPostProcessing: function() {
  this.postProcessing = false;
 },
 GetModifedHelpersInfo: function(e) {
  var modifiedHelpers = this.FilterModifiedHelpers(this.GetModifiedHelpers(), e);
  if(modifiedHelpers.length === 0) return;
  return this.GetToConfirmAndToResetLists(modifiedHelpers, e && e.ownerID);
 },
 GetToConfirmAndToResetLists: function(modifiedHelpers, ownerID) {
  var resetList = [ ];
  var confirmList = [ ];
  for(var i = 0; i < modifiedHelpers.length; i++) {
   var helper = modifiedHelpers[i];
   if(!helper.GetConfirmUpdateText()) { 
    resetList.push(helper);
    continue;
   }
   if(helper.CanShowConfirm(ownerID)) { 
    resetList.push(helper);
    confirmList.push(helper);
   }
  }
  return { toConfirm: confirmList, toReset: resetList };
 },
 FilterModifiedHelpers: function(modifiedHelpers, e) {
  if(modifiedHelpers.length === 0)
   return [ ];
  if(this.RequireProcessUpdatePanelCallback(e))
   return this.FilterModifiedHelpersByUpdatePanels(modifiedHelpers);
  if(this.postProcessing)
   return this.FilterModifiedHelpersByPostback(modifiedHelpers);
  return modifiedHelpers;
 },
 FilterModifiedHelpersByDXCallbackOwner: function(modifiedHelpers, dxCallbackOwner, arg) {
  var result = [ ];
  for(var i = 0; i < modifiedHelpers.length; i++) {
   var helper = modifiedHelpers[i];
   if(helper.NeedConfirmOnCallback(dxCallbackOwner, arg))
    result.push(helper);
  }
  return result;
 },
 FilterModifiedHelpersByUpdatePanels: function(modifiedHelpers) {
  var result = [ ];
  var updatePanels = this.GetUpdatePanelsWaitedForUpdate();
  for(var i = 0; i < updatePanels.length; i++) {
   var panelID = updatePanels[i].replace(/\$/g, "_");
   var panel = ASPx.GetElementById(panelID);
   if(!panel) continue;
   for(var j = 0; j < modifiedHelpers.length; j++) {
    var helper = modifiedHelpers[j];
    if(ASPx.GetIsParent(panel, helper.GetControlMainElement()))
     result.push(helper);
   }
  }
  return result;
 },
 FilterModifiedHelpersByPostback: function(modifiedHelpers) {
  var result = [ ];
  for(var i = 0; i < modifiedHelpers.length; i++) {
   var helper = modifiedHelpers[i];
   if(helper.NeedConfirmOnPostback())
    result.push(helper);
  }
  return result;
 },
 RequireProcessUpdatePanelCallback: function(e) {
  var rManager = this.GetMSRequestManager();
  if(rManager && e && e.isMSAjaxCallback)
   return rManager._postBackSettings.async;
  return false;
 },
 GetUpdatePanelsWaitedForUpdate: function() {
  var rManager = this.GetMSRequestManager();
  if(!rManager) return [ ];
  var panelUniqueIDs = rManager._postBackSettings.panelsToUpdate || [ ];
  var panelClientIDs = [ ];
  for(var i = 0; i < panelUniqueIDs.length; i++) {
   var index = ASPx.Data.ArrayIndexOf(rManager._updatePanelIDs, panelUniqueIDs[i]);
   if(index >= 0)
    panelClientIDs.push(rManager._updatePanelClientIDs[index]);
  }
  return panelClientIDs;
 },
 GetMSRequestManager: function() {
  return ASPx.GetMSAjaxRequestManager();
 },
 GetModifiedHelpers: function() {
  var result = [ ];
  for(var key in this.helpers) { 
   if(this.helpers.hasOwnProperty(key)) {
    var helper = this.helpers[key];
    if(helper.HasChanges())
     result.push(helper);
   }
  }
  return result;
 },
 ResetClientChanges: function(modifiedHelpers) {
  for(var i = 0; i < modifiedHelpers.length; i++)
   modifiedHelpers[i].ResetClientChanges();
 },
 GetConfirmUpdateMessage: function() {
  if(this.confirmOnWindowUnloadLocked) return;
  var modifiedHelpersInfo = this.GetModifedHelpersInfo();
  if(!modifiedHelpersInfo || modifiedHelpersInfo.toConfirm.length === 0) 
   return;
  var helper = modifiedHelpersInfo.toConfirm[0];
  return helper.GetConfirmUpdateText();
 },
 LockConfirmOnBeforeWindowUnload: function() {
  this.confirmOnWindowUnloadLocked = true;
  this.clearLockerTimerID = ASPx.Timer.ClearTimer(this.clearLockerTimerID);
  this.clearLockerTimerID = window.setTimeout(function() {
   this.confirmOnWindowUnloadLocked = false;
  }.aspxBind(this), this.clearLockerTimerDelay);
 },
 OnWindowBeforeUnload: function(e) {
  var confirmMessage = this.GetConfirmUpdateMessage();
  if(confirmMessage)
   e.returnValue = confirmMessage;
  this.finishPostProcessing();
  return confirmMessage;
 },
 OnWindowUnload: function(e) {
  if(this.confirmOnWindowUnloadLocked) return;
  var modifiedHelpersInfo = this.GetModifedHelpersInfo();
  if(!modifiedHelpersInfo) return;
  this.ResetClientChanges(modifiedHelpersInfo.toReset);
 },
 OnMouseDown: function(e) {
 },
 OnFocusIn: function(e) {
 },
 PreventBeforeUnloadOnLinkClick: function(e) {
  if(ASPx.GetObjectKeys(this.helpers).length == 0)
   return;
  var link = ASPx.GetParentByTagName(ASPx.Evt.GetEventSource(e), "A");
  if(!link || link.dxgvLinkClickHanlderAssigned)
   return;
  var url = ASPx.Attr.GetAttribute(link, "href");
  if(!url || url.indexOf("javascript:") < 0)
   return;
  ASPx.Evt.AttachEventToElement(link, "click", function(ev) { return ASPx.Evt.PreventEvent(ev); });
  link.dxgvLinkClickHanlderAssigned = true;
 }
});
ControlUpdateWatcher.Instance = null;
ControlUpdateWatcher.getInstance = function () {
 if (!ControlUpdateWatcher.Instance) {
  ControlUpdateWatcher.Instance = new ControlUpdateWatcher();
  ASPx.Evt.AttachEventToElement(window, "beforeunload", function(e) {
   return ControlUpdateWatcher.Instance.OnWindowBeforeUnload(e);
  });
  ASPx.Evt.AttachEventToElement(window, "unload", function(e) {
   ControlUpdateWatcher.Instance.OnWindowUnload(e);
  });
  ASPx.Evt.AttachEventToDocument("mousedown", function(e) {
   ControlUpdateWatcher.Instance.OnMouseDown(e);
  });
  ASPx.Evt.AttachEventToDocument("focusin", function(e) {
   ControlUpdateWatcher.Instance.OnFocusIn(e);
  });
 }
 return ControlUpdateWatcher.Instance;
};
var UpdateWatcherHelper = ASPx.CreateClass(null, {
 constructor: function(owner) {
  this.owner = owner;
  this.ownerWatcher = ControlUpdateWatcher.getInstance();
  this.ownerWatcher.Add(this);
 },
 GetName: function() {
  return this.owner.name;
 },
 GetControlMainElement: function() {
  return this.owner.GetMainElement();
 },
 GetControlParentForm: function(){
  return ASPx.GetParentByTagName(this.GetControlMainElement(), "FORM");
 },
 CanShowConfirm: function(requestOwnerID) {
  return true;
 },
 HasChanges: function() {
  return false;
 },
 GetConfirmUpdateText: function() {
  return "";
 },
 NeedConfirmOnCallback: function(dxCallbackOwner) {
  return true;
 },
 NeedConfirmOnPostback: function() {
  if(ASPx.IsUploadSubmitRequest)
   return !ASPx.IsUploadSubmitRequest(this.GetControlParentForm());
  return true;
 },
 ResetClientChanges: function() {
 },
 ConfirmOnCustomControlEvent: function() {
  var confirmMessage = this.GetConfirmUpdateText();
  if(confirmMessage)
   return confirm(confirmMessage);
  return false;
 },
 isInUploadCallback: function() {
  return false;
 }
});
var ControlTabIndexManager = ASPx.CreateClass(null, {
 constructor: function() {
  this.elementsWithChangedTabIndex = {};
 },
 getChangedElementsForControlId: function(id) {
  if(!this.elementsWithChangedTabIndex[id])
   this.elementsWithChangedTabIndex[id] = [];
  return this.elementsWithChangedTabIndex[id];
 },
 isElementWithChangedIndex: function(element) {
  for(var key in this.elementsWithChangedTabIndex)
   if(this.elementsWithChangedTabIndex.hasOwnProperty(key))
    if(this.elementsWithChangedTabIndex[key].indexOf(element) !== -1)
     return true;
  return false;
 },
 changeTabIndexAttribute: function(element, id) {
  var elements = this.getChangedElementsForControlId(id);
  ASPx.Attr.ChangeTabIndexAttribute(element);
  if(elements.indexOf(element) === -1)
   elements.push(element);
 },
 restoreTabIndexAttribute: function(element, id) {
  var elements = this.getChangedElementsForControlId(id),
   index = elements.indexOf(element);
  if(index !== -1) {
   elements.splice(index, 1);
   if(!this.isElementWithChangedIndex(element))
    ASPx.Attr.RestoreTabIndexAttribute(element);
  }
 }
});
ControlTabIndexManager.Instance = null;
ControlTabIndexManager.getInstance = function() {
 if(!ControlTabIndexManager.Instance)
  ControlTabIndexManager.Instance = new ControlTabIndexManager();
 return ControlTabIndexManager.Instance;
};
var ControlCallbackHandlersQueue = ASPx.CreateClass(null, {
 constructor: function (owner) {
  this.owner = owner;
  this.handlerInfos = [];
 },
 addCallbackHandler: function(handlerInfo) {
  this.handlerInfos.push(handlerInfo);
 },
 executeCallbacksHandlers: function() {
  for(var i = 0, handlerInfo; handlerInfo = this.handlerInfos[i]; i++)
   handlerInfo.handler.call(this.owner, handlerInfo.result);
  this.handlerInfos = [];
 }
});
var ControlCallbackQueueHelper = ASPx.CreateClass(null, {
 constructor: function (owner) {
  this.owner = owner;
  this.pendingCallbacks = [];
  this.receivedCallbacks = [];
  this.attachEvents();
 },
 showLoadingElements: function () {
  this.owner.ShowLoadingDiv();
  if (this.owner.IsCallbackAnimationEnabled())
   this.owner.StartBeginCallbackAnimation();
  else
   this.owner.ShowLoadingElementsInternal();
 },
 attachEvents: function () {
  this.owner.EndCallback.AddHandler(this.onEndCallback.aspxBind(this));
  this.owner.CallbackError.AddHandler(this.onCallbackError.aspxBind(this));
 },
 detachEvents: function () {
  this.owner.EndCallback.RemoveHandler(this.onEndCallback);
  this.owner.CallbackError.RemoveHandler(this.onCallbackError);
 },
 onCallbackError: function (owner, result) {
  this.sendErrorToChildControl(result);
 },
 ignoreDuplicates: function () {
  return true;
 },
 hasDuplicate: function (arg) {
  for (var i in this.pendingCallbacks) {
   if (this.pendingCallbacks[i].arg == arg && this.pendingCallbacks[i].state != ASPx.callbackState.aborted)
    return true;
  }
  return false;
 },
 getToken: function (halperContext, callbackInfo) {
  return {
   cancel: function () {
    if (callbackInfo.state == ASPx.callbackState.sent) {
     callbackInfo.state = ASPx.callbackState.aborted;
     halperContext.sendNext();
    }
    if (callbackInfo.state == ASPx.callbackState.inTurn)
     ASPx.Data.ArrayRemove(halperContext.pendingCallbacks, callbackInfo);
   },
   callbackId: -1
  };
 },
 sendCallback: function (arg, handlerContext, handler, commandName, onBeforeSend) {
  if (this.ignoreDuplicates() && this.hasDuplicate(arg))
   return false;
  var handlerContext = handlerContext || this.owner;
  var callbackInfo = {
   arg: arg,
   handlerContext: handlerContext,
   handler: handler || handlerContext.OnCallback,
   state: ASPx.callbackState.inTurn,
   callbackId: -1,
   onBeforeSend: onBeforeSend
  };
  this.pendingCallbacks.push(callbackInfo);
  if (!this.hasActiveCallback()) {
   this.createCallbackByCallbackInfo(callbackInfo, commandName);
  }
  return this.getToken(this, callbackInfo);
 },
 hasActiveCallback: function () {
  return this.getCallbacksInfoByState(ASPx.callbackState.sent).length > 0;
 },
 sendNext: function () {
  var nextCallbackInfo = this.getCallbacksInfoByState(ASPx.callbackState.inTurn)[0];
  if (nextCallbackInfo) {
   this.createCallbackByCallbackInfo(nextCallbackInfo);
   return nextCallbackInfo.callbackId;
  }
 },
 createCallbackByCallbackInfo: function(callbackInfo, commandName) {
  if(callbackInfo.onBeforeSend)
   callbackInfo.onBeforeSend();
  callbackInfo.callbackId = this.owner.CreateCallback(callbackInfo.arg, commandName);
  callbackInfo.state = ASPx.callbackState.sent;
 },
 onEndCallback: function () {
  if (!this.owner.isErrorOnCallback && this.hasPendingCallbacks()) {
   var curCallbackId;
   var curCallbackInfo;
   var handlerContext;
   for (var i in this.receivedCallbacks) {
    if(this.receivedCallbacks.hasOwnProperty(i)) {
     curCallbackId = this.receivedCallbacks[i];
     curCallbackInfo = this.getCallbackInfoById(curCallbackId);
     if (curCallbackInfo.state != ASPx.callbackState.aborted) {
      handlerContext = curCallbackInfo.handlerContext;
      if (handlerContext.OnEndCallback)
       handlerContext.OnEndCallback();
      this.sendNext();
     }
     ASPx.Data.ArrayRemove(this.pendingCallbacks, curCallbackInfo);
    }
   }
   ASPx.Data.ArrayClear(this.receivedCallbacks);
  }
 },
 hasPendingCallbacks: function () {
  return this.pendingCallbacks && this.pendingCallbacks.length && this.pendingCallbacks.length > 0;
 },
 processCallback: function (result, callbackId) {
  this.receivedCallbacks.push(callbackId);
  if (this.hasPendingCallbacks()) {
   var callbackInfo = this.getCallbackInfoById(callbackId);
   if (callbackInfo.state != ASPx.callbackState.aborted)
    callbackInfo.handler.call(callbackInfo.handlerContext, result);
  }
 },
 getCallbackInfoById: function (id) {
  for (var i in this.pendingCallbacks) {
   if (this.pendingCallbacks[i].callbackId == id)
    return this.pendingCallbacks[i];
  }
 },
 getCallbacksInfoByState: function (state) {
  var result = [];
  for (var i in this.pendingCallbacks) {
   if (this.pendingCallbacks[i].state == state)
    result.push(this.pendingCallbacks[i]);
  }
  return result;
 },
 sendErrorToChildControl: function (callbackObj) {
  if (!this.hasPendingCallbacks())
   return;
  var callbackInfo = this.getCallbackInfoById(callbackObj.callbackId || 0);
  if (!callbackInfo)
   return;
  var hasChildControlHandler = (callbackInfo.handlerContext != this.owner) && callbackInfo.handlerContext.OnCallbackError;
  if (hasChildControlHandler)
   callbackInfo.handlerContext.OnCallbackError.call(callbackInfo.handlerContext, callbackObj.message, callbackObj.data);
 }
});
var AccessibilityHelperBase = ASPx.CreateClass(null, {
 constructor: function(control) {
  this.control = control;
  this.timerID = -1;
  this.pronounceMessageTimeout = 500;
  this.activeItem = this.getItems()[0];
  this.pronounceIsStarted = false;
 },
 PronounceMessage: function(text, activeItemArgs, inactiveItemArgs, mainElementArgs, ownerMainElement) {   
  this.timerID = ASPx.Timer.ClearTimer(this.timerID);
  this.pronounceIsStarted = true;
  this.timerID = window.setTimeout(function() {
   this.PronounceMessageCore(text, activeItemArgs, inactiveItemArgs, mainElementArgs, ownerMainElement);
  }.aspxBind(this), this.getPronounceTimeout());
 },
 PronounceMessageCore: function(text, activeItemArgs, inactiveItemArgs, mainElementArgs, ownerMainElement) {
  if(!this.getItems())
   return;
  this.toogleItem();
  var mainElement = this.getMainElement();
  var activeItem = this.getItem(true);
  var inactiveItem = this.getItem();
  if(ASPx.Attr.GetAttribute(mainElement, "role") != "application")
   mainElementArgs = this.addArguments(mainElementArgs, { "aria-activedescendant" : activeItem.id });
  var messageAttrObj = {};
  var activeItemRole = ASPx.Attr.GetAttribute(activeItem, "role");
  var attrName = activeItemRole == "combobox" ? "aria-label" : "innerHtml";
  messageAttrObj[attrName] = ASPx.Str.EncodeHtml(text);
  activeItemArgs = this.addArguments(activeItemArgs, messageAttrObj);
  messageAttrObj[attrName] = "";
  inactiveItemArgs = this.addArguments(inactiveItemArgs, messageAttrObj);
  var errorTextElement = null;
  if(this.control.GetErrorCell()) {
   errorTextElement = this.getAriaExplanatoryTextManager().GetErrorTextElement();
   activeItemArgs = this.addArguments(activeItemArgs,   {"aria-invalid"  : !this.control.isValid ? "true" : "" });
   mainElementArgs = this.addArguments(mainElementArgs, { "aria-invalid" : "" });
   inactiveItemArgs = this.addArguments(inactiveItemArgs,  { "aria-invalid" : "" });
  }
  this.changeActivityAttributes(activeItem, activeItemArgs);
  if(errorTextElement) {
   this.getAriaExplanatoryTextManager().SetOrRemoveText([activeItem], errorTextElement, !this.control.isValid, false, true);
   this.getAriaExplanatoryTextManager().SetOrRemoveText([mainElement, inactiveItem], errorTextElement, false, false, false);
  }
  this.changeActivityAttributes(mainElement, mainElementArgs);
  if(!!ownerMainElement && ASPx.Attr.GetAttribute(ownerMainElement, "role") != "application")
   this.changeActivityAttributes(ownerMainElement, { "aria-activedescendant": activeItem.id });
  this.changeActivityAttributes(inactiveItem, inactiveItemArgs);
  this.pronounceIsStarted = false;
 },
 GetActiveElement: function(inputIsMainElement) {
  if(this.pronounceIsStarted) return null;
  var mainElement = inputIsMainElement ? this.control.GetInputElement() : this.getMainElement();
  var activeElementId = ASPx.Attr.GetAttribute(mainElement, 'aria-activedescendant');
  return activeElementId ? ASPx.GetElementById(activeElementId) : mainElement;
 },
 getMainElement: function() {
  if(!ASPx.IsExistsElement(this.mainElement))
   this.mainElement = this.control.GetAccessibilityAssistantElement();
  return this.mainElement;
 },
 getItems: function() {
  if(!ASPx.IsExistsElement(this.items))
   this.items = ASPx.GetChildElementNodes(this.getMainElement());
  return this.items;
 },
 getItem: function(isActive) {
  if(isActive)
   return this.activeItem;
  var items = this.getItems();
  return items[0] === this.activeItem ? items[1] : items[0];
 },
 getAriaExplanatoryTextManager: function() { return this.control.ariaExplanatoryTextManager; },
 getPronounceTimeout: function() { return this.pronounceMessageTimeout; },
 toogleItem: function() {
  this.activeItem = this.getItem();
 },
 addArguments: function(targetArgs, newArgs) {
  if(!targetArgs) targetArgs = { };
  for(var key in newArgs) {
   if(newArgs.hasOwnProperty(key) && !targetArgs.hasOwnProperty(key))
    targetArgs[key] = newArgs[key];
  }
  return targetArgs;
 },
 changeActivityAttributes: function(element, args) {
  if(!element)
   return;
  for(var key in args) {
   if(args.hasOwnProperty(key)) {
    var value = args[key];
    if(key == "innerHtml")
     ASPx.SetInnerHtml(element, value);
    else {
     var action = value !== "" ? ASPx.Attr.SetAttribute : ASPx.Attr.RemoveAttribute;
     action(element, key, value);
    }
   }
  }
 }
});
var AccessibilityPronouncer = ASPx.CreateClass(null, {
 constructor: function() {
  this.pronouncerId = "dxPronouncer";
  this.initialized = false;
  this.focusableMessageElement = null;
  this.messageElement = null;
  this.pronouncers = {
   live: new AccessibilityLivePronouncer(this),
   descendant: new AccessibilityDescendantPronouncer(this)
  };
 },
 Pronounce: function(args, type) {
  this.pronouncers[type].Pronounce(args);
 },
 EnsureInitialize: function() {
  if(!this.initialized)
   this.initialize();
 },
 RemoveState: function() {
  for(var pronouncer in this.pronouncers)
   if(this.pronouncers.hasOwnProperty(pronouncer))
    pronouncer.RemoveState();
 },
 RestoreControlState: function(type, mainElement) {
  this.pronouncers[type].RestoreControlState(mainElement);
 },
 RestoreElementsState: function(type, elements) {
  this.pronouncers[type].RestoreElementsState(elements);
 },
 RestoreElementState: function(type, element) {
  this.pronouncers[type].RestoreElementState(element);
 },
 initialize: function() {
  this.createFocusableMessageElement();
  this.createMessageElement();
  this.prepareFocusableMessageElement();
  this.setAttributesForKeyboardNavigation();
  this.initialized = true;
 },
 createFocusableMessageElement: function() {
  var focusableMessageElement = document.createElement("DIV");
  document.body.appendChild(focusableMessageElement);
  this.focusableMessageElement = focusableMessageElement;   
 },
 prepareFocusableMessageElement: function() {
  this.focusableMessageElement.className = "dxAIFME";
 },
 setAttributesForKeyboardNavigation: function() {
  ASPx.Attr.Aria.SetApplicationRole(this.focusableMessageElement);
  ASPx.Attr.Aria.SetSilence(this.focusableMessageElement);
 },
 createMessageElement: function() {
  var messageElement = document.createElement("DIV");
  messageElement.id = this.pronouncerId;
  ASPx.Attr.SetAttribute(messageElement, "role", "note");
  this.focusableMessageElement.appendChild(messageElement);
  this.messageElement = messageElement;
 },
 getMessage: function(messagePartsArg) {
  var messageParts = messagePartsArg.filter(function(x) { return ASPx.IsExists(x); });
  return messageParts.join(", ");
 }
});
var AccessibilityPronouncerBase = ASPx.CreateClass(null, {
 constructor: function() {
  this.state = { };
 },
 Pronounce: function(args) {
  var messageElement = this.getMessageElement();
  ASPx.Attr.Aria.SetOrRemoveLabel(messageElement);
  ASPx.SetInnerHtml(messageElement, "");
  this.PronounceCore(args);
 },
 PronounceCore: function(args) { },
 SaveElementState: function(element) { 
  if(this.state[element.id])
   return;
  this.state[element.id] = {
   element: element,
   descendant: ASPx.Attr.GetAttribute(element, ASPx.Attr.Aria.descendant)
  };
 },
 RemoveState: function() {
  this.state = { };
 },
 RestoreControlState: function(mainElement) { 
  for(var elementInfo in this.state) {
   if(this.state.hasOwnProperty(elementInfo)) {
    var element = this.state[elementInfo].element;
    if(!mainElement || ASPx.GetIsParent(mainElement, element))
     this.RestoreElementState(element);
   }
  }
 },
 RestoreElementsState: function(elements) { 
  for(var i = 0; i < elements.length; i++)
   this.RestoreElementState(elements[i]);
 },
 RestoreElementState: function(element) {
  var elementState = this.state[element.id];
  if(!elementState)
   return;
  ASPx.Attr.Aria.SetOrRemoveDescendant(element, elementState.descendant);
  delete this.state[element.id];
 },
 getMessage: function(args) {
  return ASPx.AccessibilityPronouncer.getMessage(args.messageParts);
 },
 getMessageElement: function() {
  return ASPx.AccessibilityPronouncer.messageElement;
 },
 getFocusableMessageElement: function() {
   return ASPx.AccessibilityPronouncer.focusableMessageElement;
 }
});
var AccessibilityLivePronouncer = ASPx.CreateClass(AccessibilityPronouncerBase, {
 constructor: function() {
  this.constructor.prototype.constructor.call(this);
 },
 PronounceCore: function(args) {
  var message = this.getMessage(args);
  var messageElement = this.getMessageElement();
  ASPx.Attr.SetAttribute(this.getFocusableMessageElement(), "aria-live", "assertive");
  ASPx.Attr.Aria.SetAtomic(this.getFocusableMessageElement(), "true");
  ASPx.SetInnerHtml(messageElement, ASPx.Str.EncodeHtml(message));
 }
});
var AccessibilityDescendantPronouncer = ASPx.CreateClass(AccessibilityPronouncerBase, {
 constructor: function() {
  this.constructor.prototype.constructor.call(this);
 },
 PronounceCore: function(args) {
  var message = this.getMessage(args);
  var activeElement = ASPx.GetActiveElement();
  var messageElement = this.getMessageElement();
  this.SaveElementState(activeElement);
  ASPx.Attr.RemoveAttribute(this.getFocusableMessageElement(), "aria-live");
  ASPx.Attr.RemoveAttribute(this.getFocusableMessageElement(), "aria-atomic");
  ASPx.Attr.Aria.SetOrRemoveLabel(messageElement, message);
  ASPx.Attr.Aria.SetOrRemoveDescendant(activeElement, messageElement.id);
 }
});
ASPx.AccessibilityPronouncerType = {
 live: "live",
 descendant: "descendant"
};
ASPx.AccessibilityPronouncer = new AccessibilityPronouncer();
var RestoreFocusHelper = ASPx.CreateClass(null, {
 constructor: function() {
  this.excludedIDs = [ "DXCBtn" ]; 
  this.pronouncerType = ASPx.AccessibilityPronouncerType.live;
  this.callbackQueue = [];
  this.Initialize();
 },
 Initialize: function() {
  var that = this;
  ASPx.attachToLoad(function() {
   ASPxClientControl.GetControlCollection().BeginCallback.AddHandler(that.OnBeginCallback, that);
   ASPxClientControl.GetControlCollection().EndCallback.AddHandler(that.OnEndCallback, that);
  });
 },
 OnBeginCallback: function(s, e) {
  var control = e.control;
  if(!control.allowRestoreFocusOnCallbacks())
   return;
  control.accessibilityFocusTreeLine = this.getFocusTreeLine(control);
  var controlHasCallbackTreeLine = this.callbackQueueContainsTreeLine(control);
  this.pushTreeLineInfoIntoCallbackQueue(control);
  if(control.accessibilityFocusTreeLine && !controlHasCallbackTreeLine)
   control.SendMessageToAssistiveTechnology(this.getDefaultCallbackMessage());
 },
 OnEndCallback: function(s, e) {
  var control = e.control;
  if(!control.allowRestoreFocusOnCallbacks())
   return;
  var treeLineInfo = this.shiftTreeLineInfoFromCallbackQueue(control);
  if(treeLineInfo.queueLength == 0) {
   if(!control.accessibilityFocusTreeLine && treeLineInfo.treeLine)
    control.accessibilityFocusTreeLine = treeLineInfo.treeLine;
   var focusElement = this.findFocusElement(control);
   var focusIsManagerByPopupwindow = this.isFocusManagedByActivePopupWindow(focusElement);
   var focusIsManagedByControl = control.shouldPreventFocusRestoringOnCallback && control.shouldPreventFocusRestoringOnCallback();
   if(!focusIsManagerByPopupwindow && !focusIsManagedByControl)
    ASPx.AccessibilityUtils.SetFocusAccessible(focusElement);
   delete control.accessibilityFocusTreeLine;
  }
 },
 pushTreeLineInfoIntoCallbackQueue: function(control) {
  var controlTreeLine = control.accessibilityFocusTreeLine ? control.accessibilityFocusTreeLine.slice(0) : null;
  if(!this.callbackQueue[control.name])
   this.callbackQueue[control.name] = [];
  this.callbackQueue[control.name].push(controlTreeLine);
 },
 shiftTreeLineInfoFromCallbackQueue: function(control) {
  var treeLineInfo = { queueLength: 0, treeLine: null };
  var treeLines = this.callbackQueue[control.name];
  if(treeLines && treeLines.length > 0) {
   treeLineInfo.treeLine = treeLines.shift();
   var linesCount = treeLines.length;
   treeLineInfo.queueLength = linesCount;
   if(linesCount > 0 && !treeLines[0] && treeLineInfo.treeLine)
    treeLines[0] = treeLineInfo.treeLine.slice(0);
  }
  return treeLineInfo;
 },
 callbackQueueContainsTreeLine: function(control) {
  var treeLines = this.callbackQueue[control.name];
  if(!treeLines || treeLines.length == 0) 
   return false;
  if(treeLines[treeLines.length - 1])
   return true;
  return false;
 },
 getDefaultCallbackMessage: function() {
  return ASPx.AccessibilitySR.DefaultCallbackMessage;
 },
 isFocusManagedByActivePopupWindow: function(focusElement) {
  var popupControl = this.getActivePopupControl();
  if(!popupControl || popupControl.accessibleFocusElement)
   return false;
  this.initializePopupAccessibleFocusElement(popupControl, focusElement);
  return popupControl.setFocusOnCallback;
 },
 getActivePopupControl: function() {
  var activePopupWindow = ASPx.GetPopupControlCollection && ASPx.GetPopupControlCollection().GetCurrentActiveWindowElement();
  if(!activePopupWindow)
   return null;
  var popupInfo = ASPx.GetPopupControlCollection().GetPopupWindowFromID(activePopupWindow.id);
  return popupInfo.popupControl;
 },
 initializePopupAccessibleFocusElement: function(popupControl, focusElement) {
  if(popupControl.setFocusOnCallback)
   popupControl.accessibleFocusElement = focusElement;
  else {
   var parentControl = popupControl.GetParentControl();
   if(parentControl && parentControl.GetMainElement())
    popupControl.accessibleFocusElement = ASPx.FindFirstChildActionElement(parentControl.GetMainElement());
  }
 },
 getFocusTreeLine: function(control) {
  var element = ASPx.GetActiveElement();
  if(!ASPx.IsExistsElement(element))
   return null;
  var mainElement = control.GetMainElement();
  if(!ASPx.GetIsParent(mainElement, element)) {
   var treeInfo = this.findFocusedControlElement(mainElement, element);
   element = treeInfo.focusElement;
   mainElement = treeInfo.rootElement;
  }
  return this.getTreeLineCore(mainElement, element);
 },
 getTreeLineCore: function(mainElement, element) {
  if(!element) return null;
  treeLine = [ ];
  while(element) {
   treeLine.push({ 
    id: element.id,
    tagName: element.tagName,
    index: ASPx.Data.ArrayIndexOf(element.parentNode.childNodes, element)
   });
   if(element === mainElement || element === document.body)
    break;
   element = element.parentNode;
  }
  return treeLine;
 },
 findFocusedControlElement: function(mainElement, activeElement) {
  var element = null;
  var parentElement = mainElement;
  var focusedEditor = ASPx.IsExists(ASPx.GetFocusedEditor) ? ASPx.GetFocusedEditor() : null;
  if(focusedEditor && ASPx.GetIsParent(mainElement, focusedEditor.GetMainElement()))
   element = focusedEditor.GetFocusableInputElement();
  else {
   if(mainElement && activeElement) {
    var mainControl = ASPx.GetClientControlByElementID(mainElement.id);
    var parentControls = ASPx.GetParentClientControls(activeElement.id);
    for(var i = parentControls.length - 1; i > -1; i--) {   
     if(mainControl.name == parentControls[i].name) {
      element = activeElement;
      var rootIndex = i > 0 ? i - 1 : i;
      parentElement = parentControls[rootIndex].GetMainElement();
      if(!parentElement && parentControls[rootIndex].GetCurrentWindowElement)
       parentElement = parentControls[rootIndex].GetCurrentWindowElement();
      break;
     }
    }
   }
  }
  return { focusElement: element, rootElement: parentElement }; 
 },
 findFocusElement: function(control) {
  if(!control.accessibilityFocusTreeLine)
   return;
  var treeLine = control.accessibilityFocusTreeLine.slice(0);
  var focusElementParent = this.findFocusElementParentById(treeLine);
  if(!focusElementParent) 
   return;
  return this.findFocusElementFromDOMTree(treeLine, focusElementParent);
 },
 findFocusElementParentById: function(treeLine) {
  for(var i = 0; i < treeLine.length; i++) {
   var id = treeLine[i].id;
   if(!this.isValidId(id))
    continue;
   var element = document.getElementById(id);
   if(element) {
    treeLine.splice(i, treeLine.length - i);
    treeLine.reverse();
    return element;
   }
  }
  return null;
 },
 findFocusElementFromDOMTree: function(treeLine, focusElementParent) {
  var element = focusElementParent;
  for(var i = 0; i < treeLine.length; i++) {
   var info = treeLine[i];
   if(info.index >= element.childNodes.length) {
    element = element.childNodes.length > 0 ? element.childNodes[element.childNodes.length - 1] : null;
    return this.findNeighbourFocusElement(element, focusElementParent);
   }
   var child = element.childNodes[info.index];
   if(child.tagName !== info.tagName)
    return this.findNeighbourFocusElement(child, focusElementParent);
   element = child;
  }
  return element;
 },
 findNeighbourFocusElement: function(element, focusElementParent) {
  ASPx.ActionElementsCache.BeginUsage();
  var result = this.findNeighbourFocusElementCore(element, focusElementParent);
  ASPx.ActionElementsCache.EndUsage();
  return result;
 },
 findNeighbourFocusElementCore: function(element, focusElementParent) {
  if(!element || !element.parentNode) return null;
  var neighbours = element.parentNode.childNodes;
  var indices = this.calcLeftRightIndices(ASPx.Data.ArrayIndexOf(neighbours, element), neighbours.length);
  for(var i = 0; i < indices.length; i++) {
   var index = indices[i];
   var actionElement = ASPx.FindFirstChildActionElement(neighbours[index]);
   if(actionElement)
    return actionElement;
  }
  if(element === focusElementParent)
   return null;
  return this.findNeighbourFocusElement(element.parentNode, focusElementParent);
 },
 calcLeftRightIndices: function(startIndex, count) {
  var indices = [ ];
  var incSides = [ 0, 0 ];
  var index = startIndex;
  for(var i = 0; i < count; i++) {
   indices.push(index);
   var even = i % 2 === 0;
   var nextIndex = this.calcNextIndex(startIndex, count, incSides, even);
   if(nextIndex < 0)
    nextIndex = this.calcNextIndex(startIndex, count, incSides, !even);
   index = nextIndex;
  }
  return indices;
 },
 calcNextIndex: function(startIndex, count, incSides, even) {
  var sideIndex = even ? 0 : 1;
  var inc = incSides[sideIndex];
  inc += even ? -1 : 1;
  var nextIndex = startIndex + inc;
  if(nextIndex >= 0 && nextIndex < count) {
   incSides[sideIndex] = inc;
   return nextIndex;
  }
  return -1;
 },
 isValidId: function(id) {
  return id && !this.isExcludedId(id);
 },
 isExcludedId: function(id) {
  var result = false;
  for(var i = 0; i < this.excludedIDs.length; i++) {
   if(id.indexOf(this.excludedIDs[i]) > -1) {
    result = true;
    break;
   }
  }
  return result;
 }
});
var EventStorage = ASPx.CreateClass(null, {
 constructor: function() {
  this.bag = { };
 },
 Save: function(e, data, overwrite) {
  var key = this.getEventKey(e);
  if(this.bag.hasOwnProperty(key) && !overwrite)
   return;
  this.bag[key] = data;
  window.setTimeout(function() { delete this.bag[key]; }.aspxBind(this), 100);
 },
 Load: function(e) {
  var key = this.getEventKey(e);
  return this.bag[key];
 },
 getEventKey: function(e) {
  if(ASPx.IsExists(e.timeStamp))
   return e.timeStamp.toString();
  var eventSource = ASPx.Evt.GetEventSource(e);
  var type = e.type.toString();
  return eventSource ? type + "_" + eventSource.uniqueID.toString() : type;
 }
});
ASPx.RestoreFocusHelper = new RestoreFocusHelper();
EventStorage.Instance = null;
EventStorage.getInstance = function() {
 if(!EventStorage.Instance)
  EventStorage.Instance = new EventStorage();
 return EventStorage.Instance;
};
var GetGlobalObject = function(objectName) {
 var fields = objectName.split('.');
 var obj = window[fields[0]];
 for(var i = 1; obj && i < fields.length; i++) {
  obj = obj[fields[i]];
 }
 return obj;
};
var GetExternalScriptProcessor = function() {
 return ASPx.ExternalScriptProcessor ? ASPx.ExternalScriptProcessor.getInstance() : null;
};
var SAVED_WIDTH_ATTR = "data-dx-ripple-saved-width";
var RIPPLE_FIXED_ROW_ATTR = "data-dx-ripple-locked";
var READ_ONLY_COMBOBOX_MARKER_CSS_CLASS = "dxICBReadonlyMarker";
var ThemesWithRipple = ['Material'];
var RippleHelper = {
 rippleTargetClassName: "dxRippleTarget",
 rippleTargetExternalClassName: "dxRippleTargetExternal",
 rippleContainerClassName: "dxRippleContainer",
 rippleClassName: "dxRipple",
 touchRadius: -1,
 isMobileExternalRipple: null,
 zoom: 1,
 Init: function() {
  if(this.getIsRippleFunctionalityEnabled()) {
   setTimeout(function() {
    this.calcTouchRadius();
   }.aspxBind(this), 0);
  }
 },
 calcTouchRadius: function() {
  var testBlock = document.createElement("DIV");
  ASPx.SetStyles(testBlock, {
   height: "1in",
   width: "1in",
   left: "-100%",
   top: "-100%",
   position: "absolute"
  });
  document.body.appendChild(testBlock);
  this.touchRadius = (1.8 / 2.54) * Math.max(testBlock.offsetWidth, testBlock.offsetHeight);
  document.body.removeChild(testBlock);
 },
 isRippleFunctionalityEnabled: null,
 checkRippleFunctionality: function() {
  if(ASPx.Browser.Safari && ASPx.Browser.Version <= 5.1)
   return false;
  for(var i = 0; i < ThemesWithRipple.length; i++) {
   var firstRippleThemeElement = document.querySelector("[class*='_" + ThemesWithRipple[i] + "']");
   if(firstRippleThemeElement)
    return true;
  }  
  return false;
 },
 ReInit: function() {
  this.isRippleFunctionalityEnabled = null;
  this.Init();
 },
 onDocumentMouseDown: function(evt) {
  if(RippleHelper.getIsRippleFunctionalityEnabled())
   RippleHelper.processMouseDown(evt);
 },
 getIsRippleFunctionalityEnabled: function() {
  if(!ASPx.IsExists(this.isRippleFunctionalityEnabled))
   this.isRippleFunctionalityEnabled = this.checkRippleFunctionality();
  return this.isRippleFunctionalityEnabled;
 },
   createTargetInfo: function(target) {
  return { 
   x: ASPx.GetAbsoluteX(target),
   y: ASPx.GetAbsoluteY(target),
   width: target.offsetWidth,
   height: target.offsetHeight,
   classNames: ASPx.GetClassNameList(target),
   getTarget: function() { return target; },
   getRect: function() { return {x: this.x, y: this.y, width: this.width, height: this.height }; }
  };
 },
 createEventInfo: function(evt) {
  return { x: this.getEventX(evt), y: this.getEventY(evt) };
 },
 processMouseDown: function(evt) {
  var evtSource = ASPx.Evt.GetEventSource(evt);
  var rippleTarget = this.getRippleTargetElement(evtSource);
  if(this.needToProcessRipple(rippleTarget, evtSource))
   this.processRipple(this.createTargetInfo(rippleTarget), this.createEventInfo(evt));
 },
 getRippleTargetElement: function(evtSource) {
  if(this.hasRippleMarker(evtSource))
   return evtSource;
  if(evtSource.tagName && evtSource.tagName.toLowerCase() == "input" && ASPx.ElementContainsCssClass(evtSource, "dxTI")) {
   var elements = ASPx.GetChildElementNodesByPredicate(evtSource.parentNode.parentNode, function(element) {
    return this.hasRippleMarker(element);
   }.aspxBind(this));
   return elements && elements[0];
  }
  return ASPx.GetParent(evtSource, function(element) {
   return this.hasRippleMarker(element);
  }.aspxBind(this));
 },
 hasRippleMarker: function(element) {
  if(!ASPx.IsExistsElement(element))
   return false;
  var computedStyles = window.getComputedStyle(element, ":before");
  if(ASPx.IsExists(computedStyles)) {
   var content = computedStyles.getPropertyValue("content");
   if(content.indexOf(this.rippleTargetExternalClassName) > -1) {
    ASPx.AddClassNameToElement(element, this.rippleTargetExternalClassName);
    return true;
   }
   return content.indexOf(this.rippleTargetClassName) > -1;
  }
  return false;
 },
 needToProcessRipple: function(rippleTarget, evtSource) {
  if(!rippleTarget || !ASPx.AnimationUtils)
   return false;
  var isClearButton = ASPx.ElementContainsCssClass(rippleTarget, "dxeButton") && rippleTarget.id && rippleTarget.id.indexOf("B-100") !== -1;
  var isEmptyCalendarDay = ASPx.ElementContainsCssClass(rippleTarget, "dxeCalendarDay") && ASPx.Str.Trim(rippleTarget.textContent) == "";
  var isReadonly = ASPx.ElementContainsCssClass(rippleTarget, READ_ONLY_COMBOBOX_MARKER_CSS_CLASS);
  var tempFixDisable = ASPx.ElementContainsCssClass(rippleTarget, "dxSwitcher") && ASPx.Browser.MacOSMobilePlatform;
  var rippleIsForbidden = isReadonly || isClearButton || isEmptyCalendarDay || ASPx.GetParentByPartialClassName(rippleTarget, "Disabled") ||
   ASPx.ElementContainsCssClass(rippleTarget, "dxgvBatchEditCell") || ASPx.ElementContainsCssClass(rippleTarget, "dxcvEditForm") ||
   ASPx.GetParentByPartialClassName(evtSource, "dxcvFocusedCell") || tempFixDisable;
  return !rippleIsForbidden;
 },
 hasBothOverflow: function(style) {
  return style.overflow == "scroll" || style.overflow == "auto" || style.overflow == "hidden";
 },
 hasOverflowX: function(style) {
  return style.overflowX == "scroll" || style.overflowX == "auto" || style.overflowX == "hidden";
 },
 hasOverflowY: function(style) {
  return style.overflowY == "scroll" || style.overflowY == "auto" || style.overflowY == "hidden";
 },
 getExternalRippleContainerSize: function(targetRect) {
  if(ASPx.Browser.MobileUI) {
   var origTouchRadius = this.getOriginTouchRadius();
   if(origTouchRadius < targetRect.width || origTouchRadius < targetRect.height)
    origTouchRadius = Math.max(targetRect.width, targetRect.height);
   return {x: targetRect.x + (targetRect.width - origTouchRadius) / 2, y: targetRect.y + (targetRect.height - origTouchRadius) / 2, width: origTouchRadius, height: origTouchRadius };
  }
  var result = { x: 0, y: 0, width: 0, height: 0 };
  var diff = targetRect.width - targetRect.height;
  if(diff > 0) {
   result.x = targetRect.x;
   result.y = targetRect.y - diff / 2;
   result.width = targetRect.width;
   result.height = targetRect.width;
  } else {
   result.x = targetRect.x + diff / 2;
   result.y = targetRect.y;
   result.width = targetRect.height;
   result.height = targetRect.height;
  }
  return result;
 },
 getInternalContainerSize: function(targetInfo) {
  var parentWithOverflow = RippleHelper.getParentWithOverflow(targetInfo.getTarget());
  if(!ASPx.IsExists(parentWithOverflow))
   return targetInfo;
  var parentWithOverflowStyle = ASPx.GetCurrentStyle(parentWithOverflow);
  var bothOverflow = this.hasBothOverflow(parentWithOverflowStyle);
  var overflowX = this.hasOverflowX(parentWithOverflowStyle);
  var overflowY = this.hasOverflowY(parentWithOverflowStyle);
  var parentRect = {
   x: ASPx.GetAbsoluteX(parentWithOverflow),
   y: ASPx.GetAbsoluteY(parentWithOverflow),
   width: parentWithOverflow.offsetWidth,
   height: parentWithOverflow.offsetHeight
  };
  return this.getInternalContainerSizeCore(targetInfo, parentRect, bothOverflow, overflowX, overflowY);
 },
 getInternalContainerSizeCore: function(targetRect, parentRect, bothOverflow, overflowX, overflowY) {
  var result = {};
  ASPx.Data.MergeHashTables(result, targetRect);
  if(bothOverflow || overflowX) {
   result.x = targetRect.x < parentRect.x ? parentRect.x : targetRect.x;
   if(targetRect.x + targetRect.width > parentRect.x + parentRect.width)
    result.width = parentRect.x + parentRect.width - targetRect.x;
   if(parentRect.x > targetRect.x)
    result.width -= (parentRect.x - targetRect.x);
  }
  if(bothOverflow || overflowY) {
   result.y = targetRect.y < parentRect.y ? parentRect.y : targetRect.y;
   if(targetRect.y + targetRect.height > parentRect.y + parentRect.height)
    result.height = parentRect.y + parentRect.height - targetRect.y;
   if(parentRect.y > targetRect.y)
    result.height -= (parentRect.y - targetRect.y);
  }
  return result;
 },
 calculateRippleContainerSize: function(targetInfo, isExternalRipple) {
  return isExternalRipple ? this.getExternalRippleContainerSize(targetInfo) : this.getInternalContainerSize(targetInfo);
 },
 getParentWithOverflow: function(rippleTarget) {
  var result = ASPx.GetParent(rippleTarget, function(element) {
   var elementStyle = ASPx.GetCurrentStyle(element);
   return this.hasBothOverflow(elementStyle) || this.hasOverflowX(elementStyle) || this.hasOverflowY(elementStyle);
  }.aspxBind(this));
  return result;
 },
 getDuration: function(targetInfo) {
  return this.IsExternalRipple(targetInfo) || ASPx.Browser.MobileUI ? 650 : 450;
 },
 createRippleTransition: function(container, rippleElement, radius, targetInfo) {
  var rippleSize = 2 * radius;
  var transitionProperties = {
   width: { from: 0, to: rippleSize, transition: ASPx.AnimationConstants.Transitions.RIPPLE, propName: "width", unit: "px" },
   height: { from: 0, to: rippleSize, transition: ASPx.AnimationConstants.Transitions.RIPPLE, propName: "height", unit: "px" },
   marginLeft: { from: 0, to: -rippleSize / 2, transition: ASPx.AnimationConstants.Transitions.RIPPLE, propName: "marginLeft", unit: "px" },
   marginTop: { from: 0, to: -rippleSize / 2, transition: ASPx.AnimationConstants.Transitions.RIPPLE, propName: "marginTop", unit: "px" },
   opacity: { from: 1, to: 0.05, transition: ASPx.AnimationConstants.Transitions.RIPPLE, propName: "opacity", unit: "%" }
  };
  var rippleTransition = ASPx.AnimationUtils.createMultipleAnimationTransition(rippleElement, {
   transition: ASPx.AnimationConstants.Transitions.RIPPLE,
   duration: this.getDuration(targetInfo),
   needForceTransitionEndByTimerFlag: true, 
   onComplete: function() {
    this.RemoveRippleContainer(container.parentElement);
   }.bind(this)
  });
  rippleTransition.Start(transitionProperties);
 },
 needForceTransitionEndByTimer: function() { return true; }, 
 calculateRadius: function(isExternalRipple, posX, posY, containerRect) {
  var radius = -1;
  if(isExternalRipple) {
   if(ASPx.Browser.MobileUI)
    radius = this.getOriginTouchRadius() / 2;
   else
    radius = Math.max(containerRect.height, containerRect.width);
  } else {
   var width1 = posX - containerRect.x;
   var width2 = containerRect.width - width1;
   var height1 = posY - containerRect.y;
   var height2 = containerRect.height - height1;
   var rippleWidth = Math.max(width1, width2);
   var rippleHeight = Math.max(height1, height2);
   radius = Math.sqrt(Math.pow(rippleHeight, 2) + Math.pow(rippleWidth, 2));
  }
  return radius;
 },
 createRippleElement: function(container, rippleCenter) {
  var rippleElement = document.createElement("DIV");
  rippleElement.className = this.rippleClassName;
  container.appendChild(rippleElement);
  ASPxClientUtils.SetAbsoluteX(rippleElement, rippleCenter.x);
  ASPxClientUtils.SetAbsoluteY(rippleElement, rippleCenter.y);
  return rippleElement;
 },
 processRipple: function(targetInfo, eventInfo) {
  this.initRippleProcess();
  var isExternalRipple = this.IsExternalRipple(targetInfo);
  var rippleCenter = this.getRippleCenter(targetInfo.getRect(), eventInfo, isExternalRipple);
  var container = this.createRippleContainer(targetInfo, isExternalRipple);
  var rippleElement = this.createRippleElement(container, rippleCenter);
  var radius = this.calculateRadius(isExternalRipple, rippleCenter.x, rippleCenter.y, this.getElementRect(container));
  this.createRippleTransition(container, rippleElement, radius, targetInfo);
 },
 initRippleProcess: function() {
  this.isMobileExternalRipple = null;
  this.zoom = screen.width / window.innerWidth;
 },
 getRippleCenter: function(targetInfo, eventInfo, isExternalRipple) {
  var posX = 0;
  var posY = 0;
  if(isExternalRipple) {
   posX = targetInfo.x + targetInfo.width / 2;
   posY = targetInfo.y + targetInfo.height / 2;
  } else {
   posX = eventInfo.x;
   posY = eventInfo.y;
  }
  return {x: posX, y: posY};
 },
 createRippleContainer: function(targetInfo, isExternalRipple) {
  var containerParent = targetInfo.getTarget();
  if(!containerParent)
   return;
  var containerTagName = containerParent.tagName == "TR" ? "TD" : "DIV";
  var container = document.createElement(containerTagName);
  container.className = this.rippleContainerClassName;
  if(containerParent.parentNode && containerParent.tagName == "IMG")
   containerParent = containerParent.parentNode;
  if(this.isARowInFixedLayoutTable(containerParent))
   this.lockFixedLayoutTableSizes(containerParent);
  containerParent.appendChild(container);
  if(isExternalRipple)
   container.style.borderRadius = "50%";
  var containerRect = this.calculateRippleContainerSize(targetInfo, isExternalRipple);
  this.assignContainerSettings(container, containerRect);
  return container;
 },
 isARowInFixedLayoutTable: function(containerParent) {
  if(containerParent.tagName !== "TR")
   return false;
  var parentTable = this.getParentTable(containerParent);
  return parentTable && ASPx.GetCurrentStyle(parentTable)["table-layout"] === "fixed";
 },
 processFirstRowOfFixedTable: function(containerRow, rowAction, cellAction) {
  var firstRow = this.getFirstRow(containerRow);
  rowAction(firstRow);
  var cells = ASPx.Data.CollectionToArray(firstRow.cells);
  cells.forEach(cellAction);
 },
 getParentTable: function(element) {
  var parentTable = element;
  while(parentTable && parentTable.tagName !== "TABLE")
   parentTable = parentTable.parentElement;
  return parentTable;
 },
 lockFixedLayoutTableSizes: function(containerRow) {
  var firstRow = this.getFirstRow(containerRow);
  if(this.incLockCount(firstRow) === 1) {
   var cells = ASPx.Data.CollectionToArray(firstRow.cells);
   var widths = cells.map(function(cell) { return cell.style.width; });
   var computedWidths = cells.map(function(cell) {
    return window.getComputedStyle(cell).width;
   });
   var fixWidth = function(cell, i) {
    if(ASPx.Attr.IsExistsAttribute(cell, SAVED_WIDTH_ATTR))
     return;
    if(widths[i])
     ASPx.Attr.SetAttribute(cell, SAVED_WIDTH_ATTR, widths[i]);
    cell.style.width = computedWidths[i];
   };
   cells.forEach(fixWidth);
  }
 }, 
 unlockFixedLayoutTableSizes: function(containerRow) {
  var firstRow = this.getFirstRow(containerRow);   
  if(this.decLockCount(firstRow) === 0) {
   var cells = ASPx.Data.CollectionToArray(firstRow.cells);
   var restoreState = function(cell) {
    if(ASPx.Attr.IsExistsAttribute(cell, SAVED_WIDTH_ATTR)) {
     cell.style.width = ASPx.Attr.GetAttribute(cell, SAVED_WIDTH_ATTR);
     ASPx.Attr.RemoveAttribute(cell, SAVED_WIDTH_ATTR);
    } else {
     cell.style.width = null;
    }
   };
   cells.forEach(restoreState);
  }
 },
 getFirstRow: function(containerRow) { return ASPx.GetChildByTagName(containerRow.parentElement, "TR", 0); },
 incLockCount: function(elem) { return this.changeLockCount(elem, 1); },
 decLockCount: function(elem) { return this.changeLockCount(elem, -1); },
 changeLockCount: function(elem, diff) {
  var lockCounter = this.getLockCount(elem);
  lockCounter += diff;
  lockCounter = Math.max(0, lockCounter);
  if(lockCounter === 0)
   ASPx.Attr.RemoveAttribute(elem, RIPPLE_FIXED_ROW_ATTR);
  else
   ASPx.Attr.SetAttribute(elem, RIPPLE_FIXED_ROW_ATTR, lockCounter);
  return lockCounter;
 },
 getLockCount: function(lockElement) {
  var attrValue = ASPx.Attr.GetAttribute(lockElement, RIPPLE_FIXED_ROW_ATTR);
  return parseInt(attrValue) || 0;
 },
 assignContainerSettings: function(container, containerRect) {
  var properties = {
   height: containerRect.height,
   width: containerRect.width,
   left: ASPx.PrepareClientPosForElement(containerRect.x, container, true),
   top: ASPx.PrepareClientPosForElement(containerRect.y, container, false)
  };
  if(ASPx.Browser.MobileUI)
   ASPx.Data.MergeHashTables(properties, {marginTop: 0, marginLeft: 0 });
  ASPx.SetStyles(container, properties, ASPx.Browser.MobileUI);
 },
 IsExternalRipple: function(targetInfo) {
  var hasExternalRippleClassName = ASPx.ElementContainsCssClass(targetInfo.getTarget(), this.rippleTargetExternalClassName);
  if(!ASPx.Browser.MobileUI)
   return hasExternalRippleClassName;
  return hasExternalRippleClassName || this.IsMobileExternalRipple(targetInfo);
 },
 IsMobileExternalRipple: function(targetInfo) {
  if(this.isMobileExternalRipple == null) {
   var originTouchRadius = this.getOriginTouchRadius();
   this.isMobileExternalRipple = ASPx.Browser.MobileUI && targetInfo.width < originTouchRadius && targetInfo.height < originTouchRadius;
  }
  return this.isMobileExternalRipple;
 },
 RemoveRippleContainer: function(element) {
  if(!element)
   return;
  var childs = ASPx.GetChildNodesByClassName(element, this.rippleContainerClassName);
  var rippleContainer = childs.length > 0 ? childs[0] : null;
  if(rippleContainer != null) {
   var containerParent = rippleContainer.parentNode;
   containerParent.removeChild(rippleContainer);
   if(this.isARowInFixedLayoutTable(containerParent))
    this.unlockFixedLayoutTableSizes(containerParent);
  }
 },
 getEventX: function(evt) {
  return ASPxClientUtils.GetEventX(evt);
 },
 getEventY: function(evt) {
  return ASPxClientUtils.GetEventY(evt);
 },
 getOriginTouchRadius: function() {
  return this.touchRadius / this.zoom;
 },
 getElementRect: function(element) {
  return { x: ASPx.GetAbsoluteX(element), y: ASPx.GetAbsoluteY(element), width: element.offsetWidth, height: element.offsetHeight };
 }
};
var AccessibilitySR = {
 AddStringResources: function(stringResourcesObj) {
  if(stringResourcesObj) {
   for(var key in stringResourcesObj)
    if(stringResourcesObj.hasOwnProperty(key))
     this[key] = stringResourcesObj[key];
  }
 }
};
ASPx.OrderedMap = OrderedMap;
ASPx.CollectionBase = CollectionBase;
ASPx.FunctionIsInCallstack = _aspxFunctionIsInCallstack;
ASPx.RaisePostHandlerOnPost = aspxRaisePostHandlerOnPost;
ASPx.GetPostHandler = aspxGetPostHandler;
ASPx.ProcessScriptsAndLinks = _aspxProcessScriptsAndLinks;
ASPx.InitializeLinks = _aspxInitializeLinks;
ASPx.InitializeScripts = _aspxInitializeScripts;
ASPx.RunStartupScripts = _aspxRunStartupScripts;
ASPx.IsStartupScriptsRunning = _aspxIsStartupScriptsRunning;
ASPx.AddScriptsRestartHandler = _aspxAddScriptsRestartHandler;
ASPx.GetFocusedElement = _aspxGetFocusedElement;
ASPx.GetDomObserver = _aspxGetDomObserver;
ASPx.CacheHelper = CacheHelper;
ASPx.ControlTree = ControlTree;
ASPx.ControlAdjuster = ControlAdjuster;
ASPx.GetControlAdjuster = GetControlAdjuster;
ASPx.ControlCallbackHandlersQueue = ControlCallbackHandlersQueue;
ASPx.ResourceManager = ResourceManager;
ASPx.UpdateWatcherHelper = UpdateWatcherHelper;
ASPx.EventStorage = EventStorage;
ASPx.GetGlobalObject = GetGlobalObject;
ASPx.GetExternalScriptProcessor = GetExternalScriptProcessor;
ASPx.CheckBoxCheckState = CheckBoxCheckState;
ASPx.CheckBoxInputKey = CheckBoxInputKey;
ASPx.CheckableElementStateController = CheckableElementStateController;
ASPx.CheckableElementHelper = CheckableElementHelper;
ASPx.CheckBoxInternal = CheckBoxInternal;
ASPx.CheckBoxInternalCollection = CheckBoxInternalCollection;
ASPx.ControlCallbackQueueHelper = ControlCallbackQueueHelper;
ASPx.FocusedStyleDecoration = FocusedStyleDecoration;
ASPx.EditorStyleDecoration = EditorStyleDecoration;
ASPx.TextEditorStyleDecoration = TextEditorStyleDecoration;
ASPx.AccessibilitySR = AccessibilitySR;
ASPx.KbdHelper = KbdHelper;
ASPx.AccessKeysHelper = AccessKeysHelper;
ASPx.AccessKey = AccessKey;
ASPx.IFrameHelper = IFrameHelper;
ASPx.Ident = Ident;
ASPx.TouchUIHelper = TouchUIHelper;
ASPx.ControlUpdateWatcher = ControlUpdateWatcher;
ASPx.ControlTabIndexManager = ControlTabIndexManager;
ASPx.AccessibilityHelperBase = AccessibilityHelperBase;
ASPx.RippleHelper = RippleHelper;
ASPx.ThemesWithRipple = ThemesWithRipple;
window.ASPxClientEvent = ASPxClientEvent;
window.ASPxClientEventArgs = ASPxClientEventArgs;
window.ASPxClientCancelEventArgs = ASPxClientCancelEventArgs;
window.ASPxClientProcessingModeEventArgs = ASPxClientProcessingModeEventArgs;
window.ASPxClientProcessingModeCancelEventArgs = ASPxClientProcessingModeCancelEventArgs;
ASPx.Evt.AttachEventToDocument(TouchUIHelper.touchMouseDownEventName, RippleHelper.onDocumentMouseDown);
ASPx.classesScriptParsed = true;
})(ASPx, { GCCheckInterval: 5000 });

(function () {
 IntersectionObserversManager = ASPx.CreateClass(null, {
  constructor: function() {
   this.rootElementToObserverMap = this.createMap();
   this.elementToHandlerMap = this.createMap();
   this.clearInvalidElementsInterval = null;
   this.clearInvalidElementsPeriod = 5000;
  },
  AddTargetElement: function(element, rootElement, visibilityChangedHandler) {
   this.addTargetElementCore(element, rootElement, visibilityChangedHandler);
  },
  SubscribeElemensVisibilityChangeInBrowserWindow: function (element, visibilityChangedHandler) {
   this.addTargetElementCore(element, null, visibilityChangedHandler);
  },
  createMap: function() {
   return new Map();
  },
  getObserver: function() {
   return IntersectionObserver;
  },
  initializeObserver: function(rootElement) {
   if(!this.rootElementToObserverMap.get(rootElement)) {
    var options = {
     root: rootElement,
     rootMargin: '-1px',
     threshold: 0.0 
    };
    var observerClass = this.getObserver();
    var observer = new observerClass(this.visibilityChanged.bind(this), options);
    this.rootElementToObserverMap.set(rootElement, observer);
   }
  },
  addTargetElementCore: function(element, rootElement, visibilityChangedHandler) {
   this.initializeObserver(rootElement);
   if(!this.isAlreadyObserved(element)) {
    var observer = this.rootElementToObserverMap.get(rootElement);
    if(observer) {
     observer.observe(element);
     this.setObservedMarker(element);
     this.setElementVisibilityChangedHandler(element, visibilityChangedHandler, observer);
     if(this.clearInvalidElementsInterval === null) {
      this.clearInvalidElementsInterval = setInterval(this.removeDeletedElements.bind(this), this.clearInvalidElementsPeriod);
     }
    }
   }
  },
  visibilityChanged: function(entries, observer) {
   entries.forEach(function (entry) {
    if(ASPx.IsExistsElement(entry.target)){
     var element = this.elementToHandlerMap.get(observer);
     if(element) {
      var handler = element.get(entry.target);
      if(handler)
       handler(entry.isIntersecting);
     }
    }
   }.bind(this));
  },
  removeDeletedElements: function() {
   this.elementToHandlerMap.forEach(function(elements, observer) {
    elements.forEach(function(handler, element) {
     if(!ASPx.IsExistsElement(element)) {
      elements.delete(element);
     }
    }.bind(this));
    if(elements.size === 0) {
     this.elementToHandlerMap.delete(observer);
    }
   }.bind(this));
   if(this.elementToHandlerMap.size === 0) {
    clearInterval(this.clearInvalidElementsInterval);
    this.clearInvalidElementsInterval = null;
   }
  },
  setElementVisibilityChangedHandler: function(element, visibilityChangedHandler, observer) {
   if(!this.elementToHandlerMap.get(observer))
    this.elementToHandlerMap.set(observer, this.createMap());
   var el = this.elementToHandlerMap.get(observer);
   if(el)
    el.set(element, visibilityChangedHandler);
  },
  isAlreadyObserved: function(element) {
   return !!element.dxObserved;
  },
  setObservedMarker: function(element) {
   element.dxObserved = true;
  },
  reset: function() {
   this.rootElementToObserverMap.forEach(function(observer, rootElement) {
    observer.disconnect();
   }.bind(this));
   this.rootElementToObserverMap = this.createMap();
   this.elementToHandlerMap = this.createMap();
   this.clearInvalidElementsInterval = null;
   this.clearInvalidElementsPeriod = 5000;
  }
 });
 IntersectionObserversManagerForOldBrowsers = ASPx.CreateClass(null, {
  SubscribeElemensVisibilityChangeInBrowserWindow: function() { }
 });
 ASPx.IntersectionObserversManager = ASPx.IntersectionObserversManager || ((typeof(IntersectionObserver) !== "undefined") ? new IntersectionObserversManager() : new IntersectionObserversManagerForOldBrowsers());
}
)(ASPx);

(function() {
var CheckingScriptObjectCommand = ASPx.CreateClass(null, {
 constructor: function(scriptName, markerObjectName) {
  this.scriptName = scriptName;
  this.markerObjectName = markerObjectName;
  this.isExisted = false;
 },
 Run: function() {
  var markerObj = this.GetMarkerObject();
  this.isExisted = !!markerObj;
  if(this.isExisted)
   markerObj.DXPatched = true;
 },
 GetErrorMessage: function() {
  return this.GetErrorMessageCore(true);
 },
 GetErrorMessageCore: function(isScriptRequired){
  var markerObj = this.GetMarkerObject();
  if(this.isExisted && markerObj && markerObj.DXPatched || !isScriptRequired && !markerObj)
   return null;
  if(isScriptRequired && !this.GetMarkerObject()){
   if(this.isExisted)
    return this.scriptName + " script was attached but has been overridden.";
   else
    return this.scriptName + " script was not attached.";
  }
  if(!this.isExisted)
   return this.scriptName + " script was attached after DevExpress scripts.";
  return this.scriptName + " script was attached multiple times and mixed up with DevExpress scripts.";
 },
 GetMarkerObject: function() {
  return ASPx.GetGlobalObject(this.markerObjectName);
 }
});
var PatchScriptCommand = ASPx.CreateClass(CheckingScriptObjectCommand, {
 constructor: function(scriptName, markerObjectName, patchMethod, required) {
  this.constructor.prototype.constructor.call(this, scriptName, markerObjectName);
  this.required = required;
  this.patchMethod = patchMethod;
 },
 Run: function() {
  CheckingScriptObjectCommand.prototype.Run.call(this);
  if(this.isExisted)
   this.patchMethod();
 },
 GetErrorMessage: function() {  
  return this.GetErrorMessageCore(this.required);
 }
});
var ExternalScriptProcessor = ASPx.CreateClass(null, {
 constructor: function() {
  this.commands = {};
 },
 Process: function(scriptName, markerObjectName, patchMethod, required) {
  var newCommand = this.CreateCommand(scriptName, markerObjectName, patchMethod, !!required);
  var oldCommand = this.commands[markerObjectName];
  if(oldCommand) {
   if(!oldCommand.patchMethod && !newCommand.patchMethod)
    newCommand = null;
   else if(newCommand.patchMethod && (!oldCommand.patchMethod || oldCommand.required))
    newCommand.required = true;
   else if(oldCommand.patchMethod && !newCommand.patchMethod) {
    oldCommand.required = true;
    newCommand = null;
   }
  }
  if(newCommand) {
   this.commands[markerObjectName] = newCommand;
   newCommand.Run();
  }
 },
 CreateCommand: function(scriptName, markerObjectName, patchMethod, required) {
  if(patchMethod)
   return new PatchScriptCommand(scriptName, markerObjectName, patchMethod, required);
  return new CheckingScriptObjectCommand(scriptName, markerObjectName);
 },
 ShowErrorMessages: function() {
  var messages = this.GetErrorMessages();
  var console = window.console;
  if(!messages.length || !console || !ASPx.IsFunction(console.error))
   return;
  for(var i = 0; i < messages.length; i++) {
   console.error(messages[i]);
  }
  ASPx.ShowKBErrorMessage("Please check the correctness of script registration on the page. For details, see ", "T272309");
 },
 GetErrorMessages: function() {
  var messages = [];
  for (var key in this.commands) {
   if (this.commands.hasOwnProperty(key)) {
    var message = this.commands[key].GetErrorMessage();
    if (message)
     messages.push(message);
   }
  }
  return messages;
 }
});
ExternalScriptProcessor.Instance = null;
ExternalScriptProcessor.getInstance = function() {
 if(!ExternalScriptProcessor.Instance)
  ExternalScriptProcessor.Instance = new ExternalScriptProcessor();
 return ExternalScriptProcessor.Instance;
};
ASPx.ExternalScriptProcessor = ExternalScriptProcessor;
})();
(function module(ASPx) {
ASPx.modules.Controls = module;
var ASPxClientBeginCallbackEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(command){
  this.constructor.prototype.constructor.call(this);
  this.command = command;
 }
});
var ASPxClientGlobalBeginCallbackEventArgs = ASPx.CreateClass(ASPxClientBeginCallbackEventArgs, {
 constructor: function(control, command){
  this.constructor.prototype.constructor.call(this, command);
  this.control = control;
 }
});
var ASPxClientEndCallbackEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(command){
  this.constructor.prototype.constructor.call(this);
  this.command = command;
 }
});
var ASPxClientGlobalEndCallbackEventArgs = ASPx.CreateClass(ASPxClientEndCallbackEventArgs, {
 constructor: function(control){
  this.constructor.prototype.constructor.call(this);
  this.control = control;
 }
});
var ASPxClientCustomDataCallbackEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(result) {
  this.constructor.prototype.constructor.call(this);
  this.result = result;
 }
});
var ASPxClientCallbackErrorEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function (message, callbackId) {
  this.constructor.prototype.constructor.call(this);
  this.message = message;
  this.handled = false;
  this.callbackId = callbackId;
 }
});
var ASPxClientGlobalCallbackErrorEventArgs = ASPx.CreateClass(ASPxClientCallbackErrorEventArgs, {
 constructor: function (control, message, callbackId) {
  this.constructor.prototype.constructor.call(this, message, callbackId);
  this.control = control;
 }
});
var ASPxClientValidationCompletedEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function (container, validationGroup, invisibleControlsValidated, isValid, firstInvalidControl, firstVisibleInvalidControl) {
  this.constructor.prototype.constructor.call(this);
  this.container = container;
  this.validationGroup = validationGroup;
  this.invisibleControlsValidated = invisibleControlsValidated;
  this.isValid = isValid;
  this.firstInvalidControl = firstInvalidControl;
  this.firstVisibleInvalidControl = firstVisibleInvalidControl;
 }
});
var ASPxClientControlsInitializedEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(isCallback) {
  this.isCallback = isCallback;
 }
});
var ASPxClientControlBeforePronounceEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(messageParts, control){
  this.constructor.prototype.constructor.call(this);
  this.messageParts = messageParts;
  this.control = control;
 }
});
var ASPxClientControlUnloadEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(control){
  this.constructor.prototype.constructor.call(this);
  this.control = control;
 }
});
var ASPxClientEndFocusEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(item) {
  this.constructor.prototype.constructor.call(this);
  this.item = item;
 }
});
var ASPxClientItemFocusedEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(item) {
  this.constructor.prototype.constructor.call(this);
  this.item = item;
 }
});
var BeforeInitCallbackEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(callbackOwnerID){
  this.constructor.prototype.constructor.call(this);
  this.callbackOwnerID = callbackOwnerID;
 }
});
var ASPxClientBrowserWindowResizedInternalEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(eventInfo) {
  this.constructor.prototype.constructor.call(this);
  this.htmlEvent = eventInfo.htmlEvent;
  this.windowClientWidth = eventInfo.wndWidth;
  this.windowClientHeigth = eventInfo.wndHeight;
  this.previousWindowClientWidth = eventInfo.prevWndWidth;
  this.previousWindowClientHeight = eventInfo.prevWndHeight;
  this.virtualKeyboardShownOnAndroid = eventInfo.virtualKeyboardShownOnAndroid;
 }
});
ASPx.createControl = function(type, name, windowName, properties, events, setupMethod, data){
 var globalName = windowName && windowName.length > 0 ? windowName : name;
 var dxo = new type(name);
 var haveWrapper = ASPx.Platform === "NETCORE" && dxo.createWrapper && !DevExpress.AspNetCore.Internal.BackwardCompatibility.useLegacyClientAPI;
 if(haveWrapper) {
  window[globalName] = dxo.createWrapper();
  dxo.aspNetCoreWrapperInstance = window[globalName];
 }
 else
  dxo.InitGlobalVariable(globalName);
 if(properties)
  dxo.SetProperties(properties);
 if(events)
  dxo.SetEvents(events);
 if(setupMethod)
  setupMethod.call(dxo);
 if(data)
  dxo.SetData(data);
 dxo.AfterCreate();
};
var ASPxClientControlBase = ASPx.CreateClass(null, {
 constructor: function(name){
  this.name = name;
  this.uniqueID = name;   
  this.globalName = name;
  this.stateObject = null;
  this.needEncodeState = true;
  this.encodeHtml = true;
  this.enabled = true;
  this.clientEnabled = true;
  this.savedClientEnabled = true;
  this.clientVisible = true;
  this.accessibilityCompliant = false;
  this.parseJSPropertiesOnCallbackError = false;
  this.autoPostBack = false;
  this.allowMultipleCallbacks = true;
  this.callBack = null;
  this.enableCallbackAnimation = false;
  this.enableSlideCallbackAnimation = false;
  this.slideAnimationDirection = null;
  this.beginCallbackAnimationProcessing = false;
  this.endCallbackAnimationProcessing = false;
  this.savedCallbackResult = null;
  this.savedCallbacks = null;
  this.isCallbackAnimationPrevented = false;
  this.lpDelay = 300;
  this.lpTimer = -1;
  this.requestCount = 0;
  this.enableSwipeGestures = false;
  this.disableSwipeGestures = false;
  this.supportGestures = false;
  this.repeatedGestureValue = 0;
  this.repeatedGestureCount = 0;
  this.isInitialized = false;
  this.initialFocused = false;
  this.leadingAfterInitCall = ASPxClientControl.LeadingAfterInitCallConsts.None; 
  this.serverEvents = [];
  this.loadingPanelElement = null;
  this.loadingDivElement = null;  
  this.hasPhantomLoadingElements = false;
  this.mainElement = null;
  this.touchUIMouseScroller = null;
  this.hiddenFields = {};
  this.scPrefix = "dx";
  this.callbackHandlersQueue = new ASPx.ControlCallbackHandlersQueue(this);
  this.callbackCommand = {};
  this.currentCallbackID = -1;
  this.InitializeIntersectionObserversManager();
  this.Init = new ASPxClientEvent();
  this.BeginCallback = new ASPxClientEvent();
  this.EndCallback = new ASPxClientEvent();
  this.EndCallbackAnimationStart = new ASPxClientEvent();
  this.CallbackError = new ASPxClientEvent();
  this.CustomDataCallback = new ASPxClientEvent();
  this.BeforePronounce = new ASPxClientEvent();
  this.Unload = new ASPxClientEvent();
  this.Disposed = new ASPxClientEvent(); 
  aspxGetControlCollection().Add(this);
 },
 Initialize: function() {
  if(this.callBack != null)
   this.InitializeCallBackData();
  if (this.useCallbackQueue())
   this.callbackQueueHelper = new ASPx.ControlCallbackQueueHelper(this);
  ASPx.AccessibilityUtils.createAccessibleBackgrounds(this);
  if(this.accessibilityCompliant)
   ASPx.AccessibilityPronouncer.EnsureInitialize();
 },
 FinalizeInitialization: function() { },
 InlineInitialize: function() {
  this.savedClientEnabled = this.clientEnabled;
 },
 InitializeGestures: function() {
  if(this.isSwipeGesturesEnabled() && this.supportGestures) {
   ASPx.GesturesHelper.AddSwipeGestureHandler(this.name, 
    function() { return this.GetCallbackAnimationElement(); }.aspxBind(this), 
    function(evt) { return this.CanHandleGestureCore(evt); }.aspxBind(this), 
    function(value) { return this.AllowStartGesture(value); }.aspxBind(this),
    function(value) { return this.StartGesture(); }.aspxBind(this),
    function(value) { return this.AllowExecuteGesture(value); }.aspxBind(this),
    function(value) { this.ExecuteGesture(value); }.aspxBind(this),
    function(value) { this.CancelGesture(value); }.aspxBind(this),
    this.GetDefaultanimationEngineType(),
    this.rtl
   );
   if(ASPx.Browser.MSTouchUI)
    this.touchUIMouseScroller = ASPx.MouseScroller.Create(
     function() { return this.GetCallbackAnimationElement(); }.aspxBind(this),
     function() { return null; },
     function() { return this.GetCallbackAnimationElement(); }.aspxBind(this),
     function(element) { return this.NeedPreventTouchUIMouseScrolling(element); }.aspxBind(this),
     true
    );
  }
 },
 isSwipeGesturesEnabled: function() {
  return !this.disableSwipeGestures && (this.enableSwipeGestures || ASPx.Browser.TouchUI);
 },
 isSlideCallbackAnimationEnabled: function() {
  return this.enableSlideCallbackAnimation || this.isSwipeGesturesEnabled(); 
 },
 InitGlobalVariable: function(varName){
  if(!window) return;
  this.globalName = varName;
  window[varName] = this;
 },
 SetElementDisplay: function(element, value, checkCurrentStyle, makeInline) {
  ASPx.SetElementDisplay(element, value, checkCurrentStyle, makeInline);
 },
 SetProperties: function(properties, obj){
  if(!obj) obj = this;
  var isAspNetCoreWrapperInstanceExist = !!obj.aspNetCoreWrapperInstance;
  for(var name in properties){
   if(!properties.hasOwnProperty(name)) continue;
   obj[name] = properties[name];
   if(isAspNetCoreWrapperInstanceExist && name.indexOf("cp") === 0)
    obj.aspNetCoreWrapperInstance[name] = properties[name]; 
  }
 },
 SetEvents: function(events, obj){
  if(!obj) obj = this;
  for(var name in events){
   if(events.hasOwnProperty(name) && obj[name] && obj[name].AddHandler)
    obj[name].AddHandler(events[name]);
  }
 },
 SetData: function(data){
 },
 useCallbackQueue: function(){
  return false;
 },
 NeedPreventTouchUIMouseScrolling: function(element) {
  return false;
 },
 InitializeFocus: function() {
  if(this.initialFocused && this.IsVisible()) {
   if(ASPxClientUtils.iOSPlatform || ASPxClientUtils.androidPlatform)
    setTimeout(function() { this.Focus(); }.bind(this), ASPx.FOCUS_TIMEOUT);
   else
    this.Focus();
  }
 },
 AfterCreate: function() {
  this.AddDefaultStateControllerItems();
  this.InlineInitialize();
  this.InitializeGestures();
 },
 AfterInitialize: function() {
  this.initializeAriaDescriptor();
  this.InitializeFocus();
  this.isInitialized = true;
  this.RaiseInit();
  if(this.savedCallbacks) {
   for(var i = 0; i < this.savedCallbacks.length; i++) 
    this.CreateCallbackInternal(this.savedCallbacks[i].arg, this.savedCallbacks[i].command, 
     false, this.savedCallbacks[i].callbackInfo);
   this.savedCallbacks = null;
  }
 },
 InitializeCallBackData: function() {
 },
 AtlasPreInitialize: function() {
 },
 AtlasInitialize: function() {
 },
 IsDOMDisposed: function() { 
  return !ASPx.IsExistsElement(this.GetMainElement());
 },
 initializeAriaDescriptor: function() {
  if(this.ariaDescription) {
   var descriptionObject = ASPx.Json.Eval(this.ariaDescription);
   if(descriptionObject) {
    this.ariaDescriptor = new AriaDescriptor(this, descriptionObject);
    this.applyAccessibilityAttributes(this.ariaDescriptor); 
   }
  }
 },
 applyAccessibilityAttributes: function() { },
 setAriaDescription: function(selector, argsList) {
  if(this.ariaDescriptor)
   this.ariaDescriptor.setDescription(selector, argsList || [[]]);
 },
 allowRestoreFocusOnCallbacks: function(){
  return this.accessibilityCompliant;
 },
 HtmlEncode: function(text) {
  return this.encodeHtml ? ASPx.Str.EncodeHtml(text) : text;
 },
 IsServerEventAssigned: function(eventName){
  return ASPx.Data.ArrayIndexOf(this.serverEvents, eventName) >= 0;
 },
 OnPost: function(args){
  this.SerializeStateHiddenField();
 },
 SerializeStateHiddenField: function() {
  this.UpdateStateObject();
  if(this.stateObject != null)
   this.UpdateStateHiddenField();
 },
 OnPostFinalization: function(args){
 },
 UpdateStateObject: function(){
 },
 UpdateStateObjectWithObject: function(obj){
  if(!obj) return;
  if(!this.stateObject)
   this.stateObject = { };
  for(var key in obj)
   if(obj.hasOwnProperty(key))
    this.stateObject[key] = obj[key];
 },
 UpdateStateHiddenField: function() {
  var stateHiddenField = this.GetStateHiddenField();
  if(stateHiddenField) {
   var stateObjectStr = ASPx.Json.ToJson(this.stateObject, !this.needEncodeState);
   stateHiddenField.value = this.needEncodeState ? ASPx.Str.EncodeHtml(stateObjectStr) : stateObjectStr;
  }
 },
 GetStateHiddenField: function() {
  return this.GetHiddenField(this.GetStateHiddenFieldName(), this.GetStateHiddenFieldID(), 
   this.GetStateHiddenFieldParent(), this.GetStateHiddenFieldOrigin());
 },
 GetStateHiddenFieldName: function() {
  return this.uniqueID;
 },
 GetStateHiddenFieldID: function() {
  return this.name + "_State";
 },
 GetStateHiddenFieldOrigin: function() {
  return this.GetMainElement();
 },
 GetStateHiddenFieldParent: function() {
  var element = this.GetStateHiddenFieldOrigin();
  return element ? element.parentNode : null;
 },
 GetHiddenField: function(name, id, parent, beforeElement) {
  var hiddenField = this.hiddenFields[id];
  if(!hiddenField || !ASPx.IsValidElement(hiddenField)) {
   if(parent) {
    var existingHiddenField = ASPx.GetElementById(this.GetStateHiddenFieldID());
    this.hiddenFields[id] = hiddenField = existingHiddenField || ASPx.CreateHiddenField(name, id);
    if(existingHiddenField)
     return existingHiddenField;
    if(beforeElement)
     parent.insertBefore(hiddenField, beforeElement);
    else
     parent.appendChild(hiddenField);
   }
  }
  return hiddenField;
 },
 GetChildElement: function(idPostfix){
  var mainElement = this.GetMainElement();
  if(idPostfix.charAt && idPostfix.charAt(0) !== "_")
   idPostfix = "_" + idPostfix;
  return mainElement ? ASPx.CacheHelper.GetCachedChildById(this, mainElement, this.name + idPostfix) : null;
 },
 getChildControl: function(idPostfix) {
  var result = null;
  var childControlId = this.getChildControlUniqueID(idPostfix);
  ASPx.GetControlCollection().ProcessControlsInContainer(this.GetMainElement(), function(control) {
   if(control.uniqueID == childControlId)
    result = control;
  });
  return result;  
 },
 getChildControlUniqueID: function(idPostfix) {
  idPostfix = idPostfix.split("_").join("$");
  if(idPostfix.charAt && idPostfix.charAt(0) !== "$")
   idPostfix = "$" + idPostfix;
  return this.uniqueID + idPostfix;  
 },
 getInnerControl: function(idPostfix) {
  var name = this.name + idPostfix;
  var result = window[name];
  return result && Ident.IsASPxClientControl(result)
   ? result
   : null;
 },
 GetParentForm: function(){
  return ASPx.GetParentByTagName(this.GetMainElement(), "FORM");
 },
 GetMainElement: function(){
  if(!ASPx.IsExistsElement(this.mainElement))
   this.mainElement = ASPx.GetElementById(this.GetMainElementId());
  return this.mainElement;
 },
 GetMainElementId: function() {
  return this.name;
 },
 IsLoadingContainerVisible: function(){
  return this.IsVisible();
 },
 GetLoadingPanelElement: function(){
  return ASPx.GetElementById(this.name + "_LP");
 },
 GetClonedLoadingPanel: function(){
  return document.getElementById(this.GetLoadingPanelElement().id + "V"); 
 },
 CloneLoadingPanel: function(element, parent) {
  var clone = element.cloneNode(true);
  clone.id = element.id + "V";
  parent.appendChild(clone);
  return clone;
 },
 CreateLoadingPanelWithoutBordersInsideContainer: function(container) {
  var loadingPanel = this.CreateLoadingPanelInsideContainer(container, false, true, true);
  var contentStyle = ASPx.GetCurrentStyle(container);
  if(!loadingPanel || !contentStyle)
   return;
  var elements = [ ];
  var table = (loadingPanel.tagName == "TABLE") ? loadingPanel : ASPx.GetNodeByTagName(loadingPanel, "TABLE", 0);
  if(table != null)
   elements.push(table);
  else
   elements.push(loadingPanel);
  var cells = ASPx.GetNodesByTagName(loadingPanel, "TD");
  if(!cells) cells = [ ];
  for(var i = 0; i < cells.length; i++)
   elements.push(cells[i]);
  for(var i = 0; i < elements.length; i++) {
   var el = elements[i];
   el.style.backgroundColor = contentStyle.backgroundColor;
   ASPx.RemoveBordersAndShadows(el);
  }
 },
 CreateLoadingPanelInsideContainer: function(parentElement, hideContent, collapseHeight, collapseWidth) {
  if(this.ShouldHideExistingLoadingElements())
   this.HideLoadingPanel();
  if(parentElement == null)
   return null;
  if(!this.IsLoadingContainerVisible()) {
   this.hasPhantomLoadingElements = true;
   return null;
  }
  var element = this.GetLoadingPanelElement();
  if(element != null){
   var width = collapseWidth ? 0 : ASPx.GetClearClientWidth(parentElement);
   var height = collapseHeight ? 0 : ASPx.GetClearClientHeight(parentElement);
   if(hideContent){
    for(var i = parentElement.childNodes.length - 1; i > -1; i--){
     if(parentElement.childNodes[i].style)
      parentElement.childNodes[i].style.display = "none";
     else if(parentElement.childNodes[i].nodeType == 3) 
      parentElement.removeChild(parentElement.childNodes[i]);
    }
   }
   else
    parentElement.innerHTML = "";
   var table = document.createElement("TABLE");
   parentElement.appendChild(table);
   table.border = 0;
   table.cellPadding = 0;
   table.cellSpacing = 0;
   ASPx.SetStyles(table, {
    width: (width > 0) ? width : "100%",
    height: (height > 0) ? height : "100%"
   });
   var tbody = document.createElement("TBODY");
   table.appendChild(tbody);
   var tr = document.createElement("TR");
   tbody.appendChild(tr);
   var td = document.createElement("TD");
   tr.appendChild(td);
   td.align = "center";
   td.vAlign = "middle";
   element = this.CloneLoadingPanel(element, td);
   ASPx.SetElementDisplay(element, true);
   this.loadingPanelElement = element;
   return element;
  } else
   parentElement.innerHTML = "&nbsp;";
  return null;
 },
 CreateLoadingPanelWithAbsolutePosition: function(parentElement, offsetElement) {
  if(this.ShouldHideExistingLoadingElements())
   this.HideLoadingPanel();
  if(parentElement == null)
   return null;
  if(!this.IsLoadingContainerVisible()) {
   this.hasPhantomLoadingElements = true;
   return null;
  }
  if(!offsetElement)
   offsetElement = parentElement;
  var element = this.GetLoadingPanelElement();
  if(element != null) {
   element = this.CloneLoadingPanel(element, parentElement);
   ASPx.SetStyles(element, {
    position: "absolute"
   });
   ASPx.SetElementDisplay(element, true);
   ASPx.Evt.AttachEventToElement(element, ASPx.Evt.GetMouseWheelEventName(), ASPx.Evt.PreventEvent);
   this.SetLoadingPanelLocation(offsetElement, element);
   this.loadingPanelElement = element;
   return element;
  }
  return null;
 },
 CreateLoadingPanelInline: function(parentElement, centerInParent){
  if(this.ShouldHideExistingLoadingElements())
   this.HideLoadingPanel();
  if(parentElement == null)
   return null;
  if(!this.IsLoadingContainerVisible()) {
   this.hasPhantomLoadingElements = true;
   return null;
  }
  var element = this.GetLoadingPanelElement();
  if(element != null) {
   element = this.CloneLoadingPanel(element, parentElement);
   if(centerInParent){
    ASPx.SetElementDisplay(element, true);
    parentElement.style.textAlign = "center";
   }
   else
    ASPx.SetElementDisplay(element, true);
   this.loadingPanelElement = element;
   return element;
  }
  return null;
 },
 ShowLoadingPanel: function() {
 },
 ShowLoadingElements: function() {
  if(this.InCallback() || this.lpTimer > -1) return;
  this.ShowLoadingDiv();
  if(this.IsCallbackAnimationEnabled())
   this.StartBeginCallbackAnimation();
  else
   this.ShowLoadingElementsInternal();
 },
 ShowLoadingElementsInternal: function() {
  if(this.lpDelay > 0 && !this.IsCallbackAnimationEnabled()) 
   this.lpTimer = window.setTimeout(function() { 
    this.ShowLoadingPanelOnTimer(); 
   }.aspxBind(this), this.lpDelay);
  else {
   this.RestoreLoadingDivOpacity();
   this.ShowLoadingPanel();
  }
 },
 GetLoadingPanelOffsetElement: function (baseElement) {
  if(this.IsCallbackAnimationEnabled()) {
   var element = this.GetLoadingPanelCallbackAnimationOffsetElement();
   if(element) {
    var container = typeof(ASPx.AnimationHelper) != "undefined" ? ASPx.AnimationHelper.findSlideAnimationContainer(element) : null;
    if(container)
     return container.parentNode.parentNode;
    else
     return element;
   }
  }
  return baseElement;
 },
 GetLoadingPanelCallbackAnimationOffsetElement: function () {
  return this.GetCallbackAnimationElement();
 },
 IsCallbackAnimationEnabled: function () {
  return (this.enableCallbackAnimation || this.isSlideCallbackAnimationEnabled()) && !this.isCallbackAnimationPrevented;
 },
 GetDefaultanimationEngineType: function() {
  return ASPx.AnimationEngineType.DEFAULT;
 },
 StartBeginCallbackAnimation: function () {
  this.beginCallbackAnimationProcessing = true;
  this.isCallbackFinished = false;
  var element = this.GetCallbackAnimationElement();
  if (element && this.isSlideCallbackAnimationEnabled() && this.slideAnimationDirection)
   ASPx.AnimationHelper.slideOut(element, this.slideAnimationDirection, this.FinishBeginCallbackAnimation.aspxBind(this), this.GetDefaultanimationEngineType(), this.rtl);
  else if(element && this.enableCallbackAnimation) 
   ASPx.AnimationHelper.fadeOut(element, this.FinishBeginCallbackAnimation.aspxBind(this), null, ASPx.AnimationEngineType.JS);
  else
   this.FinishBeginCallbackAnimation();
 },
 CancelBeginCallbackAnimation: function() {
  if(this.beginCallbackAnimationProcessing) {
   this.beginCallbackAnimationProcessing = false;
   var element = this.GetCallbackAnimationElement();
   ASPx.AnimationHelper.cancelAnimation(element);
  }
 },
 FinishBeginCallbackAnimation: function () {
  this.beginCallbackAnimationProcessing = false;
  if(!this.isCallbackFinished)
   this.ShowLoadingElementsInternal();
  else {
   this.DoCallback(this.savedCallbackResult);
   this.savedCallbackResult = null;
  }
 },
 CheckBeginCallbackAnimationInProgress: function(callbackResult) {
  if(this.beginCallbackAnimationProcessing) {
   this.savedCallbackResult = callbackResult;
   this.isCallbackFinished = true;
   return true;
  }
  return false;
 },
 StartEndCallbackAnimation: function () {
  this.HideLoadingPanel();
  this.SetInitialLoadingDivOpacity();
  this.RaiseEndCallbackAnimationStart();
  this.endCallbackAnimationProcessing = true;
  var element = this.GetCallbackAnimationElement();
  if(element && this.isSlideCallbackAnimationEnabled() && this.slideAnimationDirection) 
   ASPx.AnimationHelper.slideIn(element, this.slideAnimationDirection, this.FinishEndCallbackAnimation.aspxBind(this), this.GetDefaultanimationEngineType(), this.rtl);
  else if(element && this.enableCallbackAnimation) 
   ASPx.AnimationHelper.fadeIn(element, this.FinishEndCallbackAnimation.aspxBind(this), null, ASPx.AnimationEngineType.JS);
  else
   this.FinishEndCallbackAnimation();
  this.slideAnimationDirection = null;
 },
 FinishEndCallbackAnimation: function () {
  this.DoEndCallback();
  this.endCallbackAnimationProcessing = false;
  this.CheckRepeatGesture();
 },
 CheckEndCallbackAnimationNeeded: function() {
  if(!this.endCallbackAnimationProcessing && this.requestCount == 1) {
   this.StartEndCallbackAnimation();
   return true;
  }
  return false;
 },
 PreventCallbackAnimation: function() {
  this.isCallbackAnimationPrevented = true;
 },
 GetCallbackAnimationElement: function() {
  return null;
 },
 AssignSlideAnimationDirectionByPagerArgument: function(arg, currentPageIndex) {
  this.slideAnimationDirection = null;
  if(this.isSlideCallbackAnimationEnabled() && typeof(ASPx.AnimationHelper) != "undefined") {
   if(arg == PagerCommands.Next || arg == PagerCommands.Last)
    this.slideAnimationDirection = ASPx.AnimationHelper.SLIDE_LEFT_DIRECTION;
   else if(arg == PagerCommands.First || arg == PagerCommands.Prev)
    this.slideAnimationDirection = ASPx.AnimationHelper.SLIDE_RIGHT_DIRECTION;
   else if(!isNaN(currentPageIndex) && arg.indexOf(PagerCommands.PageNumber) == 0) {
    var newPageIndex = parseInt(arg.substring(2));
    if (!isNaN(newPageIndex)) {
     var leftDir = this.rtl ? ASPx.AnimationHelper.SLIDE_LEFT_DIRECTION : ASPx.AnimationHelper.SLIDE_RIGHT_DIRECTION;
     var rightDir = this.rtl ? ASPx.AnimationHelper.SLIDE_RIGHT_DIRECTION : ASPx.AnimationHelper.SLIDE_LEFT_DIRECTION;
     this.slideAnimationDirection = newPageIndex < currentPageIndex ? leftDir : rightDir;
    }
   }
  }
 },
 TryShowPhantomLoadingElements: function () {
  if(this.hasPhantomLoadingElements && this.InCallback()) {
   this.hasPhantomLoadingElements = false;
   this.ShowLoadingDivAndPanel();
  }
 },
 ShowLoadingDivAndPanel: function () {
  this.ShowLoadingDiv();
  this.RestoreLoadingDivOpacity();
  this.ShowLoadingPanel();
 },
 HideLoadingElements: function() {
  this.CancelBeginCallbackAnimation();
  this.HideLoadingPanel();
  this.HideLoadingDiv();
 },
 ShowLoadingPanelOnTimer: function() {
  this.ClearLoadingPanelTimer();
  if(!this.IsDOMDisposed()) {
   this.RestoreLoadingDivOpacity();
   this.ShowLoadingPanel();
  }
 },
 ClearLoadingPanelTimer: function() {
  this.lpTimer = ASPx.Timer.ClearTimer(this.lpTimer);  
 },
 HideLoadingPanel: function() {
  this.ClearLoadingPanelTimer();
  this.hasPhantomLoadingElements = false;
  if(ASPx.IsExistsElement(this.loadingPanelElement)) {
   ASPx.RemoveElement(this.loadingPanelElement);
   this.loadingPanelElement = null;
  }
 },
 SetLoadingPanelLocation: function(offsetElement, loadingPanel, x, y, offsetX, offsetY) {
  if(!ASPx.IsExists(x) || !ASPx.IsExists(y)){
   var x1 = ASPx.GetAbsoluteX(offsetElement);
   var y1 = ASPx.GetAbsoluteY(offsetElement);
   var x2 = x1;
   var y2 = y1;
   if(offsetElement == document.body) {
    x1 = 0;
    y1 = 0;
    x2 = ASPx.GetDocumentMaxClientWidth();
    y2 = ASPx.GetDocumentMaxClientHeight();
   }
   else{
    x2 += offsetElement.offsetWidth;
    y2 += offsetElement.offsetHeight;
   }
   if(x1 < ASPx.GetDocumentScrollLeft())
    x1 = ASPx.GetDocumentScrollLeft();
   if(y1 < ASPx.GetDocumentScrollTop())
    y1 = ASPx.GetDocumentScrollTop();
   if(x2 > ASPx.GetDocumentScrollLeft() + ASPx.GetDocumentClientWidth())
    x2 = ASPx.GetDocumentScrollLeft() + ASPx.GetDocumentClientWidth();
   if(y2 > ASPx.GetDocumentScrollTop() + ASPx.GetDocumentClientHeight())
    y2 = ASPx.GetDocumentScrollTop() + ASPx.GetDocumentClientHeight();
   x = x1 + ((x2 - x1 - loadingPanel.offsetWidth) / 2);
   y = y1 + ((y2 - y1 - loadingPanel.offsetHeight) / 2);
  }
  if(ASPx.IsExists(offsetX) && ASPx.IsExists(offsetY)){
   x += offsetX;
   y += offsetY;
  }
  x = ASPx.PrepareClientPosForElement(x, loadingPanel, true);
  y = ASPx.PrepareClientPosForElement(y, loadingPanel, false);
  ASPx.SetStyles(loadingPanel, { left: x, top: y });
 },
 GetLoadingDiv: function(){
  return ASPx.GetElementById(this.name + "_LD");
 },
 CreateLoadingDiv: function(parentElement, offsetElement){
  if(this.ShouldHideExistingLoadingElements())
   this.HideLoadingDiv();
  if(parentElement == null) 
   return null;
  if(!this.IsLoadingContainerVisible()) {
   this.hasPhantomLoadingElements = true;
   return null;
  }
  if(!offsetElement)
   offsetElement = parentElement;
  var div = this.GetLoadingDiv();
  if(div != null){
   div = div.cloneNode(true);
   parentElement.appendChild(div);
   ASPx.SetElementDisplay(div, true);
   ASPx.Evt.AttachEventToElement(div, ASPx.TouchUIHelper.touchMouseDownEventName, ASPx.Evt.PreventEvent);
   ASPx.Evt.AttachEventToElement(div, ASPx.TouchUIHelper.touchMouseMoveEventName, ASPx.Evt.PreventEvent);
   ASPx.Evt.AttachEventToElement(div, ASPx.TouchUIHelper.touchMouseUpEventName, ASPx.Evt.PreventEvent);
   ASPx.Evt.AttachEventToElement(div, ASPx.Evt.GetMouseWheelEventName(), ASPx.Evt.PreventEvent);
   this.SetLoadingDivBounds(offsetElement, div);
   this.loadingDivElement = div;
   this.SetInitialLoadingDivOpacity();
   return div;
  }
  return null;
 },
 SetInitialLoadingDivOpacity: function() {
  if(!this.loadingDivElement) return;
  ASPx.Attr.SaveStyleAttribute(this.loadingDivElement, "opacity");
  ASPx.Attr.SaveStyleAttribute(this.loadingDivElement, "filter");
  ASPx.SetElementOpacity(this.loadingDivElement, 0.01);
 },
 RestoreLoadingDivOpacity: function() {
  if(!this.loadingDivElement) return;
  ASPx.Attr.RestoreStyleAttribute(this.loadingDivElement, "opacity");
  ASPx.Attr.RestoreStyleAttribute(this.loadingDivElement, "filter");
 },
 SetLoadingDivBounds: function(offsetElement, loadingDiv) {
  var absX = (offsetElement == document.body) ? 0 : ASPx.GetAbsoluteX(offsetElement);
  var absY = (offsetElement == document.body) ? 0 : ASPx.GetAbsoluteY(offsetElement);
  ASPx.SetStyles(loadingDiv, {
   left: ASPx.PrepareClientPosForElement(absX, loadingDiv, true),
   top: ASPx.PrepareClientPosForElement(absY, loadingDiv, false)
  });
  var width = (offsetElement == document.body) ? ASPx.GetDocumentWidth() : offsetElement.offsetWidth;
  var height = (offsetElement == document.body) ? ASPx.GetDocumentHeight() : offsetElement.offsetHeight;
  if(height < 0) 
   height = 0;
  ASPx.SetStyles(loadingDiv, { width: width, height: height });
  var correctedWidth = 2 * width - loadingDiv.offsetWidth;
  if(correctedWidth <= 0) correctedWidth = width;
  var correctedHeight = 2 * height - loadingDiv.offsetHeight;
  if(correctedHeight <= 0) correctedHeight = height;
  ASPx.SetStyles(loadingDiv, { width: correctedWidth, height: correctedHeight });
 },
 ShowLoadingDiv: function() {
 },
 HideLoadingDiv: function() {
  this.hasPhantomLoadingElements = false;
  if(ASPx.IsExistsElement(this.loadingDivElement)){
   ASPx.RemoveElement(this.loadingDivElement);
   this.loadingDivElement = null;
  }
 },
 CanHandleGesture: function(evt) {
  return false;
 },
 CanHandleGestureCore: function(evt) {
  var source = ASPx.Evt.GetEventSource(evt);
  if(ASPx.GetIsParent(this.loadingPanelElement, source) || ASPx.GetIsParent(this.loadingDivElement, source))
   return true; 
  var callbackAnimationElement = this.GetCallbackAnimationElement();
  if(!callbackAnimationElement)
   return false;
  var animationContainer = ASPx.AnimationHelper.getSlideAnimationContainer(callbackAnimationElement, false, false);
  if(animationContainer && ASPx.GetIsParent(animationContainer, source) && !ASPx.GetIsParent(animationContainer.childNodes[0], source))
   return true; 
  return this.CanHandleGesture(evt); 
 },
 AllowStartGesture: function() {
  return !this.beginCallbackAnimationProcessing && !this.endCallbackAnimationProcessing;
 },
 StartGesture: function() {
 },
 AllowExecuteGesture: function(value) {
  return false;
 },
 ExecuteGesture: function(value) {
 },
 CancelGesture: function(value) {
  if(this.repeatedGestureCount === 0) {
   this.repeatedGestureValue = value;
   this.repeatedGestureCount = 1;
  }
  else {
   if(this.repeatedGestureValue * value > 0)
    this.repeatedGestureCount++;
   else
    this.repeatedGestureCount--;
   if(this.repeatedGestureCount === 0)
    this.repeatedGestureCount = 0;
  }
 },
 CheckRepeatGesture: function() {
  if(this.repeatedGestureCount !== 0) {
   if(this.AllowExecuteGesture(this.repeatedGestureValue))
    this.ExecuteGesture(this.repeatedGestureValue, this.repeatedGestureCount);
   this.repeatedGestureValue = 0;
   this.repeatedGestureCount = 0;
  }
 },
 AllowExecutePagerGesture: function (pageIndex, pageCount, value) {
  if(pageIndex < 0) return false;
  if(pageCount <= 1) return false;
  if(value > 0 && pageIndex === 0) return false;
  if(value < 0 && pageIndex === pageCount - 1) return false;
  return true;
 },
 ExecutePagerGesture: function(pageIndex, pageCount, value, count, method) {
  if(!count) count = 1;
  var pageIndex = pageIndex + (value < 0 ? count : -count);
  if(pageIndex < 0) pageIndex = 0;
  if(pageIndex > pageCount - 1) pageIndex = pageCount - 1;
  method(PagerCommands.PageNumber + pageIndex);
 },
 RaiseInit: function(){
  if(!this.Init.IsEmpty()){
   var args = new ASPxClientEventArgs();
   this.Init.FireEvent(this, args);
  }
 },
 RaiseBeginCallbackInternal: function(command){
  if(!this.BeginCallback.IsEmpty()){
   var args = new ASPxClientBeginCallbackEventArgs(command);
   this.BeginCallback.FireEvent(this, args);
  }
 },
 RaiseEndCallbackInternal: function(command) {
  if(!this.EndCallback.IsEmpty()){
   var args = new ASPxClientEndCallbackEventArgs(command);
   this.EndCallback.FireEvent(this, args);
  }
 },
 RaiseCallbackErrorInternal: function(message, callbackId) {
  if(!this.CallbackError.IsEmpty()) {
   var args = new ASPxClientCallbackErrorEventArgs(message, callbackId);
   this.CallbackError.FireEvent(this, args);
   if(args.handled)
    return { isHandled: true, errorMessage: args.message };
  }
 },
 RaiseBeginCallback: function(command){
  this.RaiseBeginCallbackInternal(command);    
  aspxGetControlCollection().RaiseBeginCallback(this, command);
 },
 RaiseEndCallback: function(command){
  this.RaiseEndCallbackInternal(command);
  aspxGetControlCollection().RaiseEndCallback(this, command);
 },
 RaiseCallbackError: function (message, callbackId) {
  var result = this.RaiseCallbackErrorInternal(message, callbackId);
  if(!result) 
   result = aspxGetControlCollection().RaiseCallbackError(this, message, callbackId);
  return result;
 },
 RaiseEndCallbackAnimationStart: function(){
  if(!this.EndCallbackAnimationStart.IsEmpty()){
   var args = new ASPxClientEventArgs();
   this.EndCallbackAnimationStart.FireEvent(this, args);
  }
 },
 RaiseBeforePronounce: function(message) {
  var args = new ASPxClientControlBeforePronounceEventArgs(message, this);
  if(!this.BeforePronounce.IsEmpty())
   this.BeforePronounce.FireEvent(this, args);
  return args;
 },
 RaiseUnload: function() {
  var args = new ASPxClientControlUnloadEventArgs(this);
  if(!this.Unload.IsEmpty())
   this.Unload.FireEvent(this, args);
 },
 RaiseDisposed: function() {
  this.Disposed.FireEvent(this, new ASPxClientEventArgs(this));
 },
 SendMessageToAssistiveTechnology: function(message) {
  if(!this.accessibilityCompliant)
   return;
  this.PronounceMessageInternal(message, ASPx.AccessibilityPronouncerType.live);
 },
 PronounceMessageInternal: function(messageArg, type) {
  var message = messageArg;
  if(!ASPx.Ident.IsArray(messageArg))
   message = [messageArg];
  var args = this.RaiseBeforePronounce(message);
  ASPx.AccessibilityPronouncer.Pronounce(args, type);
 },
 IsVisible: function() {
  var element = this.GetMainElement();
  return ASPx.IsElementVisible(element);
 },
 IsDisplayedElement: function(element) {
  while(element && element.tagName != "BODY") {
   if(!ASPx.GetElementDisplay(element)) 
    return false;
   element = element.parentNode;
  }
  return true;
 },
 IsDisplayed: function() {
  return this.IsDisplayedElement(this.GetMainElement());
 },
 IsHiddenElement: function(element) {
  return element && element.offsetWidth == 0 && element.offsetHeight == 0;
 },
 IsHidden: function() {
  return this.IsHiddenElement(this.GetMainElement());
 },
 IsDisposed: function() {
  return this.disposed;
 },
 GetParentControl: function() {
  var mainElement = this.getActualMainElement();
  var popupPostfix = ASPx.PCWIdSuffix + "-1";
  var result = null;
  ASPx.GetParent(mainElement, function(element) {
   if(element === mainElement || !element.id)
    return false;
   var controlName = element.id.replace(popupPostfix, "");
   result = ASPx.GetControlCollection().Get(controlName);
   return !!result;
  });
  return result;
 },
 getActualMainElement: function() { return this.GetMainElement(); },
 findParentByType: function (type) {
  var ctrl = this;
  while (ctrl) {
   var parent = ctrl.GetParentControl();
   if (parent && parent instanceof type)
    return parent;
   ctrl = parent;
  }
  return null;
 },
 Focus: function() {
 },
 GetClientVisible: function(){
  return this.GetVisible();
 },
 SetClientVisible: function(visible){
  this.SetVisible(visible);
 },
 GetVisible: function(){
  return this.clientVisible;
 },
 SetVisible: function(visible){
  if(this.clientVisible != visible){
   this.clientVisible = visible;
   ASPx.SetElementDisplay(this.GetMainElement(), visible);
   if(visible) {
    this.AdjustControl();
    var mainElement = this.GetMainElement();
    if(mainElement)
     aspxGetControlCollection().AdjustControls(mainElement);
   }
  }
 },
 GetEnabled: function() {
  return this.clientEnabled;
 },
 SetEnabled: function(enabled) {
  this.clientEnabled = enabled;
  if(ASPxClientControl.setEnabledLocked)
   return;
  else
   ASPxClientControl.setEnabledLocked = true;
  this.savedClientEnabled = enabled;
  aspxGetControlCollection().ProcessControlsInContainer(this.GetMainElement(), function(control) {
   if(ASPx.IsFunction(control.SetEnabled))
    control.SetEnabled(enabled && control.savedClientEnabled);
  });
  delete ASPxClientControl.setEnabledLocked;
 },
 InCallback: function() {
  return this.requestCount > 0;
 },
 DoBeginCallback: function(command) {
  this.RaiseBeginCallback(command || "");
  aspxGetControlCollection().Before_WebForm_InitCallback(this.name);
  if(typeof(WebForm_InitCallback) != "undefined" && WebForm_InitCallback) {
   __theFormPostData = "";
   __theFormPostCollection = [ ];
   this.ClearPostBackEventInput("__EVENTTARGET");
   this.ClearPostBackEventInput("__EVENTARGUMENT");
   WebForm_InitCallback();
   this.savedFormPostData = __theFormPostData;
   this.savedFormPostCollection = __theFormPostCollection;
  }
 },
 ClearPostBackEventInput: function(id){
  var element = ASPx.GetElementById(id);
  if(element != null) element.value = "";
 },
 PerformDataCallback: function(arg, handler) {
  this.CreateCustomDataCallback(arg, "", handler);
 },
 sendCallbackViaQueue: function (prefix, arg, showLoadingPanel, context, handler, onBeforeSend) {
  if (!this.useCallbackQueue())
   return false;
  var context = context || this;
  var token = this.callbackQueueHelper.sendCallback(ASPx.FormatCallbackArg(prefix, arg), context, handler || context.OnCallback, prefix, onBeforeSend);
  if (showLoadingPanel)
   this.callbackQueueHelper.showLoadingElements();
  return token;
 },
 CreateCallback: function (arg, command, handler) {
  var callbackInfo = this.CreateCallbackInfo(ASPx.CallbackType.Common, handler || null);
  var callbackID = this.CreateCallbackByInfo(arg, command, callbackInfo);
  return callbackID;
 },
 CreateCustomDataCallback: function(arg, command, handler) {
  var callbackInfo = this.CreateCallbackInfo(ASPx.CallbackType.Data, handler);
  this.CreateCallbackByInfo(arg, command, callbackInfo);
 },
 CreateCallbackByInfo: function(arg, command, callbackInfo) {
  if(!this.CanCreateCallback()) return;
  var callbackID;
  if(typeof(WebForm_DoCallback) != "undefined" && WebForm_DoCallback && ASPx.documentLoaded || ASPx.Platform === "NETCORE")
   callbackID = this.CreateCallbackInternal(arg, command, true, callbackInfo);
  else {
   if(!this.savedCallbacks)
    this.savedCallbacks = [];
   var callbackInfo = { arg: arg, command: command, callbackInfo: callbackInfo };
   if(this.allowMultipleCallbacks)
    this.savedCallbacks.push(callbackInfo);
   else
    this.savedCallbacks[0] = callbackInfo;
  }
  return callbackID;
 },
 CreateCallbackInternal: function(arg, command, viaTimer, callbackInfo) {
  var watcher = ASPx.ControlUpdateWatcher.getInstance();
  if(watcher && !watcher.CanSendCallback(this, arg)) {
   this.CancelCallbackInternal();
   return;
  }
  this.requestCount++;
  this.DoBeginCallback(command);
  if(typeof(arg) == "undefined")
   arg = "";
  if(typeof(command) == "undefined")
   command = "";
  var callbackID = this.SaveCallbackInfo(callbackInfo, command),
   customArgs = this.GetCustomCallbackArgs();
  if(viaTimer)
   window.setTimeout(function() { this.CreateCallbackCoreWithCustomArgs(arg, command, callbackID, customArgs); }.aspxBind(this), 0);
  else
   this.CreateCallbackCoreWithCustomArgs(arg, command, callbackID, customArgs);
  return callbackID;
 },
 CreateCallbackCoreWithCustomArgs: function(arg, command, callbackID, customArgs) {
  this.CreateCallbackCore(arg, command, callbackID);
 },
 GetCustomCallbackArgs: function() {
  return {};
 },
 CancelCallbackInternal: function() {
  this.CancelCallbackCore();
  this.HideLoadingElements();
 },
 CancelCallbackCore: function() {
 },
 CreateCallbackCore: function(arg, command, callbackID) {
  var callBackMethod = this.GetCallbackMethod(command);
  __theFormPostData = this.savedFormPostData;
  __theFormPostCollection = this.savedFormPostCollection;
  callBackMethod.call(this, this.GetSerializedCallbackInfoByID(callbackID) + arg);
 },
 GetCallbackMethod: function(command){
  return this.callBack;
 },
 CanCreateCallback: function() {
  return !this.InCallback() || (this.allowMultipleCallbacks && !this.beginCallbackAnimationProcessing && !this.endCallbackAnimationProcessing);
 },
 DoLoadCallbackScripts: function() {
  ASPx.ProcessScriptsAndLinks(this.name, true);
 },
 DoEndCallback: function() {
  if(this.IsCallbackAnimationEnabled() && this.CheckEndCallbackAnimationNeeded()) 
   return;
  this.requestCount--;
  if (this.requestCount < 1) 
   this.callbackHandlersQueue.executeCallbacksHandlers();
  if(this.HideLoadingPanelOnCallback() && this.requestCount < 1) 
   this.HideLoadingElements();
  if(this.isSwipeGesturesEnabled() && this.supportGestures) {
   ASPx.GesturesHelper.UpdateSwipeAnimationContainer(this.name);
   if(this.touchUIMouseScroller)
    this.touchUIMouseScroller.update();
  }
  this.isCallbackAnimationPrevented = false;
  this.OnCallbackFinalized();
  this.AssignEllipsisTooltips();
  var command = this.GetCallbackCommand();
  this.RaiseEndCallback(command);
  this.InitializeIntersectionObserversManager();
  this.currentCallbackID = -1;
 },
 DoFinalizeCallback: function() {
 },
 OnCallbackFinalized: function() {
 },
 AssignEllipsisTooltips: function() { },
 GetCallbackCommand: function() {
  var result = "";
  if(this.currentCallbackID != -1) {
   var command = this.callbackCommand[this.currentCallbackID];
   if(command)
    result = command;
  }
  return result;
 },
 HideLoadingPanelOnCallback: function() {
  return true;
 },
 ShouldHideExistingLoadingElements: function() {
  return true;
 },
 EvalCallbackResult: function(resultString) {
  return eval(resultString);
 },
 ParseJSProperties: function(resultObj) {
  if(resultObj.cp) {
   for(var name in resultObj.cp)
    if(resultObj.cp.hasOwnProperty(name)) {
     this[name] = resultObj.cp[name];
     if(this.aspNetCoreWrapperInstance)
      this.aspNetCoreWrapperInstance[name] = resultObj.cp[name]; 
    }
  }
 },
 DoCallback: function(result) {
  if(this.IsCallbackAnimationEnabled() && this.CheckBeginCallbackAnimationInProgress(result))
   return;
  result = ASPx.Str.Trim(result);
  if(result.indexOf(ASPx.CallbackResultPrefix) != 0) 
   this.ProcessCallbackGeneralError(result, false);
  else {
   var resultObj = null;
   try {
    resultObj = this.EvalCallbackResult(result);
   } 
   catch(e) {
   }
   if(resultObj) {
    this.currentCallbackID = resultObj.id;
    ASPx.CacheHelper.DropCache(this);
    if(resultObj.redirect) {
     this.ParseJSProperties(resultObj); 
     ASPx.Url.Redirect(resultObj.redirect);
    }
    else if(ASPx.IsExists(resultObj.generalError)) {
     this.ProcessCallbackGeneralError(resultObj.generalError, true);
    }
    else {
     var errorObj = resultObj.error;
     if(errorObj) { 
      if(this.parseJSPropertiesOnCallbackError)
       this.ParseJSProperties(resultObj);
      this.ProcessCallbackError(errorObj,resultObj.id);
     } else {
      this.ParseJSProperties(resultObj);
      var callbackInfo = this.DequeueCallbackInfo(resultObj.id);
      if(callbackInfo && callbackInfo.type == ASPx.CallbackType.Data)
       this.ProcessCustomDataCallback(resultObj.result, callbackInfo);
      else {
       if (this.useCallbackQueue() && this.callbackQueueHelper.getCallbackInfoById(resultObj.id))
        this.callbackQueueHelper.processCallback(resultObj.result, resultObj.id);
       else {
        this.ProcessCallback(resultObj.result, resultObj.id);
        if(callbackInfo && callbackInfo.handler) {
         var handlerInfo = { handler: callbackInfo.handler, result: resultObj.result.data };
         this.callbackHandlersQueue.addCallbackHandler(handlerInfo);
        }
       }
      }
     }
    }
   }
  }
  this.DoLoadCallbackScripts();
 },
 DoCallbackError: function(result) {
  this.HideLoadingElements();
  this.ProcessCallbackGeneralError(result, false); 
 },
 DoControlClick: function(evt) {
  this.OnControlClick(ASPx.Evt.GetEventSource(evt), evt);
 },
 ProcessCallback: function (result, callbackId) {
  this.OnCallback(result, callbackId);
 },
 ProcessCustomDataCallback: function(result, callbackInfo) {
  if(callbackInfo.handler != null)
   callbackInfo.handler(this, result);
  this.RaiseCustomDataCallback(result);
 },
 RaiseCustomDataCallback: function(result) {
  if(!this.CustomDataCallback.IsEmpty()) {
   var arg = new ASPxClientCustomDataCallbackEventArgs(result);
   this.CustomDataCallback.FireEvent(this, arg);
  }
 },
 OnCallback: function(result) {
 },
 CreateCallbackInfo: function(type, handler) {
  return { type: type, handler: handler };
 },
 GetSerializedCallbackInfoByID: function(callbackID) {
  return this.GetCallbackInfoByID(callbackID).type + callbackID + ASPx.CallbackSeparator;
 },
 SaveCallbackInfo: function(info, command) {
  var callbacks = this.GetActiveCallbacksInfo();
  var index = callbacks.indexOf(null);
  if(index === -1)
   index = callbacks.length;
  callbacks[index] = info;
  this.callbackCommand[index] = command;
  return index;
 },
 GetActiveCallbacksInfo: function() {
  var persistentProperties = this.GetPersistentProperties();
  if(!persistentProperties.activeCallbacks)
   persistentProperties.activeCallbacks = [ ];
  return persistentProperties.activeCallbacks;
 },
 GetPersistentProperties: function() {
  var storage = _aspxGetPersistentControlPropertiesStorage();
  var persistentProperties = storage[this.name];
  if(!persistentProperties) {
   persistentProperties = { };
   storage[this.name] = persistentProperties;
  }
  return persistentProperties;
 },
 GetCallbackInfoByID: function(callbackID) {
  return this.GetActiveCallbacksInfo()[callbackID];
 },
 DequeueCallbackInfo: function(index) {
  var activeCallbacksInfo = this.GetActiveCallbacksInfo();
  if(index < 0 || index >= activeCallbacksInfo.length)
   return null;
  var result = activeCallbacksInfo[index];
  activeCallbacksInfo[index] = null;
  return result;
 },
 ProcessCallbackError: function (errorObj, callbackId) {
  var data = ASPx.IsExists(errorObj.data) ? errorObj.data : null;
  var result = this.RaiseCallbackError(errorObj.message, callbackId);
  if(result.isHandled)
   this.OnCallbackErrorAfterUserHandle(result.errorMessage, data); 
  else
   this.OnCallbackError(result.errorMessage, data); 
 },
 OnCallbackError: function(errorMessage, data) {
  if(errorMessage)
   ASPx.ShowErrorAlert(errorMessage);
 },
 OnCallbackErrorAfterUserHandle: function(errorMessage, data) {
 },
 ProcessCallbackGeneralError: function(errorMessage, serverExceptionOnLastCallback) {
  this.serverExceptionOnLastCallback = serverExceptionOnLastCallback;
  var result = this.RaiseCallbackError(errorMessage);
  if(result.isHandled)
   this.OnCallbackGeneralErrorAfterUserHandle(result.errorMessage);
  else
   this.OnCallbackGeneralError(result.errorMessage);
 },
 OnCallbackGeneralError: function(errorMessage) {
  this.OnCallbackError(errorMessage, null);
 },
 OnCallbackGeneralErrorAfterUserHandle: function (errorMessage) {
 },
 SendPostBack: function(params, preventConvertToUpdatePanelCallback) {
  if(preventConvertToUpdatePanelCallback)
   this.sendMSAjaxCompatPostBack(params);
  else
   this.sendPostBackInternal(params);
 },
 sendPostBackInternal: function(params) {
  if(typeof(__doPostBack) != "undefined")
   __doPostBack(this.uniqueID, params);
  else{
   var form = this.GetParentForm();
   if(form) form.submit();
  }
 },
 sendMSAjaxCompatPostBack: function(params) {
  var rm = ASPx.GetMSAjaxRequestManager();
  var triggers = rm ? rm._postBackControlClientIDs : null;
  var needRegister = triggers && ASPx.Ident.IsArray(triggers) && ASPx.Data.ArrayIndexOf(triggers, this.name) == -1;
  if(needRegister)
   triggers.unshift(this.name);
  this.sendPostBackInternal(params);
  if(needRegister)
   triggers.shift();
 },
 IsValidInstance: function () {
  return aspxGetControlCollection().GetByName(this.name) === this;
 },
 OnDispose: function() { 
  this.RaiseDisposed();
  var varName = this.globalName;
  if(varName && varName !== "" && window && window[varName] && window[varName] == this){
   try{
    delete window[varName];
   }
   catch(e){  }
  }
  if(this.callbackQueueHelper)
   this.callbackQueueHelper.detachEvents();
  if (!this.IsDisposed())
   this.disposed = true;
 },
 OnGlobalControlsInitialized: function(args) { 
 },
 OnGlobalBrowserWindowResized: function(args) { 
 },
 OnGlobalBeginCallback: function(args) { 
 },
 OnGlobalEndCallback: function(args) { 
 },
 OnGlobalCallbackError: function(args) { 
 },
 OnGlobalValidationCompleted: function(args) { 
 },
 AddDefaultStateControllerItems: function() {
  var states = this.scStates;
  if(!states) return;
  var postfix = this.scPostfix ? ("_" + this.scPostfix) : "";
  var mainElementId = this.GetMainElementId();
  if(states & 2)
   this.AddDefaultReadOnlyStateControllerItem(this.scPrefix + "ReadOnly" + postfix, mainElementId);
  if(states & 4)
   this.AddDefaultDisabledStateControllerItem(this.scPrefix + "Disabled" + postfix, mainElementId);
 },
 AddDefaultReadOnlyStateControllerItem: function(cssClass, mainElementId) { throw "Not implemented"; },
 AddDefaultDisabledStateControllerItem: function(cssClass, mainElementId) { throw "Not implemented"; },
 DOMContentLoaded: function() { },
 IsStateControllerEnabled: function() { return false; },
 InitializeDOM: function() {
  var mainElement = this.GetMainElement();
  if(mainElement)
   ASPx.SetElementInitializedFlag(mainElement);
 },
 IsDOMInitialized: function() {
  var mainElement = this.GetMainElement();
  return mainElement && ASPx.GetElementInitializedFlag(mainElement);
 },
 AdjustControl: function(nestedCall) { },
 OnBrowserWindowResizeInternal: function(e) { },
 RegisterInControlTree: function(tree) { },
 InitializeIntersectionObserversManager: function () {
  var elementToObserve = this.getElementToObserveVisibilityChange();
  if(elementToObserve) {
   ASPx.IntersectionObserversManager.SubscribeElemensVisibilityChangeInBrowserWindow(elementToObserve, this.processVisibilityChanged.bind(this));
  }
 },
 getElementToObserveVisibilityChange: function () { },
 processVisibilityChanged: function (visible) { }
});
ASPxClientControlBase.Cast = function(obj) {
 if(typeof obj == "string")
  return window[obj];
 return obj;
};
var persistentControlPropertiesStorage = null;
function _aspxGetPersistentControlPropertiesStorage() {
 if(persistentControlPropertiesStorage == null)
  persistentControlPropertiesStorage = { };
 return persistentControlPropertiesStorage;
}
var ELLIPSIS_MARKER_CLASS = "dx-ellipsis";
var ELLIPSIS_TOOLTIP_MARKER_ATTR = "dxEllipsisTitle";
var ASPxClientControl = ASPx.CreateClass(ASPxClientControlBase, {
 constructor: function(name){
  this.constructor.prototype.constructor.call(this, name);
  this.rtl = false;
  this.enableEllipsis = false;
  this.isNative = false;
  this.isControlCollapsed = false;
  this.isInsideHierarchyAdjustment = false;
  this.controlOwner = null;
  this.adjustedSizes = { };
  this.dialogContentHashTable = { };
  this.renderIFrameForPopupElements = false;
  this.widthValueSetInPercentage = false;
  this.heightValueSetInPercentage = false;
  this.verticalAlignedElements = { };
  this.wrappedTextContainers = { };
  this.scrollPositionState = { };
  this.sizingConfig = {
   allowSetWidth: true,
   allowSetHeight: true,
   correction : false,
   adjustControl : false,
   supportPercentHeight: false,
   supportAutoHeight: false
  };
  this.percentSizeConfig = {
   width: -1,
   height: -1,
   markerWidth: -1,
   markerHeight: -1
  };  
 },
 querySelector: function(selector) { return this.querySelectorAll(selector)[0] || null; },
 querySelectorAll: function(selector) {
  return ASPx.CacheHelper.GetCachedElement(this, "querySelectorAll_" + selector,
   function() { return Array.prototype.slice.call(this.GetMainElement().querySelectorAll(selector)); });
 },
 createAccessKey: function (popupItem, getPopupElement, keyTipElement, key, onlyClick, manualStopProcessing) {
  return new ASPx.AccessKey(popupItem, getPopupElement, keyTipElement, key, onlyClick, manualStopProcessing);
 },
 InlineInitialize: function() {
  this.InitializeDOM();
  ASPxClientControlBase.prototype.InlineInitialize.call(this);
 },
 AfterCreate: function() { 
  ASPxClientControlBase.prototype.AfterCreate.call(this);
  if(!this.CanInitializeAdjustmentOnDOMContentLoaded() || ASPx.IsStartupScriptsRunning())
   this.InitializeAdjustment();
 },
 DOMContentLoaded: function() {
  if(this.CanInitializeAdjustmentOnDOMContentLoaded()) 
   this.InitializeAdjustment();
 },
 CanInitializeAdjustmentOnDOMContentLoaded: function() {
  return true;
 },
 InitializeAdjustment: function() {
  this.UpdateAdjustmentFlags();
  this.AdjustControl();
 },
 AfterInitialize: function() {
  this.AdjustControl();
  ASPxClientControlBase.prototype.AfterInitialize.call(this);
 },
 IsStateControllerEnabled: function(){
  return typeof(ASPx.GetStateController) != "undefined" && ASPx.GetStateController();
 },
 GetWidth: function() {
  return this.GetMainElement().offsetWidth;
 },
 GetHeight: function() {
  return this.GetMainElement().offsetHeight;
 },
 SetWidth: function(width) {
  if(this.sizingConfig.allowSetWidth)
   this.SetSizeCore("width", width, "GetWidth", false);
 },
 SetHeight: function(height) {
  if(this.sizingConfig.allowSetHeight)
   this.SetSizeCore("height", height, "GetHeight", false);
 },
 SetSizeCore: function(sizePropertyName, size, getFunctionName, corrected) {
  if(size < 0 || !this.GetMainElement())
   return;
  this.GetMainElement().style[sizePropertyName] = size + "px";
  this.UpdateAdjustmentFlags(sizePropertyName);
  if(this.sizingConfig.adjustControl)
   this.AdjustControl(true);
  if(this.sizingConfig.correction && !corrected) {
   var realSize = this[getFunctionName]();
   if(realSize != size) {
    var correctedSize = size - (realSize - size);
    this.SetSizeCore(sizePropertyName, correctedSize, getFunctionName, true);
   }
  }
 },
 AdjustControl: function(nestedCall) {
  if(this.IsAdjustmentRequired() && (!ASPxClientControl.adjustControlLocked || nestedCall)) {
   ASPxClientControl.adjustControlLocked = true;
   try {
    if(!this.IsAdjustmentAllowed())
     return;
    this.AdjustControlCore();
    this.UpdateAdjustedSizes();
   } 
   finally {
    delete ASPxClientControl.adjustControlLocked;
   }
  }
  this.AssignEllipsisTooltips();
  this.TryShowPhantomLoadingElements();
 },
 ResetControlAdjustment: function () {
  this.adjustedSizes = { };
 },
 UpdateAdjustmentFlags: function(sizeProperty) {
  var mainElement = this.GetMainElement();
  if(mainElement) {
   var mainElementStyle = ASPx.GetCurrentStyle(mainElement);
   this.UpdatePercentSizeConfig([mainElementStyle.width, mainElement.style.width], [mainElementStyle.height, mainElement.style.height], sizeProperty);
  }
 },
 UpdatePercentSizeConfig: function(widths, heights, modifyStyleProperty) {
  switch(modifyStyleProperty) {
   case "width":
    this.UpdatePercentWidthConfig(widths);
    break;
   case "height":
    this.UpdatePercentHeightConfig(heights);
    break;
   default:
    this.UpdatePercentWidthConfig(widths);
    this.UpdatePercentHeightConfig(heights);
    break;
  }
  this.ResetControlPercentMarkerSize();
 },
 UpdatePercentWidthConfig: function(widths) {
  this.widthValueSetInPercentage = false;
  for(var i = 0; i < widths.length; i++) {
   if(this.IsPercentageWidth(widths[i])) {
    this.percentSizeConfig.width = widths[i];
    this.widthValueSetInPercentage = true;
    break;
   }
  }
 },
 IsPercentageWidth: function(width) { return ASPx.IsPercentageSize(width); },
 UpdatePercentHeightConfig: function(heights) {
  this.heightValueSetInPercentage = false;
    for(var i = 0; i < heights.length; i++) {
   if(ASPx.IsPercentageSize(heights[i])) {
    this.percentSizeConfig.height = heights[i];
    this.heightValueSetInPercentage = true;
    break;
   }
  }
 },
 GetAdjustedSizes: function() {
  var mainElement = this.GetMainElement();
  if(mainElement) 
   return { width: mainElement.offsetWidth, height: mainElement.offsetHeight };
  return { width: 0, height: 0 };
 },
 IsAdjusted: function() {
  return (this.adjustedSizes.width && this.adjustedSizes.width > 0) && (this.adjustedSizes.height && this.adjustedSizes.height > 0);
 },
 IsAdjustmentRequired: function() {
  if(!this.IsAdjusted())
   return true;
  if(this.widthValueSetInPercentage)
   return true;
  if(this.heightValueSetInPercentage)
   return true;
  var sizes = this.GetAdjustedSizes();
  for(var name in sizes){
   if(this.adjustedSizes[name] !== sizes[name])
    return true;
  }
  return false;
 },
 IsAdjustmentAllowed: function() {
  var mainElement = this.GetMainElement();
  return mainElement && this.IsDisplayed() && !this.IsHidden() && this.IsDOMInitialized();
 },
 UpdateAdjustedSizes: function() {
  var sizes = this.GetAdjustedSizes();
  for(var name in sizes)
   if(sizes.hasOwnProperty(name))
    this.adjustedSizes[name] = sizes[name];
 },
 AdjustControlCore: function() {
 },
 AdjustAutoHeight: function() {
 },
 IsControlCollapsed: function() {
  return this.isControlCollapsed;
 },
 NeedCollapseControl: function() {
  return this.NeedCollapseControlCore() && this.IsAdjustmentRequired() && this.IsAdjustmentAllowed();
 },
 NeedCollapseControlCore: function() {
  return false;
 },
 CollapseEditor: function() {
 },
 CollapseControl: function() {
  this.SaveScrollPositions();
  var mainElement = this.GetMainElement(),
   marker = this.GetControlPercentSizeMarker();
  marker.style.height = this.heightValueSetInPercentage && this.sizingConfig.supportPercentHeight
   ? this.percentSizeConfig.height 
   : (mainElement.offsetHeight + "px");
  mainElement.style.display = "none";
  this.isControlCollapsed = true;
 },
 ExpandControl: function() {
  var mainElement = this.GetMainElement();
  mainElement.style.display = "";
  this.GetControlPercentSizeMarker().style.height = "0px";
  this.isControlCollapsed = false;
  this.RestoreScrollPositions();
 },
 CanCauseReadjustment: function() {
  return this.NeedCollapseControlCore();
 },
 IsExpandableByAdjustment: function() {
  return false;
 },
 HasFixedPosition: function() {
  return false;
 },
 SaveScrollPositions: function() {
  var mainElement = this.GetMainElement();
  this.scrollPositionState.outer = ASPx.GetOuterScrollPosition(mainElement.parentNode);
  this.scrollPositionState.inner = ASPx.GetInnerScrollPositions(mainElement);
 },
 RestoreScrollPositions: function() {
  ASPx.RestoreOuterScrollPosition(this.scrollPositionState.outer);
  ASPx.RestoreInnerScrollPositions(this.scrollPositionState.inner);
 },
 GetControlPercentSizeMarker: function() {
  if(this.percentSizeMarker === undefined) {
   this.percentSizeMarker = ASPx.CreateHtmlElementFromString("<div style='height:0px;font-size:0px;line-height:0;width:100%;'></div>");
   ASPx.InsertElementAfter(this.percentSizeMarker, this.GetMainElement());
  }
  return this.percentSizeMarker;
 },
 KeepControlPercentSizeMarker: function(needCollapse, needCalculateHeight) {
  var marker = this.GetControlPercentSizeMarker(),
   markerHeight;
  if(needCollapse)
   this.CollapseControl();
  if(this.widthValueSetInPercentage && marker.style.width !== this.percentSizeConfig.width)
   marker.style.width = this.percentSizeConfig.width;
  if(needCalculateHeight) {
   if(this.IsControlCollapsed())
    markerHeight = marker.style.height;
   marker.style.height = this.percentSizeConfig.height;
  }
  this.percentSizeConfig.markerWidth = marker.offsetWidth;
  if(needCalculateHeight) {
   this.percentSizeConfig.markerHeight = marker.offsetHeight;
   if(this.IsControlCollapsed())
    marker.style.height = markerHeight;
   else
    marker.style.height = "0px";
  }
  if(needCollapse)
   this.ExpandControl();
 },
 ResetControlPercentMarkerSize: function() {
  this.percentSizeConfig.markerWidth = -1;
  this.percentSizeConfig.markerHeight = -1;
 },
 GetControlPercentMarkerSize: function(hideControl, force) {
  var needCalculateHeight = this.heightValueSetInPercentage && this.sizingConfig.supportPercentHeight;
  if(force || this.percentSizeConfig.markerWidth < 1 || (needCalculateHeight && this.percentSizeConfig.markerHeight < 1))
   this.KeepControlPercentSizeMarker(hideControl && !this.IsControlCollapsed(), needCalculateHeight);
  return {
   width: this.percentSizeConfig.markerWidth,
   height: this.percentSizeConfig.markerHeight
  };
 },
 AssignEllipsisTooltips: function() {
  if(this.RequireAssignTooltips())
   this.AssignEllipsisTooltipsCore();
 },
 AssignEllipsisTooltipsCore: function(rootElement, reassingExistingTooltips) {
  var requirePaddingManipulation = ASPx.Browser.Edge || ASPx.Browser.Firefox;
  rootElement = rootElement || this.GetMainElement();
  var nodes = this.GetEllipsisNodes(rootElement);
  var nodeInfos = [];
  var nodesCount = nodes.length;
  for(var i = 0; i < nodesCount; i++) {
   var node = nodes[i];
   var info = { node: node };
   if(requirePaddingManipulation) {
    var style = ASPx.GetCurrentStyle(node);
    info.paddingLeft = node.style.paddingLeft;
    info.totalPadding = ASPx.GetLeftRightPaddings(node, style);
   }
   nodeInfos.push(info);
  }
  if(requirePaddingManipulation) {
   for(var i = 0; i < nodesCount; i++) {
    var info = nodeInfos[i];
    ASPx.SetStyles(info.node, { paddingLeft: info.totalPadding }, true);
   }
  }
  for(var i = 0; i < nodesCount; i++) {
   var info = nodeInfos[i];
   var node = info.node;
   info.isTextShortened = node.scrollWidth > node.clientWidth;
   info.hasTitle = ASPx.Attr.GetAttribute(node, "title") !== null;
   if(!info.hasTitle || reassingExistingTooltips)
    info.title = ASPx.GetEllipsisTooltipText(node);
  }
  for(var i = 0; i < nodesCount; i++) {
   var info = nodeInfos[i];
   var node = info.node;
   if(info.isTextShortened && info.title) {
    ASPx.Attr.SetAttribute(node, "title", info.title);
    ASPx.Attr.SetAttribute(node, ELLIPSIS_TOOLTIP_MARKER_ATTR, true);
   }
   if(!info.isTextShortened && info.hasTitle)
    ASPx.Attr.RemoveAttribute(node, "title");
  }
  if(requirePaddingManipulation) {
   for(var i = 0; i < nodesCount; i++) {
    var info = nodeInfos[i];
    var node = info.node;
    node.style.paddingLeft = info.paddingLeft;
   }
  }
 },
 GetEllipsisNodes: function(element) {
  var ellipsibleNodes = ASPx.Data.CollectionToArray(ASPx.GetNodesByClassName(element, ELLIPSIS_MARKER_CLASS));
  if(ASPx.ElementHasCssClass(element, ELLIPSIS_MARKER_CLASS))
   ellipsibleNodes.push(element);
  return ellipsibleNodes.filter(function(node) {
   return !ASPx.Attr.IsExistsAttribute(node, "title") || ASPx.Attr.IsExistsAttribute(node, ELLIPSIS_TOOLTIP_MARKER_ATTR);
  });
 },
 RequireAssignTooltips: function() {
  return this.enableEllipsis && !ASPx.Browser.MobileUI;
 },
 RemoveEllipsisFromNode: function(node) {
  ASPx.RemoveClassNameFromElement(node, ELLIPSIS_MARKER_CLASS);
  this.RemoveEllipsisTooltip(node);
 },
 RemoveEllipsisTooltip: function(node) {
  if(ASPx.Attr.IsExistsAttribute(node, ELLIPSIS_TOOLTIP_MARKER_ATTR)) {
   ASPx.Attr.RemoveAttribute(node, "title");
   ASPx.Attr.RemoveAttribute(node, ELLIPSIS_TOOLTIP_MARKER_ATTR);
  }
 },
 OnBrowserWindowResize: function(e) {
 },
 OnBrowserWindowResizeInternal: function(e){
  if(this.BrowserWindowResizeSubscriber()) 
   this.OnBrowserWindowResize(e);
 },
 BrowserWindowResizeSubscriber: function() {
  return this.widthValueSetInPercentage || !this.IsAdjusted();
 },
 ShrinkWrappedText: function(getElements, key, reCorrect) {
  if(!ASPx.Browser.Safari) return;
  var elements = ASPx.CacheHelper.GetCachedElements(this, key, getElements, this.wrappedTextContainers);
  for(var i = 0; i < elements.length; i++)
   this.ShrinkWrappedTextInContainer(elements[i], reCorrect);
 },
 ShrinkWrappedTextInContainer: function(container, reCorrect) {
  if(!ASPx.Browser.Safari || !container || (container.dxWrappedTextShrinked && !reCorrect) || container.offsetWidth === 0) return;
  ASPx.ShrinkWrappedTextInContainer(container);
  container.dxWrappedTextShrinked = true;
 },
 CorrectWrappedText: function(getElements, key, reCorrect) {
  var elements = ASPx.CacheHelper.GetCachedElements(this, key, getElements, this.wrappedTextContainers);
  for(var i = 0; i < elements.length; i++)
   this.CorrectWrappedTextInContainer(elements[i], reCorrect);
 },
 CorrectWrappedTextInContainer: function(container, reCorrect) {
  if(!container || (container.dxWrappedTextCorrected && !reCorrect) || container.offsetWidth === 0) return;
  ASPx.AdjustWrappedTextInContainer(container);
  container.dxWrappedTextCorrected = true;
 },
 CorrectVerticalAlignment: function(alignMethod, getElements, key, reAlign) {
  var elements = ASPx.CacheHelper.GetCachedElements(this, key, getElements, this.verticalAlignedElements);
  for(var i = 0; i < elements.length; i++)
   this.CorrectElementVerticalAlignment(alignMethod, elements[i], reAlign);
 },
 CorrectElementVerticalAlignment: function(alignMethod, element, reAlign) {
  if(!element || (element.dxVerticalAligned && !reAlign) || element.offsetHeight === 0) return;
  alignMethod(element);
  element.dxVerticalAligned = true;
 },
 ClearVerticalAlignedElementsCache: function() {
  ASPx.CacheHelper.DropCache(this.verticalAlignedElements);
 },
 ClearWrappedTextContainersCache: function() {
  ASPx.CacheHelper.DropCache(this.wrappedTextContainers);
 },
 AdjustPagerControls: function() {
  if(typeof(ASPx.GetPagersCollection) != "undefined")
   ASPx.GetPagersCollection().AdjustControls(this.GetMainElement());
 },
 RegisterInControlTree: function(tree) {
  var mainElement = this.GetMainElement();
  if(mainElement && mainElement.id)
   tree.createNode(mainElement.id, this);
 },
 GetItemElementName: function(element) {
  var name = "";
  if(element.id)
   name = element.id.substring(this.name.length + 1);
  return name;
 },
 GetLinkElement: function(element) {
  if(element == null) return null;
  return (element.tagName == "A") ? element : ASPx.GetNodeByTagName(element, "A", 0);
 },
 GetInternalHyperlinkElement: function(parentElement, index) {
  var element = ASPx.GetNodeByTagName(parentElement, "A", index);
  if(element == null) 
   element = ASPx.GetNodeByTagName(parentElement, "SPAN", index);
  return element;
 },
 OnControlClick: function(clickedElement, htmlEvent) {
 }
});
ASPxClientControl.Cast = function(obj) {
 if(typeof obj == "string")
  return window[obj];
 return obj;
};
ASPxClientControl.AdjustControls = function(container, collapseControls){
 aspxGetControlCollection().AdjustControls(container, collapseControls);
};
ASPxClientControl.GetControlCollection = function(){
 return aspxGetControlCollection();
};
ASPxClientControl.LeadingAfterInitCallConsts = {
 None: 0,
 Direct: 1,
 Reverse: 2
};
var ASPxClientComponent = ASPx.CreateClass(ASPxClientControl, {
 constructor: function (name) {
  this.constructor.prototype.constructor.call(this, name);
 },
 IsDOMDisposed: function() { 
  return false;
 }
});
var ASPxClientControlCollection = ASPx.CreateClass(ASPx.CollectionBase, {
 constructor: function(){
  this.constructor.prototype.constructor.call(this);
  this.prevWndWidth = "";
  this.prevWndHeight = "";
  this.requestCountInternal = 0; 
  this.BeforeInitCallback = new ASPxClientEvent();
  this.ControlsInitialized = new ASPxClientEvent();
  this.BrowserWindowResized = new ASPxClientEvent();
  this.BrowserWindowResizedInternal = new ASPxClientEvent();
  this.BeginCallback = new ASPxClientEvent();
  this.EndCallback = new ASPxClientEvent();
  this.CallbackError = new ASPxClientEvent();
  this.ValidationCompleted = new ASPxClientEvent();
  aspxGetControlCollectionCollection().Add(this);
 },
 Add: function(element) {
  var existsElement = this.Get(element.name);
  if(existsElement && existsElement !== element) 
   this.Remove(existsElement);
  ASPx.CollectionBase.prototype.Add.call(this, element.name, element);
 },
 Remove: function(element) {
  if(element && element instanceof ASPxClientControl && !element.IsDisposed())
   element.OnDispose();
  ASPx.CollectionBase.prototype.Remove.call(this, element.name);
 },
 GetGlobal: function(name) {
  var result = window[name];
  return result && Ident.IsASPxClientControl(result)
   ? result
   : null;
 },
 GetByName: function(name){
  return this.Get(name) || this.GetGlobal(name);
 },
 GetCollectionType: function(){
  return ASPxClientControlCollection.BaseCollectionType;
 },
 GetControlsByPredicate: function(predicate) {
  var result = [];
  this.ForEachControl(function(control) {
   if(!predicate || predicate(control))
    result.push(control);
  });
  return result;
 },
 GetControlsByType: function(type) {
  return this.GetControlsByPredicate(function(control) { 
   return type && (control instanceof type);
  });
 },
 ForEachControl: function(action, context) {
  context = context || this;
  this.elementsMap.forEachEntry(function(name, control) {
   if(Ident.IsASPxClientControl(control) && (!this.filterPredicate || this.filterPredicate(control)))
    return action.call(context, control);
  }, context);
 },
 ProcessActionByPredicate: function(action, predicate) {
  try {
   this.filterPredicate = predicate;
   action(this);
  }
  finally {
   this.filterPredicate = null;
  }
 },
 adjustControlsInternal: function(container, context, collapseControls, adjustFunc) {
  context = context || this;
  var func = function(control) {
   adjustFunc.call(context, control);
  };
  ASPx.GetControlAdjuster().adjustControlsInHierarchy(this, func, container, collapseControls);
 },
 AdjustControls: function(container, collapseControls) {
  container = container || null;
  window.setTimeout(function() {
   this.AdjustControlsCore(container, collapseControls);
  }.aspxBind(this), 0);
 },
 AdjustControlsCore: function(container, collapseControls) {
  var adjustFunction = function(control) { control.AdjustControl(); };
  this.adjustControlsInternal(container, this, collapseControls, adjustFunction);
 },
 CollapseControls: function(container) {
  this.ProcessControlsInContainer(container, function(control) {
   if(control.isASPxClientEdit)
    control.CollapseEditor();
   else if(!!window.ASPxClientRibbon && control instanceof ASPxClientRibbon)
    control.CollapseControl();
  });
 },
 AtlasInitialize: function(isCallback) {
  this.ForEachControl(function(control) {
   control.AtlasPreInitialize();
  });
  ASPx.ProcessScriptsAndLinks("", isCallback);
  this.ForEachControl(function(control) {
   control.AtlasInitialize();
  });
 },
 DOMContentLoaded: function() {
  this.ForEachControl(function(control){
    control.DOMContentLoaded();
  });
 },
 OnDocumentUnload: function() {
  this.ForEachControl(function(control) {
   control.RaiseUnload();
  });
 },
 Initialize: function() {
  ASPx.GetPostHandler().Post.AddHandler(
   function(s, e) { this.OnPost(e); }.aspxBind(this)
  );
  ASPx.GetPostHandler().PostFinalization.AddHandler(
   function(s, e) { this.OnPostFinalization(e); }.aspxBind(this)
  );
  this.InitializeElements(false );
  if(typeof(Sys) != "undefined" && typeof(Sys.Application) != "undefined") {
   var checkIsInitialized = function() {
    if(Sys.Application.get_isInitialized())
     Sys.Application.add_load(aspxCAInit);
    else
     setTimeout(checkIsInitialized, 0);
   };
   checkIsInitialized();
  }
  this.InitWindowSizeCache();
 },
 FinalizeInitialization: function() {
  this.ForEachControl(function(control) {
   control.FinalizeInitialization();
  });
 },
 InitializeElements: function(isCallback) {
  this.ForEachControl(function(control){
   if(!control.isInitialized)
    control.Initialize();
  });
  this.AfterInitializeElementsLeadingCall();
  this.AfterInitializeElements();
  this.RaiseControlsInitialized(isCallback);
 },
 AfterInitializeElementsLeadingCall: function() {
  var controls = {};
  controls[ASPxClientControl.LeadingAfterInitCallConsts.Direct] = [];
  controls[ASPxClientControl.LeadingAfterInitCallConsts.Reverse] = [];
  this.ForEachControl(function(control) {
   if(control.leadingAfterInitCall != ASPxClientControl.LeadingAfterInitCallConsts.None && !control.isInitialized)
    controls[control.leadingAfterInitCall].push(control);
  });
  var directInitControls = controls[ASPxClientControl.LeadingAfterInitCallConsts.Direct],
   reverseInitControls = controls[ASPxClientControl.LeadingAfterInitCallConsts.Reverse];
  for(var i = 0, control; control = directInitControls[i]; i++)
   control.AfterInitialize();
  for(var i = reverseInitControls.length - 1, control; control = reverseInitControls[i]; i--)
   control.AfterInitialize();
 },
 AfterInitializeElements: function() {
  this.ForEachControl(function(control) {
   if(control.leadingAfterInitCall == ASPxClientControl.LeadingAfterInitCallConsts.None && !control.isInitialized)
    control.AfterInitialize();
  });
  ASPx.RippleHelper.Init();
 },
 DoFinalizeCallback: function() {
  this.ForEachControl(function(control){
   control.DoFinalizeCallback();
  });
 },
 ProcessControlsInContainer: function(container, processFunc, filterFunc) {
  this.ForEachControl(function(control){
   if((!filterFunc || filterFunc(control)) && (!container || this.IsControlInContainer(container, control)))
    processFunc(control);
  });
 },
 IsControlInContainer: function(container, control) {
  if(control.GetMainElement) {
   var mainElement = control.GetMainElement();
   if(mainElement && (mainElement != container)) {
    if(ASPx.GetIsParent(container, mainElement))
     return true;
   }
  }
  return false;
 },
 RaiseControlsInitialized: function(isCallback) {
  if(typeof(isCallback) == "undefined")
   isCallback = true;
  var args = new ASPxClientControlsInitializedEventArgs(isCallback);
  if(!this.ControlsInitialized.IsEmpty())  
   this.ControlsInitialized.FireEvent(this, args);
  this.ForEachControl(function(control){
   control.OnGlobalControlsInitialized(args);
  });
 },
 RaiseBrowserWindowResized: function() {
  var args = new ASPxClientEventArgs();
  if(!this.BrowserWindowResized.IsEmpty())
   this.BrowserWindowResized.FireEvent(this, args);
  this.ForEachControl(function(control){
   control.OnGlobalBrowserWindowResized(args);
  });
 },
 RaiseBrowserWindowResizedInternal: function(eventInfo) {
  var args = new ASPxClientBrowserWindowResizedInternalEventArgs(eventInfo);
  if(!this.BrowserWindowResizedInternal.IsEmpty())
   this.BrowserWindowResizedInternal.FireEvent(this, args);
 },
 RaiseBeginCallback: function (control, command) {
  var args = new ASPxClientGlobalBeginCallbackEventArgs(control, command);
  if(!this.BeginCallback.IsEmpty())
   this.BeginCallback.FireEvent(this, args);
  this.ForEachControl(function(control){
   control.OnGlobalBeginCallback(args);
  });
  this.IncrementRequestCount();
 },
 RaiseEndCallback: function (control) {
  var args = new ASPxClientGlobalEndCallbackEventArgs(control);
  if (!this.EndCallback.IsEmpty()) 
   this.EndCallback.FireEvent(this, args);
  this.ForEachControl(function(control){
   control.OnGlobalEndCallback(args);
  });
  this.DecrementRequestCount();
 },
 InCallback: function() {
  return this.requestCountInternal > 0;
 },
 RaiseCallbackError: function (control, message, callbackId) {
  var args = new ASPxClientGlobalCallbackErrorEventArgs(control, message, callbackId);
  if (!this.CallbackError.IsEmpty()) 
   this.CallbackError.FireEvent(this, args);
  this.ForEachControl(function(control){
   control.OnGlobalCallbackError(args);
  });
  if(args.handled)
   return { isHandled: true, errorMessage: args.message };  
  return { isHandled: false, errorMessage: message };
 },
 RaiseValidationCompleted: function (container, validationGroup, invisibleControlsValidated, isValid, firstInvalidControl, firstVisibleInvalidControl) {
  var args = new ASPxClientValidationCompletedEventArgs(container, validationGroup, invisibleControlsValidated, isValid, firstInvalidControl, firstVisibleInvalidControl);
  if (!this.ValidationCompleted.IsEmpty()) 
   this.ValidationCompleted.FireEvent(this, args);
  this.ForEachControl(function(control){
   control.OnGlobalValidationCompleted(args);
  });
  return args.isValid;
 },
 Before_WebForm_InitCallback: function(callbackOwnerID){
  var args = new BeforeInitCallbackEventArgs(callbackOwnerID);
  this.BeforeInitCallback.FireEvent(this, args);
 },
 InitWindowSizeCache: function(){
  this.prevWndWidth = ASPx.GetDocumentClientWidth();
  this.prevWndHeight = ASPx.GetDocumentClientHeight();
 },
 OnBrowserWindowResize: function(evt){
  this.OnBrowserWindowResizeCore(evt);
 },
 OnBrowserWindowResizeCore: function(htmlEvent){
  var args = this.CreateOnBrowserWindowResizeEventArgs(htmlEvent);
  if(this.CalculateIsBrowserWindowSizeChanged()) {
   this.RaiseBrowserWindowResizedInternal(args);
   this.adjustControlsInternal(null, this, true, function(control) {
    if(control.IsDOMInitialized())
     control.OnBrowserWindowResizeInternal(args);
   });
   this.RaiseBrowserWindowResized();
  }
 },
 CreateOnBrowserWindowResizeEventArgs: function(htmlEvent) {
  return {
   htmlEvent: htmlEvent,
   wndWidth: ASPx.GetDocumentClientWidth(),
   wndHeight: ASPx.GetDocumentClientHeight(),
   prevWndWidth: this.prevWndWidth,
   prevWndHeight: this.prevWndHeight,
   virtualKeyboardShownOnAndroid: this.IsVirtualKeyboardShownOnAndroid()
  };
 },
 IsVirtualKeyboardShownOnAndroid: function() {
  if(!ASPx.Browser.AndroidMobilePlatform)
   return false;
  var documentClientWidth = ASPx.GetDocumentClientWidth();
  var documentClientHeight = ASPx.GetDocumentClientHeight();
  var isDocumentClientHeightChangedOnly = documentClientWidth === this.prevWndWidth && documentClientHeight !== this.prevWndHeight;
  return isDocumentClientHeightChangedOnly && this.IsElementSupportKeyboardInput(document.activeElement);
 },
 IsElementSupportKeyboardInput: function(element) {
  if(!element || !element.tagName)
   return false;
  var supportedKeyboardInputTagNames = ["INPUT", "TEXTAREA"];
  return supportedKeyboardInputTagNames.indexOf(element.tagName) !== -1;
 },
 CalculateIsBrowserWindowSizeChanged: function(){
  var wndWidth = ASPx.GetDocumentClientWidth();
  var wndHeight = ASPx.GetDocumentClientHeight();
  var isBrowserWindowSizeChanged = (this.prevWndWidth != wndWidth) || (this.prevWndHeight != wndHeight);
  if(isBrowserWindowSizeChanged){
   this.prevWndWidth = wndWidth;
   this.prevWndHeight = wndHeight;
   return true;
  }
  return false;
 },
 OnPost: function(args){
  this.ForEachControl(function(control) {
   control.OnPost(args);
  }, null);
 },
 OnPostFinalization: function(args){
  this.ForEachControl(function(control) {
   control.OnPostFinalization(args);
  }, null);
 },
 IncrementRequestCount: function() {
  this.requestCountInternal++;
 },
 DecrementRequestCount: function() {
  this.requestCountInternal--;
 },
 ResetRequestCount: function() {
  this.requestCountInternal = 0;
 }
});
ASPxClientControlCollection.BaseCollectionType = "Control";
var controlCollection = null;
function aspxGetControlCollection(){
 if(controlCollection == null) {
  controlCollection = new ASPxClientControlCollection();
  if(ASPx.loadControlCollectionPreloadHandlers)
   ASPx.loadControlCollectionPreloadHandlers(controlCollection);
 }
 return controlCollection;
}
var ControlCollectionCollection = ASPx.CreateClass(ASPx.CollectionBase, {
 constructor: function(){
  this.constructor.prototype.constructor.call(this);
 },
 Add: function(element) {
  var key = element.GetCollectionType();
  if(!key) throw "The collection type isn't specified.";
  if(this.Get(key)) throw "The collection with type='" + key + "' already exists.";
  ASPx.CollectionBase.prototype.Add.call(this, key, element);
 },
 RemoveDisposedControls: function(){
  var baseCollection = this.Get(ASPxClientControlCollection.BaseCollectionType);
  var disposedControls = [];
  baseCollection.elementsMap.forEachEntry(function(name, control) {
   if(!ASPx.Ident.IsASPxClientControl(control)) return;
   if(control.IsDOMDisposed())
    disposedControls.push(control);
  });
  this.RemoveControls(disposedControls);
 },
 RemoveControls: function(controls){
  for(var i = 0; i < controls.length; i++) {
   this.elementsMap.forEachEntry(function(key, collection) {
    if(ASPx.Ident.IsASPxClientCollection(collection))
     collection.Remove(controls[i]);
   });
  }
 }
});
var controlCollectionCollection = null;
function aspxGetControlCollectionCollection(){
 if(controlCollectionCollection == null)
  controlCollectionCollection = new ControlCollectionCollection();
 return controlCollectionCollection;
}
var AriaDescriptionAttributes = {
 Role: "0",
 AriaLabel: "1",
 TabIndex: "2",
 AriaOwns: "3",
 AriaDescribedBy: "4",
 AriaDisabled: "5",
 AriaHasPopup: "6",
 AriaLevel: "7"
};
var AriaDescriptor = ASPx.CreateClass(null, {
 constructor: function(ownerControl, description) {
  this.ownerControl = ownerControl;
  this.rootElement = ownerControl.GetMainElement();
  this.description = description;
 },
 setDescription: function(name, argList) {
  var description = this.findChildDescription(name);
  if(description) {
   var elements = name ? this.rootElement.querySelectorAll(this.getDescriptionSelector(description)) : [this.rootElement];
   for(var i = 0; i < elements.length; i++)
    this.applyDescriptionToElement(elements[i], description, argList[i] || argList[0]);
  }
 },
 getDescriptionName: function(description) {
  return description.n;
 },
 getDescriptionSelector: function(description) {
  return description.s;
 },
 findChildDescription: function(name) {
  if(name === this.getDescriptionName(this.description))
   return this.description;
  var childCollection = this.description.c || [];
  for(var i = 0; i < childCollection.length; i++) {
   var childDescription = childCollection[i];
   if(this.getDescriptionName(childDescription) === name)
    return childDescription;
  }
  return null;
 },
 applyDescriptionToElement: function(element, description, args) {
  if(!description || !element)
   return;
  this.trySetAriaOwnsAttribute(element, description);
  this.trySetAriaDescribedByAttribute(element, description);
  this.trySetAttribute(element, description, AriaDescriptionAttributes.Role, "role");
  this.trySetAttribute(element, description, AriaDescriptionAttributes.TabIndex, "tabindex");
  this.trySetAttribute(element, description, AriaDescriptionAttributes.AriaLevel, "aria-level");
  this.executeOnDescription(description, AriaDescriptionAttributes.AriaLabel, function(value) {
   ASPx.Attr.SetAttribute(element, "aria-label", ASPx.Str.ApplyReplacement(value, args));
  });
  this.executeOnDescription(description, AriaDescriptionAttributes.AriaDisabled, function(value) {
   ASPx.Attr.SetAttribute(element, "aria-disabled", !!value); 
  });
  this.executeOnDescription(description, AriaDescriptionAttributes.AriaHasPopup, function(value) {
   ASPx.Attr.SetAttribute(element, "aria-haspopup", !!value);
  });
 },
 trySetAriaDescribedByAttribute: function(element, description) {
  this.executeOnDescription(description, AriaDescriptionAttributes.AriaDescribedBy, function(selectorInfo) {
   var descriptor = this.getNodesBySelector(element, selectorInfo.descriptorSelector)[0];
   var target = this.getNodesBySelector(element, selectorInfo.targetSelector)[0];
   if(!target || !descriptor)
    return;
   ASPx.Attr.SetAttribute(target, "aria-describedby", this.getNodeId(descriptor));
  });
 },
 trySetAriaOwnsAttribute: function(element, description) {
  this.executeOnDescription(description, AriaDescriptionAttributes.AriaOwns, function(selector) {
   var ownedNodes = this.getNodesBySelector(element, selector);
   var ariaOwnsAttributeValue = "";
   for(var i = 0; i < ownedNodes.length; i++)
    ariaOwnsAttributeValue += (this.getNodeId(ownedNodes[i]) + (i != ownedNodes.length - 1 ? " " : ""));
   ASPx.Attr.SetAttribute(element, "aria-owns", ariaOwnsAttributeValue);
  });
 },
 trySetAttribute: function(element, description, ariaAttribute, attributeName) {
  this.executeOnDescription(description, ariaAttribute, function(value) { 
   ASPx.Attr.SetAttribute(element, attributeName, description[ariaAttribute]); 
  });
 },
 executeOnDescription: function(description, ariaDescAttr, callback) {
  var descInfo = description[ariaDescAttr];
  if(ASPx.IsExists(descInfo))
   callback.aspxBind(this)(descInfo);
 },
 getNodesBySelector: function(element, selector) {
  var id = element.id || "";
  var childNodes = element.querySelectorAll("#" + this.getNodeId(element) + " > " + selector);
  ASPx.Attr.SetOrRemoveAttribute(element, "id", id);
  return childNodes;
 },
 getNodeId: function(node) {
  if(!node.id)
   node.id = this.createRandomId();
  return node.id; 
 },
 createRandomId: function() {
  return "r" + ASPx.CreateGuid();
 }
});
PagerCommands = {
 Next : "PBN",
 Prev : "PBP",
 Last : "PBL",
 First : "PBF",
 PageNumber : "PN",
 PageSize : "PSP"
};
ASPx.callbackProcessed = false;
ASPx.Callback = function(result, context){ 
 var collection = aspxGetControlCollection();
 collection.DoFinalizeCallback();
 var control = collection.Get(context);
 if(control != null)
  control.DoCallback(result);
 ASPx.RippleHelper.ReInit();
 ASPx.callbackProcessed = true;
};
ASPx.CallbackError = function(result, context){
 var control = aspxGetControlCollection().Get(context);
 if(control != null)
  control.DoCallbackError(result, false);
 ASPx.callbackProcessed = true;
};
ASPx.CClick = function(name, evt) {
 var control = aspxGetControlCollection().Get(name);
 if(control != null) control.DoControlClick(evt);
};
function aspxCAInit() {
 var isAppInit = typeof(Sys$_Application$initialize) != "undefined" &&
  ASPx.FunctionIsInCallstack(arguments.callee, Sys$_Application$initialize, 10 );
 aspxGetControlCollection().AtlasInitialize(!isAppInit);
}
ASPx.Evt.AttachEventToElement(window, "resize", aspxGlobalWindowResize);
function aspxGlobalWindowResize(evt){
 aspxGetControlCollection().OnBrowserWindowResize(evt); 
}
ASPx.Evt.AttachEventToElement(window, "unload", aspxClassesUnload);
function aspxClassesUnload(evt) {
 aspxGetControlCollection().OnDocumentUnload();
}
ASPx.attachToLoad(aspxClassesDOMContentLoaded);
function aspxClassesDOMContentLoaded(evt){
 aspxGetControlCollection().DOMContentLoaded();
}
ASPx.GetControlCollection = aspxGetControlCollection;
ASPx.GetControlCollectionCollection = aspxGetControlCollectionCollection;
ASPx.GetPersistentControlPropertiesStorage = _aspxGetPersistentControlPropertiesStorage;
ASPx.PagerCommands = PagerCommands;
ASPx.ELLIPSIS_MARKER_CLASS = ELLIPSIS_MARKER_CLASS;
window.ASPxClientBeginCallbackEventArgs = ASPxClientBeginCallbackEventArgs;
window.ASPxClientGlobalBeginCallbackEventArgs = ASPxClientGlobalBeginCallbackEventArgs;
window.ASPxClientEndCallbackEventArgs = ASPxClientEndCallbackEventArgs;
window.ASPxClientGlobalEndCallbackEventArgs = ASPxClientGlobalEndCallbackEventArgs;
window.ASPxClientCallbackErrorEventArgs = ASPxClientCallbackErrorEventArgs;
window.ASPxClientGlobalCallbackErrorEventArgs = ASPxClientGlobalCallbackErrorEventArgs;
window.ASPxClientCustomDataCallbackEventArgs = ASPxClientCustomDataCallbackEventArgs;
window.ASPxClientValidationCompletedEventArgs = ASPxClientValidationCompletedEventArgs;
window.ASPxClientControlsInitializedEventArgs = ASPxClientControlsInitializedEventArgs;
window.ASPxClientControlBeforePronounceEventArgs = ASPxClientControlBeforePronounceEventArgs;
window.ASPxClientControlUnloadEventArgs = ASPxClientControlUnloadEventArgs;
window.ASPxClientEndFocusEventArgs = ASPxClientEndFocusEventArgs;
window.ASPxClientItemFocusedEventArgs = ASPxClientItemFocusedEventArgs;
window.ASPxClientControlCollection = ASPxClientControlCollection;
window.ASPxClientControlBase = ASPxClientControlBase;
window.ASPxClientControl = ASPxClientControl;
window.ASPxClientComponent = ASPxClientComponent;
})(ASPx);

(function () {
 var PositionAnimationTransition = ASPx.CreateClass(ASPx.AnimationTransitionBase, {
  constructor: function (element, options) {
   this.constructor.prototype.constructor.call(this, element, options);
   this.direction = options.direction;
   this.animationTransition = this.createAnimationTransition();
   AnimationHelper.appendWKAnimationClassNameIfRequired(this.element);
  },
  Start: function (to) {
   var from = this.GetValue();
   if(ASPx.AnimationUtils.CanUseCssTransform()) {
    from = this.convertPosToCssTransformPos(from);
    to = this.convertPosToCssTransformPos(to);
   }
   this.animationTransition.Start(from, to);
  },
  SetValue: function (value) {
   ASPx.AnimationUtils.SetTransformValue(this.element, value, this.direction == AnimationHelper.SLIDE_VERTICAL_DIRECTION);
  },
  GetValue: function () {
   return ASPx.AnimationUtils.GetTransformValue(this.element, this.direction == AnimationHelper.SLIDE_VERTICAL_DIRECTION);
  },
  createAnimationTransition: function () {
   var transition = ASPx.AnimationUtils.CanUseCssTransform() ? this.createTransformAnimationTransition() : this.createPositionAnimationTransition();
   transition.transition = ASPx.AnimationConstants.Transitions.POW_EASE_OUT;
   return transition;
  },
  createTransformAnimationTransition: function () {
   return ASPx.AnimationUtils.createCssAnimationTransition(this.element, {
    property: ASPx.AnimationUtils.CanUseCssTransform(),
    duration: this.duration,
    onComplete: this.onComplete
   });
  },
  createPositionAnimationTransition: function () {
   return AnimationHelper.createAnimationTransition(this.element, {
    property: this.direction == AnimationHelper.SLIDE_VERTICAL_DIRECTION ? "top" : "left",
    unit: "px",
    duration: this.duration,
    onComplete: this.onComplete
   });
  },
  convertPosToCssTransformPos: function (position) {
   return ASPx.AnimationUtils.GetTransformCssText(position, this.direction == AnimationHelper.SLIDE_VERTICAL_DIRECTION);
  }
 });
 var AnimationHelper = {
  SLIDE_HORIZONTAL_DIRECTION: 0,
  SLIDE_VERTICAL_DIRECTION: 1,
  SLIDE_TOP_DIRECTION: 0,
  SLIDE_RIGHT_DIRECTION: 1,
  SLIDE_BOTTOM_DIRECTION: 2,
  SLIDE_LEFT_DIRECTION: 3,
  SLIDE_CONTAINER_CLASS: "dxAC",
  MAXIMUM_DEPTH: 3,
  createAnimationTransition: function (element, options) {
   if(options.onStep)
    options.animationEngineType = AnimationEngineType.JS;
   switch(options.animationEngineType) {
    case AnimationEngineType.JS:
     return ASPx.AnimationUtils.createJsAnimationTransition(element, options);
    case AnimationEngineType.CSS:
     return ASPx.AnimationUtils.createCssAnimationTransition(element, options);
    default:
     return ASPx.AnimationUtils.CanUseCssTransition() ? ASPx.AnimationUtils.createCssAnimationTransition(element, options) :
      ASPx.AnimationUtils.createJsAnimationTransition(element, options);
   }
  },
  createMultipleAnimationTransition: function (element, options) {
   return ASPx.AnimationUtils.createMultipleAnimationTransition(element, options);
  },
  createSimpleAnimationTransition: function (options) {
   return ASPx.AnimationUtils.createSimpleAnimationTransition(options);
  },
  cancelAnimation: function (element) {
   ASPx.AnimationTransitionBase.Cancel(element);
  },
  fadeIn: function(element, onComplete, duration, animationEngineType) {
   AnimationHelper.fadeTo(element, {
    from: 0, to: 1,
    onComplete: onComplete,
    animationEngineType: animationEngineType || AnimationEngineType.DEFAULT,
    duration: duration || ASPx.AnimationConstants.Durations.DEFAULT
   });
  },
  fadeOut: function(element, onComplete, duration, animationEngineType) {
   AnimationHelper.fadeTo(element, {
    from: ASPx.GetElementOpacity(element), to: 0,
    onComplete: onComplete,
    animationEngineType: animationEngineType || AnimationEngineType.DEFAULT,
    duration: duration || ASPx.AnimationConstants.Durations.DEFAULT
   });
  },
  fadeTo: function (element, options) {
   options.property = "opacity";
   if(!options.duration)
    options.duration = ASPx.AnimationConstants.Durations.SHORT;
   var transition = AnimationHelper.createAnimationTransition(element, options);
   if(!ASPx.IsExists(options.from))
    options.from = transition.GetValue();
   transition.Start(options.from, options.to);
  },
  slideIn: function (element, direction, onComplete, animationEngineType, rtl) {
   AnimationHelper.setOpacity(element, 1);
   var animationContainer = AnimationHelper.getSlideAnimationContainer(element, true, true);
   var pos = AnimationHelper.getSlideInStartPos(animationContainer, direction, rtl);
   var transition = AnimationHelper.createSlideTransition(animationContainer, direction,
    function (el) {
     AnimationHelper.resetSlideAnimationContainerSize(animationContainer);
     if(onComplete)
      onComplete(el);
    }, animationEngineType, rtl);
   transition.Start(pos, 0);
  },
  slideOut: function (element, direction, onComplete, animationEngineType, rtl) {
   var animationContainer = AnimationHelper.getSlideAnimationContainer(element, true, true);
   var pos = AnimationHelper.getSlideOutFinishPos(animationContainer, direction, rtl);
   var transition = AnimationHelper.createSlideTransition(animationContainer, direction,
    function (el) {
     AnimationHelper.setOpacity(el.firstChild, 0);
     if(onComplete)
      onComplete(el);
    }, animationEngineType, rtl);
   transition.Start(pos);
  },
  slideTo: function (element, options) {
   if(!ASPx.IsExists(options.direction))
    options.direction = AnimationHelper.SLIDE_HORIZONTAL_DIRECTION;
   var transition = new PositionAnimationTransition(element, options);
   transition.Start(options.to);
  },
  setOpacity: function (element, value) {
   ASPx.AnimationUtils.setOpacity(element, value);
  },
  appendWKAnimationClassNameIfRequired: function (element) {
   if(ASPx.AnimationUtils.CanUseCssTransform() && ASPx.Browser.WebKitFamily && !ASPx.ElementHasCssClass(element, "dx-wbv"))
    element.className += " dx-wbv";
  },
  findSlideAnimationContainer: function (element) {
   var container = element;
   for(var i = 0; i < AnimationHelper.MAXIMUM_DEPTH; i++) {
    if(container.tagName == "BODY")
     return null;
    if(ASPx.ElementHasCssClass(container, AnimationHelper.SLIDE_CONTAINER_CLASS))
     return container;
    container = container.parentNode;
   }
   return null;
  },
  createSlideAnimationContainer: function (element) {
   var rootContainer = document.createElement("DIV");
   ASPx.SetStyles(rootContainer, {
    className: AnimationHelper.SLIDE_CONTAINER_CLASS,
    overflow: "hidden"
   });
   var elementContainer = document.createElement("DIV");
   rootContainer.appendChild(elementContainer);
   var parentNode = element.parentNode;
   parentNode.insertBefore(rootContainer, element);
   elementContainer.appendChild(element);
   return rootContainer;
  },
  getSlideAnimationContainer: function (element, create, fixSize) {
   if(!element) return;
   var width = element.offsetWidth;
   var height = element.offsetHeight;
   var container;
   if(element.className == AnimationHelper.SLIDE_CONTAINER_CLASS)
    container = element;
   if(!container)
    container = AnimationHelper.findSlideAnimationContainer(element);
   if(!container && create)
    container = AnimationHelper.createSlideAnimationContainer(element);
   if(container && fixSize) {
    ASPx.SetStyles(container, {
     width: width, height: height
    });
    ASPx.SetStyles(container.firstChild, {
     width: width, height: height
    });
   }
   return container;
  },
  resetSlideAnimationContainerSize: function (container) {
   ASPx.SetStyles(container, {
    width: "", height: ""
   });
   ASPx.SetStyles(container.firstChild, {
    width: "", height: ""
   });
  },
  getModifyProperty: function (direction, rtl) {
   if(direction == AnimationHelper.SLIDE_TOP_DIRECTION || direction == AnimationHelper.SLIDE_BOTTOM_DIRECTION)
    return "marginTop";
   return rtl ? "margin-right" : "margin-left";
  },
  createSlideTransition: function (animationContainer, direction, complete, animationEngineType, rtl) {
   if(rtl == undefined)
    rtl = false;
   return AnimationHelper.createAnimationTransition(animationContainer.firstChild, {
    unit: "px",
    property: AnimationHelper.getModifyProperty(direction, rtl),
    onComplete: complete,
    animationEngineType: animationEngineType
   });
  },
  getSlideInStartPos: function (animationContainer, direction, rtl) {
   var dir = rtl ? -1 : 1;
   switch (direction) {
    case AnimationHelper.SLIDE_TOP_DIRECTION:
     return animationContainer.offsetHeight;
    case AnimationHelper.SLIDE_LEFT_DIRECTION:
     return animationContainer.offsetWidth * dir;
    case AnimationHelper.SLIDE_RIGHT_DIRECTION:
     return -animationContainer.offsetWidth * dir;
    case AnimationHelper.SLIDE_BOTTOM_DIRECTION:
     return -animationContainer.offsetHeight;
   }
  },
  getSlideOutFinishPos: function (animationContainer, direction, rtl) {
   var dir = rtl ? -1 : 1;
   switch (direction) {
    case AnimationHelper.SLIDE_TOP_DIRECTION:
     return -animationContainer.offsetHeight;
    case AnimationHelper.SLIDE_LEFT_DIRECTION:
     return -animationContainer.offsetWidth * dir;
    case AnimationHelper.SLIDE_RIGHT_DIRECTION:
     return animationContainer.offsetWidth * dir;
    case AnimationHelper.SLIDE_BOTTOM_DIRECTION:
     return animationContainer.offsetHeight;
   }
  }
 };
 var GestureHandler = ASPx.CreateClass(null, {
  constructor: function (getAnimationElement, canHandle, allowStart) {
   this.getAnimationElement = getAnimationElement;
   this.canHandle = canHandle;
   this.allowStart = allowStart;
   this.startMousePosX = 0;
   this.startMousePosY = 0;
   this.startTime = null;
   this.isEventsPrevented = false;
   this.savedElements = [];
  },
  OnSelectStart: function(evt) {
   ASPx.Evt.PreventEvent(evt); 
  },
  OnDragStart: function(evt) {
   ASPx.Evt.PreventEvent(evt);  
  },
  OnMouseDown: function (evt) {
   this.startMousePosX = ASPx.Evt.GetEventX(evt);
   this.startMousePosY = ASPx.Evt.GetEventY(evt);
   this.startTime = new Date();
  },
  OnMouseMove: function(evt) {
   if(!ASPx.Browser.MobileUI)
    ASPx.Selection.Clear();
   if(Math.abs(this.GetCurrentDistanceX(evt)) < GestureHandler.SLIDER_MIN_START_DISTANCE && Math.abs(this.GetCurrentDistanceY(evt)) < GestureHandler.SLIDER_MIN_START_DISTANCE)
    GesturesHelper.isExecutedGesture = false;
  },
  OnMouseUp: function (evt) {
  },
  CanHandleEvent: function (evt) {
   return !this.canHandle || this.canHandle(evt);
  },
  IsStartAllowed: function(value) {
   return !this.allowStart || this.allowStart(value);
  },
  RollbackGesture: function () {
  },
  GetRubberPosition: function (position) {
   return position / GestureHandler.FACTOR_RUBBER;
  },
  GetCurrentDistanceX: function (evt) {
   return ASPx.Evt.GetEventX(evt) - this.startMousePosX;
  },
  GetCurrentDistanceY: function (evt) {
   return ASPx.Evt.GetEventY(evt) - this.startMousePosY;
  },
  GetDistanceLimit: function () {
   return (new Date() - this.startTime) < GestureHandler.MAX_TIME_SPAN ? GestureHandler.MIN_DISTANCE_LIMIT : GestureHandler.MAX_DISTANCE_LIMIT;
  },
  GetContainerElement: function () {
  },
  AttachPreventEvents: function (evt) {
   if(!this.isEventsPrevented) {
    var element = ASPx.Evt.GetEventSource(evt);
    var container = this.GetContainerElement();
    while(element && element != container) {
     ASPx.Evt.AttachEventToElement(element, "mouseup", ASPx.Evt.PreventEvent);
     ASPx.Evt.AttachEventToElement(element, "click", ASPx.Evt.PreventEvent);
     this.savedElements.push(element);
     element = element.parentNode;
    }
    this.isEventsPrevented = true;
   }
  },
  DetachPreventEvents: function () {
   if(this.isEventsPrevented) {
    window.setTimeout(function () {
     while(this.savedElements.length > 0) {
      var element = this.savedElements.pop();
      ASPx.Evt.DetachEventFromElement(element, "mouseup", ASPx.Evt.PreventEvent);
      ASPx.Evt.DetachEventFromElement(element, "click", ASPx.Evt.PreventEvent);
     }
    }.aspxBind(this), 0);
    this.isEventsPrevented = false;
   }
  }
 });
 GestureHandler.MAX_DISTANCE_LIMIT = 70;
 GestureHandler.MIN_DISTANCE_LIMIT = 10;
 GestureHandler.MIN_START_DISTANCE = 0;
 GestureHandler.SLIDER_MIN_START_DISTANCE = 5;
 GestureHandler.MAX_TIME_SPAN = 300;
 GestureHandler.FACTOR_RUBBER = 4;
 GestureHandler.RETURN_ANIMATION_DURATION = 150;
 var SwipeSlideGestureHandler = ASPx.CreateClass(GestureHandler, {
  constructor: function (getAnimationElement, direction, canHandle, backward, forward, rollback, move) {
   this.constructor.prototype.constructor.call(this, getAnimationElement, canHandle);
   this.slideElement = this.getAnimationElement();
   this.container = this.slideElement.parentNode;
   this.direction = direction;
   this.backward = backward;
   this.forward = forward;
   this.rollback = rollback;
   this.slideElementSize = 0;
   this.containerElementSize = 0;
   this.startSliderElementPosition = 0;
   this.centeredSlideElementPosition = 0;
  },
  OnMouseDown: function (evt) {
   GestureHandler.prototype.OnMouseDown.call(this, evt);
   this.slideElementSize = this.GetElementSize();
   this.startSliderElementPosition = this.GetElementPosition();
   this.containerElementSize = this.GetContainerElementSize();
   if(this.slideElementSize <= this.containerElementSize)
    this.centeredSlideElementPosition = (this.containerElementSize - this.slideElementSize) / 2;
  },
  OnMouseMove: function (evt) {
   GestureHandler.prototype.OnMouseMove.call(this, evt);
   if(!ASPx.Browser.TouchUI && !ASPx.GetIsParent(this.container, ASPx.Evt.GetEventSource(evt))) {
    GesturesHelper.OnDocumentMouseUp(evt);
    return;
   }
   var distance = this.GetCurrentDistance(evt);
   if(Math.abs(distance) < GestureHandler.SLIDER_MIN_START_DISTANCE || ASPx.TouchUIHelper.isGesture)
    return;
   this.SetElementPosition(this.GetCalculatedPosition(distance));
   this.AttachPreventEvents(evt);
   ASPx.Evt.PreventEvent(evt);
  },
  GetCalculatedPosition: function (distance) {
   ASPx.AnimationTransitionBase.Cancel(this.slideElement);
   var position = this.startSliderElementPosition + distance,
    maxPosition = -(this.slideElementSize - this.containerElementSize),
    minPosition = 0;
   if(this.centeredSlideElementPosition > 0)
    position = this.GetRubberPosition(distance) + this.centeredSlideElementPosition;
   else if(position > minPosition)
    position = this.GetRubberPosition(distance);
   else if(position < maxPosition)
    position = this.GetRubberPosition(distance) + maxPosition;
   return position;
  },
  OnMouseUp: function (evt) {
   this.DetachPreventEvents();
   if(this.GetCurrentDistance(evt) != 0)
    this.OnMouseUpCore(evt);
  },
  OnMouseUpCore: function (evt) {
   var distance = this.GetCurrentDistance(evt);
   if(this.centeredSlideElementPosition > 0 || this.CheckSlidePanelIsOutOfBounds())
    this.PerformRollback();
   else
    this.PerformAction(distance);
  },
  PerformAction: function (distance) {
   if(Math.abs(distance) < this.GetDistanceLimit())
    this.PerformRollback();
   else if(distance < 0)
    this.PerformForward();
   else
    this.PerformBackward();
  },
  PerformBackward: function () {
   this.backward();
  },
  PerformForward: function () {
   this.forward();
  },
  PerformRollback: function () {
   this.rollback();
  },
  CheckSlidePanelIsOutOfBounds: function () {
   var minOffset = -(this.slideElementSize - this.containerElementSize), maxOffset = 0;
   var slideElementPos = this.GetElementPosition();
   if(slideElementPos > maxOffset || slideElementPos < minOffset)
    return true;
   return false;
  },
  GetContainerElement: function () {
   return this.container;
  },
  GetElementSize: function () {
   return this.IsHorizontalDirection() ? this.slideElement.offsetWidth : this.slideElement.offsetHeight;
  },
  GetContainerElementSize: function () {
   return this.IsHorizontalDirection() ? ASPx.GetClearClientWidth(this.container) : ASPx.GetClearClientHeight(this.container);
  },
  GetCurrentDistance: function (evt) {
   return this.IsHorizontalDirection() ? this.GetCurrentDistanceX(evt) : this.GetCurrentDistanceY(evt);
  },
  GetElementPosition: function () {
   return ASPx.AnimationUtils.GetTransformValue(this.slideElement, !this.IsHorizontalDirection());
  },
  SetElementPosition: function (position) {
   ASPx.AnimationUtils.SetTransformValue(this.slideElement, position, !this.IsHorizontalDirection());
  },
  IsHorizontalDirection: function () {
   return this.direction == AnimationHelper.SLIDE_HORIZONTAL_DIRECTION;
  }
 });
 var SwipeSimpleSlideGestureHandler = ASPx.CreateClass(SwipeSlideGestureHandler, {
  constructor: function (getAnimationElement, direction, canHandle, backward, forward, rollback, updatePosition) {
   this.constructor.prototype.constructor.call(this, getAnimationElement, direction, canHandle, backward, forward, rollback);
   this.container = this.slideElement;
   this.updatePosition = updatePosition;
   this.prevDistance = 0;
  },
  OnMouseDown: function (evt) {
   GestureHandler.prototype.OnMouseDown.call(this, evt);
   this.prevDistance = 0;
  },
  OnMouseUpCore: function (evt) {
   this.PerformAction(this.GetCurrentDistance(evt));
  },
  PerformAction: function (distance) {
   if(Math.abs(distance) < this.GetDistanceLimit())
    this.PerformRollback();
   else if(distance < 0)
    this.PerformForward();
   else
    this.PerformBackward();
  },
  GetCalculatedPosition: function (distance) {
   var position = distance - this.prevDistance;
   this.prevDistance = distance;
   return position;
  },
  SetElementPosition: function (position) {
   this.updatePosition(position);
  }
 });
 var SwipeGestureHandler = ASPx.CreateClass(GestureHandler, {
  constructor: function (getAnimationElement, canHandle, allowStart, start, allowComplete, complete, cancel, animationEngineType, rtl) {
   this.constructor.prototype.constructor.call(this, getAnimationElement, canHandle, allowStart);
   this.start = start;
   this.allowComplete = allowComplete;
   this.complete = complete;
   this.cancel = cancel;
   this.animationTween = null;
   this.currentDistanceX = 0;
   this.currentDistanceY = 0;
   this.tryStartGesture = false;
   this.tryStartScrolling = false;
   this.animationEngineType = animationEngineType;
   this.rtl = rtl;
   this.UpdateAnimationContainer();
  },
  UpdateAnimationContainer: function () {
   this.animationContainer = AnimationHelper.getSlideAnimationContainer(this.getAnimationElement(), true, false);
  },
  CanHandleEvent: function (evt) {
   if(GestureHandler.prototype.CanHandleEvent.call(this, evt))
    return true;
   return this.animationTween && this.animationContainer && ASPx.GetIsParent(this.animationContainer, ASPx.Evt.GetEventSource(evt));
  },
  OnMouseDown: function (evt) {
   GestureHandler.prototype.OnMouseDown.call(this, evt);
   if(this.animationTween)
    this.animationTween.Cancel();
   this.currentDistanceX = 0;
   this.currentDistanceY = 0;
   this.tryStartGesture = false;
   this.tryStartScrolling = false;
  },
  OnMouseMove: function (evt) {
   GestureHandler.prototype.OnMouseMove.call(this, evt);
   var isZoomGestureConflict = evt.touches && evt.touches.length > 1;
   if (isZoomGestureConflict)
    return false;
   this.currentDistanceX = this.GetCurrentDistanceX(evt);
   this.currentDistanceY = this.GetCurrentDistanceY(evt);
   if(this.rtl)
    this.currentDistanceX = -this.currentDistanceX;
   if(!this.animationTween && !this.tryStartScrolling && (Math.abs(this.currentDistanceX) >
    GestureHandler.MIN_START_DISTANCE || Math.abs(this.currentDistanceY) > GestureHandler.MIN_START_DISTANCE)) {
    if(Math.abs(this.currentDistanceY) < Math.abs(this.currentDistanceX)) {
     this.tryStartGesture = true;
     if(this.IsStartAllowed(this.currentDistanceX)) {
      this.animationContainer = AnimationHelper.getSlideAnimationContainer(this.getAnimationElement(), true, true);
      this.animationTween = AnimationHelper.createSlideTransition(this.animationContainer, AnimationHelper.SLIDE_LEFT_DIRECTION,
       function () {
        AnimationHelper.resetSlideAnimationContainerSize(this.animationContainer);
        this.animationContainer = null;
        this.animationTween = null;
       }.aspxBind(this), this.animationEngineType, this.rtl);
      this.PerformStart(this.currentDistanceX);
      this.AttachPreventEvents(evt);
     }
    }
    else
     this.tryStartScrolling = true;
   }
   if(this.animationTween) {
    if(this.allowComplete && !this.allowComplete(this.currentDistanceX))
     this.currentDistanceX = this.GetRubberPosition(this.currentDistanceX);
    this.animationTween.SetValue(this.currentDistanceX);
   }
   if(!this.tryStartScrolling && !ASPx.TouchUIHelper.isGesture && evt.touches && evt.touches.length < 2)
    ASPx.Evt.PreventEvent(evt);
  },
  OnMouseUp: function (evt) {
   if(!this.animationTween) {
    if(this.tryStartGesture)
     this.PerformCancel(this.currentDistanceX);
   }
   else {
    if(Math.abs(this.currentDistanceX) < this.GetDistanceLimit())
     this.RollbackGesture();
    else {
     if(this.IsCompleteAllowed(this.currentDistanceX)) {
      this.PerformComplete(this.currentDistanceX);
      this.animationContainer = null;
      this.animationTween = null;
     }
     else
      this.RollbackGesture();
    }
   }
   this.DetachPreventEvents();
   this.tryStartGesture = false;
   this.tryStartScrolling = false;
  },
  PerformStart: function (value) {
   if(this.start)
    this.start(value);
  },
  IsCompleteAllowed: function (value) {
   return !this.allowComplete || this.allowComplete(value);
  },
  PerformComplete: function (value) {
   if(this.complete)
    this.complete(value);
  },
  PerformCancel: function (value) {
   if(this.cancel)
    this.cancel(value);
  },
  RollbackGesture: function () {
   this.animationTween.Start(this.currentDistanceX, 0);
  },
  ResetGestureElementPosition: function () {
   if (this.currentDistanceX === 0) return;
   var container = AnimationHelper.getSlideAnimationContainer(this.getAnimationElement());
   var onComplete = function () { AnimationHelper.resetSlideAnimationContainerSize(container); };
   var animation = AnimationHelper.createSlideTransition(container, AnimationHelper.SLIDE_LEFT_DIRECTION, onComplete, this.animationEngineType, this.rtl);
   animation.Start(this.currentDistanceX, 0);
  },
  GetContainerElement: function () {
   return this.animationContainer;
  }
 });
 var GesturesHelper = {
  handlers: {},
  activeHandler: null,
  isAttachedEvents: false,
  isExecutedGesture: false,
  AddSwipeGestureHandler: function (id, getAnimationElement, canHandle, allowStart, start, allowComplete, complete, cancel, animationEngineType, rtl) {
   this.handlers[id] = new SwipeGestureHandler(getAnimationElement, canHandle, allowStart, start, allowComplete, complete, cancel, animationEngineType, rtl);
  },
  UpdateSwipeAnimationContainer: function (id) {
   if(this.handlers[id])
    this.handlers[id].UpdateAnimationContainer();
  },
  AddSwipeSlideGestureHandler: function (id, getAnimationElement, direction, canHandle, backward, forward, rollback, updatePosition) {
   if(updatePosition)
    this.handlers[id] = new SwipeSimpleSlideGestureHandler(getAnimationElement, direction, canHandle, backward, forward, rollback, updatePosition);
   else
    this.handlers[id] = new SwipeSlideGestureHandler(getAnimationElement, direction, canHandle, backward, forward, rollback);
  },
  getParentDXEditorWithSwipeGestures: function(element) {
     return ASPx.GetParent(element, function(parent) {
      var parentObj = ASPx.GetControlCollection().Get(parent.id);
      return parentObj && parentObj.supportGestures && parentObj.isSwipeGesturesEnabled();
   });
  },
  canHandleMouseDown: function(evt) {
   if(!ASPx.Evt.IsLeftButtonPressed(evt))
    return false;
   var element = ASPx.Evt.GetEventSource(evt);
   var dxFocusedEditor = ASPx.Ident.scripts.ASPxClientEdit && ASPx.GetFocusedEditor();
   if(dxFocusedEditor && dxFocusedEditor.IsEditorElement(element)) {
    var elementParentDXEditorWithSwipeGestures = GesturesHelper.getParentDXEditorWithSwipeGestures(element);
    if(!elementParentDXEditorWithSwipeGestures || !dxFocusedEditor.IsEditorElement(elementParentDXEditorWithSwipeGestures))
     return false;
   }
   var isTextEditor = element.tagName == "TEXTAREA" || element.tagName == "INPUT" && ASPx.Attr.GetAttribute(element, "type") == "text";
   if(isTextEditor && document.activeElement == element)
    return false;
   return true;  
  },
  OnDocumentDragStart: function(evt) {
   if(GesturesHelper.activeHandler)
    GesturesHelper.activeHandler.OnDragStart(evt);
  },
  OnDocumentSelectStart: function(evt) {
   if(GesturesHelper.activeHandler)
    GesturesHelper.activeHandler.OnSelectStart(evt);
  },
  OnDocumentMouseDown: function (evt) {
   if(!GesturesHelper.canHandleMouseDown(evt))
    return;
   GesturesHelper.activeHandler = GesturesHelper.FindHandler(evt);
   if(GesturesHelper.activeHandler)
    GesturesHelper.activeHandler.OnMouseDown(evt);
  },
  OnDocumentMouseMove: function (evt) {
   if(GesturesHelper.activeHandler) {
    GesturesHelper.isExecutedGesture = true;
    GesturesHelper.activeHandler.OnMouseMove(evt);
   }
  },
  OnDocumentMouseUp: function (evt) {
   if(GesturesHelper.activeHandler) {
    GesturesHelper.activeHandler.OnMouseUp(evt);
    GesturesHelper.activeHandler = null;
    window.setTimeout(function () { GesturesHelper.isExecutedGesture = false; }, 0);
   }
  },
  AttachEvents: function () {
   if(!GesturesHelper.isAttachedEvents) {
    GesturesHelper.Attach(ASPx.Evt.AttachEventToElement);
    GesturesHelper.isAttachedEvents = true;
   }
  },
  DetachEvents: function () {
   if(GesturesHelper.isAttachedEvents) {
    GesturesHelper.Attach(ASPx.Evt.DetachEventFromElement);
    GesturesHelper.isAttachedEvents = false;
   }
  },
  Attach: function (changeEventsMethod) {
   var doc = window.document;
   changeEventsMethod(doc, ASPx.TouchUIHelper.touchMouseDownEventName, GesturesHelper.OnDocumentMouseDown);
   changeEventsMethod(doc, ASPx.TouchUIHelper.touchMouseMoveEventName, GesturesHelper.OnDocumentMouseMove);
   changeEventsMethod(doc, ASPx.TouchUIHelper.touchMouseUpEventName, GesturesHelper.OnDocumentMouseUp);
   if(!ASPx.Browser.MobileUI) {
    changeEventsMethod(doc, "selectstart", GesturesHelper.OnDocumentSelectStart);
    changeEventsMethod(doc, "dragstart", GesturesHelper.OnDocumentDragStart);
   }
  },
  FindHandler: function (evt) {
   var handlers = [];
   for(var id in GesturesHelper.handlers) {
    if(GesturesHelper.handlers.hasOwnProperty(id)) {
     var handler = GesturesHelper.handlers[id];
     if(handler.CanHandleEvent && handler.CanHandleEvent(evt))
      handlers.push(handler);
    }
   }
   if(!handlers.length)
    return null;
   handlers.sort(function (a, b) {
    return ASPx.GetIsParent(a.getAnimationElement(), b.getAnimationElement()) ? 1 : -1;
   });
   return handlers[0];
  },
  IsExecutedGesture: function () {
   return GesturesHelper.isExecutedGesture;
  }
 };
 GesturesHelper.AttachEvents();
 var AnimationEngineType = {
  "DEFAULT": 0,
  "CSS": 1,
  "JS": 2
 };
 ASPx.AnimationEngineType = AnimationEngineType;
 ASPx.AnimationHelper = AnimationHelper;
 ASPx.GesturesHelper = GesturesHelper;
})();

(function() {
 ASPxClientPanelBase = ASPx.CreateClass(ASPxClientControl, {
  constructor: function(name) {
   this.constructor.prototype.constructor.call(this, name);
   this.touchUIScroller = null;
  },
  Initialize: function(){
   ASPxClientControl.prototype.Initialize.call(this);
   this.touchUIScroller = ASPx.TouchUIHelper.makeScrollableIfRequired(this.GetMainElement());
  },
  getContentElement: function() {
   if(this.getAnimationContentContainerElement())
    return this.getAnimationContentContainerElement();
   if(this.getScrollContentContainerElement())
    return this.getScrollContentContainerElement();
   if(!ASPx.IsExistsElement(this.contentElement)){
    var element = this.GetMainElement();
    this.contentElement = element && element.tagName == "TABLE" ? element.rows[0].cells[0] : element;
   }
   return this.contentElement;
  },
  getAnimationContentContainerElement: function() {
   return null;
  },
  getScrollContentContainerElement: function() {
   return null;
  },
  GetContentHTML: function(){
   return this.GetContentHtml();
  },
  SetContentHTML: function(html){
   this.SetContentHtml(html);
  },
  GetContentHtml: function(){
   return this.getContentElement().innerHTML;
  },
  SetContentHtml: function(html){
   ASPx.SetInnerHtml(this.getContentElement(), html);
   if(this.touchUIScroller)
    this.touchUIScroller.ChangeElement(this.getContentElement());
  }
 });
 ASPxClientPanelBase.Cast = ASPxClientControl.Cast;
 var FixedPanels = {};
 var FixedPositionProperties;
 var InitFixedPositionProperties = function(){
  FixedPositionProperties = {};
  FixedPositionProperties["Top"] = { 
   documentPadding: "padding-top", documentMargin: "margin-top", documentMargin2: "margin-bottom", 
   contentEdge: "top", oppositeContentEdge: "bottom", size: "offsetHeight", animationSize: "height", oppositePanel: "Bottom" 
  };
  FixedPositionProperties["Bottom"] = { 
   documentPadding: "padding-bottom", documentMargin: "margin-top", documentMargin2: "margin-bottom", 
   contentEdge: "bottom", oppositeContentEdge: "top", size: "offsetHeight", animationSize: "height", oppositePanel: "Top"
  };
  FixedPositionProperties["Left"] = { 
   documentPadding: "padding-left", documentMargin: "margin-left", documentMargin2: "margin-right", 
   contentEdge: "left", oppositeContentEdge: "right", size: "offsetWidth", animationSize: "width", oppositePanel: "Right"
  };
  FixedPositionProperties["Right"] = { 
   documentPadding: "padding-right", documentMargin: "margin-left", documentMargin2: "margin-right", 
   contentEdge: "right", oppositeContentEdge: "left", size: "offsetWidth", animationSize: "width", oppositePanel: "Left"
  };
 };
 var ExpandDirectionProperties;
 var InitExpandDirectionProperties = function(){
  ExpandDirectionProperties = {};
  ExpandDirectionProperties["PopupToLeft"] = { 
   hAlign: ASPx.PopupUtils.OutsideLeftAlignIndicator, vAlign: ASPx.PopupUtils.TopSidesAlignIndicator, 
   size: "offsetWidth", animationSize: "width" 
  };
  ExpandDirectionProperties["PopupToRight"] = { 
   hAlign: ASPx.PopupUtils.OutsideRightAlignIndicator, vAlign: ASPx.PopupUtils.TopSidesAlignIndicator, 
   size: "offsetWidth", animationSize: "width" 
  };
  ExpandDirectionProperties["PopupToTop"] = { 
   hAlign: ASPx.PopupUtils.LeftSidesAlignIndicator, vAlign: ASPx.PopupUtils.AboveAlignIndicator, 
   size: "offsetHeight", animationSize: "height" 
  };
  ExpandDirectionProperties["PopupToBottom"] = { 
   hAlign: ASPx.PopupUtils.LeftSidesAlignIndicator, vAlign: ASPx.PopupUtils.BelowAlignIndicator, 
   size: "offsetHeight", animationSize: "height" 
  };
 };
 var CollapsiblePanelsAutoGenGroupCount = 0;
 var CollapsiblePanelsGroups = {};
 var ExpandedPanels = {};
 var DocumentProperties = {};
 var EXPANDED_SELECTOR = "dxpnl-expanded";
 var COLLAPSIBLE_SELECTOR = "dxpnl-collapsible";
 var CENTER_BTN_POSITION_SELECTOR = "dxpnl-cp";
 var FAR_BTN_POSITION_SELECTOR = "dxpnl-fp";
 var EXPAND_BAR_ID = "_EB";
 var MODAL_ELEMENT_ID = "_M";
 var EXPAND_BUTTON_ID = "_EBB";
 var COLLAPSED_STATE_CLASS_NAME = "dxpnl-collapsedState";
 var HIDDEN_STATE_CLASS_NAME = "dxpnl-hiddenState";
 var EXPAND_BAR_TEMPLATE_CLASS_NAME = "dxpnl-bar-tmpl";
 ASPxClientPanel = ASPx.CreateClass(ASPxClientPanelBase, {
  constructor: function(name) {
   this.constructor.prototype.constructor.call(this, name);
   this.animationType = "none";
   this.fixedPosition = this.getFixedPosition();
   this.expandEffect = "Slide";
   this.expandOnPageLoad = false;
   this.groupName = "";
   this.fixedPositionOverlap = false;
   this.fixedPositionProperties = null;
   this.expandDirectionProperties = null;
   this.documentMarginsChanged = false;
   this.slideAnimationPosProperty = null;
   this.slideAnimationExpandBarSize = null;
   this.collapseWindowWidth = 0;
   this.collapseWindowHeight = 0;
   this.hideWindowWidth = 0;
   this.hideWindowHeight = 0;
   this.modalElement = null;
   this.modalElementOpacity = 0.7;
   this.modalShowAnimationDuration = ASPx.AnimationConstants.Durations.SHORT;
   this.modalHideAnimationDuration = ASPx.AnimationConstants.Durations.SHORT - 50;
   this.contentElement = null;
   this.expandBarElement = null;
   this.expandButtonElement = null;
   this.animationContentContainerElement = null;
   this.scrollContentContainerElement = null;
   this.Collapsed = new ASPxClientEvent();
   this.Expanded = new ASPxClientEvent();
  },
  InlineInitialize: function(){
   ASPxClientPanelBase.prototype.InlineInitialize.call(this);
   if(this.fixedPosition) {
    if(!FixedPositionProperties)
     InitFixedPositionProperties();
    this.fixedPositionProperties = FixedPositionProperties[this.fixedPosition];
   }
   if(this.expandEffect.indexOf("Popup") > -1){
    if(!ExpandDirectionProperties)
     InitExpandDirectionProperties();
    this.expandDirectionProperties = ExpandDirectionProperties[this.expandEffect];
   }
   if(this.isPositionFixed()){
    this.prepareModalElement();
    FixedPanels[this.fixedPosition] = this;
    var scrollContainer = this.getScrollContentContainerElement();
    if(scrollContainer && 
     (scrollContainer.style.overflow !== "" && scrollContainer.style.overflow !== "visible" ||
     scrollContainer.style.overflowX !== "" && scrollContainer.style.overflowX !== "visible" ||
     scrollContainer.style.overflowY !== "" && scrollContainer.style.overflowY !== "visible")){
     ASPx.Evt.AttachEventToElement(scrollContainer, "scroll",
      function (evt) {
       if(ASPx.Evt.GetEventSource(evt) != scrollContainer)
        return;
       if(typeof(ASPx.GetDropDownCollection) != "undefined")
        ASPx.GetDropDownCollection().ProcessControlsInContainer(scrollContainer, function(control) {
         control.HideDropDown();
        });
       if(typeof(ASPx.GetMenuCollection) != "undefined")
        ASPx.GetMenuCollection().HideAll();
      }.aspxBind(this));
    }
   }
   if(this.hideWindowWidth > 0 || this.hideWindowHeight > 0) {
    this.createVisibilityCss();
    this.checkExpandBarContent();
   }
   if(this.collapseWindowWidth > 0 || this.collapseWindowHeight > 0) {
    this.createCollapsibilityCss();
    this.checkExpandBarContent();
   }
   if(this.groupName == ""){
    this.groupName = "DXAutoGenExpandGroup" + CollapsiblePanelsAutoGenGroupCount;
    CollapsiblePanelsAutoGenGroupCount++;
   }
   if(!CollapsiblePanelsGroups[this.groupName])
    CollapsiblePanelsGroups[this.groupName] = [];
   CollapsiblePanelsGroups[this.groupName].push(this);
   var btnElement = this.getExpandButtonElement();
   if(btnElement){
    ASPx.Evt.AttachEventToElement(btnElement, ASPx.TouchUIHelper.touchMouseUpEventName,
     function (evt) {
      if(ASPx.Evt.IsLeftButtonPressed(evt))
       this.Toggle();
     }.aspxBind(this));
   }
   this.updateFixedPanelContext();
   if(!this.clientEnabled)
    this.SetEnabled(this.clientEnabled);
  },
  prepareModalElement: function() {
   if(!this.isModal()) return;
   var modalElement = this.getModalElement();
   this.modalElementOpacity = ASPx.GetCurrentStyle(modalElement).opacity;
   ASPx.Evt.AttachEventToElement(modalElement, ASPx.TouchUIHelper.touchMouseUpEventName,
    function(evt) {
     if(ASPx.Evt.IsLeftButtonPressed(evt))
      this.Collapse();
    }.aspxBind(this));
   modalElement.style.zIndex = ASPx.GetCurrentStyle(this.GetMainElement()).zIndex - 2;
  },
  AfterInitialize: function(){
   ASPxClientPanelBase.prototype.AfterInitialize.call(this);
   var barElement = this.getExpandBarElement();
   if(barElement && this.isExpandBarChangeVisibilityOnExpanding())
    ASPx.AddClassNameToElement(barElement, "h");
   if(this.expandOnPageLoad)
    this.Expand(true);
  },
  OnDispose: function () {
   if(FixedPanels[this.fixedPosition] === this)
    delete FixedPanels[this.fixedPosition];
   if(ASPx.Ident.IsArray(CollapsiblePanelsGroups[this.groupName])){
    ASPx.Data.ArrayRemove(CollapsiblePanelsGroups[this.groupName], this);
    if(CollapsiblePanelsGroups[this.groupName].length === 0)
     delete CollapsiblePanelsGroups[this.groupName];
   }
   if(ExpandedPanels[this.groupName] === this)
    delete ExpandedPanels[this.groupName];
   ASPxClientPanelBase.prototype.OnDispose.call(this);
  },
  AdjustControlCore: function() {
   this.updateExpandButtonPosition();
   this.updateFixedPanelContext();
  },
  GetAdjustedSizes: function() {
   var sizes = ASPxClientControl.prototype.GetAdjustedSizes.call(this);
   var expandBar = this.getExpandBarElement();
   if(expandBar) {
    sizes["expandBarWidth"] = expandBar.offsetWidth;
    sizes["expandBarHeight"] = expandBar.offsetHeight;
   }
   return sizes;
  },
  IsDisplayed: function() {
   if(ASPxClientPanelBase.prototype.IsDisplayed.call(this))
    return true;
   return this.IsDisplayedElement(this.getExpandBarElement());
  },
  IsHidden: function() {
   if(!ASPxClientPanelBase.prototype.IsHidden.call(this))
    return false;
   return this.IsHiddenElement(this.getExpandBarElement());
  },
  OnBrowserWindowResize: function(e) {
   this.onBrowserWindowResizeCore();
   window.setTimeout(function() {
    this.onBrowserWindowResizeCore();
   }.aspxBind(this), 0);
  },
  BrowserWindowResizeSubscriber: function() {
   return this.isPositionFixed() || this.getExpandBarElement();
  },
  HasFixedPosition: function() {
   return this.isPositionFixed();
  },
  RegisterInControlTree: function(tree) {
   var mainNode = tree.createNode(null, this);
   this.registerElementInTree(this.GetMainElement(), tree, mainNode);
   this.registerElementInTree(this.getExpandBarElement(), tree, mainNode);
  },
  getSizeCore: function(element, sizeProperty){
   return element[sizeProperty];
  },
  getFixedSize: function(sizeProperty){
   return this.getSizeCore(this.getFixedElement(), sizeProperty);
  },
  getExpandedSize: function(sizeProperty){
   if(this.getExpandBarElement() && this.isElementDisplayed(this.getExpandBarElement()))
    return this.getSizeCore(this.GetMainElement(), sizeProperty);
   return 0;
  },
  GetWidth: function() {
   if(!this.getExpandBarElement()) 
    return ASPxClientControl.prototype.GetWidth.call(this);
   var width = 0;
   if(this.isElementDisplayed(this.getExpandBarElement()))
    width += this.getExpandBarElement().offsetWidth;
   if(this.isElementDisplayed(this.GetMainElement()) && (!this.IsExpandedInternal() || !this.isPopupExpanding()))
    width += this.GetMainElement().offsetWidth;
   return width;
  },
  GetHeight: function() {
   if(!this.getExpandBarElement()) 
    return ASPxClientControl.prototype.GetHeight.call(this);
   var height = 0;
   if(this.isElementDisplayed(this.getExpandBarElement()))
    height += this.getExpandBarElement().offsetHeight;
   if(this.isElementDisplayed(this.GetMainElement()) && (!this.IsExpandedInternal() || !this.isPopupExpanding()))
    height += this.GetMainElement().offsetHeight;
   return height;
  },
  SetVisible: function (value) {
   if(this.clientVisible != value) {
    ASPxClientPanelBase.prototype.SetVisible.call(this, value);
    var expandBarElement = this.getExpandBarElement();
    if(expandBarElement) ASPx.SetElementDisplay(expandBarElement, value);
    this.updateFixedPanelContext();
   }
  },
  onBrowserWindowResizeCore: function() {
   this.updateExpandButtonPosition();
   this.updateFixedPanelContext();
   this.checkCollapseContent();
   this.checkExpandBarContent();
  },
  registerElementInTree: function(element, tree, mainNode) {
   if(element && element.id) {
    var node = tree.createNode(element.id, null);
    tree.addRelatedNode(node, mainNode);
   }
  },
  updateFixedPanelContext: function(){
   if(!this.isPositionFixed()) return;
   this.updateDocumentPaddings();
   this.updateMainElementFixedPosition();
   this.updateFixedPanelsPosition();
  },
  updateExpandButtonPosition: function(){
   var expandButton = this.getExpandButtonElement();
   if(!expandButton) return;
   var expandBar = this.getExpandBarElement();
   if(!expandBar) return;
   var isCenterPosition = expandButton.className.indexOf(CENTER_BTN_POSITION_SELECTOR) > -1;
   var isFarPosition = expandButton.className.indexOf(FAR_BTN_POSITION_SELECTOR) > -1;
   if(isCenterPosition && expandButton.offsetWidth > 0){
    expandButton.style.width = expandButton.offsetWidth + "px";
    ASPx.SetElementFloat(expandButton, "none");
   }
   var correctButtonPosition = false;
   if(this.fixedPosition == "Top" || this.fixedPosition == "Bottom")
    correctButtonPosition = true;
   else if(this.fixedPosition == "Left" || this.fixedPosition == "Right")
    correctButtonPosition = (isCenterPosition || isFarPosition) && !expandBar.querySelector("." + EXPAND_BAR_TEMPLATE_CLASS_NAME);
   else if(this.hasVerticalOrientation())
    correctButtonPosition = isCenterPosition;
   else
    correctButtonPosition = true;
   if(correctButtonPosition) 
    this.CorrectVerticalAlignment(ASPx.AdjustVerticalMargins, this.getExpandButtonElement, "Btn", true);
  },
  updateDocumentPaddings: function(){
   if(!this.fixedPositionProperties) return;
   var size = this.getFixedSize(this.fixedPositionProperties.size);
   var expandedSize = 0;
   if(this.expandEffect == "Slide"){
    expandedSize = this.getExpandedSize(this.fixedPositionProperties.size);
    if(this.fixedPosition == "Right" || this.fixedPosition == "Bottom")
     expandedSize = -expandedSize;
   }
   if(!this.fixedPanelCoversViewPort(this.fixedPositionProperties.contentEdge, size))
    this.changeStyleSideAttribute(document.documentElement, "padding", this.fixedPositionProperties.documentPadding, size + "px");
   var documentMarginValue = this.getDocumentPropertyValue(this.fixedPositionProperties.documentMargin);
   var documentMargin2Value = this.getDocumentPropertyValue(this.fixedPositionProperties.documentMargin2);
   if(expandedSize != 0){
    ASPx.Attr.ChangeStyleAttribute(document.documentElement, this.fixedPositionProperties.documentMargin, (documentMarginValue + expandedSize) + "px");
    ASPx.Attr.ChangeStyleAttribute(document.documentElement, this.fixedPositionProperties.documentMargin2, (documentMargin2Value - expandedSize) + "px");
    this.documentMarginsChanged = true;
   }
   else if(this.documentMarginsChanged){
    ASPx.Attr.RestoreStyleAttribute(document.documentElement, this.fixedPositionProperties.documentMargin);
    ASPx.Attr.RestoreStyleAttribute(document.documentElement, this.fixedPositionProperties.documentMargin2);
    this.documentMarginsChanged = false;
   }
  },
  fixedPanelCoversViewPort: function(contentEdge, size) {
   return ((contentEdge === "top" || contentEdge === "bottom") && size >= window.innerHeight) ||
    ((contentEdge === "left" || contentEdge === "right") && size >= window.innerWidth);
  },
  changeStyleSideAttribute: function(element, baseAttr, attr, value){
   ASPx.Attr.ChangeStyleAttribute(element, attr, value);
  },
  updateMainElementFixedPosition: function(){
   if(!this.fixedPositionProperties) return;
   var barElement = this.getExpandBarElement();
   if(barElement){
    var size = this.getSizeCore(barElement, this.fixedPositionProperties.size);
    ASPx.Attr.ChangeStyleAttribute(this.GetMainElement(), this.fixedPositionProperties.contentEdge, size + "px");
   }
  },
  updateFixedPanelsPosition: function() {
   this.updateFixedPanelsEdges(this.updateFixedPanelEdge);
   this.updateFixedPanelsEdges(this.updateFixedPanelOppositeEdge);
  },
  updateFixedPanelsEdges: function(method) {
   if(FixedPanels["Top"]){
    if(FixedPanels["Left"] && !FixedPanels["Top"].fixedPositionOverlap && FixedPanels["Left"].fixedPositionOverlap)
     method.call(FixedPanels["Left"], FixedPanels["Top"], FixedPanels["Right"]);
    if(FixedPanels["Right"] && !FixedPanels["Top"].fixedPositionOverlap && FixedPanels["Right"].fixedPositionOverlap)
     method.call(FixedPanels["Right"], FixedPanels["Top"], FixedPanels["Left"]);
   }
   if(FixedPanels["Bottom"]){
    if(FixedPanels["Left"] && !FixedPanels["Bottom"].fixedPositionOverlap && FixedPanels["Left"].fixedPositionOverlap)
     method.call(FixedPanels["Left"], FixedPanels["Bottom"], FixedPanels["Right"]);
    if(FixedPanels["Right"] && !FixedPanels["Bottom"].fixedPositionOverlap && FixedPanels["Right"].fixedPositionOverlap)
     method.call(FixedPanels["Right"], FixedPanels["Bottom"], FixedPanels["Left"]);
   }
   if(FixedPanels["Left"]){
    if(FixedPanels["Top"] && (!FixedPanels["Left"].fixedPositionOverlap || FixedPanels["Top"].fixedPositionOverlap))
     method.call(FixedPanels["Top"], FixedPanels["Left"], FixedPanels["Bottom"]);
    if(FixedPanels["Bottom"] && (!FixedPanels["Left"].fixedPositionOverlap || FixedPanels["Bottom"].fixedPositionOverlap))
     method.call(FixedPanels["Bottom"], FixedPanels["Left"], FixedPanels["Top"]);
   }
   if(FixedPanels["Right"]){
    if(FixedPanels["Top"] && (!FixedPanels["Right"].fixedPositionOverlap || FixedPanels["Top"].fixedPositionOverlap))
     method.call(FixedPanels["Top"], FixedPanels["Right"], FixedPanels["Bottom"]);
    if(FixedPanels["Bottom"] && (!FixedPanels["Right"].fixedPositionOverlap || FixedPanels["Bottom"].fixedPositionOverlap))
     method.call(FixedPanels["Bottom"], FixedPanels["Right"], FixedPanels["Top"]);
   }
  },
  updateFixedPanelEdge: function(panel){
   var size = this.getFixedSize(this.fixedPositionProperties.size);
   if(this.expandEffect == "Slide")
    size += this.getExpandedSize(this.fixedPositionProperties.size);
   this.updateFixedPanelEdgeCore(panel, this.fixedPositionProperties.contentEdge, size);
  },
  updateFixedPanelOppositeEdge: function(panel, opppositePanel){
   if(!this.IsExpandedInternal() && opppositePanel) return;
   if(this.expandEffect == "Slide") {
    var size = this.getExpandedSize(this.fixedPositionProperties.size);
    this.updateFixedPanelEdgeCore(panel, this.fixedPositionProperties.oppositeContentEdge, -size);
   }
  },
  updateFixedPanelEdgeCore: function(panel, edge, size){
   var mainElement = panel.GetMainElement();
   mainElement.style[edge] = size + "px";
   var expandBarElement = panel.getExpandBarElement();
   if(expandBarElement)
    expandBarElement.style[edge] = size + "px";
  },
  isPositionFixed: function(){
   return !!this.fixedPositionProperties;
  },
  getFixedPosition: function(){
   var cssClass = this.GetMainElement().className;
   if(cssClass.indexOf("dxpnl-edge t") > -1)
    return "Top";
   if(cssClass.indexOf("dxpnl-edge b") > -1)
    return "Bottom";
   if(cssClass.indexOf("dxpnl-edge l") > -1)
    return "Left";
   if(cssClass.indexOf("dxpnl-edge r") > -1)
    return "Right";
   return null;
  },
  isPopupExpanding: function(){
   return !!this.expandDirectionProperties;
  },
  isExpandBarChangeVisibilityOnExpanding: function(){
   return !this.isPopupExpanding() && !this.isPositionFixed() && CollapsiblePanelsGroups[this.groupName].length > 1;
  },
  createVisibilityCss: function() {
   var rules = [];
   rules.push({ selector: "#" + this.name, cssText: "display: none!important;" });
   rules.push({ selector: "#" + this.getExpandBarId(), cssText: "display: none!important;" });
   this.insertAdaptivityRules(rules, this.hideWindowWidth, this.hideWindowHeight, HIDDEN_STATE_CLASS_NAME);
  },
  createCollapsibilityCss: function() {
   var rules = [];
   rules.push({ selector: "#" + this.name, cssText: "display: none;" });
   rules.push({ selector: "#" + this.getExpandBarId() + ".dxpnl-bar", cssText: (this.isPositionFixed() ? "display: block;" : "display: table;") });
   rules.push({ selector: "#" + this.name + "." + EXPANDED_SELECTOR, cssText: "display: block!important;" });
   this.insertAdaptivityRules(rules, this.collapseWindowWidth, this.collapseWindowHeight, COLLAPSED_STATE_CLASS_NAME);
  },
  insertAdaptivityRules: function(rules, maxWindowWidth, maxWindowHeight, adaptivityClassName) {
   var styleSheet = ASPx.GetCurrentStyleSheet();
   if(!styleSheet) return;
   var mediaRule = "@media all and (max-width: " + maxWindowWidth + "px), (max-height: " + maxWindowHeight + "px) { ";
   for(var i = 0; i < rules.length; i++)
    mediaRule += rules[i].selector + "{" + rules[i].cssText + "}";
   mediaRule += "}";
   if(styleSheet.insertRule)
    styleSheet.insertRule(mediaRule, styleSheet.cssRules.length);
  },
  ensureAdaptivityClassNames: function() {
   this.ensureAdaptivityClassName(HIDDEN_STATE_CLASS_NAME, this.hideWindowWidth, this.hideWindowHeight);
   this.ensureAdaptivityClassName(COLLAPSED_STATE_CLASS_NAME, this.collapseWindowWidth, this.collapseWindowHeight);
  },
  ensureAdaptivityClassName: function(adaptivityClassName, maxWindowWidth, maxWindowHeight) {
   var currentDocumentWidth = ASPx.GetCurrentDocumentWidth();
   var currentDocumentHeight = ASPx.GetCurrentDocumentHeight();
   if(currentDocumentWidth <= maxWindowWidth || currentDocumentHeight <= maxWindowHeight)
    this.addAdaptivityClassName(adaptivityClassName);
   else
    this.removeAdaptivityClassName(adaptivityClassName);
  },
  addAdaptivityClassName: function(className) {
   ASPx.AddClassNameToElement(this.GetMainElement(), className);
   if(ASPx.IsExists(this.getExpandBarElement()))
    ASPx.AddClassNameToElement(this.getExpandBarElement(), className);
  },
  removeAdaptivityClassName: function(className) {
   ASPx.RemoveClassNameFromElement(this.GetMainElement(), className);
   if(ASPx.IsExists(this.getExpandBarElement()))
    ASPx.RemoveClassNameFromElement(this.getExpandBarElement(), className);
  },
  Toggle: function() {
   if(this.IsExpandedInternal()) 
    this.Collapse();
   else 
    this.Expand();
  },
  IsExpandable: function() {
   if(this.GetMainElement().className.indexOf(" " + COLLAPSIBLE_SELECTOR) > -1)
    return true;
   if(this.collapseWindowWidth > 0 || this.collapseWindowHeight > 0){
    var expandBarElement = this.getExpandBarElement();
    return expandBarElement && ASPx.GetCurrentStyle(expandBarElement).display !== "none";
   }
   return false;
  },
  IsExpanded: function() {
   if(this.IsExpandable())
    return this.IsExpandedInternal();
   return true;
  },
  IsExpandedInternal: function() {
   return this.GetMainElement().className.indexOf(" " + EXPANDED_SELECTOR) > -1;
  },
  Expand: function(preventAnimation) {
   if(ExpandedPanels[this.groupName] != this) {
    if(ExpandedPanels[this.groupName])
     ExpandedPanels[this.groupName].Collapse(preventAnimation);
    this.collapseOppositePanel(preventAnimation);
    this.collapseUnfixedPopupPanels();
    ExpandedPanels[this.groupName] = this;
    ASPx.GetStateController().SelectElementBySrcElement(this.GetMainElement());
    ASPx.GetStateController().SelectElementBySrcElement(this.getExpandButtonElement());
    if(this.isModal()) {
     var modalElement = this.getModalElement();
     ASPx.AnimationHelper.fadeTo(modalElement, { from: 0, to: this.modalElementOpacity, duration: this.modalShowAnimationDuration });
    }
    ASPx.GetControlCollection().AdjustControls(this.GetMainElement());
    if(this.isPopupExpanding() && !this.isPositionFixed())
     this.updateMainElementPosition(true);
    if(this.isExpandBarChangeVisibilityOnExpanding())
     this.slideAnimationExpandBarSize = this.getSlideAnimationSize(this.getExpandBarElement(), true);
    ASPx.GetStateController().SelectElementBySrcElement(this.getExpandBarElement());
    if(!preventAnimation && this.animationType == "slide")
     this.startSlideAnimation(this.GetMainElement(), false);
    else if(!preventAnimation && this.animationType == "fade")
     this.startFadeAnimation(this.GetMainElement(), false);
    else
     this.expandCore();
   }
  },
  Collapse: function(preventAnimation) {
   if(ExpandedPanels[this.groupName] == this) {
    ExpandedPanels[this.groupName] = null;
    this.collapseUnfixedPopupPanels();
    if(this.isExpandBarChangeVisibilityOnExpanding()){
     ASPx.GetStateController().DeselectElementBySrcElement(this.getExpandBarElement());
     this.slideAnimationExpandBarSize = this.getSlideAnimationSize(this.getExpandBarElement(), true);
     ASPx.GetStateController().SelectElementBySrcElement(this.getExpandBarElement());
    }
    if(this.isModal()) {
     var modalElement = this.getModalElement(),
      fromOpacity = ASPx.GetCurrentStyle(modalElement).opacity;
     ASPx.AnimationHelper.fadeTo(modalElement, { from: fromOpacity, to: 0, duration: this.modalHideAnimationDuration });
    }
    if(!preventAnimation && this.animationType == "slide")
     this.startSlideAnimation(this.GetMainElement(), true);
    else if(!preventAnimation && this.animationType == "fade")
     this.startFadeAnimation(this.GetMainElement(), true);
    else
     this.collapseCore();
   }
  },
  isModal: function() {
   return !!this.getModalElement();
  },
  expandCore: function() {
   if(this.isPositionFixed()) {
    this.updateFixedPanelContext();
   }
   this.raiseExpanded();
  },
  collapseCore: function() {
   ASPx.GetStateController().DeselectElementBySrcElement(this.GetMainElement());
   ASPx.GetStateController().DeselectElementBySrcElement(this.getExpandButtonElement());
   if(this.isPopupExpanding() && !this.isPositionFixed())
    this.updateMainElementPosition(false);
   ASPx.GetStateController().DeselectElementBySrcElement(this.getExpandBarElement());
   if(this.isPositionFixed()) {
    this.updateFixedPanelContext();
   }
   this.slideAnimationPosProperty = null;
   this.raiseCollapsed();
  },
  collapseOppositePanel: function(preventAnimation) {
   if(!this.fixedPositionProperties) return;
   if(FixedPanels[this.fixedPositionProperties.oppositePanel])
    FixedPanels[this.fixedPositionProperties.oppositePanel].Collapse(preventAnimation);
  },
  collapseUnfixedPopupPanels: function() {
   if(!this.isPositionFixed() || this.isPopupExpanding()) return;
   for(var groupName in ExpandedPanels){
    if(ExpandedPanels[groupName] && !ExpandedPanels[groupName].fixedPosition && ExpandedPanels[groupName].isPopupExpanding())
     ExpandedPanels[groupName].Collapse(true);
   }
  },
  saveOpacity: function(element) {
   ASPx.Attr.SaveStyleAttribute(element, "opacity");
  },
  restoreOpacity: function(element) {
   ASPx.Attr.RestoreStyleAttribute(element, "opacity");
  },
  startFadeAnimation: function (element, isCollapsing) {
   this.saveOpacity(element);
   var onComplete =  function() { this.finishFadeAnimation(element, isCollapsing); }.aspxBind(this);
   if(isCollapsing)
    ASPx.AnimationHelper.fadeOut(element, onComplete, ASPx.AnimationConstants.Durations.SHORT);
   else
    ASPx.AnimationHelper.fadeIn(element, onComplete, ASPx.AnimationConstants.Durations.SHORT);
  },
  finishFadeAnimation: function (element, isCollapsing) {
   this.restoreOpacity(element);
   if(isCollapsing)
    this.collapseCore(); 
   else
    this.expandCore(); 
  },
  startSlideAnimation: function(element, isCollapsing) {
   var sizeProperty = this.getSlideAnimationSizeProperty();
   ASPx.Attr.ChangeStyleAttribute(element, "overflow", "auto");
   var offsetWidth = element.offsetWidth;
   var offsetHeight = element.offsetHeight;
   ASPx.Attr.RestoreStyleAttribute(element, "overflow");
   ASPx.Attr.SaveStyleAttribute(element, sizeProperty);
   if(element.style.overflow !== "")
    ASPx.Attr.ChangeStyleAttribute(element, "overflow", "hidden");
   else {
    ASPx.Attr.ChangeStyleAttribute(element, "overflow-x", "hidden");
    ASPx.Attr.ChangeStyleAttribute(element, "overflow-y", "hidden");
   }
   var contentContainer = this.getAnimationContentContainerElement();
   if(contentContainer) {
    if(contentContainer.style.overflow !== "")
     ASPx.Attr.ChangeStyleAttribute(contentContainer, "overflow", "hidden");
    else{
     ASPx.Attr.ChangeStyleAttribute(contentContainer, "overflow-x", "hidden");
     ASPx.Attr.ChangeStyleAttribute(contentContainer, "overflow-y", "hidden");
    }
    ASPx.Attr.ChangeStyleAttribute(contentContainer, "width", offsetWidth - ASPx.GetLeftRightBordersAndPaddingsSummaryValue(element) + "px");
    ASPx.Attr.ChangeStyleAttribute(contentContainer, "height", offsetHeight - ASPx.GetTopBottomBordersAndPaddingsSummaryValue(element) + "px");
   }
   var transitionProperties = {
    duration: ASPx.AnimationConstants.Durations.SHORT, 
    onComplete: function() { this.finishSlideAnimation(element, isCollapsing); }.aspxBind(this)
   };
   if(this.isPositionFixed())
    transitionProperties.onStep = function() { this.performSlideAnimationStep(); }.aspxBind(this);
   var transition = ASPx.AnimationHelper.createMultipleAnimationTransition(element, transitionProperties);
   var size = this.getSlideAnimationSize(element, !this.isPositionFixed());
   var startSize = isCollapsing ? size : 0;
   var endSize = isCollapsing ? 0 : size;
   if(this.isExpandBarChangeVisibilityOnExpanding() && this.slideAnimationExpandBarSize){
    if(startSize == 0)
     startSize = this.slideAnimationExpandBarSize;
    if(endSize == 0)
     endSize = this.slideAnimationExpandBarSize;
   }
   var properties = {};
   properties[sizeProperty] = { from: startSize, to: endSize, unit: "px" };
   if(!isCollapsing) 
    ASPx.Attr.ChangeStyleAttribute(element, sizeProperty, startSize + "px");
   if(this.slideAnimationPosProperty){
    var position = parseInt(element.style[this.slideAnimationPosProperty]);
    var startPosition = isCollapsing ? position : position + size;
    var endPosition = isCollapsing ? position + size : position;
    properties[this.slideAnimationPosProperty] = { from: startPosition, to: endPosition, unit: "px" };
    if(!isCollapsing) 
     ASPx.Attr.ChangeStyleAttribute(element, this.slideAnimationPosProperty, startPosition + "px");
   }
   transition.Start(properties);
  },
  finishSlideAnimation: function(element, isCollapsing) {
   var sizeProperty = this.getSlideAnimationSizeProperty();
   ASPx.Attr.RestoreStyleAttribute(element, sizeProperty);
   ASPx.Attr.RestoreStyleAttribute(element, "overflow");
   ASPx.Attr.RestoreStyleAttribute(element, "overflow-x");
   ASPx.Attr.RestoreStyleAttribute(element, "overflow-y");
   var contentContainer = this.getAnimationContentContainerElement();
   if(contentContainer) {
    ASPx.Attr.RestoreStyleAttribute(contentContainer, "overflow");
    ASPx.Attr.RestoreStyleAttribute(contentContainer, "overflow-x");
    ASPx.Attr.RestoreStyleAttribute(contentContainer, "overflow-y");
    ASPx.Attr.RestoreStyleAttribute(contentContainer, "width");
    ASPx.Attr.RestoreStyleAttribute(contentContainer, "height");
   }
   if(isCollapsing)
    this.collapseCore(); 
   else
    this.expandCore(); 
  },
  performSlideAnimationStep: function() {
   this.updateFixedPanelContext();
  },
  getSlideAnimationSizeProperty: function() {
   if(this.fixedPositionProperties)
    return this.fixedPositionProperties.animationSize;
   else if(this.expandDirectionProperties)
    return this.expandDirectionProperties.animationSize;
   else 
    return this.hasVerticalOrientation() ? "width" : "height";
  },
  getSlideAnimationSize: function(element, fullSize) {
   var sizeProperty;
   if(this.fixedPositionProperties)
    sizeProperty = this.fixedPositionProperties.size;
   else if(this.expandDirectionProperties)
    sizeProperty = this.expandDirectionProperties.size;
   else
    sizeProperty = this.hasVerticalOrientation() ? "offsetWidth" : "offsetHeight";
   var size = this.getSizeCore(element, sizeProperty);
   if(fullSize) {
    if(sizeProperty == "offsetWidth")
     size -= ASPx.GetHorizontalBordersWidth(element);
    else
     size -= ASPx.GetVerticalBordersWidth(element);
   }
   else {
    if(sizeProperty == "offsetWidth")
     size -= ASPx.GetLeftRightBordersAndPaddingsSummaryValue(element);
    else
     size -= ASPx.GetTopBottomBordersAndPaddingsSummaryValue(element);
   }
   return size;
  },
  getSlideAnimationPosProperty: function(x, y) {
   if(this.expandEffect == "PopupToTop")
    return !y.isInverted ? "top" : null;
   if(this.expandEffect == "PopupToBottom")
    return y.isInverted ? "top" : null;
   if(this.expandEffect == "PopupToLeft")
    return !x.isInverted ? "left" : null;
   if(this.expandEffect == "PopupToRight")
    return y.isInverted ? "left" : null;
   return null;
  }, 
  hasVerticalOrientation: function() {
   var float = ASPx.GetElementFloat(this.GetMainElement());
   return (float === "left" || float === "right");
  },
  updateMainElementPosition: function(expanded) {
   if(!this.expandDirectionProperties) return;
   if(expanded)
    this.updateMainElementExpandedPosition(this.GetMainElement());
   else
    this.updateMainElementCollapsedPosition(this.GetMainElement());
  },
  updateMainElementExpandedPosition: function(element) {
   if(element.style.width === "100%")
    ASPx.Attr.ChangeStyleAttribute(element, "width", (element.parentNode.offsetWidth - ASPx.GetLeftRightMargins(element)) + "px");
   if(element.style.height === "100%")
    ASPx.Attr.ChangeStyleAttribute(element, "height", (element.parentNode.offsetHeight - ASPx.GetTopBottomMargins(element)) + "px");
   ASPx.Attr.ChangeStyleAttribute(element, "position", "absolute");
   var barElement = this.getExpandBarElement();
   var x = ASPx.PopupUtils.GetPopupAbsoluteX(element,
    barElement, this.expandDirectionProperties.hAlign, 0, 0, 0, false, false);
   var y = ASPx.PopupUtils.GetPopupAbsoluteY(element,
    barElement, this.expandDirectionProperties.vAlign, 0, 0, 0, true, false);
   ASPx.SetAbsoluteX(element, x.position);
   ASPx.SetAbsoluteY(element, y.position);
   this.slideAnimationPosProperty = this.getSlideAnimationPosProperty(x, y);
  },
  updateMainElementCollapsedPosition: function(element) {
   ASPx.Attr.RestoreStyleAttribute(element, "position");
   ASPx.Attr.RestoreStyleAttribute(element, "left");
   ASPx.Attr.RestoreStyleAttribute(element, "top");
   ASPx.Attr.RestoreStyleAttribute(element, "width");
   ASPx.Attr.RestoreStyleAttribute(element, "height");
  },
  checkCollapseContent: function(){
   if(!this.getExpandBarElement()) return;
   if(this.IsExpandedInternal()){
    if(CollapsiblePanelsGroups[this.groupName].length === 1 && !this.isElementDisplayed(this.getExpandBarElement()) && this.isElementDisplayed(this.GetMainElement()))
     this.Collapse(true);
    if(!this.isPositionFixed() && this.isPopupExpanding())
     this.Collapse(true);
   }
  },
  checkExpandBarContent: function() {
   var expandBar = this.getExpandBarElement();
   if(expandBar) {
    var expandBarTmpl = expandBar.querySelector("." + EXPAND_BAR_TEMPLATE_CLASS_NAME);
    if(expandBarTmpl) {
     var expandBarVisible = window.getComputedStyle(expandBar).display !== "none";
     if(this.expandBarVisible !== expandBarVisible && expandBarVisible) {
      var btn = this.getExpandButtonElement();
      if(this.fixedPosition == "Top" || this.fixedPosition == "Bottom") {
       var btnWidth = 0;
       if(btn) {
        var style = window.getComputedStyle(btn);
        btnWidth += btn.getBoundingClientRect().width + parseInt(style.marginLeft) + parseInt(style.marginRight);
       }
       expandBarTmpl.style.width = "calc(100% - " + Math.ceil(btnWidth) + "px)";
      }
      else if(this.fixedPosition == "Left" || this.fixedPosition == "Right") {
       var btnHeight = 0;
       if(btn) {
        var style = window.getComputedStyle(btn);
        btnHeight += btn.getBoundingClientRect().height + parseInt(style.marginTop) + parseInt(style.marginBottom);
       }
       expandBarTmpl.style.height = "calc(100% - " + Math.ceil(btnHeight) + "px)";
      }
      ASPx.GetControlCollection().AdjustControls(expandBar);
     }
     this.expandBarVisible = expandBarVisible;
    }
   }
  },
  raiseCollapsed: function() {
   if(!this.Collapsed.IsEmpty()) {
    var args = new ASPxClientEventArgs();
    this.Collapsed.FireEvent(this, args);
   }
  },
  raiseExpanded: function() {
   if(!this.Expanded.IsEmpty()) {
    var args = new ASPxClientEventArgs();
    this.Expanded.FireEvent(this, args);
   }
  },
  getAnimationContentContainerElement: function() {
   if(!ASPx.IsExistsElement(this.animationContentContainerElement)) 
    this.animationContentContainerElement = ASPx.GetChildByClassName(this.GetMainElement(), "dxpnl-acc");
   return this.animationContentContainerElement;
  },
  getScrollContentContainerElement: function() {
   if (!ASPx.IsExistsElement(this.scrollContentContainerElement)) {
    var mainElement = this.GetMainElement();
    this.scrollContentContainerElement = ASPx.GetNodesByPartialClassName(this.GetMainElement(), "dxpnl-scc")[0];
    if (mainElement.tagName == "DIV" && this.scrollContentContainerElement && this.scrollContentContainerElement.parentNode != mainElement)
     this.scrollContentContainerElement = null;
   }
   return this.scrollContentContainerElement;
  },
  getExpandBarElement: function() {
   if(!ASPx.IsExistsElement(this.expandBarElement))
    this.expandBarElement = ASPx.GetElementById(this.getExpandBarId());
   return this.expandBarElement;
  },
  getExpandBarId: function() {
   return this.name + EXPAND_BAR_ID;
  },
  getModalElement: function() {
   if(!ASPx.IsExistsElement(this.modalElement))
    this.modalElement = ASPx.GetElementById(this.getModalELementId());
   return this.modalElement;
  },
  getModalELementId: function() {
   return this.name + MODAL_ELEMENT_ID;
  },
  getExpandButtonElement: function() {
   if(!ASPx.IsExistsElement(this.expandButtonElement))
    this.expandButtonElement = ASPx.GetElementById(this.name + EXPAND_BUTTON_ID);
   return this.expandButtonElement;
  },
  getFixedElement: function(){
   if(this.getExpandBarElement() && this.isElementDisplayed(this.getExpandBarElement()))
    return this.getExpandBarElement();
   else
    return this.GetMainElement();
  },
  getDocumentPropertyValue: function(attr){
   if(DocumentProperties[attr] === undefined){
    var currentStyle = ASPx.GetCurrentStyle(document.documentElement);
    var attrValue = parseInt(ASPx.Attr.GetAttribute(currentStyle, attr));
    DocumentProperties[attr] = !isNaN(attrValue) ? attrValue : 0;
   }
   return DocumentProperties[attr];
  },
  isElementDisplayed: function(element){
   return ASPx.GetCurrentStyle(element).display != "none";
  }
 });
 ASPxClientPanel.Cast = ASPxClientControl.Cast;
 window.ASPxClientPanelBase = ASPxClientPanelBase;
 window.ASPxClientPanel = ASPxClientPanel;
})();

(function () {
var PopupUtils = {
 NotSetAlignIndicator: "NotSet",
 InnerAlignIndicator: "Sides",
 OutsideLeftAlignIndicator: "OutsideLeft",
 LeftSidesAlignIndicator: "LeftSides",
 RightSidesAlignIndicator: "RightSides",
 OutsideRightAlignIndicator: "OutsideRight",
 CenterAlignIndicator: "Center",
 AboveAlignIndicator: "Above",
 TopSidesAlignIndicator: "TopSides",
 MiddleAlignIndicator: "Middle",
 BottomSidesAlignIndicator: "BottomSides",
 BelowAlignIndicator: "Below",
 WindowCenterAlignIndicator: "WindowCenter",
 LeftAlignIndicator: "Left",
 RightAlignIndicator: "Right",
 TopAlignIndicator: "Top",
 BottomAlignIndicator: "Bottom",
 WindowLeftAlignIndicator: "WindowLeft",
 WindowRightAlignIndicator: "WindowRight",
 WindowTopAlignIndicator: "WindowTop",
 WindowBottomAlignIndicator: "WindowBottom",
 IsAlignNotSet: function (align) {
  return align == PopupUtils.NotSetAlignIndicator;
 },
 IsInnerAlign: function (align) {
  return align.indexOf(PopupUtils.InnerAlignIndicator) != -1;
 },
 IsRightSidesAlign: function(align) {
  return align == PopupUtils.RightSidesAlignIndicator;
 },
 IsOutsideRightAlign: function(align) {
  return align == PopupUtils.OutsideRightAlignIndicator;
 },
 IsCenterAlign: function(align) {
  return align == PopupUtils.CenterAlignIndicator;
 },
 FindPopupElementById: function (id) {
  if(id == "")
   return null; 
  var popupElement = ASPx.GetElementById(id);
  if(!ASPx.IsExistsElement(popupElement)) {
   var idParts = id.split("_");
   var uniqueId = idParts.join("$");
   popupElement = ASPx.GetElementById(uniqueId);
  }
  return popupElement;
 },
 FindEventSourceParentByTestFunc: function (evt, testFunc) {
  return ASPx.GetParent(ASPx.Evt.GetEventSource(evt), testFunc);
 },
 PreventContextMenu: function (evt) {
  ASPx.Evt.PreventEventAndBubble(evt);
  if(ASPx.Browser.WebKitFamily)
   evt.returnValue = false;
 },
 GetDocumentClientWidthForPopup: function() {
  return ASPx.Browser.WebKitTouchUI ? document.body.offsetWidth : ASPx.GetDocumentClientWidth();
 },
 GetDocumentClientHeightForPopup: function() {
  return ASPx.Browser.WebKitTouchUI ? document.body.offsetHeight : ASPx.GetDocumentClientHeight();
 },
 AdjustPositionToClientScreen: function (element, pos, rtl, isX) {
  var min = isX ? ASPx.GetDocumentScrollLeft() : ASPx.GetDocumentScrollTop(),
   max = min + (isX ? ASPx.GetDocumentClientWidth() : ASPx.GetDocumentClientHeight());
  max -= (isX ? element.offsetWidth : element.offsetHeight);
  if(rtl && isX) {
   if(pos < min) pos = min;
   if(pos > max) pos = max;
  } else {
   if(pos > max) pos = max;
   if(pos < min) pos = min;
  }
  return pos;
 },
 GetPopupAbsoluteX: function(element, popupElement, hAlign, hOffset, x, left, rtl, isPopupFullCorrectionOn, showPopupInsideScreenBounds) {
  return PopupUtils.getPopupAbsolutePos(element, popupElement, hAlign, hOffset, x, left, rtl, isPopupFullCorrectionOn, false, false, true, showPopupInsideScreenBounds);
 },
 GetPopupAbsoluteY: function(element, popupElement, vAlign, vOffset, y, top, isPopupFullCorrectionOn, ignoreAlignWithoutScrollReserve, ignorePopupElementBorders, showPopupInsideScreenBounds) {
  return PopupUtils.getPopupAbsolutePos(element, popupElement, vAlign, vOffset, y, top, false, isPopupFullCorrectionOn, ignoreAlignWithoutScrollReserve, ignorePopupElementBorders, false, showPopupInsideScreenBounds);
 },
 getPopupAbsolutePos: function(element, popupElement, align, offset, startPos, startPosInit, rtl, isPopupFullCorrectionOn, ignoreAlignWithoutScrollReserve, ignorePopupElementBorders, isHorizontal, showPopupInsideScreenBounds) {
  var calculator = getPositionCalculator();
  calculator.applyParams(element, popupElement, align, offset, startPos, startPosInit, rtl, isPopupFullCorrectionOn, ignoreAlignWithoutScrollReserve, ignorePopupElementBorders, isHorizontal, showPopupInsideScreenBounds);
  var position = calculator.getPopupAbsolutePos();
  calculator.disposeState();
  return position;
 },
 InitAnimationProperties: function(element, onAnimStopCallString) {
  element.popuping = true;
  element.onAnimStopCallString = onAnimStopCallString;
 },
 InitAnimationDiv: function (element, x, y, onAnimStopCallString, skipSizeInit) {
  PopupUtils.InitAnimationProperties(element, onAnimStopCallString);
  PopupUtils.InitAnimationDivCore(element);
  if(!skipSizeInit) {
   ASPx.SetStyles(element, { width: "", height: "" });
   ASPx.SetStyles(element, { width: element.offsetWidth, height: element.offsetHeight });
  }
  ASPx.SetStyles(element, { left: x, top: y });
 },
 InitAnimationDivCore: function (element) {
  ASPx.SetStyles(element, {
   overflow: "hidden",
   position: "absolute"
  });
 },
 StartSlideAnimation: function (animationDivElement, element, iframeElement, duration, preventChangingWidth, preventChangingHeight) {
  if(iframeElement) {
   var endLeft = ASPx.PxToInt(iframeElement.style.left);
   var endTop = ASPx.PxToInt(iframeElement.style.top);
   var startLeft = ASPx.PxToInt(element.style.left) < 0 ? endLeft : animationDivElement.offsetLeft + animationDivElement.offsetWidth;
   var startTop = ASPx.PxToInt(element.style.top) < 0 ? endTop : animationDivElement.offsetTop + animationDivElement.offsetHeight;
   var properties = {
    left: { from: startLeft, to: endLeft, unit: "px" },
    top: { from: startTop, to: endTop, unit: "px" }
   };
   if(!preventChangingWidth)
    properties.width = { to: element.offsetWidth, unit: "px" };
   if(!preventChangingHeight)
    properties.height = { to: element.offsetHeight, unit: "px" };
   ASPx.AnimationHelper.createMultipleAnimationTransition(iframeElement, {
    duration: duration
   }).Start(properties);
  }
  ASPx.AnimationHelper.createMultipleAnimationTransition(element, {
   duration: duration,
   onComplete: function () { PopupUtils.AnimationFinished(animationDivElement, element); }
  }).Start({
   left: { to: 0, unit: "px" },
   top: { to: 0, unit: "px" }
  });
 },
 AnimationFinished: function (animationDivElement, element) {
  if(PopupUtils.StopAnimation(animationDivElement, element) && ASPx.IsExists(animationDivElement.onAnimStopCallString) &&
   animationDivElement.onAnimStopCallString !== "") {
   window.setTimeout(animationDivElement.onAnimStopCallString, 0);
  }
 },
 StopAnimation: function (animationDivElement, element) {
  if(animationDivElement.popuping) {
   ASPx.AnimationHelper.cancelAnimation(element);
   animationDivElement.popuping = false;
   animationDivElement.style.overflow = "visible";
   return true;
  }
  return false;
 },
 GetAnimationHorizontalDirection: function (popupPosition, horizontalAlign, verticalAlign, rtl) {
  if(PopupUtils.IsInnerAlign(horizontalAlign)
   && !PopupUtils.IsInnerAlign(verticalAlign)
   && !PopupUtils.IsAlignNotSet(verticalAlign))
   return 0;
  var toTheLeft = (horizontalAlign == PopupUtils.OutsideLeftAlignIndicator || horizontalAlign == PopupUtils.RightSidesAlignIndicator || (horizontalAlign == PopupUtils.NotSetAlignIndicator && rtl)) ^ popupPosition.isInverted;
  return toTheLeft ? 1 : -1;
 },
 GetAnimationVerticalDirection: function (popupPosition, horizontalAlign, verticalAlign) {
  if(PopupUtils.IsInnerAlign(verticalAlign)
   && !PopupUtils.IsInnerAlign(horizontalAlign)
   && !PopupUtils.IsAlignNotSet(horizontalAlign))
   return 0;
  var toTheTop = (verticalAlign == PopupUtils.AboveAlignIndicator || verticalAlign == PopupUtils.BottomSidesAlignIndicator) ^ popupPosition.isInverted;
  return toTheTop ? 1 : -1;
 },
 IsVerticalScrollExists: function () {
  var scrollIsNotHidden = ASPx.GetCurrentStyle(document.body).overflowY !== "hidden" && ASPx.GetCurrentStyle(document.documentElement).overflowY !== "hidden";
  return (scrollIsNotHidden && ASPx.GetDocumentHeight() > ASPx.GetDocumentClientHeight());
 },
 CoordinatesInDocumentRect: function (x, y) {
  var docScrollLeft = ASPx.GetDocumentScrollLeft();
  var docScrollTop = ASPx.GetDocumentScrollTop();
  return (x > docScrollLeft && y > docScrollTop &&
   x < ASPx.GetDocumentClientWidth() + docScrollLeft &&
   y < ASPx.GetDocumentClientHeight() + docScrollTop);
 },
 GetElementZIndexArray: function (element) {
  var currentElement = element;
  var zIndexesArray = [0];
  while(currentElement && currentElement.tagName != "BODY") {
   if(currentElement.style) {
    if(typeof (currentElement.style.zIndex) != "undefined" && currentElement.style.zIndex != "")
     zIndexesArray.unshift(currentElement.style.zIndex);
   }
   currentElement = currentElement.parentNode;
  }
  return zIndexesArray;
 },
 IsHigher: function (higherZIndexArrat, zIndexArray) {
  if(zIndexArray == null) return true;
  var count = (higherZIndexArrat.length >= zIndexArray.length) ? higherZIndexArrat.length : zIndexArray.length;
  for(var i = 0; i < count; i++)
   if(typeof (higherZIndexArrat[i]) != "undefined" && typeof (zIndexArray[i]) != "undefined") {
    var higherZIndexArrayCurrentElement = parseInt(higherZIndexArrat[i].toString());
    var zIndexArrayCurrentElement = parseInt(zIndexArray[i].toString());
    if(higherZIndexArrayCurrentElement != zIndexArrayCurrentElement)
     return higherZIndexArrayCurrentElement > zIndexArrayCurrentElement;
   } else return typeof (zIndexArray[i]) == "undefined";
  return true;
 },
 TestIsPopupElement: function (element) {
  return !!element.DXPopupElementControl;
 },
 adjustViewportScrollWrapper: function(wrapper, wrapperScroll, windowElement) {
  var document = wrapper.ownerDocument;
  var window = document.defaultView || document.parentWindow;
  var isWindowElementDisplayed = ASPx.IsElementDisplayed(windowElement);
  if(!isWindowElementDisplayed) {
   wrapper.style.cssText = "";
   wrapperScroll.style.cssText = "";
   return; 
  }
  var windowRect = windowElement.getBoundingClientRect();
  var yAxis = this.calculateViewPortScrollDataByAxis(wrapper.style.top, windowRect.top, windowElement.offsetHeight, window.innerHeight, wrapper.scrollTop);
  var xAxis = this.calculateViewPortScrollDataByAxis(wrapper.style.left, windowRect.left, windowElement.offsetWidth, window.innerWidth, wrapper.scrollLeft);
  this.prepareViewPortScrollData(xAxis, yAxis);
  ASPx.SetStyles(windowElement, {
   top: yAxis.windowOffset,
   left: xAxis.windowOffset
  });
  ASPx.SetStyles(wrapper, {
   width: xAxis.wrapperSize,
   height: yAxis.wrapperSize,
   position: "absolute",
   overflow: ASPx.Browser.MobileUI ? "scroll" : "auto",
   zIndex: windowElement.style.zIndex
  });
  ASPx.SetAbsoluteX(wrapper, ASPx.GetDocumentScrollLeft());
  ASPx.SetAbsoluteY(wrapper, ASPx.GetDocumentScrollTop());
  ASPx.SetStyles(wrapperScroll, {
   width: xAxis.wrapperScrollSize,
   height: yAxis.wrapperScrollSize,
   position: "absolute",
   overflow: "hidden"
  });
  wrapper.scrollLeft = xAxis.scrollSize;
  wrapper.scrollTop = yAxis.scrollSize;
 },
 calculateViewPortScrollDataByAxis: function(wrapperOffsetStyle, windowOffset, windowSize, viewPortSize, scrollSize) {
  var isWindowOffsetNegative = windowOffset < 0;
  windowOffset = isWindowOffsetNegative ? 0 : windowOffset;
  var wrapperScrollSize = Math.max(viewPortSize + Math.abs(Math.min(0, windowOffset)), windowSize + Math.abs(windowOffset));
  return { 
   windowOffset: isWindowOffsetNegative ? 0 : windowOffset,
   wrapperSize: viewPortSize,
   wrapperScrollSize: wrapperScrollSize,
   scrollSize: isWindowOffsetNegative ? scrollSize + Math.abs(windowOffset) : 0,
   hasScroll: wrapperScrollSize > viewPortSize
  };
 },
 prepareViewPortScrollData: function(xAxis, yAxis) {
  var scrollBarSize = ASPx.GetVerticalScrollBarWidth();
  if(yAxis.hasScroll && !xAxis.hasScroll) {
   xAxis.wrapperScrollSize = Math.min(xAxis.wrapperSize - scrollBarSize, xAxis.wrapperScrollSize);
  } else if(xAxis.hasScroll && !yAxis.hasScroll) {
   yAxis.wrapperScrollSize = Math.min(yAxis.wrapperSize - scrollBarSize, yAxis.wrapperScrollSize);
  } else if(yAxis.hasScroll && xAxis.hasScroll) {
   yAxis.wrapperScrollSize -= scrollBarSize;
   xAxis.wrapperScrollSize -= scrollBarSize;
  }
 }
};
PopupUtils.OverControl = {
 GetPopupElementByEvt: function (evt) {
  return PopupUtils.FindEventSourceParentByTestFunc(evt, PopupUtils.TestIsPopupElement);
 },
 OnMouseEvent: function (evt, mouseOver) {
  var popupElement = PopupUtils.OverControl.GetPopupElementByEvt(evt);
  if(mouseOver)
   popupElement.DXPopupElementControl.OnPopupElementMouseOver(evt, popupElement);
  else
   popupElement.DXPopupElementControl.OnPopupElementMouseOut(evt, popupElement);
 },
 OnMouseOut: function (evt) {
  PopupUtils.OverControl.OnMouseEvent(evt, false);
 },
 OnMouseOver: function (evt) {
  PopupUtils.OverControl.OnMouseEvent(evt, true);
 }
};
PopupUtils.BodyScrollHelper = (function () {
 var windowScrollLock = {},
  windowScroll = {},
  hideScrollbarsClassName = "dxpc-hideScrollbars";
 function lockWindowScroll(windowId) {
  windowScrollLock[windowId] = true;
 }
 function unlockWindowScroll(windowId) {
  delete windowScrollLock[windowId];
 }
 function isLocked(windowId) {
  return !!windowScrollLock[windowId];
 }
 function isAnyWindowScrollLocked() {
  for(var key in windowScrollLock) 
   if (windowScrollLock.hasOwnProperty(key) && windowScrollLock[key] === true)
    return true;
  return false;
 }
 function replaceVerticalScrollByPadding() {
  var currentBodyStyle = ASPx.GetCurrentStyle(document.body),
   paddingWidth = ASPx.GetVerticalScrollBarWidth() + ASPx.PxToInt(currentBodyStyle.paddingRight);
  ASPx.Attr.ChangeStyleAttribute(document.body, "padding-right", paddingWidth + "px");
 }
 function changeOverflow() {
  ASPx.Attr.ChangeStyleAttribute(document.documentElement, "overflow", "hidden");
  if(ASPx.GetCurrentStyle(document.body).overflowY === "scroll")
   ASPx.Attr.ChangeStyleAttribute(document.body, "overflow", "hidden");
  resetOverflowCache();
 }
 function restoreOverflow() {
  ASPx.Attr.RestoreStyleAttribute(document.documentElement, "overflow");
  ASPx.Attr.RestoreStyleAttribute(document.body, "overflow");
  resetOverflowCache();
 }
 function resetOverflowCache() {
  ASPx.verticalScrollIsNotHidden = null;
  ASPx.horizontalScrollIsNotHidden = null;
 }
 function saveScrollPosition(windowId) {
  windowScroll[windowId] = {
   x: window.pageXOffset,
   y: window.pageYOffset
  };
 }
 function restoreScrollPosition(windowId) {
  var currentWindowScroll = windowScroll[windowId];
  if(!!currentWindowScroll)
   window.scrollTo(currentWindowScroll.x, currentWindowScroll.y);
 }
 function restoreBodyScroll(windowId) {
  unlockWindowScroll(windowId);
  if(isAnyWindowScrollLocked())
   return;
  if(ASPx.Browser.WebKitTouchUI) {
   ASPx.Attr.RestoreStyleAttribute(document.body, "position");
   ASPx.Attr.RestoreStyleAttribute(document.body, "height");
   ASPx.Attr.RestoreStyleAttribute(document.body, "margin");
   ASPx.RemoveClassNameFromElement(document.documentElement, hideScrollbarsClassName);
   ASPx.Attr.RestoreStyleAttribute(document.body, "overflow");
   restoreScrollPosition(windowId);
  } else {
   restoreOverflow();
   restoreScrollPosition(windowId);
  }
  if(ASPx.Browser.Chrome)
   var dummy = document.documentElement.scrollTop; 
  ASPx.Attr.RestoreStyleAttribute(document.body, "padding-right");
  ASPx.Attr.RestoreStyleAttribute(document.body, "height");
  ASPx.Attr.RestoreStyleAttribute(document.body, "width");
 }
 return {
  RestoreIfLocked: function(windowId) {
   if(isLocked(windowId))
    restoreBodyScroll(windowId);
  },
  HideBodyScroll: function(windowId) {
   if(isAnyWindowScrollLocked()) { 
    lockWindowScroll(windowId);
    return;
   }
   lockWindowScroll(windowId);
   if(PopupUtils.IsVerticalScrollExists())
    replaceVerticalScrollByPadding();
   if(ASPx.Browser.WebKitTouchUI) {
    saveScrollPosition(windowId);
    ASPx.Attr.ChangeStyleAttribute(document.body, "overflow", "hidden");
    ASPx.Attr.ChangeStyleAttribute(document.body, "position", "relative");
    ASPx.Attr.ChangeStyleAttribute(document.body, "height", "100%");
    ASPx.Attr.ChangeStyleAttribute(document.body, "margin", "0");
    ASPx.AddClassNameToElement(document.documentElement, hideScrollbarsClassName);
   } else {
    saveScrollPosition(windowId);
    changeOverflow();
    var documentHeight = ASPx.GetDocumentHeight();
    var documentWidth = ASPx.GetDocumentWidth();
    if(window.pageYOffset > 0 && ASPx.PxToInt(window.getComputedStyle(document.body, null)) != documentHeight)
     ASPx.Attr.ChangeStyleAttribute(document.body, "height", documentHeight + "px");
    if(window.pageXOffset > 0 && ASPx.PxToInt(window.getComputedStyle(document.body, null)) != documentWidth)
     ASPx.Attr.ChangeStyleAttribute(document.body, "width", documentWidth + "px");
   }
  },
  RestoreBodyScroll: restoreBodyScroll
 };
})();
var PositionAlignConsts = {
 NOT_SET: 0,
 OUTSIDE_START: 1,
 NEAR_BOUND_START: 2,
 INNER_START: 3,
 CENTER: 4,
 INNER_END: 5,
 NEAR_BOUND_END: 6,
 OUTSIDE_END: 7,
 WINDOW_CENTER: 8,
 WINDOW_START: 9,
 WINDOW_END: 10
};
var AlignIndicatorTable = {};
var PositionCalculator = ASPx.CreateClass(null, {
 constructor: function() {
  this.element = null;
  this.popupElement = null;
  this.align = 0;
  this.offset = 0;
  this.startPos = 0;
  this.startPosInit = 0;
  this.rtl = false;
  this.isPopupFullCorrectionOn = false;
  this.isHorizontal = true;
  this.size = 0;
  this.bodySize = 0;
  this.actualBodySize = 0;
  this.elementStartPos = 0;
  this.scrollStartPos = 0;
  this.isInverted = false;
  this.popupElementSize = 0;
  this.boundStartPos = 0;
  this.boundEndPos = 0;
  this.innerBoundStartPos = 0;
  this.innerBoundEndPos = 0;
  this.isMoreFreeSpaceLeft = false;
  this.nearBoundOverlapRate = 0.25;
  this.functionsTable = {};
  this.initializeFunctionsTable();
 },
 applyParams: function(element, popupElement, align, offset, startPos, startPosInit, rtl, isPopupFullCorrectionOn, ignoreAlignWithoutScrollReserve, ignorePopupElementBorders, isHorizontal, showPopupInsideScreenBounds) {
  this.isHorizontal = isHorizontal;
  this.element = element;
  this.popupElement = popupElement;
  this.align = this.getAlignValueFromIndicator(align);
  this.offset = offset;
  this.startPos = startPos;
  this.startPosInit = startPosInit;
  this.rtl = rtl;
  this.isPopupFullCorrectionOn = isPopupFullCorrectionOn;
  this.ignoreAlignWithoutScrollReserve = ignoreAlignWithoutScrollReserve;
  this.ignorePopupElementBorders = ignorePopupElementBorders;
  this.showPopupInsideScreenBounds = showPopupInsideScreenBounds;
  this.calculateParams();
 },
 disposeState: function() {
  this.element = null;
  this.popupElement = null;
 },
 getPopupAbsolutePos: function() {
  if(this.isWindowAlign()) {
   var showAtPos = this.startPos != ASPx.InvalidPosition && !this.popupElement;
   if(showAtPos)
    this.align = PositionAlignConsts.NOT_SET;
   else
    return this.getWindowAlignPos();
  }
  if(this.popupElement)
   this.calculatePopupElement();
  else
   this.align = PositionAlignConsts.NOT_SET;
  return this.getPopupAbsolutePosCore();
 },
 initializeFunctionsTable: function() {
  var table = this.functionsTable;
  table[PositionAlignConsts.NOT_SET] = this.calculateNotSet;
  table[PositionAlignConsts.OUTSIDE_START] = this.calculateOutsideStart;
  table[PositionAlignConsts.INNER_START] = this.calculateInnerStart;
  table[PositionAlignConsts.CENTER] = this.calculateCenter;
  table[PositionAlignConsts.INNER_END] = this.calculateInnerEnd;
  table[PositionAlignConsts.OUTSIDE_END] = this.calculateOutsideEnd;
  table[PositionAlignConsts.NEAR_BOUND_START] = this.calculateNearBoundStart;
  table[PositionAlignConsts.NEAR_BOUND_END] = this.calculateNearBoundEnd;
  table[PositionAlignConsts.WINDOW_CENTER] = this.calculateWindowCenter;
  table[PositionAlignConsts.WINDOW_START] = this.calculateWindowStart;
  table[PositionAlignConsts.WINDOW_END] = this.calculateWindowEnd;
 },
 calculateParams: function() {
  this.size = this.getElementSize();
  if(this.isHorizontal) {
   this.bodySize = ASPx.GetDocumentClientWidth();
   this.elementStartPos = ASPx.GetAbsoluteX(this.popupElement) + this.getBorderCorrection();
   this.scrollStartPos = ASPx.GetDocumentScrollLeft();
  }
  else {
   this.bodySize = ASPx.GetDocumentClientHeight();
   this.elementStartPos = ASPx.GetAbsoluteY(this.popupElement) + this.getBorderCorrection();
   this.scrollStartPos = ASPx.GetDocumentScrollTop();
  }
 },
 getBorderCorrection: function() {
  if(!this.ignorePopupElementBorders)
   return 0;
  var style = getComputedStyle(this.popupElement);
  return ASPx.PxToInt(this.isHorizontal ? style.borderLeftWidth : style.borderTopWidth);
 },
 isWindowAlign: function() {
  return this.align == PositionAlignConsts.WINDOW_CENTER || this.align == PositionAlignConsts.WINDOW_START ||
   this.align == PositionAlignConsts.WINDOW_END;
 },
 getWindowAlignPos: function() {
  this.actualBodySize = ASPx.Browser.WebKitTouchUI ? this.getWindowInnerSize() : this.bodySize;
  return this.getPopupAbsolutePosCore();
 },
 getPopupAbsolutePosCore: function() {
  var calculationFunc = this.functionsTable[this.align];
  calculationFunc.call(this);
  return new ASPx.PopupPosition(this.startPos, this.isInverted);
 },
 calculateWindowCenter: function() {
  this.startPos = Math.max(Math.ceil(this.actualBodySize / 2 - this.size / 2), 0) + this.scrollStartPos + this.offset;
 },
 calculateWindowStart: function() {
  this.startPos = this.scrollStartPos + this.offset;
 },
 calculateWindowEnd: function() {
  this.startPos = this.scrollStartPos + this.actualBodySize - this.size + this.offset;
 },
 calculatePopupElement: function() {
  this.popupElementSize = this.getPopupElementSize();
  this.boundStartPos = this.elementStartPos - this.size;
  this.boundEndPos = this.elementStartPos + this.popupElementSize;
  this.innerBoundStartPos = this.elementStartPos;
  this.innerBoundEndPos = this.elementStartPos + this.popupElementSize - this.size;
  var hasLeftScrollReserve = this.boundStartPos >= 0;
  this.isMoreFreeSpaceLeft = (this.bodySize - (this.boundEndPos + this.size) < this.boundStartPos - 2 * this.scrollStartPos) && (!this.ignoreAlignWithoutScrollReserve || hasLeftScrollReserve);
 },
 calculateOutsideStart: function() {
  this.isInverted = this.isPopupFullCorrectionOn && (!(this.boundStartPos - this.scrollStartPos > 0 || this.isMoreFreeSpaceLeft));
  if(this.isInverted)
   this.startPos = this.boundEndPos - this.offset;
  else
   this.startPos = this.boundStartPos + this.offset;
 },
 calculateInnerStart: function() {
  this.startPos = this.innerBoundStartPos + this.offset;
  if(this.isPopupFullCorrectionOn)
   this.startPos = PopupUtils.AdjustPositionToClientScreen(this.element, this.startPos, this.rtl, this.isHorizontal);
 },
 calculateCenter: function() {
  this.startPos = this.elementStartPos + Math.round((this.popupElementSize - this.size) / 2) + this.offset;
  if(this.showPopupInsideScreenBounds) {
   if(this.startPos < 0)
    this.startPos = 0;
   if(this.startPos + this.size > this.bodySize)
    this.startPos = this.bodySize - this.size;
  }
 },
 calculateInnerEnd: function() {
  this.startPos = this.innerBoundEndPos + this.offset;
  if(this.isPopupFullCorrectionOn)
   this.startPos = PopupUtils.AdjustPositionToClientScreen(this.element, this.startPos, this.rtl, this.isHorizontal);
 },
 calculateOutsideEnd: function() {
  this.isInverted = this.isPopupFullCorrectionOn && (!(this.boundEndPos + this.size < this.bodySize + this.scrollStartPos || !this.isMoreFreeSpaceLeft));
  if(this.isInverted)
   this.startPos = this.boundStartPos - this.offset;
  else
   this.startPos = this.boundEndPos + this.offset;
 },
 calculateNotSet: function() {
  if(this.rtl)
   this.calculateNotSetRightToLeft();
  else
   this.calculateNotSetLeftToRight();
 },
 calculateNotSetLeftToRight: function() {
  if(!ASPx.IsValidPosition(this.startPos)) {
   if(this.popupElement)
    this.startPos = this.elementStartPos;
   else if(this.offset)
    this.startPos = 0;
   else
    this.startPos = this.startPosInit;
  }
  this.isInverted = this.isPopupFullCorrectionOn && (this.startPos - this.scrollStartPos + this.size > this.bodySize && this.startPos - this.scrollStartPos > this.bodySize / 2);
  if(this.isInverted)
   this.startPos = this.startPos - this.size - this.offset;
  else
   this.startPos = this.startPos + this.offset;
 },
 calculateNotSetRightToLeft: function() {
  if(!ASPx.IsValidPosition(this.startPos)) {
   if(this.popupElement)
    this.startPos = this.innerBoundEndPos;
   else if(this.offset)
    this.startPos = 0;
   else
    this.startPos = this.startPosInit;
  }
  else
   this.startPos -= this.size;
  this.isInverted = this.isPopupFullCorrectionOn && (this.startPos < this.scrollStartPos && this.startPos - this.scrollStartPos < this.bodySize / 2);
  if(this.isInverted)
   this.startPos = this.startPos + this.size + this.offset;
  else
   this.startPos = this.startPos - this.offset;
 },
 calculateNearBoundStart: function() {
  this.startPos = this.boundStartPos + this.offset + this.size * this.nearBoundOverlapRate;
  if(this.isPopupFullCorrectionOn)
   this.startPos = PopupUtils.AdjustPositionToClientScreen(this.element, this.startPos, this.rtl, this.isHorizontal);
 },
 calculateNearBoundEnd: function() {
  this.startPos = this.boundEndPos + this.offset - this.size * this.nearBoundOverlapRate;
  if(this.isPopupFullCorrectionOn)
   this.startPos = PopupUtils.AdjustPositionToClientScreen(this.element, this.startPos, this.rtl, this.isHorizontal);
 },
 getAlignValueFromIndicator: function(alignIndicator) {
  var alignValue = AlignIndicatorTable[alignIndicator];
  if(alignValue === undefined)
   throw "Incorrect align indicator.";
  return alignValue;
 },
 getElementSize: function() {
  return this.getCustomElementSize(this.element, false);
 },
 getPopupElementSize: function() {
  return this.getCustomElementSize(this.popupElement, this.ignorePopupElementBorders);
 },
 getCustomElementSize: function(customElement, ignoreBorders) {
  if(ignoreBorders) {
   return this.isHorizontal ? ASPx.GetClearClientWidth(customElement) : ASPx.GetClearClientHeight(customElement);
  }
  return this.isHorizontal ? ASPx.GetElementOffsetWidth(customElement) : ASPx.GetElementOffsetHeight(customElement);
 },
 getWindowInnerSize: function() {
  return this.isHorizontal ? window.innerWidth : window.innerHeight;
 }
});
var positionCalculator = null;
function getPositionCalculator() {
 if(positionCalculator == null)
  positionCalculator = new PositionCalculator();
 return positionCalculator;
}
function initializeAlignIndicatorTable() {
 AlignIndicatorTable[PopupUtils.NotSetAlignIndicator] = PositionAlignConsts.NOT_SET;
 AlignIndicatorTable[PopupUtils.OutsideLeftAlignIndicator] = PositionAlignConsts.OUTSIDE_START;
 AlignIndicatorTable[PopupUtils.AboveAlignIndicator] = PositionAlignConsts.OUTSIDE_START;
 AlignIndicatorTable[PopupUtils.LeftAlignIndicator] = PositionAlignConsts.NEAR_BOUND_START;
 AlignIndicatorTable[PopupUtils.TopAlignIndicator] = PositionAlignConsts.NEAR_BOUND_START;
 AlignIndicatorTable[PopupUtils.LeftSidesAlignIndicator] = PositionAlignConsts.INNER_START;
 AlignIndicatorTable[PopupUtils.TopSidesAlignIndicator] = PositionAlignConsts.INNER_START;
 AlignIndicatorTable[PopupUtils.CenterAlignIndicator] = PositionAlignConsts.CENTER;
 AlignIndicatorTable[PopupUtils.MiddleAlignIndicator] = PositionAlignConsts.CENTER;
 AlignIndicatorTable[PopupUtils.RightSidesAlignIndicator] = PositionAlignConsts.INNER_END;
 AlignIndicatorTable[PopupUtils.BottomSidesAlignIndicator] = PositionAlignConsts.INNER_END;
 AlignIndicatorTable[PopupUtils.RightAlignIndicator] = PositionAlignConsts.NEAR_BOUND_END;
 AlignIndicatorTable[PopupUtils.BottomAlignIndicator] = PositionAlignConsts.NEAR_BOUND_END;
 AlignIndicatorTable[PopupUtils.OutsideRightAlignIndicator] = PositionAlignConsts.OUTSIDE_END;
 AlignIndicatorTable[PopupUtils.BelowAlignIndicator] = PositionAlignConsts.OUTSIDE_END;
 AlignIndicatorTable[PopupUtils.WindowCenterAlignIndicator] = PositionAlignConsts.WINDOW_CENTER;
 AlignIndicatorTable[PopupUtils.WindowLeftAlignIndicator] = PositionAlignConsts.WINDOW_START;
 AlignIndicatorTable[PopupUtils.WindowTopAlignIndicator] = PositionAlignConsts.WINDOW_START;
 AlignIndicatorTable[PopupUtils.WindowRightAlignIndicator] = PositionAlignConsts.WINDOW_END;
 AlignIndicatorTable[PopupUtils.WindowBottomAlignIndicator] = PositionAlignConsts.WINDOW_END;
}
initializeAlignIndicatorTable();
ASPx.PopupPosition = function(position, isInverted) {
 this.position = position;
 this.isInverted = isInverted;
};
ASPx.PopupSize = function(width, height) {
 this.width = width;
 this.height = height;
};
ASPx.PopupUtils = PopupUtils;
ASPx.PositionCalculator = PositionCalculator;
})();

(function () {
ASPxClientCallbackPanel = ASPx.CreateClass(ASPxClientPanel, {
 constructor: function (name) {
  this.constructor.prototype.constructor.call(this, name);
  this.hideContentOnCallback = true;
  this.isLoadingPanelTextEmpty = false;
 },
 OnCallback: function (result) {
  ASPx.SetInnerHtml(this.getContentElement(), result);
  if(this.touchUIScroller)
   this.touchUIScroller.ChangeElement(this.getContentElement());
 },
 ShowLoadingPanel: function () {
  var element = this.getContentElement();
  var mainElement = (element.tagName == "TD") ? this.GetMainElement() : element;
  if(!this.hideContentOnCallback)
   this.CreateLoadingPanelWithAbsolutePosition(this.GetMainElement().parentNode, mainElement);
  else
   this.CreateLoadingPanelInsideContainer(element, true, true, false);
 },
 ShowLoadingDiv: function () {
  this.CreateLoadingDiv(this.GetMainElement().parentNode, this.getContentElement());
 },
 GetCallbackAnimationElement: function() {
  return this.getContentElement();
 },
 PerformCallback: function (parameter, onSuccess) {
  this.CreateCallback(parameter, null, null, onSuccess);
 },
 CreateCallback: function (arg, command, callbackInfo, handler) {
  this.ShowLoadingElements();
  ASPxClientControl.prototype.CreateCallback.call(this, arg, command, handler);
 },
 GetLoadingPanelTextLabelID: function () {
  return this.name + "_TL";
 },
 GetLoadingPanelTextLabel: function () {
  return ASPx.GetElementById(this.GetLoadingPanelTextLabelID());
 },
 GetClonedLoadingPanelTextLabel: function() {
  var clonedLoadingPanel = this.GetClonedLoadingPanel();
  return clonedLoadingPanel ? clonedLoadingPanel.querySelector("#" + this.GetLoadingPanelTextLabelID()) : null;
 },
 GetLoadingPanelText: function () {
  var textLabel = this.GetLoadingPanelTextLabel();
  if(textLabel && !this.isLoadingPanelTextEmpty)
   return textLabel.innerHTML;
  return "";
 },
 SetLoadingPanelText: function(text) {
  this.isLoadingPanelTextEmpty = text == null || text == "";
  var loadingPanelTextHtml = this.isLoadingPanelTextEmpty ? "&nbsp;" : text; 
  var textLabel = this.GetLoadingPanelTextLabel();
  if(textLabel)
   textLabel.innerHTML = loadingPanelTextHtml;
  textLabel = this.GetClonedLoadingPanelTextLabel();
  if(textLabel)
   textLabel.innerHTML = loadingPanelTextHtml;
 },
 SetContentHtml: function (html, useAnimation) {
  ASPxClientPanel.prototype.SetContentHtml.call(this, html);
  if(useAnimation && typeof(ASPx.AnimationHelper) != "undefined")
   ASPx.AnimationHelper.fadeIn(this.getContentElement());
 }
});
ASPxClientCallbackPanel.Cast = ASPxClientControl.Cast;
window.ASPxClientCallbackPanel = ASPxClientCallbackPanel;
})();
(function () {
ASPx.StateItemsExist = false;
ASPx.FocusedItemKind = "FocusedStateItem";
ASPx.HoverItemKind = "HoverStateItem";
ASPx.PressedItemKind = "PressedStateItem";
ASPx.SelectedItemKind = "SelectedStateItem";
ASPx.DisabledItemKind = "DisabledStateItem";
ASPx.ReadOnlyItemKind = "ReadOnlyStateItem";
ASPx.CachedStatePrefix = "cached";
ASPxStateItem = ASPx.CreateClass(null, {
 constructor: function(name, classNames, cssTexts, postfixes, imageObjs, imagePostfixes, kind, disableApplyingStyleToLink){
  this.name = name;
  this.classNames = classNames;
  this.customClassNames = [];
  this.resultClassNames = [];
  this.cssTexts = cssTexts;
  this.postfixes = postfixes;
  this.imageObjs = imageObjs;
  this.imagePostfixes = imagePostfixes;
  this.kind = kind;
  this.classNamePostfix = kind.substr(0, 1).toLowerCase();
  this.enabled = true;
  this.needRefreshBetweenElements = false;
  this.elements = null;
  this.images = null;
  this.links = [];
  this.colorChanged = [];
  this.textDecorationChanged = [];
  this.disableApplyingStyleToLink = !!disableApplyingStyleToLink; 
 },
 GetCssText: function(index){
  if(ASPx.IsExists(this.cssTexts[index]))
   return this.cssTexts[index];
  return this.cssTexts[0];
 },
 CreateStyleRule: function(index){
  if(this.GetCssText(index) == "") return "";
  var styleSheet = ASPx.GetCurrentStyleSheet();
  if(styleSheet)
   return ASPx.CreateImportantStyleRule(styleSheet, this.GetCssText(index), this.classNamePostfix);  
  return ""; 
 },
 GetClassName: function(index){
  if(ASPx.IsExists(this.classNames[index]))
   return this.classNames[index];
  return this.classNames[0];
 },
 GetResultClassName: function(index){
  if(!ASPx.IsExists(this.resultClassNames[index])) {
   if(!ASPx.IsExists(this.customClassNames[index]))
    this.customClassNames[index] = this.CreateStyleRule(index);
   if(this.GetClassName(index) != "" && this.customClassNames[index] != "")
    this.resultClassNames[index] = this.GetClassName(index) + " " + this.customClassNames[index];
   else if(this.GetClassName(index) != "")
    this.resultClassNames[index] = this.GetClassName(index);
   else if(this.customClassNames[index] != "")
    this.resultClassNames[index] = this.customClassNames[index];
   else
    this.resultClassNames[index] = "";
  }
  return this.resultClassNames[index];
 },
 GetElements: function(element){
  if(!this.elements || !ASPx.IsValidElements(this.elements)){
   if(this.postfixes && this.postfixes.length > 0){
    this.elements = [ ];
    var parentNode = element.parentNode;
    if(parentNode){
     for(var i = 0; i < this.postfixes.length; i++){
      var id = this.name + this.postfixes[i];
      this.elements[i] = ASPx.GetChildById(parentNode, id);
      if(!this.elements[i])
       this.elements[i] = ASPx.GetElementById(id);
     }
    }
   }
   else
    this.elements = [element];
  }
  return this.elements;
 },
 GetImages: function(element){
  if(!this.images || !ASPx.IsValidElements(this.images)){
   this.images = [ ];
   if(this.imagePostfixes && this.imagePostfixes.length > 0){
    var elements = this.GetElements(element);
    for(var i = 0; i < this.imagePostfixes.length; i++){
     var id = this.name + this.imagePostfixes[i];
     for(var j = 0; j < elements.length; j++){
      if(!elements[j]) continue;
      if(elements[j].id == id)
       this.images[i] = elements[j];
      else
       this.images[i] = ASPx.GetChildById(elements[j], id);
      if(this.images[i])
       break;
     }
    }
   }
  }
  return this.images;
 },
 Apply: function(element){
  if(!this.enabled) return;
  try{
   this.ApplyStyle(element);
   if(this.imageObjs && this.imageObjs.length > 0)
    this.ApplyImage(element);
  }
  catch(e){
  }
 },
 ApplyStyle: function(element){
  var elements = this.GetElements(element);
  for(var i = 0; i < elements.length; i++){
   if(!elements[i]) continue;
   var elementColor, elementTextDecoration;
   if(this.colorChanged[i] === undefined) {
    elementColor = window.getComputedStyle(elements[i]).color;
   }
   if(this.textDecorationChanged[i] === undefined) {
    elementTextDecoration = window.getComputedStyle(elements[i]).textDecoration;
   }
   if(this.GetResultClassName(i) != "") {
    var className = elements[i].className.replace(this.GetResultClassName(i), "");
    elements[i].className = ASPx.Str.Trim(className) + " " + this.GetResultClassName(i);
   }
   if(this.colorChanged[i] === undefined) {
    this.colorChanged[i] = window.getComputedStyle(elements[i]).color !== elementColor;
   }
   if(this.textDecorationChanged[i] === undefined) {
    this.textDecorationChanged[i] = window.getComputedStyle(elements[i]).textDecoration !== elementTextDecoration;
   }
   if(!ASPx.Browser.Opera || ASPx.Browser.Version >= 9)
    this.ApplyStyleToLinks(elements, i);
  }
 },
 ApplyStyleToLinks: function(elements, index){
  if(this.disableApplyingStyleToLink)
   return;
  if(!ASPx.IsValidElements(this.links[index]))
   this.links[index] = ASPx.GetNodesByTagName(elements[index], "A");
  for(var i = 0; i < this.links[index].length; i++)
   this.ApplyStyleToLinkElement(this.links[index][i], index);
 },
 ApplyStyleToLinkElement: function(link, index) {
  if(this.colorChanged[index])
   ASPx.Attr.ChangeAttributeExtended(link.style, "color", link, "saved" + this.kind + "Color", "inherit");
  if(this.textDecorationChanged[index])
   ASPx.Attr.ChangeAttributeExtended(link.style, "text-decoration", link, "saved" + this.kind + "TextDecoration", "inherit");
 },
 ApplyImage: function(element){
  var images = this.GetImages(element);
  for(var i = 0; i < images.length; i++){
   if(!images[i] || !this.imageObjs[i]) continue;
   var useSpriteImage = typeof(this.imageObjs[i]) != "string";
   var newUrl = "", newCssClass = "", newBackground = "";
   if(useSpriteImage){
    newUrl = ASPx.EmptyImageUrl;           
    if(this.imageObjs[i].spriteCssClass) 
     newCssClass = this.imageObjs[i].spriteCssClass;
    if(this.imageObjs[i].spriteBackground)
     newBackground = this.imageObjs[i].spriteBackground;
   }
   else{
    newUrl = this.imageObjs[i];
    if(ASPx.Attr.IsExistsAttribute(images[i].style, "background"))   
     newBackground = " ";
   }
   if(newUrl != "")
    ASPx.Attr.ChangeAttributeExtended(images[i], "src", images[i], "saved" + this.kind + "Src", newUrl);
   if(newCssClass != "")
    this.ApplyImageClassName(images[i], newCssClass);
   if(newBackground != ""){
    if(ASPx.Browser.WebKitFamily) {
     var savedBackground = ASPx.Attr.GetAttribute(images[i].style, "background");
     if(!useSpriteImage)
      savedBackground += " " + images[i].style["backgroundPosition"];
     ASPx.Attr.SetAttribute(images[i], "saved" + this.kind + "Background", savedBackground);
     ASPx.Attr.SetAttribute(images[i].style, "background", newBackground);
    }
    else
     ASPx.Attr.ChangeAttributeExtended(images[i].style, "background", images[i], "saved" + this.kind + "Background", newBackground);
   }     
  }
 },
 ApplyImageClassName: function(element, newClassName){
  if(ASPx.Attr.GetAttribute(element, "saved" + this.kind + "ClassName"))
   this.CancelImageClassName(element);
  var className = element.className;
  ASPx.Attr.SetAttribute(element, "saved" + this.kind + "ClassName", className);
  element.className = className + " " + newClassName;
 },
 Cancel: function(element){
  if(!this.enabled) return;
  try{  
   if(this.imageObjs && this.imageObjs.length > 0)
    this.CancelImage(element);
   this.CancelStyle(element);
  }
  catch(e){
  }
 },
 CancelStyle: function(element){
  var elements = this.GetElements(element);
  for(var i = 0; i < elements.length; i++){
   if(!elements[i]) continue;
   if(this.GetResultClassName(i) != "") {
    var className = ASPx.Str.Trim(elements[i].className.replace(this.GetResultClassName(i), ""));
    elements[i].className = className;
   }
   if(!ASPx.Browser.Opera || ASPx.Browser.Version >= 9)
    this.CancelStyleFromLinks(elements, i);
  }
 },
 CancelStyleFromLinks: function(elements, index){
  if(this.disableApplyingStyleToLink)
   return;
  if(!ASPx.IsValidElements(this.links[index]))
   this.links[index] = ASPx.GetNodesByTagName(elements[index], "A");
  for(var i = 0; i < this.links[index].length; i++)
   this.CancelStyleFromLinkElement(this.links[index][i], index);
 },
 CancelStyleFromLinkElement: function(link, index){
  ASPx.Attr.RestoreAttributeExtended(link.style, "color", link, "saved" + this.kind + "Color");
  ASPx.Attr.RestoreAttributeExtended(link.style, "text-decoration", link, "saved" + this.kind + "TextDecoration");
 },
 CancelImage: function(element){
  var images = this.GetImages(element);
  for(var i = 0; i < images.length; i++){
   if(!images[i] || !this.imageObjs[i]) continue;
   ASPx.Attr.RestoreAttributeExtended(images[i], "src", images[i], "saved" + this.kind + "Src");
   this.CancelImageClassName(images[i]);
   ASPx.Attr.RestoreAttributeExtended(images[i].style, "background", images[i], "saved" + this.kind + "Background");
  }
 },
 CancelImageClassName: function(element){
  var savedClassName = ASPx.Attr.GetAttribute(element, "saved" + this.kind + "ClassName");
  if(ASPx.IsExists(savedClassName)) {
   element.className = savedClassName;
   ASPx.Attr.RemoveAttribute(element, "saved" + this.kind + "ClassName");
  }
 },
 Clone: function(){
  return new ASPxStateItem(this.name, this.classNames, this.cssTexts, this.postfixes, 
   this.imageObjs, this.imagePostfixes, this.kind, this.disableApplyingStyleToLink);
 },
 IsChildElement: function(element){
  if(element != null){
   var elements = this.GetElements(element);
   for(var i = 0; i < elements.length; i++){
    if(!elements[i]) continue;
    if(ASPx.GetIsParent(elements[i], element)) 
     return true;
   }
  }
  return false;
 },
 ForceRedrawAppearance: function(element) {
  if(!aspxGetStateController().IsForceRedrawAppearanceLocked()) {
   var value = element.style.opacity;
   element.style.opacity = "0.7777";
   var dummy = element.offsetWidth;
   element.style.opacity = value;
  }
 }
});
ASPxClientStateEventArgs = ASPx.CreateClass(null, {
 constructor: function(item, element){
  this.item = item;
  this.element = element;
  this.toElement = null;
  this.fromElement = null;
  this.htmlEvent = null;
 }
});
ASPxStateController = ASPx.CreateClass(null, {
 constructor: function(){
  this.focusedItems = { };
  this.hoverItems = { };
  this.pressedItems = { };
  this.selectedItems = { };
  this.disabledItems = {};
  this.readOnlyItems = {};
  this.disabledScheme = {};
  this.currentFocusedElement = null;
  this.currentFocusedItemName = null;
  this.currentHoverElement = null;
  this.currentHoverItemName = null;
  this.currentPressedElement = null;
  this.currentPressedItemName = null;
  this.savedCurrentPressedElement = null;
  this.savedCurrentMouseMoveSrcElement = null;
  this.forceRedrawAppearanceLockCount = 0;
  this.stateItemType = ASPxStateItem;
  this.AfterSetFocusedState = new ASPxClientEvent();
  this.AfterClearFocusedState = new ASPxClientEvent();
  this.AfterSetHoverState = new ASPxClientEvent();
  this.AfterClearHoverState = new ASPxClientEvent();
  this.AfterSetPressedState = new ASPxClientEvent();
  this.AfterClearPressedState = new ASPxClientEvent();
  this.AfterDisabled = new ASPxClientEvent();
  this.AfterEnabled = new ASPxClientEvent();
  this.BeforeSetFocusedState = new ASPxClientEvent();
  this.BeforeClearFocusedState = new ASPxClientEvent();
  this.BeforeSetHoverState = new ASPxClientEvent();
  this.BeforeClearHoverState = new ASPxClientEvent();
  this.BeforeSetPressedState = new ASPxClientEvent();
  this.BeforeClearPressedState = new ASPxClientEvent();
  this.BeforeDisabled = new ASPxClientEvent();
  this.BeforeEnabled = new ASPxClientEvent();
  this.FocusedItemKeyDown = new ASPxClientEvent();
 }, 
 AddHoverItem: function(name, classNames, cssTexts, postfixes, imageObjs, imagePostfixes, disableApplyingStyleToLink){
  this.AddItem(this.hoverItems, name, classNames, cssTexts, postfixes, imageObjs, imagePostfixes, ASPx.HoverItemKind, disableApplyingStyleToLink);
  this.AddItem(this.focusedItems, name, classNames, cssTexts, postfixes, imageObjs, imagePostfixes, ASPx.FocusedItemKind, disableApplyingStyleToLink);
 },
 AddPressedItem: function(name, classNames, cssTexts, postfixes, imageObjs, imagePostfixes, disableApplyingStyleToLink){
  this.AddItem(this.pressedItems, name, classNames, cssTexts, postfixes, imageObjs, imagePostfixes, ASPx.PressedItemKind, disableApplyingStyleToLink);
 },
 AddSelectedItem: function(name, classNames, cssTexts, postfixes, imageObjs, imagePostfixes, disableApplyingStyleToLink){
  this.AddItem(this.selectedItems, name, classNames, cssTexts, postfixes, imageObjs, imagePostfixes, ASPx.SelectedItemKind, disableApplyingStyleToLink);
 },
 AddDisabledItem: function (name, classNames, cssTexts, postfixes, imageObjs, imagePostfixes, disableApplyingStyleToLink, rootId) {
  this.AddItem(this.disabledItems, name, classNames, cssTexts, postfixes, imageObjs, imagePostfixes,
   ASPx.DisabledItemKind, disableApplyingStyleToLink, this.addIdToDisabledItemScheme, rootId);
 },
 AddReadOnlyItem: function(name, classNames, cssTexts, postfixes, imageObjs, imagePostfixes, disableApplyingStyleToLink) {
  this.AddItem(this.readOnlyItems, name, classNames, cssTexts, postfixes, imageObjs, imagePostfixes, ASPx.ReadOnlyItemKind, disableApplyingStyleToLink);
 },
 addIdToDisabledItemScheme: function(rootId, childId) {
  if (!rootId)
   return;
  if (!this.disabledScheme[rootId])
   this.disabledScheme[rootId] = [rootId];
  if (childId && (rootId != childId) && ASPx.Data.ArrayIndexOf(this.disabledScheme[rootId], childId) == -1)
   this.disabledScheme[rootId].push(childId);
 },
 removeIdFromDisabledItemScheme: function(rootId, childId) {
  if (!rootId || !this.disabledScheme[rootId])
   return;
  ASPx.Data.ArrayRemove(this.disabledScheme[rootId], childId);
  if (this.disabledScheme[rootId].length == 0)
   delete this.disabledScheme[rootId];
 },
 AddItem: function (items, name, classNames, cssTexts, postfixes, imageObjs, imagePostfixes, kind, disableApplyingStyleToLink, onAdd, rootId) {
  var type = this.getStateItemType();
  var stateItem = new type(name, classNames, cssTexts, postfixes, imageObjs, imagePostfixes, kind, disableApplyingStyleToLink);
  if (postfixes && postfixes.length > 0) {
   for (var i = 0; i < postfixes.length; i++) {
    items[name + postfixes[i]] = stateItem;
    if (onAdd)
     onAdd.call(this, rootId, name + postfixes[i]);
   }
  }
  else {
   if (onAdd)
    onAdd.call(this, rootId, name);
   items[name] = stateItem;
  }
  ASPx.StateItemsExist = true;
 },
 getStateItemType: function () { return this.stateItemType; },
 withCustomStateItemType: function (newType, callback) {
  this.stateItemType = newType;
  callback(this);
  this.stateItemType = ASPxStateItem;
 },
 RemoveHoverItem: function(name, postfixes){
  this.RemoveItem(this.hoverItems, name, postfixes);
  this.RemoveItem(this.focusedItems, name, postfixes);
 },
 RemovePressedItem: function(name, postfixes){
  this.RemoveItem(this.pressedItems, name, postfixes);
 },
 RemoveSelectedItem: function(name, postfixes){
  this.RemoveItem(this.selectedItems, name, postfixes);
 },
 RemoveDisabledItem: function (name, postfixes, rootId) {
  this.RemoveItem(this.disabledItems, name, postfixes, this.removeIdFromDisabledItemScheme, rootId);
 },
 RemoveReadOnlyItem: function(name, postfixes) {
  this.RemoveItem(this.readOnlyItems, name, postfixes);
 },
 RemoveItem: function (items, name, postfixes, onRemove, rootId) {
  if (postfixes && postfixes.length > 0) {
   for (var i = 0; i < postfixes.length; i++) {
    delete items[name + postfixes[i]];
    if (onRemove)
     onRemove.call(this, rootId, name + postfixes[i]);
   }
  }
  else {
   delete items[name];
   if (onRemove)
    onRemove.call(this, rootId, name);
  }
 },
 RemoveDisposedItems: function(){
  this.RemoveDisposedItemsByType(this.hoverItems);
  this.RemoveDisposedItemsByType(this.pressedItems);
  this.RemoveDisposedItemsByType(this.focusedItems);
  this.RemoveDisposedItemsByType(this.selectedItems);
  this.RemoveDisposedItemsByType(this.disabledItems);
  this.RemoveDisposedItemsByType(this.disabledScheme);
  this.RemoveDisposedItemsByType(this.readOnlyItems);
 },
 RemoveDisposedItemsByType: function(items){
  for(var key in items) {
   if(items.hasOwnProperty(key)) {
    var item = items[key];
    var element = document.getElementById(key);
    if(!element || !ASPx.IsValidElement(element))
     delete items[key];
    try {
     if(item && item.elements) {
      for(var i = 0; i < item.elements.length; i++) {
       if(!ASPx.IsValidElements(item.links[i]))
        item.links[i] = null;
      }
     }
    }
    catch(e) {
    }
   }
  }
 },
 GetFocusedElement: function(srcElement){
  return this.GetItemElement(srcElement, this.focusedItems, ASPx.FocusedItemKind);
 },
 GetHoverElement: function(srcElement){
  return this.GetItemElement(srcElement, this.hoverItems, ASPx.HoverItemKind);
 },
 GetPressedElement: function(srcElement){
  return this.GetItemElement(srcElement, this.pressedItems, ASPx.PressedItemKind);
 },
 GetSelectedElement: function(srcElement){
  return this.GetItemElement(srcElement, this.selectedItems, ASPx.SelectedItemKind);
 },
 GetDisabledElement: function(srcElement){
  return this.GetItemElement(srcElement, this.disabledItems, ASPx.DisabledItemKind);
 },
 GetReadOnlyElement: function(srcElement) {
  return this.GetItemElement(srcElement, this.readOnlyItems, ASPx.ReadOnlyItemKind);
 },
 GetItemElement: function(srcElement, items, kind){
  if(srcElement && srcElement[ASPx.CachedStatePrefix + kind]){
   var cachedElement = srcElement[ASPx.CachedStatePrefix + kind];
   if(cachedElement != ASPx.EmptyObject)
    return cachedElement;
   return null;
  }
  var element = srcElement;
  while(element != null) {
   var item = items[element.id];
   if(item){
    this.CacheItemElement(srcElement, kind, element);
    element[kind] = item;
    return element;
   }
   element = element.parentNode;
  }
  this.CacheItemElement(srcElement, kind, ASPx.EmptyObject);
  return null;
 },
 CacheItemElement: function(srcElement, kind, value){
  if(srcElement && !srcElement[ASPx.CachedStatePrefix + kind])
   srcElement[ASPx.CachedStatePrefix + kind] = value;
 },
 DoSetFocusedState: function(element, fromElement){
  var item = element[ASPx.FocusedItemKind];
  if(item){
   var args = new ASPxClientStateEventArgs(item, element);
   args.fromElement = fromElement;
   this.BeforeSetFocusedState.FireEvent(this, args);
   item.Apply(element);
   this.AfterSetFocusedState.FireEvent(this, args);
  }
 },
 DoClearFocusedState: function(element, toElement){
  var item = element[ASPx.FocusedItemKind];
  if(item){
   var args = new ASPxClientStateEventArgs(item, element);
   args.toElement = toElement;
   this.BeforeClearFocusedState.FireEvent(this, args);
   item.Cancel(element);
   this.AfterClearFocusedState.FireEvent(this, args);
  }
 },
 DoSetHoverState: function(element, fromElement){
  var item = element[ASPx.HoverItemKind];
  if(item){
   var args = new ASPxClientStateEventArgs(item, element);
   args.fromElement = fromElement;
   this.BeforeSetHoverState.FireEvent(this, args);
   item.Apply(element);
   this.AfterSetHoverState.FireEvent(this, args);
  }
 },
 DoClearHoverState: function(element, toElement){
  var item = element[ASPx.HoverItemKind];
  if(item){
   var args = new ASPxClientStateEventArgs(item, element);
   args.toElement = toElement;
   this.BeforeClearHoverState.FireEvent(this, args);
   item.Cancel(element);
   this.AfterClearHoverState.FireEvent(this, args);
  }
 },
 DoSetPressedState: function(element){
  var item = element[ASPx.PressedItemKind];
  if(item){
   var args = new ASPxClientStateEventArgs(item, element);
   this.BeforeSetPressedState.FireEvent(this, args);
   item.Apply(element);
   this.AfterSetPressedState.FireEvent(this, args);
  }
 },
 DoClearPressedState: function(element){
  var item = element[ASPx.PressedItemKind];
  if(item){
   var args = new ASPxClientStateEventArgs(item, element);
   this.BeforeClearPressedState.FireEvent(this, args);
   item.Cancel(element);
   this.AfterClearPressedState.FireEvent(this, args);
  }
 },
 SetCurrentFocusedElement: function(element){
  if(this.currentFocusedElement && !ASPx.IsValidElement(this.currentFocusedElement)){
   this.currentFocusedElement = null;
   this.currentFocusedItemName = "";
  }
  if(this.currentFocusedElement != element){
   var oldCurrentFocusedElement = this.currentFocusedElement;
   var item = (element != null) ? element[ASPx.FocusedItemKind] : null;
   var itemName = (item != null) ? item.name : "";
   if(this.currentFocusedItemName != itemName){
    if(this.currentHoverItemName != "")
     this.SetCurrentHoverElement(null);
    if(this.currentFocusedElement != null)
     this.DoClearFocusedState(this.currentFocusedElement, element);
    this.currentFocusedElement = element;
    item = (element != null) ? element[ASPx.FocusedItemKind] : null;
    this.currentFocusedItemName = (item != null) ? item.name : "";
    if(this.currentFocusedElement != null)
     this.DoSetFocusedState(this.currentFocusedElement, oldCurrentFocusedElement);
   }
  }
 },
 GetCurrentHoverElement: function() {
  return this.currentHoverElement;
 },
 SetCurrentHoverElement: function(element){
  if(this.currentHoverElement && !ASPx.IsValidElement(this.currentHoverElement)){
   this.currentHoverElement = null;
   this.currentHoverItemName = "";
  }
  var item = (element != null) ? element[ASPx.HoverItemKind] : null;
  if(item && !item.enabled) { 
   element = this.GetItemElement(element.parentNode, this.hoverItems, ASPx.HoverItemKind);
   item = (element != null) ? element[ASPx.HoverItemKind] : null;
  }
  if(this.currentHoverElement != element){
   var oldCurrentHoverElement = this.currentHoverElement,
    itemName = (item != null) ? item.name : "";
   if(this.currentHoverItemName != itemName || (item != null && item.needRefreshBetweenElements)){
    if(this.currentHoverElement != null)
     this.DoClearHoverState(this.currentHoverElement, element);
    item = (element != null) ? element[ASPx.HoverItemKind] : null;
    if(item == null || item.enabled){
     this.currentHoverElement = element;
     this.currentHoverItemName = (item != null) ? item.name : "";
     if(this.currentHoverElement != null)
      this.DoSetHoverState(this.currentHoverElement, oldCurrentHoverElement);
    }
   }
  }
 },
 SetCurrentPressedElement: function(element){
  if(this.currentPressedElement && !ASPx.IsValidElement(this.currentPressedElement)){
   this.currentPressedElement = null;
   this.currentPressedItemName = "";
  }
  if(this.currentPressedElement != element){
   if(this.currentPressedElement != null)
    this.DoClearPressedState(this.currentPressedElement);
   var item = (element != null) ? element[ASPx.PressedItemKind] : null;
   if(item == null || item.enabled){
    this.currentPressedElement = element;
    this.currentPressedItemName = (item != null) ? item.name : "";
    if(this.currentPressedElement != null)
     this.DoSetPressedState(this.currentPressedElement);
   }
  }
 },
 SetCurrentFocusedElementBySrcElement: function(srcElement){
  var element = this.GetFocusedElement(srcElement);
  this.SetCurrentFocusedElement(element);
 },
 SetCurrentHoverElementBySrcElement: function(srcElement){
  var element = this.GetHoverElement(srcElement);
  this.SetCurrentHoverElement(element);
 },
 SetCurrentPressedElementBySrcElement: function(srcElement){
  var element = this.GetPressedElement(srcElement);
  this.SetCurrentPressedElement(element);
 },
 SetPressedElement: function (element) {
  this.SetCurrentHoverElement(null);
  this.SetCurrentPressedElementBySrcElement(element);
  this.savedCurrentPressedElement = this.currentPressedElement;
 },
 SelectElement: function (element) {
  var item = element[ASPx.SelectedItemKind];
  if(item)
   item.Apply(element);
 }, 
 SelectElementBySrcElement: function(srcElement){
  var element = this.GetSelectedElement(srcElement);
  if(element != null) this.SelectElement(element);
 }, 
 DeselectElement: function(element){
  var item = element[ASPx.SelectedItemKind];
  if(item)
   item.Cancel(element);
 }, 
 DeselectElementBySrcElement: function(srcElement){
  var element = this.GetSelectedElement(srcElement);
  if(element != null) this.DeselectElement(element);
 },
 SetElementEnabled: function(element, enable){
  if(enable)
   this.EnableElement(element);
  else
   this.DisableElement(element);
 },
 SetElementReadOnly: function(element, readOnly) {
  var element = this.GetReadOnlyElement(element);
  if (element != null) {
   var item = element[ASPx.ReadOnlyItemKind];
   if(item) {
    if(readOnly) {
     if(item.name == this.currentPressedItemName)
      this.SetCurrentPressedElement(null);
     if(item.name == this.currentHoverItemName)
      this.SetCurrentHoverElement(null);
    }
    if(readOnly)
     item.Apply(element);
    else
     item.Cancel(element);
   }
  }
 },
 SetElementWithChildNodesEnabled: function (parentName, enabled) {
  var procFunct = (enabled ? this.EnableElement : this.DisableElement);
  var childItems = this.disabledScheme[parentName];
  if (childItems && childItems.length > 0)
   for (var i = 0; i < childItems.length; i++) {
    procFunct.call(this, document.getElementById(childItems[i]));
   }
 },
 DisableElement: function (element) {
  var element = this.GetDisabledElement(element);
  if(element != null) {
   var item = element[ASPx.DisabledItemKind];
   if(item){
    var args = new ASPxClientStateEventArgs(item, element);
    this.BeforeDisabled.FireEvent(this, args);
    if(item.name == this.currentPressedItemName)
     this.SetCurrentPressedElement(null);
    if(item.name == this.currentHoverItemName)
     this.SetCurrentHoverElement(null);
    item.Apply(element);
    this.SetMouseStateItemsEnabled(item.name, item.postfixes, false);
    this.AfterDisabled.FireEvent(this, args);
   }
  }
 }, 
 EnableElement: function(element){
  var element = this.GetDisabledElement(element);
  if(element != null) {
   var item = element[ASPx.DisabledItemKind];
   if(item){
    var args = new ASPxClientStateEventArgs(item, element);
    this.BeforeEnabled.FireEvent(this, args);
    item.Cancel(element);
    this.SetMouseStateItemsEnabled(item.name, item.postfixes, true);
    this.AfterEnabled.FireEvent(this, args);
   }
  }
 }, 
 SetMouseStateItemsEnabled: function(name, postfixes, enabled){   
  if(postfixes && postfixes.length > 0){
   for(var i = 0; i < postfixes.length; i ++){
    this.SetItemsEnabled(this.hoverItems, name + postfixes[i], enabled);
    this.SetItemsEnabled(this.pressedItems, name + postfixes[i], enabled);
    this.SetItemsEnabled(this.focusedItems, name + postfixes[i], enabled);
   }
  }
  else{
   this.SetItemsEnabled(this.hoverItems, name, enabled);
   this.SetItemsEnabled(this.pressedItems, name, enabled);
   this.SetItemsEnabled(this.focusedItems, name, enabled);
  }  
 },
 SetItemsEnabled: function(items, name, enabled){   
  if(items[name])
   items[name].enabled = enabled;
 },
 OnFocusMove: function(evt){
  var element = ASPx.Evt.GetEventSource(evt);
  aspxGetStateController().SetCurrentFocusedElementBySrcElement(element);
 },
 OnMouseMove: function(evt, checkElementChanged){
  var srcElement = ASPx.Evt.GetEventSource(evt);
  if(checkElementChanged && srcElement == this.savedCurrentMouseMoveSrcElement) return;
  this.savedCurrentMouseMoveSrcElement = srcElement;
  if(this.savedCurrentPressedElement == null)
   this.SetCurrentHoverElementBySrcElement(srcElement);
  else{
   var element = this.GetPressedElement(srcElement);
   if(element != this.currentPressedElement){
    if(element == this.savedCurrentPressedElement)
     this.SetCurrentPressedElement(this.savedCurrentPressedElement);
    else
     this.SetCurrentPressedElement(null);
   }
  }
 },
 OnMouseDown: function(evt){
  if(!ASPx.Evt.IsLeftButtonPressed(evt)) return;
  var srcElement = ASPx.Evt.GetEventSource(evt);
  this.OnMouseDownOnElement(srcElement);
 },
 OnMouseDownOnElement: function (element) {
  if(this.GetPressedElement(element) == null) return;
  this.SetPressedElement(element);
 },
 OnMouseUp: function(evt){
  var srcElement = ASPx.Evt.GetEventSource(evt);
  this.OnMouseUpOnElement(srcElement);
 },
 OnMouseUpOnElement: function(element){
  if(this.savedCurrentPressedElement == null) return;
  this.ClearSavedCurrentPressedElement();
  this.SetCurrentHoverElementBySrcElement(element);
 },
 OnMouseOver: function(evt){
  var element = ASPx.Evt.GetEventSource(evt);
  if(element && element.tagName == "IFRAME")
   this.OnMouseMove(evt, true);
 },
 OnKeyDown: function(evt){
  var element = this.GetFocusedElement(ASPx.Evt.GetEventSource(evt));
  if(element != null && element == this.currentFocusedElement) {
   var item = element[ASPx.FocusedItemKind];
   if(item){
    var args = new ASPxClientStateEventArgs(item, element);
    args.htmlEvent = evt;
    this.FocusedItemKeyDown.FireEvent(this, args);
   }
  }
 },
 OnKeyUpOnElement: function(evt) {
  if(this.savedCurrentPressedElement != null && ASPx.Evt.IsActionKeyPressed(evt))
   this.ClearSavedCurrentPressedElement();
 },
 OnSelectStart: function(evt){
  if(this.savedCurrentPressedElement) {
   ASPx.Selection.Clear();
   return false;
  }
 },
 ClearSavedCurrentPressedElement: function() {
  this.savedCurrentPressedElement = null;
  this.SetCurrentPressedElement(null);
 },
 ClearCache: function(srcElement, kind) {
  if(srcElement[ASPx.CachedStatePrefix + kind])
   srcElement[ASPx.CachedStatePrefix + kind] = null;
 },
 ClearElementCache: function(srcElement) {
  this.ClearCache(srcElement, ASPx.FocusedItemKind);
  this.ClearCache(srcElement, ASPx.HoverItemKind);
  this.ClearCache(srcElement, ASPx.PressedItemKind);
  this.ClearCache(srcElement, ASPx.SelectedItemKind);
  this.ClearCache(srcElement, ASPx.DisabledItemKind);
 },
 ClearElementCacheInContainer: function(container) {
  var elements = ASPx.GetNodes(container);
  elements.push(container);
  ASPx.Data.ForEach(elements, this.ClearElementCache.bind(this));
 },
 LockForceRedrawAppearance: function() {
  this.forceRedrawAppearanceLockCount++;
 },
 UnlockForceRedrawAppearance: function() {
  this.forceRedrawAppearanceLockCount--;
 },
 IsForceRedrawAppearanceLocked: function() {
  return this.forceRedrawAppearanceLockCount > 0;
 },
 GetHoverItem: function(srcElement) {
  var element = this.GetHoverElement(srcElement);
  return (element != null) ? element[ASPx.HoverItemKind] : null;
 }
});
var stateController = null;
function aspxGetStateController(){
 if(stateController == null)
  stateController = new ASPxStateController();
 return stateController;
}
function aspxAddStateItems(method, namePrefix, classes, disableApplyingStyleToLink){
 for(var i = 0; i < classes.length; i ++){
  for(var j = 0; j < classes[i][2].length; j ++) {
   var name = namePrefix;
   if(classes[i][2][j])
    name += "_" + classes[i][2][j];
   var postfixes = classes[i][3] || null;
   var imageObjs = (classes[i][4] && classes[i][4][j]) || null;
   var imagePostfixes = classes[i][5] || null;
   method.call(aspxGetStateController(), name, classes[i][0], classes[i][1], postfixes, imageObjs, imagePostfixes, disableApplyingStyleToLink, namePrefix);
  }
 }
}
ASPx.AddHoverItems = function(namePrefix, classes, disableApplyingStyleToLink){
 aspxAddStateItems(aspxGetStateController().AddHoverItem, namePrefix, classes, disableApplyingStyleToLink);
};
ASPx.AddPressedItems = function(namePrefix, classes, disableApplyingStyleToLink){
 aspxAddStateItems(aspxGetStateController().AddPressedItem, namePrefix, classes, disableApplyingStyleToLink);
};
ASPx.AddSelectedItems = function(namePrefix, classes, disableApplyingStyleToLink){
 aspxAddStateItems(aspxGetStateController().AddSelectedItem, namePrefix, classes, disableApplyingStyleToLink);
};
ASPx.AddDisabledItems = function(namePrefix, classes, disableApplyingStyleToLink){
 aspxAddStateItems(aspxGetStateController().AddDisabledItem, namePrefix, classes, disableApplyingStyleToLink);
};
ASPx.AddReadOnlyItems = function(namePrefix, classes, disableApplyingStyleToLink) {
 aspxAddStateItems(aspxGetStateController().AddReadOnlyItem, namePrefix, classes, disableApplyingStyleToLink);
};
function aspxRemoveStateItems(method, namePrefix, classes){
 for(var i = 0; i < classes.length; i ++){
  for(var j = 0; j < classes[i][0].length; j ++) {
   var name = namePrefix;
   if(classes[i][0][j])
    name += "_" + classes[i][0][j];
   method.call(aspxGetStateController(), name, classes[i][1], namePrefix);
  }
 }
}
ASPx.RemoveHoverItems = function(namePrefix, classes){
 aspxRemoveStateItems(aspxGetStateController().RemoveHoverItem, namePrefix, classes);
};
ASPx.RemovePressedItems = function(namePrefix, classes){
 aspxRemoveStateItems(aspxGetStateController().RemovePressedItem, namePrefix, classes);
};
ASPx.RemoveSelectedItems = function(namePrefix, classes){
 aspxRemoveStateItems(aspxGetStateController().RemoveSelectedItem, namePrefix, classes);
};
ASPx.RemoveDisabledItems = function(namePrefix, classes){
 aspxRemoveStateItems(aspxGetStateController().RemoveDisabledItem, namePrefix, classes);
};
ASPx.RemoveReadOnlyItems = function(namePrefix, classes) {
 aspxRemoveStateItems(aspxGetStateController().RemoveReadOnlyItem, namePrefix, classes);
};
ASPx.AddAfterClearFocusedState = function(handler){
 aspxGetStateController().AfterClearFocusedState.AddHandler(handler);
};
ASPx.AddAfterSetFocusedState = function(handler){
 aspxGetStateController().AfterSetFocusedState.AddHandler(handler);
};
ASPx.AddAfterClearHoverState = function(handler){
 aspxGetStateController().AfterClearHoverState.AddHandler(handler);
};
ASPx.AddAfterSetHoverState = function(handler){
 aspxGetStateController().AfterSetHoverState.AddHandler(handler);
};
ASPx.AddAfterClearPressedState = function(handler){
 aspxGetStateController().AfterClearPressedState.AddHandler(handler);
};
ASPx.AddAfterSetPressedState = function(handler){
 aspxGetStateController().AfterSetPressedState.AddHandler(handler);
};
ASPx.AddAfterDisabled = function(handler){
 aspxGetStateController().AfterDisabled.AddHandler(handler);
};
ASPx.AddAfterEnabled = function(handler){
 aspxGetStateController().AfterEnabled.AddHandler(handler);
};
ASPx.AddBeforeClearFocusedState = function(handler){
 aspxGetStateController().BeforeClearFocusedState.AddHandler(handler);
};
ASPx.AddBeforeSetFocusedState = function(handler){
 aspxGetStateController().BeforeSetFocusedState.AddHandler(handler);
};
ASPx.AddBeforeClearHoverState = function(handler){
 aspxGetStateController().BeforeClearHoverState.AddHandler(handler);
};
ASPx.AddBeforeSetHoverState = function(handler){
 aspxGetStateController().BeforeSetHoverState.AddHandler(handler);
};
ASPx.AddBeforeClearPressedState = function(handler){
 aspxGetStateController().BeforeClearPressedState.AddHandler(handler);
};
ASPx.AddBeforeSetPressedState = function(handler){
 aspxGetStateController().BeforeSetPressedState.AddHandler(handler);
};
ASPx.AddBeforeDisabled = function(handler){
 aspxGetStateController().BeforeDisabled.AddHandler(handler);
};
ASPx.AddBeforeEnabled = function(handler){
 aspxGetStateController().BeforeEnabled.AddHandler(handler);
};
ASPx.AddFocusedItemKeyDown = function(handler){
 aspxGetStateController().FocusedItemKeyDown.AddHandler(handler);
};
ASPx.SetHoverState = function(element){
 aspxGetStateController().SetCurrentHoverElementBySrcElement(element);
};
ASPx.ClearHoverState = function(evt){
 aspxGetStateController().SetCurrentHoverElementBySrcElement(null);
};
ASPx.UpdateHoverState = function(evt){
 aspxGetStateController().OnMouseMove(evt, false);
};
ASPx.SetFocusedState = function(element){
 aspxGetStateController().SetCurrentFocusedElementBySrcElement(element);
};
ASPx.ClearFocusedState = function(evt){
 aspxGetStateController().SetCurrentFocusedElementBySrcElement(null);
};
ASPx.UpdateFocusedState = function(evt){
 aspxGetStateController().OnFocusMove(evt);
};
ASPx.AccessibilityMarkerClass = "dxalink";
ASPx.AssignAccessibilityEventsToChildrenLinks = function(container, clearFocusedStateOnMouseOut){
 var links = ASPx.GetNodesByPartialClassName(container, ASPx.AccessibilityMarkerClass);
 for(var i = 0; i < links.length; i++)
  ASPx.AssignAccessibilityEventsToLink(links[i], clearFocusedStateOnMouseOut);
};
ASPx.AssignAccessibilityEventsToLink = function(link, clearFocusedStateOnMouseOut) {
 if(!ASPx.ElementContainsCssClass(link, ASPx.AccessibilityMarkerClass))
  return;
 ASPx.AssignAccessibilityEventsToLinkCore(link, clearFocusedStateOnMouseOut);
};
ASPx.AssignAccessibilityEventsToLinkCore = function (link, clearFocusedStateOnMouseOut) {
 ASPx.Evt.AttachEventToElement(link, "focus", function (e) { ASPx.UpdateFocusedState(e); });
 var clearFocusedStateHandler = function (e) { ASPx.ClearFocusedState(e); };
 ASPx.Evt.AttachEventToElement(link, "blur", clearFocusedStateHandler);
 if(clearFocusedStateOnMouseOut)
  ASPx.Evt.AttachEventToElement(link, "mouseout", clearFocusedStateHandler);
};
ASPx.Evt.AttachEventToDocument("mousemove", function(evt) {
 if(ASPx.classesScriptParsed && ASPx.StateItemsExist)
  aspxGetStateController().OnMouseMove(evt, true);
});
ASPx.Evt.AttachEventToDocument(ASPx.TouchUIHelper.touchMouseDownEventName, function(evt) {
 if(ASPx.classesScriptParsed && ASPx.StateItemsExist)
  aspxGetStateController().OnMouseDown(evt);
});
ASPx.Evt.AttachEventToDocument(ASPx.TouchUIHelper.touchMouseUpEventName, function(evt) {
 if(ASPx.classesScriptParsed && ASPx.StateItemsExist)
  aspxGetStateController().OnMouseUp(evt);
});
ASPx.Evt.AttachEventToDocument("mouseover", function(evt) {
 if(ASPx.classesScriptParsed && ASPx.StateItemsExist)
  aspxGetStateController().OnMouseOver(evt);
});
ASPx.Evt.AttachEventToDocument("keydown", function(evt) {
 if(ASPx.classesScriptParsed && ASPx.StateItemsExist)
  aspxGetStateController().OnKeyDown(evt);
});
ASPx.Evt.AttachEventToDocument("selectstart", function(evt) {
 if(ASPx.classesScriptParsed && ASPx.StateItemsExist)
  return aspxGetStateController().OnSelectStart(evt);
});
ASPx.GetStateController = aspxGetStateController;
ASPx.StateItem = ASPxStateItem;
})();

(function() {
var ASPxClientEditBase = ASPx.CreateClass(ASPxClientControl, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.EnabledChanged = new ASPxClientEvent();
  this.captionPosition = ASPx.Position.Left;
  this.showCaptionColon = true;
  this.scPrefix = "dxe";
 },
 InlineInitialize: function(){
  ASPxClientControl.prototype.InlineInitialize.call(this);
  this.InitializeEnabled(); 
  this.InitializeEvents();
 },
 InitializeEnabled: function() {
  this.SetEnabledInternal(this.clientEnabled, true);
 },
 InitializeEvents: function() { },
 AddDefaultReadOnlyStateControllerItem: function(cssClass, mainElementId) {
  ASPx.AddReadOnlyItems(mainElementId, [[[cssClass], [''], ['']]]);
 },
 AddDefaultDisabledStateControllerItem: function(cssClass, mainElementId) {
  ASPx.AddDisabledItems(mainElementId, [[[cssClass], [''], ['']]]);
 },
 GetValue: function() {
  var element = this.GetMainElement();
  if(ASPx.IsExistsElement(element))
   return element.innerHTML;
  return "";
 },
 GetValueString: function(){
  var value = this.GetValue();
  return (value == null) ? null : value.toString();
 },
 EnsureValueStringIsActual: function() {
  if(this.maskInfo != null)
   this.ParseValue();
 },
 SetValue: function(value) {
  if(value == null)
   value = "";
  var element = this.GetMainElement();
  if(ASPx.IsExistsElement(element))
   element.innerHTML = value;
 },
 GetEnabled: function(){
  return this.enabled && this.clientEnabled;
 },
 SetEnabled: function(enabled){
  if(this.clientEnabled != enabled) {
   var errorFrameRequiresUpdate = this.GetIsValid && !this.GetIsValid();
   if(errorFrameRequiresUpdate && !enabled)
    this.UpdateErrorFrameAndFocus(false , null , true );
   this.clientEnabled = enabled;
   this.SetEnabledInternal(enabled, false);
   if(errorFrameRequiresUpdate && enabled)
    this.UpdateErrorFrameAndFocus(false );
   this.RaiseEnabledChangedEvent();
  }
 },
 SetEnabledInternal: function(enabled, initialization){
  if(!this.enabled) return;
  if(!initialization || !enabled)
   this.ChangeEnabledStateItems(enabled);
  this.ChangeEnabledAttributes(enabled);
  if(ASPx.Browser.Chrome) {   
   var mainElement = this.GetMainElement();
   if(mainElement)
    mainElement.className = mainElement.className;
  } 
 },
 ChangeEnabledAttributes: function(enabled){
 },
 ChangeEnabledStateItems: function(enabled){
 },
 RaiseEnabledChangedEvent: function(){
  if(!this.EnabledChanged.IsEmpty()){
   var args = new ASPxClientEventArgs();
   this.EnabledChanged.FireEvent(this, args);
  }
 },
 GetDecodeValue: function (value) { 
  if(typeof (value) == "string" && value.length > 1)
   value = this.SimpleDecodeHtml(value);
  return value;
 },
 SimpleDecodeHtml: function (html) {
  return ASPx.Str.ApplyReplacement(html, [
   [/&lt;/g, '<'],
   [/&amp;/g, '&'],
   [/&quot;/g, '"'],
   [/&#39;/g, '\''],
   [/&#32;/g, ' ']
  ]);
 },
 GetCachedElementById: function(idSuffix) {
  return ASPx.CacheHelper.GetCachedElementById(this, this.name + idSuffix);
 },
 GetCaptionCell: function() {
  return this.GetCachedElementById(EditElementSuffix.CaptionCell);
 },
 GetExternalTable: function() {
  return this.GetCachedElementById(EditElementSuffix.ExternalTable);
 },
 getCaptionRelatedCellCount: function() {
  if(!this.captionRelatedCellCount)
   this.captionRelatedCellCount = ASPx.GetNodesByClassName(this.GetExternalTable(), CaptionRelatedCellClassName).length;
  return this.captionRelatedCellCount;
 },
 addCssClassToCaptionRelatedCells: function() {
  if(this.captionPosition == ASPx.Position.Left || this.captionPosition == ASPx.Position.Right) {
   var captionRelatedCellsIndex = this.captionPosition == ASPx.Position.Left ? 0 : this.GetCaptionCell().cellIndex;
   for(var i = 0; i < this.GetExternalTable().rows.length; i++)
    ASPx.AddClassNameToElement(this.GetExternalTable().rows[i].cells[captionRelatedCellsIndex], CaptionRelatedCellClassName);
  }
  if(this.captionPosition == ASPx.Position.Top || this.captionPosition == ASPx.Position.Bottom)
   for(var i = 0; i < this.GetCaptionCell().parentNode.cells.length; i++)
    ASPx.AddClassNameToElement(this.GetCaptionCell().parentNode.cells[i], CaptionRelatedCellClassName);
 },
 GetCaption: function() {
  if(ASPx.IsExists(this.GetCaptionCell()))
   return this.getCaptionInternal();
  return "";
 },
 SetCaption: function(caption) {
  if(!ASPx.IsExists(this.GetCaptionCell()))
   return;
  if(this.getCaptionRelatedCellCount() == 0)
   this.addCssClassToCaptionRelatedCells();
  if(caption !== "")
   ASPx.RemoveClassNameFromElement(this.GetExternalTable(), ASPxEditExternalTableClassNames.TableWithEmptyCaptionClassName);
  else
   ASPx.AddClassNameToElement(this.GetExternalTable(), ASPxEditExternalTableClassNames.TableWithEmptyCaptionClassName);
  this.setCaptionInternal(caption);
 },
 getCaptionTextNode: function() {
  var captionElement = ASPx.GetNodesByPartialClassName(this.GetCaptionCell(), CaptionElementPartialClassName)[0];
  return ASPx.GetNormalizedTextNode(captionElement);
 },
 getCaptionInternal: function() {
  var captionText = this.getCaptionTextNode().nodeValue;
  if(captionText !== "" && captionText[captionText.length - 1] == ":")
   captionText = captionText.substring(0, captionText.length - 1);
  return captionText;
 },
 setCaptionInternal: function(caption) {
  caption = ASPx.Str.Trim(caption);
  var captionTextNode = this.getCaptionTextNode();
  if(this.showCaptionColon && caption[caption.length - 1] != ":" && caption !== "")
   caption += ":";
  captionTextNode.nodeValue = caption;
 },
 onVirtualKeyboardUITouchStart: function(evt) { }
});
var ValidationPattern = ASPx.CreateClass(null, {
 constructor: function(errorText) {
  this.errorText = errorText;
 }
});
var RequiredFieldValidationPattern = ASPx.CreateClass(ValidationPattern, {
 constructor: function(errorText) {
  this.constructor.prototype.constructor.call(this, errorText);
 },
 EvaluateIsValid: function(value) {
  return value != null && (value.constructor == Array || ASPx.Str.Trim(value.toString()) != "");
 }
});
var RegularExpressionValidationPattern = ASPx.CreateClass(ValidationPattern, {
 constructor: function(errorText, pattern) {
  this.constructor.prototype.constructor.call(this, errorText);
  this.pattern = pattern;
 },
 EvaluateIsValid: function(value) {
  if(value == null) 
   return true;
  var strValue = value.toString();
  if(ASPx.Str.Trim(strValue).length == 0)
   return true;
  var regEx = new RegExp(this.pattern);
  var matches = regEx.exec(strValue);
  return matches != null && strValue == matches[0];
 }
});
function _aspxIsEditorFocusable(inputElement) {
 return ASPx.IsFocusableCore(inputElement, function(container) {
  return container.getAttribute("errorFrame") == "errorFrame";
 });
}
var invalidEditorToBeFocused = null;
var ValidationType = {
 PersonalOnValueChanged: "ValueChanged",
 PersonalViaScript: "CalledViaScript",
 MassValidation: "MassValidation"
};
var ErrorFrameDisplay = {
 None: "None",
 Static: "Static",
 Dynamic: "Dynamic"
};
var EditElementSuffix = {
 ExternalTable: "_ET",
 ControlCell: "_CC",
 ErrorCell: "_EC",
 ErrorTextCell: "_ETC",
 ErrorImage: "_EI",
 CaptionCell: "_CapC",
 AccessibilityAdditionalTextRow: "_AHTR"
};
var ASPxEditExternalTableClassNames = {
 ValidStaticTableClassName: "dxeValidStEditorTable",
 ValidDynamicTableClassName: "dxeValidDynEditorTable",
 TableWithEmptyCaptionClassName: "tableWithEmptyCaption"
};
var CaptionRelatedCellClassName = "dxeCaptionRelatedCell";
var CaptionElementPartialClassName = "dxeCaption";
var AccessibilityAssistantID = "AcAs";
var ASPxClientEdit = ASPx.CreateClass(ASPxClientEditBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.isASPxClientEdit = true;
  this.inputElement = null;
  this.convertEmptyStringToNull = true;
  this.readOnly = false;
  this.clientReadOnly = false;
  this.focused = false;
  this.focusEventsLocked = false;
  this.focusEventsLockCount = 0;
  this.receiveGlobalMouseWheel = true;
  this.styleDecoration = null;
  this.heightCorrectionRequired = false;
  this.customValidationEnabled = false;
  this.display = ErrorFrameDisplay.Static;
  this.initialErrorText = "";
  this.causesValidation = false;
  this.validateOnLeave = true;
  this.validationGroup = "";
  this.sendPostBackWithValidation = null;
  this.validationPatterns = [];
  this.setFocusOnError = false;
  this.errorDisplayMode = "it";
  this.errorText = "";
  this.isValid = true;
  this.errorImageIsAssigned = false;
  this.notifyValidationSummariesToAcceptNewError = false;
  this.isErrorFrameRequired = false;
  this.enterProcessed = false;
  this.keyDownHandlers = {};
  this.keyPressHandlers = {};
  this.keyUpHandlers = {};
  this.onKeyDownHandler = null;
  this.onKeyPressHandler = null;
  this.onKeyUpHandler = null;
  this.onGotFocusHandler = null;
  this.onLostFocusHandler = null;
  this.GotFocus = new ASPxClientEvent();
  this.LostFocus = new ASPxClientEvent();
  this.Validation = new ASPxClientEvent();
  this.ValueChanged = new ASPxClientEvent();
  this.KeyDown = new ASPxClientEvent();
  this.KeyPress = new ASPxClientEvent();
  this.KeyUp = new ASPxClientEvent();
  this.eventHandlersInitialized = false;
  this.errorCellVisibilityChanged = new ASPxClientEvent();
  this.ariaExplanatoryTextManager = null;
  this.InitializeEventHandlers();
 },
 SetData: function(data){
  if(data.decorationStyles){
   for(var i = 0; i < data.decorationStyles.length; i++)
    this.AddDecorationStyle(data.decorationStyles[i].key, 
     data.decorationStyles[i].className, 
     data.decorationStyles[i].cssText);
  }
 },
 Initialize: function() {
  this.initialErrorText = this.errorText;
  ASPxClientEditBase.prototype.Initialize.call(this);
  this.InitializeKeyHandlers();
  this.UpdateClientValidationState();
  this.UpdateValidationSummaries(null , true );
 },
 InlineInitialize: function() {
  if(this.UseDelayedSpecialFocus())
   this.InitializeDelayedSpecialFocus();
  ASPxClientEditBase.prototype.InlineInitialize.call(this);
  this.UpdateStyleDecorations();
  var externalTable = this.GetExternalTable();
  if(externalTable && ASPx.IsPercentageSize(externalTable.style.width)) {
   this.width = "100%";
   this.GetMainElement().style.width = "100%";
   if(this.isErrorFrameRequired)
    externalTable.setAttribute("errorFrame", "errorFrame");
  }
  this.ariaExplanatoryTextManager = this.CreateAriaExplanatoryTextManager();
  if(this.clientReadOnly)
   this.SetReadOnlyInternal(true);
  this.UpdateErrorCellParentRowVisibility();
 }, 
 AfterInitialize: function() {
  this.ariaExplanatoryTextManager.SetCaptionAssociating();
  this.ariaExplanatoryTextManager.UpdateText();
  this.ariaExplanatoryTextManager.UpdateValidationState();
  ASPxClientEditBase.prototype.AfterInitialize.call(this);
 },
 UpdateStyleDecorations: function() {
  if(this.styleDecoration)
   this.styleDecoration.Update();
 },
 UseSpecialKeyboardHandling: function() {
  return false;
 },
 InitializeKeyHandlers: function() {
 },
 AddKeyDownHandler: function(key, handler) {
  this.keyDownHandlers[key] = handler;
 },
 AddKeyPressHandler: function(key, handler) {
  this.keyPressHandlers[key] = handler;
 },
 InitializeEventHandlers: function() {
  this.onGotFocusHandler = function(evt) { ASPx.EGotFocus(this.name); }.bind(this);
  this.onLostFocusHandler = function(evt) { ASPx.ELostFocus(this.name); }.bind(this);
  if(this.UseSpecialKeyboardHandling()) {
   this.onKeyDownHandler = function(evt) { ASPx.KBSIKeyDown(this.name, evt); }.bind(this);
   this.onKeyPressHandler = function(evt) { ASPx.KBSIKeyPress(this.name, evt); }.bind(this);
   this.onKeyUpHandler = function(evt) { ASPx.KBSIKeyUp(this.name, evt); }.bind(this);
  }
 },
 ChangeSpecialInputEnabledAttributes: function(element, method, doNotChangeAutoComplete) {
  if(!doNotChangeAutoComplete) 
   element.autocomplete = "off";
  if(this.onKeyDownHandler != null)
   method(element, "keydown", this.onKeyDownHandler);
  if(this.onKeyPressHandler != null)
   method(element, "keypress", this.onKeyPressHandler);
  if(this.onKeyUpHandler != null)
   method(element, "keyup", this.onKeyUpHandler);
  if(this.onGotFocusHandler != null)
   method(element, "focus", this.onGotFocusHandler);
  if(this.onLostFocusHandler != null)
   method(element, "blur", this.onLostFocusHandler);
 },
 CreateAriaExplanatoryTextManager: function() {
  if(this.accessibilityCompliant)
   return new EditAccessibilityExplanatoryTextManager(this);
  else 
   return new DisableAccessibilityExplanatoryTextManager(this);
 },
 UpdateClientValidationState: function() {
  if(!this.customValidationEnabled)
   return;
  var mainElement = this.GetMainElement();
  if(mainElement) {
   var validationState = !this.GetIsValid() ? ("-" + this.GetErrorText()) : "";
   this.UpdateStateObjectWithObject({ validationState: validationState });
  }
 },
 UpdateValidationSummaries: function(validationType, initializing) {
  if(ASPx.Ident.scripts.ASPxClientValidationSummary) {
   var summaryCollection = ASPx.GetClientValidationSummaryCollection();
   summaryCollection.OnEditorIsValidStateChanged(this, validationType, initializing && this.notifyValidationSummariesToAcceptNewError);
  }
 },
 FindInputElement: function(){
  return null;
 },
 GetInputElement: function(){
  if(!ASPx.IsExistsElement(this.inputElement))
   this.inputElement = this.FindInputElement();
  return this.inputElement;
 },
 GetFocusableInputElement: function() {
  return this.GetInputElement();
 },
 GetAccessibilityActiveElements: function() {
  return [this.GetInputElement()];
 },
 GetAccessibilityFirstActiveElement: function() {
  return this.accessibilityHelper ? 
    this.accessibilityHelper.getMainElement() : 
    this.GetAccessibilityActiveElements()[0];
 },
 GetAccessibilityAssistantElement: function() {
  return this.GetChildElement(AccessibilityAssistantID);
 },
 GetErrorImage: function() {
  return this.GetCachedElementById(EditElementSuffix.ErrorImage);
 },
 GetControlCell: function() {
  return this.GetCachedElementById(EditElementSuffix.ControlCell);
 },
 GetErrorCell: function() {
  return this.GetCachedElementById(EditElementSuffix.ErrorCell);
 },
 GetErrorTextCell: function() {
  return this.GetCachedElementById(this.errorImageIsAssigned ? EditElementSuffix.ErrorTextCell : EditElementSuffix.ErrorCell);
 },
 GetReadOnly: function() {
  return this.readOnly || this.clientReadOnly;
 },
 SetReadOnly: function(readOnly) {
  readOnly = !!readOnly;
  if(this.clientReadOnly === readOnly || this.readOnly)
   return;
  this.SetReadOnlyInternal(readOnly);
 },
 SetReadOnlyInternal: function(readOnly) {
  this.clientReadOnly = readOnly;
  this.ChangeReadOnlyStateItems(readOnly);
 },
 ChangeReadOnlyStateItems: function(readOnly) {
  ASPx.GetStateController().SetElementReadOnly(this.GetMainElement(), readOnly);
 },
 SetVisible: function (isVisible) {
  if(this.clientVisible == isVisible)
   return;
  var externalTable = this.GetExternalTable();
  if(externalTable) {
   ASPx.SetElementDisplay(externalTable, isVisible);
   if(this.customValidationEnabled) {
    var isValid = !isVisible ? true : void (0);
    this.UpdateErrorFrameAndFocus(false , true , isValid );
   }
  }
  ASPxClientControl.prototype.SetVisible.call(this, isVisible);
 },
 GetStateHiddenFieldName: function() {
  return this.uniqueID + "$State";
 },
 GetValueInputToValidate: function() {
  return this.GetInputElement();
 },
 IsVisible: function() {
  if(!this.clientVisible)
   return false;
  var element = this.GetMainElement();
  if(!element) 
   return false;
  while(element && element.tagName != "BODY") {
   if(element.getAttribute("errorFrame") != "errorFrame" && (!ASPx.GetElementVisibility(element) || !ASPx.GetElementDisplay(element)))
    return false;
   element = element.parentNode;
  }
  return true;
 },
 AdjustControlCore: function() {
  this.CollapseEditor();
  this.UnstretchInputElement();
  if(this.heightCorrectionRequired)
   this.CorrectEditorHeight();
 },
 CorrectEditorHeight: function() {
 },
 UnstretchInputElement: function() {
 },
 UseDelayedSpecialFocus: function() {
  return false;
 },
 GetInnerEditors: function() {
  return [];
 },
 GetDelayedSpecialFocusTriggers: function() {
  return [ this.GetMainElement() ];
 },
 InitializeDelayedSpecialFocus: function() {
  this.specialFocusTimer = -1;    
  var handler = function(evt) { this.OnDelayedSpecialFocusMouseDown(evt); }.aspxBind(this);
  var triggers = this.GetDelayedSpecialFocusTriggers();
  for(var i = 0; i < triggers.length; i++)
   ASPx.Evt.AttachEventToElement(triggers[i], "mousedown", handler);
 },
 OnDelayedSpecialFocusMouseDown: function(evt) {
  window.setTimeout(function() { this.SetFocus(); }.aspxBind(this), 0);
 },
 IsFocusEventsLocked: function() {
  return this.focusEventsLocked || this.focusEventsLockCount !== 0;
 },
 BeginFocusUpdate: function() {
  this.focusEventsLockCount++;
 },
 EndFocusUpdate: function() {
  this.focusEventsLockCount--;
  if(this.focusEventsLockCount === 0)
   if(this.focused && !this.IsEditorElement(document.activeElement)) 
    this.OnLostFocus();
 },
 LockFocusEvents: function() {
  if(!this.focused) return;
  this.focusEventsLocked = true;
 },
 UnlockFocusEvents: function() {
  this.focusEventsLocked = false;
 },
 ForceRefocusEditor: function(evt, isNativeFocus) {
  if(ASPx.Browser.VirtualKeyboardSupported && !this.ownerListBox) {
   var focusedEditor = ASPx.VirtualKeyboardUI.getFocusedEditor();
   if(ASPx.VirtualKeyboardUI.getInputNativeFocusLocked() && (!focusedEditor || focusedEditor === this))
     return;
   ASPx.VirtualKeyboardUI.setInputNativeFocusLocked(!isNativeFocus);
  }
  this.LockFocusEvents();
  this.BlurInputElement();
  window.setTimeout(function() { 
   if(ASPx.Browser.VirtualKeyboardSupported && !this.ownerListBox) {
    ASPx.VirtualKeyboardUI.setFocusToEditor(this);
   } else {
    this.SetFocus();
   }
  }.aspxBind(this), 0);
 },
 BlurInputElement: function() {
  var inputElement = this.GetFocusableInputElement();
  if(inputElement && inputElement.blur)
   inputElement.blur();
 },
 IsEditorElement: function(element) {
  return this.GetMainElement() == element || ASPx.GetIsParent(this.GetMainElement(), element);
 },
 IsClearButtonElement: function(element) {
  return false;
 },
 IsElementBelongToInputElement: function(element) {
  return this.GetInputElement() == element;
 },
 OnFocusCore: function() {
  if(this.UseDelayedSpecialFocus())
   this.specialFocusTimer = ASPx.Timer.ClearTimer(this.specialFocusTimer);
  if(!this.IsFocusEventsLocked()){
   this.focused = true;
   ASPx.SetFocusedEditor(this);
   if(this.styleDecoration)
    this.styleDecoration.Update();
   if(this.isInitialized)
    this.RaiseFocus();
  }
  else
   this.UnlockFocusEvents();
 },
 OnLostFocusCore: function() {
  if(!this.IsFocusEventsLocked()){
   this.focused = false;
   if(ASPx.GetFocusedEditor() === this)
    ASPx.SetFocusedEditor(null);
   if(this.styleDecoration)
    this.styleDecoration.Update();
   this.RaiseLostFocus();
  }
 },
 OnFocus: function() {
  var focusedEditor = ASPx.GetFocusedEditor();
  if(focusedEditor && focusedEditor.UseDelayedSpecialFocus() && focusedEditor !== this && focusedEditor.GetInnerEditors().indexOf(this) === -1 && ASPx.IsElementVisible(focusedEditor.GetMainElement())) {
   var lostFocusHandler = function() {
    focusedEditor.LostFocus.RemoveHandler(lostFocusHandler);
    this.OnFocusCore();
   }.bind(this);
   focusedEditor.LostFocus.AddHandler(lostFocusHandler);
  }
  else {
   this.OnFocusCore();
  }  
 },
 OnLostFocus: function() {
  if(this.isInitialized)
   this.OnLostFocusCore();
 },
 OnMouseWheel: function(evt){
 },
 OnValidation: function(validationType) {
  if(this.customValidationEnabled && this.isInitialized && ASPx.IsExistsElement(this.GetMainElement()) &&
   (!this.IsErrorFrameDisplayed() || this.GetElementRequiredForErrorFrame())) {
   this.BeginErrorFrameUpdate();
   try {
    if(this.validateOnLeave || validationType != ValidationType.PersonalOnValueChanged) {
     this.SetIsValid(true, true );
     this.SetErrorText(this.initialErrorText, true );
     this.ValidateWithPatterns();
     this.RaiseValidation();
    }
    this.UpdateErrorFrameAndFocus(this.editorFocusingRequired(validationType));
   } finally {
    this.EndErrorFrameUpdate();
   }
   this.UpdateValidationSummaries(validationType);
   this.ariaExplanatoryTextManager.UpdateValidationState(validationType);
  }
 },
 GetElementRequiredForErrorFrame: function() {
  return this.GetExternalTable();
 },
 editorFocusingRequired: function(validationType) {
  return !this.GetIsValid() &&
   validationType == ValidationType.PersonalViaScript && this.setFocusOnError;
 },
 OnValueChanged: function() {
  if(this.getProcessOnServerOnValueChanged())
   this.SendPostBackInternal("");
 },
 getProcessOnServerOnValueChanged: function() {
  var processOnServer = this.RaiseValidationInternal();
  return this.RaiseValueChangedEvent() && processOnServer;
 },
 ParseValue: function() {
 },
 RaisePersonalStandardValidation: function() {
  if(ASPx.IsFunction(window.ValidatorOnChange)) {
   var inputElement = this.GetValueInputToValidate();
   if(inputElement && inputElement.Validators)
    window.ValidatorOnChange({ srcElement: inputElement });
  }
 },
 RaiseValidationInternal: function() {
  if(this.isPostBackAllowed() && this.causesValidation && this.validateOnLeave)
   return ASPxClientEdit.ValidateGroup(this.validationGroup);
  else {
   this.OnValidation(ValidationType.PersonalOnValueChanged);
   return this.GetIsValid();
  }
 },
 RaiseValueChangedEvent: function(){
  return this.RaiseValueChanged();
 },
 SendPostBackInternal: function(postBackArg) {
  if(ASPx.IsFunction(this.sendPostBackWithValidation))
   this.sendPostBackWithValidation(postBackArg);
  else
   this.SendPostBack(postBackArg);
 },
 SetElementToBeFocused: function() {
  if(this.IsVisible())
   invalidEditorToBeFocused = this;
 },
 GetFocusSelectAction: function() {
  return null;
 },
 SetFocus: function() {
  var inputElement = this.GetFocusableInputElement();
  if(!inputElement) return; 
  if((ASPx.GetActiveElement() != inputElement) && _aspxIsEditorFocusable(inputElement))
   ASPx.SetFocus(inputElement, this.GetFocusSelectAction());
 },
 SetFocusOnError: function() {
  if(invalidEditorToBeFocused == this) {
   this.SetFocus();
   invalidEditorToBeFocused = null;
  }
 },
 BeginErrorFrameUpdate: function() {
  if(!this.errorFrameUpdateLocked)
   this.errorFrameUpdateLocked = true;
 },
 EndErrorFrameUpdate: function() {
  this.errorFrameUpdateLocked = false;
  var args = this.updateErrorFrameAndFocusLastCallArgs;
  if(args) {
   this.UpdateErrorFrameAndFocus(args[0], args[1]);
   delete this.updateErrorFrameAndFocusLastCallArgs;
  }
 },
 UpdateErrorFrameAndFocus: function(setFocusOnError, ignoreVisibilityCheck, isValid) {
  if(!ignoreVisibilityCheck && !this.GetVisible())
   return;
  if(this.errorFrameUpdateLocked) {
   this.updateErrorFrameAndFocusLastCallArgs = [ setFocusOnError, ignoreVisibilityCheck ];
   return;
  }
  if(this.styleDecoration)
   this.styleDecoration.Update();
  if(typeof(isValid) == "undefined")
   isValid = this.GetIsValid();
  if(isValid && this.IsErrorFrameDisplayed())
   this.ChangeErrorFrameVisibility(false);
  else {
   var editorLocatedWithinVisibleContainer = this.IsVisible();
   if(this.IsErrorFrameDisplayed()) {
    this.UpdateErrorCellContent();
    this.ChangeErrorFrameVisibility(true);
   }
   if(editorLocatedWithinVisibleContainer) {
    if(setFocusOnError && this.setFocusOnError && invalidEditorToBeFocused == null) {
     this.SetElementToBeFocused();
     this.SetFocusOnError();
    }
   }
  }
 },
 ChangeErrorFrameVisibility: function(visible) {
  var externalTable = this.GetExternalTable();
  var isStaticDisplay = this.display == ErrorFrameDisplay.Static;
  if(!isStaticDisplay && visible) {
   this.EnsureControlCellStylesLoaded();
   this.RestoreControlCellStyles();
  }
  this.ChangeErrorCellVisibility(visible, isStaticDisplay);
  if(!isStaticDisplay && !visible) {
   this.EnsureControlCellStylesLoaded();
   this.ClearControlCellStyles();
  }
  var validExternalTableClassName = isStaticDisplay ? ASPxEditExternalTableClassNames.ValidStaticTableClassName
   : ASPxEditExternalTableClassNames.ValidDynamicTableClassName;
  ASPx.ToggleClassNameToElement(externalTable, validExternalTableClassName, !visible);
  this.UpdateErrorCellParentRowVisibility();
 },
 ChangeErrorCellVisibility: function(visible, useVisibilityAttribute) {
  var errorCell = this.GetErrorCell();
  if(errorCell) {
   if(useVisibilityAttribute)
    ASPx.SetElementVisibility(errorCell, visible);
   else {
    ASPx.SetElementDisplay(errorCell, visible);
    this.raiseErrorCellVisibilityChanged();
   }
  }
 },
 raiseErrorCellVisibilityChanged: function() {
  if(!this.errorCellVisibilityChanged.IsEmpty())
   this.errorCellVisibilityChanged.FireEvent(this);
 },
 UpdateErrorCellParentRowVisibility: function() {
  var errorCell = this.GetErrorCell();
  if(!errorCell || this.display == ErrorFrameDisplay.Static)
   return;
  var displayedCellCount = 0;
  var errorCellParentRow = errorCell.parentNode;
  for(var i = 0; i < errorCellParentRow.cells.length; i++) {
   var cell = errorCellParentRow.cells[i];
   if(ASPx.GetElementDisplay(cell))
    displayedCellCount++;
  }
  ASPx.SetElementDisplay(errorCellParentRow, displayedCellCount > 0);
 },
 EnsureControlCellStylesLoaded: function() {
  if(typeof(this.controlCellStyles) == "undefined") {
   var controlCell = this.GetControlCell();
   this.controlCellStyles = {
    cssClass: controlCell.className,
    style: this.ExtractElementStyleStringIgnoringVisibilityProps(controlCell)
   };
  }
 },
 ClearControlCellStyles: function() {
  this.ClearElementStyle(this.GetControlCell());
 },
 RestoreControlCellStyles: function() {
  var controlCell = this.GetControlCell();
  controlCell.className = this.controlCellStyles.cssClass;
  controlCell.style.cssText = this.controlCellStyles.style;
 },
 ExtractElementStyleStringIgnoringVisibilityProps: function(element) {
  var savedVisibility = element.style.visibility;
  var savedDisplay = element.style.display;
  element.style.visibility = "";
  element.style.display = "";
  var styleStr = element.style.cssText;
  element.style.visibility = savedVisibility;
  element.style.display = savedDisplay;
  return styleStr;
 },
 ClearElementStyle: function(element) {
  if(!element)
   return;
  element.className = "";
  var excludedAttrNames = [
   "width", "display", "visibility",
   "position", "left", "top", "z-index",
   "margin", "margin-top", "margin-right", "margin-bottom", "margin-left",
   "float", "clear"
  ];
  var savedAttrValues = { };
  for(var i = 0; i < excludedAttrNames.length; i++) {
   var attrName = excludedAttrNames[i];
   var attrValue = element.style[attrName];
   if(attrValue)
    savedAttrValues[attrName] = attrValue;
  }
  element.style.cssText = "";
  for(var styleAttrName in savedAttrValues)
   if(savedAttrValues.hasOwnProperty(styleAttrName))
    element.style[styleAttrName] = savedAttrValues[styleAttrName];
 },
 Clear: function() {
  this.SetValue(null);
  this.SetIsValid(true);
  return true;
 },
 ResetEditorState: function() { },
 UpdateErrorCellContent: function() {
  if(this.errorDisplayMode.indexOf("t") > -1)
   this.UpdateErrorText();
  if(this.errorDisplayMode == "i")
   this.UpdateErrorImage();
 },
 UpdateErrorImage: function() {
  var image = this.GetErrorImage();
  if(ASPx.IsExistsElement(image)) {
   if(this.accessibilityCompliant) {
    ASPx.Attr.SetAttribute(image, "aria-label", this.errorText);
    var innerImg = ASPx.GetNodeByTagName(image, "IMG", 0);
    if(ASPx.IsExists(innerImg))
     innerImg.alt = this.errorText;
   }
   image.alt = this.errorText;
   image.title = this.errorText;
  } else {
   this.UpdateErrorText();
  }
 },
 UpdateErrorText: function() {
  var errorTextCell = this.GetErrorTextCell();
  if(ASPx.IsExistsElement(errorTextCell))
   errorTextCell.innerHTML = this.HtmlEncode(this.errorText);
 },
 ValidateWithPatterns: function() {
  if(this.validationPatterns.length > 0) {
   var value = this.GetValue();
   for(var i = 0; i < this.validationPatterns.length; i++) {
    var validator = this.validationPatterns[i];
    if(!validator.EvaluateIsValid(value)) {
     this.SetIsValid(false, true );
     this.SetErrorText(validator.errorText, true );
     return;
    }
   }
  }
 },
 OnSpecialKeyDown: function(evt){
  this.RaiseKeyDown(evt);
  var handler = this.keyDownHandlers[evt.keyCode];
  if(handler) 
   return this[handler](evt);
  return false;
 },
 OnSpecialKeyPress: function(evt){
  this.RaiseKeyPress(evt);
  var handler = this.keyPressHandlers[evt.keyCode];
  if(handler) 
   return this[handler](evt);
  if(ASPx.Browser.NetscapeFamily || ASPx.Browser.Opera){
   if(evt.keyCode == ASPx.Key.Enter)
    return this.enterProcessed;
  }
  return false;
 },
 OnSpecialKeyUp: function(evt){
  this.RaiseKeyUp(evt);
  var handler = this.keyUpHandlers[evt.keyCode];
  if(handler) 
   return this[handler](evt);
  return false;
 },
 OnKeyDown: function(evt) {
  if(!this.UseSpecialKeyboardHandling())
   this.RaiseKeyDown(evt);
 },
 OnKeyPress: function(evt) {
  if(!this.UseSpecialKeyboardHandling())
   this.RaiseKeyPress(evt);
 },
 OnKeyUp: function(evt) {
  if(!this.UseSpecialKeyboardHandling())
   this.RaiseKeyUp(evt);
 },
 RaiseKeyDown: function(evt){
  if(!this.KeyDown.IsEmpty()){
   var args = new ASPxClientEditKeyEventArgs(evt);
   this.KeyDown.FireEvent(this, args);
  }
 },
 RaiseKeyPress: function(evt){
  if(!this.KeyPress.IsEmpty()){
   var args = new ASPxClientEditKeyEventArgs(evt);
   this.KeyPress.FireEvent(this, args);
  }
 },
 RaiseKeyUp: function(evt){
  if(!this.KeyUp.IsEmpty()){
   var args = new ASPxClientEditKeyEventArgs(evt);
   this.KeyUp.FireEvent(this, args);
  }
 },
 RaiseFocus: function(){
  if(!this.GotFocus.IsEmpty()){
   var args = new ASPxClientEventArgs();
   this.GotFocus.FireEvent(this, args);
  }
 },
 RaiseLostFocus: function(){
  if(!this.LostFocus.IsEmpty()){
   var args = new ASPxClientEventArgs();
   this.LostFocus.FireEvent(this, args);
  }
 },
 RaiseValidation: function() {
  if(this.customValidationEnabled && !this.Validation.IsEmpty()) {
   var currentValue = this.GetValue();
   var args = new ASPxClientEditValidationEventArgs(currentValue, this.errorText, this.GetIsValid());
   this.Validation.FireEvent(this, args);
   this.SetErrorText(args.errorText, true );
   this.SetIsValid(args.isValid, true );
   if(args.value != currentValue)
    this.SetValue(args.value);
  }
 },
 RaiseValueChanged: function(){
  var processOnServer = this.isPostBackAllowed();
  if(!this.ValueChanged.IsEmpty()){
   var args = new ASPxClientProcessingModeEventArgs(processOnServer);
   this.ValueChanged.FireEvent(this, args);
   processOnServer = args.processOnServer;
  }
  return processOnServer;  
 },
 isPostBackAllowed: function() {
  return this.autoPostBack;
 },
 AddDecorationStyle: function(key, className, cssText) {
  if(!this.styleDecoration) 
   this.RequireStyleDecoration();
  this.styleDecoration.AddStyle(key, className, cssText);
 }, 
 RequireStyleDecoration: function() {
  this.styleDecoration = this.CreateStyleDecoration();
  this.PopulateStyleDecorationPostfixes();
 },
 CreateStyleDecoration: function() {
  return new ASPx.EditorStyleDecoration(this);
 },
 PopulateStyleDecorationPostfixes: function() {
  this.styleDecoration.AddPostfix("");
 },
 LockStyleDecorationUpdate: function() {
  if(this.styleDecoration)
   this.styleDecoration.LockUpdate();
 },
 UnlockStyleDecorationUpdate: function() {
  if(this.styleDecoration)
   this.styleDecoration.UnlockUpdate();
 },
 Focus: function(){
  this.SetFocus();
 },
 GetIsValid: function() {
  var hasRequiredInputElement = !this.RequireInputElementToValidate() || ASPx.IsExistsElement(this.GetInputElement());
  if(!hasRequiredInputElement || this.IsErrorFrameDisplayed() && !ASPx.IsExistsElement(this.GetElementRequiredForErrorFrame()))
   return true;
  return this.isValid;
 },
 RequireInputElementToValidate: function() {
  return true;
 },
 IsErrorFrameDisplayed: function() {
  return this.display !== ErrorFrameDisplay.None;
 },
 GetErrorText: function(){
  return this.errorText;
 },
 SetIsValid: function(isValid, validating){
  if(this.customValidationEnabled && this.isValid != isValid) {
   this.isValid = isValid;
   this.UpdateErrorFrameAndFocus(false );
   this.UpdateClientValidationState();
   if(!validating)
    this.UpdateValidationSummaries(ValidationType.PersonalViaScript);
  }
 },
 SetErrorText: function(errorText, validating){
  if(this.customValidationEnabled && this.errorText != errorText) {
   this.errorText = errorText;
   this.UpdateErrorFrameAndFocus(false );
   this.UpdateClientValidationState();
   if(!validating)
    this.UpdateValidationSummaries(ValidationType.PersonalViaScript);
  }
 },
 Validate: function(){
  this.ParseValue();
  this.OnValidation(ValidationType.PersonalViaScript);
 },
 GetModifyEvent: function() {
  return this.ValueChanged;
 },
 EnsureRequiredNativeAttributesExists: function() { }
});
ASPx.Ident.scripts.ASPxClientEdit = true;
ASPx.focusedEditorName = "";
ASPx.GetFocusedEditor = function() {
 var focusedEditor = ASPx.GetControlCollection().Get(ASPx.focusedEditorName);
 if(focusedEditor && !focusedEditor.focused){
  ASPx.SetFocusedEditor(null);
  focusedEditor = null;
 }
 return focusedEditor;
};
ASPx.SetFocusedEditor = function(editor) {
 ASPx.focusedEditorName = editor ? editor.name : "";
};
ASPx.FindAssociatedLabelElements = function(editor) {
 var assocciatedLabels = [];
 var inputElement = editor.GetInputElement();
 if(!ASPx.IsExists(inputElement) || !inputElement.id) 
  return assocciatedLabels;
 var labels = ASPx.GetNodesByTagName(document, "LABEL");
 for(var i = 0; i < labels.length; i++) {
  if(!!labels[i].htmlFor && labels[i].htmlFor === inputElement.id)
   assocciatedLabels.push(labels[i]);
 }
 return assocciatedLabels;
};
var DisableAccessibilityExplanatoryTextManager = ASPx.CreateClass(null, {
 constructor: function(editor) {
  this.editor = editor;
 },
 GetAdditionalTextRowId: function() {
  return this.editor.name + EditElementSuffix.AccessibilityAdditionalTextRow;
 },
 GetErrorTextElement: function () {
  return !!this.editor.GetErrorTextCell() ? this.editor.GetErrorTextCell() : this.editor.GetErrorImage();
 },
 GetTextElement: function() { return null; },
 SetCaptionAssociating: function() { },
 UpdateText: function() { },
 UpdateValidationState: function(validationType) { },
 ToggleErrorAlert: function() { },
 SetOrRemoveText: function(accessibilityElements, textElement, setText, isLabel, isFirst) { }
});
var EditAccessibilityExplanatoryTextManager = ASPx.CreateClass(DisableAccessibilityExplanatoryTextManager, {
 constructor: function(editor) {
  this.constructor.prototype.constructor.call(this, editor);
  this.invisibleRowCssClassName = "dxAIR";
 },
 GetTextElement: function() {
  var mainElement = this.editor.GetMainElement();
  if(!mainElement) return null;
  var explanatoryText = "";
  var explanatoryTextElement = null;
  if(!!this.editor.nullText)
   explanatoryText = this.editor.nullText;
  else if(!!this.editor.helpTextObj)
   explanatoryTextElement = this.editor.helpTextObj.helpTextElement;
  else if(!!mainElement.title)
   explanatoryText = mainElement.title;
  if(explanatoryText && mainElement.tagName == "TABLE") {
   var assistantElement = this.editor.GetAccessibilityFirstActiveElement();
   if(assistantElement)
    ASPx.Attr.Aria.AppendLabel(assistantElement, explanatoryText, true);
  }
  return explanatoryTextElement;
 },
 SetCaptionAssociating: function() {
  var captionCell = this.editor.GetCaptionCell();
  if(!captionCell || captionCell.childNodes[0].tagName == "LABEL") return;
  var labelElement = captionCell.childNodes[0];
  ASPx.EditAccessibilityExplanatoryTextManager.SetLabelAssociating(this.editor, this.editor.GetAccessibilityFirstActiveElement(), labelElement);
 },
 UpdateText: function() {
  var additionalTextElement = this.GetTextElement();
  if(ASPx.IsExists(additionalTextElement)) {
   var pronounceElement = this.editor.GetAccessibilityFirstActiveElement();
   var hasAnyLabel = !!ASPx.Attr.GetAttribute(pronounceElement, "aria-label") || 
    !!ASPx.Attr.GetAttribute(pronounceElement, "aria-labelledby") ||
    ASPx.FindAssociatedLabelElements(this.editor).length > 0;
   this.SetOrRemoveText([pronounceElement], additionalTextElement, true, !hasAnyLabel, false);
  }
 },
 UpdateValidationState: function(validationType) {
  if(validationType == ValidationType.PersonalOnValueChanged && this.editor.accessibilityHelper) return;
  var accessibilityElements = this.editor.GetAccessibilityActiveElements();
  var errorTextElement = this.GetErrorTextElement();
  this.SetOrRemoveText(accessibilityElements, errorTextElement, !this.editor.isValid, false, true);
  if(accessibilityElements.length > 0 && !!errorTextElement) {
   for(var i = 0; i < accessibilityElements.length; i++) {
    if(!ASPx.IsExists(accessibilityElements[i])) continue;
    ASPx.Attr.SetOrRemoveAttribute(accessibilityElements[i], "aria-invalid", !this.editor.isValid);
   }
  }
 },
 ToggleErrorAlert: function() {
  var errorTextElement = this.GetErrorTextElement();
  ASPx.SetElementDisplay(errorTextElement, false);
  ASPx.Attr.SetAttribute(errorTextElement, 'role', 'alert');
  ASPx.SetElementDisplay(errorTextElement, true);
  setTimeout(function() { ASPx.Attr.RemoveAttribute(errorTextElement, 'role'); }, 500);
 },
 SetOrRemoveText: function(accessibilityElements, textElement, setText, isLabel, isFirst) {
  var idsRefAttribute = isLabel ? ASPx.Attr.Aria.labelled : ASPx.Attr.Aria.described;
  if(!textElement) return;
  var textId = !!textElement.id ? textElement.id : textElement.parentNode.id;
  for(var i = 0; i < accessibilityElements.length; i++) {
   if(!accessibilityElements[i]) continue;
   var descRefString = ASPx.Attr.GetAttribute(accessibilityElements[i], idsRefAttribute);
   var descRefIds = !!descRefString ? descRefString.split(" ") : [ ];
   var descIndex = descRefIds.indexOf(textId);
   if(setText && descIndex == -1) {
    if(isFirst)
     descRefIds.unshift(textId);
    else
     descRefIds.push(textId);
   }
   else if(!setText && descIndex > -1)
    descRefIds.splice(descIndex, 1);
   ASPx.Attr.SetOrRemoveAttribute(accessibilityElements[i], idsRefAttribute, descRefIds.join(" "));
  }
 }
});
ASPx.DisableAccessibilityExplanatoryTextManager = DisableAccessibilityExplanatoryTextManager;
ASPx.EditAccessibilityExplanatoryTextManager = EditAccessibilityExplanatoryTextManager;
ASPx.EditAccessibilityExplanatoryTextManager.SetLabelAssociating = function(editor, activeElement, labelElement) {
 var clickHandler = function(evt) {
  if(editor && editor.OnAssociatedLabelClick)
   editor.OnAssociatedLabelClick(evt);
  else
   activeElement.click();
 };
 ASPx.Evt.AttachEventToElement(labelElement, "click", clickHandler);
 if(!!editor) {
  var hasAriaLabel = !!ASPx.Attr.GetAttribute(activeElement, "aria-label");
  editor.ariaExplanatoryTextManager.SetOrRemoveText([activeElement], labelElement, true, !hasAriaLabel, true);
 }
};
ASPxClientEdit.ClearEditorsInContainer = function(container, validationGroup, clearInvisibleEditors) {
 invalidEditorToBeFocused = null;
 ASPx.ProcessEditorsInContainer(container, ASPx.ClearProcessingProc, ASPx.ClearChoiceCondition, validationGroup, clearInvisibleEditors, true );
 ASPxClientEdit.ClearExternalControlsInContainer(container, validationGroup, clearInvisibleEditors, true );
};
ASPxClientEdit.ClearEditorsInContainerById = function(containerId, validationGroup, clearInvisibleEditors) {
 var container = document.getElementById(containerId);
 this.ClearEditorsInContainer(container, validationGroup, clearInvisibleEditors);
};
ASPxClientEdit.ClearGroup = function(validationGroup, clearInvisibleEditors) {
 return this.ClearEditorsInContainer(null, validationGroup, clearInvisibleEditors);
};
ASPxClientEdit.ValidateEditorsInContainer = function(container, validationGroup, validateInvisibleEditors) {
 var summaryCollection;
 if(ASPx.Ident.scripts.ASPxClientValidationSummary) {
  summaryCollection = ASPx.GetClientValidationSummaryCollection();
  summaryCollection.AllowNewErrorsAccepting(validationGroup);
 }
 var validationResult = ASPx.ProcessEditorsInContainer(container, ASPx.ValidateProcessingProc, _aspxValidateChoiceCondition, validationGroup, validateInvisibleEditors,
  false );
 validationResult.isValid = ASPxClientEdit.ValidateExternalControlsInContainer(container, validationGroup, validateInvisibleEditors,
  false ) && validationResult.isValid;
 if(typeof(validateInvisibleEditors) == "undefined")
  validateInvisibleEditors = false;
 if(typeof(validationGroup) == "undefined")
  validationGroup = null;    
 validationResult.isValid = ASPx.GetControlCollection().RaiseValidationCompleted(container, validationGroup,
 validateInvisibleEditors, validationResult.isValid, validationResult.firstInvalid, validationResult.firstVisibleInvalid);
 if(summaryCollection)
  summaryCollection.ForbidNewErrorsAccepting(validationGroup);
 if(!validationResult.isValid && !!validationResult.firstVisibleInvalid && validationResult.firstVisibleInvalid.accessibilityCompliant && !validationResult.firstVisibleInvalid.setFocusOnError) {
  var accessInvalidControl = validationResult.firstVisibleInvalid;
  if(!summaryCollection && !accessInvalidControl.focused) {
   var beforeDelayActiveElement = ASPx.GetActiveElement();
   setTimeout(function() {
    var currentActiveElement = ASPx.GetActiveElement();
    if(accessInvalidControl.focused || (currentActiveElement != beforeDelayActiveElement && ASPx.Attr.IsExistsAttribute(currentActiveElement, 'role')))
     return;
    accessInvalidControl.ariaExplanatoryTextManager.ToggleErrorAlert();
   }, 500);    
  }
 }
 return validationResult.isValid;
};
ASPxClientEdit.ValidateEditorsInContainerById = function(containerId, validationGroup, validateInvisibleEditors) {
 var container = document.getElementById(containerId);
 return this.ValidateEditorsInContainer(container, validationGroup, validateInvisibleEditors);
};
ASPxClientEdit.ValidateGroup = function(validationGroup, validateInvisibleEditors) {
 return this.ValidateEditorsInContainer(null, validationGroup, validateInvisibleEditors);
};
ASPxClientEdit.AreEditorsValid = function(containerOrContainerId, validationGroup, checkInvisibleEditors) {
 var container = typeof(containerOrContainerId) == "string" ? document.getElementById(containerOrContainerId) : containerOrContainerId;
 var checkResult = ASPx.ProcessEditorsInContainer(container, ASPx.EditorsValidProcessingProc, _aspxEditorsValidChoiceCondition, validationGroup,
  checkInvisibleEditors, false );
 checkResult.isValid = ASPxClientEdit.AreExternalControlsValidInContainer(containerOrContainerId, validationGroup,
  checkInvisibleEditors, false ) && checkResult.isValid;
 return checkResult.isValid;
};
ASPxClientEdit.AreExternalControlsValidInContainer = function(containerId, validationGroup, validateInvisibleEditors, processDisabledEditors) {
 if(ASPx.Ident.scripts.ASPxClientHtmlEditor)
  return ASPxClientHtmlEditor.AreEditorsValidInContainer(containerId, validationGroup, validateInvisibleEditors, processDisabledEditors);
 return true;
};
ASPxClientEdit.ClearExternalControlsInContainer = function(containerId, validationGroup, validateInvisibleEditors, processDisabledEditors) {
 if(ASPx.Ident.scripts.ASPxClientHtmlEditor)
  return ASPxClientHtmlEditor.ClearEditorsInContainer(containerId, validationGroup, validateInvisibleEditors, processDisabledEditors);
 return true;
};
ASPxClientEdit.ValidateExternalControlsInContainer = function(containerId, validationGroup, validateInvisibleEditors, processDisabledEditors) {
 if(ASPx.Ident.scripts.ASPxClientHtmlEditor)
  return ASPxClientHtmlEditor.ValidateEditorsInContainer(containerId, validationGroup, validateInvisibleEditors, processDisabledEditors);
 return true;
};
ASPxClientEdit.AttachEditorModificationListener = function(handler, predicate) {
 var processAction = function(event) { event.AddHandler(handler); };
 ASPxClientEdit.ProcessEditorModificationListener(handler, processAction, predicate);
};
ASPxClientEdit.DetachEditorModificationListener = function(handler, predicate) {
 var processAction = function(event) { event.RemoveHandler(handler); };
 ASPxClientEdit.ProcessEditorModificationListener(handler, processAction, predicate);
};
ASPxClientEdit.ProcessEditorModificationListener = function(handler, action, predicate) {
 ASPx.GetControlCollection().ForEachControl(function(control) {
  if(control.GetModifyEvent && predicate(control)) {
   if(control.isNative)
    control.EnsureRequiredNativeAttributesExists();
   action(control.GetModifyEvent());
  }
 });
};
var ASPxClientEditKeyEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(htmlEvent) {
  this.constructor.prototype.constructor.call(this);
  this.htmlEvent = htmlEvent;
 }
});
var ASPxClientEditValidationEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(value, errorText, isValid) {
  this.constructor.prototype.constructor.call(this);
  this.errorText = errorText;
  this.isValid = isValid;
  this.value = value;
 }
});
ASPx.ProcessEditorsInContainer = function(container, processingProc, choiceCondition, validationGroup, processInvisibleEditors, processDisabledEditors) {
 var allProcessedSuccessfull = true;
 var firstInvalid = null;
 var firstVisibleInvalid = null;
 var invalidEditorToBeFocused = null;
 ASPx.GetControlCollection().ForEachControl(function(control) {
  var canValidate = ASPx.CanValidateControl(control, container, processingProc, choiceCondition, validationGroup, processInvisibleEditors, processDisabledEditors);
  if(!canValidate) return;
  var isSuccess = processingProc(control);
  if(!isSuccess) {
   allProcessedSuccessfull = false;
   if(firstInvalid == null)
    firstInvalid = control;
   var isVisible = control.IsVisible();
   if(isVisible && firstVisibleInvalid == null)
    firstVisibleInvalid = control;
   if(control.setFocusOnError && invalidEditorToBeFocused == null && isVisible)
    invalidEditorToBeFocused = control;
  }
 }, this);
 if(invalidEditorToBeFocused != null)
  invalidEditorToBeFocused.SetFocus();
 return new ASPxValidationResult(allProcessedSuccessfull, firstInvalid, firstVisibleInvalid);
};
ASPx.CanValidateControl = function(control, container, processingProc, choiceCondition, validationGroup, processInvisibleEditors, processDisabledEditors) {
 var needToProcessRatingControl = window.ASPxClientRatingControl && (control instanceof ASPxClientRatingControl) && processingProc === ASPx.ClearProcessingProc;
 var mainElement = control.GetMainElement(); 
 if(!ASPx.Ident.IsASPxClientEdit(control) && !needToProcessRatingControl)
  return false;
 if(ASPx.Ident.isDialogInvisibleControl(control) || ASPx.Ident.isBatchEditUnusedEditor(control))
  return false; 
 if(!processDisabledEditors && !control.GetEnabled())
  return false;
 if(!mainElement || (container && !ASPx.GetIsParent(container, mainElement)))
  return false;
 if(!processInvisibleEditors && !control.IsVisible())
  return false;
 if(choiceCondition && !choiceCondition(control, validationGroup))
  return false;
 return true;
};
var ASPxValidationResult = ASPx.CreateClass(null, {
 constructor: function(isValid, firstInvalid, firstVisibleInvalid) {
  this.isValid = isValid;
  this.firstInvalid = firstInvalid;
  this.firstVisibleInvalid = firstVisibleInvalid;
 }
});
ASPx.ClearChoiceCondition = function(edit, validationGroup) {
 return !ASPx.IsExists(validationGroup) || (edit.validationGroup == validationGroup);
};
function _aspxValidateChoiceCondition(edit, validationGroup) {
 return ASPx.ClearChoiceCondition(edit, validationGroup) && edit.customValidationEnabled;
}
function _aspxEditorsValidChoiceCondition(edit, validationGroup) {
 return _aspxValidateChoiceCondition(edit, validationGroup);
}
function wrapLostFocusHandler(handler) {
 if(ASPx.Browser.Edge) {
  return function(name) {
   var edit = ASPx.GetControlCollection().Get(name);
   if(edit && !ASPx.IsElementVisible(edit.GetMainElement()))
    setTimeout(handler, 0, name);
   else
    handler(name);
  };
 }
 return handler;
}
ASPx.EGotFocus = function(name) {
 var edit = ASPx.GetControlCollection().Get(name);
 if(edit) {
  if(edit.isInitialized) {
   if(ASPx.Browser.VirtualKeyboardSupported && !edit.ownerListBox)
    ASPx.VirtualKeyboardUI.processEditorGotFocus(edit);
   else
    edit.OnFocus();
  }
  else {
   var inputElement = edit.GetFocusableInputElement();
   if(inputElement && inputElement === document.activeElement) {
    if(ASPx.Browser.Firefox)
     window.setTimeout(function() { document.activeElement.blur(); }, 0);
    else
     document.activeElement.blur();
   }
  }
 }
};
ASPx.ELostFocusCore = function(name) {
 var edit = ASPx.GetControlCollection().Get(name);
 if(ASPx.Browser.VirtualKeyboardSupported && (!edit || !edit.ownerListBox)) {
  var supressLostFocus = ASPx.VirtualKeyboardUI.isInputNativeBluring();
  if(!supressLostFocus)
   ASPx.VirtualKeyboardUI.resetFocusedEditorCore();
  else 
   return;
 }
 if(edit && edit.focused) {
  if(edit.UseDelayedSpecialFocus()) {
   if(edit.specialFocusTimer === -1)
    edit.specialFocusTimer = ASPx.Timer.SetControlBoundTimeout(function() { edit.OnLostFocus(); }, edit, 30);
  }
  else {
   edit.OnLostFocus();
  }
 }
};
ASPx.ELostFocus = wrapLostFocusHandler(ASPx.ELostFocusCore);
ASPx.EValueChanged = function(name) {
 var edit = ASPx.GetControlCollection().Get(name);
 if(edit != null)
  edit.OnValueChanged();
};
ASPx.VirtualKeyboardUI = (function() {
 var result = {
  focusedEditor: null,
  inputNativeFocusLocked: false,
  elementBelongsToEditor: function(element) {
   if(!element) return false;
   var isBelongsToEditor = false;
   ASPx.GetControlCollection().ForEachControl(function(control) {
    if(ASPx.Ident.IsASPxClientEdit(control) && control.IsEditorElement(element)) {
     isBelongsToEditor = true;
     return true;
    }
   }, this);
   return isBelongsToEditor;
  },
  elementBelongsToFocusedEditor: function (element) {
   return this.focusedEditor && this.focusedEditor.IsEditorElement(element);
  },
  onTouchStart: function (evt) {
   if (!ASPx.Browser.VirtualKeyboardSupported || this.isGooglePlaceAutocompleteElementTap(evt)) return;
   this.setInputNativeFocusLocked(false);
   if(this.focusedEditor)
    this.focusedEditor.onVirtualKeyboardUITouchStart(evt);
  },
  onTouchEnd: function(evt) {
   if(ASPx.TouchUIHelper.pointerEnabled) {  
    if(!window.testingTouchMode) { 
     if(evt.pointerType !== ASPx.TouchUIHelper.pointerType.Touch)
      return;
    }
    this.processFocusEditorControl(evt);
   } else
    ASPx.TouchUIHelper.handleFastTapIfRequired(evt,
     function() {
      this.processFocusEditorControl(evt);
     }.aspxBind(this), false);
  },
  processFocusEditorControl: function(evt) {
   var evtSource = ASPx.Evt.GetEventSource(evt);
   var focusedEditorIsTimeEdit = this.focusedEditor && (ASPx.Ident.IsASPxClientTimeEdit && ASPx.Ident.IsASPxClientTimeEdit(this.focusedEditor));
   var focusedTimeEditBelongsToDateEdit = focusedEditorIsTimeEdit && this.focusedEditor.OwnerDateEdit && this.focusedEditor.OwnerDateEdit.GetShowTimeSection();
   if(focusedTimeEditBelongsToDateEdit) {
    this.focusedEditor.OwnerDateEdit.ForceRefocusTimeSectionTimeEdit(evtSource);
    return;
   }
   var elementWithNativeFocus = ASPx.GetActiveElement();
   var someEditorInputIsFocused = this.elementBelongsToEditor(elementWithNativeFocus);
   var touchKeyboardIsVisible = someEditorInputIsFocused;
   var tapOutsideEditorAndInputs = !this.elementBelongsToEditor(evtSource) && !ASPx.Ident.IsFocusableElementRegardlessTabIndex(evtSource)
    && !this.isGooglePlaceAutocompleteElementTap(evt);
   var blurToHideTouchKeyboard = touchKeyboardIsVisible && tapOutsideEditorAndInputs;
   if(blurToHideTouchKeyboard) {
    elementWithNativeFocus.blur();
    return;
   }
   var tapOutsideFocusedEditor = this.focusedEditor && !this.elementBelongsToFocusedEditor(evtSource);
   if(tapOutsideFocusedEditor) {
    if(!this.elementBelongsToFocusedEditor(elementWithNativeFocus))
     this.resetFocusedEditor();
   }
  },
  focusEditor: function(edit) {
   if(!edit.focused) {
    this.setInputNativeFocusLocked(true);
    this.setFocusToEditor(edit);
   } else {
    edit.ForceRefocusEditor();
   }
  },
  setFocusToEditor: function(edit) {
   if(ASPx.Browser.MacOSMobilePlatform) {
    var timeoutDuration = ASPx.Browser.Chrome ? 250 : 30;
    window.setTimeout(function() {
     edit.SetFocus();
    }, timeoutDuration);
   } else {
    edit.SetFocus();
   }
  },
  processEditorGotFocus: function(edit) {
   if(this.focusedEditor === edit) {
    this.focusedEditor.UnlockFocusEvents();
    if(this.focusedEditor.EnsureClearButtonVisibility)
     this.focusedEditor.EnsureClearButtonVisibility();
   }
   else {
    this.setFocusedEditor(edit);
    if(this.getInputNativeFocusLocked())
     edit.BlurInputElement();
   }
  },
  setFocusedEditor: function(edit) {
   this.resetFocusedEditor();
   this.focusedEditor = edit;
   this.focusedEditor.Disposed.AddHandler(this.onFocusedEditorDisposed);
   this.focusedEditor.OnFocus();
   ASPx.SetFocusedEditor(this.focusedEditor);
  },
  isInputNativeBluring: function() {
   return this.focusedEditor && this.getInputNativeFocusLocked();
  },
  setInputNativeFocusLocked: function(locked) {
   this.inputNativeFocusLocked = locked;
  },
  getInputNativeFocusLocked: function() {
   return this.inputNativeFocusLocked;
  },
  resetFocusedEditor: function() {
   if(this.focusedEditor) {
    var curEditorName = this.focusedEditor.name;
    var focusedEditorInputElementExists = this.focusedEditor.GetInputElement();
    this.resetFocusedEditorCore();
    if(focusedEditorInputElementExists)
     ASPx.ELostFocusCore(curEditorName);
   }
  },
  resetFocusedEditorCore: function() { 
   if(this.focusedEditor)
    this.focusedEditor.Disposed.RemoveHandler(this.onFocusedEditorDisposed);
   this.focusedEditor = null;
  },
  getFocusedEditor: function() {
   return this.focusedEditor;
  },
  focusableInputElementIsActive: function(edit) {
   var inputElement = edit.GetFocusableInputElement();
   return !!inputElement ? ASPx.GetActiveElement() === inputElement : false;
  },
  isGooglePlaceAutocompleteElementTap: function(evt) {
   var googlePlaceAutocompleteContainer = ASPx.GetNodeByClassName(document.body, "pac-container", 0);
   if(!googlePlaceAutocompleteContainer)
    return false;
   return ASPx.GetParentByClassName(ASPx.Evt.GetEventSource(evt), "pac-container") != null;
  }
 };
 result.onFocusedEditorDisposed = function() {
  this.resetFocusedEditor();
 }.bind(result);
 return result;
})();
if(ASPx.Browser.VirtualKeyboardSupported) {
 var touchStartEventName = ASPx.TouchUIHelper.pointerEnabled ? ASPx.TouchUIHelper.pointerDownEventName : 'touchstart';
 var touchEndEventName = ASPx.TouchUIHelper.pointerEnabled ? ASPx.TouchUIHelper.pointerUpEventName : 'touchend';
 ASPx.Evt.AttachEventToDocument(touchStartEventName, function(evt) { ASPx.VirtualKeyboardUI.onTouchStart(evt); });
 ASPx.Evt.AttachEventToDocument(touchEndEventName, function(evt) { ASPx.VirtualKeyboardUI.onTouchEnd(evt); });
}
ASPx.Evt.AttachEventToDocument("mousedown", function(evt) {
 var editor = ASPx.GetFocusedEditor();
 if(!editor) 
  return;
 var evtSource = ASPx.Evt.GetEventSource(evt);
 if(editor.IsClearButtonElement(evtSource))
  return;
 if(editor.OwnerDateEdit && editor.OwnerDateEdit.GetShowTimeSection()) {
  editor.OwnerDateEdit.ForceRefocusTimeSectionTimeEdit(evtSource);
  return;
 }
 if(editor.ownerListBox && editor.ownerListBox.IsEditorElement(evtSource) && !editor.IsEditorElement(evtSource)) {
  editor.ownerListBox.ForceRefocusEditor(evt);
  ASPx.SetFocusedEditor(editor.ownerListBox);
  return;
 }
 if(editor.IsEditorElement(evtSource) && !editor.IsElementBelongToInputElement(evtSource))
  editor.ForceRefocusEditor(evt);
});
ASPx.Evt.AttachEventToDocument(ASPx.Evt.GetMouseWheelEventName(), function(evt) {
 var editor = ASPx.GetFocusedEditor();
 if(editor != null && ASPx.IsExistsElement(editor.GetMainElement()) && editor.focused && editor.receiveGlobalMouseWheel)
  editor.OnMouseWheel(evt);
});
ASPx.KBSIKeyDown = function(name, evt){
 var control = ASPx.GetControlCollection().Get(name);
 if(control != null){
  var isProcessed = control.OnSpecialKeyDown(evt);
  if(isProcessed)
   return ASPx.Evt.PreventEventAndBubble(evt);
 }
};
ASPx.KBSIKeyPress = function(name, evt){
 var control = ASPx.GetControlCollection().Get(name);
 if(control != null){
  var isProcessed = control.OnSpecialKeyPress(evt);
  if(isProcessed)
   return ASPx.Evt.PreventEventAndBubble(evt);
 }
};
ASPx.KBSIKeyUp = function(name, evt){
 var control = ASPx.GetControlCollection().Get(name);
 if(control != null){
  var isProcessed = control.OnSpecialKeyUp(evt);
  if(isProcessed)
   return ASPx.Evt.PreventEventAndBubble(evt);
 }
};
ASPx.ClearProcessingProc = function(edit) {
 return edit.Clear();
};
ASPx.ValidateProcessingProc = function(edit) {
 edit.OnValidation(ValidationType.MassValidation);
 return edit.GetIsValid();
};
ASPx.EditorsValidProcessingProc = function(edit) {
 return edit.GetIsValid();
};
var CheckEditElementHelper = ASPx.CreateClass(ASPx.CheckableElementHelper, {
 AttachToMainElement: function(internalCheckBox) {
  ASPx.CheckableElementHelper.prototype.AttachToMainElement.call(this, internalCheckBox);
  this.AttachToLabelElement(this.GetLabelElement(internalCheckBox.container), internalCheckBox);
 },
 AttachToLabelElement: function(labelElement, internalCheckBox) {
  var _this = this;
  if(labelElement) {
   ASPx.Evt.AttachEventToElement(labelElement, "click", 
    function (evt) { 
     _this.InvokeClick(internalCheckBox, evt);
    }
   );
   ASPx.Evt.AttachEventToElement(labelElement, "mousedown",
    function (evt) {
     internalCheckBox.Refocus();
    }
   );
  }
 },
 GetLabelElement: function(container) {
  var labelElement = ASPx.GetNodeByTagName(container, "LABEL", 0);
  if(!labelElement) {
   var labelCell = ASPx.GetNodeByClassName(container, "dxichTextCellSys", 0);
   labelElement = ASPx.GetNodeByTagName(labelCell, "SPAN", 0);
  }
  return labelElement;
 }
});
CheckEditElementHelper.Instance = new CheckEditElementHelper();
var CalendarSharedParameters = ASPx.CreateClass(null, {
 updateCalendarCallbackCommand: "UPDATE",
 constructor: function() {
  this.minDate = null;
  this.maxDate = null;
  this.disabledDates = [];
  this.calendarCustomDraw = false;
  this.hasCustomDisabledDatesViaCallback = false;
  this.dateRangeMode = false;
  this.currentDateEdit = null;
  this.DaysSelectingOnMouseOver = new ASPxClientEvent();
  this.VisibleDaysMouseOut = new ASPxClientEvent();
  this.CalendarSelectionChangedInternal = new ASPxClientEvent();
 },
 Assign: function(source) {
  this.minDate = source.minDate ? source.minDate : null;
  this.maxDate = source.maxDate ? source.maxDate : null;
  this.calendarCustomDraw = source.calendarCustomDraw ? source.calendarCustomDraw : false;
  this.hasCustomDisabledDatesViaCallback = source.hasCustomDisabledDatesViaCallback ? source.hasCustomDisabledDatesViaCallback : false;
  this.disabledDates = source.disabledDates ? source.disabledDates : [];
  this.currentDateEdit = source.currentDateEdit ? source.currentDateEdit : null;
 },
 GetUpdateCallbackParameters: function() {
  var callbackArgs = this.GetCallbackArgs();
  callbackArgs = this.FormatCallbackArg(this.updateCalendarCallbackCommand, callbackArgs);
  return callbackArgs;
 },
 GetCallbackArgs: function() {
  var args = {};
  if(this.minDate)
   args.clientMinDate = ASPx.DateUtils.GetInvariantDateString(this.minDate);
  if(this.maxDate)
   args.clientMaxDate = ASPx.DateUtils.GetInvariantDateString(this.maxDate);
  if(args.clientMinDate || args.clientMaxDate) {
   var jsonArgs = JSON.stringify(args);
   return ASPx.Str.EncodeHtml(jsonArgs);
  }
  return null;
 },
 FormatCallbackArg: function(prefix, arg) {
  if(!arg) return prefix;
  return [prefix, '|', arg.length, ';', arg, ';'].join('');
 }
});
ASPx.CalendarSharedParameters = CalendarSharedParameters;
ASPx.ValidationType = ValidationType;
ASPx.ErrorFrameDisplay = ErrorFrameDisplay;
ASPx.EditElementSuffix = EditElementSuffix;
ASPx.ValidationPattern = ValidationPattern;
ASPx.RequiredFieldValidationPattern = RequiredFieldValidationPattern;
ASPx.RegularExpressionValidationPattern = RegularExpressionValidationPattern;
ASPx.CheckEditElementHelper = CheckEditElementHelper;
ASPx.IsEditorFocusable = _aspxIsEditorFocusable;
window.ASPxClientEditBase = ASPxClientEditBase;
window.ASPxClientEdit = ASPxClientEdit;
window.ASPxClientEditKeyEventArgs = ASPxClientEditKeyEventArgs;
window.ASPxClientEditValidationEventArgs = ASPxClientEditValidationEventArgs;
})();

(function() {
ASPx.TEInputSuffix = "_I";
ASPx.PasteCheckInterval = 50;
ASPx.CheckUserInputInterval = 10;
ASPx.TEHelpTextElementSuffix = "_HTE";
ASPx.TempHiddenInputSuffix = "_THI";
var passwordInputClonedSuffix = "_CLND";
var CHROME_AUTOFILL_SELECTOR = ":-webkit-autofill";
var BrowserHelper = {
 SAFARI_SYSTEM_CLASS_NAME: "dxeSafariSys",
 MOBILE_SAFARI_SYSTEM_CLASS_NAME: "dxeIPadSys",
 GetBrowserSpecificSystemClassName: function() {
  if(ASPx.Browser.Safari)
   return ASPx.Browser.MacOSMobilePlatform ? this.MOBILE_SAFARI_SYSTEM_CLASS_NAME : this.SAFARI_SYSTEM_CLASS_NAME;
  return "";
 }
};
var focusedNullTextClassName = "dxeFNTextSys";
var NullTextDisplayMode = {
 Unfocused: "Unfocused",
 UnfocusedAndFocused: "UnfocusedAndFocused"
};
ASPx.NullTextDisplayMode = NullTextDisplayMode;
var ASPxClientTextEdit = ASPx.CreateClass(ASPxClientEdit, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);      
  this.isASPxClientTextEdit = true;
  this.nullText = "";
  this.nullTextDisplayMode = NullTextDisplayMode.Unfocused;
  this.nullTextOnFocusCssText = "";
  this.focusedNullTextTimerID = -1;
  this.escCount = 0;
  this.raiseValueChangedOnEnter = true;
  this.autoResizeWithContainer = false;
  this.lastChangedValue = null;
  this.autoCompleteAttribute = null;
  this.isTextSelectionOnClickEnabled = false;
  this.trySelectInputTextOnClick = true;
  this.passwordNullTextIntervalID = -1;
  this.nullTextInputElement = null;
  this.helpText = "";
  this.helpTextObj = null;  
  this.helpTextStyle = [];
  this.externalTableStyle = [];
  this.helpTextPosition = ASPx.Position.Right;
  this.helpTextMargins = null;
  this.helpTextHAlign = ASPxClientTextEditHelpTextHAlign.Left;
  this.helpTextVAlign = ASPxClientTextEditHelpTextVAlign.Top;
  this.enableHelpTextPopupAnimation = true;
  this.helpTextDisplayMode = ASPxClientTextEditHelpTextDisplayMode.Inline;
  this.maskInfo = null;  
  this.maskValueBeforeUserInput = "";
  this.maskValueChangedByPassKeyPressOnAndroid = false;
  this.maskPasteTimerID = -1;
  this.maskPasteLock = false;    
  this.maskPasteCounter = 0;
  this.maskTextBeforePaste = "";    
  this.maskHintHtml = "";
  this.maskHintTimerID = -1;
  this.errorCellPosition = ASPx.Position.Right;
  this.inlineInitializeInputValue = null;
  this.initializeInputValue = null;
  this.displayFormat = null;
  this.TextChanged = new ASPxClientEvent();
  this.UserInput = new ASPxClientEvent();
  this.userInputEventTimerID = -1;
 },
 AddDefaultReadOnlyStateControllerItem: function(cssClass, mainElementId) {
  ASPx.AddReadOnlyItems(mainElementId, [[[cssClass], [''], ['', 'I']]]);
 },
 AddDefaultDisabledStateControllerItem: function(cssClass, mainElementId) {
  ASPx.AddDisabledItems(mainElementId, [[[cssClass], [''], ['', 'I']]]);
 },
 SetData: function(data){
  ASPxClientEdit.prototype.SetData.call(this, data);
  if(data.maskInfo) {
   var maskProperties = data.maskInfo.properties;
   var useInvariantCultureDecimalSymbol = maskProperties && maskProperties.useInvariantCultureDecimalSymbol || false;
   this.maskInfo = ASPx.MaskInfo.Create(data.maskInfo.maskText, data.maskInfo.dateTimeOnly, data.maskInfo.allowEscapingInEnums, useInvariantCultureDecimalSymbol);
   this.SetProperties(data.maskInfo.properties, this.maskInfo);
  }
 },
 InlineInitialize: function() {
  this.SaveInputValue(true);
  ASPxClientEdit.prototype.InlineInitialize.call(this);
  if(this.maskInfo != null)
   this.InitMask();
  this.ApplyBrowserSpecificClassName();
  this.helpTextInitialize();
 },
 Initialize: function(){
  this.SaveInputValue(false);
  this.SaveChangedValue();
  ASPxClientEdit.prototype.Initialize.call(this);
  if(ASPx.Browser.WebKitFamily)  
   this.CorrectMainElementWhiteSpaceStyle();
  this.InitializeTextDecoration();
  this.InitializeAutocompleteAttribute();
  if(this.IsValueRestoredByBrowser())
   this.SynchronizeRestoredValue();
 },
 InitializeEvents: function() {
  ASPxClientEdit.prototype.InitializeEvents.call(this);
  ASPx.Evt.AttachEventToElement(this.GetInputElement(), "keydown", this.OnKeyDown.aspxBind(this));
  ASPx.Evt.AttachEventToElement(this.GetInputElement(), "keyup", this.OnKeyUp.aspxBind(this));
  ASPx.Evt.AttachEventToElement(this.GetInputElement(), "keypress", this.OnKeyPress.aspxBind(this));
  if(this.isTextSelectionOnClickEnabled) {
   ASPx.Evt.AttachEventToElement(this.GetInputElement(), ASPx.TouchUIHelper.touchMouseDownEventName, this.OnMouseDown.aspxBind(this));
   ASPx.Evt.AttachEventToElement(this.GetInputElement(), "click", this.OnClick.aspxBind(this));
  }
  this.Unload.AddHandler(this.OnUnload.aspxBind(this));
 },
 InitializeTextDecoration: function() {
  var input = this.GetInputElement();
  if(input.type === "password" && !this.IsInputPasswordFilledAutomaticallyByChrome())
   this.ToggleTextDecoration();
 },
 IsInputPasswordFilledAutomaticallyByChrome: function() {
  if(!ASPx.Browser.Chrome)
   return false;
  var input = this.GetInputElement();
  return ASPx.ElementMatchesSelector(input, CHROME_AUTOFILL_SELECTOR);
 },
 OnMouseDown: function() {
  this.trySelectInputTextOnClick = ASPx.GetActiveElement() !== this.GetInputElement() && !this.IsFocusEventsLocked();
 },
 OnClick: function() {
  if(this.trySelectInputTextOnClick) {
   var input = this.GetInputElement();
   setTimeout(function() {
    var inputSelection = ASPx.Selection.GetInfo(input);
    if (inputSelection.startPos === inputSelection.endPos)
     ASPx.Selection.Set(input);
   }, 0);
  }
 },
 InitializeAutocompleteAttribute: function() {
  var input = this.GetInputElement();
  if(this.IsVCardAttributeRequired())
   ASPx.Attr.SetAttribute(input, this.autoCompleteAttribute.name, this.autoCompleteAttribute.value);
  else if(this.IsAutocompleteOffRequiredOnInitialize())
   ASPx.Attr.SetAttribute(input, "autocomplete", "off");
 },
 SaveInputValue: function(isInlineInitialize) {
  var input = this.GetInputElement();
  if(!input)
   return;
  var inputValue = input.value;
  if(inputValue === null)
   inputValue = "";
  if(isInlineInitialize)
   this.inlineInitializeInputValue = inputValue;
  else
   this.initializeInputValue = inputValue;
 },
 IsValueRestoredByBrowser: function() {
  if(this.displayFormat || this.isNative || this.inlineInitializeInputValue === null || this.initializeInputValue === null)
   return false;
  if(ASPx.Browser.Chrome)
   return this.IsValueRestoredByChrome();
  else if(ASPx.Browser.Firefox)
   return this.IsValueRestoredByFirefox();
  else
   return this.IsValueRestoredByBrowserCore();
 },
 IsValueRestoredByBrowserCore: function() {
  return this.IsValueChangedBeforeInitialize() || this.IsClientValueNotExists() || this.IsValueChangedOnMaskInitialize();
 },
 IsValueRestoredByChrome: function() {
  return this.IsValueRestoredByBrowserCore();
 },
 IsValueRestoredByFirefox: function() {
  return this.IsValueRestoredByBrowserCore();
 },
 IsValueChangedBeforeInitialize: function() {
  return this.inlineInitializeInputValue !== this.initializeInputValue;
 },
 IsClientValueNotExists: function() {
  return this.inlineInitializeInputValue !== "" &&
      this.inlineInitializeInputValue !== this.nullText &&
      this.inlineInitializeInputValue !== this.GetValue() &&
      this.inlineInitializeInputValue !== this.GetText();
 },
 IsValueChangedOnMaskInitialize: function() {
  return this.maskInfo && this.inlineInitializeInputValue !== this.GetInputElement().value;
 },
 SynchronizeRestoredValue: function() {
  this.SetText(this.initializeInputValue);
 },
 AdjustControl: function() {
  ASPxClientEdit.prototype.AdjustControl.call(this);
  this.ensureAdjustFocusedNullTextElement();
 },
 correctInputElementHeight: function() {
  var mainElement = this.GetMainElement();
  if(mainElement) {
   var mainElementHeight = mainElement.style.height;
   var mainElementHeightSpecified = mainElementHeight && mainElementHeight.indexOf('px') !== -1; 
   if(mainElementHeightSpecified) {
    var inputElement = this.GetInputElement();
    var inputElementHeight = this.getInputElementHeight();
    inputElement.style.height = inputElementHeight + "px";
    if(!ASPx.Ident.IsASPxClientMemo(this))
     inputElement.style.lineHeight = inputElementHeight + "px";
   }
  }
 },
 getInputElementHeight: function() {
  var mainElement = this.GetMainElement(),
   inputElement = this.GetInputElement();
  var inputElementHeight = ASPx.PxToInt(mainElement.style.height) - ASPx.GetTopBottomBordersAndPaddingsSummaryValue(mainElement);
  var inputElementContainer = inputElement.parentNode,
   inputContainerStyle = ASPx.GetCurrentStyle(inputElementContainer);
  inputElementHeight -= ASPx.GetTopBottomBordersAndPaddingsSummaryValue(inputElementContainer, inputContainerStyle) 
   + ASPx.GetTopBottomMargins(inputElementContainer, inputContainerStyle);
  var mainElementCellspacing = ASPx.GetCellSpacing(mainElement);
  if(mainElementCellspacing)
   inputElementHeight -= mainElementCellspacing * 2;
  var inputStyle = ASPx.GetCurrentStyle(inputElement);
  inputElementHeight -= ASPx.GetTopBottomBordersAndPaddingsSummaryValue(inputElement, inputStyle) 
   + ASPx.GetTopBottomMargins(inputElement, inputStyle);
  return inputElementHeight;
 },
 getInputCell: function() {
  var inputElement = this.GetInputElement();
  if(inputElement)
   return inputElement.parentNode;
 },
 ensureOutOfRangeWarningManager: function (minValue, maxValue, defaultMinValue, defaultMaxValue, valueFormatter) {
  if (!this.outOfRangeWarningManager)
   this.outOfRangeWarningManager = new ASPxOutOfRangeWarningManager(this, minValue, maxValue, defaultMinValue, defaultMaxValue,
    this.showOutOfRangeWarningElementAtBottom() ? ASPx.Position.Bottom : ASPx.Position.Right, valueFormatter);
 },
 showOutOfRangeWarningElementAtBottom: function() {
  return this.hasRightPopupHelpText();
 },
 GetOutOfRangeWarningElementPrevSibling: function() {
  return this.GetMainElement();
 },
 helpTextInitialize: function () {
  if(this.helpText) {
   this.helpTextObj = new ASPxClientTextEditHelpText(this, this.helpTextStyle, this.helpText, this.helpTextPosition,
    this.helpTextHAlign, this.helpTextVAlign, this.helpTextMargins, this.enableHelpTextPopupAnimation, this.helpTextDisplayMode);
  }
 },
 hasPopupHelpText: function() {
  return this.helpText && this.helpTextDisplayMode === ASPxClientTextEditHelpTextDisplayMode.Popup;
 },
 hasRightPopupHelpText: function() {
  return this.hasPopupHelpText() && this.helpTextPosition === ASPx.Position.Right;
 },
 showHelpText: function () {
  if(this.helpTextObj)
   this.helpTextObj.show();
 },
 hideHelpText: function () {
  if(this.helpTextObj)
   this.helpTextObj.hide();
 },
 ApplyBrowserSpecificClassName: function() {
  var mainElement = this.GetMainElement();
  if(ASPx.IsExistsElement(mainElement)) {
   var className = BrowserHelper.GetBrowserSpecificSystemClassName();
   if(className)
    mainElement.className += " " + className;
  }
 },
  CorrectMainElementWhiteSpaceStyle: function() {
  var inputElement = this.GetInputElement();
  if(inputElement && inputElement.parentNode) {
   if(this.IsElementHasWhiteSpaceStyle(inputElement.parentNode))
    inputElement.parentNode.style.whiteSpace = "normal";
  }
 },
 IsElementHasWhiteSpaceStyle: function(element) {
  var currentStyle = ASPx.GetCurrentStyle(element);
  return currentStyle.whiteSpace == "nowrap" || currentStyle.whiteSpace == "pre";  
 },
 FindInputElement: function(){
  return this.isNative ? this.GetMainElement() : ASPx.GetElementById(this.name + ASPx.TEInputSuffix);
 },
 DecodeRawInputValue: function(value) {
  return value;
 },
 GetRawValue: function(value){
  return ASPx.IsExists(this.stateObject) ? this.stateObject.rawValue : null;
 },
 SetRawValue: function(value){
  if(ASPx.IsExists(value))
   value = value.toString();
  this.UpdateStateObjectWithObject({ rawValue: value });
 },
 SyncRawValue: function() {
  if(this.maskInfo != null)
   this.SetRawValue(this.maskInfo.GetValue(true));
  else
   this.SetRawValue(this.GetInputElement().value);
 },
 HasTextDecorators: function() {
  return this.nullText != "" || this.displayFormat != null;
 },
 CanApplyTextDecorators: function(){
  return !this.focused;
 },
 CreateStyleDecoration: function () {
  return new ASPx.TextEditorStyleDecoration(this);
 },
 CanApplyNullTextDecoration: function() {
  var value = this.GetValue();
  return this.IsNull(value);
 },
 GetDecoratedText: function(value) {
  var result = value;
  if(this.IsNull(value) && this.nullText != "" && this.CanApplyNullTextDecoration())
   result = this.nullText;
  else if(this.displayFormat != null)
   result = this.GetDisplayFormatText(value);
  else if(this.maskInfo != null)
   result = this.maskInfo.GetText();
  else if(value == null)
   result = "";
  return result;
 },
 GetDisplayFormatText: function(value) {
  return ASPx.Formatter.Format(this.displayFormat, value);
 },
 ToggleTextDecoration: function() {
  if(this.HasTextDecorators()) {
   if(this.focused) {
    var input = this.GetInputElement();
    var oldValue = input.value;
    var sel = ASPx.Selection.GetExtInfo(input);
    this.ToggleTextDecorationCore();
    this.ensureActivateFocusedNullTextMechanism();
    if(oldValue != input.value || !ASPx.Selection.AreEqual(sel, ASPx.Selection.GetExtInfo(input))) {
     if(sel.startPos == 0 && sel.endPos == oldValue.length)
      sel.endPos = input.value.length;
     else
      sel.endPos = sel.startPos;
     if(!this.accessibilityCompliant || ASPx.GetActiveElement() == input)
      this.SetSelectionOnToggleTextDecoration(input, sel);
    }
   } else {
    this.ToggleTextDecorationCore();
    this.ensureDeactivateFocusedNullTextMechanism();
   }
  }
 },
 SetSelectionOnToggleTextDecoration: function(input, sel) {
  ASPx.Selection.Set(input, sel.startPos, sel.endPos);
 },
 ToggleTextDecorationCore: function() {
  if(this.maskInfo != null) {   
   this.ApplyMaskInfo(false);
  } else {
   var input = this.GetInputElement();
   var rawValue = this.GetRawValue();
   var value = this.CanApplyTextDecorators() ? this.GetDecoratedText(rawValue) : rawValue;
   if(input.value != value) {
    if(input.type == "password")
     this.TogglePasswordInputTextDecoration(value);
    else
     input.value = value;
   }
  }
 },
 GetPasswordNullTextInputElement: function() {
  if(!this.isPasswordNullTextInputElementExists())
   this.nullTextInputElement = this.createPasswordNullTextInputElement();
  return this.nullTextInputElement;
 },
 createPasswordNullTextInputElement: function() {
  var inputElement = this.GetInputElement(),
   nullTextInputElement = document.createElement("INPUT");
  nullTextInputElement.className = inputElement.className;
  nullTextInputElement.style.cssText = inputElement.style.cssText;
  nullTextInputElement.id = inputElement.id + passwordInputClonedSuffix;
  nullTextInputElement.type = "text";
  if(ASPx.IsExists(inputElement.tabIndex))
   nullTextInputElement.tabIndex = inputElement.tabIndex;
  nullTextInputElement.disabled = inputElement.disabled;
  var onFocusEventHandler = function() {
   var inputElement = this.GetInputElement(),
    nullTextInputElement = this.GetPasswordNullTextInputElement();
   if(inputElement) {
    this.LockFocusEvents();  
    ASPx.SetElementDisplay(inputElement, true);
    if((ASPx.Browser.MacOSMobilePlatform && ASPx.Browser.PlaformMajorVersion >= 14) || (ASPx.Browser.MacOSPlatform && ASPx.Browser.Safari && ASPx.Browser.Version >= 14)) { 
     ASPx.GetCurrentStyle(inputElement).display; 
    }
    inputElement.focus();
    ASPx.SetElementDisplay(nullTextInputElement, false);
    this.ensureAdjustFocusedNullTextElement();
    this.ReplaceAssociatedIdInLabels(nullTextInputElement.id, inputElement.id);
   }
  }.aspxBind(this);
  ASPx.Evt.AttachEventToElement(nullTextInputElement, "focus", onFocusEventHandler);
  return nullTextInputElement;
 },
 isPasswordNullTextInputElementExists: function() {
  return ASPx.IsExistsElement(this.nullTextInputElement);
 },
 TogglePasswordNullTextTimeoutChecker: function() {
  if(this.passwordNullTextIntervalID < 0) {
   var timeoutChecker = function() {
    var inputElement = this.GetInputElement();
    if(ASPx.GetControlCollection().GetByName(this.name) !== this || inputElement == null) {
     window.clearTimeout(this.passwordNullTextIntervalID);
     this.passwordNullTextIntervalID = -1;
     return;
    } else {
     if(!this.focused) {
      var passwordNullTextInputElement = this.GetPasswordNullTextInputElement();
      if(passwordNullTextInputElement.value != this.nullText && inputElement.value == "") { 
       passwordNullTextInputElement.value = this.nullText;
       this.SetValue(null);
      }
      if(inputElement.value != "") {
       if(inputElement.style.display == "none") {
        this.SetValue(inputElement.value);
        this.UnhidePasswordInput();
       }
      } else {
       if(inputElement.style.display != "none") {
        this.SetValue(null);
        this.HidePasswordInput();
       }
      }
     }
     else {
      var passwordNullTextInputElement = this.GetPasswordNullTextInputElement();
      if(passwordNullTextInputElement.value !== this.nullText && passwordNullTextInputElement.value !== "") { 
       if(inputElement.value === "")
        inputElement.value = passwordNullTextInputElement.value;
       passwordNullTextInputElement.value = this.nullText;
      }
     }
    }
   }.aspxBind(this);
   timeoutChecker(); 
   this.passwordNullTextIntervalID = window.setInterval(timeoutChecker, 100);
  }
 },
 TogglePasswordInputTextDecoration: function(value) {
  var inputElement = this.GetInputElement();
  var nullTextInputElement = this.GetPasswordNullTextInputElement();
  nullTextInputElement.value = value;
  var parentNode = inputElement.parentNode;
  if(ASPx.Data.ArrayIndexOf(parentNode.childNodes, nullTextInputElement) < 0) {
   ASPx.Attr.ChangeStyleAttribute(nullTextInputElement, "display", "none");
   ASPx.InsertElementAfter(nullTextInputElement, inputElement);
  }
  this.HidePasswordInput();
  this.TogglePasswordNullTextTimeoutChecker();
 },
 HidePasswordInput: function() {
  ASPx.Attr.ChangeStyleAttribute(this.GetInputElement(), "display", "none");
  ASPx.Attr.ChangeStyleAttribute(this.GetPasswordNullTextInputElement(), "display", "");
  this.ReplaceAssociatedIdInLabels(this.GetInputElement().id, this.GetPasswordNullTextInputElement().id);
 },
 UnhidePasswordInput: function() {
  ASPx.Attr.ChangeStyleAttribute(this.GetInputElement(), "display", "");
  ASPx.Attr.ChangeStyleAttribute(this.GetPasswordNullTextInputElement(), "display", "none");
  this.ReplaceAssociatedIdInLabels(this.GetPasswordNullTextInputElement().id, this.GetInputElement().id);
 },
 ReplaceAssociatedIdInLabels: function(oldId, newId) {
  var labels = document.getElementsByTagName("LABEL");
  for(var i = 0; i < labels.length; i++) {
   if(labels[i].attributes["for"] && labels[i].attributes["for"].value == oldId)
    labels[i].attributes["for"].value = newId;
  }
 },
 GetFormattedText: function() {
  var value = this.GetValue();
  if(this.IsNull(value) && this.nullText != "")
   return this.GetText();
  return this.GetDecoratedText(value);
 },
 IsNull: function(value) {
  return value == null || value === "";
 },
 PopulateStyleDecorationPostfixes: function() {
  ASPxClientEdit.prototype.PopulateStyleDecorationPostfixes.call(this);
  this.styleDecoration.AddPostfix(ASPx.TEInputSuffix);
  if(this.GetInputElement().type === "password" && this.nullText !== "")
   this.styleDecoration.AddPostfix(ASPx.TEInputSuffix + passwordInputClonedSuffix);
 },
 GetValue: function() {
  var value = null;
  if(this.maskInfo != null)
   value = this.maskInfo.GetValue();
  else if(this.HasTextDecorators())
   value = this.GetRawValue();
  else {
   var input = this.GetInputElement();
   value = input ? input.value : null;
  }
  return (value == "" && this.convertEmptyStringToNull) ? null : value;
 },
 SetValue: function(value) {
  if(value == null || value === undefined) 
   value = "";
  if(this.maskInfo != null) {
   this.maskInfo.SetValue(value.toString());
   this.ApplyMaskInfo(false);
   this.SavePrevMaskValue();
  } 
  else if(this.HasTextDecorators()) {
   this.SetRawValue(value);
   this.GetInputElement().value = this.CanApplyTextDecorators() && this.GetInputElement().type != "password" ? this.GetDecoratedText(value) : value;
  }
  else
   this.GetInputElement().value = value;
  this.UpdateStyleDecorations(); 
  this.SaveChangedValue();   
 },
 SetVisible: function(visible) {
  ASPxClientEdit.prototype.SetVisible.call(this, visible);
  if(this.helpTextDisplayMode === ASPxClientTextEditHelpTextDisplayMode.Inline) {
   if(visible)
    this.showHelpText();
   else
    this.hideHelpText();
  }
 },
 UnstretchInputElement: function(){
  var inputElement = this.GetInputElement();
  var mainElement = this.GetMainElement();
  var mainElementCurStyle = ASPx.GetCurrentStyle(mainElement);
  if(ASPx.IsExistsElement(mainElement) && ASPx.IsExistsElement(inputElement) && ASPx.IsExists(mainElementCurStyle) && 
   inputElement.style.width == "100%" &&
   (mainElementCurStyle.width == "" || mainElementCurStyle.width == "auto"))
   inputElement.style.width = "";
 },
 RestoreActiveElement: function(activeElement) {
  if(activeElement && activeElement.setActive && activeElement.tagName != "IFRAME")
   activeElement.setActive();
 },
 RaiseValueChangedEvent: function() {
  var processOnServer = ASPxClientEdit.prototype.RaiseValueChangedEvent.call(this);
  processOnServer = this.RaiseTextChanged(processOnServer);
  return processOnServer;
 },
 InitMask: function() {
  var rawValue = this.GetRawValue();
  this.SetValue(rawValue.length ? this.DecodeRawInputValue(rawValue) : this.maskInfo.GetValue());
  this.validationPatterns.unshift(new MaskValidationPattern(this.maskInfo.errorText, this.maskInfo));
 },
 SetMaskPasteTimer: function() {
  this.ClearMaskPasteTimer();
  this.maskPasteTimerID = ASPx.Timer.SetControlBoundInterval(this.MaskPasteTimerProc, this, ASPx.PasteCheckInterval);
 },
 ClearMaskPasteTimer: function() {
  this.maskPasteTimerID = ASPx.Timer.ClearInterval(this.maskPasteTimerID);
 },
 SavePrevMaskValue: function() {
  this.maskValueBeforeUserInput = this.maskInfo.GetValue();
 },
 FillMaskInfo: function() {
  var input = this.GetInputElement();
  if(!input) return; 
  var sel = ASPx.Selection.GetInfo(input);
  this.maskInfo.SetCaret(sel.startPos, sel.endPos - sel.startPos);  
 },
 ApplyMaskInfo: function(applyCaret) {
  this.SyncRawValue();
  var input = this.GetInputElement();
  var text = this.GetMaskDisplayText();
  this.maskTextBeforePaste = text;
  if(input.value != text)
   input.value = text;
  if(applyCaret)
   ASPx.Selection.Set(input, this.maskInfo.caretPos, this.maskInfo.caretPos + this.maskInfo.selectionLength);
 },
 GetMaskDisplayText: function() {
  if(!this.focused && this.HasTextDecorators())
   return this.GetDecoratedText(this.maskInfo.GetValue());
  return this.maskInfo.GetText();
 },
 ShouldCancelMaskKeyProcessing: function(htmlEvent, keyDownInfo) {
  return ASPx.Evt.IsEventPrevented(htmlEvent);
 }, 
 HandleMaskKeyDown: function(evt) {
  var keyInfo = ASPx.MaskManager.CreateKeyInfoByEvent(evt);
  ASPx.MaskManager.keyCancelled = this.ShouldCancelMaskKeyProcessing(evt, keyInfo);
  if(ASPx.MaskManager.keyCancelled) {
   ASPx.Evt.PreventEvent(evt);
   return;
  }
  this.maskPasteLock = true;
  this.FillMaskInfo();  
  var canHandle = ASPx.MaskManager.CanHandleControlKey(keyInfo);   
  ASPx.MaskManager.savedKeyDownKeyInfo = keyInfo;
  if(canHandle) {   
   ASPx.MaskManager.OnKeyDown(this.maskInfo, keyInfo);
   this.ApplyMaskInfo(true);
   ASPx.Evt.PreventEvent(evt);
  }
  ASPx.MaskManager.keyDownHandled = canHandle;
  this.maskPasteLock = false;
  this.UpdateMaskHintHtml();
 },
 HandleMaskKeyPress: function(evt) {
  var keyInfo = ASPx.MaskManager.CreateKeyInfoByEvent(evt);
  ASPx.MaskManager.keyCancelled = ASPx.MaskManager.keyCancelled || this.ShouldCancelMaskKeyProcessing(evt, ASPx.MaskManager.savedKeyDownKeyInfo);
  if(ASPx.MaskManager.keyCancelled) {
   ASPx.Evt.PreventEvent(evt);
   return;
  }
  this.maskPasteLock = true;  
  var printable = ASPx.MaskManager.savedKeyDownKeyInfo != null && ASPx.MaskManager.IsPrintableKeyCode(ASPx.MaskManager.savedKeyDownKeyInfo);
  if(printable) {
   ASPx.MaskManager.OnKeyPress(this.maskInfo, keyInfo);
   this.ApplyMaskInfo(true);
  }
  if(printable || ASPx.MaskManager.keyDownHandled)   
   ASPx.Evt.PreventEvent(evt); 
  this.maskPasteLock = false;
  this.UpdateMaskHintHtml();
 },
 MaskPasteTimerProc: function() {
  if(this.maskPasteLock || !this.maskInfo) return;
  this.maskPasteCounter++;
  var inputElement = this.inputElement;
  if(!inputElement || this.maskPasteCounter > 40) {
   this.maskPasteCounter = 0;
   inputElement = this.GetInputElement();
   if(!ASPx.IsExistsElement(inputElement)) {
    this.ClearMaskPasteTimer();
    return;
   }
  }
  if(this.maskTextBeforePaste !== inputElement.value)
   this.ProcessInputValueChangedOnTimer();
  if(!this.focused)
   this.ClearMaskPasteTimer();
 },
 ProcessInputValueChangedOnTimer: function() {
  var inputElement = this.inputElement;
  var selectionInfo = ASPx.Selection.GetInfo(inputElement);
  var startCaretPosition = selectionInfo.startPos;
  var endCaretPosition = selectionInfo.endPos;
  var oldText = this.maskTextBeforePaste;
  var newText = inputElement.value;
  var isAndroidBackSpacePressed = this.isAndroidBackSpacePressed(oldText, newText, startCaretPosition, endCaretPosition);
  var isLastTypedCharacter = newText.indexOf(oldText) == 0 && newText.length > oldText.length;
  if(isAndroidBackSpacePressed || isLastTypedCharacter) {
   this.SetText(newText);
   this.SetCaretPosition(endCaretPosition);
   this.maskValueChangedByPassKeyPressOnAndroid = true;
  } else {
   this.maskInfo.ProcessPaste(newText, endCaretPosition);
   this.ApplyMaskInfo(true);
  }
 },
 isAndroidBackSpacePressed: function(oldText, newText, startCaretPosition, endCaretPosition) {
  if(!ASPx.Browser.AndroidMobilePlatform || startCaretPosition !== endCaretPosition || newText.length >= oldText.length)
   return false;
  var startSubstring = newText.substring(0, startCaretPosition);
  var endSubstring = newText.substring(startCaretPosition);
  var isStartSubstringMatches = oldText.indexOf(startSubstring) == 0;
  var isEndSubstringMatches = endSubstring == "" || oldText.lastIndexOf(endSubstring) == oldText.length - endSubstring.length;
  return isStartSubstringMatches && isEndSubstringMatches;
 },
 BeginShowMaskHint: function() {
  if(!this.GetReadOnly() && this.maskHintTimerID == -1)
   this.maskHintTimerID = window.setInterval(ASPx.MaskHintTimerProc, 500);
 },
 EndShowMaskHint: function() {
  window.clearInterval(this.maskHintTimerID);
  this.maskHintTimerID = -1;
 },
 MaskHintTimerProc: function() {  
  if(this.maskInfo) {
   this.FillMaskInfo();
   this.UpdateMaskHintHtml();
  } else {
   this.EndShowMaskHint();
  }
 },
 UpdateMaskHintHtml: function() {  
  var hint =  this.GetMaskHintElement();
  if(!ASPx.IsExistsElement(hint))
   return;
  var html = ASPx.MaskManager.GetHintHtml(this.maskInfo);
  if(html == this.maskHintHtml)
   return;
  if(html != "") {
   var mainElement = this.GetMainElement();
   if(ASPx.IsExistsElement(mainElement)) {
    hint.innerHTML = html;
    hint.style.position = "absolute";  
    hint.style.left = ASPx.PrepareClientPosForElement(ASPx.GetAbsoluteX(mainElement), mainElement, true) + "px";
    hint.style.top = (ASPx.PrepareClientPosForElement(ASPx.GetAbsoluteY(mainElement), mainElement, false) + mainElement.offsetHeight + 2) + "px";
    hint.style.display = "block";    
   }   
  } else {
   hint.style.display = "none";
  }
  this.maskHintHtml = html;
 },
 HideMaskHint: function() {
  var hint =  this.GetMaskHintElement();
  if(ASPx.IsExistsElement(hint))
   hint.style.display = "none";
  this.maskHintHtml = "";
 },
 GetMaskHintElement: function() {
  return ASPx.GetElementById(this.name + "_MaskHint");
 },
 OnLostFocus: function() {
  if(this.IsAutocompleteOffRequiredOnLostFocus())
   ASPx.Attr.SetAttribute(this.GetInputElement(), "autocomplete", "off");
  ASPxClientEdit.prototype.OnLostFocus.call(this);
 },
 OnMouseWheel: function(evt){
  if(this.GetReadOnly() || this.maskInfo == null || !this.maskInfo.allowMouseWheel)
   return;
  this.FillMaskInfo();
  ASPx.MaskManager.OnMouseWheel(this.maskInfo, ASPx.Evt.GetWheelDelta(evt) < 0 ? -1 : 1);
  this.ApplyMaskInfo(true);
  ASPx.Evt.PreventEvent(evt);
  this.UpdateMaskHintHtml();
 }, 
 OnBrowserWindowResize: function(e) {
  if(!this.autoResizeWithContainer)
   this.AdjustControl();
 },
 IsValueChanged: function() {
  return this.GetValue() != this.lastChangedValue; 
 },
 OnKeyDown: function(evt) {        
  if(this.NeedPreventBrowserUndoBehaviour(evt))
   return ASPx.Evt.PreventEvent(evt);
  if(this.RequireHandleMaxlenManually()) {
   this.onKeyDownInputValue = this.GetInputElement().value;
   var selectionInfo = ASPx.Selection.GetExtInfo(this.GetInputElement());
   this.onKeyDownCursorPos = selectionInfo.startPos;
  }
  this.escCount = 0;
  ASPxClientEdit.prototype.OnKeyDown.call(this, evt);
  if(!this.IsRaiseStandardOnChange(evt)) {
   if(!this.GetReadOnly() && this.maskInfo != null)
    this.HandleMaskKeyDown(evt);
  }
 },
 IsCtrlZ: function(evt) {
  return evt.ctrlKey && !evt.altKey && !evt.shiftKey && (ASPx.Evt.GetKeyCode(evt) == 122 || ASPx.Evt.GetKeyCode(evt) == 90);
 },
 NeedPreventBrowserUndoBehaviour: function(evt) {
  var inputElement = this.GetInputElement();
  return this.IsCtrlZ(evt) && !!inputElement && !inputElement.value;
 },
 OnKeyPress: function(evt) {
  ASPxClientEdit.prototype.OnKeyPress.call(this, evt);
  if(!this.GetReadOnly() && this.maskInfo != null && !this.IsRaiseStandardOnChange(evt))
   this.HandleMaskKeyPress(evt);
  if(this.NeedOnKeyEventEnd(evt, true))
   this.OnKeyEventEnd(evt);
 },
 OnKeyUp: function(evt) {
  if(ASPx.Browser.Firefox && !this.focused && ASPx.Evt.GetKeyCode(evt) === ASPx.Key.Tab)
   return;
  if(this.NeedOnKeyEventEnd(evt, false)) {
   var proccessNextCommingPress = ASPx.Evt.GetKeyCode(evt) === ASPx.Key.Alt; 
   this.OnKeyEventEnd(evt, proccessNextCommingPress);
  }
  if(this.RequireHandleMaxlenManually()) {
   var inputValueLength = this.GetInputElement().value.length;
   var maxLength = this.GetInputMaxLength();
   if(inputValueLength > maxLength && inputValueLength > this.onKeyDownInputValue.length) {
    this.GetInputElement().value = this.onKeyDownInputValue;
    this.SetCaretPosition(this.onKeyDownCursorPos);
   }
  }
  ASPxClientEdit.prototype.OnKeyUp.call(this, evt);
 },
 RequireHandleMaxlenManually: function() { 
  return ASPx.Browser.AndroidMobilePlatform && ASPx.Browser.SamsungAndroidDevice && ASPx.Browser.PlaformMajorVersion < 6 && this.GetInputMaxLength() !== -1;
 },
 GetInputMaxLength: function() {
  var input = this.GetInputElement();
  if(ASPx.Attr.IsExistsAttribute(input, "maxlength"))
   return input.maxLength;
  return -1;
 },
 NeedOnKeyEventEnd: function(evt, isKeyPress) { 
  var handleKeyPress = this.maskInfo != null && evt.keyCode == ASPx.Key.Enter;
  return handleKeyPress == isKeyPress;
 },
 OnKeyEventEnd: function(evt, withDelay){
  if(!this.GetReadOnly()) {
   if(this.IsRaiseStandardOnChange(evt))
    this.RaiseStandardOnChange();
   this.SyncRawValueIfHasTextDecorators(withDelay);
  }
 },
 SyncRawValueIfHasTextDecorators: function(withDelay) {
  if(this.HasTextDecorators()) {
   if(withDelay) {
    window.setTimeout(function() {
     this.SyncRawValue();
    }.aspxBind(this), 0);
   } else 
    this.SyncRawValue();
  }
 },
 IsRaiseStandardOnChange: function(evt){
  return !this.UseSpecialKeyboardHandling() && this.raiseValueChangedOnEnter && evt.keyCode == ASPx.Key.Enter;
 },
 GetFocusSelectAction: function() {
  if (this.maskInfo)
   return this.maskInfo.IsEmpty() ? null : "start";
  return "all"; 
 },
 CorrectFocusWhenDisabled: function() {
  if(!this.GetEnabled()) {
   var inputElement = this.GetInputElement();
   if(inputElement)
    inputElement.blur();
   return true;
  }
  return false;
 },
 EnsureShowPopupHelpText: function() {
  if(this.helpTextDisplayMode === ASPxClientTextEditHelpTextDisplayMode.Popup)
   this.showHelpText();
 },
 EnsureHidePopupHelpText: function() {
  if(this.helpTextDisplayMode === ASPxClientTextEditHelpTextDisplayMode.Popup)
   this.hideHelpText();
 },
 OnFocusCore: function() {
  if(this.maskInfo != null && !ASPx.GetControlCollection().InCallback()) {
   this.TrySetCursorToStartPosition();
   this.SetMaskPasteTimer();
  }
  if(this.IsAutocompleteDropDownListRequiredOnFocus())
   ASPx.Attr.RemoveAttribute(this.GetInputElement(), "autocomplete");
  if(this.CorrectFocusWhenDisabled())
   return;
  var wasLocked = this.IsFocusEventsLocked();
  ASPxClientEdit.prototype.OnFocusCore.call(this);
  if(this.maskInfo != null) {
   this.SavePrevMaskValue();
   this.BeginShowMaskHint();
  }
  if(!wasLocked) {
   this.ToggleTextDecoration();
   this.startUserInputEventTimerIfRequired();
  }
  if(this.isPasswordNullTextInputElementExists())
   setTimeout(function() { this.EnsureShowPopupHelpText(); }.aspxBind(this), 0);
  else
   this.EnsureShowPopupHelpText();
 },
 startUserInputEventTimerIfRequired: function () {
  if(this.shouldStartUserInputTimer() && this.userInputEventTimerID === -1) {
   this.prevInputValue = this.GetInputElement().value;
   this.userInputEventTimerID = ASPx.Timer.SetControlBoundInterval(this.processUserInputEventTimer, this, ASPx.CheckUserInputInterval);
  }
 },
 shouldStartUserInputTimer: function() {
  return !this.UserInput.IsEmpty();
 },
 restartCurrentUserInputTimer: function() {
  if(this.userInputEventTimerID !== -1) {
   this.processUserInputEventTimer(true);
   this.clearUserInputEventTimerIfRequired();
   this.startUserInputEventTimerIfRequired();
  }
 },
 clearUserInputEventTimerIfRequired: function () {
  if (this.userInputEventTimerID !== -1)
   this.userInputEventTimerID = ASPx.Timer.ClearInterval(this.userInputEventTimerID);
 },
 processUserInputEventTimer: function(onRestart) {
  var currentInputValue = this.GetInputElement().value;
  if(currentInputValue !== this.prevInputValue) {
   this.onInputChangedOnUserInputTimer(onRestart);
   this.prevInputValue = currentInputValue;
  }
 },
 onInputChangedOnUserInputTimer: function(onRestart) {
  if(this.raiseUserInputTimeout > -1)
   clearTimeout(this.raiseUserInputTimeout);
  this.raiseUserInputTimeout = setTimeout(function() {
   this.RaiseUserInput();
   this.raiseUserInputTimeout = -1;
  }.bind(this), 0);
 },
 ensureFocusedNullTextElement: function () {
  if(!this.focusedNullTextElement)
   this.createFocusedNullTextElement();
 },
 getFocusedNullTextElementClassName: function() {
  return focusedNullTextClassName;
 },
 getFocusedNullTextElementTagName: function() {
  return "INPUT";
 },
 getCopyFromInputElementStyles: function() {
  return [ "paddingLeft", "paddingTop", "paddingRight", "paddingBottom", "borderCollapse", "borderLeftWidth", "borderTopWidth", "borderRightWidth", "borderBottomWidth" ];
 },
 copyStylesFromInputElementToFocusedNullTextElement: function() {
  var input = this.GetInputElement();
  var inputStyle = ASPx.GetCurrentStyle(input);
  var stylesToCopy = this.getCopyFromInputElementStyles();
  for(var i = 0; i < stylesToCopy.length; i++)
   this.focusedNullTextElement.style[stylesToCopy[i]] = inputStyle[stylesToCopy[i]];
 },
 createFocusedNullTextElement: function() {
  this.focusedNullTextElement = document.createElement(this.getFocusedNullTextElementTagName());
  this.focusedNullTextElement.value = this.nullText;
  this.focusedNullTextElement.className = this.getFocusedNullTextElementClassName();
  this.focusedNullTextElement.tabIndex = -1;
  ASPx.SetElementDisplay(this.focusedNullTextElement, false);
  if(this.accessibilityCompliant) {
   ASPx.Attr.SetAttribute(this.focusedNullTextElement, "aria-label", this.nullText);
   ASPx.Attr.SetAttribute(this.focusedNullTextElement, "aria-hidden", true);
  }
  this.copyStylesFromInputElementToFocusedNullTextElement();
  if (this.nullTextOnFocusCssText) {
   var styleSheet = ASPx.GetCurrentStyleSheet();
   this.focusedNullTextElement.className += " " + ASPx.CreateImportantStyleRule(styleSheet, this.nullTextOnFocusCssText);
  }
  var inputElement = this.GetInputElement();
  inputElement.parentNode.insertBefore(this.focusedNullTextElement, inputElement.nextSibling);
 },
 ensureActivateFocusedNullTextMechanism: function() {
  if (this.nullTextDisplayMode === NullTextDisplayMode.UnfocusedAndFocused) {
   if(this.IsNull(this.GetValue()))
    this.changeFocusedNullTextElementVisibility(true);
   this.setFocusedNullTextTimer();
  }
 },
 ensureDeactivateFocusedNullTextMechanism: function () {
  if (this.nullTextDisplayMode === NullTextDisplayMode.UnfocusedAndFocused) {
   this.clearFocusedNullTextTimer();
   this.changeFocusedNullTextElementVisibility(false);
  }
 },
 setFocusedNullTextTimer: function () {
  if(this.focusedNullTextTimerID === -1)
   this.focusedNullTextTimerID = ASPx.Timer.SetControlBoundInterval(this.onFocusedNullTextVisibilityCheck, this, ASPx.PasteCheckInterval);
 },
 clearFocusedNullTextTimer: function () {
  this.focusedNullTextTimerID = ASPx.Timer.ClearInterval(this.focusedNullTextTimerID);
 },
 onFocusedNullTextVisibilityCheck: function (evt) {
  if(!this.needShowFocusedNullText() && this.isFocusedNullTextElementDisplayed())
   this.changeFocusedNullTextElementVisibility(false);
  else if(this.needShowFocusedNullText() && !this.isFocusedNullTextElementDisplayed())
   this.changeFocusedNullTextElementVisibility(true);
 },
 isFocusedNullTextElementDisplayed: function() {
  return this.focusedNullTextElement && ASPx.GetElementDisplay(this.focusedNullTextElement);
 },
 needShowFocusedNullText: function() {
  if(this.focusedNullTextTimerID === -1)
   return this.IsNull(this.GetValue());
  var result = this.GetInputElement().value === "";
  if(this.CanApplyNullTextDecoration)
   result = result && this.CanApplyNullTextDecoration();
  return result;
 }, 
 changeFocusedNullTextElementVisibility: function (visible) {
  this.ensureFocusedNullTextElement();
  ASPx.SetElementDisplay(this.focusedNullTextElement, visible);
  if(visible)
   this.adjustFocusedNullTextElement();  
 },
 getInputElementAbsoluteX: function(input) {
  var result = ASPx.GetAbsoluteX(input);
  if(ASPx.Browser.Opera || ASPx.Browser.AndroidMobilePlatform) 
   result++;
  return result;
 },
 getInputElementAbsoluteY: function (input) {
  var result = ASPx.GetAbsoluteY(input);
  if(ASPx.Browser.Opera || ASPx.Browser.AndroidMobilePlatform) 
   result++;
  return result;
 },
 adjustFocusedNullTextElement: function() {
  var input = this.GetInputElement();
  this.focusedNullTextElement.style.width = input.offsetWidth + "px";
  this.focusedNullTextElement.style.height = input.offsetHeight + "px";
  var inputXPos = this.getInputElementAbsoluteX(input);
  var inputYPos = this.getInputElementAbsoluteY(input);
  ASPx.SetAbsoluteX(this.focusedNullTextElement, inputXPos);
  ASPx.SetAbsoluteY(this.focusedNullTextElement, inputYPos);
  var shiftByX = inputXPos - ASPx.GetAbsoluteX(this.focusedNullTextElement);
  var shiftByY = inputYPos - ASPx.GetAbsoluteY(this.focusedNullTextElement);
  if (shiftByX !== 0)
   this.focusedNullTextElement.style.left = ASPx.PxToFloat(this.focusedNullTextElement.style.left) + shiftByX + "px";
  if (shiftByY !== 0)
   this.focusedNullTextElement.style.top = ASPx.PxToFloat(this.focusedNullTextElement.style.top) + shiftByY + "px";
 },
 ensureAdjustFocusedNullTextElement: function () {
  if(this.isFocusedNullTextElementDisplayed())
   this.adjustFocusedNullTextElement(this.focusedNullTextElement);
 },
 TrySetCursorToStartPosition: function() {
  var input = this.GetInputElement();
  var sel = ASPx.Selection.GetInfo(input);
  if (sel.startPos === sel.endPos && this.IsMaskInfoEmpty()) {
   var pos = this.maskInfo.GetFirstNonLiteralPosition();
   var setCaret = ASPx.Selection.SetCaretPosition.bind(this, input, pos);
   setTimeout(function() {
    if (document.activeElement === input) {
     setCaret();
     setTimeout(setCaret, 50);
    }
   }, 0);
  }
 },
 IsMaskInfoEmpty: function() {
  return this.maskInfo.IsEmpty();
 },
 OnLostFocusCore: function() {
  var wasLocked = this.IsFocusEventsLocked();
  ASPxClientEdit.prototype.OnLostFocusCore.call(this);
  if(this.maskInfo != null) {
   this.EndShowMaskHint();
   this.HideMaskHint();   
   if(this.maskInfo.ApplyFixes(null))
    this.ApplyMaskInfo(false);
   this.RaiseStandardOnChange();
  }
  if(!wasLocked) {
   this.clearUserInputEventTimerIfRequired();
   this.ToggleTextDecoration();
  }
  this.escCount = 0;
  this.EnsureHidePopupHelpText();
 },
 SetFocus: function() {
  if(this.isPasswordNullTextInputElementExists()) {
   this.GetPasswordNullTextInputElement().focus();
  } else {
     ASPxClientEdit.prototype.SetFocus.call(this);
  }
 },
 OnValueChanged: function() {
  if(this.maskInfo != null) {
   if(!this.maskValueChangedByPassKeyPressOnAndroid && this.maskInfo.GetValue() == this.maskValueBeforeUserInput && !this.IsValueChangeForced())
    return;
   if(this.maskValueChangedByPassKeyPressOnAndroid)
    this.maskValueChangedByPassKeyPressOnAndroid = false;
   this.SavePrevMaskValue();
  }
  if(this.HasTextDecorators())
   this.SyncRawValue();
  if(!this.IsValueChanged() && !this.IsValueChangeForced())
   return;
  this.SaveChangedValue(); 
  ASPxClientEdit.prototype.OnValueChanged.call(this);
 },
 IsValueChangeForced: function() {
  return false;
 },
 OnTextChanged: function() {
 },
 ForceTextChanged: function() {
  this.OnTextChanged();
 },
 SaveChangedValue: function() {
  this.lastChangedValue = this.GetValue();
 },
 RaiseStandardOnChange: function(){
  var element = this.GetInputElement();
  if(element && element.onchange) {
   element.onchange({ target: this.GetInputElement() });
  }
  else if(this.ValueChanged) {
   this.ValueChanged.FireEvent(this);
  }
 },
 RaiseTextChanged: function(processOnServer){
  if(!this.TextChanged.IsEmpty()){
   var args = new ASPxClientProcessingModeEventArgs(processOnServer);
   this.TextChanged.FireEvent(this, args);
   processOnServer = args.processOnServer;
  }
  return processOnServer;  
 },
 RaiseUserInput: function () {
  if(!this.UserInput.IsEmpty()) {
   var args = new ASPxClientEventArgs();
   this.UserInput.FireEvent(this, args);
  }
 },
 GetText: function(){
  if(this.maskInfo != null) {
   return this.maskInfo.GetText();
  } else {
   var value = this.GetValue();
   return value != null ? value : "";
  }
 },
 SetText: function (value){
  if(this.maskInfo != null) {
   this.maskInfo.SetText(value);
   this.ApplyMaskInfo(false);
   this.SavePrevMaskValue();
  } else {
   this.SetValue(value);
  }
 },
 SelectAll: function() {
  this.SetSelection(0, -1, false);
 },
 SetCaretPosition: function(pos) {
  var inputElement = this.GetInputElement();
  ASPx.Selection.SetCaretPosition(inputElement, pos);
 },
 GetCaretPosition: function() {
  var inputElement = this.GetInputElement();
  return ASPx.Selection.GetCaretPosition(inputElement);
 },
 SetSelection: function(startPos, endPos, scrollToSelection) { 
  var inputElement = this.GetInputElement();
  ASPx.Selection.Set(inputElement, startPos, endPos, scrollToSelection, true);
 },
 ChangeEnabledAttributes: function(enabled){
  var inputElement = this.GetInputElement();
  if(inputElement){
   this.ChangeInputEnabledAttributes(inputElement, ASPx.Attr.ChangeAttributesMethod(enabled), enabled);
   this.ChangeSpecialInputEnabledAttributes(inputElement, ASPx.Attr.ChangeEventsMethod(enabled), true);
   this.ChangeInputEnabled(inputElement, enabled, this.GetReadOnly());
   if(this.isPasswordNullTextInputElementExists())
    this.GetPasswordNullTextInputElement().disabled = inputElement.disabled;
  }
 },
 SetReadOnlyInternal: function(readOnly) {
  ASPxClientEdit.prototype.SetReadOnlyInternal.call(this, readOnly);
  this.ChangeInputReadOnly(readOnly);
 },
 ChangeReadOnlyStateItems: function(readOnly) {
  ASPxClientEdit.prototype.ChangeReadOnlyStateItems.call(this, readOnly);
  ASPx.GetStateController().SetElementReadOnly(this.GetInputElement(), readOnly);
  if(this.isPasswordNullTextInputElementExists())
   ASPx.GetStateController().SetElementReadOnly(this.GetPasswordNullTextInputElement(), readOnly);
 },
 ChangeInputReadOnly: function(readOnly) {
  var inputElement = this.GetInputElement();
  if(inputElement)
   inputElement.readOnly = readOnly || !this.GetEnabled() && this.UseReadOnlyForDisabled();
 },
 ChangeEnabledStateItems: function(enabled){
  if(!this.isNative) {
   var sc = ASPx.GetStateController();
   sc.SetElementEnabled(this.GetMainElement(), enabled);
   sc.SetElementEnabled(this.GetInputElement(), enabled);
   if(this.isPasswordNullTextInputElementExists())
    sc.SetElementEnabled(this.GetPasswordNullTextInputElement(), enabled);
  }
 },
 ChangeInputEnabled: function(element, enabled, readOnly) {
  if(this.UseReadOnlyForDisabled())
   element.readOnly = !enabled || readOnly;
  else
   element.disabled = !enabled;
 },
 ChangeInputEnabledAttributes: function(element, method, enabled) {
  method(element, "tabIndex");
  if(!enabled) element.tabIndex = -1;
  method(element, "onclick");
  method(element, "onkeydown");
  method(element, "onkeypress");
  method(element, "onkeyup");
 },
 UseReadOnlyForDisabled: function() {
  return false;
 },
 OnPostFinalization: function(args) {
  this.TryRestoreDisabledOnPost(args);
  this.TryClearInputTextDecorationOnPost(args);
 },
 TryRestoreDisabledOnPost: function(args) { 
  if(this.GetEnabled() || !this.UseReadOnlyForDisabled() || args.isDXCallback)
   return;
  var inputElement = this.GetInputElement();
  if(inputElement) {
   var inputDisabled = inputElement.disabled;
   inputElement.disabled = true;
   window.setTimeout(function() {
    inputElement.disabled = inputDisabled;
   }, 0);
  }
 },
 GetTempHiddenInputID: function() {
  return this.name + ASPx.TempHiddenInputSuffix;
 },
 TryClearInputTextDecorationOnPost: function(args) {
  if(ASPx.Platform === "NETCORE")
   return;
  if(this.HasTextDecorators() && !ASPx.IsExists(this.GetValue())) {
   var inputElement = this.GetInputElement();
   if(inputElement) {
    var name = ASPx.Attr.GetAttribute(inputElement, "name");
    if(name)
     this.TryClearInputTextDecorationOnPostCore(inputElement, name);
   }
  }
 },
 TryClearInputTextDecorationOnPostCore: function(inputElement, name) {
  var hiddenInput = ASPx.CreateHiddenField(name, this.GetTempHiddenInputID(), inputElement.parentNode);
  ASPx.Attr.SetAttribute(inputElement, "data-name", name);
  ASPx.Attr.RemoveAttribute(inputElement, "name");
  setTimeout(function() {
   ASPx.Attr.SetAttribute(inputElement, "name", name);
   ASPx.Attr.RemoveAttribute(inputElement, "data-name");
   ASPx.RemoveElement(hiddenInput);
  }, 0);
 },
 OnUnload: function() {
  var input = this.GetInputElement();
  if(!input)
   return;
  if(this.IsAutocompleteOffNotRequiredOnUnload())
   ASPx.Attr.RemoveAttribute(input, "autocomplete");
  if(this.focusedNullTextElement)
   ASPx.RemoveElement(this.focusedNullTextElement);
 },
 IsVCardAttributeRequired: function() {
  return this.autoCompleteAttribute && this.autoCompleteAttribute.name !== "autocomplete";
 },
 IsAutocompleteDropDownListRequiredOnFocus: function() {
  return !this.autoCompleteAttribute || this.IsVCardAttributeRequired();
 },
 IsAutocompleteOffRequiredOnInitialize: function() {
  return !this.isNative && (this.autoCompleteAttribute && this.autoCompleteAttribute.name === "autocomplete" || ASPx.Browser.WebKitFamily);
 },
 IsAutocompleteOffRequiredOnLostFocus: function() {
  return !this.autoCompleteAttribute && this.IsNullTextVisible() && !this.IsVCardAttributeRequired();
 },
 IsAutocompleteOffNotRequiredOnUnload: function() {
  return !this.IsNullTextVisible() || this.IsVCardAttributeRequired() || (this.maskInfo != null && this.GetValue() == null);
 },
 IsNullTextVisible: function() {
  return this.nullText && !this.GetValue() && !this.GetText();
 },
 GetModifyEvent: function() {
  return this.UserInput;
 }
});
MaskValidationPattern = ASPx.CreateClass(ASPx.ValidationPattern, {
 constructor: function(errorText, maskInfo) {
  this.constructor.prototype.constructor.call(this, errorText);
  this.maskInfo = maskInfo;
 },
 EvaluateIsValid: function(value) {
  return this.maskInfo.IsValid();
 }
});
ASPx.Ident.IsASPxClientTextEdit = function(obj) {
 return !!obj.isASPxClientTextEdit;
};
var ASPxClientTextBoxBase = ASPx.CreateClass(ASPxClientTextEdit, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.sizingConfig.allowSetHeight = false;
  this.sizingConfig.adjustControl = true;
 }
});
var ASPxClientTextBox = ASPx.CreateClass(ASPxClientTextBoxBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.isASPxClientTextBox = true;
  this.isCaptchaTextBox = false;
 },
 NeedProcessUnload: function() {
  return ASPxClientTextBoxBase.prototype.NeedProcessUnload.call(this) && !this.isCaptchaTextBox;
 },
 IsValueRestoredByBrowser: function() {
  if(this.isCaptchaTextBox)
   return this.initializeInputValue !== "" && this.initializeInputValue !== this.nullText;
  return  ASPxClientTextBoxBase.prototype.IsValueRestoredByBrowser.call(this);
 },
 SynchronizeRestoredValue: function() {
  if(this.isCaptchaTextBox)
   this.SetText(null);
  else
   ASPxClientTextBoxBase.prototype.SynchronizeRestoredValue.call(this);
 },
});
ASPxClientTextBox.Cast = ASPxClientControl.Cast;
ASPx.Ident.IsASPxClientTextBox = function(obj) {
 return !!obj.isASPxClientTextBox;
};
var ASPxClientMemo = ASPx.CreateClass(ASPxClientTextEdit, { 
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);        
  this.isASPxClientMemo = true;
  this.raiseValueChangedOnEnter = false;
  this.maxLength = 0;
  this.pasteTimerID = -1;
  this.pasteTimerActivatorCount = 0;
 },
 Initialize: function() {
  ASPxClientTextEdit.prototype.Initialize.call(this);
  this.SaveChangedValue();
  this.maxLengthRestricted = this.maxLength > 0;
 },
 CutString: function() {
  var text = this.GetText();
  if(text.length > this.maxLength) {
   text = text.substring(0, this.maxLength);
   this.SetText(text);
  }
 },
 EventKeyCodeChangesTheInput: function(evt) {
  if(ASPx.IsPasteShortcut(evt))
   return true;
  else if(evt.ctrlKey)
   return false;
  var keyCode = ASPx.Evt.GetKeyCode(evt);
  var isSystemKey = ASPx.Key.Windows <= keyCode && keyCode <= ASPx.Key.ContextMenu;
  var isFKey = ASPx.Key.F1 <= keyCode && keyCode <= 127; 
  return ASPx.Key.Delete < keyCode && !isSystemKey && !isFKey || keyCode == ASPx.Key.Enter || keyCode == ASPx.Key.Space;
 },
 OnTextChangingCheck: function() {
  if(this.maxLengthRestricted)  
   this.CutString(); 
 },
 StartTextChangingTimer: function() {
  if(this.maxLengthRestricted) {
   if(this.pasteTimerActivatorCount == 0) 
    this.SetTextChangingTimer();
   this.pasteTimerActivatorCount ++;
  }
 },
 EndTextChangingTimer: function() {
  if(this.maxLengthRestricted) {
   this.pasteTimerActivatorCount --;
   if(this.pasteTimerActivatorCount == 0) 
    this.ClearTextChangingTimer();
  }
 },
 CollapseEditor: function() {
  if(!this.IsAdjustmentRequired()) return;
  var mainElement = this.GetMainElement();
  var inputElement = this.GetInputElement();
  if(!ASPx.IsExistsElement(mainElement) || !ASPx.IsExistsElement(inputElement))
   return;
  ASPxClientTextEdit.prototype.CollapseEditor.call(this);
  var mainElementCurStyle = ASPx.GetCurrentStyle(mainElement);
  if(this.heightCorrectionRequired && mainElement && inputElement) {
   if(mainElement.style.height == "100%" || mainElementCurStyle.height == "100%") {
    mainElement.style.height = "0";
    mainElement.wasCollapsed = true;
   }
   inputElement.style.height = "0";
  }
 },
 SetWidth: function(width) {
  ASPxClientTextEdit.prototype.SetWidth.call(this, width);
 },
 ClearErrorFrameElementsStyles: function() {
  var textarea = this.GetInputElement();
  if(!textarea)
   return;
  var scrollBarPosition = textarea.scrollTop;
  ASPxClientTextEdit.prototype.ClearErrorFrameElementsStyles.call(this);
  if(ASPx.Browser.Firefox)
   textarea.scrollTop = scrollBarPosition;
 },
 OnMouseOver: function() {
  this.StartTextChangingTimer();
 },  
 OnMouseOut: function() {
  this.EndTextChangingTimer();
 },
 OnFocusCore: function() {  
  this.StartTextChangingTimer();
  ASPxClientTextEdit.prototype.OnFocusCore.call(this);
 },
 OnLostFocus: function() {
  this.EndTextChangingTimer();
  ASPxClientTextEdit.prototype.OnLostFocus.call(this);
 },
 OnKeyDown: function(evt) { 
  if(this.NeedPreventBrowserUndoBehaviour(evt))
   return ASPx.Evt.PreventEvent(evt);
  if(this.maxLengthRestricted){
   var selection = ASPx.Selection.GetInfo(this.GetInputElement()); 
   var noCharToReplace = selection.startPos == selection.endPos;
   if(this.GetText().length >= this.maxLength && noCharToReplace && this.EventKeyCodeChangesTheInput(evt)) {
    return ASPx.Evt.PreventEvent(evt);
   }
  }
  ASPxClientEdit.prototype.OnKeyDown.call(this, evt);
 },
 SetTextChangingTimer: function() {
  this.pasteTimerID = ASPx.Timer.SetControlBoundInterval(this.OnTextChangingCheck, this, ASPx.PasteCheckInterval);
 },
 ClearTextChangingTimer: function() {
  this.pasteTimerID = ASPx.Timer.ClearInterval(this.pasteTimerID);
 },
 getFocusedNullTextElementTagName: function() {
  return "TEXTAREA";
 },
 getCopyFromInputElementStyles: function() {
  var result = ASPxClientTextEdit.prototype.getCopyFromInputElementStyles.call(this);
  result.push("resize");
  return result;
 }
});
ASPxClientMemo.Cast = ASPxClientControl.Cast;
ASPx.Ident.IsASPxClientMemo = function(obj) { return obj && !!obj.isASPxClientMemo; };
var CLEAR_BUTTON_INDEX = -100;
var HIDE_CONTENT_CSS_CLASS_NAME = "dxHideContent";
var setContentVisibility = function(clearButtonElement, value) {
 var action = value ? ASPx.RemoveClassNameFromElement : ASPx.AddClassNameToElement;
 action(clearButtonElement, HIDE_CONTENT_CSS_CLASS_NAME);
};
var CLEAR_BUTTON_DISPLAY_MODE = {
 AUTO: 'Auto',
 ALWAYS: 'Always',
 NEVER: 'Never',
 ON_HOVER: 'OnHover'
};
var AccessibilityFocusedButtonClassName = "dxAFB";
var ButtonEditButtonLeftSystemClassName = "dxeButtonLeft";
var ASPxClientButtonEditBase = ASPx.CreateClass(ASPxClientTextBoxBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);        
  this.allowUserInput = true;
  this.isValueChanging = false;
  this.allowMouseWheel = true;
  this.isMouseOver = false;
  this.buttonCount = 0;
  this.emptyValueMaskDisplayText = "";
  this.clearButtonDisplayMode = CLEAR_BUTTON_DISPLAY_MODE.AUTO;
  this.forceShowClearButtonAlways = false;
  this.recoverClearButtonVisibility = false;
  this.ButtonClick = new ASPxClientEvent();
 },
 Initialize: function() {
  ASPxClientTextBoxBase.prototype.Initialize.call(this);
  this.EnsureEmptyValueMaskDisplayText();
  if(this.HasClearButton())
   this.InitializeClearButton();
  this.InitAccessibilityCompliant();
 },
 InlineInitialize: function() {
  ASPxClientTextBoxBase.prototype.InlineInitialize.call(this);
  if(this.clearButtonDisplayMode === CLEAR_BUTTON_DISPLAY_MODE.AUTO) {
   this.clearButtonDisplayMode = this.IsClearButtonVisibleAuto() || this.forceShowClearButtonAlways ?
    CLEAR_BUTTON_DISPLAY_MODE.ALWAYS : CLEAR_BUTTON_DISPLAY_MODE.NEVER;
  }
  this.EnsureClearButtonVisibility();
 },
 InitializeClearButton: function() {
  if(this.clearButtonDisplayMode === CLEAR_BUTTON_DISPLAY_MODE.ON_HOVER) {
   ASPx.Evt.AttachMouseEnterToElement(this.GetHoverElementToShowClearButton(), this.OnMouseOver.aspxBind(this), this.OnMouseOut.aspxBind(this));
  }
 },
 GetHoverElementToShowClearButton: function() {
  return this.GetMainElement();
 },
 IsClearButtonVisibleAuto: function() {
  return ASPx.Browser.MobileUI;
 },
 SetEnabled: function(enabled) {
  ASPxClientTextBoxBase.prototype.SetEnabled.call(this, enabled);
  this.EnsureClearButtonVisibility();
 },
 EnsureEmptyValueMaskDisplayText: function() {
  if(this.maskInfo && this.HasClearButton()) {
   var savedText = this.maskInfo.GetText();
   this.maskInfo.SetText("");
   this.emptyValueMaskDisplayText = this.maskInfo.GetText();
   this.maskInfo.SetText(savedText);
  }
 },
 GetButton: function(number) {
  return this.GetChildElement("B" + number);
 },
 GetCustomButtonCollection: function() {
  var buttonElements = [];
  for(var i = 0; i < this.buttonCount; i++) {
   var button =  this.GetButton(i);
   if(!!button)
    buttonElements.push(button);
  }
  return buttonElements;
 },
 GetButtonCollection: function() {
  var buttonElements = [];
  var clearButton = this.GetClearButton();
  if(!!clearButton)
   buttonElements.push(clearButton);
  return buttonElements.concat(this.GetCustomButtonCollection());
 },
 GetAccessibilityAnchor: function(buttonElement) {
  var firstChild = buttonElement.firstElementChild;
  var isExistsAnchorElement = ASPx.Attr.GetAttribute(firstChild, "role") === "button";
  return isExistsAnchorElement ? firstChild : null;
 },
 GetButtonByAccessibilityAnchor: function(anchorElement) {
  return anchorElement.parentNode;
 },
 SetAccessibilityAnchorEnabled: function(buttonElement, enabled) {
  var anchorElement = this.GetAccessibilityAnchor(buttonElement);
  if(ASPx.IsExists(anchorElement))
   ASPx.Attr.SetOrRemoveAttribute(anchorElement, "tabindex", enabled ? "0" : "");
 },
 InitAccessibilityCompliant: function() {
  if(!this.accessibilityCompliant) return;
  var buttonElements = this.GetButtonCollection();
  var labelElements = ASPx.FindAssociatedLabelElements(this);
  for(var i = 0; i < buttonElements.length; i++) {
   this.InitAccessibilityAnchor(this.GetAccessibilityAnchor(buttonElements[i]), labelElements);
   ASPx.Evt.AttachEventToElement(buttonElements[i], "mousedown", this.Button_MouseDown.bind(this));
  }
 },
 InitAccessibilityAnchor: function(anchorElement, labelElements) {
  if(!ASPx.IsExists(anchorElement))
   return;
  for(var i = 0; i < labelElements.length; i++)
   this.ariaExplanatoryTextManager.SetOrRemoveText([anchorElement], labelElements[i], true, false, false);
  this.InitAccessibilityAnchorEvents(anchorElement);
 },
 InitAccessibilityAnchorEvents: function(anchorElement) {
  ASPx.Evt.AttachEventToElement(anchorElement, "keydown", function(evt) { this.OnButtonKeysHandling(evt); }.aspxBind(this));
  ASPx.Evt.AttachEventToElement(anchorElement, "keyup", function(evt) { this.OnButtonKeysHandling(evt); }.aspxBind(this));
  ASPx.Evt.AttachEventToElement(anchorElement, "focus", function(evt) { this.OnButtonGotFocus(evt); }.aspxBind(this));
  ASPx.Evt.AttachEventToElement(anchorElement, "blur", function(evt) { this.OnButtonLostFocus(evt); }.aspxBind(this));
 },
 EmulateButtonMouseEvent: function(sourceElement) {
  var buttonElement = this.GetButtonByAccessibilityAnchor(sourceElement);
  var mouseEvent = buttonElement.onclick || buttonElement.onmousedown || buttonElement.ontouchstart || buttonElement.onpointerdown;
  var emulateMouseEvtArgs = { button: 0, which: 1, srcElement: buttonElement, target: buttonElement };
  if(!!mouseEvent) {
   ASPx.Attr.SetAttribute(sourceElement, "aria-pressed", true);
   setTimeout(function() {
    mouseEvent(emulateMouseEvtArgs);
    ASPx.Attr.RemoveAttribute(sourceElement, "aria-pressed");
   }, 300);
  }
 },
 OnButtonKeysHandling: function(evt) {
  var isKeyUp = evt.type == "keyup";
  var keyCode = ASPx.Evt.GetKeyCode(evt);
  var sourceElement = ASPx.Evt.GetEventSource(evt);
  if((keyCode == ASPx.Key.Space && isKeyUp) || (keyCode == ASPx.Key.Enter && !isKeyUp))
   this.EmulateButtonMouseEvent(sourceElement);
  if(keyCode != ASPx.Key.Tab)
   ASPx.Evt.PreventEventAndBubble(evt);
  return false;
 },
 OnButtonGotFocus: function(evt) {
  this.UnlockFocusEvents();
  var editor = ASPx.GetControlCollection().Get(this.name);
  var sourceElement = ASPx.Evt.GetEventSource(evt);
  if(!!editor && !editor.CorrectAccessibilityButtonFocus(sourceElement)) {
   var buttonElement = editor.GetButtonByAccessibilityAnchor(sourceElement);
   ASPx.AddClassNameToElement(buttonElement, this.GetAccessibilityFocusedButtonClassName());
   ASPx.EGotFocus(editor.name);
  }
 },
 OnButtonLostFocus: function(evt) {
  var editor = ASPx.GetControlCollection().Get(this.name);
  var sourceElement = ASPx.Evt.GetEventSource(evt);
  if(!!editor) {
   var buttonElement = editor.GetButtonByAccessibilityAnchor(sourceElement);
   ASPx.RemoveClassNameFromElement(buttonElement, this.GetAccessibilityFocusedButtonClassName());
  }
  setTimeout(function() {
   if(!!editor && !editor.IsEditorElement(ASPx.GetActiveElement())) {
    ASPx.ELostFocus(editor.name);
   }
  }.aspxBind(this), 0);
 },
 Button_MouseDown: function(evt) {
  var editor = ASPx.GetControlCollection().Get(this.name);
  if(!!editor) {
   var sourceElement = ASPx.Evt.GetEventSource(evt);
   if(document.activeElement !== sourceElement)
    this.LockFocusEvents();
  }
 },
 ForceRefocusEditor: function(evt, isNativeFocus) {
  if(this.accessibilityCompliant) {
   var srcElement = ASPx.Evt.GetEventSource(evt);
   var customButtons = this.GetCustomButtonCollection();
   for(var i = 0; i < customButtons.length; i++)
    if(customButtons[i] == srcElement || ASPx.GetIsParent(customButtons[i], srcElement))
     return;
  }
  ASPxClientEdit.prototype.ForceRefocusEditor.call(this, evt, isNativeFocus);
  if(this.GetInputElement().type == "password") {
   window.setTimeout(function() { this.GetInputElement().focus(); }.bind(this), 0);
  }
 },
 CorrectAccessibilityButtonFocus: function(sourceElement) {
  if(ASPx.Attr.IsExistsAttribute(sourceElement, "tabindex"))
   return false;
  setTimeout(function() {
   var buttonElements = this.GetButtonCollection();
   for(var i = 0; i < buttonElements.length; i++)
    if(ASPx.GetIsParent(buttonElements[i], sourceElement))
     this.GetAccessibilityAnchor(buttonElements[i]).focus();
  }.aspxBind(this), 0);
  return true;
 },
 OnKeyDown: function(evt) { 
  if(this.NeedEnsureClearButtonVisibilityOnKeyDown()) {
   var hasClearButtonOnHover = this.HasClearButton() && this.clearButtonDisplayMode === CLEAR_BUTTON_DISPLAY_MODE.ON_HOVER;
   this.recoverClearButtonVisibility = hasClearButtonOnHover && ASPx.Evt.GetKeyCode(evt) == ASPx.Key.Tab && !evt.shiftKey;
  }
  if(this.accessibilityCompliant) {
   var hasVisibleFocusableButtonToTheRIGHT = this.GetButtonCollection().some(function(buttonElement) {
    return this.IsButtonVisible(buttonElement)
     && !ASPx.ElementHasCssClass(buttonElement, ButtonEditButtonLeftSystemClassName)
     && this.GetAccessibilityAnchor(buttonElement) !== null;
   }, this);
   var hasVisibleFocusableButtonToTheLEFT = this.GetButtonCollection().some(function(buttonElement) {
    return this.IsButtonVisible(buttonElement)
     && ASPx.ElementHasCssClass(buttonElement, ButtonEditButtonLeftSystemClassName)
     && this.GetAccessibilityAnchor(buttonElement) !== null;
   }, this);
   if((ASPx.Evt.GetKeyCode(evt) === ASPx.Key.Tab && !evt.shiftKey && hasVisibleFocusableButtonToTheRIGHT) ||
    (ASPx.Evt.GetKeyCode(evt) === ASPx.Key.Tab && evt.shiftKey && hasVisibleFocusableButtonToTheLEFT ))
    this.LockFocusEvents();
  }
  ASPxClientTextBoxBase.prototype.OnKeyDown.call(this, evt);
 },
 NeedEnsureClearButtonVisibilityOnKeyDown: function() {
  return this.accessibilityCompliant;
 },
 GetAccessibilityFocusedButtonClassName: function() {
  return AccessibilityFocusedButtonClassName;
 },
 SetButtonVisible: function(number, value) {
  var button = this.GetButton(number);
  if(!button)
   return;
  var isClearButton = number === CLEAR_BUTTON_INDEX;
  var visibilityModifier = isClearButton ? setContentVisibility : ASPx.SetElementDisplay;
  if(isClearButton && this.clearButtonDisplayMode === CLEAR_BUTTON_DISPLAY_MODE.ALWAYS && this.accessibilityCompliant && this.enabled)
   this.SetAccessibilityAnchorEnabled(button, value);
  visibilityModifier(button, value);
 },
 GetButtonVisible: function(number) {
  var button = this.GetButton(number);
  return this.IsButtonVisible(button);
 },
 IsButtonVisible: function(button) {
  var result = false;
  if(button) {
   if(this.IsClearButtonElement(button) && this.clearButtonDisplayMode === CLEAR_BUTTON_DISPLAY_MODE.ALWAYS)
    result = !ASPx.ElementHasCssClass(button, this.GetHideContentCssClassName());
   else
    result = ASPx.IsElementVisible(button);
  }
  return result;
 },
 GetHideContentCssClassName: function() {
  return HIDE_CONTENT_CSS_CLASS_NAME;
 },
 ProcessInternalButtonClick: function(buttonIndex) {
  return false;
 },
 OnButtonClick: function(number) {
  var processOnServer = this.RaiseButtonClick(number);
  if(!this.ProcessInternalButtonClick(number) && processOnServer)
   this.SendPostBack('BC:' + number);
 },
 GetLastSuccesfullValue: function() {
  return this.lastChangedValue;
 },
 OnClear: function() {
  this.startUserInputEventTimerIfRequired();
  this.ClearEditorValueAndForceOnChange();
  this.ForceRefocusEditor(null, true);
  window.setTimeout(this.EnsureClearButtonVisibility.aspxBind(this), 0);
 },
 ClearEditorValueAndForceOnChange: function() {
  if(this.GetReadOnly() || !this.GetButtonVisible(CLEAR_BUTTON_INDEX))
   return;
  var raiseOnChange = this.ClearEditorValueByClearButton();
  if(raiseOnChange)
   this.ForceStandardOnChange();
 },
 ClearEditorValueByClearButton: function() {
  var prevValue = this.GetLastSuccesfullValue();
  this.ClearEditorValueByClearButtonCore();
  return prevValue !== this.GetValue();
 },
 ClearEditorValueByClearButtonCore: function() {
  this.Clear();
  this.GetInputElement().value = '';
 },
 ForceStandardOnChange: function() {
  this.forceValueChanged = true;
  this.RaiseStandardOnChange();
  this.forceValueChanged = false;
 },
 IsValueChangeForced: function() {
  return this.forceValueChanged || ASPxClientTextBoxBase.prototype.IsValueChangeForced.call(this);
 },
 IsValueChanging: function() { return this.isValueChanging; },
 StartValueChanging: function() { this.isValueChanging = true; },
 EndValueChanging: function() { this.isValueChanging = false; },
 IsClearButtonElement: function(element) {
  return ASPx.GetIsParent(this.GetClearButton(), element);
 },
 OnFocusCore: function() {
  if(this.accessibilityCompliant) {
   if(this.focused) 
    this.UnlockFocusEvents();   
   else 
    ASPxClientTextBoxBase.prototype.OnFocusCore.call(this);
  }
  else
   ASPxClientTextBoxBase.prototype.OnFocusCore.call(this);
  this.EnsureClearButtonVisibility();
 },
 OnLostFocusCore: function() {
  ASPxClientTextBoxBase.prototype.OnLostFocusCore.call(this);
  this.EnsureClearButtonVisibility();
  this.recoverClearButtonVisibility = false;
 },
 GetClearButton: function() {
  return this.GetButton(CLEAR_BUTTON_INDEX);
 },
 HasClearButton: function() {
  return !!this.GetClearButton();
 },
 RequireShowClearButton: function() {
  return !this.IsClearButtonDisabled() && !this.IsClearButtonNotRequired() && this.RequireShowClearButtonInternal();
 },
 IsClearButtonDisabled: function() {
  return !this.clientEnabled || !this.HasClearButton() || this.clearButtonDisplayMode === CLEAR_BUTTON_DISPLAY_MODE.NEVER;
 },
 IsClearButtonNotRequired: function() {
  return !this.IsFocused() && !this.isMouseOver && this.clearButtonDisplayMode !== CLEAR_BUTTON_DISPLAY_MODE.ALWAYS && !this.recoverClearButtonVisibility;
 },
 RequireShowClearButtonInternal: function () {
  return this.IsFocused() && this.RequireShowClearButtonCore() || !this.IsNullState();
 },
 RequireShowClearButtonCore: function() {
  var inputText = this.GetInputElement().value;
  return inputText !== this.GetEmptyValueDisplayText();
 },
 IsFocused: function() {
  return this === ASPx.GetFocusedEditor();
 },
 IsNullState: function() {
  var value = this.GetValue();
  return this.IsNull(value) || value === this.GetEmptyValueDisplayText();
 },
 GetEmptyValueDisplayText: function() { 
  return this.maskInfo ? this.emptyValueMaskDisplayText : "";
 },
 EnsureClearButtonVisibility: function() {
  this.SetButtonVisible(CLEAR_BUTTON_INDEX, this.RequireShowClearButton());
 },
 OnMouseOver: function() {
  this.isMouseOver = true;
  this.EnsureClearButtonVisibility();
 },
 OnMouseOut: function() {
  this.isMouseOver = false;
  this.EnsureClearButtonVisibility();
 },
 OnKeyPress: function(evt) {
  if(this.allowUserInput)
   ASPxClientTextBoxBase.prototype.OnKeyPress.call(this, evt);
 },
 OnKeyEventEnd: function(evt, withDelay) {
  ASPxClientTextBoxBase.prototype.OnKeyEventEnd.call(this, evt, withDelay);
  this.EnsureClearButtonVisibility();
 },
 RaiseButtonClick: function(number){
  var processOnServer = this.autoPostBack || this.IsServerEventAssigned("ButtonClick");
  if(!this.ButtonClick.IsEmpty()){
   var args = new ASPxClientButtonEditClickEventArgs(processOnServer, number);
   this.ButtonClick.FireEvent(this, args);
   processOnServer = args.processOnServer;
  }
  return processOnServer;
 },
 ChangeEnabledAttributes: function(enabled){
  ASPxClientTextEdit.prototype.ChangeEnabledAttributes.call(this, enabled);
  for(var i = 0; i < this.buttonCount; i++){
   var element = this.GetButton(i);
   if(element)
    this.ChangeButtonEnabledAttributes(element, this.GetChangeButtonEnabledAttributesMethod(enabled));
  }
  if(this.accessibilityCompliant)
   this.ChangeAccessibilityButtonEnabledAttributes(enabled);
 },
 ChangeEnabledStateItems: function(enabled){
  ASPxClientTextEdit.prototype.ChangeEnabledStateItems.call(this, enabled);
  for(var i = 0; i < this.buttonCount; i++){
   var element = this.GetButton(i);
   if(element) 
    ASPx.GetStateController().SetElementEnabled(element, enabled);
  }
 },
 GetChangeButtonEnabledAttributesMethod: function(enabled) {
  return ASPx.Attr.ChangeAttributesMethod(enabled);
 },
 ChangeButtonEnabledAttributes: function(element, method){
  method(element, "onclick");
  method(element, "ondblclick");
  if(ASPx.Browser.Edge)
   method(element, "onmousedown");
  method(element, "on" + ASPx.TouchUIHelper.touchMouseDownEventName);
  method(element, "on" + ASPx.TouchUIHelper.touchMouseUpEventName);
 },
 ChangeInputEnabled: function(element, enabled, readOnly) {
  ASPxClientTextEdit.prototype.ChangeInputEnabled.call(this, element, enabled, readOnly || !this.allowUserInput);
 },
 ChangeAccessibilityButtonEnabledAttributes: function(enabled) {
  var buttonElements = this.GetButtonCollection();
  for(var i = 0; i < buttonElements.length; i++)
   this.SetAccessibilityAnchorEnabled(buttonElements[i], enabled);
 },
 SetValue: function(value) {
  ASPxClientTextEdit.prototype.SetValue.call(this, value);
  if(!this.IsFocused())
   this.EnsureClearButtonVisibility();
 },
 OnAssociatedLabelClick: function(focusableElement) {
  var isValidElement = focusableElement && ASPx.IsActionElement(focusableElement) && ASPx.GetIsParent(this.GetMainElement(), focusableElement) && ASPx.IsElementVisible(focusableElement);
  if(isValidElement)
   focusableElement.focus();
  else
   this.SetFocus();
 },
 onClearButtonClick: function() {
  var requireFocus = !ASPx.Browser.VirtualKeyboardSupported || ASPx.Browser.MSTouchUI;
  if(this.ownerListBox)
   this.ownerListBox.ForceLockFocusEvents();
  if((requireFocus && !this.IsFocused()) || this.accessibilityCompliant)
   this.GetInputElement().focus();
  if(this.IsFocused() || !requireFocus) {
   if(this.ownerListBox)
    this.ownerListBox.UnlockFocusEvents();
   else if(this.accessibilityCompliant)
    this.UnlockFocusEvents();
   this.OnClear();
  }
  else
   window.setTimeout(this.onClearButtonClick.bind(this), 100);
 }
});
var ASPxClientButtonEdit = ASPx.CreateClass(ASPxClientButtonEditBase, {
});
ASPxClientButtonEdit.Cast = ASPxClientControl.Cast;
var ASPxClientButtonEditClickEventArgs = ASPx.CreateClass(ASPxClientProcessingModeEventArgs, {
 constructor: function(processOnServer, buttonIndex){
  this.constructor.prototype.constructor.call(this, processOnServer);
  this.buttonIndex = buttonIndex;
 }
});
var ASPxClientTextEditHelpTextHAlign = {
 Left: "Left",
 Right: "Right",
 Center: "Center"
};
var ASPxClientTextEditHelpTextVAlign = {
 Top: "Top",
 Bottom: "Bottom",
 Middle: "Middle"
};
var ASPxClientTextEditHelpTextDisplayMode = {
 Inline: "Inline",
 Popup: "Popup"
};
var ASPxClientTextEditHelpTextConsts = {
 VERTICAL_ORIENTATION_CLASS_NAME: "dxeVHelpTextSys",
 HORIZONTAL_ORIENTATION_CLASS_NAME: "dxeHHelpTextSys"
};
var ASPxClientTextEditHelpText = ASPx.CreateClass(null, {
 constructor: function (editor, helpTextStyle, helpText, position, hAlign, vAlign, margins, animationEnabled, helpTextDisplayMode) {
  this.hAlign = hAlign;
  this.vAlign = vAlign;
  this.animationEnabled = animationEnabled;
  this.displayMode = helpTextDisplayMode;
  this.editor = editor;
  this.editorMainElement = editor.GetMainElement();
  this.margins = margins ? { Top: margins[0], Right: margins[1], Bottom: margins[2], Left: margins[3] } : null;
  this.defaultMargins = { Top: 10, Right: 10, Bottom: 10, Left: 10 };
  this.position = position;
  this.helpTextElement = this.createHelpTextElement();
  this.setHelpTextZIndex(true);
  this.prepareHelpTextElement(helpTextStyle, helpText);
 },
 getRows: function (table) {
  return ASPx.GetChildNodesByTagName(table, "TR");
 },
 getCells: function (row) {
  return ASPx.GetChildNodesByTagName(row, "TD");
 },
 getCellByIndex: function(row, cellIndex) {
  return this.getCells(row)[cellIndex];
 },
 getCellIndex: function(row, cell) {
  var cells = this.getCells(row);
  for(var i = 0; i < cells.length; i++) {
   if(cells[i] === cell)
    return i;
  }
 },
 isHorizontal: function(position) {
  return position === ASPx.Position.Left || position === ASPx.Position.Right;
 },
 isVertical: function (position) {
  return position === ASPx.Position.Top || position === ASPx.Position.Bottom;
 },
 createEmptyCell: function(assignClassName) {
  var cell = document.createElement("TD");
  if(assignClassName)
   cell.className = "dxeFakeEmptyCell";
  return cell;
 },
 addHelpTextCellToExternalTableWithTwoCells: function (captionCell, errorCell, helpTextCell, errorTableBody, tableRows) {
  var captionPosition = this.editor.captionPosition;
  var errorCellPosition = this.editor.errorCellPosition;
  var helpTextRow = this.isVertical(this.position) ? document.createElement("TR") : null;
  if(captionPosition === ASPx.Position.Left && this.position === ASPx.Position.Left && this.isHorizontal(errorCellPosition))
   captionCell.parentNode.insertBefore(helpTextCell, captionCell.nextSibling);
  if(captionPosition === ASPx.Position.Right && this.position === ASPx.Position.Right && this.isHorizontal(errorCellPosition))
   captionCell.parentNode.insertBefore(helpTextCell, captionCell);
  if(captionPosition === ASPx.Position.Left && this.position === ASPx.Position.Right && this.isHorizontal(errorCellPosition))
   tableRows[0].appendChild(helpTextCell);
  if(captionPosition === ASPx.Position.Right && this.position === ASPx.Position.Left && this.isHorizontal(errorCellPosition))
   tableRows[0].insertBefore(helpTextCell, tableRows[0].childNodes[0]);
  if(captionPosition === ASPx.Position.Top && this.position === ASPx.Position.Bottom && this.isVertical(errorCellPosition)) {
   helpTextRow.appendChild(helpTextCell);
   errorTableBody.appendChild(helpTextRow);
  }
  if(captionPosition === ASPx.Position.Bottom && this.position === ASPx.Position.Top && this.isVertical(errorCellPosition)) {
   helpTextRow.appendChild(helpTextCell);
   errorTableBody.insertBefore(helpTextRow, errorTableBody.childNodes[0]);
  }
  if(captionPosition === ASPx.Position.Top && this.position === ASPx.Position.Top && this.isVertical(errorCellPosition)) {
   helpTextRow.appendChild(helpTextCell);
   errorTableBody.insertBefore(helpTextRow, captionCell.parentNode.nextSibling);
  }
  if(captionPosition === ASPx.Position.Bottom && this.position === ASPx.Position.Bottom && this.isVertical(errorCellPosition)) {
   helpTextRow.appendChild(helpTextCell);
   errorTableBody.insertBefore(helpTextRow, captionCell.parentNode);
  }
  if(captionPosition === ASPx.Position.Right && this.position === ASPx.Position.Top && this.isVertical(errorCellPosition)) {
   helpTextRow.appendChild(helpTextCell);
   helpTextRow.appendChild(this.createEmptyCell());
   errorTableBody.insertBefore(helpTextRow, errorTableBody.childNodes[0]);
  }
  if(this.position === ASPx.Position.Bottom) {
   if(captionPosition === ASPx.Position.Right && errorCellPosition === ASPx.Position.Top || captionPosition === ASPx.Position.Top && errorCellPosition === ASPx.Position.Right) {
    helpTextRow.appendChild(helpTextCell);
    helpTextRow.appendChild(this.createEmptyCell());
    errorTableBody.appendChild(helpTextRow);
   }
  }
  if(captionPosition === ASPx.Position.Left && this.position === ASPx.Position.Top && this.isVertical(errorCellPosition)) {
   helpTextRow.appendChild(this.createEmptyCell());
   helpTextRow.appendChild(helpTextCell);
   errorTableBody.insertBefore(helpTextRow, errorTableBody.childNodes[0]);
  }
  if(captionPosition === ASPx.Position.Left && this.position === ASPx.Position.Bottom && this.isVertical(errorCellPosition)) {
   helpTextRow.appendChild(this.createEmptyCell());
   helpTextRow.appendChild(helpTextCell);
   errorTableBody.appendChild(helpTextRow);
  }
  if(this.position === ASPx.Position.Right) {
   if(captionPosition === ASPx.Position.Top && errorCellPosition === ASPx.Position.Left || captionPosition === ASPx.Position.Left && errorCellPosition === ASPx.Position.Top
    || captionPosition === ASPx.Position.Top && errorCellPosition === ASPx.Position.Right) {
    tableRows[1].appendChild(helpTextCell);
    tableRows[0].appendChild(this.createEmptyCell());
   }
   if(captionPosition === ASPx.Position.Left && errorCellPosition === ASPx.Position.Bottom || captionPosition === ASPx.Position.Bottom && errorCellPosition === ASPx.Position.Left) {
    tableRows[0].appendChild(helpTextCell);
    tableRows[1].appendChild(this.createEmptyCell());
   }
  }
  if(this.position === ASPx.Position.Left) {
   if(captionPosition === ASPx.Position.Right && errorCellPosition === ASPx.Position.Top || captionPosition === ASPx.Position.Top && errorCellPosition === ASPx.Position.Right
    || captionPosition === ASPx.Position.Top && errorCellPosition === ASPx.Position.Left) {
    tableRows[1].insertBefore(helpTextCell, tableRows[1].childNodes[0]);
    tableRows[0].insertBefore(this.createEmptyCell(), tableRows[0].childNodes[0]);
   }
   if(captionPosition === ASPx.Position.Bottom && errorCellPosition === ASPx.Position.Top || captionPosition === ASPx.Position.Top && errorCellPosition === ASPx.Position.Bottom) {
    tableRows[1].insertBefore(helpTextCell, tableRows[1].childNodes[0]);
    tableRows[0].insertBefore(this.createEmptyCell(errorCellPosition === ASPx.Position.Top), tableRows[0].childNodes[0]);
    tableRows[2].insertBefore(this.createEmptyCell(errorCellPosition !== ASPx.Position.Top), tableRows[2].childNodes[0]);
   }
   if(captionPosition === ASPx.Position.Top && errorCellPosition === ASPx.Position.Top) {
    tableRows[2].insertBefore(helpTextCell, tableRows[2].childNodes[0]);
    tableRows[0].insertBefore(this.createEmptyCell(false), tableRows[0].childNodes[0]);
    tableRows[1].insertBefore(this.createEmptyCell(true), tableRows[1].childNodes[0]);
   }
   if(captionPosition === ASPx.Position.Bottom && errorCellPosition === ASPx.Position.Bottom) {
    tableRows[0].insertBefore(helpTextCell, tableRows[0].childNodes[0]);
    tableRows[1].insertBefore(this.createEmptyCell(true), tableRows[1].childNodes[0]);
    tableRows[2].insertBefore(this.createEmptyCell(false), tableRows[2].childNodes[0]);
   }
   if(captionPosition === ASPx.Position.Bottom && errorCellPosition === ASPx.Position.Left || captionPosition === ASPx.Position.Right && errorCellPosition === ASPx.Position.Bottom
    || captionPosition === ASPx.Position.Bottom && errorCellPosition === ASPx.Position.Right) {
    tableRows[0].insertBefore(helpTextCell, tableRows[0].childNodes[0]);
    tableRows[1].insertBefore(this.createEmptyCell(), tableRows[1].childNodes[0]);
   }
   if(captionPosition === ASPx.Position.Left && this.isVertical(errorCellPosition)) {
    captionCell.parentNode.insertBefore(helpTextCell, captionCell.nextSibling);
    var emptyCellParentRow = errorCellPosition === ASPx.Position.Top ? tableRows[0] : tableRows[1];
    var helpTextCellIndex = this.getCellIndex(helpTextCell.parentNode, helpTextCell);
    emptyCellParentRow.insertBefore(this.createEmptyCell(), this.getCellByIndex(emptyCellParentRow, helpTextCellIndex));
   }
  }
  if(this.position === ASPx.Position.Right) {
   if(captionPosition === ASPx.Position.Bottom && errorCellPosition === ASPx.Position.Top || captionPosition === ASPx.Position.Top && errorCellPosition === ASPx.Position.Bottom) {
    tableRows[1].appendChild(helpTextCell);
    tableRows[0].appendChild(this.createEmptyCell(errorCellPosition === ASPx.Position.Top));
    tableRows[2].appendChild(this.createEmptyCell(errorCellPosition !== ASPx.Position.Top));
   }
   if(captionPosition === ASPx.Position.Top && errorCellPosition === ASPx.Position.Top) {
    tableRows[2].appendChild(helpTextCell);
    tableRows[0].appendChild(this.createEmptyCell(false));
    tableRows[1].appendChild(this.createEmptyCell(true));
   }
   if(captionPosition === ASPx.Position.Bottom && errorCellPosition === ASPx.Position.Bottom) {
    tableRows[0].appendChild(helpTextCell);
    tableRows[1].appendChild(this.createEmptyCell(true));
    tableRows[2].appendChild(this.createEmptyCell(false));
   }
   if(captionPosition === ASPx.Position.Bottom && errorCellPosition === ASPx.Position.Right) {
    tableRows[0].appendChild(helpTextCell);
    tableRows[1].appendChild(this.createEmptyCell());
   }
   if(captionPosition === ASPx.Position.Right && this.isVertical(errorCellPosition)) {
    captionCell.parentNode.insertBefore(helpTextCell, captionCell);
    var emptyCellParentRow = errorCellPosition === ASPx.Position.Top ? tableRows[0] : tableRows[1];
    var helpTextCellIndex = this.getCellIndex(helpTextCell.parentNode, helpTextCell);
    emptyCellParentRow.insertBefore(this.createEmptyCell(), this.getCellByIndex(emptyCellParentRow, helpTextCellIndex));
   }
  }
  if(captionPosition === ASPx.Position.Top && this.position === ASPx.Position.Top && this.isHorizontal(errorCellPosition)) {
   if(errorCellPosition === ASPx.Position.Left) {
    helpTextRow.appendChild(this.createEmptyCell(true));
    helpTextRow.appendChild(helpTextCell);
   }
   else {
    helpTextRow.appendChild(helpTextCell);
    helpTextRow.appendChild(this.createEmptyCell());
   }
   errorTableBody.insertBefore(helpTextRow, captionCell.parentNode.nextSibling);
  }
  if(captionPosition === ASPx.Position.Bottom && this.position === ASPx.Position.Top && this.isHorizontal(errorCellPosition)) {
   if(errorCellPosition === ASPx.Position.Left) {
    helpTextRow.appendChild(this.createEmptyCell(true));
    helpTextRow.appendChild(helpTextCell);
   }
   else {
    helpTextRow.appendChild(helpTextCell);
    helpTextRow.appendChild(this.createEmptyCell());
   }
   errorTableBody.insertBefore(helpTextRow, errorTableBody.childNodes[0]);
  }
  if(captionPosition === ASPx.Position.Bottom && this.position === ASPx.Position.Bottom && this.isHorizontal(errorCellPosition)) {
   if(errorCellPosition === ASPx.Position.Left) {
    helpTextRow.appendChild(this.createEmptyCell(true));
    helpTextRow.appendChild(helpTextCell);
   }
   else {
    helpTextRow.appendChild(helpTextCell);
    helpTextRow.appendChild(this.createEmptyCell());
   }
   errorTableBody.insertBefore(helpTextRow, captionCell.parentNode);
  }
  if(captionPosition === ASPx.Position.Top && this.position === ASPx.Position.Bottom && errorCellPosition === ASPx.Position.Left) {
   helpTextRow.appendChild(this.createEmptyCell(true));
   helpTextRow.appendChild(helpTextCell);
   errorTableBody.appendChild(helpTextRow);
  }
  if(captionPosition === ASPx.Position.Right && this.position === ASPx.Position.Bottom && errorCellPosition === ASPx.Position.Bottom) {
   helpTextRow.appendChild(helpTextCell);
   helpTextRow.appendChild(this.createEmptyCell());
   errorTableBody.appendChild(helpTextRow);
  }
  if(this.position === ASPx.Position.Bottom) {
   if(captionPosition === ASPx.Position.Left && errorCellPosition === ASPx.Position.Right || captionPosition === ASPx.Position.Right && errorCellPosition === ASPx.Position.Left) {
    helpTextRow.appendChild(this.createEmptyCell(errorCellPosition !== ASPx.Position.Right));
    helpTextRow.appendChild(helpTextCell);
    helpTextRow.appendChild(this.createEmptyCell(errorCellPosition === ASPx.Position.Right));
    errorTableBody.appendChild(helpTextRow);
   }
   if(captionPosition === ASPx.Position.Left && errorCellPosition === ASPx.Position.Left) {
    helpTextRow.appendChild(this.createEmptyCell(false));
    helpTextRow.appendChild(this.createEmptyCell(true));
    helpTextRow.appendChild(helpTextCell);
    errorTableBody.appendChild(helpTextRow);
   }
   if(captionPosition === ASPx.Position.Right && errorCellPosition === ASPx.Position.Right) {
    helpTextRow.appendChild(helpTextCell);
    helpTextRow.appendChild(this.createEmptyCell(true));
    helpTextRow.appendChild(this.createEmptyCell(false));
    errorTableBody.appendChild(helpTextRow);
   }   
  }
  if(this.position === ASPx.Position.Top) {
   if(captionPosition === ASPx.Position.Left && errorCellPosition === ASPx.Position.Right || captionPosition === ASPx.Position.Right && errorCellPosition === ASPx.Position.Left) {
    helpTextRow.appendChild(this.createEmptyCell(errorCellPosition !== ASPx.Position.Right));
    helpTextRow.appendChild(helpTextCell);
    helpTextRow.appendChild(this.createEmptyCell(errorCellPosition === ASPx.Position.Right));
    errorTableBody.insertBefore(helpTextRow, errorTableBody.childNodes[0]);
   }
   if(captionPosition === ASPx.Position.Left && errorCellPosition === ASPx.Position.Left) {
    helpTextRow.appendChild(this.createEmptyCell(false));
    helpTextRow.appendChild(this.createEmptyCell(true));
    helpTextRow.appendChild(helpTextCell);
    errorTableBody.insertBefore(helpTextRow, errorTableBody.childNodes[0]);
   }
   if(captionPosition === ASPx.Position.Right && errorCellPosition === ASPx.Position.Right) {
    helpTextRow.appendChild(helpTextCell);
    helpTextRow.appendChild(this.createEmptyCell(true));
    helpTextRow.appendChild(this.createEmptyCell(false));
    errorTableBody.insertBefore(helpTextRow, errorTableBody.childNodes[0]);
   }
  }
 },
 addHelpTextCellToExternalTableWithErrorCell: function (errorCell, helpTextCell, errorTableBody, tableRows) {
  var errorCellPosition = this.editor.errorCellPosition;
  var helpTextRow = document.createElement("TR");
  if(this.position === ASPx.Position.Left && this.isHorizontal(errorCellPosition))
   tableRows[0].insertBefore(helpTextCell, tableRows[0].childNodes[0]);
  if(this.position === ASPx.Position.Right && this.isHorizontal(errorCellPosition))
   tableRows[0].appendChild(helpTextCell);
  if(this.position === ASPx.Position.Top && this.isVertical(errorCellPosition)) {
   helpTextRow.appendChild(helpTextCell);
   errorTableBody.insertBefore(helpTextRow, errorTableBody.childNodes[0]);
  }
  if(this.position === ASPx.Position.Bottom && this.isVertical(errorCellPosition)) {
   helpTextRow.appendChild(helpTextCell);
   errorTableBody.appendChild(helpTextRow);
  }
  if(errorCellPosition === ASPx.Position.Left && this.isVertical(this.position)) {
   helpTextRow.appendChild(this.createEmptyCell(true));
   helpTextRow.appendChild(helpTextCell);
   if(this.position === ASPx.Position.Top)
    errorTableBody.insertBefore(helpTextRow, errorTableBody.childNodes[0]);
   else
    errorTableBody.appendChild(helpTextRow);
  }
  if(errorCellPosition === ASPx.Position.Right && this.isVertical(this.position)) {
   helpTextRow.appendChild(helpTextCell);
   helpTextRow.appendChild(this.createEmptyCell(true));
   if(this.position === ASPx.Position.Top)
    errorTableBody.insertBefore(helpTextRow, errorTableBody.childNodes[0]);
   else
    errorTableBody.appendChild(helpTextRow);
  }
  if(this.position === ASPx.Position.Left && this.isVertical(errorCellPosition)) {
   var helpTextParentRowIndex = errorCellPosition === ASPx.Position.Top ? 1 : 0;
   var emptyCellRowIndex = helpTextParentRowIndex === 0 ? 1 : 0;
   tableRows[helpTextParentRowIndex].insertBefore(helpTextCell, tableRows[helpTextParentRowIndex].childNodes[0]);
   tableRows[emptyCellRowIndex].insertBefore(this.createEmptyCell(true), tableRows[emptyCellRowIndex].childNodes[0]);
  }
  if(this.position === ASPx.Position.Right && this.isVertical(errorCellPosition)) {
   var helpTextParentRowIndex = errorCellPosition === ASPx.Position.Top ? 1 : 0;
   var emptyCellRowIndex = helpTextParentRowIndex === 0 ? 1 : 0;
   tableRows[helpTextParentRowIndex].appendChild(helpTextCell);
   tableRows[emptyCellRowIndex].appendChild(this.createEmptyCell(true));
  }
 },
 addHelpTextCellToExternalTableWithCaption: function (captionCell, helpTextCell, errorTableBody, tableRows) {
  var captionPosition = this.editor.captionPosition;
  var helpTextRow = document.createElement("TR");
  if(captionPosition === ASPx.Position.Left && this.isVertical(this.position)) {
   helpTextRow.appendChild(this.createEmptyCell());
   helpTextRow.appendChild(helpTextCell);
   if(this.position === ASPx.Position.Top)
    errorTableBody.insertBefore(helpTextRow, errorTableBody.childNodes[0]);
   else
    errorTableBody.appendChild(helpTextRow);
  }
  if(this.position === ASPx.Position.Left && this.isVertical(captionPosition)) {
   var helpTextParentRowIndex = captionPosition === ASPx.Position.Top ? 1 : 0;
   var emptyCellParentRowIndex = helpTextParentRowIndex === 0 ? 1 : 0;
   tableRows[helpTextParentRowIndex].insertBefore(helpTextCell, tableRows[helpTextParentRowIndex].childNodes[0]);
   tableRows[emptyCellParentRowIndex].insertBefore(this.createEmptyCell(), tableRows[emptyCellParentRowIndex].childNodes[0]);
  }
  if(this.position === ASPx.Position.Right && this.isVertical(captionPosition)) {
   var helpTextParentRowIndex = captionPosition === ASPx.Position.Top ? 1 : 0;
   var emptyCellParentRowIndex = helpTextParentRowIndex === 0 ? 1 : 0;
   tableRows[helpTextParentRowIndex].appendChild(helpTextCell);
   tableRows[emptyCellParentRowIndex].appendChild(this.createEmptyCell());
  }
  if(captionPosition === ASPx.Position.Right && this.isVertical(this.position)) {
   helpTextRow.appendChild(helpTextCell);
   helpTextRow.appendChild(this.createEmptyCell());
   if(this.position === ASPx.Position.Top)
    errorTableBody.insertBefore(helpTextRow, errorTableBody.childNodes[0]);
   else
    errorTableBody.appendChild(helpTextRow);
  }
  if(this.isVertical(captionPosition) && this.isVertical(this.position)) {
   helpTextRow.appendChild(helpTextCell);
   if(captionPosition === ASPx.Position.Top && this.position === ASPx.Position.Top)
    errorTableBody.insertBefore(helpTextRow, captionCell.parentNode.nextSibling);
   if(captionPosition === ASPx.Position.Top && this.position === ASPx.Position.Bottom)
    errorTableBody.appendChild(helpTextRow);
   if(captionPosition === ASPx.Position.Bottom && this.position === ASPx.Position.Top)
    errorTableBody.insertBefore(helpTextRow, errorTableBody.childNodes[0]);
   if(captionPosition === ASPx.Position.Bottom && this.position === ASPx.Position.Bottom)
    errorTableBody.insertBefore(helpTextRow, captionCell.parentNode);
  }
  if(captionPosition === ASPx.Position.Left && this.position === ASPx.Position.Left)
   captionCell.parentNode.insertBefore(helpTextCell, captionCell.nextSibling);
  if(captionPosition === ASPx.Position.Right && this.position === ASPx.Position.Right)
   captionCell.parentNode.insertBefore(helpTextCell, captionCell);
  if(captionPosition === ASPx.Position.Left && this.position === ASPx.Position.Right)
   tableRows[0].appendChild(helpTextCell);
  if(captionPosition === ASPx.Position.Right && this.position === ASPx.Position.Left)
   tableRows[0].insertBefore(helpTextCell, tableRows[0].childNodes[0]);
 },
 addHelpTextCellToExternalTableWithEditorOnly: function (helpTextCell, errorTableBody, tableRows) {
  if(this.isHorizontal(this.position)) {
   if(this.position === ASPx.Position.Left)
    tableRows[0].insertBefore(helpTextCell, tableRows[0].childNodes[0]);
   else
    tableRows[0].appendChild(helpTextCell);
  }
  else {
   var helpTextRow = document.createElement("TR");
   helpTextRow.appendChild(helpTextCell);
   if(this.position === ASPx.Position.Top)
    errorTableBody.insertBefore(helpTextRow, errorTableBody.childNodes[0]);
   else
    errorTableBody.appendChild(helpTextRow);
  }
 },
 addHelpTextCellToExternalTable: function (errorTable, helpTextCell) {
  var errorTableBody = ASPx.GetNodeByTagName(errorTable, "TBODY", 0);
  var tableRows = this.getRows(errorTableBody);
  var captionCell = this.editor.GetCaptionCell();
  var errorCell = this.editor.GetErrorCell();
  if(captionCell) {
   if(errorCell)
    this.addHelpTextCellToExternalTableWithTwoCells(captionCell, errorCell, helpTextCell, errorTableBody, tableRows);
   else
    this.addHelpTextCellToExternalTableWithCaption(captionCell, helpTextCell, errorTableBody, tableRows);
  }
  else if(errorCell)
   this.addHelpTextCellToExternalTableWithErrorCell(errorCell, helpTextCell, errorTableBody, tableRows);
  else
   this.addHelpTextCellToExternalTableWithEditorOnly(helpTextCell, errorTableBody, tableRows);
 },
 createExternalTable: function () {
  var externalTable = document.createElement("TABLE");
  externalTable.id = this.editor.name + ASPx.EditElementSuffix.ExternalTable;
  externalTable.cellPadding = 0;
  externalTable.cellSpacing = 0;
  this.applyExternalTableStyle(externalTable);
  var editorWidth = this.editorMainElement.style.width;
  if(ASPx.IsPercentageSize(editorWidth)) {
   externalTable.style.width = editorWidth;
   this.editorMainElement.style.width = "100%";
   this.editor.width = "100%";
  }
  var externalTableBody = document.createElement("TBODY");
  var externalTableRow = document.createElement("TR");
  var externalTableCell = document.createElement("TD");
  externalTable.appendChild(externalTableBody);
  externalTableBody.appendChild(externalTableRow);
  externalTableRow.appendChild(externalTableCell);
  this.editorMainElement.parentNode.appendChild(externalTable);
  ASPx.ChangeElementContainer(this.editorMainElement, externalTableCell, true);
  if(this.editor.accessibilityCompliant)
   ASPx.Attr.SetAttribute(externalTable, "role", "presentation");
  return externalTable;
 },
 applyExternalTableStyle: function (externalTable) {
  var externalTableStyle = this.editor.externalTableStyle;
  if(externalTableStyle.length > 0) {
   this.applyStyleToElement(externalTable, externalTableStyle);
  }
 },
 applyStyleToElement: function(element, style) {
  element.className = style[0];
  if(style[1]) {
   var styleSheet = ASPx.GetCurrentStyleSheet();
   element.className += " " + ASPx.CreateImportantStyleRule(styleSheet, style[1]);
  }
 },
 createInlineHelpTextElement: function () {
  var helpTextElement = document.createElement("TD");
  var externalTable = this.editor.GetExternalTable();
  if(!externalTable)
   externalTable = this.createExternalTable();
  this.addHelpTextCellToExternalTable(externalTable, helpTextElement);
  return helpTextElement;
 },
 createPopupHelpTextElement: function () {
  var helpTextElement = document.createElement("DIV");
  ASPx.InsertElementAfter(helpTextElement, this.editor.GetMainElement());
  ASPx.AnimationHelper.setOpacity(helpTextElement, 0);
  ASPx.SetElementDisplay(helpTextElement, false);
  return helpTextElement;
 },
 createHelpTextElement: function () {
  return this.displayMode === ASPxClientTextEditHelpTextDisplayMode.Popup ?
   this.createPopupHelpTextElement() : this.createInlineHelpTextElement();
 },
 prepareHelpTextElement: function (helpTextStyle, helpText) {
  this.helpTextElement.id = this.getHelpTextElementId();
  this.applyStyleToElement(this.helpTextElement, helpTextStyle);
  ASPx.SetInnerHtml(this.helpTextElement, "<SPAN>" + helpText + "</SPAN>");
  if(this.displayMode === ASPxClientTextEditHelpTextDisplayMode.Popup)
   this.updatePopupHelpTextPosition();
  else {
   var isVerticalOrientation = this.position === ASPx.Position.Top || this.position === ASPx.Position.Bottom;
   var orientationClassName = isVerticalOrientation ? ASPxClientTextEditHelpTextConsts.VERTICAL_ORIENTATION_CLASS_NAME :
    ASPxClientTextEditHelpTextConsts.HORIZONTAL_ORIENTATION_CLASS_NAME;
   this.helpTextElement.className += " " + orientationClassName;
   this.setInlineHelpTextElementAlign();
   ASPx.SetElementDisplay(this.helpTextElement, this.editor.clientVisible);
  }
 },
 getHelpTextElementId: function() {
  return this.editor.name + ASPx.TEHelpTextElementSuffix;
 },
 setInlineHelpTextElementAlign: function() {
  var hAlignValue = "", vAlignValue = "";
  switch(this.hAlign) {
   case ASPxClientTextEditHelpTextHAlign.Left: hAlignValue = "left"; break;
   case ASPxClientTextEditHelpTextHAlign.Right: hAlignValue = "right"; break;
   case ASPxClientTextEditHelpTextHAlign.Center: hAlignValue = "center"; break;
  }
  switch(this.vAlign) {
   case ASPxClientTextEditHelpTextVAlign.Top: vAlignValue = "top"; break;
   case ASPxClientTextEditHelpTextVAlign.Bottom: vAlignValue = "bottom"; break;
   case ASPxClientTextEditHelpTextVAlign.Middle: vAlignValue = "middle"; break;
  }
  this.helpTextElement.style.textAlign = hAlignValue;
  this.helpTextElement.style.verticalAlign = vAlignValue;
 },
 getHelpTextMargins: function() {
  if(this.margins)
   return this.margins;
  var result = this.defaultMargins;
  if(this.position === ASPx.Position.Top || this.position === ASPx.Position.Bottom)
   result.Left = result.Right = 0;
  else
   result.Top = result.Bottom = 0;
  return result;
 },
 updatePopupHelpTextPosition: function (editorMainElement) {
  var editorWidth = this.editorMainElement.offsetWidth;
  var editorHeight = this.editorMainElement.offsetHeight;
  var helpTextWidth = this.helpTextElement.offsetWidth;
  var helpTextHeight = this.helpTextElement.offsetHeight;
  var editorX = ASPx.GetAbsoluteX(this.editorMainElement);
  var editorY = ASPx.GetAbsoluteY(this.editorMainElement);
  var helpTextX = 0, helpTextY = 0;
  var margins = this.getHelpTextMargins();
  if(this.position === ASPx.Position.Top || this.position === ASPx.Position.Bottom) {
   if(this.position === ASPx.Position.Top)
    helpTextY = editorY - margins.Bottom - helpTextHeight;
   else if(this.position === ASPx.Position.Bottom)
    helpTextY = editorY + editorHeight + margins.Top;
   if(this.hAlign === ASPxClientTextEditHelpTextHAlign.Left)
    helpTextX = editorX + margins.Left;
   else if(this.hAlign === ASPxClientTextEditHelpTextHAlign.Right)
    helpTextX = editorX + editorWidth - helpTextWidth - margins.Right;
   else if(this.hAlign === ASPxClientTextEditHelpTextHAlign.Center) {
    var editorCenterX = editorX + editorWidth / 2;
    var helpTextWidthWithMargins = helpTextWidth + margins.Left + margins.Right;
    helpTextX = editorCenterX - helpTextWidthWithMargins / 2 + margins.Left;
   }
  } else {
   if(this.position === ASPx.Position.Left)
    helpTextX = editorX - margins.Right - helpTextWidth;
   else if(this.position === ASPx.Position.Right)
    helpTextX = editorX + editorWidth + margins.Left;
   if(this.vAlign === ASPxClientTextEditHelpTextVAlign.Top)
    helpTextY = editorY + margins.Top;
   else if(this.vAlign === ASPxClientTextEditHelpTextVAlign.Bottom)
    helpTextY = editorY + editorHeight - helpTextHeight - margins.Bottom;
   else if(this.vAlign === ASPxClientTextEditHelpTextVAlign.Middle) {
    var editorCenterY = editorY + editorHeight / 2;
    var helpTextHeightWithMargins = helpTextHeight + margins.Top + margins.Bottom;
    helpTextY = editorCenterY - helpTextHeightWithMargins / 2 + margins.Top;
   }
  }
  helpTextX = helpTextX < 0 ? 0 : helpTextX;
  helpTextY = helpTextY < 0 ? 0 : helpTextY;
  ASPx.SetAbsoluteX(this.helpTextElement, helpTextX);
  ASPx.SetAbsoluteY(this.helpTextElement, helpTextY);
 },
 setHelpTextZIndex: function (hide) { 
  var newZIndex = 41998 * (hide ? -1 : 1);
  if(this.helpTextElement.style.zIndex != newZIndex)
   this.helpTextElement.style.zIndex = newZIndex;
 },
 hide: function () {
  if(this.displayMode === ASPxClientTextEditHelpTextDisplayMode.Inline) {
   ASPx.SetElementDisplay(this.helpTextElement, false);
  }
  else
   this.hidePopupHelpText();
 },
 hidePopupHelpText: function() {
  var onHidePopupHelpTextComplete = function () {
   this.setHelpTextZIndex(true);
   ASPx.SetElementDisplay(this.helpTextElement, false);
  }.aspxBind(this);
  if(this.animationEnabled)
   ASPx.AnimationHelper.fadeOut(this.helpTextElement, onHidePopupHelpTextComplete);
  else {
   ASPx.AnimationHelper.setOpacity(this.helpTextElement, 0);
   onHidePopupHelpTextComplete();
  }    
 },
 show: function () {
  if(this.displayMode === ASPxClientTextEditHelpTextDisplayMode.Inline) {
   ASPx.SetElementDisplay(this.helpTextElement, true);
  }
  else
   this.showPopupHelpText();
 },
 showPopupHelpText: function () {
  ASPx.SetElementDisplay(this.helpTextElement, true);
  this.updatePopupHelpTextPosition();
  if(this.animationEnabled)
   ASPx.AnimationHelper.fadeIn(this.helpTextElement);
  else
   ASPx.AnimationHelper.setOpacity(this.helpTextElement, 1);
  this.setHelpTextZIndex(false);
 }
});
var ASPxOutOfRangeWarningManager = ASPx.CreateClass(null, {
 constructor: function (editor, minValue, maxValue, defaultMinValue, defaultMaxValue, outOfRangeWarningElementPosition, valueFormatter) {
  this.editor = editor;
  this.outOfRangeWarningElementPosition = outOfRangeWarningElementPosition;
  this.minValue = minValue;
  this.maxValue = maxValue;
  this.defaultMinValue = defaultMinValue;
  this.defaultMaxValue = defaultMaxValue;
  this.minMaxValueFormatter = valueFormatter;
  this.animationDuration = 150;
  this.CreateOutOfRangeWarningElement();
 },
 SetMinValue: function (minValue) {
  this.minValue = minValue;
  this.UpdateOutOfRangeWarningElementText();
 },
 SetMaxValue: function (maxValue) {
  this.maxValue = maxValue;
  this.UpdateOutOfRangeWarningElementText();
 },
 CreateOutOfRangeWarningElement: function () {
  this.outOfRangeWarningElement = document.createElement("DIV");
  this.outOfRangeWarningElement.id = this.editor.name + "OutOfRWarn";
  ASPx.InsertElementAfter(this.outOfRangeWarningElement, this.editor.GetOutOfRangeWarningElementPrevSibling());
  ASPx.AnimationHelper.setOpacity(this.outOfRangeWarningElement, 0);
  this.outOfRangeWarningElement.className = this.editor.outOfRangeWarningClassName;
  this.UpdateOutOfRangeWarningElementText();
 },
 IsValueInRange: function (value) {
  return (!this.IsMinValueExists() || value >= this.minValue)
   && (!this.IsMaxValueExists() || value <= this.maxValue);
 },
 IsMinValueExists: function() {
  return ASPx.IsExists(this.minValue) && !isNaN(this.minValue) && this.minValue !== this.defaultMinValue;
 },
 IsMaxValueExists: function () {
  return ASPx.IsExists(this.maxValue) && !isNaN(this.maxValue) && this.maxValue !== this.defaultMaxValue;
 },
 GetFormattedTextByValue: function(value) {
  if (this.minMaxValueFormatter)
   return this.minMaxValueFormatter.Format(value);
  return value;
 },
 GetWarningText: function() {
  var textTemplate = arguments[0];
  var valueTexts = [];
  for (var i = 1; i < arguments.length; i++) {
   var valueText = this.GetFormattedTextByValue(arguments[i]);
   valueTexts.push(valueText);
  }
  return ASPx.Formatter.Format(textTemplate, valueTexts);
 },
 UpdateOutOfRangeWarningElementText: function () {
  var text = "";
  if (this.IsMinValueExists() && this.IsMaxValueExists())
   text = this.GetWarningText(this.editor.outOfRangeWarningMessages[0], this.minValue, this.maxValue);
  if (this.IsMinValueExists() && !this.IsMaxValueExists())
   text = this.GetWarningText(this.editor.outOfRangeWarningMessages[1], this.minValue);
  if (!this.IsMinValueExists() && this.IsMaxValueExists())
   text = this.GetWarningText(this.editor.outOfRangeWarningMessages[2], this.maxValue);
  ASPx.SetInnerHtml(this.outOfRangeWarningElement, "<LABEL>" + text + "</LABEL>");
 },
 UpdateOutOfRangeWarningElementVisibility: function (currentValue) {
  var isValidValue = currentValue == null || this.IsValueInRange(currentValue);
  if (!isValidValue && !this.outOfRangeWarningElementShown)
   this.ShowOutOfRangeWarningElement();
  if (isValidValue && this.outOfRangeWarningElementShown)
   this.HideOutOfRangeWarningElement();
 },
 GetOutOfRangeWarningElementCoordinates: function() {
  var editorMainElement = this.editor.GetMainElement();
  var editorWidth = editorMainElement.offsetWidth;
  var editorHeight = editorMainElement.offsetHeight;
  var editorX = ASPx.GetAbsoluteX(editorMainElement);
  var editorY = ASPx.GetAbsoluteY(editorMainElement);
  var outOfRangeWarningElementX = this.outOfRangeWarningElementPosition === ASPx.Position.Right ? editorX + editorWidth : editorX;
  var outOfRangeWarningElementY = this.outOfRangeWarningElementPosition === ASPx.Position.Right ? editorY : editorY + editorHeight;
  outOfRangeWarningElementX = outOfRangeWarningElementX < 0 ? 0 : outOfRangeWarningElementX;
  outOfRangeWarningElementY = outOfRangeWarningElementY < 0 ? 0 : outOfRangeWarningElementY;
  return {
   x: outOfRangeWarningElementX,
   y: outOfRangeWarningElementY
  };
 },
 ShowOutOfRangeWarningElement: function () {
  this.outOfRangeWarningElement.style.display = "inline";
  var outOfRangeWarningElementCoordinates = this.GetOutOfRangeWarningElementCoordinates();
  ASPx.SetAbsoluteX(this.outOfRangeWarningElement, outOfRangeWarningElementCoordinates.x);
  ASPx.SetAbsoluteY(this.outOfRangeWarningElement, outOfRangeWarningElementCoordinates.y);
  ASPx.AnimationHelper.fadeIn(this.outOfRangeWarningElement, null, this.animationDuration);
  this.ScrollToWarningElementIfRequired(outOfRangeWarningElementCoordinates);
  this.outOfRangeWarningElementShown = true;
 },
 HideOutOfRangeWarningElement: function () {
  ASPx.AnimationHelper.fadeOut(this.outOfRangeWarningElement, function () {
   ASPx.SetElementDisplay(this.outOfRangeWarningElement, false);
  }.aspxBind(this), this.animationDuration);
  this.outOfRangeWarningElementShown = false;
 },
 ScrollToWarningElementIfRequired: function (outOfRangeWarningElementCoordinates) {
  if(this.outOfRangeWarningElementPosition === ASPx.Position.Right) {
   var warnElementRightPos = outOfRangeWarningElementCoordinates.x
    + ASPx.PxToInt(ASPx.GetCurrentStyle(this.outOfRangeWarningElement).marginLeft)
    + this.outOfRangeWarningElement.offsetWidth;
   if(warnElementRightPos > ASPx.GetDocumentClientWidth() + ASPx.GetDocumentScrollLeft())
    ASPx.SetDocumentScrollLeft(warnElementRightPos - ASPx.GetDocumentClientWidth());
  }
  if(this.outOfRangeWarningElementPosition === ASPx.Position.Bottom) {
   var warnElementBottomPos = outOfRangeWarningElementCoordinates.y
    + ASPx.PxToInt(ASPx.GetCurrentStyle(this.outOfRangeWarningElement).marginTop)
    + this.outOfRangeWarningElement.offsetHeight;
   if(warnElementBottomPos > ASPx.GetDocumentClientHeight() + ASPx.GetDocumentScrollTop())
    ASPx.SetDocumentScrollTop(warnElementBottomPos - ASPx.GetDocumentClientHeight());
  }
 }
});
ASPx.MMMouseOut = function(name, evt) {
 var edit = ASPx.GetControlCollection().Get(name);
 if(edit != null) edit.OnMouseOut(evt);
};
ASPx.MMMouseOver = function(name, evt) {
 var edit = ASPx.GetControlCollection().Get(name);
 if(edit != null) edit.OnMouseOver(evt);
};
ASPx.MaskHintTimerProc = function() {
 var focusedEditor = ASPx.GetFocusedEditor();
 if(focusedEditor != null && ASPx.IsFunction(focusedEditor.MaskHintTimerProc))
  focusedEditor.MaskHintTimerProc();
};
ASPx.ETextChanged = function(name) {
 var edit = ASPx.GetControlCollection().Get(name);
 if(edit != null) edit.OnTextChanged(); 
};
ASPx.BEClick = function(name,number){
 var edit = ASPx.GetControlCollection().Get(name);
 if(edit != null) edit.OnButtonClick(number);
};
ASPx.BEClear = function(name, evt) {
 var edit = ASPx.GetControlCollection().Get(name);
 if(edit && (evt.button === 0 || ASPx.Browser.TouchUI))
  edit.onClearButtonClick();
};
ASPx.SetFocusToTextEditWithDelay = function(name) {
 window.setTimeout(function() {
  var edit = ASPx.GetControlCollection().Get(name);
  if(edit)
   edit.SetFocus();
 }, 500);
};
window.ASPxClientTextEdit = ASPxClientTextEdit;
window.ASPxClientTextBoxBase = ASPxClientTextBoxBase;
window.ASPxClientTextBox = ASPxClientTextBox;
window.ASPxClientMemo = ASPxClientMemo;
window.ASPxClientButtonEditBase = ASPxClientButtonEditBase;
window.ASPxClientButtonEdit = ASPxClientButtonEdit;
window.ASPxClientButtonEditClickEventArgs = ASPxClientButtonEditClickEventArgs;
})();

(function() {
var DateFormatter = ASPx.CreateClass(null, {
 constructor: function() {
  this.date = new Date(2000, 0, 1);
  this.mask = "";
  this.specifiers = {};     
  this.spPositions = [];    
  this.parserKeys = [];
  this.knownSpecifiers = ["d", "M", "y", "H", "h", "m", "s", "f", "F", "g", "t"];
  this.savedYear = -1;
  this.isYearParsed = false;
  this.parsedMonth = -1;
  this.replacers = {
   "d": this.ReplaceDay,
   "M": this.ReplaceMonth,
   "y": this.ReplaceYear,
   "H": this.ReplaceHours23,
   "h": this.ReplaceHours12,
   "m": this.ReplaceMinutes,
   "s": this.ReplaceSeconds,
   "F": this.ReplaceMsTrimmed,
   "f": this.ReplaceMs,
   "g": this.ReplaceEra,
   "t": this.ReplaceAmPm
  };
  this.parsers = {
   "d": this.ParseDay,
   "M": this.ParseMonth,
   "y": this.ParseYear,
   "H": this.ParseHours,
   "h": this.ParseHours,
   "m": this.ParseMinutes,
   "s": this.ParseSeconds,
   "F": this.ParseMs,
   "f": this.ParseMs,
   "g": this.ParseEra,
   "t": this.ParseAmPm
  };
 },
 Format: function(date) {
  this.date = date;
  var sp;
  var pos;
  var replacerKey;
  var result = this.mask;
  for(var i = 0; i < this.spPositions.length; i++) {
   pos = this.spPositions[i];
   sp = this.specifiers[pos];
   replacerKey = sp.substr(0, 1);
   if(this.replacers[replacerKey]) {
    result = result.substr(0, pos) + this.replacers[replacerKey].call(this, sp.length) + result.substr(pos + sp.length);
   }
  }
  return result;
 }, 
 Parse: function(str, rememberParserKeys, spPositionsParam, specifiersParam) {
  var spPositions = !!spPositionsParam ? spPositionsParam : this.spPositions;
  var specifiers = !!specifiersParam ? specifiersParam : this.specifiers;
  var now = new Date();  
  this.savedYear = now.getFullYear();
  this.isYearParsed = false;
  this.parsedMonth = -1;
  this.date = new Date(2000, 0, now.getDate());    
  this.strToParse = str;
  this.catchNumbers(str, specifiers);
  var parserKey;
  var sp;
  var pos;
  var parseResult;
  var error = false;
  this.hasAmPm = false;
  for(var i = 0; i < spPositions.length; i++) {
   pos = spPositions[i];
   sp = specifiers[pos];
   parserKey = sp.substr(0, 1);
   if(this.parsers[parserKey]) {
    if(rememberParserKeys)
     this.parserKeys.push(parserKey);
    parseResult = this.parsers[parserKey].call(this, sp.length);
    if(!parseResult) {
     error = true;
     break;
    }
   }
  }
  if(error)
   return false;
  if(this.hasAmPm) {
   if(!this.fixHours())
    return false;
  }
  if(!this.isYearParsed)
   this.date.setYear(this.savedYear);
  if(this.parsedMonth < 0)
   this.parsedMonth = now.getMonth();   
  this.ApplyMonth();
  return this.date;  
 },
 ParseAndMergeWithDate: function(str, sourceDate) {
  this.parserKeys = [];
  var date = this.Parse(str, true);
  if(date && sourceDate)
   date = new Date(
        this.HasYear() ? date.getFullYear() : sourceDate.getFullYear(),
        this.HasMonth() ? date.getMonth() : sourceDate.getMonth(),
        this.HasDay() ? date.getDate() : sourceDate.getDate(),
        this.HasHours() ? date.getHours() : sourceDate.getHours(),
        this.HasMinutes() ? date.getMinutes() : sourceDate.getMinutes(),
        this.HasSeconds() ? date.getSeconds() : sourceDate.getSeconds(),
        this.HasMilliseconds() ? date.getMilliseconds() : sourceDate.getMilliseconds()
        );
  this.parserKeys = [];
  return date;
 },
 HasYear: function() { return this.HasParserKey("y"); },
 HasMonth: function() { return this.HasParserKey("M"); },
 HasDay: function() { return this.HasParserKey("d"); },
 HasHours: function() { return this.HasParserKey("h") || this.HasParserKey("H"); },
 HasMinutes: function() { return this.HasParserKey("m"); },
 HasSeconds: function() { return this.HasParserKey("s"); },
 HasMilliseconds: function() { return this.HasParserKey("f") || this.HasParserKey("F"); },
 HasParserKey: function(key) { return ASPx.Data.ArrayIndexOf(this.parserKeys, key) !== -1; },
 ApplyMonth: function() {
  var trial;
  var day = this.date.getDate();
  while(true) {
   trial = new Date();
   trial.setTime(this.date.getTime());   
   trial.setMonth(this.parsedMonth);
   if(trial.getMonth() == this.parsedMonth)
    break;
   --day;
   this.date.setDate(day);
  }
  ASPx.DateUtils.FixTimezoneGap(this.date, trial);
  this.date = trial;
 },
 SetFormatString: function(mask) {
  var format = this.GetFormat(mask);
  this.specifiers = format.specifiers;
  this.spPositions = format.spPositions;
  this.mask = format.mask;
 },
 GetFormat: function(maskParam) {
  if(maskParam.length == 2 && maskParam.charAt(0) == "%")
   maskParam = maskParam.charAt(1);
  var stringContainsDateSeparator = maskParam && maskParam.indexOf(ASPx.CultureInfo.ds) !== -1;
  var subt = 0;
  var pos = 0;
  var startPos = 0;
  var ch;
  var prevCh = "";
  var skip = false;
  var backslash = false;
  var sp = "";
  var specifiers = {};
  var spPositions = [];
  var mask = "";
  while(true) {
   ch = maskParam.charAt(pos);
   if(ch == "") {
    if(sp.length > 0) {
     var specifier = this.GetSpecifier(startPos, sp, stringContainsDateSeparator, mask);
     spPositions.push(specifier.pos);
     specifiers[specifier.pos] = specifier.sp;
    }
    break;
   }
   if(ch == "\\" && !backslash) {
    backslash = true;
    subt++;
   } else {
    if(!backslash && (ch == "'" || ch == '"')) {
     skip = !skip;
     subt++;
    } else {     
     if(!skip) {
      if(ch == "/")
       ch = ASPx.CultureInfo.ds;
      else if(ch == ":")
       ch = ASPx.CultureInfo.ts;
      else if(this.IsKnownSpecifier(ch)) {
       if(prevCh.length == 0)
        prevCh = ch;
       if(ch == prevCh)
        sp += ch;
       else {
        if(sp.length > 0) {
         var specifier = this.GetSpecifier(startPos, sp, stringContainsDateSeparator, mask);
         spPositions.push(specifier.pos);
         specifiers[specifier.pos] = specifier.sp;
        }
        sp = ch;
        startPos = pos - subt;
       }
      }
     }     
     mask += ch;
    }      
    backslash = false;
   }            
   prevCh = ch;
   pos++;
  }
  spPositions.reverse();
  return { specifiers: specifiers, spPositions: spPositions, mask: mask };
 },
 GetSpecifier: function (pos, sp, stringContainsDateSeparator, mask) {
  if(ASPx.CultureInfo.ds.length > 1 && mask && !stringContainsDateSeparator) {
   var dateParts = mask.split(ASPx.CultureInfo.ds);
   if(dateParts) {
    if(dateParts.length > 0 && dateParts[dateParts.length - 1] == "")
     dateParts.pop();
    pos += (dateParts.length - 1) * (ASPx.CultureInfo.ds.length - 1);
   }
  }
  return { pos: pos, sp: sp };
 },
 ReplaceDay: function(length) {
  if(length < 3) {
   var value = this.date.getDate().toString();
   return length == 2 ? this.padLeft(value, 2) : value;  
  } else if(length == 3) {
   return ASPx.CultureInfo.abbrDayNames[this.date.getDay()];
  } else {
   return ASPx.CultureInfo.dayNames[this.date.getDay()];
  }
 }, 
 ReplaceMonth: function(length) {
  var value = 1 + this.date.getMonth();
  switch(length) {
   case 1:
    return value.toString();
   case 2:
    return this.padLeft(value.toString(), 2);
   case 3:
    return ASPx.CultureInfo.abbrMonthNames[value - 1];
   default:
    for(var i in this.specifiers) {
     if(this.specifiers.hasOwnProperty(i)) {
      var spec = this.specifiers[i];
      if(spec == "d" || spec == "dd")
       return ASPx.CultureInfo.genMonthNames[value - 1];
     }
    }
    return ASPx.CultureInfo.monthNames[value - 1];
  }
 },
 ReplaceYear: function(length) {
  var value = this.date.getFullYear();
  if(length <= 2)
   value = value % 100;
  return this.padLeft(value.toString(), length);
 },
 ReplaceHours23: function(length) {
  var value = this.date.getHours().toString();
  return length > 1 ? this.padLeft(value, 2) : value;
 },
 ReplaceHours12: function(length) {
  var value = this.date.getHours() % 12;
  if(value == 0)
   value = 12;
  value = value.toString();
  return length > 1 ? this.padLeft(value, 2) : value;
 },
 ReplaceMinutes: function(length) {
  var value = this.date.getMinutes().toString();
  return length > 1 ? this.padLeft(value, 2) : value;
 },
 ReplaceSeconds: function(length) {
  var value = this.date.getSeconds().toString();
  return length > 1 ? this.padLeft(value, 2) : value;
 },
 ReplaceMsTrimmed: function(length) {   
  return this.formatMs(length, true);
 },
 ReplaceMs: function(length) { 
  return this.formatMs(length, false);
 },
 ReplaceEra: function(length) {
  return "A.D.";
 },
 ReplaceAmPm: function(length) {
  var value = this.date.getHours() < 12 ? ASPx.CultureInfo.am : ASPx.CultureInfo.pm;
  return length < 2 ? value.charAt(0) : value;
 },
 catchNumbers: function(str, specifiers) {
  this.parseNumbers = [];  
  var regex = /\d+/g;  
  var match;
  for(;;) {
   match = regex.exec(str);
   if(!match)
    break;
   this.parseNumbers.push(this.parseDecInt(match[0]));
  }  
  var spCount = 0;
  var now = new Date();
  for(var i in specifiers) {
   if(specifiers.hasOwnProperty(i)) {
    var sp = specifiers[i];
    if (sp.constructor != String || !this.IsNumericSpecifier(sp)) continue;
    spCount++;
    if(this.parseNumbers.length < spCount) {
     var defaultValue = 0;
     if (sp.charAt(0) == "y") defaultValue = now.getFullYear();
     this.parseNumbers.push(defaultValue);
    }
   }
  }
  var excess = this.parseNumbers.length - spCount;
  if(excess > 0)
   this.parseNumbers.splice(spCount, excess);  
  this.currentParseNumber = this.parseNumbers.length - 1;
 },
 popParseNumber: function() {
  return this.parseNumbers[this.currentParseNumber--];
 },
 findAbbrMonth: function() {
  return this.findMonthCore(ASPx.CultureInfo.abbrMonthNames);
 },
 findFullMonth: function() {
  return this.findMonthCore(ASPx.CultureInfo.genMonthNames);
 },
 findMonthCore: function(monthNames) {
  var inputLower = this.strToParse.toLowerCase();
  var matchMonthNames = monthNames.filter(function(n) { return inputLower.indexOf(n.toLowerCase()) > -1; });
  if(matchMonthNames.length == 0)
   return false;
  var sortedMatchNames = matchMonthNames.sort(function(a, b) { return b.length - a.length; });
  var name = sortedMatchNames[0];
  var emptyMonth = new Array(name.length + 1).join(" ");
  this.strToParse = this.strToParse.replace(new RegExp(name, "gi"), emptyMonth);
  return monthNames.indexOf(name) + 1;
 },
 ParseDay: function(length) {
  if(length < 3) {
   var value = this.popParseNumber();
   if(value < 1 || value > 31)
    return false;
   this.date.setDate(value);
  }
  return true;
 },
 ParseMonth: function(length) {
  var value;
  var actualMonthTextContainsDigitOnly = this.actualDayMonthTextContainsDigitOnly("M", length);
  if(length < 3 || actualMonthTextContainsDigitOnly)
   value = this.popParseNumber();
  else
   value = length === 3 ? this.findAbbrMonth() : this.findFullMonth();
  if(value < 1 || value > 12)
   return false;
  this.parsedMonth = value - 1;
  if(this.actualDayMonthTextContainsAnyDigit("M", length) && !actualMonthTextContainsDigitOnly && length > 2)
   this.currentParseNumber--;
  return true;
 }, 
 ParseYear: function(length) {  
  var value = this.popParseNumber();
  if(value > 9999)
   return false;
  if(value < 100)
   value = ASPx.DateUtils.ExpandTwoDigitYear(value);
  this.date.setFullYear(value);
  this.isYearParsed = true;
  return true;
 },
 ParseHours: function(length) {
  var value = this.popParseNumber();
  if(value > 23)
   return false;
  this.date.setHours(value);
  return true;
 },
 ParseMinutes: function(length) {
  var value = this.parseMinSecCore();
  if(value == -1)
   return false;
  this.date.setMinutes(value);
  return true;
 },
 ParseSeconds: function(length) {
  var value = this.parseMinSecCore();
  if(value == -1)
   return false;
  this.date.setSeconds(value);
  return true;
 },
 ParseMs: function(length) {
  if(length > 3)
   length = 3;
  var thr = 1;
  for(var i = 0; i < length; i++)
   thr *= 10;
  thr -= 1;
  var value = this.popParseNumber();
  while(value > thr)
   value /= 10;
  this.date.setMilliseconds(Math.round(value));
  return true;
 },
 ParseEra: function(length) {
  return true;
 },
 ParseAmPm: function(length) {
  this.hasAmPm = ASPx.CultureInfo.is12HoursCulture;
  return true;
 },
 parseDecInt: function(str) {
  return parseInt(str, 10);
 },
 padLeft: function(str, length) {
  while(str.length < length)
   str = "0" + str;
  return str;
 },
 formatMs: function(length, trim) {
  var value = Math.floor(this.date.getMilliseconds() * Math.pow(10, length - 3));
  value = this.padLeft(value.toString(), length);    
  if(trim) {
   var pos = value.length - 1;
   var req = false;
   while(value.charAt(pos) == "0") {
    req = true;
    pos--;
   }
   if(req)
    value = value.substring(0, pos + 1);   
  }
  return value;
 },
 parseMinSecCore: function() {
  var value = this.popParseNumber();
  return value > 59 ? -1 : value;
 },
 fixHours: function() {
  var state = this.getAmPmState(this.strToParse);
  if(!state) return true;
  var h = this.date.getHours();
  switch(state) {
   case "P":
    if(h > 12) return false;
    if(h < 12)
     this.date.setHours(12 + h);
    break;
   case "A":
    if(h == 12)
     this.date.setHours(0);
  }
  return true;
 },
 getAmPmState: function(str, skipCorrection) {
  var am = ASPx.CultureInfo.am.charAt(0).toLowerCase();
  var pm = ASPx.CultureInfo.pm.charAt(0).toLowerCase();
  var amMatches = new RegExp(am, "gi").exec(str);
  var pmMatches = new RegExp(pm, "gi").exec(str);
  var amCount = amMatches ? amMatches.length : 0;
  var pmCount = pmMatches ? pmMatches.length : 0;
  var hasAm = amCount > 0;
  var hasPm = pmCount > 0;
  if(hasAm ^ hasPm && amCount < 2 && pmCount < 2)
   return hasAm ? "A" : "P";
  if(!skipCorrection) {
   str = str.replace(new RegExp(this.getDayMonthNameReplacePattern(), "gi"), "");
   return this.getAmPmState(str, true);
  }
  return null;
 },
 getDayMonthNameReplacePattern: function() {
  if(!this.dayMonthNameReplacePattern)
   return this.createDayMonthNameReplacePattern();
  return this.dayMonthNameReplacePattern;
 },
 createDayMonthNameReplacePattern: function() {
  var parts = [ ] ;
  parts.push("(?:");
  parts.push(this.createReplacePattern(ASPx.CultureInfo.monthNames));
  parts.push(this.createReplacePattern(ASPx.CultureInfo.genMonthNames));
  parts.push(this.createReplacePattern(ASPx.CultureInfo.abbrMonthNames));
  parts.push(this.createReplacePattern(ASPx.CultureInfo.abbrDayNames));
  parts.push(this.createReplacePattern(ASPx.CultureInfo.dayNames));
  parts.push(")");
  return parts.join("");
 },
 createReplacePattern: function(names) {
  return names && names.length > 0 ? "\\b" + names.join("\\b|\\b") + "\\b" : "";
 },
 IsNumericSpecifier: function(sp) {
  var ch = sp.charAt(0);
  if(ch == "g" || ch == "t" || ((ch == "M" || ch == "d") && !this.actualDayMonthTextContainsAnyDigit(ch, sp.length)))
   return false;
  return true;
 },
 actualDayMonthTextContainsAnyDigit: function(datePart, datePartLength) {
  return this.actualDayMonthTextContainsDigitCore(datePart, datePartLength, function(name) { return /\d+/g.test(name); });
 },
 actualDayMonthTextContainsDigitOnly: function(datePart, datePartLength) {
  return this.actualDayMonthTextContainsDigitCore(datePart, datePartLength, function(name) { return !isNaN(parseInt(name)); });
 },
 actualDayMonthTextContainsDigitCore: function(datePart, datePartLength, matchDigitFunc) {
  if(datePartLength < 3)
   return true;
  var targetNames = this.getDayMonthNames(datePart, datePartLength);
  return targetNames.length > 0 ? matchDigitFunc(targetNames[0]) : false;
 },
 getDayMonthNames: function(datePart, datePartLength) {
  var result = [];
  var useAbbrNames = datePartLength == 3;
  if(datePart == "d")
   result = useAbbrNames ? ASPx.CultureInfo.abbrDayNames : ASPx.CultureInfo.dayNames;
  else
   result = useAbbrNames ? ASPx.CultureInfo.abbrMonthNames : ASPx.CultureInfo.monthNames;
  return result;
 },
 IsKnownSpecifier: function(sp) {
  if(sp.length > 1)
   sp = sp.charAt(0);
  for(var i = 0; i < this.knownSpecifiers.length; i++) {
   if(this.knownSpecifiers[i] == sp)
    return true;
  }
  return false;
 }
});
DateFormatter.Create = function(format) {
 var instance = new DateFormatter();
 instance.SetFormatString(format);
 return instance;
};
DateFormatter.ExpandPredefinedFormat = function(format) {
 switch(format) {
  case "d":
   return ASPx.CultureInfo.shortDate;
  case "D":
   return ASPx.CultureInfo.longDate;
  case "t":
   return ASPx.CultureInfo.shortTime;
  case "T":
   return ASPx.CultureInfo.longTime;
  case "g":
   return ASPx.CultureInfo.shortDate + " " + ASPx.CultureInfo.shortTime;   
  case "f":
   return ASPx.CultureInfo.longDate + " " + ASPx.CultureInfo.shortTime;
  case "G":
   return ASPx.CultureInfo.shortDate + " " + ASPx.CultureInfo.longTime;
  case "F":
  case "U":
   return ASPx.CultureInfo.longDate + " " + ASPx.CultureInfo.longTime;   
  case "M":
  case "m":
   return ASPx.CultureInfo.monthDay;
  case "Y":
  case "y":
   return ASPx.CultureInfo.yearMonth;   
  case "O":
  case "o":
   return "yyyy'-'MM'-'dd'T'HH':'mm':'ss.fffffff";
  case "R":
  case "r":
   return "ddd, dd MMM yyyy HH':'mm':'ss 'GMT'";
  case "s":
   return "yyyy'-'MM'-'dd'T'HH':'mm':'ss";
  case "u":
    return "yyyy'-'MM'-'dd HH':'mm':'ss'Z'";
 }
 return format;
};
ASPx.DateFormatter = DateFormatter;
})();

(function() {
ASPx.Formatter = {
 Format: function() {
  if(arguments.length < 1) 
   return "";
  var format = arguments[0];
  if(format == null)
   return "";
  var args;
  if(arguments.length > 1 && arguments[1] != null && arguments[1].constructor == Array) {
   args = arguments[1];
  } else {
   args = [ ];
   for(var i = 1; i < arguments.length; i++)
    args.push(arguments[i]);
  }
  var bag = [ ];
  var pos = 0;
  var savedPos = 0;  
  while(pos < format.length) {
   var ch = format.charAt(pos);
   pos++;
   if(ch == '{') {
    bag.push(format.substr(savedPos, pos - savedPos - 1));    
    if(format.charAt(pos) == "{") {
     savedPos = pos;
     pos++;
     continue;
    }
    var spec = this.ParseSpec(format, pos);
    var pos = spec.pos;
    var arg = args[spec.index];
    var argString;
    if(arg == null) {
     argString = "";
    } else if(typeof arg == "number") {
     argString = ASPx.NumberFormatter.Format(spec.format, arg);
    } else if(arg.constructor == Date) {     
     if(spec.format != this.activeDateFormat) {
      this.activeDateFormat = spec.format;
      if(spec.format == "")
       spec.format = "G";      
      if(spec.format.length == 1)
       spec.format = ASPx.DateFormatter.ExpandPredefinedFormat(spec.format);
      this.GetDateFormatter().SetFormatString(spec.format);
     }
     if(this.activeDateFormat == "U")
      arg = ASPx.DateUtils.ToUtcTime(arg);
     argString = this.GetDateFormatter().Format(arg);
    } else {
     argString = String(arg);     
     if(spec.format != "" && argString.length > 0) {
      var num = Number(argString.replace(",", "."));
      if(!isNaN(num))
       argString = ASPx.NumberFormatter.Format(spec.format, num);
     }
    }
    var padLen = spec.width - argString.length;
    if(padLen > 0) {
     if(spec.left)
      bag.push(argString);
     for(var i = 0; i < padLen; i++)
      bag.push(" ");
     if(!spec.left)
      bag.push(argString);
    } else {
     bag.push(argString);
    }
    savedPos = pos;
   }
   else if(ch == "}" && pos < format.length && format.charAt(pos) == "}") {
    bag.push(format.substr(savedPos, pos - savedPos - 1));
    savedPos = pos;
    pos++;
   }
   else if (ch == "}") {
    return "";
   }
  }
  if(savedPos < format.length)
   bag.push(format.substr(savedPos));   
  return bag.join("");
 },
 ParseSpec: function(format, pos) {
  var result = {
   index: -1,   
   left: false,
   width: 0,
   format: "",
   pos: 0
  };
  var savedPos, ch;
  savedPos = pos;
  while(true) {   
   ch = format.charAt(pos);
   if(ch < "0" || ch > "9")
    break;
   pos++;
  }  
  if(pos > savedPos)
   result.index = Number(format.substr(savedPos, pos - savedPos));  
  if(format.charAt(pos) == ",") {
   pos++;
   while(true) {
    ch = format.charAt(pos);
    if(ch != " " && ch != "\t")
     break;
    pos++;
   }
   result.left = format.charAt(pos) == "-";
   if(result.left)
    pos++;   
   savedPos = pos;
   while(true) {
    ch = format.charAt(pos);
    if(ch < "0" || ch > "9")
     break;
    pos++;
   }
   if(pos > savedPos)
    result.width = Number(format.substr(savedPos, pos - savedPos));
  }
  if(format.charAt(pos) == ":") {
   pos++;
   savedPos = pos;
   while(format.charAt(pos) != "}")
    pos++;
   result.format = format.substr(savedPos, pos - savedPos);
  }
  pos++;
  result.pos = pos;
  return result;
 },
 activeDateFormat: null,
 GetDateFormatter: function() {
  if(!this.__dateFormatter)
   this.__dateFormatter = new ASPx.DateFormatter();
  return this.__dateFormatter;
 }
};
ASPx.NumberFormatter = {
 Format: function(format, value) {
  if(isNaN(value))
   return ASPx.CultureInfo.numNan;
  if(!isFinite(value)) {
   return value > 0 
    ? ASPx.CultureInfo.numPosInf 
    : ASPx.CultureInfo.numNegInf;
  }
  this.FillFormatInfo(format);
  if(this.spec == "X")
   return this.FormatHex(value);
  this.FillDigitInfo(value);  
  switch(this.spec) {
   case "C":
    return this.FormatCurrency();
   case "D":
    return this.FormatDecimal();
   case "E":
    return this.FormatExp();
   case "F":
    return this.FormatFixed();
   case "G":   
    return this.FormatGeneral();
   case "N":
    return this.FormatNumber();
   case "P":
    return this.FormatPercent();
   default:
    if(this.custom)
     return this.FormatCustom(format);
    return "?";
  }
 },
 positive: true,
 digits: null,
 pointPos: 0, 
 spec: "",
 prec: -1,  
 upper: true,
 custom: false,
 FormatCurrency: function() {  
  if(this.prec < 0)
   this.prec = ASPx.CultureInfo.currPrec;
  this.Round(this.prec);
  var bag = [ ];
  if(this.positive) {
   switch(ASPx.CultureInfo.currPosPattern) {
    case 0:
     bag.push(ASPx.CultureInfo.currency);
     break;
    case 2:
     bag.push(ASPx.CultureInfo.currency, " ");     
     break;     
   }
  } else {
   switch(ASPx.CultureInfo.currNegPattern) {
    case 0:
     bag.push("(", ASPx.CultureInfo.currency);
     break;
    case 1:
     bag.push("-", ASPx.CultureInfo.currency);
     break;
    case 2:
     bag.push(ASPx.CultureInfo.currency, "-");
     break;
    case 3:
     bag.push(ASPx.CultureInfo.currency);
     break;
    case 4:
     bag.push("(");
     break;
    case 5:
    case 8:
     bag.push("-");
     break;
    case 9:
     bag.push("-", ASPx.CultureInfo.currency, " ");
     break;
    case 11:
     bag.push(ASPx.CultureInfo.currency, " ");
     break;
    case 12:
     bag.push(ASPx.CultureInfo.currency, " -");
     break;
    case 14:
     bag.push("(", ASPx.CultureInfo.currency, " ");
     break;
    case 15:
     bag.push("(");
     break;
   }
  }
  this.AppendGroupedInteger(bag, ASPx.CultureInfo.currGroups, ASPx.CultureInfo.currGroupSeparator);
  if(this.prec > 0) {
   bag.push(ASPx.CultureInfo.currDecimalPoint);
   this.AppendDigits(bag, this.pointPos, this.pointPos + this.prec);
  }
  if(this.positive) {
   switch(ASPx.CultureInfo.currPosPattern) {
    case 1:
     bag.push(ASPx.CultureInfo.currency);
     break;
    case 3:
     bag.push(" ", ASPx.CultureInfo.currency);
     break;     
   }   
  } else {
   switch(ASPx.CultureInfo.currNegPattern) {
    case 0:
    case 14:
     bag.push(")");
     break;
    case 3:
     bag.push("-");
     break;
    case 4:
     bag.push(ASPx.CultureInfo.currency, ")");
     break;
    case 5:
     bag.push(ASPx.CultureInfo.currency);
     break;
    case 6:
     bag.push("-", ASPx.CultureInfo.currency);
     break;
    case 7:
     bag.push(ASPx.CultureInfo.currency, "-");
     break;
    case 8:
     bag.push(" ", ASPx.CultureInfo.currency);
     break;
    case 10:
     bag.push(" ", ASPx.CultureInfo.currency, "-");
     break;
    case 11:
     bag.push("-");
     break;
    case 13:
     bag.push("- ", ASPx.CultureInfo.currency);
     break;
    case 15:
     bag.push(" ", ASPx.CultureInfo.currency, ")");
     break;
   }
  }
  return bag.join("");
 }, 
 FormatDecimal: function() {
  if(this.prec < this.pointPos)
   this.prec = this.pointPos;
  if(this.prec < 1)
   return "0";
  var bag = [ ];
  if(!this.positive)
   bag.push("-");
  this.AppendDigits(bag, this.pointPos - this.prec, this.pointPos);
  return bag.join("");
 },
 FormatExp: function() {  
  if(this.prec < 0)
   this.prec = 6;
  this.Round(1 - this.pointPos + this.prec);
  return this.FormatExpCore(3);
 },
 FormatExpCore: function(minExpDigits) {
  var bag = [ ];
  if(!this.positive)
   bag.push("-");
  this.AppendDigits(bag, 0, 1);
  if(this.prec > 0) {
   bag.push(ASPx.CultureInfo.numDecimalPoint);
   this.AppendDigits(bag, 1, 1 + this.prec);
  }
  bag.push(this.upper ? "E" : "e");
  var order = this.pointPos - 1;  
  if(order >= 0) {
   bag.push("+");
  } else {
   bag.push("-");
   order = -order;
  }
  var orderStr = String(order);
  for(var i = orderStr.length; i < minExpDigits; i++)
   bag.push(0);
  bag.push(orderStr);
  return bag.join("");
 },
 FormatFixed: function() {
  if(this.prec < 0)
   this.prec = ASPx.CultureInfo.numPrec;
  this.Round(this.prec);
  var bag = [ ];
  if(!this.positive)
   bag.push("-");
  if(this.pointPos < 1)
   bag.push(0);
  else
   this.AppendDigits(bag, 0, this.pointPos);
  if(this.prec > 0) {
   bag.push(ASPx.CultureInfo.numDecimalPoint);
   this.AppendDigits(bag, this.pointPos, this.pointPos + this.prec);
  }
  return bag.join(""); 
 },
 FormatGeneral: function() {
  var hasFrac = this.pointPos < this.digits.length;
  var allowExp;
  if(this.prec < 0) {
   allowExp = hasFrac;
   this.prec = hasFrac ? 15 : 10;
  } else {   
   allowExp = true;
   if(this.prec < 1)
    this.prec = hasFrac ? 15 : 10;
   this.Round(this.prec - this.pointPos);
  }
  if(allowExp) {
   if(this.pointPos > this.prec || this.pointPos <= -4) {
    this.prec = this.digits.length - 1;
    return this.FormatExpCore(2);
   }
  }
  this.prec = Math.min(this.prec, Math.max(1, this.digits.length)) - this.pointPos;
  return this.FormatFixed();
 },
 FormatNumber: function() {
  if(this.prec < 0)
   this.prec = ASPx.CultureInfo.numPrec;
  this.Round(this.prec);
  var bag = [ ];
  if(!this.positive) {
   switch(ASPx.CultureInfo.numNegPattern) {
    case 0:
     bag.push("(");
     break;
    case 1:
     bag.push("-");
     break;
    case 2:
     bag.push("- ");
     break;
   }
  }
  this.AppendGroupedInteger(bag, ASPx.CultureInfo.numGroups, ASPx.CultureInfo.numGroupSeparator);
  if(this.prec > 0) {
   bag.push(ASPx.CultureInfo.numDecimalPoint);
   this.AppendDigits(bag, this.pointPos, this.pointPos + this.prec);
  }
  if(!this.positive) {
   switch(ASPx.CultureInfo.numNegPattern) {
    case 0:
     bag.push(")");
     break;
    case 3:
     bag.push("-");
     break;
    case 4:
     bag.push(" -");
     break;
   }
  }
  return bag.join("");
 },
 FormatPercent: function() {
  if(this.prec < 0)
   this.prec = ASPx.CultureInfo.numPrec;
  if(this.digits.length > 0)
   this.pointPos += 2;
  this.Round(this.prec);
  var bag = [ ];
  if(!this.positive)
   bag.push("-");
  if(ASPx.CultureInfo.percentPattern == 2)
   bag.push("%");    
  this.AppendGroupedInteger(bag, ASPx.CultureInfo.numGroups, ASPx.CultureInfo.numGroupSeparator);
  if(this.prec > 0) {
   bag.push(ASPx.CultureInfo.numDecimalPoint);
   this.AppendDigits(bag, this.pointPos, this.pointPos + this.prec);
  }  
  switch(ASPx.CultureInfo.percentPattern) {
   case 0:
    bag.push(" %");
    break;
   case 1:
    bag.push("%");
    break;
  }  
  return bag.join("");
 },
 FormatHex: function(value) {
  var result = value.toString(16);
  if(result.indexOf("(") > -1)
   return result;
  result = this.upper ? result.toUpperCase() : result.toLowerCase();
  if(this.prec <= result.length)
   return result;
  var bag = [ ];
  for(var i = result.length; i < this.prec; i++)
   bag.push(0);
  bag.push(result);
  return bag.join("");
 },
 FormatCustom: function(format) {
  var sectionList = this.GetCustomFormatSections(format);
  var section = this.SelectCustomFormatSection(sectionList);
  if(section == "")
   return this.positive ? "" : "-";
  var info = this.ParseCustomFormatSection(section);
  var lists = this.CreateCustomFormatLists(info);
  if(sectionList.length > 2 && section != sectionList[2]) {
   var zero = lists.i.concat(lists.f).join("").split(0).join("") == "";
   if(zero) {
    section = sectionList[2];
    info = this.ParseCustomFormatSection(section);
    lists = this.CreateCustomFormatLists(info);   
   }   
  }
  return this.FormatCustomCore(section, info, lists);
 },
 GetCustomFormatSections: function(format) {
  var sections = [ ];
  var escaping = false;
  var quote = "";
  var length = 0;
  var prevPos = 0;
  for(var i = 0; i < format.length; i++) {
   var ch = format.charAt(i);
   if(!escaping && quote == "" && ch == ";") {
    sections.push(format.substr(prevPos, length));
    length = 0;
    prevPos = i + 1;
    if(sections.length > 2)
     break;
   } else {
    if(escaping)
     escaping = false;
    else if(ch == quote)
     quote = quote == "" ? ch : "";
    else if(ch == "\\")
     escaping = true;
    else if(ch == "'" || ch == '"')
     quote = ch;
    ++length;
   }
  }
  if(length > 0)
   sections.push(format.substr(prevPos, length));
  if(sections.length < 1)
   sections.push(format);
  return sections;
 },
 SelectCustomFormatSection: function(sections) {
  if(!this.positive && sections.length > 1 && sections[1] != "") {
   this.positive = true;
   return sections[1];
  }
  if(this.digits.length < 1 && sections.length > 2 && sections[2] != "")
   return sections[2];
  return sections[0];
 },
 CreateCustomFormatInfo: function() {
  return {
   pointPos: -1,
   grouping: false,
   exp: false,
   expShowPlus: false,
   percent: false,
   scaling: 0,
   intDigits: 0,
   fracDigits: 0,
   expDigits: 0,
   intSharps: 0,
   fracSharps: 0, 
   expSharps: 0
  };
 },
 ParseCustomFormatSection: function(section) {  
  var quote = "";
  var area = "i"; 
  var canParseIntSharps = true;
  var result = this.CreateCustomFormatInfo();
  var groupSeparators = 0;  
  for(var i = 0; i < section.length; i++) {
   var ch = section.charAt(i);   
   if(ch == quote) {
    quote = "";    
    continue;
   }
   if(quote != "")
    continue;
   if(area == "e" && ch != "0" && ch != "#") {
    area = result.pointPos < 0 ? "i" : "f";
    i--;
    continue;
   }
   switch(ch) {
    case "\\":
     i++;
     continue;
    case "'":
    case '"':
     quote = ch;
     continue;
    case "#":
    case "0":
     if(ch == "#") {
      switch(area) {
       case "i":
        if(canParseIntSharps)
         result.intSharps++;
        break;
       case "f":
        result.fracSharps++;
        break;
       case "e":
        result.expSharps++;
        break;
      }
     } else {
      canParseIntSharps = false;
      switch(area) {
       case "f":
        result.fracSharps = 0;        
        break;
       case "e":
        result.expSharps = 0;
        break;
      }
     }
     switch(area) {
      case "i":
       result.intDigits++;
       if(groupSeparators > 0)
        result.grouping = true;
       groupSeparators = 0;
       break;
      case "f":
       result.fracDigits++;  
       break;
      case "e":
       result.expDigits++;
       break;
     }
     break;
    case "e":
    case "E":
     if(result.exp)
      break;
     result.exp = true;     
     area = "e"; 
     if(i < section.length - 1) {
      var next = section.charAt(1 + i);
      if(next == "+" || next == "-") {
       if(next == "+")
        result.expShowPlus = true;
       i++;
      }
      else if(next != "0" && next != "#") {
       result.exp = false;
       if(result.pointPos < 0)
        area = "i";       
      }
     }
     break;
    case ".":
     area = "f";
     if(result.pointPos < 0)
      result.pointPos = i;
     break;
    case "%":
     result.percent = true;     
     break;
    case ",":
     if(area == "i" && result.intDigits > 0)
      groupSeparators++;
     break;
    default:
     break;
   }
  }
  if(result.expDigits < 1)
   result.exp = false;
  else
   result.intSharps = 0;
  if(result.fracDigits < 1)
   result.pointPos = -1;
  result.scaling = 3 * groupSeparators;  
  return result;
 },
 CreateCustomFormatLists: function(info) {
  var intList = [ ];
  var fracList = [ ];
  var expList = [ ];
  if(this.digits.length > 0) {
   if(info.percent)
    this.pointPos += 2;
   this.pointPos -= info.scaling;
  }
  var expPositive = true;
  if(info.exp && (info.intDigits > 0 || info.fracDigits > 0)) {
   var diff = 0;
   if(this.digits.length > 0) {
    this.Round(info.intDigits + info.fracDigits - this.pointPos);
    diff -= this.pointPos - info.intDigits;
    this.pointPos = info.intDigits;
   }
   expPositive = diff <= 0;   
   expList = String(diff < 0 ? -diff : diff).split("");
  } else {
   this.Round(info.fracDigits);
  }
  if(this.digits.length < 1 || this.pointPos < 1)
   intList = [ 0 ];
  else
   this.AppendDigits(intList, 0, this.pointPos);
  this.AppendDigits(fracList, this.pointPos, this.digits.length);
  if(info.exp) {
   while(intList.length < info.intDigits)
    intList.unshift(0);
   while(expList.length < info.expDigits - info.expSharps)
    expList.unshift(0);
   if(expPositive && info.expShowPlus)
    expList.unshift("+");
   else if(!expPositive)
    expList.unshift("-");
  } else {
   while(intList.length < info.intDigits - info.intSharps)
    intList.unshift(0);    
   if(info.intSharps >= info.intDigits) {
    var zero = true;
    for(var i = 0; i < intList.length; i++) {
     if(intList[i] != 0) {
      zero = false;
      break;
     }
    }
    if(zero)
     intList = [ ];
   }
  }
  while(fracList.length < info.fracDigits - info.fracSharps)
   fracList.push(0);
  return {
   i: intList,
   f: fracList,
   e: expList
  };
 },
 FormatCustomCore: function(section, info, lists) {
  var intLen = 0; 
  var total = 0;
  var groupIndex = 0; 
  var counter = 0;
  var groupSize = 0;
  if(info.grouping && ASPx.CultureInfo.numGroups.length > 0) {
   intLen = lists.i.length;
   for(var i = 0; i < ASPx.CultureInfo.numGroups.length; i++) {
    if(total + ASPx.CultureInfo.numGroups[i] <= intLen) {
     total += ASPx.CultureInfo.numGroups[i];
     groupIndex = i;
    }
   }
   groupSize = ASPx.CultureInfo.numGroups[groupIndex];
   var fraction = intLen > total ? intLen - total : 0;
   if(groupSize == 0) {
    while(groupIndex >= 0 && ASPx.CultureInfo.numGroups[groupIndex] == 0)
     groupIndex--;
    groupSize = fraction > 0 ? fraction : ASPx.CultureInfo.numGroups[groupIndex];
   }
   if(fraction == 0) {
    counter = groupSize;
   } else {
    groupIndex += Math.floor(fraction / groupSize);
    counter = fraction % groupSize;
    if(counter == 0)
     counter = groupSize;
    else
     groupIndex++;
   }
  } else {
   info.grouping = false;
  }
  var bag = [ ];
  var area = "i";
  var intSharps = 0;
  var intListIndex = 0;
  var fracListIndex = 0;
  var savedCh = "";
  for(var i = 0; i < section.length; i++) {
   var ch = section.charAt(i);
   if(ch == savedCh) {
    savedCh = "";
    continue;
   }
   if(savedCh != "") {
    bag.push(ch);
    continue;
   }
   switch(ch) {
    case "\\":
     ++i;
     if(i < section.length)
      bag.push(section.charAt(i));
     continue;
    case "'":
    case '"':     
     savedCh = ch;
     continue;
    case "#":     
    case "0":
     if(area == "i") {
      intSharps++;
      if(ch == "0" || info.intDigits - intSharps < lists.i.length + intListIndex) {
       while(info.intDigits - intSharps + intListIndex < lists.i.length) {
        bag.push(lists.i[intListIndex]);
        intListIndex++;
        if(info.grouping && --intLen > 0 && --counter == 0) {
         bag.push(ASPx.CultureInfo.numGroupSeparator);
         if(--groupIndex < ASPx.CultureInfo.numGroups.length && groupIndex >= 0)
          groupSize = ASPx.CultureInfo.numGroups[groupIndex];
         counter = groupSize;
        }
       }
      }
     } else if(area == "f") {
      if(fracListIndex < lists.f.length) {
       bag.push(lists.f[fracListIndex]);
       fracListIndex++;
      }
     }
     break;
    case "e":
    case "E":
     if(lists.e == null || !info.exp) {
      bag.push(ch);
      break;
     }
     for(var q = i + 1; q < section.length; q++) {
      if(q == i + 1 && (section.charAt(q) == "+" || section.charAt(q) == "-"))
       continue;                   
      if(section.charAt(q) == "0" || section.charAt(q) == "#")
       continue;
      break;
     }
     i = q - 1;
     area = info.pointPos < 0 ? "i" : "f";
     bag.push(ch);
     bag = bag.concat(lists.e);
     lists.e = null;      
     break;
    case ".":
     if(info.pointPos == i && lists.f.length > 0)
      bag.push(ASPx.CultureInfo.numDecimalPoint);
     area = "f";
     break;
    case ",":
     break;
    default:
     bag.push(ch);
     break;
   }
  }
  if(!this.positive)
   bag.unshift("-");
  return bag.join("");
 },
 FillDigitInfo: function(value) {
  this.positive = true;
  if(value < 0) {
   value = -value;
   this.positive = false;   
  }
  this.digits = [ ];
  this.pointPos = 0;    
  if(value == 0 || !isFinite(value) || isNaN(value)) {
   this.pointPos = 1;
   return;
  }
  var list = String(value).split("e");
  var str = list[0];
  if(list.length > 1) {   
   this.pointPos = Number(list[1]);
  }
  var frac = false;
  var decimalCount = 0;
  for(var i = 0; i < str.length; i++) {
   var ch = str.charAt(i);
   if(ch == ".") {
    frac = true;
   } else {
    if(frac)
     decimalCount++;     
    if(ch != "0" || this.digits.length > 0)
     this.digits.push(Number(ch));
   }
  }
  this.pointPos += this.digits.length - decimalCount;
 },
 FillFormatInfo: function(format) {
  this.upper = true;
  this.custom = false;
  this.prec = -1;
  var spec;
  if(format == null || format.length < 1)
   spec = "G";
  else
   spec = format.charAt(0);
  if(spec >= "a" && spec <= "z") {
   spec = spec.toUpperCase();
   this.upper = false;
  }
  if(spec >= "A" && spec <= "Z") {   
   if(format != null && format.length > 1) {
    var prec = Number(format.substr(1));
    if(!isNaN(prec))
     this.prec = prec;
    else
     this.custom = true;
   }
  } else {
   this.custom = true;   
  }  
  this.spec = this.custom ? "0" : spec;
 },
 Round: function(shift) {
  var amount = this.digits.length - this.pointPos - shift;
  if(amount <= 0) 
   return;
  var cutPos = this.pointPos + shift;
  if(cutPos < 0) {
   this.digits = [ ];
   this.pointPos = 0;
   return;
  }
  var digit = this.digits[cutPos];
  if(digit > 4) { 
   for(var i = 0; i < amount; i++) {
    var index = cutPos - 1 - i;
    if(index < 0) {
     this.digits.unshift(0);
     this.pointPos++;
     cutPos++;
     index++;
    }
    digit = this.digits[index];    
    if(digit < 9) {
     this.digits[index] = 1 + digit;
     break;
    } else {
     this.digits[index] = 0;
     amount++;
    }
   }
  }
  for(var i = cutPos - 1; i >= 0; i--) {
   if(this.digits[i] > 0) break;
   cutPos--;
  }
  this.digits.splice(cutPos, this.digits.length - cutPos);
 },
 AppendGroupedInteger: function(list, groups, separator) { 
  if(this.pointPos < 1) {
   list.push(0);
   return;
  }
  var total = 0;
  var groupIndex = 0;
  for(var i = 0; i < groups.length; i++) {
   if(total + groups[i] <= this.pointPos) {
    total += groups[i];
    groupIndex = i;
   }
   else
    break;
  }
  if(groups.length > 0 && total > 0) {
   var counter;
   var groupSize = groups[groupIndex];
   var fraction = this.pointPos > total ? this.pointPos - total : 0;
   if(groupSize == 0) {
    while(groupIndex >= 0 && groups[groupIndex] == 0)
     groupIndex--;
    groupSize = fraction > 0 ? fraction : groups[groupIndex];
   }
   if(fraction == 0) {
    counter = groupSize;
   } else {
    groupIndex += Math.floor(fraction / groupSize);
    counter = fraction % groupSize;
    if(counter == 0)
     counter = groupSize;
    else
     groupIndex++;
   }
   var i = 0;
   while(true) {
    if(this.pointPos - i <= counter || counter == 0) {
     this.AppendDigits(list, i, this.pointPos);
     break;
    }
    this.AppendDigits(list, i, i + counter);
    list.push(separator);
    i += counter;    
    groupIndex--;     
    if(groupIndex < groups.length && groupIndex >= 0)
     groupSize = groups[groupIndex];
    counter = groupSize;
   }
  } else {
   this.AppendDigits(list, 0, this.pointPos);   
  }  
 },
 AppendDigits: function(list, start, end) {
  for(var i = start; i < end; i++) {
   if(i < 0 || i >= this.digits.length)
    list.push(0);
   else
    list.push(this.digits[i]);
  }
 }
};
})();
(function() {
var spindButtonIdPostfix = "_B";
var repeatBtnMaxIntervalDelay = 300;
var ASPxClientSpinEditBase = ASPx.CreateClass(ASPxClientButtonEditBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.largeDecButtonIndex = -1;
  this.incButtonIndex = -2;
  this.decButtonIndex = -3;
  this.largeIncButtonIndex = -4;
  this.valueChangedDelay = 0;
  this.valueChangedTimerID = -1;
  this.repeatButtonTimerID = -1;
  this.isValidating = false;
  aspxGetSpinEditCollection().Add(this);
 },
 Initialize: function() {
  this.AssignButtonAttributes();
  ASPxClientButtonEditBase.prototype.Initialize.call(this);
 },
 AdjustControlCore: function() {
  ASPxClientButtonEditBase.prototype.AdjustControlCore.call(this);
  if(this.GetIncDecButtonsContainer()) {
   this.CorrectVerticalAlignment(ASPx.AdjustHeightInContainer, this.GetIncDecButtonsContainer, "Btns");
   this.CorrectVerticalAlignment(ASPx.AdjustVerticalMargins, this.GetIncDecButtonsImages, "Imgs");
  }
 },
 AssignButtonAttributes: function() {
  var buttons = [
   this.GetIncrementButton(),
   this.GetDecrementButton(),
   this.GetLargeIncrementButton(),
   this.GetLargeDecrementButton()
  ];
  for(var i = 0; i < buttons.length; i++) {
   var button = buttons[i];
   if(!ASPx.IsExistsElement(button)) continue;
   ASPx.Evt.PreventElementDragAndSelect(button, true);
   button.needClearSelection = true;
   if(!ASPx.Browser.NetscapeFamily)
    button.unselectable = "on";
   var img = ASPx.GetNodesByTagName(button, "img")[0];
   if(ASPx.IsExistsElement(img)) {
    ASPx.Evt.PreventImageDragging(img);
    if(ASPx.Browser.TouchUI)
     ASPx.Evt.PreventContextMenuOnElement(img);
   }
   this.AttachButtonEvents(button);
  }
 },
 AttachButtonEvents: function(button) {
  ASPx.Evt.AttachEventToElement(button, "mouseout", this.OnButtonMouseOut.bind(this));
  if(ASPx.Browser.TouchUI)
   ASPx.Evt.AttachEventToElement(button, "touchmove", this.OnButtonMouseOut.bind(this));
  ASPx.Evt.AttachEventToElement(button, ASPx.TouchUIHelper.touchMouseDownEventName, function (evt) { this.OnButtonMouseDown(evt, button.id); }.aspxBind(this));
  ASPx.Evt.AttachEventToElement(button, ASPx.TouchUIHelper.touchMouseUpEventName, function () { this.OnButtonMouseUp(button.id); }.aspxBind(this));
 },
 OnButtonMouseOut: function() {
  this.lockButtonApply = true;
  this.ClearButtonRepeatClickTimer();
 },
 GetIncDecButtonsContainer: function() { 
  if(this.GetIncrementButton())
   return this.GetIncrementButton().parentNode;
  if(this.GetDecrementButton())
   return this.GetDecrementButton().parentNode;
  return null;
 },
 GetIncDecButtonsImages: function() { 
  var elements = [];
  if(this.GetIncrementButton())
   elements.push(ASPx.GetNodeByTagName(this.GetIncrementButton(), "IMG", 0));
  if(this.GetDecrementButton())
   elements.push(ASPx.GetNodeByTagName(this.GetDecrementButton(), "IMG", 0));
  return elements;
 },
 GetIncrementButton: function() { 
  return this.GetButton(this.incButtonIndex); 
 },
 GetDecrementButton: function() { 
  return this.GetButton(this.decButtonIndex); 
 },
 GetLargeIncrementButton: function() { 
  return this.GetButton(this.largeIncButtonIndex); 
 },
 GetLargeDecrementButton: function() { 
  return this.GetButton(this.largeDecButtonIndex); 
 },
 GetButtonCollection: function(){
  var buttonElements = ASPxClientButtonEditBase.prototype.GetButtonCollection.call(this);
  var getButtonFuncs = [
   this.GetIncrementButton,
   this.GetDecrementButton,
   this.GetLargeIncrementButton,
   this.GetLargeDecrementButton
  ];
  for(var i = 0; i < getButtonFuncs.length; i++) {
   var button =  getButtonFuncs[i].call(this);
   if(!!button)
    buttonElements.push(button);
  }
  return buttonElements;
 },
 GetButtonNumber: function(id) {
  var pos = id.lastIndexOf(spindButtonIdPostfix);
  if(pos > -1)
   return id.substring(pos + spindButtonIdPostfix.length, id.length);
  return null;
 },
 GetNextTimerInterval: function(iterationIndex) {
  var coef = 1 / iterationIndex;
  if(coef < 0.13)
   coef = 0.13;
  return coef * repeatBtnMaxIntervalDelay;
 },
 DoRepeatButtonClick: function(num, iterationIndex) {
  this.ProcessInternalButtonClick(num);
  var timerInterval = this.GetNextTimerInterval(iterationIndex);
  if(iterationIndex < 50)
   iterationIndex++;
  this.SetButtonRepeatClickTimer(num, timerInterval, iterationIndex);
 },
 StartButtonRepeatClickTimer: function(num, timerInterval, iterationIndex) {
  this.repeatButtonTimerIDLocked = false;
  this.SetButtonRepeatClickTimer(num, timerInterval, iterationIndex);
 },
 SetButtonRepeatClickTimer: function(num, timerInterval, iterationIndex) {
  if(this.repeatButtonTimerIDLocked || !this.GetEnabled())
   return;
  var repeatButtonClickHandler = function() {
   this.DoRepeatButtonClick(num, iterationIndex);
  };
  this.repeatButtonTimerID = ASPx.Timer.SetControlBoundTimeout(repeatButtonClickHandler, this, timerInterval);
 },
 ClearButtonRepeatClickTimer: function() {
  this.repeatButtonTimerIDLocked = true;
  this.repeatButtonTimerID = ASPx.Timer.ClearTimer(this.repeatButtonTimerID);
 },
 ProcessInternalButtonClick: function (buttonIndex) {
  if(this.isSpinButtonIndex(buttonIndex) && !this.focused && !this.IsFocusEventsLocked())
   this.startUserInputEventTimerIfRequired();
  return this.processInternalButtonClickCore(buttonIndex);
 },
 processInternalButtonClickCore: function (buttonIndex) {
 },
 isSpinButtonIndex: function(buttonIndex) {
  return false;
 },
 OnButtonMouseDown: function(evt, id) {
  this.lockButtonApply = false;
  this.OnButtonMouseDownCore(evt, this.GetButtonNumber(id));
 },
 OnButtonMouseDownCore: function(evt, num) {
  if(num != null)
   this.StartButtonRepeatClickTimer(num, 300, 1);
  if(ASPx.Browser.NetscapeFamily) 
   ASPx.Evt.PreventEvent(evt);
 },
 OnButtonMouseUp: function(id) {
  this.ClearButtonRepeatClickTimer();
 },
 OnValueChanged: function() {
  if(this.valueChangedDelay == 0)
   this.OnValueChangedTimer();
  else {
   if(this.valueChangedTimerID > -1) {
    window.clearTimeout(this.valueChangedTimerID);
    this.valueChangedTimerID = -1;
   }
   this.valueChangedTimerID = ASPx.Timer.SetControlBoundTimeout(this.OnValueChangedTimer, this, this.valueChangedDelay);
  }
 },
 OnValueChangedTimer: function() {
  this.valueChangedTimerID = ASPx.Timer.ClearTimer(this.valueChangedTimerID);
  this.RaisePersonalStandardValidation();
  this.InvokeActualOnValueChanged();  
 },
 InvokeActualOnValueChanged: function() {
  ASPxClientButtonEditBase.prototype.OnValueChanged.call(this);
 },
 ChangeEnabledAttributes: function(enabled) {
  ASPxClientButtonEditBase.prototype.ChangeEnabledAttributes.call(this, enabled);
  var btnElement = this.GetIncrementButton();
  if(btnElement)
   this.ChangeButtonEnabledAttributes(btnElement, this.GetChangeButtonEnabledAttributesMethod(enabled));
  btnElement = this.GetDecrementButton();
  if(btnElement)
   this.ChangeButtonEnabledAttributes(btnElement, this.GetChangeButtonEnabledAttributesMethod(enabled));
  btnElement = this.GetLargeIncrementButton();
  if(btnElement)
   this.ChangeButtonEnabledAttributes(btnElement, this.GetChangeButtonEnabledAttributesMethod(enabled));
  btnElement = this.GetLargeDecrementButton();
  if(btnElement)
   this.ChangeButtonEnabledAttributes(btnElement, this.GetChangeButtonEnabledAttributesMethod(enabled));
 },
 ChangeEnabledStateItems: function(enabled) {
  this.ClearButtonRepeatClickTimer();
  ASPxClientButtonEditBase.prototype.ChangeEnabledStateItems.call(this, enabled);
  var btnElement = this.GetIncrementButton();
  if(btnElement)
   ASPx.GetStateController().SetElementEnabled(btnElement, enabled);
  btnElement = this.GetDecrementButton();
  if(btnElement)
   ASPx.GetStateController().SetElementEnabled(btnElement, enabled);
  btnElement = this.GetLargeIncrementButton();
  if(btnElement)
   ASPx.GetStateController().SetElementEnabled(btnElement, enabled);
  btnElement = this.GetLargeDecrementButton();
  if(btnElement)
   ASPx.GetStateController().SetElementEnabled(btnElement, enabled);
 },
 OnMouseOver: function(evt) {
  ASPxClientButtonEditBase.prototype.OnMouseOver.call(this);
 },
 Validate: function() {
  this.isValidating = true;
  ASPxClientButtonEditBase.prototype.Validate.call(this);
  this.isValidating = false;
 }
});
var ASPxClientSpinEdit = ASPx.CreateClass(ASPxClientSpinEditBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.NumberChanged = new ASPxClientEvent();
  this.decimalPlaces = 0;
  this.number = 0;
  this.inc = 1;
  this.largeInc = 10;
  this.minValue = 0;
  this.maxValue = 0;
  this.showOutOfRangeWarning = true;
  this.allowNull = true;
  this.numberType = "f";
  this.maxLength = 0;
  this.inputValueBeforeFocus = null;
  this.valueChangedProcsCalledBeforeLostFocus = false;
  this.lockValueChanged = false;
  this.pasteTimerID = -1;
  this.keyUpProcessing = false;
  this.isChangingCheckProcessed = false;
  this.isInternalButtonClickProcessed = false;
 },
 Initialize: function() {
  this.GenerateValidationRegExp();
  ASPxClientSpinEditBase.prototype.Initialize.call(this);
  this.fieldsInitialize();
 },
 InlineInitialize: function() {
  this.inlineValue = this.GetInputElement().value;
  this.UpdateLastCorrectValueString();
  ASPxClientSpinEditBase.prototype.InlineInitialize.call(this);
  if (this.UseRestrictions() && this.showOutOfRangeWarning)
   this.EnsureOutOfRangeWarningManager();
 },
 SynchronizeRestoredValue: function() {
  this.ParseValue(true, false);
 },
 IsValueRestoredByFirefox: function() {
  if(this.nullText)
   return ASPxClientSpinEditBase.prototype.IsValueRestoredByFirefox.call(this);
  return true;
 },
 fieldsInitialize: function() {
  if(!this.UseRestrictions()) {
   this.minValue = this.GetDefaultMinValue();
   this.maxValue = this.GetDefaultMaxValue();
  }
 },
 GetDefaultMinValue: function () {
  var isDecimal = this.numberType == "f";
  return isDecimal ? ASPxClientSpinEditConsts.DECIMAL_MIN_VALUE :
    ASPxClientSpinEditConsts.INT_32_MIN_VALUE;
 },
 GetDefaultMaxValue: function () {
  var isDecimal = this.numberType == "f";
  return isDecimal ? ASPxClientSpinEditConsts.DECIMAL_MAX_VALUE :
   ASPxClientSpinEditConsts.INT_32_MAX_VALUE;
 },
 GenerateValidationRegExp: function() {
  var decimalSeparator = "";
  var allowDecimalSeparatorSymbols = "";
  if(this.IsFloatNumber()) {
   decimalSeparator = this.GetDecimalSeparatorRegExpString(ASPx.NumberDecimalSeparator);
   for(var i = 0; i < ASPx.PossibleNumberDecimalSeparators.length; i++)
    allowDecimalSeparatorSymbols += this.GetDecimalSeparatorRegExpString(ASPx.PossibleNumberDecimalSeparators[i]);
  }
  this.allowSymbolRegExp = new RegExp("[-0-9" + allowDecimalSeparatorSymbols + "]");
  this.validNumberRegExp = new RegExp("^[-]?[0-9]*[" + decimalSeparator + "]?[0-9]*([0-9]+)?$");
  var validFormattedNumberRegExpString = "^[-]?[0-9]*[" + decimalSeparator + "]?[0-9]";
  if(this.decimalPlaces != 0)
   validFormattedNumberRegExpString += "{0," + this.decimalPlaces + "}$";
  else
   validFormattedNumberRegExpString += "*([0-9]+)?$";
  this.validFormattedNumberRegExp = new RegExp(validFormattedNumberRegExpString);
 },
 GetDecimalSeparatorRegExpString: function(decimalSeparator) {
  return decimalSeparator == "." ? "\\." : decimalSeparator;
 },
 ChangeNumber: function(offset) {
  if(!this.GetReadOnly()) {
   var newNumber = this.GetValidNumber(ASPx.CorrectRounding(this.number, offset), this.number);
   if(newNumber != this.number) {
    this.SetNumberInternal(newNumber);
    if(ASPx.Browser.VirtualKeyboardSupported && !this.focused) {
     setTimeout(function() {
      this.OnValueChanged();
     }.bind(this), ASPx.FOCUS_TIMEOUT);
    }
    else{
     this.OnValueChanged();
    }
   }
   ASPx.Selection.Set(this.GetInputElement());
  }
 },
 isSpinButtonIndex: function(buttonIndex) {
  return this.largeDecButtonIndex == buttonIndex
   || this.incButtonIndex == buttonIndex
   || this.decButtonIndex == buttonIndex
   || this.largeIncButtonIndex == buttonIndex;
 },
 processInternalButtonClickCore: function(buttonIndex) {
  var ret = false;
  if(!ASPx.Browser.TouchUI || !this.lockButtonApply) {
   this.isInternalButtonClickProcessed = true;
   try {
    this.ParseValueAfterPaste();
    if(this.largeDecButtonIndex == buttonIndex) {
     this.ChangeNumber(-this.largeInc);
     ret = true;
    } else if(this.incButtonIndex == buttonIndex) {
     this.ChangeNumber(this.inc);
     ret = true;
    } else if(this.decButtonIndex == buttonIndex) {
     this.ChangeNumber(-this.inc);
     ret = true;
    } else if(this.largeIncButtonIndex == buttonIndex) {
     this.ChangeNumber(this.largeInc);
     ret = true;
    }
   } 
   finally {
    this.isInternalButtonClickProcessed = false;
   }
  }
  return ret;
 },
 GetCorrectNumberInRange: function(number) {
  if(this.IsNull(number))
   if(this.allowNull)
    return null;
   else
    number = 0;
  if(this.UseRestrictions() && number > this.maxValue)
   number = this.maxValue;
  if(this.UseRestrictions() && number < this.minValue)
   number = this.minValue;
  return number;
 },
 IsNull: function(number) {
  return isNaN(number) || ASPxClientSpinEditBase.prototype.IsNull.call(this, number);
 },
 GetValidNumber: function(number, oldNumber) {
  var validNumber = 0;
  if(this.UseRestrictions() && number < this.minValue && (this.number == null || number > this.number))
   validNumber = this.minValue;
  else if(this.UseRestrictions() && number > this.maxValue && (this.number == null || number < this.number))
   validNumber = this.maxValue;
  else if((!this.UseRestrictions() || number <= this.maxValue) &&
   (!this.UseRestrictions() || number >= this.minValue))
   validNumber = number;
  else
   validNumber = this.number;
  if(!this.IsFloatNumber())
   validNumber = Math.round(validNumber);
  if((this.maxLength > 0) && (validNumber.toString().length > this.maxLength))
   validNumber = oldNumber;
  return validNumber;
 },
 GetValueType: function() {
  return this.IsFloatNumber() ? "Decimal" : "Int";
 },
 GetFormattedNumber: function(number) {
  if(number == null)
   return "";
  var value = String(number);
  if(ASPx.NumberDecimalSeparator != ".") {
   if(value.indexOf(".") != -1)
    value = value.replace(".", ASPx.NumberDecimalSeparator);
  }
  value = this.GetCorrectFormattedNumberString(value);
  return value;
 },
 IsFloatNumber: function() {
  return this.numberType == "f";
 },
 ConvertToStringWithCorrectSeparator: function(string) {
  for(var i = 0; i < ASPx.PossibleNumberDecimalSeparators.length; i++)
   if(ASPx.PossibleNumberDecimalSeparators[i] !== ASPx.NumberDecimalSeparator)
    string = string.replace(ASPx.PossibleNumberDecimalSeparators[i], ASPx.NumberDecimalSeparator);
  return string;
 },
 ParseValue: function(callByApi, withSelection) {
  if(!ASPx.IsExists(withSelection))
   withSelection = true;
  if(this.isValidating) 
   withSelection = false;
  var valueString = this.GetInputNumber();
  var newNumber = this.ParseValueInternal(valueString);
  var currentNumber = this.number;
  if(this.IsNull(newNumber) || newNumber !== currentNumber) {
   var correctedNewNumber = this.GetCorrectNumberInRange(newNumber);
   this.SetNumberInternal(correctedNewNumber, withSelection);
   if(!callByApi && (correctedNewNumber !== currentNumber || this.IsValueChangeForced() && !this.IsValueChanging())) {
    this.StartValueChanging();
    this.OnValueChanged();
    this.EndValueChanging();
   }
  } else {
   return this.SetFormattedNumberInInput(newNumber, withSelection);
  }
 },
 ParseValueAfterPaste: function() {
  if(this.isChangingCheckProcessed) {
   this.ParseValue(false);
   this.isChangingCheckProcessed = false;
  }
 },
 ParseValueOnPaste: function() {
  var newNumber = null;
  var inputElement = this.GetInputElement();
  if(ASPx.IsExistsElement(inputElement)) {
   var valueString = inputElement.value;
   if(valueString != "") {
    valueString = this.ConvertToStringWithCorrectSeparator(valueString);
    if(!this.IsValidNumberString(valueString)) {
     valueString = this.lastValue;
     inputElement.value = this.lastValue;
    }
    else
     this.lastValue = valueString;
   }
   newNumber = this.ParseValueInternal(valueString);
   if(newNumber != null)
    this.SetFormattedNumberInInput(!ASPx.Browser.AndroidMobilePlatform ? newNumber : valueString); 
  }
  return newNumber;
 },
 ParseValueInternal: function(value) {
  if(value == null || value.toString() == "")
   return null;
  if(ASPx.NumberDecimalSeparator != ".") {
   if(value.indexOf(ASPx.NumberDecimalSeparator) != -1)
    value = value.replace(ASPx.NumberDecimalSeparator, ".");
  }
  if(typeof (value) == "number")
   return value;
  return this.ParseNumber(value.toString(), this.GetValueType());
 },
 ParseNumber: function(value, type) {
  if(type == "Decimal")
   return parseFloat(value);
  return parseInt(value);
 },
 RaiseValueChangedEvent: function() {
  return this.OnNumberChanged();
 },
 SetNumberInternal: function(value, withSelection) {
  if(!ASPx.IsExists(withSelection))
   withSelection = true;
  var roundedValue = this.RoundNumber(value);
  this.number = this.GetCorrectNumberInRange(roundedValue);
  this.SetFormattedNumberInInput(this.number, withSelection);
  if(this.HasTextDecorators())
   this.SyncRawValue();
 },
 RoundNumber: function(number) {
  if(this.decimalPlaces <= 0 || number == null)
   return number;
  return parseFloat(number.toFixed(this.decimalPlaces));
 },
 processInputFocusOrSelection: function(inputElement) {
  var needToProcessInputSelection = !ASPx.Browser.VirtualKeyboardSupported || (this.focused && !ASPx.VirtualKeyboardUI.focusableInputElementIsActive(this));
  if(needToProcessInputSelection)
   ASPx.Selection.Set(inputElement, inputElement.selectionStart, inputElement.selectionEnd); 
  else if(this.isInternalButtonClickProcessed)
   ASPx.VirtualKeyboardUI.focusEditor(this);
 },
 SetFormattedNumberInInput: function(number, withSelection) {
  if(!ASPx.IsExists(withSelection))
   withSelection = true;
  var inputElement = this.GetInputElement();
  if(inputElement != null) {
   var formattedNumber = this.GetFormattedNumber(number);
   if(formattedNumber.toString() != inputElement.value) {
    inputElement.value = formattedNumber;
    if(this.HasTextDecorators()) {
     this.SyncRawValue();
     if(this.CanApplyTextDecorators() && this.isValidating)
      inputElement.value = this.GetDecoratedText(formattedNumber);
    }
   }
   if(withSelection)
    this.processInputFocusOrSelection(inputElement);
   this.UpdateLastCorrectValueString();
  }
 },
 UseRestrictions: function() {
  return (this.maxValue != 0 || this.minValue != 0);
 },
 UpdateLastCorrectValueString: function() {
  this.lastValue = this.GetInputNumber();
 },
 GetValue: function() {
  var number = this.GetInputNumber();
  if(!ASPx.IsExists(number))
   return null;
  if(number == "")
   return null;
  else
   return this.number;
 },
 SetValue: function(number) {
  if(typeof(number) === "string" && number !== "")
   number = parseFloat(number);
  this.SetNumberInternal(number, false);
  ASPxClientSpinEditBase.prototype.SetValue.call(this, this.GetFormattedNumber(this.number));
 },
 ClearEditorValueAndForceOnChange: function() {
  var savedLockValueChanged = this.lockValueChanged;
  this.lockValueChanged = false;
  ASPxClientSpinEditBase.prototype.ClearEditorValueAndForceOnChange.call(this);
  this.lockValueChanged = savedLockValueChanged;
 },
 ClearEditorValueByClearButtonCore: function() {
  if(this.allowNull === false) 
   this.SetNumber(0);
  else
   ASPxClientSpinEditBase.prototype.ClearEditorValueByClearButtonCore.call(this);
 },
 OnKeyPress: function(evt) {
  ASPxClientSpinEditBase.prototype.OnKeyPress.call(this, evt);
  if(!this.IsValueChangeAllowed()) return;
  if(this.valueChangedProcsCalledBeforeLostFocus)
   this.valueChangedProcsCalledBeforeLostFocus = false;
  var inputElement = this.GetInputElement();
  if(!inputElement) {
   if(this.pasteTimerID != -1)
    this.ClearTextChangingTimer();
   return;
  }
  this.keyUpProcessing = true;
  if(ASPx.IsPasteShortcut(evt)) {
   this.keyUpProcessing = false;
   return true;
  }
  if(evt.altKey || evt.ctrlKey || ASPx.Browser.MacOSPlatform && evt.metaKey)
   return true;
  if(this.IsSpecialKey(evt, false)) {
   this.keyUpProcessing = true;
   return true;
  }
  var keyCode = ASPx.Evt.GetKeyCode(evt);
  var selectionStart = inputElement.selectionStart;
  var selectionEnd = inputElement.selectionEnd;
  var pressed = String.fromCharCode(keyCode);
  if(!this.IsAllowableSymbol(pressed) && keyCode !== ASPx.Key.Enter) {
   this.keyUpProcessing = false;
   return ASPx.Evt.PreventEvent(evt); 
  }
  if(this.IsSignSymbol(pressed)) {
   var isAllowTypeNumberSignSymbol = this.IsAllowTypeNumberSignSymbol(selectionStart, selectionEnd);
   this.keyUpProcessing = isAllowTypeNumberSignSymbol;
   return isAllowTypeNumberSignSymbol ? true : ASPx.Evt.PreventEvent(evt);  
  }
  if(this.IsDecimalSeparatorSymbol(pressed)) {
   var isAllowTypeDecimalSeparator = this.IsAllowTypeDecimalSeparatorSymbol(selectionStart, selectionEnd);
   if(isAllowTypeDecimalSeparator)
    this.TypeDecimalSeparator(selectionStart, selectionEnd);
   this.keyUpProcessing = isAllowTypeDecimalSeparator;
   return ASPx.Evt.PreventEvent(evt);
  }
  if(!this.IsAllowTypeDigitToCurrentPosition(selectionStart, selectionEnd, pressed) && keyCode !== ASPx.Key.Enter) {
   this.keyUpProcessing = false;
   return ASPx.Evt.PreventEvent(evt); 
  }
  return true;
 },
 OnKeyUp: function(evt) {
  ASPxClientSpinEditBase.prototype.OnKeyUp.call(this, evt);
  this.isKeyPressed = false;
  if(this.isPasteShortcutProcessing)
   this.isPasteShortcutProcessing = false;
  if(this.keyUpProcessing) {
   this.UpdateLastCorrectValueString();
   this.keyUpProcessing = false;
  }
  if(this.IsPageOrArrowKey(evt))
   this.OnPageOrArrowKeyUp();
  if(this.UseRestrictions() && this.outOfRangeWarningManager) {
   var valueString = this.GetInputElement().value;
   var currentNumber = this.ParseValueInternal(valueString);
   this.outOfRangeWarningManager.UpdateOutOfRangeWarningElementVisibility(!isNaN(currentNumber) ? currentNumber : null);
  }
 },
 OnKeyDown: function(evt) {
  this.isKeyPressed = true;
  if(ASPx.IsPasteShortcut(evt))
   this.isPasteShortcutProcessing = true;
  if(evt.keyCode == ASPx.Key.Enter)
   this.OnTextChanged();
  ASPxClientSpinEditBase.prototype.OnKeyDown.call(this, evt);
  if(this.IsPageOrArrowKey(evt))
   this.OnPageOrArrowKeyDown(evt);
  if(ASPx.Browser.WebKitFamily && this.IsSpecialKey(evt, true))
   this.keyUpProcessing = true;
 },
 OnPageOrArrowKeyDown: function(evt) {
  var btnIndex = this.GetButtonIndexByKeyCode(ASPx.Evt.GetKeyCode(evt), evt.ctrlKey);
  if(ASPx.Browser.Opera)
   this.StartButtonRepeatClickTimer(btnIndex, 60, 1);
  else {
   this.ProcessInternalButtonClick(btnIndex);
   ASPx.Evt.PreventEvent(evt);
  }
 },
 OnPageOrArrowKeyUp: function(evt) {
  if(ASPx.Browser.Opera)
   this.ClearButtonRepeatClickTimer();
 },
 IsValueChangeAllowed: function() {
  return !this.GetReadOnly() && this.clientEnabled; 
 },
 OnFocusCore: function() {
  if(this.IsValueChangeAllowed()) {
   this.SaveIEOnValueChangedEmulationData();
  }
  ASPxClientSpinEditBase.prototype.OnFocusCore.call(this);
  if(this.IsValueChangeAllowed() && !ASPx.GetControlCollection().InCallback())
   this.SetTextChangingTimer();
 },
 OnLostFocus: function() {
  if(this.isInitialized && this.IsValueChangeAllowed()) {
   this.ClearTextChangingTimer();
   this.EmulateOnValueChanged();
  }
  ASPxClientSpinEditBase.prototype.OnLostFocus.call(this);
  if (this.outOfRangeWarningManager)
   this.outOfRangeWarningManager.HideOutOfRangeWarningElement();
 },
 OnLostFocusCore: function() {
  if(this.lockValueChanged && !this.IsFocusEventsLocked())
   ASPxClientSpinEditBase.prototype.OnValueChanged.call(this);
  ASPxClientSpinEditBase.prototype.OnLostFocusCore.call(this);
 },
 OnNumberChanged: function() {
  var processOnServer = ASPxClientSpinEditBase.prototype.RaiseValueChangedEvent.call(this);
  processOnServer = this.RaiseNumberChanged(processOnServer);
  if(this.focused)
   this.valueChangedProcsCalledBeforeLostFocus = true;
  return processOnServer;
 },
 OnValueChanged: function() {
  if(!this.lockValueChanged)
   ASPxClientSpinEditBase.prototype.OnValueChanged.call(this);
 },
 OnMouseOver: function(evt) {
  ASPxClientSpinEditBase.prototype.OnMouseOver.call(this);
  if(ASPx.Evt.IsLeftButtonPressed(evt) && !this.HasTextDecorators())
   this.OnTextChangingCheck();
 },
 OnMouseWheel: function(evt) {
  if(!this.allowMouseWheel || !this.GetEnabled())
   return;
  this.ParseValue(false);
  var wheelDelta = ASPx.Evt.GetWheelDelta(evt);
  if(wheelDelta > 0)
   this.ChangeNumber(this.inc);
  else if(wheelDelta < 0)
   this.ChangeNumber(-this.inc);
  if(this.UseRestrictions() && this.outOfRangeWarningManager)
   this.outOfRangeWarningManager.UpdateOutOfRangeWarningElementVisibility(this.GetValue());
  ASPx.Evt.PreventEvent(evt);
 },
 OnTextChangingCheck: function(evt) {
  var curValueString = this.GetInputNumber();
  this.isChangingCheckProcessed = true;
  if((this.lastValue != curValueString) && !this.keyUpProcessing) {
   if(this.isKeyPressed && !this.isPasteShortcutProcessing) { 
    this.lastValue = curValueString;
    return;
   }
   var isChromeOnAndroid = ASPx.Browser.AndroidMobilePlatform && ASPx.Browser.Chrome;
   var difIsLastDS = (this.lastValue + ASPx.NumberDecimalSeparator) == curValueString;
   if(!(isChromeOnAndroid && difIsLastDS))
    this.OnPaste();
  }
 },
 OnPaste: function() {
  var newNumber = this.ParseValueOnPaste();
  if (this.UseRestrictions() && this.outOfRangeWarningManager)
   this.outOfRangeWarningManager.UpdateOutOfRangeWarningElementVisibility(newNumber);
 },
 OnTextChanged: function() {
  this.ParseValue(false, false);
 },
 GetButtonIndexByKeyCode: function(keyCode, ctrl) {
  var ret = 0;
  switch (keyCode) {
   case ASPx.Key.Up:
    ret = ctrl ? this.largeIncButtonIndex : this.incButtonIndex;
    break;
   case ASPx.Key.Down:
    ret = ctrl ? this.largeDecButtonIndex : this.decButtonIndex;
    break;
   case ASPx.Key.PageUp:
    ret = this.largeIncButtonIndex;
    break;
   case ASPx.Key.PageDown:
    ret = this.largeDecButtonIndex;
    break;
  }
  return ret;
 },
 SaveIEOnValueChangedEmulationData: function() {
  this.valueChangedProcsCalledBeforeLostFocus = false;
  this.inputValueBeforeFocus = this.GetInputNumber();
 },
 EmulateOnValueChanged: function() {
  if(!this.valueChangedProcsCalledBeforeLostFocus) {
   if(this.GetInputNumber() != this.inputValueBeforeFocus) {
    this.OnTextChanged();
    this.RaiseValidationInternal();
    this.RaisePersonalStandardValidation();
   }
  }
 },
 SetTextChangingTimer: function() {
  if(this.pasteTimerID === -1)
   this.pasteTimerID = ASPx.Timer.SetControlBoundInterval(this.OnTextChangingCheck, this, ASPx.PasteCheckInterval);
 },
 ClearTextChangingTimer: function() {
  this.pasteTimerID = ASPx.Timer.ClearInterval(this.pasteTimerID);
 },
 IsAllowableSymbol: function(symbol) {
  return this.allowSymbolRegExp.test(symbol);
 },
 IsAllowTypeNumberSignSymbol: function(selectionStart, selectionEnd) {
  var curValueString = this.GetInputElement().value.toString();
  if((curValueString != null) && this.IsSignSymbol(curValueString.charAt(0)))
   return (selectionStart == 0) && (selectionEnd > 0);
  else
   return (selectionStart == 0);
 },
 IsAllowTypeDecimalSeparatorSymbol: function(selectionStart, selectionEnd) {
  if(this.maxLength > 0 && selectionStart >= this.maxLength)
   return false;
  var unselectedText = this.GetUnselectedText(selectionStart, selectionEnd);
  var decimalSepIndex = unselectedText.indexOf(ASPx.NumberDecimalSeparator);
  if((this.decimalPlaces != 0) && (decimalSepIndex == -1)) {
   var possibleValueString = this.GetPossibleValueString(selectionStart, selectionEnd, ASPx.NumberDecimalSeparator);
   return this.IsValidFormattedNumberString(possibleValueString);
  }
  return decimalSepIndex == -1;
 },
 IsAllowTypeDigitToCurrentPosition: function(selectionStart, selectionEnd, pressedSymbol) {
  var possibleValueString = this.GetPossibleValueString(selectionStart, selectionEnd, pressedSymbol);
  var decimalSepIndex = possibleValueString.indexOf(ASPx.NumberDecimalSeparator);
  if((this.decimalPlaces != 0) && (decimalSepIndex != -1))
   return this.IsValidFormattedNumberString(possibleValueString);
  return true;
 },
 IsValidNumberString: function(numString) {
  return this.validNumberRegExp.test(numString);
 },
 IsValidFormattedNumberString: function(numString) {
  return this.validFormattedNumberRegExp.test(numString);
 },
 GetCorrectFormattedNumberString: function(numString) {
  var ret = numString;
  if(!this.IsValidFormattedNumberString(numString)) {
   if(numString.toLowerCase().indexOf("e") > -1)
    numString = ASPxClientSpinEdit.RemoveExponentialNotation(numString);
   var decimalSepIndex = numString.indexOf(ASPx.NumberDecimalSeparator);
   if(decimalSepIndex > -1) {
    ret = numString.substring(0, decimalSepIndex);
    if(this.IsFloatNumber()) {
     if(this.decimalPlaces > 0)
      ret += numString.substr(decimalSepIndex, this.decimalPlaces + 1);
     else
      ret += numString.substr(decimalSepIndex);
    }
   }
   else
    ret = numString;
  }
  return ret;
 },
 GetPossibleValueString: function(selectionStart, selectionEnd, pressedSymbol) {
  var curValueString = this.GetInputElement().value.toString();
  var newValueString = curValueString.substring(0, selectionStart);
  newValueString += pressedSymbol;
  var selectionLength = selectionEnd - selectionStart;
  newValueString += curValueString.substr(selectionEnd, curValueString.length - selectionLength);
  return newValueString;
 },
 GetUnselectedText: function (selectionStart, selectionEnd) {
  return this.GetPossibleValueString(selectionStart, selectionEnd, "");
 },
 IsDecimalSeparatorSymbol: function(symbol) {
  for(var i = 0; i < ASPx.PossibleNumberDecimalSeparators.length; i++)
   if(ASPx.PossibleNumberDecimalSeparators[i] == symbol)
    return true;
  return false;
 },
 IsValidMinMaxValue: function(minValue, maxValue) {
  if(typeof (maxValue) != "number")
   maxValue = this.ParseValueInternal(maxValue.toString());
  if(typeof (minValue) != "number")
   minValue = this.ParseValueInternal(minValue.toString());
  return (isNaN(maxValue) || isNaN(minValue)) ? false : (maxValue >= minValue);
 },
 IsSpecialKey: function(evt, inKeyDown) {
  var keyCode = ASPx.Evt.GetKeyCode(evt);
  return keyCode == 0 || keyCode == ASPx.Key.Backspace || keyCode == ASPx.Key.Tab ||
   (inKeyDown && keyCode == ASPx.Key.Delete) || keyCode > 60000 ;
 },
 IsPageOrArrowKey: function(evt) {
  var keyCode = ASPx.Evt.GetKeyCode(evt);
  if(ASPx.Browser.Opera && evt.ctrlKey && (keyCode == ASPx.Key.Up || keyCode == ASPx.Key.Down))
   return false;
  else
   return keyCode == ASPx.Key.Up || keyCode == ASPx.Key.Down ||
     keyCode == ASPx.Key.PageUp || keyCode == ASPx.Key.PageDown;
 },
 IsSignSymbol: function(symbol) {
  return symbol == "-";
 },
 TypeDecimalSeparator: function(selectionStart, selectionEnd) {
  var possibleValueString = this.GetPossibleValueString(selectionStart, selectionEnd, ASPx.NumberDecimalSeparator);
  var inputElement = this.GetInputElement();
  inputElement.value = possibleValueString;
  var decimalSepIndex = possibleValueString.indexOf(ASPx.NumberDecimalSeparator);
  ASPx.Selection.SetCaretPosition(inputElement, decimalSepIndex + 1); 
 },
 GetInputNumber: function() {
  if(!this.focused && this.HasTextDecorators())
   return this.GetRawValue();
  var element = this.GetInputElement();
  return ASPx.IsExistsElement(element) ? element.value : null;
 },
 GetDecoratedText: function(value) {
  if(typeof value == "string") {
   if(!!this.displayFormat)
    value = this.ParseValueInternal(value);
   else if(ASPx.NumberDecimalSeparator !== ".")
    value = value.replace(ASPx.NumberDecimalSeparator, '.');
  }
  var result = ASPxClientSpinEditBase.prototype.GetDecoratedText.call(this, value).toString();
  if(!this.displayFormat && ASPx.NumberDecimalSeparator !== ".") 
   result = result.replace('.', ASPx.NumberDecimalSeparator);
  return result;
 },
 EnsureOutOfRangeWarningManager: function() {
  this.ensureOutOfRangeWarningManager(this.minValue, this.maxValue, this.GetDefaultMinValue(), this.GetDefaultMaxValue());
 },
 RaiseNumberChanged: function(processOnServer) {
  if(!this.NumberChanged.IsEmpty()) {
   var args = new ASPxClientProcessingModeEventArgs(processOnServer);
   this.NumberChanged.FireEvent(this, args);
   processOnServer = args.processOnServer;
  }
  return processOnServer;
 },
 SetNumber: function(number) {
  this.SetValue(number);
 },
 GetNumber: function() {
  return this.number;
 },
 GetText: function () {
  if(this.maskInfo != null)
   return this.maskInfo.GetText();
  else {
   var isNullText = this.number === null && this.nullText !== "";
   var inputElementText = this.GetInputNumber();
   return isNullText ? "" : this.GetDecoratedText(inputElementText).toString();
  }
 },
 SetText: function(text) {
  ASPxClientSpinEditBase.prototype.SetValue.call(this, text);
  this.ParseValue(true, false);
  if(this.HasTextDecorators() && this.CanApplyTextDecorators()) {
   var inputElement = this.GetInputElement();
   if(ASPx.IsExistsElement(inputElement))
    inputElement.value = this.GetDecoratedText(this.GetInputNumber());
  }
  if(this.styleDecoration)
   this.styleDecoration.Update();
 },
 SetMinValue: function(value) {
  if(this.IsValidMinMaxValue(value, this.maxValue)) {
   this.minValue = this.ParseValueInternal(value.toString());
   this.EnsureCurrentNumberInBoundries();
   if (this.showOutOfRangeWarning) {
    this.EnsureOutOfRangeWarningManager();
    this.outOfRangeWarningManager.SetMinValue(this.minValue);
   }
  }
 },
 GetMinValue: function() {
  return this.minValue;
 },
 SetMaxValue: function(value) {
  if(this.IsValidMinMaxValue(this.minValue, value)) {
   this.maxValue = this.ParseValueInternal(value.toString());
   this.EnsureCurrentNumberInBoundries();
   if (this.showOutOfRangeWarning) {
    this.EnsureOutOfRangeWarningManager();
    this.outOfRangeWarningManager.SetMaxValue(this.maxValue);
   }
  }
 },
 GetMaxValue: function() {
  return this.maxValue;
 },
 EnsureCurrentNumberInBoundries: function() {
  var value = this.GetValue();
  this.SetNumber(this.GetCorrectNumberInRange(value));
 },
 GetParsedNumber: function() {
  var inputElement = this.GetInputElement();
  var valueString = inputElement.value;
  var newNumber = this.ParseValueInternal(valueString);
  return this.GetCorrectNumberInRange(newNumber);
 },
 RestoreSelectionStartAndEndPosition: function() {
  var inputElement = this.GetInputElement();
  ASPx.Selection.Set(inputElement, inputElement.selectionStart, inputElement.selectionEnd);
 }
});
ASPxClientSpinEdit.Cast = ASPxClientControl.Cast;
var ASPxClientSpinEditConsts = {
 INT_32_MAX_VALUE: 2147483647,
 INT_32_MIN_VALUE: -2147483648,
 DECIMAL_MIN_VALUE: -79228162514264337593543950335,
 DECIMAL_MAX_VALUE: 79228162514264337593543950335
};
ASPxClientSpinEdit.RemoveExponentialNotation = function(numString) {
 var mantissaPossition = numString.toLowerCase().indexOf("e");
 var ret = numString;
 if(mantissaPossition > -1) {
  var isNegative = numString.indexOf("-") == 0;
  var isNegativeMantissa = numString.lastIndexOf("-") > 0;
  var mantissa = numString.replace(new RegExp('^[+-]?([0-9]*\.?[0-9]+|[0-9]+\.?[0-9]*)([eE][+-]?)'), "");
  var numberBase = numString.replace(new RegExp('([eE][+-]?[0-9]+)'), "");
  numberBase = numberBase.replace("+", "");
  numberBase = numberBase.replace("-", "");
  var decimalDecimalSeparator = ".";
  if(numberBase.indexOf(decimalDecimalSeparator) == -1) {
   numberBase = numberBase.replace(decimalDecimalSeparator, ASPx.NumberDecimalSeparator);
   decimalDecimalSeparator = ASPx.NumberDecimalSeparator;
  }
  var numberParts = numberBase.split(decimalDecimalSeparator);
  if(numberParts.length == 1)
   numberParts[1] = "";
  var zeroNumbers = parseInt(mantissa, 10);
  if(isNegativeMantissa) {
   zeroNumbers -= 1;
   ret = "0" + ASPx.NumberDecimalSeparator + ASPxClientSpinEdit.GetZeros(zeroNumbers) +
    numberParts[0] + numberParts[1];
  }
  else {
   zeroNumbers -= numberParts[0].length + numberParts[1].length - 1;
   ret = numberParts[0] + numberParts[1] + ASPxClientSpinEdit.GetZeros(zeroNumbers);
  }
  if(isNegative)
   ret = ASPx.Str.Insert(ret, "-", 0);
 }
 return ret;
};
ASPxClientSpinEdit.GetZeros = function(length) {
 var zeros = [];
 for(var i = 0; i < length; i++)
  zeros.push('0');
 return zeros.join("");
};
var ASPxClientInternalValueChangingEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(date, oldInputValue, newInputValue) {
  this.constructor.prototype.constructor.call(this);  
  this.date = date;
  this.oldInputValue = oldInputValue;
  this.newInputValue = newInputValue;
 }
});
var ASPxClientTimeEdit = ASPx.CreateClass(ASPxClientSpinEditBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.date = null;
  this.DateChanged = new ASPxClientEvent();
  this.InternalValueChanging = new ASPxClientEvent();
  this.OwnerDateEdit = null;
  this.allowNull = true;
  this.deleteAllProcessing = false;
  this.isTemporaryNull = false;
  this.isASPxClientTimeEdit = true;
  this.currentCaretPos = 0;
 },
 Initialize: function() {
  ASPxClientSpinEditBase.prototype.Initialize.call(this);
  this.SubscribeInputElementClick();
 },
 InitializeEvents: function() {
  ASPxClientSpinEditBase.prototype.InitializeEvents.call(this);
  if(ASPx.Browser.VirtualKeyboardSupported) {
   ASPx.Evt.AttachEventToElement(this.GetInputElement(), "click", this.UpdateCurrentCaretPosition.bind(this));
   ASPx.Evt.AttachEventToElement(this.GetInputElement(), "keydown", this.UpdateCurrentCaretPosition.bind(this));
  }
 },
 UpdateCurrentCaretPosition: function() {
  setTimeout(function() {
   this.currentCaretPos = this.GetCaretPosition();
  }.bind(this), 0);
 },
 SynchronizeRestoredValue: function() {
  this.SetText(this.initializeInputValue);
  setTimeout(function() { 
   var date = ASPx.MaskDateTimeHelper.GetDate(this.maskInfo, this.date, true);
   this.SetValue(date);
  }.aspxBind(this) , 0);
 },
 IsClearButtonVisibleAuto: function() {
  return this.allowNull && ASPxClientSpinEditBase.prototype.IsClearButtonVisibleAuto.call(this);
 },
 SetNullStateValue: function(value) {
  this.isTemporaryNull = value;
  this.ApplyNullTextClassName(value);
  this.EnsureClearButtonVisibility();
 },
 ApplyNullTextClassName: function (value) {
  if(this.styleDecoration)
   this.styleDecoration.ApplyNullTextClassName(value);
 },
 SubscribeInputElementClick: function() {
  var editor = this;
  ASPx.Evt.AttachEventToElement(this.GetInputElement().parentNode, "click", function(){
   editor.FillMaskInfo();
   if(editor.maskInfo.ApplyFixes(null))
    editor.ApplyMaskInfo(false);
  });
 },
 ApplyMaskInfo: function(applyCaret) { 
  var input = this.GetInputElement();
  var prev =  input.value;
  ASPxClientSpinEditBase.prototype.ApplyMaskInfo.call(this, applyCaret);
  if(prev != input.value) {
   var eventArgs = new ASPxClientInternalValueChangingEventArgs(ASPx.MaskDateTimeHelper.GetDate(this.maskInfo), prev, input.value);
   this.RaiseInternalValueChanging(eventArgs);
  }
 },
 IsMaskInfoEmpty: function() {
  return this.maskInfo && (this.maskInfo.IsEmpty() || this.GetValue() == null);
 },
 SetDate: function(date) {
  this.SetValue(date);
 },
 GetDate: function() {
  return this.date ? new Date(this.date.valueOf()) : null;
 },
 SetValue: function(date) {
  this.date = date;
  ASPx.MaskDateTimeHelper.SetDate(this.maskInfo, date);
  this.ApplyMaskInfo(false);
  this.SavePrevMaskValue();
  if (this.styleDecoration)
   this.styleDecoration.Update();
 },
 GetValue: function() {
  return this.date;
 },
 GetLastSuccesfullValue: function() {
  return this.GetValue();
 },
 OnClear: function() {
  this.SetNullStateValue(true);
  ASPxClientButtonEditBase.prototype.OnClear.call(this);
  this.lastInputValue = this.GetEmptyValueDisplayText();
 },
 ClearEditorValueByClearButtonCore: function() {
  if(this.allowNull === false) {
   this.GetInputElement().value = '';
   this.ParseValue();
  } else
   ASPxClientSpinEditBase.prototype.ClearEditorValueByClearButtonCore.call(this);
 },
 RequireShowClearButtonCore: function() {
  return !this.isTemporaryNull || ASPxClientButtonEditBase.prototype.RequireShowClearButtonCore.call(this);
 },
 GetValueString: function() {
  return this.date != null ? ASPx.DateUtils.GetInvariantDateTimeString(this.date) : null;
 },
 isSpinButtonIndex: function(buttonIndex) {
  return buttonIndex == this.incButtonIndex || buttonIndex == this.decButtonIndex;
 },
 processInternalButtonClickCore: function(buttonIndex) {
  var delta;
  var result = false;
  if(buttonIndex == this.incButtonIndex) {
   delta = 1;
   result = true;
  } else if(buttonIndex == this.decButtonIndex) {
   delta = -1;
   result = true;
  }
  if(result && !this.focused && !this.IsFocusEventsLocked()) 
   this.EnsureNullState();
  if(result && !this.GetReadOnly()) {
   ASPx.MaskManager.OnMouseWheel(this.maskInfo, delta);
   this.ApplyMaskInfo(true);
   this.SetNullStateValue(false);
   this.ParseValue();
  }
  if(ASPx.Browser.VirtualKeyboardSupported) {
   if(!this.focused || ASPx.VirtualKeyboardUI.focusableInputElementIsActive(this)) 
    ASPx.VirtualKeyboardUI.focusEditor(this);
  } else {
   this.SetFocus();
  }
  return result;
 },
 ParseValue: function () {
  var newDate = null;
  var needRollbackValue = !this.allowNull && this.isTemporaryNull;
  if(needRollbackValue)
   newDate = this.date;
  else {
   if(!this.focused && this.allowNull)
    this.LoadNullState();
   newDate = this.isTemporaryNull ? null : ASPx.MaskDateTimeHelper.GetDate(this.maskInfo, this.date, true);
  }
  var changed = !ASPx.DateUtils.AreDatesEqualExact(this.date, newDate);
  this.SetValue(newDate);
  var forceValueChanged = this.IsValueChangeForced() && !this.IsValueChanging();
  if(changed || forceValueChanged) {
   this.StartValueChanging();
   this.RaisePersonalStandardValidation();
   this.OnValueChanged();
   this.EndValueChanging();
  }
 },
 OnTextChanged: function() {
  this.ParseValue();
 },
 RaiseInternalValueChanging: function(eventArgs) {
  if(!this.InternalValueChanging.IsEmpty())
   this.InternalValueChanging.FireEvent(this, eventArgs);
 },
 OnMouseWheel: function(evt) {
  if(!this.allowMouseWheel || !this.GetEnabled())
   return;
  ASPxClientTextEdit.prototype.OnMouseWheel.call(this, evt);
 },
 InvokeActualOnValueChanged: function() {
  ASPxClientEdit.prototype.OnValueChanged.call(this);
 },
 RaiseValueChangedEvent: function() {
  if(!this.isInitialized) return false;
  var processOnServer = ASPxClientEdit.prototype.RaiseValueChangedEvent.call(this);
  processOnServer = this.RaiseDateChanged(processOnServer);
  return processOnServer;
 },
 RaiseDateChanged: function(processOnServer) {
  if(!this.DateChanged.IsEmpty()) {
   var args = new ASPxClientProcessingModeEventArgs(processOnServer);
   this.DateChanged.FireEvent(this, args);
   processOnServer = args.processOnServer;
  }
  return processOnServer;
 },
 GetMaskDisplayText: function() {
  if(!this.focused) {
   if(this.date == null)
    return this.nullText;
   if(this.HasTextDecorators())
    return this.GetDecoratedText(this.date);
  }
  return this.maskInfo.GetText();
 },
 HasTextDecorators: function() {
  return this.date == null || ASPxClientSpinEditBase.prototype.HasTextDecorators.call(this);
 },
 SyncRawValue: function() {
  this.SetRawValue(this.date == null ? "N" : ASPx.DateUtils.ToLocalTime(this.date).valueOf());
 },
 DecodeRawInputValue: function(value) {
  if(value == "N") return null;
  var date = new Date();
  date.setTime(Number(value));
  var result = ASPx.DateUtils.ToUtcTime(date);
  var offsetDiff = ASPx.DateUtils.GetTimeZoneOffsetDifference(result, date);
  if(offsetDiff !== 0)
   result.setTime(result.valueOf() + offsetDiff);
  return result;
 },
 BeginShowMaskHint: function() {
 },
 RequireTrackNullState: function() {
  return !this.GetReadOnly();
 },
 LoadNullState: function() {
  this.SetNullStateValue(this.GetValue() === null);
 },
 EnsureNullState: function () {
  if(this.nullStatePasteTimer > -1)
   return;
  this.LoadNullState();
  if(!this.RequireTrackNullState())
   return;
  this.CreateNullStatePasteTimer();
 },
 CreateNullStatePasteTimer: function() {
  this.nullStatePasteTimer = ASPx.Timer.SetControlBoundInterval(this.OnTextChangingCheck, this, ASPx.PasteCheckInterval);
  this.lastInputValue = this.GetInputElement().value;
 },
 ClearNullStatePasteTimer: function() {
  this.nullStatePasteTimer = ASPx.Timer.ClearInterval(this.nullStatePasteTimer);
 },
 OnTextChangingCheck: function () {
  if(this.GetInputElement().value === this.lastInputValue)
   return;
  if(this.deleteAllProcessing)
   return;
  this.SetNullStateValue(false);
  this.lastInputValue = this.GetInputElement().value;
 },
 OnFocusCore: function () {
  var forceEnsureNullState = !this.IsFocusEventsLocked();
  ASPxClientSpinEditBase.prototype.OnFocusCore.call(this);
  if(forceEnsureNullState)
   this.EnsureNullState();
 },
 OnLostFocusCore: function() {  
  if(!this.IsFocusEventsLocked())
   this.RaiseStandardOnChange();
  ASPxClientEdit.prototype.OnLostFocusCore.call(this);
  this.EndShowMaskHint();
  this.HideMaskHint();  
  if(!this.IsFocusEventsLocked()) {
   if(this.maskInfo.ApplyFixes(null))
    this.ApplyMaskInfo(false);
   this.ClearNullStatePasteTimer();
   this.clearUserInputEventTimerIfRequired();
   this.ApplyNullTextClassName(false);
  }
  var wasLocked = this.IsFocusEventsLocked();
  this.ToggleTextDecoration();
  if(wasLocked)
   this.LockFocusEvents();
  this.EnsureClearButtonVisibility();
  this.EnsureHidePopupHelpText();
 },
 SetSelectionOnToggleTextDecoration: function(input, sel) {
  if(this.GetValue() === null)
   sel.endPos = sel.startPos = 0;
  ASPxClientSpinEditBase.prototype.SetSelectionOnToggleTextDecoration.call(this, input, sel);
 },
 IsDigit: function(symbol) {
  return new RegExp("[0-9]").test(symbol);
 },
 GetInputSelectionInfo: function() {
  var input = this.GetInputElement();
  return ASPx.Selection.GetExtInfo(input);
 },
 IsAllTextSelected: function () {
  var inputSelectionInfo = this.GetInputSelectionInfo();
  var inputSelectionLength = inputSelectionInfo.endPos - inputSelectionInfo.startPos;
  return inputSelectionLength === this.maskInfo.GetSize();
 },
 ProcessKeyInputToEnsureNotNullValue: function(keyEvent) {
  if(!this.RequireTrackNullState() || !this.isTemporaryNull)
   return;
  if(this.NeedResetNullStateOnKeyEvent(keyEvent))
   this.SetNullStateValue(false);
 },
 NeedResetNullStateOnKeyEvent: function(keyEvt) {
  if(keyEvt.type === "keydown" && ASPx.IsPasteShortcut(keyEvt))
   return true;
  if(keyEvt.type === "keypress") {
   var inputValue = this.GetInputElement().value;
   var selInfo = this.GetInputSelectionInfo();
   var startPosSymbol = inputValue.charAt(selInfo.startPos);
   var keySymbol = String.fromCharCode(ASPx.Evt.GetKeyCode(keyEvt));
   return this.IsDigit(keySymbol) && keySymbol === startPosSymbol;
  }
  return false;
 }, 
 OnKeyDown: function (evt) {
  this.ProcessKeyInputToEnsureNotNullValue(evt);
  this.ProcessDeleteAllOnKeyDown(evt);
  ASPxClientSpinEditBase.prototype.OnKeyDown.call(this, evt);
 },
 OnKeyUp: function (evt) {
  ASPxClientSpinEditBase.prototype.OnKeyUp.call(this, evt);
  this.ProcessDeleteAllOnKeyUp(evt);
 },
 OnKeyPress: function (evt) {
  this.ProcessKeyInputToEnsureNotNullValue(evt);
  ASPxClientSpinEditBase.prototype.OnKeyPress.call(this, evt);
 },
 ProcessDeleteAllOnKeyDown: function(keyEvent) {
  if(!this.RequireTrackNullState())
   return;
  if(!this.IsAllTextSelected())
   return;
  var keyCode = ASPx.Evt.GetKeyCode(keyEvent);
  if(keyCode === ASPx.Key.Delete || keyCode === ASPx.Key.Backspace)
   this.deleteAllProcessing = true;
 },
 ProcessDeleteAllOnKeyUp: function(keyEvent) {
  if(!this.RequireTrackNullState())
   return;
  if(!this.deleteAllProcessing)
   return;
  var keyCode = ASPx.Evt.GetKeyCode(keyEvent);
  if(keyCode === ASPx.Key.Delete || keyCode === ASPx.Key.Backspace) {
   this.SetNullStateValue(true);
   this.lastInputValue = this.GetInputElement().value;
   this.deleteAllProcessing = false;
  }
 }
});
ASPxClientTimeEdit.Cast = ASPxClientControl.Cast;
ASPx.Ident.IsASPxClientTimeEdit = function(obj) {
 return !!obj.isASPxClientTimeEdit;
};
var spinEditCollection = null;
function aspxGetSpinEditCollection() {
 if(spinEditCollection == null)
  spinEditCollection = new ASPxClientSpinEditCollection();
 return spinEditCollection;
}
var ASPxClientSpinEditCollection = ASPx.CreateClass(ASPxClientControlCollection, {
 constructor: function() {
  this.constructor.prototype.constructor.call(this);
 },
 GetCollectionType: function(){
  return "SpinEdit";
 },
 GetSpinEdit: function(id) {
  return this.Get(this.GetSpinEditName(id));
 },
 GetSpinEditName: function(id) {
  var pos = id.lastIndexOf(spindButtonIdPostfix);
  if(pos > -1)
   return id.substring(0, pos);
  pos = id.lastIndexOf(ASPx.TEInputSuffix);
  if(pos > -1)
   return id.substring(0, pos);
  return id;
 }
});
ASPx.SEMouseOver = function(name, evt) {
 var edit = ASPx.GetControlCollection().Get(name);
 if(edit != null) edit.OnMouseOver(evt);
};
window.ASPxClientSpinEditBase = ASPxClientSpinEditBase;
window.ASPxClientSpinEdit = ASPxClientSpinEdit;
window.ASPxClientTimeEdit = ASPxClientTimeEdit;
})();

(function() {
var dropDownNameSuffix = "_DDD";
var itemImageCellClassName = "dxeIIC";
var CONSTANTS = {
 DROPDOWN_COMMAND_APPLY: "Apply",
 DROPDOWN_COMMAND_CLOSE: "Close",
 DROPDOWN_HELPTEXT_CLASS: "dxdd-help",
 DROPDOWN_CAPTION_CLASS: "dxdd-caption",
 DROPDOWN_HEADER_CLASS: "dxdd-header",
 DROPDOWN_MODALVISIBLE_CLASS: "dxdd-vmdd"
};
var DROPDOWN_ELEMENT_VISIBILITY = {
 Never: 0,
 DropDown: 1,
 ModalDropDown: 2,
 Always: 3
};
ASPx.DROPDOWN_ELEMENT_VISIBILITY = DROPDOWN_ELEMENT_VISIBILITY;
var ASPxClientDropDownEditBase = ASPx.CreateClass(ASPxClientButtonEditBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.DropDown = new ASPxClientEvent();
  this.CloseUp = new ASPxClientEvent();
  this.QueryCloseUp = new ASPxClientEvent();
  this.ddHeightCache = ASPx.InvalidDimension;
  this.ddWidthCache = ASPx.InvalidDimension;
  this.mainElementWidthCache = ASPx.InvalidDimension;
  this.dropDownButtonIndex = -1;
  this.droppedDown = false;
  this.ddButtonPushed = false;
  this.lastSuccessText = "";
  this.isToolbarItem = false;
  this.allowFocusDropDownWindow = false;
  this.pcIsShowingNow = false;
  this.needTimeoutForInputElementFocusEvent = false;
  this.ddButtonsVis = 0;
  this.ddmInput = false;
  this.ddDefCap = true;
  this.ddScrPicker = ASPx.DROPDOWN_ELEMENT_VISIBILITY.Never;
  this.accessibilityHelper = null;
  aspxGetDropDownCollection().Add(this);
 },
 InitializeEvents: function() {
  ASPxClientButtonEditBase.prototype.InitializeEvents.call(this);
  var ddTargets = this.getDropDownEventTargets();
  ddTargets
   .filter(function(trg, index, arr) { return trg && arr.indexOf(trg) === index; })
   .forEach(function(trg) {
    ASPx.Evt.AttachEventToElement(trg, "click", this.onDropDownEvent.bind(this));
    ASPx.Evt.AttachEventToElement(trg, ASPx.TouchUIHelper.touchMouseDownEventName, this.onDropDownEvent.bind(this));
  }.bind(this));
 },
 getDropDownEventTargets: function() {
  return [
   this.GetDropDownItemImageCell(),
   this.GetDropDownButton()
  ];
 },
 onDropDownEvent: function(evt) {
  if(evt.type === this.getDropDownEvent() && ASPx.Evt.IsLeftButtonPressed(evt) && this.GetEnabled())
   return this.OnDropDown(evt);
 },
 getDropDownEvent: function() {
  return this.isDropDownModal() || ASPx.Browser.MobileUI && !ASPx.Browser.MacOSMobilePlatform ? "click" : ASPx.TouchUIHelper.touchMouseDownEventName;
 },
 Initialize: function(){
  this.initializePopupControl();
  this.AssignClientAttributes();
  this.InitLastSuccessText();
  if(this.accessibilityCompliant && ASPx.IsExists(this.GetAccessibilityAssistantElement())) {
   this.GotFocus.AddHandler(function() { 
    this.ariaExplanatoryTextManager.SetHelperLabel(); 
   }.aspxBind(this));
  }
  ASPxClientButtonEditBase.prototype.Initialize.call(this);
 },
 initializePopupControl: function() {
  var pc = this.GetPopupControl();
  if(!pc) return;
  pc.usedInDropDown = true;
  pc.dropDownEditName = this.name;
  pc.setFocusOnCallback = false;
  this.initializeDropDown(pc);
 },
 initializeDropDown: function(pc) {
  pc = pc || this.GetPopupControl();
  if(!pc)
   return;
  if(this.ddmBP !== undefined) {
   pc.AdaptiveModeChanged.AddHandler(function() {
    this.onDropDownModalChanged(pc.GetAdaptiveModalMode());
   }.bind(this));
   pc.PopUp.AddHandler(function() {
    if(pc.GetAdaptiveModalMode())
     this.onDropDownModalChanged(true);
   }.bind(this));
   pc.Closing.AddHandler(function() {
    if(pc.GetAdaptiveModalMode())
     this.onDropDownModalChanged(false);
   }.bind(this));
  }
  this.initializeDropDownCommandButtons(pc);
  if(this.flSettings) {
   this.initializeDropDownContent(pc, this.flSettings.caption, this.flSettings.helpText);
   delete this.flSettings;
  }
 },
 initializeDropDownCommandButtons: function(pc) {
  this.dropDownCommandButtons = {};
  [CONSTANTS.DROPDOWN_COMMAND_APPLY, CONSTANTS.DROPDOWN_COMMAND_CLOSE].forEach(function(cmd) {
   var button = this.createDropDownCommandButtonClientInstance(pc, cmd);
   if(button) {
    button.allowFocus = false;
    button.useSubmitBehavior = false;
    button.causesValidation = false;
    button.accessibilityCompliant = this.accessibilityCompliant;
    button.Click.AddHandler(this.onDropDownCommandButtonClick.bind(this, cmd));
    button.InlineInitialize();
    this.dropDownCommandButtons[cmd] = button;
   }
  }.bind(this));
  this.ensureDropDownApplyCommandState();
 },
 createDropDownCommandButtonClientInstance: function(pc, cmd) {
  var buttonElementSelector = "." + CONSTANTS.DROPDOWN_HEADER_CLASS + " .dxbButtonSys[id*=" + cmd + "]";
  var popupContentContainer = pc.GetContentContainer(-1);
  var buttonElement = popupContentContainer ? popupContentContainer.querySelector(buttonElementSelector) : null;
  return buttonElement ? new ASPxClientButton(buttonElement.id) : null;  
 },
 initializeDropDownContent: function(pc, caption, helpText) {
  if(this.ddmBP === undefined)
   return;
  var container = pc.GetContentContainer(-1);
  if(helpText) {
   var helpTextContainer = container.querySelector(CONSTANTS.DROPDOWN_HELPTEXT_CLASS);
   if(!helpTextContainer) {
    helpTextContainer = document.createElement("div");
    helpTextContainer.innerHTML = this.HtmlEncode(helpText);
    helpTextContainer.className = CONSTANTS.DROPDOWN_HELPTEXT_CLASS + " " + CONSTANTS.DROPDOWN_MODALVISIBLE_CLASS;
    container.appendChild(helpTextContainer);
   }
  }
  if(caption && this.ddDefCap) {
   var captionContainer = container.querySelector("." + CONSTANTS.DROPDOWN_CAPTION_CLASS);
   if(!captionContainer) {
    captionContainer = document.createElement("div");
    captionContainer.className = CONSTANTS.DROPDOWN_CAPTION_CLASS + " " + CONSTANTS.DROPDOWN_MODALVISIBLE_CLASS;
    var headerContainer = container.querySelector("." + CONSTANTS.DROPDOWN_HEADER_CLASS);
    if(!headerContainer) {
     headerContainer = document.createElement("div");
     headerContainer.className = CONSTANTS.DROPDOWN_HEADER_CLASS + " " + CONSTANTS.DROPDOWN_MODALVISIBLE_CLASS;
     container.insertBefore(headerContainer, container.firstChild);
    }
    headerContainer.insertBefore(captionContainer, headerContainer.firstChild);
   }
   captionContainer.innerHTML = this.HtmlEncode(caption);
  }
 },
 InitLastSuccessText: function(){
  var rawText = this.GetTextInternal();
  this.SetLastSuccessText(rawText);
 },
 AssignClientAttributes: function(){
  var element = this.GetDropDownButton();
  if(ASPx.IsExistsElement(element))
   ASPx.Evt.PreventElementDragAndSelect(element, true);
 },
 SetReadOnlyInternal: function(readOnly) {
  ASPxClientButtonEditBase.prototype.SetReadOnlyInternal.call(this, readOnly);
  if(this.isDropDownModal())
   this.ensureDropDownModalInputVisibility();
  this.ensureDropDownApplyCommandState();
 },
 SetEnabled: function(enabled) {
  ASPxClientButtonEditBase.prototype.SetEnabled.call(this, enabled);
  this.ensureDropDownApplyCommandState();
 },
 GetDropDownButton: function(){
  return this.GetButton(this.dropDownButtonIndex);
 },
 GetButtonCollection: function(){
  var buttonElements = ASPxClientButtonEditBase.prototype.GetButtonCollection.call(this);
  var dropDownButtonElement = this.GetDropDownButton();
  if(ASPx.IsExists(dropDownButtonElement))
   buttonElements.push(dropDownButtonElement);
  return buttonElements;
 },
 GetPopupControl: function(){
  var pc = ASPx.GetControlCollection().Get(this.name + dropDownNameSuffix);
  if(pc && pc.GetWindowElement(-1))
   return pc;
  else
   return null;
 },
 GetDropDownWindow: function() {
  var pc = this.GetPopupControl();
  if(pc)
   return pc.GetWindowElement(-1);
  return null;
 },
 GetDropDownInnerControlName: function(suffix){
  var pc = this.GetPopupControl();
  if(pc)
   return this.GetPopupControl().name + suffix;
  return "";
 },
 GetDropDownItemImageCell: function() {
  return ASPx.GetNodesByPartialClassName(this.GetMainElement(), itemImageCellClassName)[0];
 },
 GetIsControlWidthWasChanged: function(){
  return this.mainElementWidthCache == ASPx.InvalidDimension || this.mainElementWidthCache != this.GetMainElement().clientWidth;
 },
 GetDropDownHeight: function(){
  return null;
 },
 GetDropDownWidth: function(){
  return null;
 },
 GetDropDownIsWindowElement: function(id, pcPostfix) {
  var pos = id.lastIndexOf(pcPostfix);
  if(pos != -1) {
   var name = id.substring(0, pos);
   var pc = ASPx.GetPopupControlCollection().Get(name);
   if(pc && pc.dropDownEditName)
    return aspxGetDropDownCollection().Get(pc.dropDownEditName);
  }
  return null;
 },
 GetDropDownParents: function() {
  var parents = [ ];
  var mainElement = this.GetMainElement();
  var element = mainElement.parentNode;
  while(element != null){
   if(element.tagName == "BODY")
    break;
   var dropDown = this.GetElementIsDropDownParent(element);
   if(dropDown != null)
    parents.push(dropDown);
   element = element.parentNode;
  }
  return parents.reverse();
 },
 GetElementIsDropDownParent: function(element) {
  return ASPx.Attr.IsExistsAttribute(element, "id") 
   ? this.GetDropDownIsWindowElement(ASPx.Attr.GetAttribute(element, "id"), ASPx.PCWIdSuffix + "-1") : null;
 },
 BeforePopupControlResizing: function() {
 },
 AfterPopupControlResizing: function() {
 },
 AfterPopupControlShown: function() {
 },
 ShowDropDownArea: function(isRaiseEvent, forceSize) {
  this.SetPCIsShowingNow(true);
  aspxGetDropDownCollection().RegisterDroppedDownControl(this, this.GetDropDownParents());
  if(!this.droppedDown) 
   this.SetLockListBoxClick();
  this.lockClosing = true; 
  var pc = this.GetPopupControl();
  var element = this.GetMainElement();
  var pcwElement = pc.GetCurrentWindowElement();
  pc.OnBeforeDropdownShow();
  if(ASPx.Browser.Chrome && pcwElement.clientHeight <= 0) 
   this.RestorePopupInsideNonStaticPositionedContainer();
  var height = forceSize ? forceSize.height : this.GetDropDownHeight();
  var width = forceSize ? forceSize.width : this.GetDropDownWidth();
  this.BeforePopupControlResizing();
  if(this.ddHeightCache != height || this.ddWidthCache != width || forceSize) {
   pc.SetSize(width, height);
   if(!forceSize) {
    this.ddHeightCache = height;
    this.ddWidthCache = width;
   }
  }
  this.AfterPopupControlResizing();
  if(ASPx.Browser.Chrome && pcwElement.clientHeight <= 0) 
   this.RestorePopupInsideNonStaticPositionedContainer();
  this.RaiseDropDownEventRequired = isRaiseEvent;
  pc.ShowAtElement(element, true);
  this.AfterPopupControlShown();
  this.droppedDown = true;
  this.lockClosing = false;
 },
 HideDropDownArea: function(isRaiseEvent){
  if(this.lockClosing || !this.droppedDown) return;
  if(!this.RaiseQueryCloseUp()) {
   return;
  }
  this.RemoveLockListBoxClick();
  this.DropDownButtonPop();
  var pc = this.GetPopupControl();
  if(pc){
   aspxGetDropDownCollection().UnregisterDroppedDownControl(this);
   pc.Hide();
   if(isRaiseEvent)
    this.RaiseCloseUp();
   this.droppedDown = false;
  }
 },
 RaiseLostFocus: function() {
  this.ensureDropDownClosedOnLostFocus();
  ASPxClientButtonEditBase.prototype.RaiseLostFocus.call(this);
 },
 ensureDropDownClosedOnLostFocus: function() {
  if(!this.isDropDownModal() && this.droppedDown)
   this.HideDropDownArea(true);
 },
 RestorePopupInsideNonStaticPositionedContainer: function() {
  var pc = this.GetPopupControl();
  var pcwElement = pc.GetCurrentWindowElement();
  var pcwParentElement = pcwElement.parentNode;
  var offsetParentElement = pcwElement.offsetParent;
  if(!offsetParentElement || offsetParentElement.tagName == "BODY") return;
  pcwParentElement.style.position = "relative";
  setTimeout(
   function() { 
    pcwParentElement.style.position = "";
    if(this.focused)
     pc.ShowAtElement(this.GetMainElement());
   }.aspxBind(this), 0);
 },
 SetLockListBoxClick: function() {
  this.lockListBoxClick = true;
 },
 RemoveLockListBoxClick: function() {
  delete this.lockListBoxClick;
 },
 ProcessInternalButtonClick: function(buttonIndex) {
  return this.dropDownButtonIndex == buttonIndex;
 },
 ToggleDropDown: function(){
  this.OnApplyChanges();
  if(this.droppedDown)
   this.HideDropDownArea(true);
  else
   this.ShowDropDownArea(true);  
 },
 GetTextInternal: function(){
  var text = ASPxClientButtonEditBase.prototype.GetValue.call(this);
  return text != null ? text : "";
 },
 SetTextInternal: function(text){
  if(!this.GetReadOnly())
   this.SetTextBase(text);
 },
 SetTextBase: function(text) {
  ASPxClientButtonEditBase.prototype.SetValue.call(this, text);
 },
 SetValue: function(value) {
  ASPxClientButtonEditBase.prototype.SetValue.call(this, value);
  this.SetLastSuccessText(this.GetTextInternal());
 },
 SetLastSuccessText: function(text){
  var tmpText = text;
  if(text == null) tmpText = "";
  else if(typeof(text) != "string")
     tmpText = text.toString();
  this.lastSuccessText = tmpText;
 },
 SetVisible: function(visible) {
  ASPxClientButtonEditBase.prototype.SetVisible.call(this, visible);
  if(!visible)
   this.HideDropDown();
 },
 RollbackTextInputValue: function () {
  this.SetTextBase(this.lastSuccessText);
 },
 SetPCIsShowingNow: function(value){
  this.pcIsShowingNow = value;
 },
 GetLastSuccesfullValue: function() {
  return this.lastSuccessText !== '' ? this.lastSuccessText : null;
 },
 GetAccessibilityHelper: function() {
  if(!this.accessibilityCompliant)
   return null;
  if(!this.accessibilityHelper)
   this.accessibilityHelper = this.CreateAccessibilityHelper();
  return this.accessibilityHelper;
 },
 CreateAccessibilityHelper: function() {
  return new ASPx.AccessibilityHelperBase(this);
 },
 CreateAriaExplanatoryTextManager: function() {
  if(this.accessibilityCompliant)
   return new DropDownAccessibilityExplanatoryTextManager(this);
  else 
   return new ASPx.DisableAccessibilityExplanatoryTextManager(this);
 },
 GetAccessibilityText: function() {
  var labelText = "";
  var helperContainer = this.GetAccessibilityAssistantElement();
  if(ASPx.IsExists(helperContainer))
   labelText = ASPx.Attr.GetAttribute(helperContainer, "aria-label");
  return !!labelText ? labelText : this.GetTextInternal();
 },
 GetAccessibilityActiveElements: function() {
  var helperContainer = this.GetAccessibilityAssistantElement();
  if(!this.accessibilityCompliant || !ASPx.IsExists(helperContainer))
   return [this.GetInputElement()];
  return [this.GetAccessibilityHelper().GetActiveElement(true)];
 },
 OnValueChanged: function() {
  this.SetLastSuccessText(this.GetTextInternal());
  ASPxClientEdit.prototype.OnValueChanged.call(this);
 },
 OnApplyChanges: function(){
 },
 OnCancelChanges: function(){
  var isCancelProcessed = (this.GetTextInternal() != this.lastSuccessText);
  this.SetTextInternal(this.lastSuccessText);
  return isCancelProcessed;
 },
 OnFocusCore: function () {
  if(!this.CorrectFocusWhenDisabled())
   this.OnFocusInternal();
 },
 OnFocusInternal: function() {
  this.OnSetFocus(true);
  ASPxClientButtonEditBase.prototype.OnFocusCore.call(this);
 },
 OnLostFocus: function(){
  this.OnSetFocus(false);
  ASPxClientButtonEditBase.prototype.OnLostFocus.call(this);
 },
 OnSetFocus: function(isFocused){
  aspxGetDropDownCollection().SetFocusedDropDownName(isFocused ? this.name : "");
 },
 IsEditorElement: function(element) {
  if(ASPxClientButtonEditBase.prototype.IsEditorElement.call(this, element))
   return true;
  if(this.allowFocusDropDownWindow)
   return false;
  var pc = this.GetPopupControl();
  if(pc != null) {
   var windowElement = pc.GetCurrentWindowElement();
   return windowElement == element || ASPx.GetIsParent(windowElement, element);
  }
  return false;
 },
 OnPopupControlShown: function(){
  this.SetPCIsShowingNow(false);
  if(this.RaiseDropDownEventRequired){
   this.RaiseDropDownEventRequired = false;
   window.setTimeout(function() { this.RaiseDropDown(); }.aspxBind(this), 0);
  }
 },
 IsCanToDropDown: function(){
  return true;
 },
 OnDropDown: function(evt) { 
  if(!this.isInitialized) 
   return true;
  if(evt.type === ASPx.TouchUIHelper.touchMouseDownEventName && ASPx.Evt.GetEventSource(evt) === this.GetInputElement())
   this.OnMouseDown();
  if(!this.IsCanToDropDown()) {
   this.ForceRefocusEditor(evt);
   return true;
  }
  if(ASPx.Browser.Opera){
   if(!this.droppedDown) {
    ASPx.Evt.EmulateOnMouseDown(this.GetMainElement(), evt);
    ASPx.GetStateController().ClearSavedCurrentPressedElement();
   }
  }
  this.OnDropDownCore(evt);
  if(this.needCancelBubbleDropDownEvent())
   return ASPx.Evt.CancelBubble(evt); 
  return true;
 },
 OnDropDownCore: function(evt) {
  if(!this.droppedDown)
   this.DropDownButtonPush();
  this.ToggleDropDown();
  var isNativeFocus = this.isNativeFocus(evt);
  if(!isNativeFocus || (!ASPx.Browser.MacOSMobilePlatform && !ASPx.Browser.AndroidMobilePlatform))
   this.ForceRefocusEditor(evt, isNativeFocus);
 },
 isNativeFocus: function(evt) {
  var inputElement = this.GetInputElement();
  return !!inputElement ? this.IsElementBelongToInputElement(ASPx.Evt.GetEventSource(evt)) : false;
 },
 needCancelBubbleDropDownEvent: function() {
  return true;
 },
 DropDownButtonPush: function(){
  if(this.droppedDown || this.ddButtonPushed) return;
  this.ddButtonPushed = true;
  if(ASPx.Browser.Opera)
   this.DropDownButtonPushPop(true);
  else
   this.DropDownButtonPushMozilla();
 }, 
 DropDownButtonPop: function(force){
  if((!this.droppedDown || !this.ddButtonPushed) && !force) return;
  this.ddButtonPushed = false;
  if(ASPx.Browser.Opera)
   this.DropDownButtonPushPop(false);
  else
   this.DropDownButtonPopMozilla();
 },
 DropDownButtonPushPop: function(isPush){
  var buttonElement = this.GetDropDownButton();
  if(buttonElement){
   var controller = ASPx.GetStateController();
   var element = controller.GetPressedElement(buttonElement);
   if(element){
    if(isPush){
     controller.SetCurrentHoverElement(null);
     controller.DoSetPressedState(element);
    } else {
     controller.DoClearPressedState(element);
     controller.SetCurrentPressedElement(null);
     controller.SetCurrentHoverElement(element);
    }
   }
  }
 },
 DropDownButtonPushMozilla: function(){
  this.DisableStyleControllerForDDButton();
  var controller = ASPx.GetStateController();
  controller.savedCurrentPressedElement = null;
 },
 DropDownButtonPopMozilla: function(){
  this.EnableStyleControllerForDDButton();
  var controller = ASPx.GetStateController();
  var buttonElement = this.GetDropDownButton();
  if(buttonElement){
   var element = controller.GetPressedElement(buttonElement);
   if(element)
    controller.DoClearPressedState(element);
   controller.currentPressedElement = null;
   element = controller.GetHoverElement(buttonElement);
   if(element)
    controller.SetCurrentHoverElement(element);
  }
 },
 EnableStyleControllerForDDButton: function(){
  var element = this.GetDropDownButton();
  if(element){
   var controller = ASPx.GetStateController();
   this.ReplaceElementControlStyleItem(controller.hoverItems, ASPx.HoverItemKind, element, this.ddButtonHoverStyle);
   this.ReplaceElementControlStyleItem(controller.pressedItems, ASPx.PressedItemKind, element, this.ddButtonPressedStyle);
   this.ReplaceElementControlStyleItem(controller.selectedItems, ASPx.SelectedItemKind, element, this.ddButtonSelectedStyle);
  }
 },
 DisableStyleControllerForDDButton: function(){
  var element = this.GetDropDownButton();
  if(element){
   var controller = ASPx.GetStateController();
   this.ddButtonHoverStyle = this.ReplaceElementControlStyleItem(controller.hoverItems, ASPx.HoverItemKind, element, null);
   this.ddButtonPressedStyle = this.ReplaceElementControlStyleItem(controller.pressedItems, ASPx.PressedItemKind, element, null);
   this.ddButtonSelectedStyle = this.ReplaceElementControlStyleItem(controller.selectedItems, ASPx.SelectedItemKind, element, null);
  }
 },
 ReplaceElementControlStyleItem: function(items, kind, element, newStyleItem){
  var styleItem = items[element.id];
  items[element.id] = newStyleItem;
  element[kind] = newStyleItem;
  return styleItem;
 },
 CloseDropDownByDocumentOrWindowEvent: function(causedByWindowResizing){
  if(!causedByWindowResizing || !this.pcIsShowingNow)
   this.HideDropDownArea(true);
 },
 OnDocumentMouseUp: function() {
  this.DropDownButtonPop();
 },
 OnDDButtonMouseMove: function(evt){
 },
 ShouldCloseOnMCMouseDown: function () {
  return true;
 },
 OnMainCellMouseDown: function (evt) {
  if(this.ShouldCloseOnMCMouseDown())
   this.OnCloseUp(evt);
 },
 OnCloseUp: function (evt) {
  this.HideDropDownArea(true);
 },
 OnOpenAnotherDropDown: function(){
  this.HideDropDownArea(true);
 },
 OnTextChanged: function() {
  if(!this.ChangedByEnterKeyPress())
   this.OnTextChangedInternal();
 },
 OnTextChangedInternal: function() {
  this.ParseValue();
 },
 ChangedByEnterKeyPress: function() {
  if(ASPx.Browser.Firefox || ASPx.Browser.WebKitFamily) 
   if(this.enterKeyPressed) {
    this.enterKeyPressed = false;
    return true;
   } 
  return false;
 },
 ChangeEnabledAttributes: function(enabled){
  ASPxClientButtonEditBase.prototype.ChangeEnabledAttributes.call(this, enabled);
  var btnElement = this.GetDropDownButton();
  if(btnElement)
   this.ChangeButtonEnabledAttributes(btnElement, this.GetChangeButtonEnabledAttributesMethod(enabled));
  var inputElement = this.GetInputElement();
  if(inputElement)
   this.ChangeInputCellEnabledAttributes(inputElement.parentNode, ASPx.Attr.ChangeAttributesMethod(enabled));
  var imageCell = this.GetDropDownItemImageCell();
  if(ASPx.IsExists(imageCell))
   this.ChangeImageCellEnabledAttributes(imageCell, ASPx.Attr.ChangeAttributesMethod(enabled));
 },
 ChangeEnabledStateItems: function(enabled){
  ASPxClientButtonEditBase.prototype.ChangeEnabledStateItems.call(this, enabled);
  var btnElement = this.GetDropDownButton();
  if(btnElement)
   ASPx.GetStateController().SetElementEnabled(btnElement, enabled);
 },
 ChangeInputCellEnabledAttributes: function(element, method){
  method(element, "onclick");
  method(element, "onkeyup");
  if(ASPx.Browser.Edge)
   method(element, "onmousedown");
  method(element, "on" + ASPx.TouchUIHelper.touchMouseDownEventName);
  method(element, "on" + ASPx.TouchUIHelper.touchMouseUpEventName);
 },
 ChangeImageCellEnabledAttributes: function(imageCell, method){
  method(imageCell, "onmousedown");
 },
 InitializeKeyHandlers: function() {
  this.AddKeyDownHandler(ASPx.Key.Enter, "OnEnter");
  this.AddKeyDownHandler(ASPx.Key.Esc, "OnEscape");
  this.AddKeyDownHandler(ASPx.Key.PageUp, "OnPageUp");
  this.AddKeyDownHandler(ASPx.Key.PageDown, "OnPageDown");
  this.AddKeyDownHandler(ASPx.Key.End, "OnEndKeyDown");
  this.AddKeyDownHandler(ASPx.Key.Home, "OnHomeKeyDown");
  this.AddKeyDownHandler(ASPx.Key.Left, "OnArrowLeft");
  this.AddKeyDownHandler(ASPx.Key.Right, "OnArrowRight");
  this.AddKeyDownHandler(ASPx.Key.Up, "OnArrowUp");
  this.AddKeyDownHandler(ASPx.Key.Down, "OnArrowDown");
  this.AddKeyDownHandler(ASPx.Key.Tab, "OnTab");
 },
 OnArrowUp: function(evt){
  if(evt.altKey) {
   this.ToggleDropDown();
   return true;
  }
  return false;
 },
 OnArrowDown: function(evt){
  if(evt.altKey) {
   this.ToggleDropDown();
   return true;
  }
  return false;
 },
 OnPageUp: function(evt){
  return false;
 }, 
 OnPageDown: function(evt){
  return false;
 },
 OnEndKeyDown: function(evt){
  return false;
 },
 OnHomeKeyDown: function(evt){
  return false;
 },
 OnArrowLeft: function(evt){
  return false;
 },
 OnArrowRight: function(evt){
  return false;
 },
 OnEscape: function(evt){
  return this.OnEscapeInternal();
 },
 OnEscapeInternal: function() {
  var isCancelProcessed = this.OnCancelChanges() || this.droppedDown;
  this.HideDropDownArea(true);
  return isCancelProcessed;
 },
 OnEnter: function(evt){
  return false;
 },
 OnTab: function(evt){
  return false;
 },
 isDropDownModalRequired: function() {
  return this.ddmBP && window.innerWidth < this.ddmBP;
 },
 isDropDownModal: function(undefinedIfPopupIsDifferent) {
  var result = this.isDropDownModalRequired();
  if(undefinedIfPopupIsDifferent) {
   var pc = this.GetPopupControl();
   if(pc && pc.GetAdaptiveModalMode(-1) != result)
    return undefined;
  }
  return !!result;
 },
 onDropDownModalChanged: function(enabled) {
  if(!this.ddmInput)
   return;
  if(enabled)
   this.enableDropDownModal();
  else
   this.disableDropDownModal();
  if(this.focusedNullTextElement)
   this.ensureAdjustFocusedNullTextElement();
 },
 enableDropDownModal: function() {
  this.loadMainElementHeight();
  var pc = this.GetPopupControl();
  var contentContainer = pc.GetContentContainer(-1);
  var inputContainer = contentContainer.querySelector(".dxdd-input");
  var inputElement = this.GetInputElement();
  inputContainer.appendChild(inputElement);
  if(this.focusedNullTextElement)
   inputContainer.appendChild(this.focusedNullTextElement);
  this.initializeDropDownModalClearButton(inputContainer);
  if(this.dropDownModalClearButton)
   this.EnsureClearButtonVisibility();
  this.ensureDropDownModalInputVisibility(inputContainer);
 },
 disableDropDownModal: function() {
  this.resetMainElementHeight();
  var inputElement = this.GetInputElement();
  this.getInputCell().appendChild(inputElement);
  if(this.focusedNullTextElement)
   this.getInputCell().appendChild(this.focusedNullTextElement);
 },
 loadMainElementHeight: function() {
  var mainElement = this.GetMainElement();
  var mainElementHeight = mainElement.style.height;
  if(!mainElementHeight) {
   var currentHeight = mainElement.getBoundingClientRect().height;
   mainElement.style.height = currentHeight + "px";
   ASPx.Attr.SetAttribute(mainElement, "data-hasAssignedHeight", true);
  }
 },
 resetMainElementHeight: function() {
  var mainElement = this.GetMainElement();
  var hasAssignedHeight = ASPx.Attr.GetAttribute(mainElement, "data-hasAssignedHeight");
  if(hasAssignedHeight) {
   mainElement.style.height = "";
   ASPx.Attr.RemoveAttribute(mainElement, "data-hasAssignedHeight");
  }
 },
 ensureDropDownModalInputVisibility: function(inputContainer) {
  if(!inputContainer && this.ddmInput) {
   var pc = this.GetPopupControl();
   inputContainer = pc && pc.GetContentContainer(-1).querySelector(".dxdd-input");
  }
  if(!inputContainer)
   return;
  ASPx.ToggleClassNameToElement(inputContainer, "dxdd-readonly", this.GetReadOnly() || !this.GetEnabled());
 },
 onDropDownCommandButtonClick: function(command) {
  if(command === CONSTANTS.DROPDOWN_COMMAND_APPLY)
   this.onDropDownApplyCommandClick();
  this.onDropDownCloseCommandClick();
 },
 onDropDownApplyCommandClick: function() {
  throw "Not Implemented";
 },
 onDropDownCloseCommandClick: function() {
  throw "Not Implemented";
 },
 ensureDropDownApplyCommandState: function() {
  if(!this.dropDownCommandButtons)
   return;
  var button = this.dropDownCommandButtons[CONSTANTS.DROPDOWN_COMMAND_APPLY];
  if(button)
   button.SetEnabled(this.isDropDownApplyCommandEnabled());
 },
 isDropDownApplyCommandEnabled: function() {
  return this.GetEnabled() && !this.GetReadOnly();
 },
 initializeDropDownModalClearButton: function(inputContainer) {
  if(this.dropDownModalClearButton === undefined) {
   this.dropDownModalClearButton = inputContainer.querySelector(this.getDropDownModalClearButtonSelector()) || null;
   if(this.dropDownModalClearButton)
    ASPx.Evt.AttachEventToElement(this.dropDownModalClearButton, "click", this.onClearButtonClick.bind(this));
  }
 },
 getDropDownModalClearButtonSelector: function() {
  return ".dxdd-clearbutton";
 },
 EnsureClearButtonVisibility: function() {
  ASPxClientButtonEditBase.prototype.EnsureClearButtonVisibility.call(this);
  if(this.dropDownModalClearButton && this.isDropDownModal())
   ASPx.SetElementDisplay(this.dropDownModalClearButton, this.RequireShowClearButton());
 },
 applyFormLayoutItemSettings: function(settings) {
  var pc = this.GetPopupControl();
  if(pc)
   this.initializeDropDownContent(pc, settings.caption, settings.helpText);
  else
   this.flSettings = settings;
 },
 getInputCell: function() {
  var cell = ASPxClientButtonEditBase.prototype.getInputCell.call(this);
  return ASPx.ElementHasCssClass(cell, "dxic") ? cell : this.GetMainElement().querySelector(".dxic");
 },
 RaiseCloseUp: function(){
  if(!this.CloseUp.IsEmpty()){
   var args = new ASPxClientEventArgs();
   this.CloseUp.FireEvent(this, args);
  }
 },
 RaiseDropDown: function(){
  if(!this.DropDown.IsEmpty() && this.isInitialized){
   var args = new ASPxClientEventArgs();
   this.DropDown.FireEvent(this, args);
  }
 },
 RaiseQueryCloseUp: function(){
  if(!this.QueryCloseUp.IsEmpty() && this.isInitialized) {
   var args = new ASPxClientCancelEventArgs();
   this.QueryCloseUp.FireEvent(this, args);
   return !args.cancel;
  }
  return true;
 },
 AdjustDropDownWindow: function(){
  var pc = this.GetPopupControl();
  if(pc) {
   pc.AdjustSize();
   pc.UpdatePositionAtElement(this.GetMainElement());
  }
 },
 ResetDropDownSizeCache: function(){
  this.ddHeightCache = ASPx.InvalidDimension;
  this.ddWidthCache = ASPx.InvalidDimension;
 },
 ShowDropDown: function(){
  if(!this.droppedDown)
   this.ShowDropDownArea(false);
 },
 HideDropDown: function(){
  if(this.droppedDown)
   this.HideDropDownArea(false);
 }
});
var ASPxClientDropDownEdit = ASPx.CreateClass(ASPxClientDropDownEditBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.LostFocusInternal = new ASPxClientEvent();
  this.dropDownWindowHeight = "";
  this.dropDownWindowWidth = "";
  this.allowFocusDropDownWindow = true;
  this.needAdjustControlsInDropDownWindow = true;
  this.DropDownCommandButtonClick = new ASPxClientEvent();
 },
 UseSpecialKeyboardHandling: function() {
  return true;
 },
 getDropDownEventTargets: function() {
  return ASPxClientDropDownEditBase.prototype.getDropDownEventTargets.call(this).concat([
   this.shouldDropDownOnMCMouseDown() ? this.getInputCell() : null,
  ]);
 },
 shouldDropDownOnMCMouseDown: function() {
  return this.readOnly || !this.allowUserInput;
 },
 ShouldCloseOnMCMouseDown: function() {
  return !this.shouldDropDownOnMCMouseDown();
 },
 InitializeEvents: function() {
  this.LostFocus.AddHandler(this.ProcessLostFocus.aspxBind(this));
  this.QueryCloseUp.AddHandler(this.ProcessQueryCloseUp.aspxBind(this));
  ASPxClientDropDownEditBase.prototype.InitializeEvents.call(this);
 },
 BeforePopupControlResizing: function() {
  var divContainer = this.GetDropDownDivContainer();
  if(divContainer && this.needAdjustControlsInDropDownWindow) {
   this.AdjustControlsInDropDownWindow();
   ASPx.SetElementDisplay(divContainer, false);
  }
 },
 AfterPopupControlResizing: function() {
  var divContainer = this.GetDropDownDivContainer();
  if(divContainer && this.needAdjustControlsInDropDownWindow) {
   ASPx.SetElementDisplay(divContainer, true);
   this.AdjustControlsInDropDownWindow();
   this.needAdjustControlsInDropDownWindow = false;
  }
 },
 AdjustControlsInDropDownWindow: function() {
  var pc = this.GetPopupControl();
  var pcwElement = pc.GetCurrentWindowElement();
  ASPx.GetControlCollection().ProcessControlsInContainer(pcwElement, function(control) {
   control.AdjustControl(false);
  });
 },
 GetDropDownDivContainer: function() {
  return ASPx.GetElementById(this.name + dropDownNameSuffix + "_DDDC");
 },
 GetDropDownHeight: function(){
  if(this.dropDownWindowHeight != "")
   return this.dropDownWindowHeight;
  return ASPxClientDropDownEditBase.prototype.GetDropDownHeight.call(this);
 },
 GetDropDownWidth: function(){
  if(this.dropDownWindowWidth != "")
   return this.dropDownWindowWidth;
  return this.GetMainElement().offsetWidth;
 },
 CloseDropDownByDocumentOrWindowEvent: function(causedByWindowResizing){
  if(!ASPx.GetPopupControlCollection().WindowResizeByBodyScrollVisibilityChangingLocked())
   ASPxClientDropDownEditBase.prototype.CloseDropDownByDocumentOrWindowEvent.call(this, causedByWindowResizing);
 },
 OnBrowserWindowResize: function(e){
  this.needAdjustControlsInDropDownWindow = true;
 },
 OnEnter: function(evt){
  return this.droppedDown;
 },
 OnEscape: function(evt){
  var isCancelProcessed = this.droppedDown;
  this.HideDropDownArea(true);
  return isCancelProcessed;
 },
 OnTextChanged: function() {
  this.OnValueChanged();
 },
 ProcessLostFocus: function() {
  if(!this.droppedDown)
   this.RaiseLostFocusInternal();
 },
 ProcessQueryCloseUp: function() {
  if(this.focused)
   return;
  var forceRefocusTimeout = 150;
  setTimeout(function() {
   if(!this.IsDropDownContainsFocus())
    this.RaiseLostFocusInternal();
  }.aspxBind(this), forceRefocusTimeout);
 },
 IsDropDownContainsFocus: function() {
  return ASPx.GetIsParent(this.GetDropDownWindow(), ASPx.GetActiveElement());
 },
 GetKeyValueInternal: function(){
  if(ASPx.IsExists(this.stateObject))
   return this.stateObject.keyValue;
  return null;
 },
 SetKeyValueInternal: function(keyValue){
  this.UpdateStateObjectWithObject({ keyValue: keyValue });
 },
 GetValueString: function() {
  var value = this.GetKeyValue();
  return (value === null || value === "") ? ASPxClientDropDownEditBase.prototype.GetValueString.call(this) : value.toString();
 },
 onDropDownCommandButtonClick: function(action) {
  this.raiseDropDownCommandButtonClick(action);
 },
 raiseDropDownCommandButtonClick: function(command) {
  var args = new ASPxClientDropDownCommandEventArgs(command);
  if(!this.DropDownCommandButtonClick.IsEmpty())
   this.DropDownCommandButtonClick.FireEvent(this, args);
  return !args.cancel;
 },
 GetKeyValue: function(){
  return this.GetKeyValueInternal();
 },
 SetKeyValue: function(keyValue){
  this.SetKeyValueInternal(keyValue);
 },
 RaiseLostFocusInternal: function() {
  if(!this.isInitialized)
   return;
  this.ensureDropDownClosedOnLostFocus();
  if(this.LostFocusInternal.IsEmpty())
   return;
  var args = new ASPxClientEventArgs();
  this.LostFocusInternal.FireEvent(this, args);
 },
 ensureDropDownClosedOnLostFocus: function() { }
});
ASPxClientDropDownEdit.Cast = ASPxClientControl.Cast;
var ASPxClientDropDownCollection = ASPx.CreateClass(ASPxClientControlCollection, {
 constructor: function() {
  this.constructor.prototype.constructor.call(this);
  this.droppedControlName = "";
  this.droppedParentNames = [ ];
  this.focusedControlName = "";
 },
 GetCollectionType: function(){
  return "DropDown";
 },
 SetFocusedDropDownName: function(name){
  this.focusedControlName = name;
 },
 ResetDroppedDownControl: function(){
  this.droppedControlName = "";
 },
 ResetDroppedDownParentCollection: function(startDroppedDownControlName) {
  var regArray = [ ];
  for(var i = 0; i < this.droppedParentNames.length; i++) {
   if(this.droppedParentNames[i] == startDroppedDownControlName)
    break;
   regArray.push(this.droppedParentNames[i]);
  }
  this.droppedParentNames = regArray;
  if(this.droppedParentNames.length > 0) {
   this.droppedControlName = this.droppedParentNames[this.droppedParentNames.length - 1];
   ASPx.Data.ArrayRemoveAt(this.droppedParentNames, this.droppedParentNames.length - 1);
  }
 },
 ResetFocusedControl: function(){
  this.focusedControlName = "";
 },
 GetFocusedDropDown: function(){
  var control = this.GetDropDownControlInternal(this.focusedControlName);
  if(control == null) this.ResetFocusedControl();
  return control;
 },
 GetDroppedDropDown: function(){
  var control = this.GetDropDownControlInternal(this.droppedControlName);
  if(control == null) this.ResetDroppedDownControl();
  return control;
 },
 GetDroppedDropDownParents: function(startDroppedDownControlName) {
  var dropDownArray = [ ];
  var isNeedGetControl = false;
  for(var i = 0; i < this.droppedParentNames.length; i++) {
   if(this.droppedParentNames[i] == startDroppedDownControlName) isNeedGetControl = true;
   if(isNeedGetControl) {
    var control = this.GetDropDownControlInternal(this.droppedParentNames[i]);
    if(control != null)
     dropDownArray.push(control);
   }
  }
  return dropDownArray;
 },
 FindFirstNameForClose: function(newDroppedDownParentArray) {
  var firstNameToClose = newDroppedDownParentArray.length > 0 ? "" : this.droppedParentNames[i];
  for(var i = 0; i < this.droppedParentNames.length; i++) {
   if(ASPx.Data.ArrayIndexOf(newDroppedDownParentArray, this.Get(this.droppedParentNames[i])) == -1) {
    firstNameToClose = this.droppedParentNames[i];
    break;
   }
  }
  return firstNameToClose;
 },
 GetDropDownControlInternal: function(name){
  var control = this.Get(name);
  var isControlExists = control && !control.IsDOMDisposed();
  if(!isControlExists)
   control = null;
  return control;
 },
 IsDroppedDropDownParentExist: function(name) {
  for(var i = 0; i < this.droppedParentNames.length; i++) {
   if(this.droppedParentNames[i] == name)
    return true;
  }
  return false;
 },
 OnDDButtonMouseMove: function(evt){
  var dropDownControl = this.GetDroppedDropDown();
  if(dropDownControl != null)
   dropDownControl.OnDDButtonMouseMove(evt);
 },
 OnDocumentMouseDown: function(evt){
  if(ASPxClientControl.documentDropDownMouseDownLocked) return; 
  if(!ASPx.TouchUIHelper.handleFastTapIfRequired(evt, function(){ this.CloseDropDownByDocumentOrWindowEvent(evt, false); }.aspxBind(this), false))
   this.CloseDropDownByDocumentOrWindowEvent(evt, false);
 },
 OnDocumentMouseUp: function(evt){
  var dropDownControl = this.GetDroppedDropDown();
  if(dropDownControl != null)
   dropDownControl.OnDocumentMouseUp();
 },
 OnBrowserWindowResize: function(e){
  if(typeof(ASPx.GetPopupControlCollection) != "undefined" && !ASPx.GetPopupControlCollection().WindowResizeByBodyScrollVisibilityChangingLocked()){
   this.CloseDropDownByDocumentOrWindowEvent(e.htmlEvent, true);
   this.AdjustControls();
  }
 },
 CloseDropDownByDocumentOrWindowEvent: function(evt, causedByWindowResizing){
  var dropDownControl = this.GetDroppedDropDown();
  if(dropDownControl != null && (this.IsEventNotFromControlSelf(evt, dropDownControl) || causedByWindowResizing))
   dropDownControl.CloseDropDownByDocumentOrWindowEvent(causedByWindowResizing);
  var childrenDropDownsToClose = this.GetDroppedDropDownParents(this.droppedParentNames[0]);
  if(childrenDropDownsToClose.length != 0) {
   childrenDropDownsToClose = childrenDropDownsToClose.reverse();
   this.ResetDroppedDownParentCollection(this.droppedParentNames[0]);
   var rollbackDroppedDownNames = [ ];
   for(var c = 0; c < childrenDropDownsToClose.length; c++) {
    if(this.IsEventNotFromControlSelf(evt, childrenDropDownsToClose[c]))
     childrenDropDownsToClose[c].CloseDropDownByDocumentOrWindowEvent(causedByWindowResizing);
    else
     rollbackDroppedDownNames.push(childrenDropDownsToClose[c].name);
   }
   if(rollbackDroppedDownNames != 0) {
    rollbackDroppedDownNames = rollbackDroppedDownNames.reverse();
    this.droppedParentNames = rollbackDroppedDownNames;
   }
  }
 },
 AdjustControls: function(){
  this.ForEachControl(function(control) {
   control.AdjustControl(false);
  });
 },
 IsEventNotFromControlSelf: function(evt, control){
  var srcElement = ASPx.Evt.GetEventSource(evt);
  var mainElement = control.GetMainElement();
  var dropDownWindow = control.GetDropDownWindow();
  if(!srcElement || !mainElement || !dropDownWindow) return true;
  return (!ASPx.GetIsParent(mainElement, srcElement) &&
   !ASPx.GetIsParent(dropDownWindow, srcElement) &&
   !this.IsEventFromSharedPopupOfInnerEditor(dropDownWindow, srcElement));
 },
 IsEventFromSharedPopupOfInnerEditor: function(dropDownWindow, srcElement) {
  var eventFromPopupOfInnerEditor = false;
  ASPx.GetControlCollection().ProcessControlsInContainer(dropDownWindow,
   function(control){
    if(control.calendarOwnerName) {
     var sharedCalendarPopup = control.GetCalendarOwner().GetDropDownWindow();
     if(ASPx.GetIsParent(sharedCalendarPopup, srcElement))
      eventFromPopupOfInnerEditor = true;
    }
  });
  return eventFromPopupOfInnerEditor;
 },
 RegisterDroppedDownControl: function(dropDownControl, droppedDownParentArray){
  var prevDropDownControl = this.GetDroppedDropDown();
  var areDroppedDownsCollectionParents = ASPx.Data.ArrayIndexOf(droppedDownParentArray, prevDropDownControl) != -1;
  if(prevDropDownControl != null && prevDropDownControl != dropDownControl && !areDroppedDownsCollectionParents)
   prevDropDownControl.OnOpenAnotherDropDown();
  if(this.droppedParentNames.length > 0) {
   var firstDropDownsNameToClose = this.FindFirstNameForClose(droppedDownParentArray);
   if(firstDropDownsNameToClose != "") {
    var childrenDropDownsToClose = this.GetDroppedDropDownParents(firstDropDownsNameToClose);
    this.ResetDroppedDownParentCollection(firstDropDownsNameToClose);
    this.CloseDroppedDownCollection(childrenDropDownsToClose.reverse());
   }
  }
  this.droppedControlName = dropDownControl.name;
  this.droppedParentNames = [ ];
  for(var i = 0; i < droppedDownParentArray.length; i++)
   this.droppedParentNames.push(droppedDownParentArray[i].name);
 },
 UnregisterDroppedDownControl: function(dropDownControl){
  if(this.droppedControlName == dropDownControl.name)
   this.ResetDroppedDownControl();
  if(this.IsDroppedDropDownParentExist(dropDownControl.name)) {
   var prevDropDownControl = this.GetDroppedDropDown();
   if(prevDropDownControl != null)
    prevDropDownControl.OnOpenAnotherDropDown();
   var childrenDropDownsToClose = this.GetDroppedDropDownParents(dropDownControl.name);
   this.ResetDroppedDownParentCollection(dropDownControl.name);
   ASPx.Data.ArrayRemoveAt(childrenDropDownsToClose, 0);
   this.CloseDroppedDownCollection(childrenDropDownsToClose.reverse());
  }
 },
 CloseDroppedDownCollection: function(dropDownParentArray) {
  for(var c = 0; c < dropDownParentArray.length; c++)
   dropDownParentArray[c].OnOpenAnotherDropDown();
 }
});
var DropDownAccessibilityExplanatoryTextManager = ASPx.CreateClass(ASPx.EditAccessibilityExplanatoryTextManager , {
 constructor: function(editor) {
  this.constructor.prototype.constructor.call(this, editor);
 },
 SetHelperLabel: function() {
  var pronounceText = this.editor.GetAccessibilityText();
  var labelElements = ASPx.FindAssociatedLabelElements(this.editor);
  if(labelElements.length > 0) {
   var labelText = labelElements.map(function(label) { return ASPx.GetInnerText(label); }).join(" ");
   if(pronounceText.indexOf(labelText) < 0)
    pronounceText = labelText + " " + pronounceText;
  }
  var pronounceElement = !!this.editor.accessibilityHelper ? 
   this.editor.accessibilityHelper.getItem(true) : 
   this.editor.GetAccessibilityAssistantElement();
  ASPx.Attr.SetAttribute(pronounceElement, "aria-label", pronounceText);
  var textElement = this.GetTextElement();
  if(ASPx.IsExists(textElement)) {
   if(!ASPx.IsExists(ASPx.Attr.GetAttribute(this.editor.GetInputElement(), 'aria-activedescendant')))
    pronounceElement = this.editor.GetInputElement();
   this.SetOrRemoveText([pronounceElement], textElement, true, false, false);
   setTimeout(function() {
    this.SetOrRemoveText([pronounceElement], textElement, false, false, false);
   }.aspxBind(this), 500);
  }
 }
});
var ASPxClientDropDownCommandEventArgs = ASPx.CreateClass(ASPxClientCancelEventArgs, {
 constructor: function (command) {
  this.constructor.prototype.constructor.call(this);
  this.commandName = command;
 }
});
var dropDownCollection = null;
function aspxGetDropDownCollection() {
 if(dropDownCollection == null)
  dropDownCollection  = new ASPxClientDropDownCollection();
 return dropDownCollection;
}
ASPx.Ident.IsASPxClientDateEdit = function(obj) {
 return !!obj.isASPxClientDateEdit;
};
ASPx.DDMC_MD = function(name, evt) {
 var dd = ASPx.GetControlCollection().Get(name);
 if(dd)
  dd.OnMainCellMouseDown(evt);
};
ASPx.DDBPCShown = function(name){
 var cb = ASPx.GetControlCollection().Get(name);
 if(cb != null) cb.OnPopupControlShown();
};
ASPx.CBLBSelectedIndexChanged = function(name, evt){
 var cb = ASPx.GetControlCollection().Get(name);
 if(cb != null) cb.OnLBSelectedIndexChanged();
};
ASPx.CBLBItemMouseUp = function(name, evt){
 var cb = ASPx.GetControlCollection().Get(name);
 if(cb != null) cb.OnListBoxItemMouseUp(evt);
};
ASPx.Evt.AttachEventToDocument(ASPx.TouchUIHelper.touchMouseDownEventName, function(evt) {
 return aspxGetDropDownCollection().OnDocumentMouseDown(evt);
});
ASPx.Evt.AttachEventToDocument(ASPx.TouchUIHelper.touchMouseUpEventName, function(evt) {
 return aspxGetDropDownCollection().OnDocumentMouseUp(evt);
});
window.ASPxClientDropDownEditBase = ASPxClientDropDownEditBase;
window.ASPxClientDropDownEdit = ASPxClientDropDownEdit;
ASPx.GetDropDownCollection = aspxGetDropDownCollection;
})();

(function() {
var calendarNameSuffix = "_C";
var timeEditNameSiffix = calendarNameSuffix + "_TE";
var clockNameSiffix = calendarNameSuffix + "_CL";
var lbIPostfixes = ['C', 'I', 'T'];
var verticalTimeSectionClassName = "dxeCalendarVerticalDETS";
var timeSectionFooterClassName = "dxeDETSF";
var calendarWithFullWidthChildsClassName = "dxeCalendarFullWidth";
var calendarWithAutoWidthChildsClassName = "dxeCalendarCollapsed";
var DefaultMinMaxRangeValues = {
 Min: -1,
 Max: 0
};
var ASPxDateRangeHelper = {
 GetCurrentRangeRestrictions: function(dateRangePair) {
  if (dateRangePair.isInRangeMode)
  return {
   startDate: dateRangePair.startDateEdit.GetDate(),
   endDate: dateRangePair.endDateEdit.GetDate()
  };
  else
   return {
    startDate: null,
    endDate: null
   };
 },
 IsBothRangeRestrictionsExist: function (rangeRestricts) {
  return rangeRestricts.startDate && rangeRestricts.endDate;
 },
 IsNegativeRange: function (rangeRestricts) {
  return this.IsBothRangeRestrictionsExist(rangeRestricts)
   && rangeRestricts.startDate > rangeRestricts.endDate;
 },
 IsOneRestrictionExistsOnly: function (rangeRestricts) {
  return this.IsStartRestrictionExistsOnly(rangeRestricts)
   || this.IsEndRestrictionExistsOnly(rangeRestricts);
 },
 IsStartRestrictionExistsOnly: function (rangeRestricts) {
  return rangeRestricts.startDate && !rangeRestricts.endDate;
 },
 IsEndRestrictionExistsOnly: function (rangeRestricts) {
  return !rangeRestricts.startDate && rangeRestricts.endDate;
 },
 AreRestrictionsOfSamePeriod: function (rangeRestricts, pickerType) {
  return this.IsBothRangeRestrictionsExist(rangeRestricts)
   && ASPxClientCalendar.AreDatesOfSamePeriod(rangeRestricts.startDate, rangeRestricts.endDate, pickerType);
 },
 GetFullDaysInCurrentRange: function(rangeRestricts) {
  var timezoneOffsetDifference = ASPx.DateUtils.GetTimeZoneOffsetDifference(rangeRestricts.startDate, rangeRestricts.endDate);
  var rangeLength = rangeRestricts.endDate - rangeRestricts.startDate + timezoneOffsetDifference;
  return Math.floor(rangeLength / ASPx.calendarMsPerDay);
 },
 GetRangeLength: function(currentDateEdit, pickerType) {
  var dateRangePair = this.GetDateEditPair(currentDateEdit);
  if(!dateRangePair.isStart) {
   var rangeRestricts = this.GetCurrentRangeRestrictions(dateRangePair);
   if(this.IsBothRangeRestrictionsExist(rangeRestricts) && !this.IsNegativeRange(rangeRestricts))
    return this.GetRangeLengthCore(rangeRestricts, pickerType);
  }
  return -1;
 },
 GetRangeLengthCore: function(rangeRestricts, pickerType) {
  if(pickerType == ASPx.DatePickerType.Days)
   return this.GetFullDaysInCurrentRange(rangeRestricts);
  if(pickerType == ASPx.DatePickerType.Months)
   return ASPxClientCalendar.GetOffsetInMonths(rangeRestricts.startDate, rangeRestricts.endDate);
  if(pickerType == ASPx.DatePickerType.Years)
   return ASPxClientCalendar.GetOffsetInYears(rangeRestricts.startDate, rangeRestricts.endDate);
  if(pickerType == ASPx.DatePickerType.Decades)
   return ASPxClientCalendar.GetOffsetInDecades(rangeRestricts.startDate, rangeRestricts.endDate);
  return -1;
 },
 NeedCorrectSecondDateOnDateChanging: function (rangeRestricts, isStartDateChanged, minRange) {
  if (this.IsNegativeRange(rangeRestricts))
   return true;
  var isSecondDateEmpty = isStartDateChanged && this.IsStartRestrictionExistsOnly(rangeRestricts)
   || !isStartDateChanged && this.IsEndRestrictionExistsOnly(rangeRestricts);
  return isSecondDateEmpty && minRange > DefaultMinMaxRangeValues.Min;
 },
 GetDateEditPair: function(currentDateEdit) {
  if(currentDateEdit.IsInDateRangeMode()) {
   var startDE = currentDateEdit.GetStartDateEdit();
   startDE = (startDE == null) ? currentDateEdit : startDE;
   var endDE = startDE.endDateEdit;
   var isCurrentDateEditStart = currentDateEdit === startDE;
   return {
    startDateEdit: startDE,
    endDateEdit: endDE,
    isStart: isCurrentDateEditStart,
    isInRangeMode: true
   };
  }
  else
   return {
    startDateEdit: currentDateEdit,
    endDateEdit: null,
    isStart: true,
    isInRangeMode: false
   };
 }
};
var DateRangeValidationPattern = ASPx.CreateClass(ASPx.ValidationPattern, {
 constructor: function (endDateEdit) {
  this.constructor.prototype.constructor.call(this, endDateEdit.invalidDateRangeErrorText);
  this.startDateEdit = null;
  this.endDateEdit = endDateEdit;
  this.pickerType = endDateEdit.pickerType;
 },
 GetStartDateEdit: function() {
  if(!this.startDateEdit)
   this.startDateEdit = this.endDateEdit.GetStartDateEdit();
  return this.startDateEdit;
 },
 EvaluateIsValid: function(value) {
  var startDateEdit = this.GetStartDateEdit();
  if(!startDateEdit)
   return true;
  var dateEditPair = ASPxDateRangeHelper.GetDateEditPair(startDateEdit);
  var rangeRestricts = ASPxDateRangeHelper.GetCurrentRangeRestrictions(dateEditPair);
  if (this.endDateEdit.IsDateChangeProcessing()
   && ASPxDateRangeHelper.NeedCorrectSecondDateOnDateChanging(rangeRestricts, false, this.endDateEdit.minRange))
   return true;
  if (ASPxDateRangeHelper.IsOneRestrictionExistsOnly(rangeRestricts))
   return false;
  if (ASPxDateRangeHelper.IsBothRangeRestrictionsExist(rangeRestricts)) {
   var startDate = rangeRestricts.startDate;
   var endDate = rangeRestricts.endDate;
   return this.IsRangeFitToMinRange(startDate, endDate) && this.IsRangeFitToMaxRange(startDate, endDate);
  }
  return true;
 },
 IsRangeFitToMinRange: function(startDate, endDate) {
  return this.endDateEdit.minRange === DefaultMinMaxRangeValues.Min
   || ASPxClientCalendar.GetDateByOffset(startDate, this.endDateEdit.minRange, this.pickerType) <= endDate;
 },
 IsRangeFitToMaxRange: function(startDate, endDate) {
  return this.endDateEdit.maxRange === DefaultMinMaxRangeValues.Max
   || ASPxClientCalendar.GetDateByOffset(startDate, this.endDateEdit.maxRange, this.pickerType) >= endDate;
 },
});
var ASPxClientDateEdit = ASPx.CreateClass(ASPxClientDropDownEditBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.dateFormatter = null;
  this.isASPxClientDateEdit = true;
  this.date = null;
  this.dateOnError = "u";
  this.allowNull = true;
  this.calendarOwnerName = null;
  this.calendarConsumerName = null;
  this.textWasChangedInInput = false;
  this.showTimeSection = false;
  this.enableAdaptiveTimeSection = true;
  this.adjustInnerControls = true;
  this.pasteTimerID = -1;
  this.keyUpProcessing = false;
  this.showOutOfRangeWarning = true;
  this.startDateEditName = "";
  this.minRange = DefaultMinMaxRangeValues.Min;
  this.maxRange = DefaultMinMaxRangeValues.Max;
  this.sharedParameters = new ASPx.CalendarSharedParameters();
  this.endDateEdit = null;
  this.calendarController = null;
  this.rollersController = null;
  this.viewContainer = null;
  this.pickerType = ASPx.DatePickerType.Days;
  this.hasDecadeDisplayFormat = false;
  this.showHourWheel = false;
  this.showMinuteWheel = false;
  this.showSecondWheel = false;
  this.showMillisecondWheel = false;
  this.onControlsInitializedHandler = null;
  this.DateChanged = new ASPxClientEvent();
  this.ParseDate = new ASPxClientEvent();
  this.CalendarCustomDisabledDate = new ASPxClientEvent();
  this.CalendarCellClick = new ASPxClientEvent();
  this.CalendarShowing = new ASPxClientEvent();
  this.ValueSet = new ASPxClientEvent();
 },
 SetData: function(data){
  ASPxClientTextEdit.prototype.SetData.call(this, data);
  if(data.sharedParameters)
   this.SetProperties(data.sharedParameters, this.sharedParameters);
 },
 Initialize: function() {
  this.InitializeControllers();
  this.GetActiveController().InitializeViewHandlers();
  ASPxClientDropDownEditBase.prototype.Initialize.call(this);
  var startDateEdit = this.GetStartDateEdit();
  if(startDateEdit) {
   this.GetActiveController().PrepareToDateRangeMode(startDateEdit);
   this.onControlsInitializedHandler = function() { this.ensureStartDateEditInDateRangeMode(); }.bind(this);
   ASPx.GetControlCollection().ControlsInitialized.AddHandler(this.onControlsInitializedHandler);
  }
  this.GetActiveController().AttachToDateEditClientEvents();
  this.InitializeSharedParameters();
 },
 OnDispose: function() {
  ASPxClientDropDownEditBase.prototype.OnDispose.call(this);
  if(this.onControlsInitializedHandler)
   ASPx.GetControlCollection().ControlsInitialized.RemoveHandler(this.onControlsInitializedHandler);
 },
 ensureStartDateEditInDateRangeMode: function() {
  var startDateEdit = this.GetStartDateEdit();
  if(startDateEdit)
   this.GetActiveController().EnsureStartDateEditInDateRangeMode(startDateEdit);
 },
 InitializeControllers: function() {
  var shouldDisplayCalendarOnInit = this.ShouldDisplayCalendarOnInit();
  if(this.ddScrPicker !== ASPx.DROPDOWN_ELEMENT_VISIBILITY.Always) {
   this.calendarController = new DateEditCalendarController(this);
   this.calendarController.Initialize(shouldDisplayCalendarOnInit);
  }
  if(this.ddScrPicker !== ASPx.DROPDOWN_ELEMENT_VISIBILITY.Never) {
   this.rollersController = this.CreateScrollPickerController(this.spOptions); 
   this.rollersController.Initialize(!shouldDisplayCalendarOnInit);   
  }
 },
 InitializeCalendarController: function() {
  if(this.ddScrPicker === ASPx.DROPDOWN_ELEMENT_VISIBILITY.Always)
   return;
  this.calendarController = new DateEditCalendarController(this);
  this.calendarController.Initialize();
 },
 ShouldDisplayCalendarOnInit: function() {
  return this.ddScrPicker === ASPx.DROPDOWN_ELEMENT_VISIBILITY.Never || this.ddScrPicker === ASPx.DROPDOWN_ELEMENT_VISIBILITY.ModalDropDown;
 },
 ShouldDisplayCalendar: function() {
  return this.ddScrPicker === ASPx.DROPDOWN_ELEMENT_VISIBILITY.Never ||
      this.ddScrPicker === ASPx.DROPDOWN_ELEMENT_VISIBILITY.DropDown && this.isDropDownModal() ||
      this.ddScrPicker === ASPx.DROPDOWN_ELEMENT_VISIBILITY.ModalDropDown && !this.isDropDownModal();
 },
 ShouldDisplayRoller: function() {
  return !this.ShouldDisplayCalendar();
 },
 InitializeRollerController: function() {
  if(this.ddScrPicker === ASPx.DROPDOWN_ELEMENT_VISIBILITY.Never)
   return;
  this.rollersController = this.CreateScrollPickerController(this.spOptions);
  this.rollersController.Initialize();
 },
 GetActiveController: function() {
  if(this.calendarController && this.calendarController.IsActive())
   return this.calendarController;
  return this.rollersController;
 },
 CreateScrollPickerController: function(spOptions) {
  return new DateEditScrollPickerController(this, spOptions);
 },
 UpdateActiveController: function() {
  if(!this.calendarController || !this.rollersController)
   return;
  var shouldDisplayCalendar = this.ShouldDisplayCalendar();  
  this.calendarController.SetActive(shouldDisplayCalendar);
  this.rollersController.SetActive(!shouldDisplayCalendar);
 },
 GetViewContainer: function() {
  var popupControl = this.GetPopupControl();
  if(!popupControl)
   return null;
  if(!this.viewContainer)
   this.viewContainer = popupControl.GetContentContainer(-1);
  return this.viewContainer;
 },
 IsInDateRangeMode: function() {
  var startDateEdit = this.GetStartDateEdit();
  return startDateEdit !== null || this.endDateEdit !== null;
 },
 MinOrMaxRangeExist: function() {
  return this.minRange !== DefaultMinMaxRangeValues.Min || this.maxRange !== DefaultMinMaxRangeValues.Max;
 },
 InitializeSharedParameters: function() {
  this.sharedParameters.currentDateEdit = this;
  this.sharedParameters.DaysSelectingOnMouseOver.AddHandler(function(s, e) {
   this.OnCalendarDayMouseOver(s, e);
  }.aspxBind(this));
  this.sharedParameters.VisibleDaysMouseOut.AddHandler(function(s, e) {
   UTILS.SelectRangeInCalendar(s, false);
  }.aspxBind(this));
  if(this.GetShowTimeSection())
   this.sharedParameters.CalendarSelectionChangedInternal.AddHandler(function(s, e) {
    UTILS.SelectRangeInCalendar(s, false);
   }.aspxBind(this));
 },
 OnCalendarDayMouseOver: function(targetCalendar, e) {
  var dateRangePair = ASPxDateRangeHelper.GetDateEditPair(ASPxClientDateEdit.active);
  if(!dateRangePair.isInRangeMode) {
   e.cancel = true;
   return;
  }
  var rangeRestricts = ASPxDateRangeHelper.GetCurrentRangeRestrictions(dateRangePair);
  var isRangeNegative = ASPxDateRangeHelper.IsNegativeRange(rangeRestricts);
  var isOverDateCorrectForSelection = false;
  if (!isRangeNegative) {
   var requiredStartDate = dateRangePair.isStart ? rangeRestricts.endDate : rangeRestricts.startDate;
   e.selectionStartDate = requiredStartDate ? ASPxClientCalendar.CloneDate(requiredStartDate) : null;
   isOverDateCorrectForSelection = e.selectionStartDate
    && (dateRangePair.isStart && e.selectionStartDate >= e.overDate
    || !dateRangePair.isStart && e.selectionStartDate <= e.overDate);
  }
  e.cancel = isRangeNegative || !e.selectionStartDate || !isOverDateCorrectForSelection;
 },   
 InlineInitialize: function(){
  ASPxClientDropDownEditBase.prototype.InlineInitialize.call(this);
  this.lastValue = this.GetInputElement().value;
  if (this.UseRestrictions() && this.showOutOfRangeWarning)
   this.EnsureOutOfRangeWarningManager();
  if(this.MinOrMaxRangeExist())
   this.validationPatterns.push(new DateRangeValidationPattern(this));
 },
 UseSpecialKeyboardHandling: function() {
  return true;
 },
 GetStartDateEdit: function() {
  return this.startDateEditName ? ASPx.GetControlCollection().Get(this.startDateEditName) : null;
 },
 CloseDropDownByDocumentOrWindowEvent: function(causedByWindowResizing) {
  var isInputTextEmpty = this.GetInputElement().value === "" || this.IsMaskInfoEmpty();
  var isInputTextEmptyInDateRangeMode = this.IsInDateRangeMode() && isInputTextEmpty;
  if((!causedByWindowResizing || !this.pcIsShowingNow) && !this.GetTextWasChangedInInput() && !isInputTextEmptyInDateRangeMode)
   this.ApplySelectedDate();
  ASPxClientDropDownEditBase.prototype.CloseDropDownByDocumentOrWindowEvent.call(this, causedByWindowResizing);
 },
 UseRestrictions: function() {
  return this.GetMinDate() || this.GetMaxDate();
 },
 OnDropDownCore: function(evt) {
  ASPxClientDropDownEditBase.prototype.OnDropDownCore.call(this, evt);
  this.GetActiveController().OnDropDownCore();
 },
 CreateUpdateCallback: function(result) {
  this.CreateCallback(this.sharedParameters.GetUpdateCallbackParameters());
 },
 OnCallback: function(result) {
  var calendar = this.GetCalendar();
  if(calendar != null)
   calendar.OnCallback(result);
 },
 ShowDropDownArea: function(isRaiseEvent) {
  this.UpdateActiveController();
  this.GetActiveController().OnBeforeShowDropDown(this.date);
  ASPxClientDropDownEditBase.prototype.ShowDropDownArea.call(this, isRaiseEvent);  
  this.GetActiveController().OnAfterShowDropDown();
 },
 BrowserWindowResizeSubscriber: function() {
  return this.droppedDown && this.IsAdaptiveTimeSectionEnabled();
 },
 OnBrowserWindowResize: function(e) {
  this.GetActiveController().OnBrowserWindowResize();
 },
 BeforePopupControlResizing: function() {
  this.adjustTimeSection();
 },
 AfterPopupControlShown: function() {
  if(!this.isDropDownModal())
   this.adjustTimeSection(true);
 },
 adjustTimeSection: function(force) {
  var calendarOwner = this;
  if(this.calendarOwnerName)
   calendarOwner = this.GetCalendarOwner();
  if((force || calendarOwner.adjustInnerControls) && calendarOwner.GetTimeEdit()){
   calendarOwner.GetClock().AdjustControl();
   calendarOwner.GetTimeEdit().AdjustControl();
   calendarOwner.adjustInnerControls = false;
  }
 },
 onDropDownModalChanged: function(enabled) {
  ASPxClientDropDownEditBase.prototype.onDropDownModalChanged.call(this, enabled);
  this.UpdateActiveController();
  this.GetActiveController().onDropDownModalChanged(enabled);
  this.adjustTimeSection(true);
 },
 onDropDownCommandButtonClick: function(command) {
  if(ASPxClientDateEdit.active && ASPxClientDateEdit.active !== this)
   ASPxClientDateEdit.active.onDropDownCommandButtonClick(command);
  else
   ASPxClientDropDownEditBase.prototype.onDropDownCommandButtonClick.call(this, command);
 },
 GetPopupControl: function() { 
  var calendarOwner = this.GetCalendarOwner();
  if(calendarOwner != null)
   return calendarOwner.GetPopupControl();
  return ASPxClientDropDownEditBase.prototype.GetPopupControl.call(this);
 },
 OnPopupControlShown: function() {
  if(this.calendarConsumerName != null)
   ASPx.GetControlCollection().Get(this.calendarConsumerName).OnPopupControlShown();
  else  
   ASPxClientDropDownEditBase.prototype.OnPopupControlShown.call(this);
  this.GetActiveController().OnPopupControlShown();
 },
 GetCalendar: function() { 
  var name = this.GetDropDownInnerControlName(calendarNameSuffix);
  return ASPx.GetControlCollection().Get(name);
 },
 GetTimeEdit: function() { 
  var name = this.GetDropDownInnerControlName(timeEditNameSiffix);
  return ASPx.GetControlCollection().Get(name);
 },
 GetClock: function() {
  var name = this.GetDropDownInnerControlName(clockNameSiffix);
  return ASPx.GetControlCollection().Get(name);
 },
 GetCalendarOwner: function() {
  if(!this.calendarOwnerName)
   return null;
  return ASPx.GetControlCollection().Get(this.calendarOwnerName);
 },
 GetShowTimeSection: function(){
  var calendarOwner = this.GetCalendarOwner();
  if(calendarOwner)
   return calendarOwner.showTimeSection;
  return this.showTimeSection;
 },
 IsAdaptiveTimeSectionEnabled: function() {
  if(!this.GetShowTimeSection())
   return false;
  var calendarOwner = this.GetCalendarOwner();
  if(calendarOwner)
   return calendarOwner.enableAdaptiveTimeSection;
  return this.enableAdaptiveTimeSection;
 },
 GetFormattedDate: function(date) {
  date = date || this.date;
  if(this.maskInfo != null)
   return this.maskInfo.GetValue();
  if(date == null)
   return this.focused ? "" : this.nullText;
  return this.dateFormatter.Format(date);
 },
 SetTextWasChangedInInput: function(value) {
  this.textWasChangedInInput = value;
 },
 GetTextWasChangedInInput: function() {
  return this.textWasChangedInInput;
 },
 RaiseValueChangedEvent: function(isInternal) {
  if(!this.isInitialized) return false;
  var processOnServer = ASPxClientEdit.prototype.RaiseValueChangedEvent.call(this);
  processOnServer = this.RaiseDateChanged(processOnServer, isInternal);
  return processOnServer;
 },
 OnApplyChanges: function(){
  if(this.focused)
   this.OnTextChanged();
 },
 OnCalendarSelectionChanging: function(date, select) {
  if(this.GetShowTimeSection()) {
   var timeEditDate = ASPx.MaskDateTimeHelper.GetDate(this.GetTimeEdit().maskInfo);
   var selectedDate = this.ReplaceTimePart(date, timeEditDate);
   this.SetValue(selectedDate, true);
   this.SetTextWasChangedInInput(false);
  }
  else {
   if(date != null)
    this.ApplyExistingTime(date);
   if(!this.GetCalendar().isDateChangingByKeyboard) {
    this.HideDropDownArea(true);
    this.ChangeDate(date);
    if(select)
     ASPx.Selection.Set(this.GetInputElement());
    this.lastValue = this.GetInputElement().value;
   }
   else {
    this.SetValue(date, true);
   }
  }  
 },
 OnCalendarCustomDisabledDate: function(e) {
  this.RaiseCalendarCustomDisabledDate(e);
 },
 OnCustomDisabledDate: function(date) {
  return this.RaiseCustomDisabledDateEvent(date);
 },
 RaiseCustomDisabledDateEvent: function(date) {
  var args = new ASPxClientCalendarCustomDisabledDateEventArgs(date);
  this.CalendarCustomDisabledDate.FireEvent(this, args);
  return args;
 },
 RaiseCalendarCellClick: function(e) {
  if(!this.CalendarCellClick.IsEmpty())
   this.CalendarCellClick.FireEvent(this, e);
 },
 ReplaceDatePart: function(targetDate, sourceDate) {
  var result = ASPxClientCalendar.CloneDate(targetDate);
  if(sourceDate) {
   result.setFullYear(sourceDate.getFullYear());
   result.setMonth(sourceDate.getMonth());
   result.setDate(sourceDate.getDate());
  }
  return result;
 },
 ReplaceTimePart: function(targetDate, sourceDate) {
  var result = ASPxClientCalendar.CloneDate(targetDate);  
  if(sourceDate) {
   result.setHours(sourceDate.getHours());
   result.setMinutes(sourceDate.getMinutes());
   result.setSeconds(sourceDate.getSeconds());
   result.setMilliseconds(sourceDate.getMilliseconds());
  }
  return result;
 },
 ForceRefocusTimeSectionTimeEdit: function(mouseDownSource) {
  var dateEdit = this;
  if(this.calendarConsumerName)
   dateEdit = ASPx.GetControlCollection().Get(this.calendarConsumerName);
  var timeEdit = dateEdit.GetTimeEdit();
  var isTimeEditElement = timeEdit.IsEditorElement(mouseDownSource);
  if(isTimeEditElement && !timeEdit.IsElementBelongToInputElement(mouseDownSource)) { 
   if(!ASPx.Browser.VirtualKeyboardSupported) 
    timeEdit.ForceRefocusEditor();
   return;
  }
  if(!dateEdit.IsEditorElement(mouseDownSource)) {
   if(ASPx.Browser.VirtualKeyboardSupported && !isTimeEditElement) {
    this.lockLostFocus = false;
    if(ASPx.VirtualKeyboardUI.focusableInputElementIsActive(timeEdit)) {
     timeEdit.GetInputElement().blur();
    } else {
     ASPx.VirtualKeyboardUI.lostAppliedFocusOfEditor();
    }
   }
   return;
  }
  if(ASPx.Browser.VirtualKeyboardSupported) {
   this.lockLostFocus = true;
  } else {
   dateEdit.ForceRefocusEditor();
   var input = timeEdit.GetInputElement();
   if(input)
    input.blur();
   window.setTimeout(function() { ASPx.SetFocusedEditor(dateEdit); }, 0);
  }
 },
 ApplySelectedDate: function() {
  if(!this.GetReadOnly()) {
   var selectedDate = this.GetActiveController().GetSelectedDate();
   if(selectedDate && !this.GetShowTimeSection())
    this.ApplyExistingTime(selectedDate);
   this.ApplyParsedDate(selectedDate, true);
  }
 },
 RollbackSelectedDate: function() {
  if(!this.GetReadOnly())
   this.ApplyParsedDate(this.GetDate(), false);
 },
 IsEditorElement: function(element) {
  var timeEdit = this.GetTimeEdit();
  if(this.GetShowTimeSection() && timeEdit && ASPx.GetIsParent(timeEdit.GetMainElement(), element)) {
   this.lockLostFocus = true;
   return false;
  }
  return ASPxClientDropDownEditBase.prototype.IsEditorElement.call(this, element);
 },
 OnFocusCore: function() {
  this.GetActiveController().SetActiveControl();
  ASPxClientDropDownEditBase.prototype.OnFocusCore.call(this);
  if(!ASPx.GetControlCollection().InCallback())
   this.SetTextChangingTimer();
 },
 OnLostFocusCore: function() {
  if(!this.isFocusUnlocked())
   return;
  ASPxClientDropDownEditBase.prototype.OnLostFocusCore.call(this);
  if(!this.focused) {
   this.ClearTextChangingTimer();
   if(this.outOfRangeWarningManager)
    this.outOfRangeWarningManager.HideOutOfRangeWarningElement();
  }
 },
 isFocusUnlocked: function() {
  return this.ensureFocusUnlockedOnShowTimeSection() && this.ensureFocusUnlockedOnShowDropDown();
 },
 ensureFocusUnlockedOnShowTimeSection: function() {
  var result = true;
  if(this.GetShowTimeSection() && this.lockLostFocus) {
   this.lockLostFocus = false;
   result = false;
  }
  return result;
 },
 ensureFocusUnlockedOnShowDropDown: function() {
  return true;
 },
 OnTimeEditLostFocus: function() {
  this.OnLostFocusCore();
 },
 OnTimeEditEnter: function() {
  this.ForceRefocusEditor();
  this.ApplySelectedDate();
  this.HideDropDownArea(true);
  ASPx.Selection.Set(this.GetInputElement());
 },
 OnTimeEditEsc: function() {
  this.ForceRefocusEditor();
  this.HideDropDownArea(true);
 },
 OnTimeEditTab: function(shiftKey) {
  if(shiftKey && !this.GetCalendarOwner())
   this.ForceRefocusEditor();
  this.ApplySelectedDate();
  this.HideDropDownArea(true);
 },
 OnApplyButtonClick: function() {
  this.ApplySelectedDate();
  this.HideDropDownArea(true);
 },
 OnTimeSectionCancelClick: function() {
  this.RollbackSelectedDate();
  this.HideDropDownArea(true);
 },
 OnTimeSectionClearClick: function() {
  this.ChangeDate(null);
  this.GetCalendar().ResetLastSelectedDate();
  this.HideDropDownArea(true);
 },
 OnTimeEditInternalValueChanging: function(eventArgs) {
  var timeEditDate = eventArgs.date;
  if(eventArgs.oldInputValue !== "" && eventArgs.newInputValue !== "") {
   var calendarSelectedDate = this.GetCalendar().GetSelectedDate();
   var selectedDate = this.ReplaceDatePart(timeEditDate, calendarSelectedDate);
   this.SetValue(selectedDate, true);
  }
  var clock = this.GetClock();
  if(clock)
   clock.SetDate(timeEditDate);
 },
 OnArrowUp: function(evt){ 
  var isProcessed = ASPxClientDropDownEditBase.prototype.OnArrowUp.call(this, evt);
  if(!isProcessed && this.droppedDown)
   return this.OnCalendarMethod("OnArrowUp", evt);       
  return false;
 },
 OnArrowDown: function(evt){
  var isProcessed = ASPxClientDropDownEditBase.prototype.OnArrowDown.call(this, evt);
  if(!isProcessed && this.droppedDown)
   return this.OnCalendarMethod("OnArrowDown", evt);
  return false;
 },
 OnArrowLeft: function(evt){
  if(this.droppedDown) {
   this.OnCalendarMethod("OnArrowLeft", evt);
   return true;
  }
  return false;
 },
 OnArrowRight: function(evt){
  if(this.droppedDown) { 
   this.OnCalendarMethod("OnArrowRight", evt);
   return true;
  }
  return false;
 },
 OnPageUp: function(evt){
  if(this.droppedDown) { 
   this.OnCalendarMethod("OnPageUp", evt);
   return true;
  }
  return false;  
 },
 OnPageDown: function(evt){
  if(this.droppedDown) {
   this.OnCalendarMethod("OnPageDown", evt);
   return true;
  }
  return false;  
 },
 OnEndKeyDown: function(evt) {
  if(this.droppedDown) {
   this.OnCalendarMethod("OnEndKeyDown", evt);
   return true;
  }
  return false;
 },
 OnHomeKeyDown: function(evt) {
  if(this.droppedDown) {
   this.OnCalendarMethod("OnHomeKeyDown", evt);
   return true;
  }
  return false; 
 },
 OnCalendarMethod: function(methodName, evt){
  var calendar = this.GetCalendar();
  if(!calendar)
   return;
  if(!calendar.IsFastNavigationActive())
   this.SetTextWasChangedInInput(false);
  return calendar[methodName](evt);
 },
 GetDateByCurrentValueString: function(valueString) {
  var inputValueParseResult = this.dateFormatter.ParseAndMergeWithDate(valueString, this.date);
  return inputValueParseResult ? inputValueParseResult : null;
 },
 OnKeyDown: function(evt) {
  ASPxClientDropDownEditBase.prototype.OnKeyDown.call(this, evt);
  this.keyUpProcessing = true;
 },
 OnKeyUp: function(evt) {
  if(ASPx.FilteringUtils.EventKeyCodeChangesTheInput(evt)){
   this.SetTextWasChangedInInput(true);
   if (this.UseRestrictions() && this.outOfRangeWarningManager) {
    var valueString = this.GetInputElement().value;
    this.lastValue = valueString;
    this.UpdateOutOfRangeWarning(valueString);
   }
  }
  this.keyUpProcessing = false;
  this.EnsureClearButtonVisibility();
 },
 UpdateOutOfRangeWarning: function(valueString) {
  var currentDate = this.GetDateByCurrentValueString(valueString);
  currentDate = this.CorrectDateByPickerType(currentDate);
  if(this.maskInfo && ASPx.DateUtils.AreDatesEqualExact(currentDate, new Date(100, 0, 1)))
   currentDate = null;
  this.outOfRangeWarningManager.UpdateOutOfRangeWarningElementVisibility(currentDate);
 },
 SetTextChangingTimer: function () {
  if(this.pasteTimerID === -1)
   this.pasteTimerID = ASPx.Timer.SetControlBoundInterval(this.OnTextChangingCheck, this, ASPx.PasteCheckInterval);
 },
 ClearTextChangingTimer: function () {
  this.pasteTimerID = ASPx.Timer.ClearInterval(this.pasteTimerID);
 },
 OnTextChangingCheck: function (evt) {
  var input = this.GetInputElement();
  if (!input)
   return;
  var curValueString = input.value.toString();
  if (this.lastValue != curValueString && !this.keyUpProcessing) {
   var isChromeOnAndroid = ASPx.Browser.AndroidMobilePlatform && ASPx.Browser.Chrome;
   if (!isChromeOnAndroid)
    this.OnPaste(curValueString);
  }
 },
 OnPaste: function (valueString) {
  this.lastValue = valueString;
  if(this.UseRestrictions() && this.outOfRangeWarningManager)
   this.UpdateOutOfRangeWarning(valueString);
 },
 OnEnter: function() {
  this.enterProcessed = false; 
  if(this.droppedDown) {
   this.GetActiveController().OnEnter();
   this.enterProcessed = true;
  }
  else
   this.OnApplyChanges();
  this.SetTextWasChangedInInput(false);
  return this.enterProcessed;
 },
 OnEscape: function() {
  if(this.droppedDown)
   this.GetActiveController().OnEscape();
  this.ChangeDate(this.date);  
  this.SetTextWasChangedInInput(false);
  return true;
 },
 OnTab: function(evt){
  if(!this.droppedDown) return;
  this.GetActiveController().OnTab(evt);
 },
 HideDropDownArea: function(isRaiseEvent) {
  if(this.accessibilityCompliant && this.focused)
   this.OnHideCalendarAccessible();
  var calendar = this.GetCalendar();
  if(calendar)
   calendar.EnsureHideFastNavigation();
  ASPxClientDropDownEditBase.prototype.HideDropDownArea.call(this, isRaiseEvent);
 },
 OnTextChanged: function() {
  if(!this.IsFocusEventsLocked() || !this.droppedDown) {
   ASPxClientDropDownEditBase.prototype.OnTextChanged.call(this);
   var newText = this.GetInputElement().value;
   if(this.accessibilityCompliant) {
    if(!newText)
     newText = ASPx.AccessibilitySR.BlankEditorText;
    var accessibilityElement = this.GetAccessibilityAssistantElement();
    ASPx.Attr.SetAttribute(accessibilityElement, "aria-label", newText);
   }
  }
 },
 IsMaskInfoEmpty: function() {
  return this.maskInfo && (this.maskInfo.IsEmpty() || this.GetValue() == null);
 },
 OnMouseWheel: function(evt) {
  var source = ASPx.Evt.GetEventSource(evt);
  var parentWheel = ASPx.GetParentByClassName(source, "dxsp-wheel");
  if(!parentWheel)
   ASPxClientDropDownEditBase.prototype.OnMouseWheel.call(this, evt);
 },
 ParseValue: function() { 
  this.ParseValueCore(true);
 },
 ParseValueCore: function(raiseChangedEvent) {
  var date;
  if(this.maskInfo != null) {   
   date = ASPx.MaskDateTimeHelper.GetDate(this.maskInfo, this.date);
  } else {
   var text = this.GetInputElement().value;
   var userParseResult = this.GetUserParsedDate(text);
   if(userParseResult !== false) {
    date = userParseResult;
   } else {
    if(text == null || text == "" || text == this.nullText)
     date = null;
    else
     date = !this.focused && raiseChangedEvent ? this.date : this.dateFormatter.ParseAndMergeWithDate(text, this.date);
   }   
  }
  if(this.GetShowTimeSection() && !this.HasTimeInEditFormat() && date)
   this.ApplyExistingTime(date);
  date = this.CorrectDateByPickerType(date);
  this.ApplyParsedDate(date, raiseChangedEvent);
  this.lastValue = this.GetInputElement().value;
 },
 GetUserParsedDate: function(text) {
  if(!this.ParseDate.IsEmpty()) {
   var args = new ASPxClientParseDateEventArgs(text);
   this.ParseDate.FireEvent(this, args);
   if(args.handled)
    return args.date;
  }
  return false;
 },
 ApplyParsedDate: function(date, raiseChangedEvent) {
  if(date === false || !ASPxClientCalendarDateDisabledHelper.IsDateInRange(this.sharedParameters, date, true) ||
   this.IsDateDisabled(date)) {
   switch(this.dateOnError) {
    case "n":
     date = null;
     break;
    case "t":
     date = new Date();
     break;
    default:
     date = this.date;
     break;
   }
  }
  if(!this.allowNull && date == null)
   date = this.date;
  if(raiseChangedEvent)
   this.ChangeDate(date);  
  else
   this.SetValue(date);
 },
 CorrectDateByPickerType: function(date) {
  return ASPx.DateUtils.CorrectDateByPickerType(date, this.pickerType);
 },
 SetSelectionOnToggleTextDecoration: function(input, sel) {
  if(this.maskInfo != null && this.GetValue() === null)
   sel.endPos = sel.startPos = 0;
  ASPxClientDropDownEditBase.prototype.SetSelectionOnToggleTextDecoration.call(this, input, sel);
 },
 IsDateDisabled: function(date) {
  var calendar = this.GetCalendar();
  var currentViewType = calendar ? calendar.currentViewType : this.pickerType;
  return ASPxClientCalendarDateDisabledHelper.IsDateDisabled(this.sharedParameters, date, function(d) { return this.OnCustomDisabledDate(d); }.aspxBind(this), currentViewType, this.pickerType);
 },
 HasTimeInEditFormat: function() {
  if(this.maskInfo) {
   for(var i = 0; i < this.maskInfo.parts.length; i++) {
    var part = this.maskInfo.parts[i];
    if(part.dateTimeRole && part.dateTimeRole.toLowerCase() == "h")
     return true;
   }
   return false;
  }
  return this.dateFormatter.mask.toLowerCase().indexOf("h") != -1;
 },
 ApplyExistingTime: function(date) {
  if(this.date == null)  return;  
  var savedDay = date.getDate();
  date.setHours(this.date.getHours());
  var diff = date.getDate() - savedDay;
  if(diff != 0) {
   var sign = (diff == 1 || date.getDate() == 1) ? -1 : 1;
   date.setTime(date.getTime() + sign * 3600000);
  }
  date.setMinutes(this.date.getMinutes());
  date.setSeconds(this.date.getSeconds());
  date.setMilliseconds(this.date.getMilliseconds());
 },
 GetValue: function() {
  return this.date;
 },
 GetLastSuccesfullValue: function() {
  return this.GetValue();
 },
 GetValueString: function() {
  return this.date != null ? ASPx.DateUtils.GetInvariantDateTimeString(this.date) : null;
 },
 SetValue: function(date, isInputUpdate) {
  date = this.CorrectDateByPickerType(date);
  if(!isInputUpdate)
   this.date = date;
  this.SetValueInternal(date, isInputUpdate);
  this.RaiseValueSet(isInputUpdate);
 },
 SetValueInternal: function(date, isInputUpdate) {
  if(this.maskInfo != null)
   this.SetMaskValue(date);
  else
   this.SetValueCore(date, isInputUpdate);
  if(this.styleDecoration)
   this.styleDecoration.Update();
 },
 SetMaskValue: function(date) {
  ASPx.MaskDateTimeHelper.SetDate(this.maskInfo, date);
  this.ApplyMaskInfo(false);
  this.SavePrevMaskValue();
 },
 SetValueCore: function(date, isInputUpdate) {
  this.GetInputElement().value = this.GetFormattedDate(date);
  if(!isInputUpdate)
   this.SyncRawValue();
  if(this.CanApplyTextDecorators())
   this.ToggleTextDecoration();
 },
 RaiseValueSet: function(isInputUpdate) {
  if(!isInputUpdate && !this.ValueSet.IsEmpty())
   this.ValueSet.FireEvent(this);
 },
 ChangeDate: function(date) { 
  var changed = !ASPx.DateUtils.AreDatesEqualExact(this.date, date);
  this.SetValue(date);
  var forceValueChanged = this.IsValueChangeForced() && !this.IsValueChanging();
  if(changed || forceValueChanged) {
   try {
    this.StartValueChanging();
    this.dateChangeProcessing = true;
    this.RaisePersonalStandardValidation();
    this.OnValueChanged();
   }
   finally {
    this.dateChangeProcessing = false;
    this.EndValueChanging();
   }
  }
 },
 IsDateChangeProcessing: function() {
  return this.dateChangeProcessing;
 },
 getProcessOnServerOnValueChanged: function() {
  var dateRangePair = ASPxDateRangeHelper.GetDateEditPair(this);
  if(!dateRangePair.isInRangeMode)
   return ASPxClientDropDownEditBase.prototype.getProcessOnServerOnValueChanged.call(this);
  var processOnServer = this.RaiseValueChangedEvent();
  return this.RaiseValidationInternal() && processOnServer;
 },
 GetText: function() {
  return this.GetFormattedDate();
 },
 SetText: function(value) {
  ASPxClientTextEdit.prototype.SetValue.call(this, value);
  if(this.maskInfo == null)
   this.ParseValueCore(false);
 },
 GetFormattedText: function() {
  if(this.maskInfo != null)
   return this.GetMaskDisplayText();
  if(this.date == null)
   return this.nullText;
  if(this.displayFormat != null)
   return this.GetDisplayFormatText(this.date);
  return this.GetFormattedDate();
 },
 ClearEditorValueByClearButtonCore: function() {
  if(this.allowNull === false) 
   this.SetValue(this.GetLastSuccesfullValue());
  else
   ASPxClientDropDownEditBase.prototype.ClearEditorValueByClearButtonCore.call(this);
 },
 ShouldCancelMaskKeyProcessing: function(htmlEvent, keyDownInfo) {
  if(htmlEvent.altKey)
   return true;
  if(ASPxClientDropDownEditBase.prototype.ShouldCancelMaskKeyProcessing.call(this, htmlEvent, keyDownInfo))
   return true;  
  if(!this.droppedDown)
   return false;
  if(this.GetShowTimeSection() && htmlEvent.keyCode == ASPx.Key.Tab)
   return false;
  return !ASPx.MaskManager.IsPrintableKeyCode(keyDownInfo) 
   && keyDownInfo.keyCode != ASPx.Key.Backspace
   && keyDownInfo.keyCode != ASPx.Key.Delete;
 },
 DecodeRawInputValue: function(value) {
  if(value == "N") return null;
  var date = new Date();
  date.setTime(Number(value));
  var result = ASPx.DateUtils.ToUtcTime(date);
  var offsetDiff = ASPx.DateUtils.GetTimeZoneOffsetDifference(result, date);
  if(offsetDiff !== 0)
   result.setTime(result.valueOf() + offsetDiff);
  return result;
 },
 SyncRawValue: function() {
  this.SetRawValue(this.date == null ? "N" : ASPx.DateUtils.ToLocalTime(this.date).valueOf());
 }, 
 HasTextDecorators: function() {
  return (this.maskInfo != null && this.date == null) || ASPxClientDropDownEditBase.prototype.HasTextDecorators.call(this);
 },
 GetDisplayFormatText: function(value) {
  if(this.pickerType == ASPx.DatePickerType.Decades && this.hasDecadeDisplayFormat && value && value.getFullYear)
   return ASPx.DateUtils.GetYearRangeFormatString(value.getFullYear(), 10);
  return ASPxClientDropDownEditBase.prototype.GetDisplayFormatText.call(this, value);
 },
 GetMaskDisplayText: function() {
  if(!this.focused) {
   if(this.date == null)
    return this.nullText;
   if(this.HasTextDecorators())
    return this.GetDecoratedText(this.date);
  }
  return this.maskInfo.GetText();
 },
 ToggleTextDecorationCore: function() {
  if(this.maskInfo != null) {
   this.ApplyMaskInfo(false);
  } else {
   var text = this.focused ? this.GetFormattedDate() : this.GetFormattedText();
   var input = this.GetInputElement();
   if(input.value != text)
    input.value = text;
  }
 },
 BeginShowMaskHint: function() {
 },
 EnsureOutOfRangeWarningManager: function () {
  this.ensureOutOfRangeWarningManager(this.GetMinDate(), this.GetMaxDate(), null, null, this.dateFormatter);
 },
 SetReadOnlyInternal: function(readOnly) {
  ASPxClientDropDownEditBase.prototype.SetReadOnlyInternal.call(this, readOnly);
  var calendar = this.GetCalendar();
  if(calendar)
   calendar.SetReadOnly(readOnly);
  var timeEdit = this.GetTimeEdit();
  if(timeEdit)
   timeEdit.SetReadOnly(readOnly);
 },
 OnHideCalendarAccessible: function() {
  var inputElement = this.GetInputElement();
  var accessibilityElement = this.GetAccessibilityAssistantElement();
  var pronounceTimeout = 300;
  ASPx.Attr.RemoveAttribute(inputElement, "aria-activedescendant");
  window.setTimeout(function() { 
   ASPx.Attr.SetAttribute(accessibilityElement, "aria-label", inputElement.value);
   ASPx.Attr.SetAttribute(inputElement, "aria-activedescendant", accessibilityElement.id);
  }, pronounceTimeout);
 },
 onDropDownApplyCommandClick: function() {
  this.OnApplyButtonClick();
 },
 onDropDownCloseCommandClick: function() {
  this.OnTimeSectionCancelClick();
 },
 ensureDropDownClosedOnLostFocus: function() {
  if(this.accessibilityCompliant && this.GetShowTimeSection())
   return;
  ASPxClientDropDownEditBase.prototype.ensureDropDownClosedOnLostFocus.call(this);
 },
 RaiseDateChanged: function(processOnServer, isInternal) {
  if(!this.DateChanged.IsEmpty()) {
   var args = new ASPxClientProcessingModeEventArgs(processOnServer);
   if (isInternal)
    args.isInternal = true;
   this.DateChanged.FireEvent(this, args);
   processOnServer = args.processOnServer;
  }
  return processOnServer;
 },
 RaiseCalendarCustomDisabledDate: function(e) {
  this.CalendarCustomDisabledDate.FireEvent(this, e);
 },
 SetDate: function(date) {
  if(!ASPx.Ident.IsDate(date) || isNaN(date))
   date = null;
  this.SetValue(date);
  if(this.droppedDown)
   this.GetActiveController().SetSelectedDate(this.date);
 },
 GetDate: function() {
  return this.date ? new Date(this.date.valueOf()) : null;
 },
 GetRangeDayCount: function () {
  return ASPxDateRangeHelper.GetRangeLength(this, ASPx.DatePickerType.Days);
 },
 GetRangeLength: function() {
  return ASPxDateRangeHelper.GetRangeLength(this, this.pickerType);
 },
 GetMinDate: function() {
  return this.sharedParameters.minDate;
 },
 SetMinDate: function(date) {
  this.SetMinDateCore(date);
  this.ownMinDate = this.GetMinDate();
 },
 SetMinDateCore: function(date) {
  var newMinDate = this.CorrectDateByPickerType(date);
  this.sharedParameters.minDate = newMinDate;
  if(this.droppedDown) {
   var calendar = this.GetCalendar();
   if(calendar)
    calendar.SetMinDate(newMinDate);
  }
  if(this.showOutOfRangeWarning) {
   this.EnsureOutOfRangeWarningManager();
   this.outOfRangeWarningManager.SetMinValue(this.GetMinDate());
  }
  if(this.droppedDown)
   this.GetActiveController().UpdateMinMaxYears();
 },
 GetMaxDate: function() {
  return this.sharedParameters.maxDate;
 },
 SetMaxDate: function(date) {
  var newMaxDate = this.CorrectDateByPickerType(date);
  this.sharedParameters.maxDate = newMaxDate;
  if(this.droppedDown) {
   var calendar = this.GetCalendar();
   if(calendar)
    calendar.SetMaxDate(newMaxDate);
  }
  if(this.showOutOfRangeWarning) {
   this.EnsureOutOfRangeWarningManager();
   this.outOfRangeWarningManager.SetMaxValue(this.GetMaxDate());
  }
  if(this.droppedDown)
   this.GetActiveController().UpdateMinMaxYears();
 },
 GetDropDownHeight: function(){
  return this.GetActiveController().GetDropDownHeight();
 },
 GetDropDownWidth: function(){
  return this.GetActiveController().GetDropDownWidth();
 },
 getThemeClassName: function() {
  var controlClassName = "dxeButtonEdit_";
  var controlClassNames = ASPx.GetClassNameList(this.GetMainElement());
  var themedClassName = controlClassNames
   .filter(function(className) { return className.indexOf(controlClassName) === 0; })[0];
  return themedClassName && themedClassName.substr(controlClassName.length);
 },
});
var DateEditController = ASPx.CreateClass(null, {
 constructor: function(owner) {
  this.owner = owner;
  this.active = false;
  this.isComboBoxList = true;
 },
 Initialize: function(toActivate) {
  this.SetActive(toActivate);
 },
 SetActive: function(active) {
  this.active = active;
  var viewContainer = this.GetViewContainer();
  if(viewContainer)
   ASPx.SetElementDisplay(viewContainer, active);
  if(active)
   this.AdjustViews();
 },
 IsActive: function() {
  return this.active;
 },
 PrepareToDateRangeMode: function(startDateEdit) {
  this.EnsureStartDateEditInDateRangeMode(startDateEdit);
  this.owner.sharedParameters.dateRangeMode = true;
  this.owner.ownMinDate = this.owner.GetMinDate();
  UTILS.SetActualMinDate(this.owner);
  UTILS.PrepareCalendarDateRangeMode(this.owner, this.owner);
 },
 EnsureStartDateEditInDateRangeMode: function(startDateEdit) {
  if(!startDateEdit.IsInDateRangeMode())
   this.PrepareStartDateEditToDateRangeMode(startDateEdit);
 },
 PrepareStartDateEditToDateRangeMode: function(startDateEdit) {
  startDateEdit.endDateEdit = this.owner;
  startDateEdit.sharedParameters.dateRangeMode = true;
  UTILS.PrepareCalendarDateRangeMode(startDateEdit, this.owner);
  startDateEdit.ValueSet.AddHandler(function(s, e) { UTILS.SetActualMinDate(s); });
 },
 GetViewContainer: function() {
  throw "Not Implemented";
 },
 AttachToDateEditClientEvents: function() {
  this.owner.DateChanged.AddHandler(function(s, e) {
   if(!e.isInternal)
    UTILS.OnRangeRestrictionChanged(s);
  });
  this.owner.CalendarShowing.AddHandler(function(s, e) {
   UTILS.OnCalendarShowing(this.owner);
  }.aspxBind(this));
 },
 InitializeViewHandlers: function() { },
 OnDropDownCore: function() { },
 GetDropDownHeight: function() { return; },
 GetDropDownWidth: function() { return; },
 AdjustViews: function() { },
 GetSelectedDate: function() { },
 SetActiveControl: function() {
  ASPxClientDateEdit.active = this.owner;
 },
 OnBeforeShowDropDown: function(date) {
  this.SetActiveControl();
  this.SetSelectedDate(date);
 },
 OnAfterShowDropDown: function() {
  this.AdjustViews();
 },
 onDropDownModalChanged: function(enabled) { },
 OnBrowserWindowResize: function(e) { },
 UpdateMinMaxYears: function() { },
 OnTab: function(evt) { },
 OnEnter: function() { },
 OnEscape: function() { },
 OnPopupControlShown: function() { },
 ResetControlAdjustment: function() { this.owner.ResetControlAdjustment(); }
});
var DateEditCalendarController = ASPx.CreateClass(DateEditController, {
 constructor: function(owner) {
  this.constructor.prototype.constructor.call(this, owner);
  this.dropDownPosition = 0;
 },
 Initialize: function(toActivate) {
  DateEditController.prototype.Initialize.call(this, toActivate);
  var calendar = this.GetCalendar();
  if(calendar)
   calendar.customDraw = calendar.customDraw || this.owner.sharedParameters.calendarCustomDraw;
 },
 GetCalendar: function() {
  return this.owner.GetCalendar();
 },
 GetTimeEdit: function() { 
  return this.owner.GetTimeEdit();
 },
 GetViewContainer: function() {
  var calendar = this.GetCalendar();
  return calendar ? calendar.GetMainElement() : null;
 },
 InitializeViewHandlers: function() {
  if(this.HasOwnedCalendar()) {
   this.InitializeCalendarHandlers();
   this.InitializeTimeEditHandlers();
  } else 
   UTILS.RegisterSharedCalendar(this.GetCalendar()); 
 },
 HasOwnedCalendar: function() {
  return this.owner.calendarOwnerName == null;
 },
 InitializeCalendarHandlers: function() {
  var calendar = this.GetCalendar();
  if(!calendar)
   return;
  calendar.SelectionChanging.AddHandler(ASPxClientDateEdit.HandleCalendarSelectionChanging);
  calendar.MainElementClick.AddHandler(ASPxClientDateEdit.HandleCalendarMainElementClick);
  this.ReAssignCalendarSharedEventHandlers(calendar);
  var calendarMainElement = calendar.GetMainElement();
  if(ASPx.Browser.NetscapeFamily && ASPx.IsExistsElement(calendarMainElement))
   calendarMainElement.style.borderCollapse = "separate";
 },
 ReAssignCalendarSharedEventHandlers: function(calendar) {
  calendar.CustomDisabledDate.ClearHandlers();
  calendar.CellClick.ClearHandlers();
  calendar.CustomDisabledDate.AddHandler(ASPxClientDateEdit.HandleCalendarCustomDisabledDate.aspxBind(this.owner));
  calendar.CellClick.AddHandler(ASPxClientDateEdit.HandleCalendarCellClick.aspxBind(this.owner));
 },   
 InitializeTimeEditHandlers: function() {
  var timeEdit = this.GetTimeEdit();
  if(timeEdit) {
   timeEdit.InternalValueChanging.AddHandler(ASPxClientDateEdit.HandleTimeEditInternalValueChanging);
   timeEdit.OwnerDateEdit = this.owner;
  }
 },
 OnDropDownCore: function() {
  DateEditController.prototype.OnDropDownCore.call(this);
  var cal = this.GetCalendar();
  if(cal && this.owner.droppedDown)
     cal.forceMouseDown = true;
  if(cal && this.owner.isDropDownModal())
   cal.forceMouseDown = false;
 },
 onDropDownModalChanged: function(enabled) {
  if(!enabled)
   this.AdjustTimeSectionLayoutOnShowDropDown();
 },
 EnsureCalendarSelectedDateIsActual: function() {
  var calendar = this.GetCalendar();
  if(calendar.sharedParameters.dateRangeMode && (calendar.lastSelectedDate || !this.owner.date))
   calendar.SetSelectedDate(calendar.lastSelectedDate);
 },
 IsCalendarShared: function() {
  var calendar = this.GetCalendar();
  var calendarName = calendar != null ? calendar.name : "";
  return ASPxClientDateEdit.SharedCalendarCollection.calendarIsShared(calendarName);
 },
 SetDateToCalendar: function(date) {
  var calendar = this.GetCalendar();
  if(!calendar) return;
  calendar.sharedParameters = this.owner.sharedParameters;
  if(this.IsCalendarShared())
   this.ReAssignCalendarSharedEventHandlers(calendar);
  calendar.forceUpdate = true;
  if(!date) {
   calendar.SetValue(null);
   this.SetDefaultVisibleDateToCalendar(calendar);
  } else {
   var dateWithoutTime = new Date(date.getFullYear(), date.getMonth(), date.getDate());
   calendar.SetValue(dateWithoutTime);
  }
 },
 SetDefaultVisibleDateToCalendar: function(calendar) {
  var minDate = this.owner.GetMinDate();
  var maxDate = this.owner.GetMaxDate();
  var requiredVisibleDate = new Date();
  if(minDate != null && minDate > requiredVisibleDate)
   requiredVisibleDate = minDate;
  else if(maxDate != null && maxDate < requiredVisibleDate)
   requiredVisibleDate = ASPxClientCalendar.AddMonths(maxDate, 1 - calendar.rows * calendar.columns);
  calendar.SetVisibleDate(new Date(
   requiredVisibleDate.getFullYear(),
   requiredVisibleDate.getMonth(),
   requiredVisibleDate.getDate())
  );
 },
 SetDateToTimeSection: function(date) {
  if(this.owner.GetShowTimeSection()) {
   var timeEdit = this.GetTimeEdit();
   if(timeEdit)
    timeEdit.SetValue(date);
  }
 },
 GetTimeEditDate: function() {
  var result = null;
  var timeEdit = this.GetTimeEdit();
  if(timeEdit) {
   timeEdit.ParseValue();
   var result = timeEdit.GetDate();
  }
  return result;
 },
 GetSelectedDate: function() {
  this.EnsureCalendarSelectedDateIsActual();
  var result = this.GetCalendar().GetSelectedDate();
  var timeEditDate = this.GetTimeEditDate();
  if(!result && timeEditDate)
   result = new Date(100, 0, 1);
  if(result && timeEditDate)
   result = this.owner.ReplaceTimePart(result, timeEditDate);
  return result;
 },
 SetSelectedDate: function(date) {
  this.SetDateToCalendar(date);
  this.SetDateToTimeSection(date);
 },
 SetActiveControl: function() {
  var calendar = this.GetCalendar();
  ASPx.activeCalendar = calendar;
  DateEditController.prototype.SetActiveControl.call(this);  
 },
 OnBeforeShowDropDown: function(date) {
  this.GetCalendar().LockUpdateAnimation();
  DateEditController.prototype.OnBeforeShowDropDown.call(this, date);
  this.owner.CalendarShowing.FireEvent(this.owner);
 },
 OnAfterShowDropDown: function() {
  var calendar = this.GetCalendar();
  if(calendar)
   calendar.SwitchToInitialView();
  var calendarOwner = this.owner.GetCalendarOwner();
  if(calendarOwner != null)
   calendarOwner.calendarConsumerName = this.owner.name;
  this.owner.calendarConsumerName = null;
  DateEditController.prototype.OnAfterShowDropDown.call(this);
  this.GetCalendar().UnlockUpdateAnimation();
 },
 AdjustTimeSectionLayoutOnShowDropDown: function() {
  if(this.owner.IsAdaptiveTimeSectionEnabled()) {
   var pc = this.owner.GetPopupControl();
   this.dropDownPosition = ASPx.GetAbsoluteX(pc.GetCurrentWindowElement());
   this.AdjustTimeSectionLayout();
   pc.UpdatePosition();
  }
 },
 AdjustTimeSectionLayout: function() {
  this.EnsureCalendarMaxWidth();
  var requiredTimeSectionPos = this.GetRequiredTimeSectionPosition();
  var currentTimeSectionPos = this.GetCurrentTimeSectionPosition();
  if(requiredTimeSectionPos !== currentTimeSectionPos) {
   if(requiredTimeSectionPos === ASPx.Position.Bottom)
    this.SwitchToVerticalTimeSectionLayout();
   else
    this.SwitchToHorizontalTimeSectionLayout();
   if(this.owner.isDropDownModal() === false)
    this.owner.GetClock().RecreateRectBag();
  }
 },
 SetCalendarMinMaxWidth: function(value) {
  var calendarMainElement = this.GetCalendar().GetMainElement();
  if(value === undefined) {
   calendarMainElement.style.minWidth = "";
   calendarMainElement.style.maxWidth = "";
  }
  else {
   calendarMainElement.style.minWidth = value + "px";
   calendarMainElement.style.maxWidth = value + "px";
  }
 },
 SwitchToHorizontalTimeSectionLayout: function() {
  var calendarMainElement = this.GetCalendar().GetMainElement();
  ASPx.RemoveClassNameFromElement(calendarMainElement, verticalTimeSectionClassName);
  ASPx.RemoveClassNameFromElement(calendarMainElement, calendarWithFullWidthChildsClassName);
  this.SetCalendarMinMaxWidth(this.GetCalendarWithHorizontalTimeSectionWidth());
  ASPx.SetElementDisplay(this.owner.GetPopupControl().GetWindowElement(-1), true);
 },
 SwitchToVerticalTimeSectionLayout: function() {
  var calendarMainElement = this.GetCalendar().GetMainElement();
  ASPx.AddClassNameToElement(calendarMainElement, verticalTimeSectionClassName);
  this.SetCalendarMinMaxWidth(this.GetCalendarWithVerticalTimeSectionWidth());
  ASPx.AddClassNameToElement(calendarMainElement, calendarWithFullWidthChildsClassName);
  ASPx.SetElementDisplay(this.owner.GetPopupControl().GetWindowElement(-1), true); 
 },
 GetCalendarMainElementHorizontalBorderPaddings: function() {
  if(!this.calendarMainElementHorizontalBorderPaddings) {
   var calendarMainElement = this.GetCalendar().GetMainElement();
   this.calendarMainElementHorizontalBorderPaddings = ASPx.GetLeftRightPaddings(calendarMainElement);
   var calendarMainElementCurrentStyle = ASPx.GetCurrentStyle(calendarMainElement);
   if(calendarMainElementCurrentStyle && calendarMainElementCurrentStyle.borderCollapse == "collapse") {
    var calendarMainElementHorizontalBordersWidth = ASPx.GetHorizontalBordersWidth(calendarMainElement);
    if(!ASPx.Browser.Edge)
     calendarMainElementHorizontalBordersWidth /= 2;
    this.calendarMainElementHorizontalBorderPaddings += calendarMainElementHorizontalBordersWidth;
   }
  }
  return this.calendarMainElementHorizontalBorderPaddings;
 },
 GetCalendarWithVerticalTimeSectionWidth: function() {
  if(this.owner.isDropDownModal())
   return undefined;
  if(!this.calendarWithVerticalTimeSectionWidth) {
   this.calendarWithVerticalTimeSectionWidth = 0;
   var calendarMainElement = this.GetCalendar().GetMainElement();
   var maxChildElementWidth = 0;
   ASPx.AddClassNameToElement(calendarMainElement, calendarWithAutoWidthChildsClassName);
   for(var i = 0; i < calendarMainElement.childNodes.length; i++) {
    var calendarChildElement = calendarMainElement.childNodes[i];
    if(calendarChildElement.tagName != "DIV")
     continue;
    var calendarChildElementWidth = calendarChildElement.getBoundingClientRect().width;
    if(calendarChildElementWidth > maxChildElementWidth)
     maxChildElementWidth = calendarChildElementWidth;
   }
   ASPx.RemoveClassNameFromElement(calendarMainElement, calendarWithAutoWidthChildsClassName);
   this.calendarWithVerticalTimeSectionWidth = maxChildElementWidth + this.GetCalendarMainElementHorizontalBorderPaddings();
   this.calendarWithVerticalTimeSectionWidth = Math.ceil(this.calendarWithVerticalTimeSectionWidth);
  }
  return this.calendarWithVerticalTimeSectionWidth;
 },
 EnsureCalendarMaxWidth: function() {
  var calendarMainElement = this.GetCalendar().GetMainElement();
  if(!calendarMainElement.style.maxWidth) {
   ASPx.RemoveClassNameFromElement(calendarMainElement, verticalTimeSectionClassName);
   ASPx.RemoveClassNameFromElement(calendarMainElement, calendarWithFullWidthChildsClassName);
   this.SetCalendarMinMaxWidth(this.GetCalendarWithHorizontalTimeSectionWidth());
  }
 },
 GetCalendarWithHorizontalTimeSectionWidth: function() {
  if(this.owner.isDropDownModal())
   return undefined;
  if(!this.calendarWithHorizontalTimeSectionWidth) {
   this.calendarWithHorizontalTimeSectionWidth = 0;
   var calendarMainElement = this.GetCalendar().GetMainElement();
   for(var i = 0; i < calendarMainElement.childNodes.length; i++) {
    var calendarChildElement = calendarMainElement.childNodes[i];
    if(calendarChildElement.tagName == "DIV" && !ASPx.ElementHasCssClass(calendarChildElement, timeSectionFooterClassName))
     this.calendarWithHorizontalTimeSectionWidth += calendarChildElement.getBoundingClientRect().width;
   }
   this.calendarWithHorizontalTimeSectionWidth += this.GetCalendarMainElementHorizontalBorderPaddings();
   this.calendarWithHorizontalTimeSectionWidth = Math.ceil(this.calendarWithHorizontalTimeSectionWidth);
  }
  return this.calendarWithHorizontalTimeSectionWidth;
 },
 GetRequiredTimeSectionPosition: function() {
  var horizontalTimeSectionRightPos = this.GetCalendarWithHorizontalTimeSectionWidth();
  if(this.owner.isDropDownModal()) {
   var modalSys = this.owner.GetPopupControl().GetModalWrapperElement(-1);
   var modalSysStyle = ASPx.GetCurrentStyle(modalSys);
   horizontalTimeSectionRightPos += ASPx.PxToInt(modalSysStyle.paddingLeft) + ASPx.PxToInt(modalSysStyle.paddingRight);
  }
  else
   horizontalTimeSectionRightPos += this.dropDownPosition;
  var verticalScrollBarWidth = ASPx.GetCurrentDocumentWidth() > ASPx.GetDocumentClientWidth() ? ASPx.GetVerticalScrollBarWidth() : 0;
  return horizontalTimeSectionRightPos <= ASPx.GetDocumentScrollLeft() + window.innerWidth - verticalScrollBarWidth ? ASPx.Position.Right : ASPx.Position.Bottom;
 },
 GetCurrentTimeSectionPosition: function() {
  var calendarMainElement = this.GetCalendar().GetMainElement();
  return ASPx.ElementHasCssClass(calendarMainElement, verticalTimeSectionClassName) ? ASPx.Position.Bottom : ASPx.Position.Right;
 },
 OnBrowserWindowResize: function(e) {
  if(this.owner.ddmBP === undefined || this.owner.isDropDownModal(true) !== undefined)
   this.AdjustTimeSectionLayout();
 },
 OnTab: function(evt) {
  var calendar = this.GetCalendar();
  if(calendar.IsFastNavigationActive())
   calendar.CancelFastNavigation();
  if(this.owner.GetShowTimeSection()) {
   this.owner.lockLostFocus = true;
   if(this.owner.GetCalendarOwner()) {
    ASPx.Evt.PreventEvent(evt);  
    this.owner.GetTimeEdit().SetFocus();
   }
   return;
  }
  if(this.owner.GetTextWasChangedInInput()) {
   this.owner.ParseValue();
   this.owner.HideDropDownArea(true);
  } else 
   this.owner.OnCalendarSelectionChanging(this.GetCalendar().GetValue(), false);
  this.owner.SetTextWasChangedInInput(false);
 },
 OnEnter: function(evt) {
  var calendar = this.GetCalendar();
  if(calendar.IsFastNavigationActive())
   calendar.OnEnterDown();
  else if(this.owner.GetTextWasChangedInInput()) {
   this.owner.ParseValue();
   this.owner.HideDropDownArea(true);
  } else {
   var calendarSelection = calendar.GetValue();
   if(this.owner.GetShowTimeSection()) {
    if(calendarSelection) {
     this.owner.ApplySelectedDate();
     ASPx.Selection.Set(this.owner.GetInputElement());
    } 
    this.owner.HideDropDownArea(true);
   } else
    this.owner.OnCalendarSelectionChanging(calendarSelection, true);
  }
 },
 OnEscape: function() {
  if(this.GetCalendar().IsFastNavigationActive())
   this.GetCalendar().OnEscape();
  else
   this.owner.HideDropDownArea(true);
 },
 OnPopupControlShown: function() {
  this.AdjustTimeSectionLayoutOnShowDropDown();
 }
});
var DateEditScrollPickerController = ASPx.CreateClass(DateEditController, {
 constructor: function(owner, spOptions) {
  this.constructor.prototype.constructor.call(this, owner, spOptions);
  this.mask = owner.dateFormatter.mask;
  this.width = owner.width;
  this.height = owner.height;
  this.viewContainer = null;
  this.processDate = false;
  this.tempCache = new ListBoxTemporaryCache();
  this.lastSuccessfulDayIndex = 0;
  this.daysViewFilterUpdate = false;
  this.spOptions = spOptions;
  this.views = {};
  this.groups = [];
  this.wheelsStructure = [];
 },
 Initialize: function(toActivate) {
  DateEditController.prototype.Initialize.call(this, toActivate);
  this.createWheels();
  this.InitializeEvents();
 },
 InitializeEvents: function() {
  this.AttachToYearViewFocusEvents();
  this.AttachToMonthViewFocusEvents();
  this.AttachToDayViewFocusEvents();
  this.AttachToHoursViewFocusEvents();
  this.AttachToMinutesViewFocusEvents();
  this.AttachToSecondsViewFocusEvents();
  this.AttachToMillisecondsViewFocusEvents();
  this.AttachToAmPmViewFocusEvents();
 },
 createWheels: function() {
  this.groups = this.createGroups();
  var container = this.GetViewContainer();
  if(!container)
   return;
  this.groups.forEach(function(g) {
   var groupElement = this.createWheelGroupElement(container);
   g.forEach(function(w) {
    this.views[w.key] = this.createRollerView(groupElement, w.items.call(this), [], w.id, false, w.caption);
   }.bind(this));
  }.bind(this));
 },
 createWheelGroupElement: function(container) {
  var el = document.createElement("div");
  el.className = this.GetGroupElementClassName();
  container.appendChild(el);
  return el;
 },
 createRollerView: function(container, itemsInfo, itemsValue, id, isComboBoxList, caption) {
  return new ASPx.ASPxClientRollersView(this, container, itemsInfo, itemsValue, id, isComboBoxList, caption);
 },
 createGroups: function() {
  return [
   [
    { key: "years", index: this.GetYearsViewIndex(), caption: this.spOptions.yearsCaption, id: "Y", items: this.GetYearsViewItems },
    { key: "months", index: this.GetMonthsViewIndex(), caption: this.spOptions.monthsCaption, id: "M", items: this.GetMonthViewItems },
    { key: "days", index: this.GetDaysViewIndex(), caption: this.spOptions.daysCaption, id: "D", items: this.GetDayViewItems }
   ],
   [
    { key: "hours", index: this.owner.showHourWheel ? 0 : -1, caption: this.spOptions.hoursCaption, id: "TH", items: this.GetHoursViewItems },
    { key: "minutes", index: this.owner.showMinuteWheel ? 1 : -1, caption: this.spOptions.minutesCaption, id: "TM", items: this.GetMinutesSecondsViewItems },
    { key: "seconds", index: this.owner.showSecondWheel ? 2 : -1, caption: this.spOptions.secondsCaption, id: "TS", items: this.GetMinutesSecondsViewItems },
    { key: "milliseconds", index: this.owner.showMillisecondWheel ? 3 : -1, caption: this.spOptions.millisecondsCaption, id: "TMS", items: this.GetMillisecondsViewItems },
    { key: "ampm", index: this.IsAmPmViewExists() ? 4 : -1, caption: this.spOptions.ampmCaption, id: "TAP", items: this.GetAmPmViewItems }
   ]
  ]
  .map(function(g) {
   return g
    .filter(function(w) { return w.index >= 0; })
    .sort(function(w1, w2) { return w1.index - w2.index; });
  })
  .filter(function(g) {
   return g.length;
  });
 },
 GetYearsViewIndex: function() {
  return this.GetDateComponentKeyIndex("y");
 },
 GetMonthsViewIndex: function() {
  if(this.owner.pickerType <= ASPx.DatePickerType.Months)
   return this.GetDateComponentKeyIndex("M");
  return -1;
 },
 GetDaysViewIndex: function() {
  if(this.owner.pickerType == ASPx.DatePickerType.Days)
   return this.GetDateComponentKeyIndex("d");
  return -1;
 },
 GetDateComponentKeyIndex: function(key) {
  return ASPx.Data.ArrayIndexOf(ASPx.CultureInfo.shortDate, key);
 },
 GetDayViewItems: function() {
  var result = [];
  for(var i = 1; i <= 31; i++)
   result.push({ texts: [i.toString()], value: i.toString() });
  return result;
 },
 GetMonthViewItems: function() {
  var result = [];
  var monthNames = ASPx.CultureInfo.genMonthNames.slice(0, 12);
  for(var i = 0; i < 12; i++)
   result.push({ texts: [monthNames[i]], value: i.toString() });
  return result;
 },
 GetYearsViewItems: function() {
  var result = [];
  for(var i = 100; i < 10000; i++)
   result.push({ texts: [i.toString()], value: i.toString() });
  return result;
 },
 IsAmPmExists: function() {
  return ASPx.CultureInfo.is12HoursCulture;
 },
 IsAmPmViewExists: function() {
  return this.owner.showHourWheel && this.IsAmPmExists();
 },
 GetHoursViewItems: function() {
  var result = [];
  var startHour = this.IsAmPmExists() ? 1 : 0;
  var endHour = this.IsAmPmExists() ? 12 : 23;
  for(var i = startHour; i <= endHour; i++)
   result.push({ texts: [i.toString()], value: i.toString() });
  return result;
 },
 GetMinutesSecondsViewItems: function() {
  var result = [];
  for(var i = 0; i < 60; i++) {
   var itemText = i.toString();
   if(itemText.length == 1)
    itemText = "0" + itemText;
   result.push({ texts: [itemText], value: i.toString() });
  }
  return result;
 },
 GetMillisecondsViewItems: function() {
  var result = [];
  for(var i = 0; i < 1000; i++) {
   var itemText = i.toString();
   while(itemText.length < 3)
    itemText = "0" + itemText;
   result.push({ texts: [itemText], value: i.toString() });
  }
  return result;
 },
 GetAmPmViewItems: function() {
  var result = [];
  result.push({ texts: [ASPx.CultureInfo.am], value: "am" });
  result.push({ texts: [ASPx.CultureInfo.pm], value: "pm" });
  return result;
 },
 GetViewContainer: function() {
  if(!this.viewContainer)
   this.viewContainer = this.CreateViewContainer();
  return this.viewContainer;
 },
 CreateViewContainer: function() {
  var viewContainer = this.owner.GetViewContainer();
  if(!viewContainer)
   return;
  var container = document.createElement("DIV");
  container.className = this.GetControllerClassName();
  container.id = this.GetControlName() + "_" + "controllerContainer";
  viewContainer.appendChild(container);
  return container;
 },
 GetControllerClassName: function() {
  var className = "dxScrollPicker";
  var theme = this.owner.getThemeClassName();
  if(theme)
   className += "_" + theme;
  return className + " dxScrollPickerSys";
 },
 GetGroupElementClassName: function() {
  return "dxsp-wgroup";
 },
 GetSelectedDayItem: function() {
  var daysView = this.views["days"];
  if(!daysView)
   return null;
  return daysView.GetFocusedItem();
 },
 GetSelectedDay: function() {
  var item = this.GetSelectedDayItem();
  if(item && item.value)
   return item.value;
  return 1;
 },
 GetSelectedDayIndex: function() {
  var item = this.GetSelectedDayItem();
  if(item)
   return item.index;
  return 0;
 },
 GetSelectedMonth: function() {
  var result = 0;
  var monthsView = this.views["months"];
  if(!monthsView)
   return result;
  var selectedItem = monthsView.GetFocusedItem();
  if(selectedItem && selectedItem.value)
   result = selectedItem.value;
  return result;
 },
 GetSelectedYearItem: function() {
  var yearsView = this.views["years"];
  if(!yearsView)
   return null;
  return this.views["years"].GetFocusedItem();
 },
 GetSelectedYear: function() {
  var item = this.GetSelectedYearItem();
  if(item && item.value)
   return item.value;
  return 100;
 },
 GetSelectedYearIndex: function() {
  var item = this.GetSelectedYearItem();
  if(item && item.index)
   return item.index;
  return 0;
 },
 GetSelectedHour: function() {
  var result = 0;
  var hoursView = this.views["hours"];
  if(!hoursView)
   return result;
  var selectedItem = hoursView.GetFocusedItem();
  if(selectedItem && selectedItem.value)
   result = selectedItem.value;
  result = this.ConvertAmPmValueToHours(result);
  return result;
 },
 GetSelectedMinute: function() {
  var result = 0;
  var minutesView = this.views["minutes"];
  if(!minutesView)
   return result;
  var selectedItem = minutesView.GetFocusedItem();
  if(selectedItem && selectedItem.value)
   result = selectedItem.value;
  return result;
 },
 GetSelectedSecond: function() {
  var result = 0;
  var secondsView = this.views["seconds"];
  if(!secondsView)
   return result;
  var selectedItem = secondsView.GetFocusedItem();
  if(selectedItem && selectedItem.value)
   result = selectedItem.value;
  return result;
 },
 GetSelectedMillisecond: function() {
  var result = 0;
  var millisecondsView = this.views["milliseconds"];
  if(!millisecondsView)
   return result;
  var selectedItem = millisecondsView.GetFocusedItem();
  if(selectedItem && selectedItem.value)
   result = selectedItem.value;
  return result;
 },
 GetSelectedAmPm: function() {
  var result = "am";
  var ampmView = this.views["ampm"];
  if(!ampmView)
   return result;
  var selectedItem = ampmView.GetFocusedItem();
  if(selectedItem && selectedItem.value)
   result = selectedItem.value;
  return result;
 },
 GetSelectedDate: function() {
  var result = new Date(
   this.GetSelectedYear(),
   this.GetSelectedMonth(),
   this.GetSelectedDay(),
   this.GetSelectedHour(),
   this.GetSelectedMinute(),
   this.GetSelectedSecond(),
   this.GetSelectedMillisecond()
  );
  return result;
 },
 SetSelectedDate: function(date) {
  this.processDate = true;
  date = date || new Date();
  this.currentMaxDayValue = date.getDate();
  setTimeout(function() {
   if(this.views["days"]) {
    this.views["days"].FocusItemByValue(date.getDate());
    this.UpdateLastSuccessfulDayIndex();
   }
   if(this.views["years"]) {
    this.UpdateMinMaxYears();
    this.views["years"].FocusItemByValue(date.getFullYear());
   }
   if(this.views["months"])
    this.views["months"].FocusItemByValue(date.getMonth());
   if(this.views["hours"]) {
    var value = this.ConvertHoursToAmPmValue(date.getHours());
    this.views["hours"].FocusItemByValue(value);
   }
   if(this.views["ampm"])
    this.views["ampm"].FocusItemByValue(date.getHours() >= 12 ? "pm" : "am");
   if(this.views["minutes"])
    this.views["minutes"].FocusItemByValue(date.getMinutes());
   if(this.views["seconds"])
    this.views["seconds"].FocusItemByValue(date.getSeconds());
   if(this.views["milliseconds"])
    this.views["milliseconds"].FocusItemByValue(date.getMilliseconds());
   this.processDate = false;
   this.UpdateInputDate();
   this.UpdateDaysViewFilter();
   }.bind(this), 0);
 },
 GetControlName: function() {
  return this.owner.name;
 },
 HasVirtualScrolling: function() {
  return true;
 },
 GetItemCellsIdPostfixes: function() {
  return [lbIPostfixes[2]];
 },
 FormatText: function(texts) {
  return texts[0];
 },
 IsMultiColumn: function() {
  return false;
 },
 LockSynchronization: function() {
 },
 GetSampleItemRow: function() {
  var row = document.createElement("DIV");
  row.className = "dxsp-item";
  row.id = "LBI-1T";
  return row;
 },
 GetAccessibilityHeaderRow: function() {
  return null;
 },
 GetItem: function (index) {
  return this.view.GetItem(index);
 },
 GetIsItemSelected: function(index) {
  return false;
 },
 InitializeItemAttributes: function(newItemRow, newClientId) {
  newItemRow.id = newClientId;
 },
 AddStateControllerClasses: function(newID) {
 },
 GetIsCheckColumnExists: function() {
  return false;
 },
 GetItemCellCount: function() {
  return 1;
 },
 SetItemSelectionAppearance: function() {
 },
 ChangeEnabledStateItem: function() {
 },
 TryApplyHighlighting: function() {
 },
 UnlockSynchronization: function() {
 },
 InitDXTextAttributes: function() {
 },
 isSimplifiedRowIndexCalculationApplicable: function() {
  return false;
 },
 GetTopScrollSpacerHeight: function() {
  return 0;
 },
 GetBottomScrollSpacerHeight: function() {
  return 0;
 },
 NeedToHandleCellWidth: function() {
  return false;
 },
 GetDropDownHeight: function(){
  if(this.owner.ddHeightCache != ASPx.InvalidDimension)
   return this.owner.ddHeightCache;
  this.EnsureDropDownWidth(); 
  var result = this.AdjustListBoxHeight();  
  return result;
 },
 GetDropDownWidth: function() {
  var result = this.owner.ddWidthCache;
  if(this.owner.ddWidthCache == ASPx.InvalidDimension || this.owner.GetIsControlWidthWasChanged())
   result = this.AdjustListBoxWidth();
  return result;
 },
 EnsureDropDownWidth: function() {
  this.GetDropDownWidth();
 },
 AttachToYearViewFocusEvents: function() {
  var yearsView = this.views["years"];
  if(!yearsView)
   return;
  yearsView.EndFocus.AddHandler(this.UpdateDaysViewFilter.aspxBind(this));
  yearsView.ItemFocused.AddHandler(function(s, e) {
   var value = parseInt(e.item.value);
   this.UpdateInputDate(value, yearsView.id);
  }.aspxBind(this));
 },
 AttachToMonthViewFocusEvents: function() {
  var monthView = this.views["months"];
  if(!monthView)
   return;
  monthView.EndFocus.AddHandler(this.UpdateDaysViewFilter.aspxBind(this));
  monthView.ItemFocused.AddHandler(function(s, e) {
   var value = parseInt(e.item.value);
   this.UpdateInputDate(value, monthView.id);
  }.aspxBind(this));
 },
 AttachToDayViewFocusEvents: function() {
  var daysView = this.views["days"];
  if(!daysView)
   return;
  daysView.EndFocus.AddHandler(this.UpdateLastSuccessfulDayIndex.aspxBind(this));
  daysView.ItemFocused.AddHandler(function(s, e) {
   var value = parseInt(e.item.value);
   this.UpdateInputDate(value, daysView.id);
  }.aspxBind(this));
 },
 AttachToHoursViewFocusEvents: function() {
  var hoursView = this.views["hours"];
  if(!hoursView)
   return;
  hoursView.ItemFocused.AddHandler(function(s, e) {
   var value = parseInt(e.item.value);
   var hours = this.ConvertAmPmValueToHours(value);
   this.UpdateInputDate(hours, hoursView.id);
  }.aspxBind(this));
 },
 AttachToMinutesViewFocusEvents: function() {
  var minutesView = this.views["minutes"];
  if(!minutesView)
   return;
  minutesView.ItemFocused.AddHandler(function(s, e) {
   var value = parseInt(e.item.value);
   this.UpdateInputDate(value, minutesView.id);
  }.aspxBind(this));
 },
 AttachToSecondsViewFocusEvents: function() {
  var secondsView = this.views["seconds"];
  if(!secondsView)
   return;
  secondsView.ItemFocused.AddHandler(function(s, e) {
   var value = parseInt(e.item.value);
   this.UpdateInputDate(value, secondsView.id);
  }.aspxBind(this));
 },
 AttachToMillisecondsViewFocusEvents: function() {
  var millisecondsView = this.views["milliseconds"];
  if(!millisecondsView)
   return;
  millisecondsView.ItemFocused.AddHandler(function(s, e) {
   var value = parseInt(e.item.value);
   this.UpdateInputDate(value, millisecondsView.id);
  }.aspxBind(this));
 },
 AttachToAmPmViewFocusEvents: function() {
  var ampmView = this.views["ampm"];
  if(!ampmView)
   return;
  ampmView.ItemFocused.AddHandler(function(s, e) {
   this.UpdateInputDate(e.item.value, ampmView.id);
  }.aspxBind(this));
 },
 UpdateDaysViewFilter: function() {
  if(this.processDate)
   return;
  var daysView = this.views["days"];
  if(!daysView)
   return;
  this.daysViewFilterUpdate = true;
  var year = this.GetSelectedYear();
  var month = this.GetSelectedMonth();
  var dayInMonth = this.GetDayCountInMonth(year, month);
  var visibleItemCount = daysView.GetVisibleItemCount();
  if(dayInMonth == visibleItemCount)
   return;
  var isSatisfyDelegate = function(day) { 
   return parseInt(day) <= dayInMonth;
  };
  var newDayIndices = [];
  var itemCount = daysView.GetItemCount();
  for(var i = 0; i < itemCount; i++) {
   var item = daysView.GetItem(i);
   var isSatisfy = isSatisfyDelegate(item.value);
   if(isSatisfy)
    newDayIndices.push(i);
   daysView.ApplyFilterToItem(i, isSatisfy);
  }
  daysView.RewriteFilteredItemIndices(newDayIndices);
  daysView.OnEndItemsFiltering();
  var focusedDayValue = this.GetFocusedDayValueAfterFiltering(year, month);
  daysView.FocusItemByValue(focusedDayValue);
  daysView.ProcessSmoothScroll(null, false);
  this.daysViewFilterUpdate = false;
 },
 UpdateLastSuccessfulDayIndex: function() {
  if(this.daysViewFilterUpdate)
   return;
  this.lastSuccessfulDayIndex = this.GetSelectedDayIndex();
 },
 UpdateInputDate: function(value, viewID) {
  if(this.processDate || this.IsReadOnly())
   return;
  var focusedDate = this.GetFocusedDate(value, viewID);
  if(focusedDate && !this.owner.GetShowTimeSection())
   this.owner.ApplyExistingTime(focusedDate);
  this.owner.SetValue(focusedDate, true);
 },
 GetFocusedDayValueAfterFiltering: function(year, month) {
  var daysView = this.views["days"];
  var result = null;
  if(!daysView.IsItemFiltered(this.lastSuccessfulDayIndex))
   result = this.GetDayCountInMonth(year, month);
  else
   result = daysView.GetItem(this.lastSuccessfulDayIndex).value;
  return result;
 },
 GetFocusedDate: function(value, viewID) {
  var date = this.GetSelectedDate();
  switch(viewID) {
   case "Y": 
    date.setFullYear(value);
    break;
   case "M":
    date.setMonth(value);
    break;
   case "D":
    date.setDate(value);
    break;
   case "TH":
    date.setHours(value);
    break;
   case "TM":
    date.setMinutes(value);
    break;
   case "TS": 
    date.setSeconds(value);
    break;
   case "TMS": 
    date.setMilliseconds(value);
    break;
   case "TAP":
    var hours = date.getHours();
    var ampm = this.GetSelectedAmPm();
    if(ampm !== value) {
     if(value === "pm" && hours <= 12)
      hours = hours + 12;
     if(value === "am" && hours >= 12)
      hours = hours - 12;
    }
    date.setHours(hours);
    break;
   default: 
    break;
  }
  return date;
 },
 ConvertAmPmValueToHours: function(value) {
  var result = parseInt(value);
  if(!this.IsAmPmViewExists())
   return result;
  var ampm = this.GetSelectedAmPm();
  if(ampm === "pm" && result < 12)
   result = result + 12;
  if(ampm === "am" && result === 12)
   result = 0;
  return result;
 },
 ConvertHoursToAmPmValue: function(hours) {
  if(!this.IsAmPmViewExists())
   return hours;
  if(hours === 0)
   hours = hours + 12;
  if(hours > 12)
   hours = hours - 12;
  return hours;
 },
 GetDayCountInMonth: function(year, month) {
  return new Date(year, parseInt(month) + 1, 0).getDate();
 },
 UpdateMinMaxYears: function() {
  var minDate = this.owner.GetMinDate();
  var minYear = minDate ? minDate.getFullYear() : 100;
  var maxDate = this.owner.GetMaxDate();
  var maxYear = maxDate ? maxDate.getFullYear() : 9999;
  var isSatisfyDelegate = function(year) {
   return year >= minYear && year <= maxYear;
  };
  var selectedYear = parseInt(this.GetSelectedYear());
  var yearsView = this.views["years"];
  var newYearIndices = [];
  var itemCountHiddenFromTop = 0;
  var itemCount = yearsView.GetItemCount();
  for(var i = 0; i < itemCount; i++) {
   var item = yearsView.GetItem(i);
   var value = parseInt(item.value);
   var isSatisfy = isSatisfyDelegate(value);
   if(isSatisfy)
    newYearIndices.push(i);
   if(value < selectedYear) {
    if(item.filtered && !isSatisfy)
     itemCountHiddenFromTop++;
    if(!item.filtered && isSatisfy)
     itemCountHiddenFromTop--;
   }
   yearsView.ApplyFilterToItem(i, isSatisfy);
  }
  yearsView.RewriteFilteredItemIndices(newYearIndices);
  yearsView.OnEndItemsFiltering(itemCountHiddenFromTop);
 },
 AdjustListBoxHeight: function () {
  var height = 0;
  for(var key in this.views) {
   if(this.views.hasOwnProperty(key)) {
    var view = this.views[key];
    if(view) {
     height = Math.max(view.GetScrollDivElement().offsetHeight, height);
     view.Adjust();
    }
   }
  }     
  return height;
 },
 AdjustListBoxWidth: function () {
  var width = 0;
  for(var key in this.views) {
   if(this.views.hasOwnProperty(key)) {
    var view = this.views[key];
    if(view) {
     width = Math.max(view.GetScrollDivElement().offsetWidth, width);
     view.Adjust();
    }
   }
  }     
  return width;
 },
 InitMainElementCache: function(){
  this.mainElementWidthCache = this.GetMainElement().clientWidth;
 },
 AdjustViews: function() {
    for(var key in this.views) {
   if(this.views.hasOwnProperty(key)) {
    var view = this.views[key];
    if(view) {
     view.Adjust();
    }
   }
  }
 },
 IsDisplayed: function() {
  return this.owner.IsDisplayed();
 },
 OnTab: function(evt) { 
  this.owner.HideDropDownArea(true);
 },
 OnEnter: function() { 
  this.owner.ApplySelectedDate();
  this.owner.HideDropDownArea(true);
 },
 OnEscape: function() {
  this.owner.RollbackSelectedDate();
  this.owner.HideDropDownArea(true);
 },
 IsReadOnly: function() {
  return this.owner.GetReadOnly();
 }
});
var UTILS = { 
 PrepareCalendarDateRangeMode: function(dateEdit, endDateEdit) {
  if(dateEdit.enabled) {
   var calendar = dateEdit.GetCalendar();
   if(calendar)
    calendar.updateDayStylesTwiceOnMouseOver = ASPx.Browser.Opera && this.DateEditHasParentWithRelativePosition(endDateEdit);
  }
 },
 DateEditHasParentWithRelativePosition: function(endDateEdit) {
  return ASPx.GetParent(endDateEdit.GetMainElement(),
   function (element) { return ASPx.GetCurrentStyle(element).position === "relative"; }) != null;
 },
 SetActualMinDate: function(dateEdit) {
  var dateRangePair = ASPxDateRangeHelper.GetDateEditPair(dateEdit);
  if(!dateRangePair.isInRangeMode) return;
  var rangeRestricts = ASPxDateRangeHelper.GetCurrentRangeRestrictions(dateRangePair);
  var newMinDate = rangeRestricts.startDate ? rangeRestricts.startDate : dateRangePair.endDateEdit.ownMinDate;
  if(!ASPx.DateUtils.AreDatesEqualExact(dateRangePair.endDateEdit.GetMinDate(), newMinDate))
   dateRangePair.endDateEdit.SetMinDateCore(newMinDate);
 },
 OnRangeRestrictionChanged: function(dateEdit) {
  var dateRangePair = ASPxDateRangeHelper.GetDateEditPair(dateEdit);
  if(!dateRangePair.isInRangeMode) return;
  var rangeRestricts = ASPxDateRangeHelper.GetCurrentRangeRestrictions(dateRangePair);
  if(ASPxDateRangeHelper.NeedCorrectSecondDateOnDateChanging(rangeRestricts, dateRangePair.isStart, dateRangePair.endDateEdit.minRange))
   this.CorrestSecondRangeDate(dateRangePair);
  if(dateRangePair.isStart)
   dateRangePair.endDateEdit.Validate();
  else {
   UTILS.SetActualMinDate(dateRangePair.endDateEdit);
   dateRangePair.startDateEdit.Validate();
  }
 },
 CorrestSecondRangeDate: function(dateRangePair) {
  var changedDate = (dateRangePair.isStart) ? dateRangePair.startDateEdit.GetDate() : dateRangePair.endDateEdit.GetDate();
  var endDateMinRange = Math.max(dateRangePair.endDateEdit.minRange, 0);
  var dateDifference = dateRangePair.isStart ? endDateMinRange : -endDateMinRange;
  var secondDateEdit = dateRangePair.isStart ? dateRangePair.endDateEdit : dateRangePair.startDateEdit;
  var secondDate = ASPxClientCalendar.GetDateByOffset(changedDate, dateDifference, secondDateEdit.pickerType);
  secondDateEdit.SetDate(secondDate);
  secondDateEdit.RaiseValueChangedEvent(true);
 },
 UpdateCalendarVisibleDate: function(targetCalendar, dateRangePair) {
  var rangeRestricts = ASPxDateRangeHelper.GetCurrentRangeRestrictions(dateRangePair);
  targetCalendar.visibleDateColumnOffset = 0;
  if (ASPxDateRangeHelper.IsStartRestrictionExistsOnly(rangeRestricts) && !dateRangePair.isStart) {
   targetCalendar.SetVisibleDate(rangeRestricts.startDate);
  }
  if (ASPxDateRangeHelper.IsEndRestrictionExistsOnly(rangeRestricts)
   || ASPxDateRangeHelper.IsBothRangeRestrictionsExist(rangeRestricts) && !dateRangePair.isStart) {
   targetCalendar.SetVisibleDate(rangeRestricts.endDate);
   if(!ASPxDateRangeHelper.AreRestrictionsOfSamePeriod(rangeRestricts, targetCalendar.pickerType))
    targetCalendar.OnShiftMonth(-1 * (targetCalendar.columns - 1), true);
  }
 },
 GetRangeToSelectInCalendar: function(targetCalendar, dateRangePair, isCalendarShowing) {
  var rangeRestricts = ASPxDateRangeHelper.GetCurrentRangeRestrictions(dateRangePair);
  var calendarHasOwnSelectedDate = targetCalendar.lastSelectedDate != null;
  var correctRangeRestrictsForSelection = !isCalendarShowing && calendarHasOwnSelectedDate;
  if (correctRangeRestrictsForSelection) {
   var calendarLastSelectedDate = ASPxClientCalendar.CloneDate(targetCalendar.lastSelectedDate);
   if (dateRangePair.isStart)
    rangeRestricts.startDate = calendarLastSelectedDate;
   else
    rangeRestricts.endDate = calendarLastSelectedDate;
  }
  return rangeRestricts;
 },
 SelectRangeInCalendar: function(targetCalendar, isCalendarShowing) {
  var dateRangePair = ASPxDateRangeHelper.GetDateEditPair(ASPxClientDateEdit.active);
  if(!dateRangePair.isInRangeMode)
   return;
  var rangeRestrictsToSelect = this.GetRangeToSelectInCalendar(targetCalendar, dateRangePair, isCalendarShowing);
  if(ASPxDateRangeHelper.IsNegativeRange(rangeRestrictsToSelect))
   return;
  targetCalendar.clientUpdate = true;
  targetCalendar.LockUpdateAnimation();
  targetCalendar.ClearSelection();
  if(ASPxDateRangeHelper.IsBothRangeRestrictionsExist(rangeRestrictsToSelect))
   targetCalendar.SelectRange(rangeRestrictsToSelect.startDate, rangeRestrictsToSelect.endDate);
  if(ASPxDateRangeHelper.IsEndRestrictionExistsOnly(rangeRestrictsToSelect))
   targetCalendar.SelectDate(rangeRestrictsToSelect.endDate);
  if(ASPxDateRangeHelper.IsStartRestrictionExistsOnly(rangeRestrictsToSelect))
   targetCalendar.SelectDate(rangeRestrictsToSelect.startDate);
  targetCalendar.UnlockUpdateAnimation();
  targetCalendar.Update();
  targetCalendar.clientUpdate = false;
 },
 OnCalendarShowing: function(dateEdit) {
  var dateRangePair = ASPxDateRangeHelper.GetDateEditPair(ASPxClientDateEdit.active);
  if(!dateRangePair.isInRangeMode)
   return;
  var targetCalendar = ASPxClientDateEdit.active.GetCalendar();
  if(!targetCalendar)
   return;
  UTILS.UpdateCalendarVisibleDate(targetCalendar, dateRangePair);
  UTILS.SetActualMinDate(dateEdit);
  UTILS.SelectRangeInCalendar(targetCalendar, true);
 },
 RegisterSharedCalendar: function(calendar) {
  if(calendar)
   ASPxClientDateEdit.SharedCalendarCollection.registerCalendarId(calendar.name);   
 }
};
ASPxClientDateEdit.SharedCalendarCollection = (function(){
 var sharedCalendarIdCollection = [];
 return {
  registerCalendarId: function(calendarId) {
   if(ASPx.Data.ArrayIndexOf(sharedCalendarIdCollection, calendarId) == -1)
    sharedCalendarIdCollection.push(calendarId);
  },
  calendarIsShared: function(calendarId) {
   return ASPx.Data.ArrayIndexOf(sharedCalendarIdCollection, calendarId) != -1;
  }
 };
})();
ASPxClientDateEdit.Cast = ASPxClientControl.Cast;
ASPxClientDateEdit.active = null;
ASPxClientDateEdit.HandleCalendarSelectionChanging = function(s, e) {
 if(ASPxClientDateEdit.active == null) return;
 ASPxClientDateEdit.active.OnCalendarSelectionChanging(e.selection.GetFirstDate(), true);
};
ASPxClientDateEdit.HandleCalendarCustomDisabledDate = function(s, e) {
 this.OnCalendarCustomDisabledDate(e);
};
ASPxClientDateEdit.HandleCalendarCellClick = function(s, e) {
 this.RaiseCalendarCellClick(e);
};
ASPxClientDateEdit.HandleTimeEditInternalValueChanging = function(s, e) {
 if(ASPxClientDateEdit.active == null) return;
 ASPxClientDateEdit.active.OnTimeEditInternalValueChanging(e);
};
ASPxClientDateEdit.HandleCalendarMainElementClick = function(s, e) {
 var dateEdit = ASPxClientDateEdit.active;
 if(dateEdit == null) 
  return;
 var focusEditor = true;
 if(dateEdit.GetShowTimeSection())
  focusEditor = !ASPx.GetIsParent(dateEdit.GetTimeEdit().GetMainElement(), ASPx.Evt.GetEventSource(e));
 if(focusEditor) {
  if(ASPx.Browser.VirtualKeyboardSupported)
   ASPx.VirtualKeyboardUI.focusEditor(dateEdit);
  else 
   dateEdit.SetFocus();
 }
};
var ASPxClientParseDateEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(value) {
  this.constructor.prototype.constructor.call(this);
  this.value = value;
  this.date = null;
  this.handled = false;
 } 
});
ASPx.DECalClearClick = function() {
 var edit = ASPxClientDateEdit.active;
 if(edit)
  edit.OnTimeSectionClearClick();
};
ASPx.DETimeEditKeyDown = function(s,e) {
 var edit = ASPxClientDateEdit.active;
 if(!edit) return;
 switch(e.htmlEvent.keyCode) {
  case ASPx.Key.Enter:
   edit.OnTimeEditEnter();
   break;
  case ASPx.Key.Esc:
   edit.OnTimeEditEsc();
   break;
  case ASPx.Key.Tab:
   edit.OnTimeEditTab(e.htmlEvent.shiftKey);
   break;
 }
};
ASPx.DETimeEditLostFocus = function() {
 var edit = ASPxClientDateEdit.active;
 if(!edit) return;
 edit.OnTimeEditLostFocus();
};
window.ASPxClientDateEdit = ASPxClientDateEdit;
window.ASPxClientParseDateEventArgs = ASPxClientParseDateEventArgs;
ASPx.DateRangeValidationPattern = DateRangeValidationPattern;
ASPx.DateEditScrollPickerController = DateEditScrollPickerController;
})();

(function() {
ASPx.PCWIdSuffix = "_PW";
var popupControlZIndex = 11998;
var defaultZIndexFromServer = "10000";
var ModalAlign = {
 WindowLeft: "WindowLeft",
 WindowCenter: "WindowCenter",
 WindowRight: "WindowRight",
 WindowTop: "WindowTop",
 WindowBottom: "WindowBottom"
};
function PCResizeCursorInfo(horizontalDirection, verticalDirection, horizontalOffset, verticalOffset) {
 this.horizontalDirection = horizontalDirection;
 this.verticalDirection = verticalDirection;
 this.horizontalOffset = horizontalOffset;
 this.verticalOffset = verticalOffset;
 this.course = verticalDirection + horizontalDirection;
}
var PopupControlCssClasses = {};
PopupControlCssClasses.Prefix = "dxpc-";
PopupControlCssClasses.SizeGripLiteCssClassName = PopupControlCssClasses.Prefix + "sizeGrip";
PopupControlCssClasses.LinkCssClassName = PopupControlCssClasses.Prefix + "link";
PopupControlCssClasses.ShadowLiteCssClassName = PopupControlCssClasses.Prefix + "shadow";
PopupControlCssClasses.MainDivLiteCssClass = PopupControlCssClasses.Prefix + "mainDiv";
PopupControlCssClasses.ContentWrapperCssClassName = PopupControlCssClasses.Prefix + "contentWrapper";
PopupControlCssClasses.ContentCssClassName = PopupControlCssClasses.Prefix + "content";
PopupControlCssClasses.HeaderContentCssClassName = PopupControlCssClasses.Prefix + "headerContent";
PopupControlCssClasses.FooterContentCssClassName = PopupControlCssClasses.Prefix + "footerContent";
PopupControlCssClasses.WindowWrapperCssClassName = PopupControlCssClasses.Prefix + "win-wrapper";
PopupControlCssClasses.WindowWrapperScrollCssClassName = PopupControlCssClasses.WindowWrapperCssClassName + "-scroll";
PopupControlCssClasses.HeaderCssClassName = "dxpc-header";
var LoadContentViaCallback = {
 Default: "Default",
 OnFirstShow: "OnFirstShow",
 OnPageLoad: "OnPageLoad"
};
var constants = {
 DEFAULT_WINDOW_WIDTH: 200,
 DEFAULT_WINDOW_HEIGHT: 0
};
var ASPxClientPopupControlBase = ASPx.CreateClass(ASPxClientControl, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.leadingAfterInitCall = ASPxClientControl.LeadingAfterInitCallConsts.Direct; 
  this.adjustInnerControlsSizeOnShow = true;
  this.shadowVisible = true;
  this.cookieName = "";
  this.popupAnimationType = "none";
  this.closeAnimationType = "none";
  this.closeAction = "OuterMouseClick";
  this.isPopupFullCorrectionOn = true;
  this.forceAdjustPositionToClientScreen = false;
  this.usedInDropDown = false; 
  this.popupHorizontalOffset = 0;
  this.popupVerticalOffset = 0;
  this.popupHorizontalAlign = ASPx.PopupUtils.NotSetAlignIndicator;
  this.popupVerticalAlign = ASPx.PopupUtils.NotSetAlignIndicator;
  this.contentLoadingMode = LoadContentViaCallback.Default;
  this.slideAnimationDuration = 80;
  this.fadeAnimationDuration = 400;
  this.enableAnimation = true;
  this.showOnPageLoad = false;
  this.isDragged = false;
  this.closeOnEscape = false;
  this.savedCallbackWindowIndex = null;
  this.animationLockCount = 0;
  this.windowRequestCount = [];
  this.lpTimers = [];
  this.callbackAnimationProcessings = [];
  this.isCallbackFinishedStates = [];
  this.savedCallbackResults = [];
  this.loadingPanels = [];
  this.loadingDivs = [];
  this.left = 0;
  this.top = 0;
  this.height = constants.DEFAULT_WINDOW_HEIGHT;
  this.width = constants.DEFAULT_WINDOW_WIDTH;
  this.minHeight = null;
  this.minWidth = null;
  this.maxHeight = null;
  this.maxWidth = null;
  this.isResized = false;
  this.cachedSize = null;
  this.enableContentScrolling = false;
  this.contentOverflowX = "None";
  this.contentOverflowY = "None";
  this.contentUrl = "";
  this.contentUrlIFrameTitle = "";
  this.iframeLoading = false;
  this.iframeAdjustingPostponed = false;
  this.isPopupPositionCorrectionOn = true;
  this.resizeSessionCache = {};
  this.ResizeBorderSize = ASPx.Browser.TouchUI ? 10 : 6;
  this.ResizeCornerBorderSize = 20;
  this.isLiveResizingMode = true;
  this.allowResize = false;
  this.allowDragging = false;
  this.allowDraggingInAdaptiveMode = false;
  this.isWindowDragging = false;
  this.prohibitClearSelectionOnMouseDown = false;
  this.windowElements = {};
  this.windowContentElements = {};
  this.zIndex = -1;
  this.appearAfter = 300;
  this.disappearAfter = 500;
  this.popupAction = "LeftMouseClick";
  this.autoUpdatePosition = false;
  this.defaultIsPopuped = false;
  this.defaultLastUsedPopupElementInfo = {};
  this.defaultWindowPopupElementList = [];
  this.defaultWindowPopupElementIDList = [];
  this.firstFocusableElement = null;
  this.lastFocusableElement = null;
  this.focusLastElementHandler = function(e) { this.loopFocusHandler(e, false); }.aspxBind(this);
  this.focusFirstElementHandler = function(e) { this.loopFocusHandler(e, true); }.aspxBind(this);
  this.setFocusOnCallback = true;
  this.accessibleFocusElement = null;
  this.preventAccessibilityFocus = false;
  this.CloseButtonClick = new ASPxClientEvent();
  this.CloseUp = new ASPxClientEvent();
  this.Closing = new ASPxClientEvent();
  this.PopUp = new ASPxClientEvent();
  this.Shown = new ASPxClientEvent();
  this.Resize = new ASPxClientEvent();
  this.Dragged = new ASPxClientEvent(); 
  this.BeforeDrag = new ASPxClientEvent(); 
  this.BeforeResizing = new ASPxClientEvent();
  this.AfterResizing = new ASPxClientEvent();
  aspxGetPopupControlCollection().Add(this);
 },
 WindowElementIDAssignmentMap: [
  { cssClass: PopupControlCssClasses.HeaderCssClassName, prefix: "_PWH" },
  { cssClass: "dxpc-headerText", prefix: "_PWH", postfix: "T" },
  { cssClass: "dxpc-headerImg", prefix: "_PWH", postfix: "I" },
  { cssClass: "dxpc-closeBtn", prefix: "_HCB" },
  { cssClass: "dxpc-pinBtn", prefix: "_HPB" },
  { cssClass: "dxpc-refreshBtn", prefix: "_HRB" },
  { cssClass: "dxpc-collapseBtn", prefix: "_HMNB" },
  { cssClass: "dxpc-maximizeBtn", prefix: "_HMXB" },
  { cssClass: "dxpc-content", prefix: "_PWC" },
  { cssClass: "dxpc-iFrame", prefix: "_CIF" },
  { cssClass: "dxpc-footer", prefix: "_PWF" },
  { cssClass: "dxpc-footerText", prefix: "_PWF", postfix: "T" },
  { cssClass: "dxpc-footerImg", prefix: "_PWF", postfix: "I" }
 ],
 Initialize: function() {
  this.InitializeBeforeAnyShow();
  ASPxClientControl.prototype.Initialize.call(this);
  if(this.accessibilityCompliant)
   this.InitializeAccessibleNavigation();
 },
 InitializeWindow: function(index) {
  ASPx.PopupUtils.BodyScrollHelper.RestoreIfLocked(this.GetWindowElementId(index));
  this.RemoveWindowAllPopupElements(index);
  this.PopulatePopupElements(index);
  var element = this.GetWindowElement(index);
  if(element != null) {
   this.AssignWindowElementsID(index, element);
   this.AssignWindowElementsEvents(index, element);
   element.DXPopupWindowElement = true;
   this.AttachOnDragStartEventToWindowImages(index);
   this.EnsureWindowContentUrl(index);
   element.isHiding = false;
   element.isPopupPositionCorrectionOn = this.isPopupPositionCorrectionOn || !this.GetShowOnPageLoad(index);
   if(this.GetShowOnPageLoad(index) && this.GetZIndex(index) > 0) {
    this.FirstShowWindow(index, false);
    this.SetWindowElementZIndex(element, this.GetZIndex(index));
    element.isPopupPositionCorrectionOn = true;
   }
   this.InitializeWindowEscKeyHandler(element, index);
   if(this.GetCanScrollViewPort(index))
    ensureViewPortSizeInterval();
   var headerImageElement = this.GetWindowHeaderImageCell(index);
   if(headerImageElement != null) {
    var headerImageHandler = function() {
     this.CorrectHeaderContentElementHeight(index);
    }.aspxBind(this);
    headerImageElement.addEventListener("load", headerImageHandler);
    headerImageElement.addEventListener("error", headerImageHandler);
   }
   var footerImageElement = this.GetWindowFooterImageCell(index);
   if(footerImageElement != null) {
    var footerImageHandler = function() {
     this.CorrectWindowSizeGripPositionLite(index);
     this.CorrectFooterTextElementWidth(index);
    }.aspxBind(this);
    footerImageElement.addEventListener("load", footerImageHandler);
    footerImageElement.addEventListener("error", footerImageHandler);
   }
  }
 },
 InitializeBeforeAnyShow: function() {
  this.InitializeEnableContentScrolling();
 },
 InitializeEnableContentScrolling: function() {
  this.enableContentScrolling = this.contentOverflowX != "None" || this.contentOverflowY != "None";
 },
 InitializeWindowEscKeyHandler: function(element, index) {
  if(!this.GetEnableCloseByEsc(index)) return;
  this.AddKeyDownHandler("ESC", this.OnEscKeyDown.aspxBind(this));
 },
 AfterInitialize: function() {
  if(this.HasDefaultWindow())
   this.AfterInitializeWindow(-1);
  for(var i = 0; i < this.GetWindowCount(); i++)
   this.AfterInitializeWindow(i);
  ASPxClientControl.prototype.AfterInitialize.call(this);
 },
 AfterInitializeWindow: function(index) {
  if(this.GetShowOnPageLoad(index) && this.GetZIndex(index) < 0) {
   this.FirstShowWindow(index, true);
   var element = this.GetWindowElement(index);
   if(element != null)
    element.isPopupPositionCorrectionOn = true;
  }
  this.EnsureContent(index, true);
 },
 AssignWindowElementsID: function(index, windowElement) {
  for(var i = 0; i < this.WindowElementIDAssignmentMap.length; i++) {
   var elementClass = this.WindowElementIDAssignmentMap[i].cssClass;
   var elements = ASPx.GetNodesByClassName(windowElement, elementClass);
   for(var j = 0; j < elements.length; j++) {
    var element = elements[j];
    if(this.GetFirstParentWindow(element) === windowElement)
     this.AssignElementID(element, index, this.WindowElementIDAssignmentMap[i].prefix, this.WindowElementIDAssignmentMap[i].postfix);
   }
  }
 },
 AssignElementID: function(element, index, prefix, postfix) {
  element.id = this.name + prefix + index + (postfix ? postfix : "");
 },
 AssignWindowElementsEvents: function(index, element) {
  var header = this.GetWindowHeaderElement(index);
  if(header && this.allowDragging && !this.isWindowDragging)
   ASPx.Evt.AttachEventToElement(header, ASPx.TouchUIHelper.touchMouseDownEventName, this.GetWindowHeaderElementMouseDownEventHandler(index), true);
  this.AssignHeaderButtonsEvents(index);
  var mdEventName = ASPx.TouchUIHelper.touchMouseDownEventName;
  ASPx.Evt.AttachEventToElement(element, mdEventName, this.GetWindowElementMouseDownEventHandler(index));
  if(this.IsResizeAllowed(index)) {
   var mmEventName = ASPx.TouchUIHelper.touchMouseMoveEventName;
   ASPx.Evt.AttachEventToElement(element, mmEventName, this.GetWindowElementMouseMoveEventHandler(index));
  }
  var sizeGrip = this.GetWindowSizeGripElement(index);
  if(sizeGrip) {
   var instance = this;
   ASPx.Evt.AttachEventToElement(sizeGrip, mdEventName, function(evt) {
    ASPx.PWGripMDown(evt, instance.name, index);
    ASPx.Evt.PreventEvent(evt);
   });
  }
 },
 AssignHeaderButtonsEvents: function(index) {
  this.AttachClickToHeaderButton(index, this.GetWindowCloseButton(index), "ASPx.PWCBClick");
  this.AttachClickToHeaderButton(index, this.GetWindowRefreshButton(index), "ASPx.PWRBClick");
 },
 AttachClickToHeaderButton: function(index, headerButton, eventFuncName) {
  var instance = this;
  if(headerButton) {
   ASPx.Evt.AttachEventToElement(headerButton, "click", function(evt) {
    eval(eventFuncName)(evt, instance.name, index);
   });
  }
 },
 AttachOnDragStartEventToWindowImages: function(index) {
  this.AttachChildImagesPreventDragStartEvent(this.GetWindowHeaderElement(index));
  this.AttachChildImagesPreventDragStartEvent(this.GetWindowFooterElement(index));
 },
 AttachChildImagesPreventDragStartEvent: function(parentElem) {
  var images = parentElem == null ? null : ASPx.GetNodesByTagName(parentElem, "img");
  if(images != null) {
   for(var i = 0; i < images.length; i++)
    ASPx.Evt.AttachEventToElement(images[i], "dragstart", ASPx.Evt.PreventEventAndBubble);
  }
 },
 GetPropertyValue: function(index, propName) {
  return this[propName];
 },
 SetPropertyValue: function(index, propName, value) {
  this[propName] = value;
 },
 GetStretchVerticallyByIndex: function(index) {
  return this.GetPropertyValue(index, "stretchVertically");
 },
 GetModalMaxWidth: function(index) {
  return this.GetPropertyValue(index, "modalMaxWidth");
 },
 SetAdaptiveMaxWidthByIndex: function(index, value) {
  value = this.ConvertDimensionValueToString(value);
  this.SetPropertyValue(index, "modalMaxWidth", value);
  this.GetWindowElement(index).style["maxWidth"] = value;
  if(value.indexOf("px") > 0)
   this.EnsureMaxWidthClassName(index, ASPx.PxToInt(value));
 },
 EnsureMaxWidthClassName: function(index, maxWidth) {
  var defaultPaddingsWidth = 20;
  ASPx.ToggleClassNameToElement(this.GetModalWrapperElement(index), "dxmodalMaxWidth", maxWidth < ASPx.MaxMobileWindowWidth - defaultPaddingsWidth);
 },
 GetModalMinWidth: function(index) {
  return this.GetPropertyValue(index, "modalMinWidth");
 },
 SetAdaptiveMinWidthByIndex: function(index, value) {
  value = this.ConvertDimensionValueToString(value);
  this.SetPropertyValue(index, "modalMinWidth", value);
  this.GetWindowElement(index).style["minWidth"] = value;
 },
 GetModalMinHeight: function(index) {
  return this.GetPropertyValue(index, "modalMinHeight");
 },
 SetContentElementsAdaptiveDisplayStyle: function(index) {
  var contentWrapper = this.GetWindowContentWrapperElement(index);
  ASPx.ToggleClassNameToElement(contentWrapper, "dxmodalTableSys", !this.GetWindowContentIFrameElement(index) && !this.HasAnyScrollBars(index));
 },
 SetContentWrapperAdaptiveHeight: function(index, adaptiveHeight) {  
  var contentWrapper = this.GetWindowContentWrapperElement(index);
  contentWrapper.style.height = adaptiveHeight;  
 },
 SetAdaptiveMinHeightByIndex: function(index, value) {  
  this.StretchVerticallyByIndex(index, false);
  this.SetPropertyValue(index, "modalMinHeight", value);
  this.SetAdaptiveHeightDimension(index, "minHeight", value);
 },
 GetModalMaxHeight: function(index) {
  return this.GetPropertyValue(index, "modalMaxHeight");
 },
 SetAdaptiveMaxHeightByIndex: function(index, value) {
  this.SetPropertyValue(index, "modalMaxHeight", value);
  this.SetAdaptiveHeightDimension(index, "maxHeight", value);
 },
 GetFixedHeader: function(index) {
  return this.GetPropertyValue(index, "fixedHeader");
 },
 GetFixedFooter: function(index) {
  return this.GetPropertyValue(index, "fixedFooter");
 },
 GetWindowWidthInternal: function(index) {
  return this.GetPropertyValue(index, "width");
 },
 GetWindowHeightInternal: function(index) {
  return this.GetPropertyValue(index, "height");
 },
 SetWindowHeight: function(index, height) {
  this.SetPropertyValue(index, "height", height);
 },
 SetWindowWidth: function(index, width) {
  this.SetPropertyValue(index, "width", width);
 },
 GetWindowMinWidth: function(index) {
  return this.GetPropertyValue(index, "minWidth");
 },
 GetWindowMaxWidth: function(index) {
  return this.GetPropertyValue(index, "maxWidth");
 },
 GetWindowMinHeight: function(index) {
  return this.GetPropertyValue(index, "minHeight");
 },
 GetWindowMaxHeight: function(index) {
  return this.GetPropertyValue(index, "maxHeight");
 },
 SetWindowMaxHeight: function(index, maxHeight) {
  this.SetPropertyValue(index, "maxHeight", maxHeight);
 },
 SetWindowCachedSize: function(index, width, height) {
  this.SetPropertyValue(index, "cachedSize", new ASPx.PopupSize(width, height));
 },
 GetWindowCachedSize: function(index) {
  return this.GetPropertyValue(index, "cachedSize");
 },
 ResetWindowCachedSize: function(index) {
  this.SetPropertyValue(index, "cachedSize", null);
 },
 GetPosition: function(index, isLeft) {
  return this.GetPropertyValue(index, isLeft ? "left" : "top");
 },
 GetWindowTop: function(index) {
  return this.GetPropertyValue(index, "top");
 },
 SetWindowTop: function(index, top) {
  this.SetPropertyValue(index, "top", top);
 },
 GetWindowLeft: function(index) {
  return this.GetPropertyValue(index, "left");
 },
 SetWindowLeft: function(index, left) {
  this.SetPropertyValue(index, "left", left);
 },
 GetEnableCloseByEsc: function(index) {
  return this.GetPropertyValue(index, "closeOnEscape");
 },
 GetIsDragged: function(index) {
  return this.GetPropertyValue(index, "isDragged");
 },
 GetWindowContentIFrameUrl: function(index) {
  return this.GetPropertyValue(index, "contentUrl");
 },
 GetWindowContentIFrameTitle: function(index) {
  return this.GetPropertyValue(index, "contentUrlIFrameTitle");
 },
 GetWindowCloseAction: function(index) {
  return this.GetPropertyValue(index, "closeAction");
 },
 GetShowOnPageLoad: function(index) {
  return this.GetPropertyValue(index, "showOnPageLoad");
 },
 GetZIndex: function(index) {
  return this.GetPropertyValue(index, "zIndex");
 },
 GetIframeLoading: function(index) {
  return this.GetPropertyValue(index, "iframeLoading");
 },
 SetIframeLoading: function(index, value) {
  this.SetPropertyValue(index, "iframeLoading", value);
 },
 SetIsDragged: function(index, value) {
  this.SetPropertyValue(index, "isDragged", value);
 },
 GetIsResized: function(index) {
  return this.GetPropertyValue(index, "isResized");
 },
 SetIsResized: function(index, value) {
  this.SetPropertyValue(index, "isResized", value);
 },
 SetIframeAdjustingPostponed: function(index, value) {
  this.SetPropertyValue(index, "iframeAdjustingPostponed", value);
 },
 GetIframeAdjustingPostponed: function(index) {
  return this.GetPropertyValue(index, "iframeAdjustingPostponed");
 },
 GetWindowPopupAction: function(index) {
  return this.GetPropertyValue(index, "popupAction");
 },
 GetWindowElementMouseMoveEventHandler: function(index) {
  var instance = this;
  return function(evt) { ASPx.PWMMove(evt, instance.name, index); };
 },
 GetWindowElementMouseDownEventHandler: function(index) {
  var instance = this;
  return function(evt) {
   if(instance.AllowMouseDown(evt, index))
    ASPx.PWMDown(evt, instance.name, index, instance.isWindowDragging);
  };
 },
 GetWindowHeaderElementMouseDownEventHandler: function(index) {
  var instance = this;
  return function(evt) {
   if(instance.AllowMouseDown(evt, index))
    ASPx.PWDGMDown(evt, instance.name, index);
  };
 },
 AllowMouseDown: function(evt, index) {
  return !this.PreventHeaderButtonMouseDownBubbling(evt, this.GetWindowCloseButton(index)) &&
   !this.PreventHeaderButtonMouseDownBubbling(evt, this.GetWindowRefreshButton(index));
 },
 PreventHeaderButtonMouseDownBubbling: function(evt, hdrButton) {
  if(hdrButton) {
   var source = ASPx.Evt.GetEventSource(evt);
   if(ASPx.GetIsParent(hdrButton, source)) {
    ASPx.PWHMDown(evt);
    return true;
   }
  }
  return false;
 },
 PrepareToAdjustContentOnShow: function(index) {
  if(this.adjustInnerControlsSizeOnShow) {
   var windowContent = this.GetContentContainer(index),
    collection = ASPx.GetControlCollection();
   collection.CollapseControls(windowContent);
  }
 },
 AdjustContentOnShow: function(index) {
  if(this.adjustInnerControlsSizeOnShow) {
   var windowElement = this.GetWindowElement(index);
   ASPx.GetControlCollection().AdjustControls(windowElement, false);
  }
 },
 AdjustSize: function() {
  if(this.enableContentScrolling)
   return;
  this.SetSize(0, 0);
 },
 GetFirstParentWindow: function(el) {
  while(el && el.tagName != "BODY") {
   if(el.nodeType == 1 && el.className.indexOf("dxpclW") > -1 && !isNaN(this.GetWindowIndex(el)))
    return el;
   el = el.parentNode;
  }
 },
 getParentPopupControl: function(index) {
  var parentPopupWindowElement = this.GetFirstParentWindow(this.GetWindowElement(index).parentNode);
  if(parentPopupWindowElement)
   return aspxGetPopupControlCollection().GetPopupWindowFromID(parentPopupWindowElement.id);
 },
 registerAndActivateWindow: function(windowElement, index, allowChangeZIndex) {
  aspxGetPopupControlCollection().RegisterVisibleWindow(windowElement, this, index);
  if(allowChangeZIndex)
   aspxGetPopupControlCollection().ActivateWindowElement(windowElement, undefined, this.GetPopupType(), this.GetDefaultZIndexFromServer(), this.GetPopupControlZIndex());
 },
 HasCloseAnimation: function() {
  return this.closeAnimationType !== ASPxClientPopupControlBase.AnimationType.None;
 },
 HasOpenAnimation: function() {
  return this.popupAnimationType !== ASPxClientPopupControlBase.AnimationType.None;
 },
 AddKeyDownHandler: function(shortcutString, handler) {
  if(typeof(this.keyDownHandlers) === "undefined")
   this.keyDownHandlers = [];
  this.keyDownHandlers[ASPx.ParseShortcutString(shortcutString)] = handler;
 },
 InternalIsWindowDisplayed: function(index) {
  var element = this.GetWindowElement(index);
  return (element != null) ? ASPx.GetElementDisplay(element) : false;
 },
 InternalIsWindowVisible: function(index) {
  var element = this.GetWindowElement(index);
  if(!element)
   return false;
  if(this.HasCloseAnimation() && !element.closeAnimationCompleted)
   return false;
  return ASPx.GetElementVisibility(element, true) && ASPx.GetElementDisplay(element);
 },
 IsWindowVisible: function(window) {
  var index = (window != null) ? window.index : -1;
  return this.InternalIsWindowVisible(index);
 },
 IsVisible: function() {
  return this.InternalIsWindowVisible(-1);
 },
 UpdateWindowsStateCookie: function() {
  if(this.cookieName == "") return;
  ASPx.Cookie.DelCookie(this.cookieName);
  ASPx.Cookie.SetCookie(this.cookieName, this.GetWindowsState());
 },
 SetWindowElementZIndex: function(element, zIndex) {
  element.style.zIndex = zIndex;
  var iFrame = element.overflowElement;
  if(iFrame)
   iFrame.style.zIndex = zIndex - 1;
  var modalElement = element.modalElement;
  if(modalElement)
   modalElement.style.zIndex = zIndex - 1;
  this.UpdateWindowsStateCookie();
 },
 SetWindowContentHtmlCore: function(index, html, useAnimation) {
  var element = this.GetContentContainer(index);
  if(element != null) {
   ASPx.SetInnerHtml(element, html);
   this.AfterSetWindowContentHtml(index, element, useAnimation);
  }
 },
 SetContentHtml: function(html, useAnimation) {
  this.SetWindowContentHtml(null, html, useAnimation);
  if(html && this.accessibilityCompliant)
   ASPx.GetControlCollection().ControlsInitialized.AddHandler(this.OnControlsInitialized, this);
 },
 SetWindowContentHtml: function(window, html, useAnimation) {
  var index = (window != null) ? window.index : -1;
  this.SetWindowContentHtmlCore(index, html, useAnimation);
 },
 GetContentHtml: function() {
  return this.GetWindowContentHtml(null);
 },
 AfterSetWindowContentHtml: function(index, contentContainer, useAnimation) {
  if(useAnimation && typeof (ASPx.AnimationHelper) != "undefined")
   ASPx.AnimationHelper.fadeIn(contentContainer, function() { this.ResizeWindowIFrame(index); }.aspxBind(this));
  else
   this.ResizeWindowIFrame(index);
 },
 ResizeWindowIFrame: function(index) {
  if(!this.renderIFrameForPopupElements || !this.InternalIsWindowVisible(index)) return;
  var iFrame = this.GetWindowIFrame(index);
  if(iFrame) {
   var cell = this.GetWindowMainCell(this.GetWindowElement(index));
   ASPx.SetStyles(iFrame, { width: cell.offsetWidth, height: cell.offsetHeight });
  }
 },
 DoHideWindow: function(index, dontRaiseClosing, closeReason) {
  if(!this.InternalIsWindowVisible(index)) return;
  var cancel = !dontRaiseClosing && this.RaiseClosing(index, closeReason);
  if(!cancel) {
   if(this.HasCloseAnimation() && this.IsAnimationAllowed())
    this.DoHideWindowCoreWithAnimation(index, closeReason);
   else {
    this.DoHideWindowCore(index, closeReason);
    this.RaiseCloseUp(index, closeReason);
   }
  }
  return cancel;
 },
 HasAnyScrollBars: function(index) {
  var contentElement = this.GetWindowContentElement(index);
  var hasBothScrollBars = contentElement.style.overflow == "scroll" || contentElement.style.overflow == "auto";
  return hasBothScrollBars || contentElement.style.overflowX == "scroll" ||
   contentElement.style.overflowY == "scroll" || contentElement.style.overflowX == "auto" ||
   contentElement.style.overflowY == "auto";
 },
 DoHideWindowModalElement: function(element, closeReason) {
  var modalElement = element.modalElement;
  if(modalElement && ASPx.GetElementVisibility(modalElement, true)) {
   var closeModalElement = function () {
    ASPx.SetStyles(modalElement, { width: 1, height: 1, zIndex: defaultZIndexFromServer - 1 });
    ASPx.SetElementVisibility(modalElement, false);
    ASPx.SetElementDisplay(modalElement, false);
   };
   aspxGetPopupControlCollection().UnregisterVisibleModalElement(modalElement);
   if(this.GetHideBodyScrollWhenModal(this.GetWindowIndex(element))) {
    if(ASPx.Browser.WebKitFamily)
     aspxGetPopupControlCollection().LockScrollEvent();
    if(!ASPx.Browser.WebKitTouchUI)
     ASPx.PopupUtils.BodyScrollHelper.RestoreBodyScroll(element.id);
    if(ASPx.Browser.WebKitFamily)
     aspxGetPopupControlCollection().UnlockScrollEvent();
   }
   if(closeReason == ASPxClientPopupControlCloseReason.OuterMouseClick) {     
    ASPx.SetStyles(modalElement, { opacity: 0 });
    if(!modalElement.mouseHandler) {
     modalElement.mouseHandler = function() {
      ASPx.SetStyles(modalElement, { opacity: "" });
      closeModalElement();
      ASPx.Evt.DetachEventFromElement(modalElement, "mouseup", modalElement.mouseHandler);
      ASPx.Evt.DetachEventFromElement(modalElement, "mouseout", modalElement.mouseHandler);
     };
    }
    ASPx.Evt.AttachEventToElement(modalElement, "mouseup", modalElement.mouseHandler);
    ASPx.Evt.AttachEventToElement(modalElement, "mouseout", modalElement.mouseHandler);
   } else
    closeModalElement();
  }
 },
 IncreaseWindowRequestCount: function (index) {
  if(!this.windowRequestCount[index])
   this.windowRequestCount[index] = 1;
  else
   this.windowRequestCount[index]++;
 },
 DecreaseWindowRequestCount: function(index) {
  this.windowRequestCount[index]--;
 },
 IsLoadingContainerVisible: function() {
  return true;
 },
 ShouldHideExistingLoadingElements: function() {
  return false;
 },
 GetModalElementEndAnimationOpacity: function(index) {
  if(typeof (this.modalElementOpacity) == "undefined")
   this.modalElementOpacity = [];
  if(typeof (this.modalElementOpacity[index]) == "undefined")
   this.modalElementOpacity[index] = ASPx.GetElementOpacity(this.GetWindowModalElement(index));
  return this.modalElementOpacity[index];
 },
 SetModalElementVisibilityWithAnimation: function(modalElement, index) {
  if(this.AllowModalElementAnimation(index)) {
   var endOpacity = this.GetModalElementEndAnimationOpacity(index);
   ASPx.AnimationHelper.setOpacity(modalElement, 0);
   ASPx.SetElementVisibility(modalElement, true);
   ASPx.AnimationHelper.fadeTo(modalElement, { to: endOpacity });
  } else
   ASPx.SetElementVisibility(modalElement, true);
 },
 AllowModalElementAnimation: function(index) {
  return this.popupAnimationType === ASPxClientPopupControlBase.AnimationType.Fade;
 },
 SetVisibleWithAnimation: function(element, isMoving, index, horizontalPopupPosition, verticalPopupPosition) {
  var isAnimationNeed = this.IsAnimationAllowed() && !isMoving;
  if(isAnimationNeed && this.popupAnimationType !== "none") {
   switch(this.popupAnimationType) {
    case ASPxClientPopupControlBase.AnimationType.Slide:
     this.StartSlideAnimation(element, index, horizontalPopupPosition, verticalPopupPosition);
     break;
    case ASPxClientPopupControlBase.AnimationType.Fade:
     this.StartFadeAnimation(element, index);
     break;
    case ASPxClientPopupControlBase.AnimationType.Auto:
     this.StartAutoAnimation(element, index, horizontalPopupPosition, verticalPopupPosition);
     break;
   }
  }
  else
   ASPx.SetElementVisibility(element, true);
 },
 StartAutoAnimation: function(element, index, horizontalPopupPosition, verticalPopupPosition) {
  ASPx.SetElementVisibility(element, true);
 },
 StartFadeAnimation: function(element, index) {
  ASPx.AnimationHelper.setOpacity(element, 0);
  ASPx.SetElementVisibility(element, true);
  var callback = function() {
   this.OnAnimationStop(index);
  }.aspxBind(this);
  ASPx.AnimationHelper.fadeIn(element, callback, this.fadeAnimationDuration);
 },
 StartSlideAnimation: function (animationDivElement, index, horizontalPopupPosition, verticalPopupPosition) {
  var element = this.GetWindowMainCell(animationDivElement);
  var clientX = horizontalPopupPosition.position;
  var clientY = verticalPopupPosition.position;
  var args = "(\"" + this.name + "\", " + index + ")";
  var onAnimStopCallString = "ASPx.PCAStop" + args;
  this.InitDivPosForShowSlideAnimation(index, animationDivElement, clientX, clientY, onAnimStopCallString);
  var horizontalDirection = this.GetAnimationHorizontalDirection(index, horizontalPopupPosition);
  var verticalDirection = this.GetAnimationVerticalDirection(index, verticalPopupPosition);
  var offsetCoefficient = this.GetSlideOffsetCoefficient(index);
  var xPos = horizontalDirection * animationDivElement.offsetWidth * offsetCoefficient;
  var yPos = verticalDirection * animationDivElement.offsetHeight * offsetCoefficient;
  neddToForceAnimation = xPos === 0 && yPos === 0;
  if(neddToForceAnimation) 
   yPos = 1;
  ASPx.SetStyles(element, { left: xPos, top: yPos });
  ASPx.SetElementVisibility(animationDivElement, true);
  this.DoShowWindowIFrame(index, clientX, clientY, 0, 0);
  ASPx.PopupUtils.StartSlideAnimation(animationDivElement, element, this.GetWindowIFrame(index), this.GetSlideAnimationDuration(index));
 },
 GetSlideAnimationDuration: function(index) {
  return this.slideAnimationDuration;
 },
 GetSlideOffsetCoefficient: function(index) {
  return 1;
 },
 InitDivPosForShowSlideAnimation: function(index, animationDivElement, clientX, clientY, onAnimStopCallString) {
  ASPx.PopupUtils.InitAnimationDiv(animationDivElement, clientX, clientY, onAnimStopCallString, true);
 },
 InitDivPosForHideSlideAnimation: function(animationDivElement) {
 },
 StopShowAnimation: function(index) {
  if(this.HasOpenAnimation()) {
   var windowElement = this.GetWindowElement(index);
   if(this.popupAnimationType === 'slide')
    ASPx.PopupUtils.StopAnimation(windowElement, this.GetWindowMainCell(windowElement));
   else
    ASPx.AnimationHelper.cancelAnimation(windowElement);
  }
 },
 StopCloseAnimation: function(index) {
  var element = this.GetWindowElement(index);
  if(this.HasCloseAnimation() && !element.closeAnimationCompleted) {
   ASPx.AnimationHelper.cancelAnimation(element);
   this.DoHideWindowCore(index);
  }
 },
 IsFadeCloseAnimation: function(index) {
  return this.closeAnimationType === ASPxClientPopupControlBase.AnimationType.Fade;
 },
 PrepareElementAfterCloseAnimation: function(index, element) {
  element.closeAnimationCompleted = true;
  if(this.IsFadeCloseAnimation(index))
   ASPx.SetStyles(element, { opacity: 1 });
  else
   ASPx.SetStyles(this.GetWindowMainCell(element), {
    left: 0,
    top: 0
   });
 },
 DoHideWindowCoreWithAnimation: function(index, closeReason) {
  this.StopShowAnimation(index);
  var element = this.GetWindowElement(index);
  element.closeAnimationCompleted = false;
  if(this.AllowModalElementAnimation(index) && this.CanManipulateWithModalElement(index))
   ASPx.AnimationHelper.fadeOut(element.modalElement, null, this.fadeAnimationDuration);
  switch(this.closeAnimationType) {
   case ASPxClientPopupControlBase.AnimationType.Slide:
    this.DoHideWindowWithSlideAnimation(index, closeReason);
    break;
   case ASPxClientPopupControlBase.AnimationType.Fade:
    this.DoHideWindowWithFadeAnimation(index, element, closeReason);
    break;
   case ASPxClientPopupControlBase.AnimationType.Auto:
    this.DoHideWindowWithAutoAnimation(index, element, closeReason);
    break;
  }
 },
 DoHideWindowWithAutoAnimation: function(index, element, closeReason) {
 },
 DoHideWindowWithFadeAnimation: function(index, element, closeReason) {
  ASPx.AnimationHelper.fadeOut(element, function() {
   this.DoHideWindowCore(index);
   this.RaiseCloseUp(index, closeReason);
  }.aspxBind(this), this.fadeAnimationDuration);
 },
 DoHideWindowWithSlideAnimation: function(index, closeReason) {
  var element = this.GetWindowElement(index);
  var horizontalPopupPosition = this.GetSlideAnimationPosition(element, true);
  var verticalPopupPosition = this.GetSlideAnimationPosition(element, false);
  var horizontalDirection = this.GetAnimationHorizontalDirection(index, horizontalPopupPosition);
  var verticalDirection = this.GetAnimationVerticalDirection(index, verticalPopupPosition);
  this.InitDivPosForHideSlideAnimation(element);
  var offsetCoefficient = this.GetSlideOffsetCoefficient(index);
  ASPx.AnimationHelper.createMultipleAnimationTransition(this.GetWindowMainCell(element), {
   duration: this.GetSlideAnimationDuration(index),
   onComplete: function(element) {
    this.DoHideWindowCore(index);
    this.RaiseCloseUp(index, closeReason);
   }.aspxBind(this)
  }).Start({
   left: { to: horizontalDirection * element.offsetWidth * offsetCoefficient, unit: "px" },
   top: { to: verticalDirection * element.offsetHeight * offsetCoefficient, unit: "px" }
  });
 },
 GetSlideAnimationPosition: function(element, isX) {
  return this.GetClientPopupPos(element, null, ASPx.InvalidPosition, isX, true);
 },
 GetAnimationHorizontalDirection: function(index, horizontalPopupPosition) {
  return ASPx.PopupUtils.GetAnimationHorizontalDirection(horizontalPopupPosition, this.popupHorizontalAlign, this.popupVerticalAlign, this.rtl);
 },
 GetAnimationVerticalDirection: function(index, verticalPopupPosition) {
  return ASPx.PopupUtils.GetAnimationVerticalDirection(verticalPopupPosition, this.popupHorizontalAlign, this.popupVerticalAlign);
 },
 OnAnimationStop: function(index) {
  this.OnWindowShown(index);
 },
 PerformCallback: function(parameter, onSuccess) {
  this.PerformWindowCallback(null, parameter, onSuccess);
 },
 PerformWindowCallback: function(window, parameter, onSuccess) {
  parameter = ASPx.IsExists(parameter) ? parameter.toString() : "";
  var index = (window != null) ? window.index : -1;
  if(!this.InWindowCallback(index)) {
   var windowCallbackArguments = index + ";" + parameter;
   this.CreateWindowCallback(index, windowCallbackArguments, onSuccess);
  }
 },
 InWindowCallback: function(windowIndex) {
  return this.windowRequestCount[windowIndex] > 0;
 },
 CreateWindowCallback: function(windowIndex, argument, handler) {
  this.IncreaseWindowRequestCount(windowIndex);
  var element = this.GetWindowElement(windowIndex);
  if(this.contentLoadingMode != LoadContentViaCallback.OnPageLoad || !element.loading || this.GetShowOnPageLoad(windowIndex))
   this.ShowWindowLoadingElements(windowIndex);
  this.CreateCallback(argument, null, handler);
 },
 OnCallback: function(result) {
  this.OnCallbackInternal(result.html, result.index, false);
 },
 OnCallbackError: function(result, data) {
  this.OnCallbackInternal(result, ASPx.IsExists(data) ? data : -1, true);
 },
 OnCallbackErrorAfterUserHandle: function(result, data) {
  this.DecreaseWindowRequestCount(data);
 },
 OnCallbackGeneralError: function(errorMessage) {
  this.OnCallbackInternal(errorMessage, -1, true);
 },
 OnCallbackGeneralErrorAfterUserHandle: function(errorMessage) {
  this.DecreaseWindowRequestCount(-1);
 },
 OnCallbackInternal: function(html, windowIndex, isError) {
  var element = this.GetWindowElement(windowIndex);
  element.loaded = !isError;
  element.loading = false;
  this.DecreaseWindowRequestCount(windowIndex);
  this.HideWindowLoadingPanel(windowIndex);
  this.SetWindowContentHtmlCore(windowIndex, html);
  this.UpdatePositionAfterCallback(windowIndex);
  this.savedCallbackWindowIndex = windowIndex;
  this.UpdateWindowsStateCookie();
  if(this.accessibilityCompliant)
   this.InitializeAccessibleNavigationCore();
 },
 RaiseCallbackError: function(message) {
  var result = ASPxClientControl.prototype.RaiseCallbackError.call(this, message);
  if(result.isHandled)
   this.HideAllLoadingPanels();
  return result;
 },
 StartWindowBeginCallbackAnimation: function(windowIndex) {
  this.callbackAnimationProcessings[windowIndex] = true;
  this.isCallbackFinishedStates[windowIndex] = false;
  ASPx.AnimationHelper.fadeOut(this.GetWindowContentElement(windowIndex), function() { this.FinishWindowBeginCallbackAnimation(windowIndex); }.aspxBind(this));
 },
 FinishWindowBeginCallbackAnimation: function(windowIndex) {
  this.callbackAnimationProcessings[windowIndex] = false;
  if(!this.isCallbackFinishedStates[windowIndex])
   this.ShowWindowLoadingElementsInternal(windowIndex);
  else
   this.DoCallback(this.savedCallbackResults[windowIndex]);
 },
 CheckBeginCallbackAnimationInProgress: function(callbackResult) {
  var result;
  try {
   result = this.EvalCallbackResult(callbackResult).result;
  } catch(e) {
   return false;
  }
  var windowIndex = result.index;
  if(this.enableCallbackAnimation && this.callbackAnimationProcessings[windowIndex]) {
   this.savedCallbackResults[windowIndex] = callbackResult;
   this.isCallbackFinishedStates[windowIndex] = true;
   return true;
  }
  return false;
 },
 StartWindowEndCallbackAnimation: function(windowIndex) {
  this.callbackAnimationProcessings[windowIndex] = true;
  ASPx.AnimationHelper.fadeIn(this.GetWindowContentElement(windowIndex), function() { this.FinishWindowEndCallbackAnimation(windowIndex); }.aspxBind(this));
 },
 FinishWindowEndCallbackAnimation: function(windowIndex) {
  this.DoEndCallback();
  this.callbackAnimationProcessings[windowIndex] = false;
 },
 CheckEndCallbackAnimationNeeded: function() {
  var windowIndex = this.savedCallbackWindowIndex;
  this.savedCallbackWindowIndex = null;
  if(windowIndex !== null && !this.callbackAnimationProcessings[windowIndex]) {
   this.StartWindowEndCallbackAnimation(windowIndex);
   return true;
  }
  return false;
 },
 EnsureContent: function(windowIndex, isInit) {
  var element = this.GetWindowElement(windowIndex);
  if(element && !element.loaded && !element.loading) {
   var shouldLoad = this.contentLoadingMode == LoadContentViaCallback.OnPageLoad || this.contentLoadingMode == LoadContentViaCallback.OnFirstShow && !isInit;
   if(shouldLoad) {
    element.loading = true;
    this.CreateWindowCallback(windowIndex, windowIndex);
   } else if(this.contentLoadingMode == LoadContentViaCallback.Default)
    element.loaded = true;
  }
 },
 HideAllLoadingPanels: function() {
  if(this.HasDefaultWindow())
   this.HideWindowLoadingPanel(-1);
  for(var i = 0; i < this.GetWindowCount() ; i++)
   this.HideWindowLoadingPanel(i);
 },
 HideWindowLoadingPanel: function(windowIndex) {
  this.ClearWindowLoadingPanelTimer(windowIndex);
  if(this.loadingDivs[windowIndex]) {
   ASPx.RemoveElement(this.loadingDivs[windowIndex]);
   this.loadingDivs[windowIndex] = null;
  }
  if(this.loadingPanels[windowIndex]) {
   ASPx.RemoveElement(this.loadingPanels[windowIndex]);
   this.loadingPanels[windowIndex] = null;
  }
 },
 ShowWindowLoadingElements: function(windowIndex) {
  if(this.lpTimers[windowIndex] && this.lpTimers[windowIndex] > -1) return;
  if(this.enableCallbackAnimation)
   this.StartWindowBeginCallbackAnimation(windowIndex);
  else
   this.ShowWindowLoadingElementsInternal(windowIndex);
 },
 ShowWindowLoadingPanelOnTimer: function(windowIndex) {
  this.ClearWindowLoadingPanelTimer(windowIndex);
  this.ShowWindowLoadingPanel(windowIndex);
 },
 ClearWindowLoadingPanelTimer: function(windowIndex) {
  this.lpTimers[windowIndex] = ASPx.Timer.ClearTimer(this.lpTimers[windowIndex]);
 },
 ShowWindowLoadingElementsInternal: function(windowIndex) {
  if(this.lpDelay > 1 && !this.enableCallbackAnimation) {
   var _this = this;
   this.lpTimers[windowIndex] = window.setTimeout(function() { _this.ShowWindowLoadingPanelOnTimer(windowIndex); }, this.lpDelay);
  }
  else
   this.ShowWindowLoadingPanel(windowIndex);
 },
 ShowWindowLoadingPanel: function(windowIndex) {
  if(!this.IsExistLoadingPanel())
   return;
  if(!this.loadingPanels[windowIndex] && this.InternalIsWindowVisible(windowIndex)) {
   var parentElement = this.GetWindowElement(windowIndex).parentNode;
   var offsetElement = this.GetLoadingPanelOffsetElement(windowIndex);
   this.loadingDivs[windowIndex] = this.CreateLoadingDiv(parentElement, offsetElement, windowIndex);
   this.loadingPanels[windowIndex] = this.CreateLoadingPanelWithAbsolutePosition(parentElement, offsetElement, windowIndex);
  }
 },
 GetLoadingPanelOffsetElement: function(windowIndex) {
  return this.GetWindowContentWrapperElement(windowIndex);
 },
 IsExistLoadingPanel: function() {
  return !!this.GetLoadingDiv();
 },
 LockAnimation: function() {
  this.animationLockCount++;
 },
 UnlockAnimation: function() {
  this.animationLockCount--;
 },
 IsAnimationLocked: function() {
  return this.animationLockCount > 0;
 },
 IsAnimationAllowed: function() {
  return this.enableAnimation && !this.IsAnimationLocked();
 },
 SetWindowSizeByIndexCore: function(index, width, height, isWindowCollapsed) {
  this.SetClientWindowSizeLite(index, width, height, isWindowCollapsed);
  var iFrame = this.GetWindowIFrame(index);
  if(iFrame && !isWindowCollapsed) {
   var winElememnt = this.GetWindowElement(index);
   var realWidth = winElememnt.offsetWidth;
   var realHeight = winElememnt.offsetHeight;
   ASPx.SetStyles(iFrame, { width: realWidth, height: realHeight });
  }
  this.UpdateWindowsStateCookie();
 },
 SetWindowSizeByIndex: function(index, width, height) {
  var minWidth = this.GetWindowMinWidth(index);
  var minHeight = this.GetWindowMinHeight(index);
  var maxWidth = this.GetWindowMaxWidth(index);
  var maxHeight = this.GetWindowMaxHeight(index);
  if(minWidth)
   width = Math.max(width, minWidth);
  if(minHeight)
   height = Math.max(height, minHeight);
  if(maxWidth)
   width = Math.min(width, maxWidth);
  if(maxHeight)
   height = Math.min(height, maxHeight);
  var isWindowMaximized = this.GetIsMaximized(index);
  var isWindowCollapsed = this.GetIsCollapsed(index);
  var isWindowMaximizedAndCollapsed = (isWindowMaximized && isWindowCollapsed);
  if(this.SizeCanBeSet(index, isWindowMaximizedAndCollapsed)) {
   if(!this.CollapseExecuting() && !this.MaximizationExecuting() && !this.ResizingForMaxWindowLocked()) {
    this.SetWindowCachedSize(index, width, height);
    this.SetIsResized(index, true);
   }
   if(isWindowCollapsed && !this.MaximizationExecuting() && !this.ResizingForMaxWindowLocked()) {
    this.SetWindowCachedSize(index, width, height);
    this.UpdateRestoredWindowSize(index, width, height);
    height = 0;
   }
   if(isWindowMaximized && !this.CollapseExecuting() && !this.ResizingForMaxWindowLocked()) {
    this.SetWindowCachedSize(index, width, height);
    this.UpdateRestoredWindowSize(index, width, height);
   } else {
    this.SetWindowSizeByIndexCore(index, width, height, isWindowCollapsed);
   }
  } else
   this.SetWindowCachedSize(index, width, height);
 },
 SizeCanBeSet: function(index, isWindowMaximizedAndCollapsed) {
  return this.InternalIsWindowDisplayed(index) && this.IsWindowElementsIDAssigned(index) && (!isWindowMaximizedAndCollapsed || this.ResizingForMaxWindowLocked());
 },
 RestoreWindowSizeFromCache: function(index) {
  var cachedSize = this.GetWindowCachedSize(index);
  if(cachedSize != null) {
   if(cachedSize.width !== this.GetClientWindowWidth(index, true, true) ||
      cachedSize.height !== this.GetClientWindowHeight(index, true, true))
    this.SetWindowSizeByIndex(index, cachedSize.width, cachedSize.height);
   this.ResetWindowCachedSize(index);
  }
 },
 CollapseExecuting: function() {
  return false;
 },
 MaximizationExecuting: function() {
  return false;
 },
 ResizingForMaxWindowLocked: function() {
  return false;
 },
 IsResizeAllowed: function(index) {
  return this.allowResize;
 },
 GetWindowDimensionByIndex: function(index, isWidth, forceFromCache) {
  var cachedSize = this.GetWindowCachedSize(index);
  var dimensionValue = null;
  if(forceFromCache == undefined && !this.GetWindowElement(index))
   forceFromCache = true;
  if(cachedSize && forceFromCache)
   dimensionValue = isWidth ? cachedSize.width : cachedSize.height;
  if(dimensionValue)
   return dimensionValue;
  else {
   var element = this.GetWindowElement(index);
   var sizeFromDOM = 0;
   if(this.GetIsCollapsed(index)) {
    var headerCell = this.GetWindowHeaderElement(index);
    sizeFromDOM = isWidth ? headerCell.offsetWidth : headerCell.offsetHeight;
   }
   else {
    var mainCell = this.GetWindowMainCell(element);
    sizeFromDOM = isWidth ? mainCell.offsetWidth : mainCell.offsetHeight;
   }
   if(sizeFromDOM === 0 && cachedSize)
    sizeFromDOM = isWidth ? cachedSize.width : cachedSize.height;
   return sizeFromDOM;
  }
 },
 SetWindowSize: function(window, width, height) {
  var index = (window != null) ? window.index : -1;
  this.SetWindowSizeByIndex(index, width, height);
 },
 SetSize: function(width, height) {
  this.SetWindowSize(null, width, height);
 },
 SetWidth: function(width) {
  var height = this.GetHeight();
  this.SetSize(width, height);
 },
 SetHeight: function(height) {
  var width = this.GetWidth();
  this.SetSize(width, height);
 },
 GetHeight: function() {
  return this.GetWindowDimensionByIndex(-1, false, false);
 },
 GetWidth: function() {
  return this.GetWindowDimensionByIndex(-1, true, false);
 },
 CanBeClosedByClickOnElement: function(index, srcElement, posX, id) {
  return srcElement === null || ASPx.GetParentById(srcElement, id) === null;
 },
 OnMouseDown: function(evt, index, isDraggingAllowed, pointOnScrollBar) {
  if(ASPx.Evt.IsLeftButtonPressed(evt)) {
   if((this.IsResizeAllowed(index) || isDraggingAllowed) && !this.prohibitClearSelectionOnMouseDown) 
    ASPx.Selection.Clear();
   var isResizing = this.ProcessResizeOnMouseDown(evt, index);
   var clickedOnScroll = pointOnScrollBar && this.GetEnableContentScrolling(index);
   if(isDraggingAllowed && !isResizing && !clickedOnScroll && !this.GetIsPinned(index) && !this.GetIsMaximized(index) && !ASPx.Ident.IsFocusableElementRegardlessTabIndex(evt.target))
    this.OnDragStart(evt, index);
  }
 },
 OnMouseMove: function(evt, index) {
  if(this.allowResize && !this.GetIsCollapsed(index) && !this.GetIsMaximized(index))
   this.CreateResizeCursorInfo(evt, index);
 },
 CreateResizeCursorInfo: function(evt, index) {
  var element = this.GetWindowElement(index);
  var mainCell = this.GetWindowMainCell(element);
  var clientWindow = this.GetWindowClientTable(index);
  var headerElement = this.GetWindowHeaderElement(index);
  var left = ASPx.GetAbsoluteX(mainCell);
  var top = ASPx.GetAbsoluteY(mainCell);
  var x = ASPx.Evt.GetEventX(evt);
  var y = ASPx.Evt.GetEventY(evt);
  var mainCellWidth = mainCell.offsetWidth;
  var mainCellHeight = mainCell.offsetHeight;
  var leftOffset = Math.abs(x - left);
  var rightOffset = Math.abs(x - left - mainCellWidth);
  var topOffset = Math.abs(y - top);
  var bottomOffset = Math.abs(y - top - mainCellHeight);
  var cursorInfo = this.CreateResizeBorderCursorInfo(index, leftOffset, rightOffset, topOffset, bottomOffset);
  var grip = this.GetWindowSizeGripElement(index);
  if(grip) {
   var gripCursorInfo = this.CreateGripCursorInfo(index, mainCell, grip, leftOffset, rightOffset, bottomOffset);
   if(gripCursorInfo)
    cursorInfo = gripCursorInfo;
  }
  this.UpdateResizeCursor(index, clientWindow, cursorInfo.verticalDirection, cursorInfo.horizontalDirection);
  this.UpdateResizeCursor(index, mainCell, cursorInfo.verticalDirection, cursorInfo.horizontalDirection);
  if(headerElement)
   this.UpdateResizeCursor(index, headerElement, cursorInfo.verticalDirection, cursorInfo.horizontalDirection);
  return cursorInfo;
 },
 UpdateResizeCursor: function(index, element, verticalDirection, horizontalDirection) {
  var cursor = verticalDirection + horizontalDirection;
  if(cursor == "")
   this.HideTemporaryCursor(element);
  else {
   cursor += "-resize";
   this.ShowTemporaryCursor(element, cursor);
  }
 },
 CreateGripCursorInfo: function(index, mainCell, grip, leftOffset, rightOffset, bottomOffset) {
  var gripWidth = this.rtl
   ? ASPx.GetAbsoluteX(grip) - ASPx.GetAbsoluteX(mainCell) + grip.offsetWidth
   : mainCell.offsetWidth - (ASPx.GetAbsoluteX(grip) - ASPx.GetAbsoluteX(mainCell));
  var gripHeight = mainCell.offsetHeight - (ASPx.GetAbsoluteY(grip) - ASPx.GetAbsoluteY(mainCell));
  if(gripHeight > bottomOffset) {
   if(this.rtl && gripWidth > leftOffset)
    return new PCResizeCursorInfo("w", "s", leftOffset, bottomOffset);
   if(gripWidth > rightOffset)
    return new PCResizeCursorInfo("e", "s", rightOffset, bottomOffset);
  }
  return null;
 },
 CreateResizeBorderCursorInfo: function(index, leftOffset, rightOffset, topOffset, bottomOffset) {
  var ResizeBorderSize = this.ResizeBorderSize;
  var verticalDirection = this.GetResizeVerticalCourse(ResizeBorderSize, topOffset, bottomOffset);
  ResizeBorderSize = verticalDirection != "" ? this.ResizeCornerBorderSize : this.ResizeBorderSize;
  var horizontalDirection = this.GetResizeHorizontalCourse(ResizeBorderSize, leftOffset, rightOffset);
  if(verticalDirection == "" && horizontalDirection != "")
   verticalDirection = this.GetResizeVerticalCourse(this.ResizeCornerBorderSize, topOffset, bottomOffset);
  var horizontalOffset = leftOffset < rightOffset ? leftOffset : rightOffset;
  var verticalOffset = topOffset < bottomOffset ? topOffset : bottomOffset;
  return new PCResizeCursorInfo(horizontalDirection, verticalDirection, horizontalOffset, verticalOffset);
 },
 GetResizeVerticalCourse: function(ResizeBorderSize, topOffset, bottomOffset) {
  if(ResizeBorderSize > topOffset) return "n";
  if(ResizeBorderSize > bottomOffset) return "s";
  return "";
 },
 GetResizeHorizontalCourse: function(ResizeBorderSize, leftOffset, rightOffset) {
  if(ResizeBorderSize > leftOffset) return "w";
  if(ResizeBorderSize > rightOffset) return "e";
  return "";
 },
 ProcessResizeOnMouseDown: function(evt, index) {
  var isResizing = false;
  if(this.IsResizeAllowed(index) && !this.GetIsCollapsed(index) && !this.GetIsMaximized(index)) {
   var eventSourceControl = ASPx.Evt.GetEventSource(evt);
   var eventFromPopupContainer = ASPx.ElementHasCssClass(eventSourceControl, PopupControlCssClasses.ContentCssClassName) ||
    !ASPx.GetParentByClassName(eventSourceControl, PopupControlCssClasses.ContentCssClassName) ||
    this.eventFromOwnPopupContent(eventSourceControl);
   if(eventFromPopupContainer && getComputedStyle(evt.target).cursor !== "pointer")
    isResizing = this.OnResizeStart(evt, index);
  }
  if(isResizing && ASPx.Browser.WebKitTouchUI)
   aspxGetPopupControlCollection().OverStop();
  return isResizing;
 },
 eventFromOwnPopupContent: function(element) {
  while(element != null) {
   if(element.tagName == "BODY")
    return false;
   if(element.style.position == "absolute") {
    var windowIndex = this.GetWindowIndex(element);
    var isPopupWindow = !isNaN(windowIndex);
    if(isPopupWindow) {
     if(this.GetWindowElementId(windowIndex) == element.id)
      return true;
     return false;
    } else {
     var elementIsOtherPopup = element.style.zIndex >= this.GetPopupControlZIndex(); 
     if(elementIsOtherPopup)
      return false;
    }
   }
   element = element.parentNode;
  }
  return false;
 },
 OnResizeStart: function(evt, index) {
  if(!aspxGetPopupControlCollection().IsResizeInint()) {
   var cursor = this.CreateResizeCursorInfo(evt, index);
   if(cursor.course != "") {
    aspxGetPopupControlCollection().setIframesMouseMoveEnabled(false);
    this.EnsureWindowCoverDiv(index);
    this.SetIsResized(index, true);
    var resizePanel = this.CreateResizePanel(index);
    this.UpdateResizeCursor(index, resizePanel, cursor.verticalDirection, cursor.horizontalDirection);
    aspxGetPopupControlCollection().InitResizeObject(this, index, cursor, resizePanel);
    this.OnResize(evt, index, cursor, resizePanel);
   }
   ASPx.TouchUIHelper.startPreventingTouchMove();
  }
  return aspxGetPopupControlCollection().IsResizeInint();
 },
 OnResizeStop: function(evt, index, cursor, resizePanel) {
  if(this.IsResizeAllowed(index)) {
   ASPx.TouchUIHelper.stopPreventingTouchMove();
   aspxGetPopupControlCollection().setIframesMouseMoveEnabled(true);
   this.RemoveWindowCoverDiv();
   var windowElement;
   if(!this.isLiveResizingMode) {
    windowElement = this.GetWindowElement(index);
    ASPx.GetControlCollection().CollapseControls(windowElement);
    this.OnResizeWindow(index, cursor, resizePanel);
   }
   this.CreateResizeCursorInfo(evt, index);
   this.UpdateWindowsStateCookie();
   this.RaiseResize(index);
   if(!this.isLiveResizingMode)
    ASPx.GetControlCollection().AdjustControls(windowElement, true);
  }
  this.ResetResizeSessionCache();
 },
 OnResizeWindow: function(index, cursor, resizePanel) {
  var windowElement = this.GetWindowElement(index);
  var resizePanelDimensions = this.GetResizePanelDimensions();
  var left = resizePanelDimensions.left;
  var top = resizePanelDimensions.top;
  this.SetClientWindowSizeLite(index, resizePanelDimensions.offsetWidth, resizePanelDimensions.offsetHeight);
  if(this.fixedBottom)
   top = this.fixedBottom - windowElement.offsetHeight;
  if(this.fixedRight)
   left = this.fixedRight - windowElement.offsetWidth;
  this.fixedBottom = null;
  this.fixedRight = null;
  if(cursor.verticalDirection === "n")
   this.ChangePosOnResizeWindow(top, windowElement, false);
  if(cursor.horizontalDirection === "w")
   this.ChangePosOnResizeWindow(left, windowElement, true);
  if(this.InternalIsWindowVisible(index)) 
   this.DoShowWindowIFrame(index, left, top, ASPx.InvalidDimension, ASPx.InvalidDimension);
 },
 ChangePosOnResizeWindow: function(pos, windowElement, isX) {
  windowElement.style[isX ? "left" : "top"] = pos + "px";
 },
 SetClientWindowSizeLite: function(index, width, height, isWindowCollapsed) {
  this.RaiseBeforeResizing(index);
  this.SetClientWindowSizeCoreLite(index, width, height, isWindowCollapsed);
  if(!this.IsRaiseAfterResizingLocked())
   this.RaiseAfterResizing(index);
 },
 SetClientWindowSizeCoreLite: function(index, width, height, isWindowCollapsed) {
  var contentUrl = this.GetWindowContentIFrameUrl(index);
  var needToHideContent = !contentUrl;
  var element = this.GetWindowElement(index);
  var contentWrapper = this.GetWindowContentWrapperElement(index);
  var contentElement = this.GetWindowContentElement(index);
  var contentIframeElement = this.GetWindowContentIFrameElement(index);
  var iframeHeightCorrectionOnFirstShow = height > 0;
  if(contentIframeElement && (this.GetWindowIsShown(index) || iframeHeightCorrectionOnFirstShow))
   contentIframeElement.style.height = "0px";
  contentWrapper.style.height = "";
  contentWrapper.style.width = "";
  contentElement.style.height = "";
  contentElement.style.width = "";
  var hasAnyScrollBars = this.HasAnyScrollBars(index);
  var expectedHeight = (!ASPx.IsExists(height) && hasAnyScrollBars) ? this.GetExpectedHeight(index) : null;
  if(needToHideContent)
   contentElement.style.display = "none";
  var elementsDisplayValue = this.GetWindowElementDisplayValue(hasAnyScrollBars, height);
  element.style.display = elementsDisplayValue;
  if(!this.GetIsCollapsed(index))
   contentWrapper.style.display = elementsDisplayValue;
  if(ASPx.IsExists(width)) {
   var actualWidth = width - this.GetElementBordersAndPaddings(index, element, true);
   if(actualWidth <= 0)
    actualWidth = ASPx.Browser.WebKitFamily ? 1 : 0; 
   element.style.width = actualWidth + "px";
  }
  var actualHeight;
  if(ASPx.IsExists(height)) {
   actualHeight = height - this.GetElementBordersAndPaddings(index, element, false);
   if(actualHeight < 0)
    actualHeight = 0;
   element.style.height = actualHeight + "px";
  } else {
   if(ASPx.IsExists(expectedHeight)) {
    actualHeight = expectedHeight;
    element.style.height = actualHeight + "px";
   }
  }
  this.CorrectWindowSizeGripPositionLite(index);
  this.CorrectWindowHeaderText(index);
  this.SetContentWrapperHeightLite(index, actualHeight, element, contentWrapper);
  var correctContentElementSize = hasAnyScrollBars || contentElement.style.overflow == "hidden" || contentElement.style.overflowX == "hidden" || contentElement.style.overflowY == "hidden";
  if((correctContentElementSize || contentUrl) && (height || expectedHeight)) {
   if(contentElement !== contentWrapper) {
    var contentHeight = ASPx.GetClearClientHeight(contentWrapper);
    if(contentHeight < 0)
     contentHeight = 0;
    contentElement.style.height = contentHeight + "px";
   }
  }
  if(correctContentElementSize && width && contentElement !== contentWrapper)
   contentElement.style.width = ASPx.GetClearClientWidth(contentWrapper) + "px";
  contentElement.style.display = this.getContentElementDisplay(correctContentElementSize, contentUrl);
  if(contentIframeElement)
   contentIframeElement.style.height = "100%";
  this.SetWindowWidth(index, width);
  this.SetWindowHeight(index, height);
  if(isWindowCollapsed)
   this.ResetWindowHeight(index);
 },
 GetExpectedHeight: function(index) {
  var height = this.GetWindowHeightInternal(index) || 0;
  height = Math.max(height, this.GetWindowMinHeight(index));
  if(this.HasAnyScrollBars(index)) {
   var windowHeight = this.GetWindowContentElement(index).offsetHeight + this.GetWindowHeightWithoutContent(index);
   height = Math.max(height, windowHeight);
  }
  var maxHeight = this.GetWindowMaxHeight(index);
  if(maxHeight)
   height = Math.min(height, maxHeight);
  return height;
 },
 IsRaiseAfterResizingLocked: function() {
  return false;
 },
 CreateResizePanel: function(index) {
  var element = this.GetWindowElement(index);
  var resizePanel = document.createElement("DIV");
  element.parentNode.appendChild(resizePanel);
  resizePanel.style.overflow = "hidden";
  resizePanel.style.position = "absolute";
  resizePanel.style.zIndex = this.GetPopupControlZIndex() + aspxGetPopupControlCollection().visiblePopupWindowIds.length * 2 + 2;
  if(!this.isLiveResizingMode)
   resizePanel.style.border = "black 1px dotted";
  return resizePanel;
 },
 OnResize: function(evt, index, cursor, resizePanel) {
  this.OnResizePanelLite(evt, index, cursor, resizePanel);
  if(this.isLiveResizingMode)
   this.OnResizeWindow(index, cursor, resizePanel);
  ASPx.Selection.Clear();
  if(ASPx.Browser.WebKitTouchUI)
   ASPx.Evt.PreventEvent(evt);
  if(this.GetIsPinned(index))
   this.HoldPosition(index, true, resizePanel);
 },
 OnResizePanelLite: function(evt, index, cursor, resizePanel) {
  var x = ASPx.Evt.GetEventX(evt);
  var y = ASPx.Evt.GetEventY(evt);
  var element = this.GetWindowElement(index);
  var elementTop = ASPx.GetAbsoluteY(element);
  var elementLeft = ASPx.GetAbsoluteX(element);
  var newLeft = ASPx.PxToInt(element.style.left);
  var newTop = ASPx.PxToInt(element.style.top);
  var newWidth = element.offsetWidth;
  var newHeight = element.offsetHeight;
  if(cursor.verticalDirection == "n") {
   if(!this.fixedBottom)
    this.fixedBottom = newTop + newHeight;
   newHeight += elementTop - y + cursor.verticalOffset;
   newTop = ASPx.PrepareClientPosForElement(y - cursor.verticalOffset, element, false);
  }
  if(cursor.verticalDirection == "s") {
   newHeight = y - elementTop + cursor.verticalOffset;
   this.fixedBottom = null;
  }
  if(cursor.horizontalDirection == "w") {
   if(!this.fixedRight)
    this.fixedRight = newLeft + newWidth;
   newWidth += elementLeft - x + cursor.horizontalOffset;
   newLeft = ASPx.PrepareClientPosForElement(x - cursor.horizontalOffset, element, true);
  }
  if(cursor.horizontalDirection == "e") {
   newWidth = x - elementLeft + cursor.horizontalOffset;
   this.fixedRight = null;
  }
  if(newWidth > 0 && newHeight > 0) {
   var minWidth = this.GetWindowMinWidth(index);
   var maxWidth = this.GetWindowMaxWidth(index);
   if(minWidth && newWidth < minWidth)
    newWidth = minWidth;
   if(maxWidth && newWidth > maxWidth)
    newWidth = maxWidth;
   var minHeight = this.GetWindowMinHeight(index);
   var maxHeight = this.GetWindowMaxHeight(index);
   if(minHeight && newHeight < minHeight)
    newHeight = minHeight;
   if(maxHeight && newHeight > maxHeight)
    newHeight = maxHeight;
   this.SetResizePanelDimensions(newLeft, newTop, newWidth, newHeight);
   var widthWithoutBorders = newWidth - this.getLeftRightBordersAndPaddingsSummaryValue(resizePanel);
   var heightWithoutBorders = newHeight - this.getTopBottomBordersAndPaddingsSummaryValue(resizePanel);
   ASPx.SetStyles(resizePanel, {
    left: newLeft, top: newTop,
    width: widthWithoutBorders, height: heightWithoutBorders
   });
   this.SetWindowLeft(index, elementLeft);
   this.SetWindowTop(index, elementTop);
  }
 },
 SetResizePanelDimensions: function(left, top, offsetWidth, offsetHeight) {
  var cache = this.GetResizeSessionCache();
  cache.resizePanelDimensions = {
   left: left,
   top: top,
   offsetWidth: offsetWidth,
   offsetHeight: offsetHeight
  };
 },
 GetResizePanelDimensions: function() {
  var cache = this.GetResizeSessionCache();
  return cache.resizePanelDimensions;
 },
 ResetResizeSessionCache: function() {
  this.resizeSessionCache = {};
 },
 GetResizeSessionCache: function() {
  return aspxGetPopupControlCollection().IsResizeInint() ? this.resizeSessionCache : {};
 },
 EnsureWindowCoverDiv: function(index) {
  this.windowCoverDiv = this.CreateCoverDiv(index);
  var windowElement = this.GetWindowElement(index);
  windowElement.parentNode.appendChild(this.windowCoverDiv);
 },
 CreateCoverDiv: function(index) {
  var coverDiv = document.createElement("DIV");
  ASPx.SetStyles(coverDiv, {
   position: "fixed",
   left: 0,
   top: 0,
   width: "100%",
   height: "100%"
  });
  return coverDiv;
 },
 RemoveWindowCoverDiv: function() {
  if(!!this.windowCoverDiv) {
   this.windowCoverDiv.parentNode.removeChild(this.windowCoverDiv);
   this.windowCoverDiv = null;
  }
 },
 OnDrag: function(index, x, y, xClientCorrection, yClientCorrection) {
  var element = this.GetWindowElement(index);
  if(element != null) {
   ASPx.SetStyles(element, { left: x, top: y });
   xClientCorrection = typeof (xClientCorrection) != "undefined" ? xClientCorrection : 0;
   yClientCorrection = typeof (yClientCorrection) != "undefined" ? yClientCorrection : 0;
   this.SetWindowLeft(index, x + xClientCorrection);
   this.SetWindowTop(index, y + yClientCorrection);
   var iFrame = element.overflowElement;
   if(iFrame)
    ASPx.SetStyles(iFrame, { left: x, top: y });
   if(ASPx.Browser.Opera)
    ASPx.Selection.Clear();
  }
 },
 OnDragStop: function(index) {
  this.HideDragCursor(index);
  this.UpdateWindowsStateCookie();
  if(this.GetWindowContentIFrameElement(index))
   this.SetIframeVisibleForDragging(index, true);
  ASPx.TouchUIHelper.stopPreventingTouchMove();
  this.RaiseDragged(index);
 },
 OnDragStart: function(evt, index) {
  this.RaiseBeforeDrag(index);
  this.SetIsDragged(index, true);
  this.ShowDragCursor(index);
  ASPx.TouchUIHelper.startPreventingTouchMove();
  if(this.GetWindowContentIFrameElement(index))
   this.SetIframeVisibleForDragging(index, false);
  this.InitDragInfo(index, evt);
 },
 HideIframeElementBeforeDragging: function() {
 },
 InitDragInfo: function(index, evt) {
  var element = this.GetWindowElement(index);
  var gragXOffset = ASPx.GetAbsoluteX(element) - ASPx.Evt.GetEventX(evt);
  var gragYOffset = ASPx.GetAbsoluteY(element) - ASPx.Evt.GetEventY(evt);
  var xClientCorrection = this.GetDragCorrection(index, element, true);
  var yClientCorrection = this.GetDragCorrection(index, element, false);
  gragXOffset -= xClientCorrection;
  gragYOffset -= yClientCorrection;
  aspxGetPopupControlCollection().InitDragObject(this, index, gragXOffset, gragYOffset, xClientCorrection, yClientCorrection);
 },
 GetDragCorrection: function(index, element, isX) {
  return ASPx.GetPositionElementOffset(element, isX);
 },
 ShowDragCursor: function(index) {
  var dragElement = this.GetDragElement(index);
  if(dragElement)
   this.ShowTemporaryCursor(dragElement, "move");
 },
 ShowTemporaryCursor: function(element, cursor) {
  ASPx.Attr.ChangeStyleAttribute(element, "cursor", cursor);
 },
 HideDragCursor: function(index) {
  var dragElement = this.GetDragElement(index);
  if(dragElement != null)
   this.HideTemporaryCursor(dragElement);
 },
 GetDragElement: function(index) {
  var headerElement = this.GetWindowHeaderElement(index);
  var element = this.GetWindowElement(index);
  if(element != null)
   return (headerElement != null ? headerElement : this.GetWindowMainCell(element));
  return null;
 },
 HideTemporaryCursor: function(element) {
  ASPx.Attr.RestoreStyleAttribute(element, "cursor");
 },
 OnDocumentKeyDown: function(evt, popupWindow) {
  var handler = this.keyDownHandlers && this.keyDownHandlers[ASPx.GetShortcutCode(evt.keyCode, evt.ctrlKey, evt.shiftKey, evt.altKey)];
  if(handler)
   handler(this.GetWindowIndex(popupWindow));
 },
 OnEscKeyDown: function(index) {
  if(this.GetEnableCloseByEsc(index))
   this.DoHideWindow(index, false, ASPxClientPopupControlCloseReason.Escape);
 },
 OnRefreshButtonClick: function(index) {
  var contentIFrame = this.GetWindowContentIFrameElement(index);
  if(contentIFrame)
   this.RefreshWindowContentUrl(this.GetWindow(index));
  else
   this.PerformWindowCallback(this.GetWindow(index));
 },
 OnCloseButtonClick: function(index) {
  this.RaiseCloseButtonClick(index);
  if(this.GetWindowCloseAction(index) != "None")
   this.DoHideWindow(index, false, ASPxClientPopupControlCloseReason.CloseButton);
 },
 Show: function(popupElementIndex) {
  this.ShowWindowByIndex(-1, popupElementIndex);
 },
 Hide: function() {
  this.HideWindow(null);
 },
 HideWindow: function(window) {
  var index = (window != null) ? window.index : -1;
  this.DoHideWindow(index, false, ASPxClientPopupControlCloseReason.API);
 },
 RaiseEventByIndex: function(index, event, argsName) {
  if(!event.IsEmpty()) {
   var window = index < 0 ? null : this.GetWindow(index),
    args = new argsName(window);
   event.FireEvent(this, args);
  }
 },
 RaiseCloseButtonClick: function(index) {
  this.RaiseEventByIndex(index, this.CloseButtonClick, ASPxClientPopupWindowEventArgs);
 },
 RaiseShown: function(index) {
  this.RaiseEventByIndex(index, this.Shown, ASPxClientPopupWindowEventArgs);
 },
 RaisePopUp: function(index) {
  this.RaiseEventByIndex(index, this.PopUp, ASPxClientPopupWindowEventArgs);
 },
 RaiseBeforeResizing: function(index) {
  this.RaiseEventByIndex(index, this.BeforeResizing, ASPxClientPopupWindowEventArgs);
 },
 RaiseAfterResizing: function(index) {
  this.RaiseEventByIndex(index, this.AfterResizing, ASPxClientPopupWindowEventArgs);
 },
 RaiseDragged: function(index) {
  this.RaiseEventByIndex(index, this.Dragged, ASPxClientPopupWindowEventArgs);
 },
 RaiseBeforeDrag: function(index) {
  this.RaiseEventByIndex(index, this.BeforeDrag, ASPxClientPopupWindowEventArgs);
 },
 RaiseClosing: function(index, closeReason) {
  var window = index < 0 ? null : this.GetWindow(index);
  var cancel = false;
  if(!this.Closing.IsEmpty()) {
   var args = new ASPxClientPopupWindowCancelEventArgs(window, closeReason);
   this.Closing.FireEvent(this, args);
   cancel = args.cancel;
  }
  return cancel;
 },
 RaiseCloseUp: function(index, closeReason) {
  var window = index < 0 ? null : this.GetWindow(index);
  if(!this.CloseUp.IsEmpty()) {
   var args = new ASPxClientPopupWindowCloseUpEventArgs(window, closeReason);
   this.CloseUp.FireEvent(this, args);
  }
 },
 RaiseResize: function(index, resizeState) {
  var window = index < 0 ? null : this.GetWindow(index);
  if(!this.Resize.IsEmpty()) {
   if(!resizeState)
    resizeState = ASPxClientPopupControlResizeState.Resized;
   var args = new ASPxClientPopupWindowResizeEventArgs(window, resizeState);
   this.Resize.FireEvent(this, args);
  }
 },
 RaisePopupOnShow: function(isMoving, index) {
  if(!isMoving) {
   this.RaisePopUp(index);
   if(!this.IsAnimationAllowed() || !this.HasOpenAnimation())
    this.OnWindowShown(index);
  }
 },
 OnActivate: function(index, evt) {
  var element = this.GetWindowElement(index);
  if(element != null)
   aspxGetPopupControlCollection().ActivateWindowElement(element, evt, this.GetPopupType(), this.GetDefaultZIndexFromServer(), this.GetPopupControlZIndex());
 },
 OnPWHBClickCore: function(evt, index, method) {
  this.OnActivate(index, evt);
  if(ASPx.TouchUIHelper.handleFastTapIfRequired(evt,
   function() { this[method](index); }.aspxBind(this), true)) {
   return;
  }
  if(ASPx.Browser.Opera)
   ASPx.Evt.EmulateDocumentOnMouseDown(evt);
  this[method](index);
 },
 OnScroll: function(evt, index) {
  if(this.HasIframeOnIos(index))
   this.ResetWebkitScrolling(this.getTouchScrollerElement(index), 0);
  if(!this.GetIsPinned(index) || (this.lockScroll > 0)) return;
  this.AdjustPinPositionWhileScroll(index);
 },
 ResetWebkitScrolling: function(scrollElement, timeout) {
  if(scrollElement.scrollTop === 0) {
   var styleName = "-webkit-overflow-scrolling";
   scrollElement.style[styleName] = "auto";
   window.setTimeout(function() {
    scrollElement.style[styleName] = "touch";
   }.aspxBind(this), timeout);
  }
 },
 HaveSpecialDivForAnimation: function() {
  return this.enableAnimation;
 },
 HasIframeOnIos: function(index) {
  return ASPx.Browser.MacOSMobilePlatform && !!this.GetWindowContentIFrameElement(index);
 },
 WindowIsModal: function(index) {
  return this.GetPropertyValue(index, "modal");
 },
 GetIsPopuped: function(index) {
  if(0 <= index && index < this.GetWindowCountCore())
   return this.windowsIsPopupedList[index];
  return this.defaultIsPopuped;
 },
 SetIsPopuped: function(index, isPopuped) {
  if(0 <= index && index < this.GetWindowCountCore())
   this.windowsIsPopupedList[index] = isPopuped;
  this.defaultIsPopuped = isPopuped;
 },
 GetIsMaximized: function(index) {
  return false;
 },
 GetIsMaximizedInit: function(index) {
  return false;
 },
 GetCurrentLeft: function(index) {
  return this.GetPosition(index, true);
 },
 GetCurrentTop: function(index) {
  return this.GetPosition(index, false);
 },
 GetIsPinned: function(index) {
  return false;
 },
 GetIsCollapsed: function(index) {
  return false;
 }, 
 needToHidePinnedOutFromViewPort: function(index) {
  return false;
 },
 GetHideBodyScrollWhenModal: function(index) {
  return false;
 },
 GetCanScrollViewPort: function(index) {
  return false;
 },
 GetEnableContentScrolling: function(index) {
  return false;
 },
 AutoUpdateElementsPosition: function() {
 },
 GetWindowChild: function(index, idPostfix) {
  var elem = this.GetWindowElement(index);
  if(elem)
   return ASPx.GetChildById(elem, this.name + idPostfix);
  return null;
 },
 GetWindowIndex: function(element) {
  var id = element.id;
  var pos = id.lastIndexOf(ASPx.PCWIdSuffix);
  return parseInt(id.substr(pos + ASPx.PCWIdSuffix.length));
 },
 GetWindow: function(index) {
  return (0 <= index && index < this.windows.length) ? this.windows[index] : null;
 },
 DoShowWindowIFrame: function(index, x, y, width, height) {
  if(!this.renderIFrameForPopupElements) return;
  var element = this.GetWindowElement(index);
  var iFrame = this.GetWindowIFrame(index);
  if(element && iFrame) {
   var cell = this.GetWindowMainCell(element);
   if(width < 0)
    width = cell.offsetWidth;
   if(height < 0)
    height = cell.offsetHeight;
   ASPx.SetStyles(iFrame, { width: width, height: height });
   if(this.IsValidPosition(x) && this.IsValidPosition(y))
    ASPx.SetStyles(iFrame, { left: x, top: y });
   if(ASPx.Browser.Firefox)
    this.ClearWindowIframeBodyInnerHtml(iFrame);
   ASPx.SetElementDisplay(iFrame, true);
  }
 },
 IsValidPosition: function(pos) {
  return pos !== ASPx.InvalidPosition;
 },
 DoHideWindowIFrame: function(element) {
  if(!this.renderIFrameForPopupElements) return;
  var iFrame = element.overflowElement;
  if(iFrame)
   ASPx.SetElementDisplay(iFrame, false);
 },
 GetIframeBody: function(iFrame) {
  var document = iFrame.contentDocument || iFrame.contentWindow.document;
  if(document)
   return document.getElementsByTagName('body')[0];
 },
 ClearWindowIframeBodyInnerHtml: function(iFrame) {
  var iFrameBody = this.GetIframeBody(iFrame);
  if(iFrameBody)
   iFrameBody.innerHTML = "";
 },
 FindWindowIFrame: function(index) {
  return ASPx.GetElementById(this.name + "_DXPWIF" + index);
 },
 GetWindowIFrame: function(index) {
  var element = this.GetWindowElement(index);
  var iFrame = element.overflowElement;
  if(!iFrame) {
   iFrame = this.FindWindowIFrame(index);
   element.overflowElement = iFrame;
  }
  return iFrame;
 },
 CreateFakeDivForIframe: function(iframe) {
  var fakeDiv = document.createElement("div");
  ASPx.SetStyles(fakeDiv, { width: iframe.offsetWidth, height: iframe.offsetHeight });
  return fakeDiv;
 },
 CreateIframeCoverDiv: function(iframe, index) {
  if(!this.iframeCoverDiv)
   this.iframeCoverDiv = [];
  if(!this.iframeCoverDiv[index])
   this.iframeCoverDiv[index] = this.CreateFakeDivForIframe(iframe);
  this.iframeCoverDiv[index].style.position = "absolute";
  iframe.parentElement.appendChild(this.iframeCoverDiv[index]);
  ASPx.SetAbsoluteX(this.iframeCoverDiv[index], ASPx.GetAbsoluteX(iframe));
  ASPx.SetAbsoluteY(this.iframeCoverDiv[index], ASPx.GetAbsoluteY(iframe));
 },
 RemoveIframeCoverDiv: function(iframe, index) {
  iframe.parentElement.removeChild(this.iframeCoverDiv[index]);
  this.iframeCoverDiv[index] = null;
 },
 GetWindowBorderOwnerElement: function(windowElement) {
  if(ASPx.ElementHasCssClass(windowElement, PopupControlCssClasses.MainDivLiteCssClass))
   return windowElement;
  else
   return ASPx.GetNodeByClassName(windowElement, PopupControlCssClasses.MainDivLiteCssClass);
 },
 GetWindowContentIFrameElement: function(index) {
  return this.GetWindowChild(index, "_CIF" + index);
 },
 GetWindowContentElement: function(index) {
  return this.GetWindowChild(index, "_PWC" + index);
 },
 GetWindowContentIFrameElementId: function(index) {
  return this.name + "_CIF" + index;
 },
 GetContentContainer: function(index) {
  return this.GetWindowContentElement(index);
 },
 getTouchScrollerElement: function(index) {
  return this.GetContentContainer(index);
 },
 GetWindowHeaderElement: function(index) {
  return this.GetWindowChild(index, "_PWH" + index);
 },
 GetWindowFooterElement: function(index) {
  return this.GetWindowChild(index, "_PWF" + index);
 },
 GetWindowSizeGripElement: function(index) {
  var footer = this.GetWindowFooterElement(index);
  if(!footer)
   return null;
  var descendants = ASPx.GetNodesByClassName(footer, PopupControlCssClasses.SizeGripLiteCssClassName);
  return descendants.length > 0 ? descendants[0] : null;
 },
 GetWindowContentWrapperElement: function(index) {
  if(!ASPx.IsExistsElement(this.windowContentElements[index])) {
   var windowElem = this.GetWindowElement(index);
   var contentWrapperParent = this.GetWindowMainCell(windowElem);
   this.windowContentElements[index] = ASPx.GetChildByClassName(contentWrapperParent, PopupControlCssClasses.ContentWrapperCssClassName);
  }
  return this.windowContentElements[index];
 },
 GetWindowMainCell: function(element) {
  return this.HaveSpecialDivForAnimation() ? ASPx.GetNodeByTagName(element, "DIV", 0) : element;
 },
 GetWindowModalElement: function(index) {
  var element = this.GetWindowElement(index);
  if(!element) return;
  var modalElement = element.modalElement;
  if(!modalElement) {
   modalElement = this.FindWindowModalElement(index);
   element.modalElement = modalElement;
   if(modalElement) {
    modalElement.DXModalPopupControl = this;
    modalElement.DXModalPopupWindowIndex = index;
   }
  }
  return modalElement;
 },
 CanManipulateWithModalElement: function(index) {
  return this.WindowIsModal(index);
 },
 GetCurrentZIndex: function(index) {
  var element = this.GetWindowElement(index);
  if(element != null) {
   if(element.style.zIndex != "" && element.style.zIndex != this.GetDefaultZIndexFromServer())
    return element.style.zIndex;
   return this.GetZIndex(index);
  }
 },
 GetWindowsState: function() {
  var state = "";
  if(this.HasDefaultWindow()) {
   state += this.GetWindowState(-1);
  }
  return state;
 },
 GetWindowState: function(index) {
  var element = this.GetWindowElement(index);
  if(element != null) {
   var visibleFlag = (!this.InternalIsWindowVisible(index) || element.isHiding) ? "0" : "1";
   var isDraggedFlag = this.GetIsDragged(index) ? "1" : "0";
   var zIndex = this.GetCurrentZIndex(index);
   var isResized = this.GetIsResized(index);
   var isResizedFlag = isResized ? "1" : "0";
   var width = null, height=null;
   if(isResized) {
    width = this.GetWindowWidthInternal(index);
    height = this.GetIsCollapsed(index) ? this.GetWindowDimensionByIndex(index, false, true) : this.GetWindowHeightInternal(index);
   } else {
    width = ASPx.InvalidDimension;
    height = ASPx.InvalidDimension;
   }
   var contentWasLoaded = element.loaded ? "1" : "0";
   var left, top;
   var isMaximized = this.GetIsMaximized(index);
   if(isMaximized && !this.MaximizationExecuting()) {
    var restoredWindowData = this.GetRestoredWindowData(index);
    left = restoredWindowData.left;
    top = restoredWindowData.top;
   } else {
    left = this.GetCurrentLeft(index);
    top = this.GetCurrentTop(index);
   }
   var isPinned = this.GetIsPinned(index);
   if(isPinned) {
    left -= ASPx.GetDocumentScrollLeft();
    top -= ASPx.GetDocumentScrollTop();
   }
   left = Math.ceil(left);
   top = Math.ceil(top);
   var pinFlag = isPinned ? "1" : "0";
   var minFlag = this.GetIsCollapsed(index) ? "1" : "0";
   var maxFlag = isMaximized || this.GetIsMaximizedInit(index) ? "1" : "0";
   return [visibleFlag, isDraggedFlag, zIndex, left, top, isResizedFlag, width, height, contentWasLoaded, pinFlag, minFlag, maxFlag].join(":");
  }
  return "";
 },
 UpdateStateObject: function(){
  this.UpdateStateObjectWithObject({ windowsState: this.GetWindowsState() });
 },
 GetStateHiddenFieldOrigin: function() {
  return this.GetWindowElement(this.GetWindowCountCore() - 1);
 },
 GetPopupType: function() {
  return "aspxpopup";
 },
 GetDefaultZIndexFromServer: function() {
  return defaultZIndexFromServer;
 },
 GetPopupControlZIndex: function() {
  return popupControlZIndex;
 },
 FindWindowModalElement: function(index) {
  return ASPx.GetElementById(this.name + "_DXPWMB" + index);
 },
 GetWindowCloseButton: function(index) {
  return ASPx.GetElementById(this.name + "_HCB" + index);
 },
 GetWindowRefreshButton: function(index) {
  return ASPx.GetElementById(this.name + "_HRB" + index);
 },
 FirstShowWindow: function(index, allowChangeZIndex) {
  var popupHorizontalOffsetBackup = -1;
  var popupVerticalOffsetBackup = -1;
  var isFreeWindow = this.GetIsDragged(index);
  var x = ASPx.InvalidPosition;
  var y = ASPx.InvalidPosition;
  if(isFreeWindow) {
   x = this.GetWindowLeft(index);
   y = this.GetWindowTop(index);
   popupHorizontalOffsetBackup = this.popupHorizontalOffset;
   popupVerticalOffsetBackup = this.popupVerticalOffset;
   this.popupHorizontalOffset = 0;
   this.popupVerticalOffset = 0;
  }
  this.LockAnimation();
  this.DoShowWindowCore(index, x, y, isFreeWindow ? -1 : 0, false, allowChangeZIndex);
  this.UnlockAnimation();
  if(isFreeWindow) {
   this.popupHorizontalOffset = popupHorizontalOffsetBackup;
   this.popupVerticalOffset = popupVerticalOffsetBackup;
  }
  this.CorrectElementVerticalAlignment(ASPx.AdjustVerticalMarginsInContainer, this.GetWindowHeaderElement(index));
  this.CorrectFooterTextElementWidth(index);
 },
 HasDefaultWindow: function() {
  return true;
 },
 GetWindowCount: function() {
  return 0;
 },
 GetWindowContentHtml: function(window) {
  var index = (window != null) ? window.index : -1;
  var element = this.GetContentContainer(index);
  return (element != null) ? element.innerHTML : "";
 },
 GetWindowElementId: function(index) {
  return this.name + ASPx.PCWIdSuffix + index;
 },
 GetWindowElement: function(index) {
  if(!ASPx.IsExistsElement(this.windowElements[index]))
   this.windowElements[index] = ASPx.GetElementById(this.GetWindowElementId(index));
  return this.windowElements[index];
 },
 GetWindowClientTable: function(index) {
  return this.GetWindowElement(index);
 },
 GetCurrentWindowElement: function() {
  return this.GetWindowElement(-1);
 },
 getActualMainElement: function() { return this.GetCurrentWindowElement(); },
 ShowWindowContentUrl: function(index) {
  var contentIFrame = this.GetWindowContentIFrameElement(index);
  this.LoadWindowContentUrl(index);
  if(contentIFrame && contentIFrame.DXReloadAfterShowRequired) {
   this.RefreshWindowContentUrl(this.GetWindow(index));
   contentIFrame.DXReloadAfterShowRequired = false;
  }
 },
 RefreshWindowContentUrl: function(window) {
  this.RefreshWindowContentUrlCommon(window);
 },
 RefreshContentUrl: function() {
  this.RefreshWindowContentUrl(null);
 },
 RefreshWindowContentUrlCommon: function(window) {
  this.SetWindowContentUrl(window, this.GetWindowContentUrl(window));
 },
 GetContentUrl: function() {
  return this.GetWindowContentUrl(null);
 },
 GetWindowContentUrl: function(window) {
  var index = (window != null) ? window.index : -1;
  if(!this.IsWindowVisible(window))
   return this.GetWindowContentIFrameUrl(index);
  var element = this.GetWindowContentIFrameElement(index);
  return (element != null) ? element.src : "";
 },
 GetContentIFrame: function(window) {
  return this.GetWindowContentIFrame(null);
 },
 GetWindowContentIFrame: function(window) {
  var index = (window != null) ? window.index : -1;
  return this.GetWindowContentIFrameElement(index);
 },
 GetContentIFrameWindow: function() {
  var iframeElement = this.GetContentIFrame();
  return iframeElement.contentWindow;
 },
 SetContentUrl: function(url) {
  this.SetWindowContentUrl(null, url);
 },
 SetWindowContentUrl: function(window, url) {
  var index = (window != null) ? window.index : -1;
  this.SetWindowContentUrlInternal(index, url);
 },
 LoadWindowContentUrl: function(index) {
  var url = this.GetWindowContentIFrameUrl(index);
  this.LoadWindowContentFromUrl(index, url);
 },
 LoadWindowContentFromUrl: function(index, url) {
  var element = this.GetWindowContentIFrameElement(index);
  if(element && element.src != url && element.DXSrcRaw != url) {
   this.SetSrcToIframeElement(index, element, url);
   this.SetWindowContentIFrameUrl(index, element.src); 
  }
 },
 SetWindowContentIFrameUrl: function(index, url) {
  this.SetPropertyValue(index, "contentUrl", url);
 },
 SetWindowContentUrlInternal: function(index, url) {
  var element = this.GetWindowContentIFrameElement(index);
  var windowVisible = this.InternalIsWindowVisible(index);
  if(windowVisible && element != null)
   this.SetIframeVisibleForDragging(index, true);
  this.SetWindowContentIFrameUrl(index, url);
  var src = windowVisible ? url : ASPx.Browser.WebKitFamily && ASPx.Browser.Version >= 75 ? "about:blank" : ASPx.SSLSecureBlankUrl;
  if(element == null) {
   this.CreateWindowContentIFrameElement(index, src);
   this.RefreshDimensionsAfterCreateIframe(index);
  }
  else
   this.SetSrcToIframeElement(index, element, src);
  this.ReinitScrollForIframe(index);
 },
 ReinitScrollForIframe: function(index) {
  if(this.HasIframeOnIos(index)) {
   var scrollElement = this.getTouchScrollerElement(index);
   if(scrollElement) {
    var options = this.GetWindowTouchScrollOptions(index);
    ASPx.TouchUIHelper.InitNativeScrolling(scrollElement, options);
    if(!!this.touchUIScrollers[index]) {
     this.touchUIScrollers[index].Destroy();
     this.touchUIScrollers[index] = null;
    }
   }
  }
 },
 EnsureWindowContentUrl: function(index) {
  var contentUrl = this.GetWindowContentIFrameUrl(index);
  if(contentUrl != "")
   this.SetWindowContentUrlInternal(index, contentUrl);
 },
 CreateWindowContentIFrameElement: function(index, src) {
  var content = this.GetContentContainer(index);
  var iframeParent = content;
  content.innerHTML = "";
  content.style.display = "block";
  var iframe = this.CreateContentIFrameElement(index, src);
  this.RequireIFrameHeightAdjusting(index, iframe);
  iframeParent.appendChild(iframe);
  this.InitIFrame(index);
  return iframe;
 },
 InitIFrame: function(index) {
  var contentIFrameElement = this.GetWindowContentIFrameElement(index);
  if(contentIFrameElement) {
   contentIFrameElement.popupControlName = this.name;
   contentIFrameElement.pcWndIndex = index;
   ASPx.Evt.AttachEventToElement(contentIFrameElement, "load", ASPx.PCIframeLoad);
  }
 },
 OnIFrameLoad: function(index) {
  this.SetIframeLoading(index, false);
 },
 RequireIFrameHeightAdjusting: function(index, iframe) {
  if(this.InternalIsWindowVisible(index))
   this.AdjustIFrameHeight(index, iframe);
  else
   this.PostponeIframeAdjusting(index);
 },
 PostponeIframeAdjusting: function(index) {
  this.SetIframeAdjustingPostponed(index, true);
 },
 EnsureIFrameHeightAdjusted: function(index) {
  if(this.GetIframeAdjustingPostponed(index)) {
   var iframe = this.GetWindowContentIFrameElement(index);
   this.AdjustIFrameHeight(index, iframe);
  }
 },
 AdjustIFrameHeight: function(index, iframe) {
 },
 CreateContentIFrameElement: function(index, src) {
  var iframe = document.createElement("IFRAME");
  iframe.id = this.GetWindowContentIFrameElementId(index);
  iframe.scrolling = "auto";
  iframe.frameBorder = 0;
  iframe.style.width = "100%";
  iframe.style.height = "100%";
  iframe.style.overflow = "auto";
  if(ASPx.Browser.Chrome) iframe.style.webkitBackfaceVisibility = "hidden";
  if(ASPx.Browser.Edge)
   iframe.style["-ms-user-select"] = "text";
  var titleText = this.GetWindowContentIFrameTitle(index);
  if(!!titleText)
   iframe.title = titleText;
  this.SetSrcToIframeElement(index, iframe, src);
  return iframe;
 },
 SetSrcToIframeElement: function(index, iframeElement, src) {
  this.SetIframeLoading(index, true);
  iframeElement.src = src;
  if(ASPx.Browser.Chrome && src.indexOf("#"))
   this.PreventScrollingAfterIframeLoaded(iframeElement);
  iframeElement.DXSrcRaw = src;
 },
 PreventScrollingAfterIframeLoaded: function(iframeElement) {
  var docScrollTop = ASPx.GetDocumentScrollTop();
  var onIframeLoadedHandler = function() {
   window.setTimeout(function() {
    ASPx.SetDocumentScrollTop(docScrollTop);
    ASPx.Evt.DetachEventFromElement(iframeElement, "load", onIframeLoadedHandler);
   }, 0);
  };
  ASPx.Evt.AttachEventToElement(iframeElement, "load", onIframeLoadedHandler);
 },
 GetWindowHeaderTextCell: function(index) {
  return this.GetWindowChild(index, "_PWH" + index + "T");
 },
 GetWindowHeaderTextElement: function(index) {
  var element = this.GetWindowHeaderTextCell(index);
  if(element != null) {
   var link = ASPx.GetNodeByTagName(element, "A", 0);
   return link || element;
  }
  return null;
 },
 GetWindowHeaderLinkElement: function(index) {
  var element = this.GetWindowHeaderElement(index);
  return element ? ASPx.GetNodeByClassName(element, PopupControlCssClasses.LinkCssClassName) : null;
 },
 GetWindowHeaderImageCell: function(index) {
  return this.GetWindowChild(index, "_PWH" + index + "I");
 },
 GetWindowFooterTextCell: function(index) {
  return this.GetWindowChild(index, "_PWF" + index + "T");
 },
 GetWindowFooterTextElement: function(index) {
  var element = this.GetWindowFooterTextCell(index);
  if(element != null) {
   var link = ASPx.GetNodeByTagName(element, "A", 0);
   return link || element;
  }
  return null;
 },
 GetWindowFooterLinkElement: function(index) {
  var element = this.GetWindowFooterElement(index);
  return element ? ASPx.GetNodeByClassName(element, PopupControlCssClasses.LinkCssClassName) : null;
 },
 GetWindowFooterImageCell: function(index) {
  return this.GetWindowChild(index, "_PWF" + index + "I");
 },
 GetWindowHeaderImageUrl: function(index) {
  var element = this.GetWindowHeaderImageCell(index);
  return element ? element.src : "";
 },
 SetWindowHeaderImageUrl: function(index, url) {
  var element = this.GetWindowHeaderImageCell(index);
  if(element != null) {
   element.src = url;
  }
 },
 GetWindowFooterImageUrl: function(index) {
  var element = this.GetWindowFooterImageCell(index);
  return element ? element.src : "";
 },
 SetWindowFooterImageUrl: function(index, url) {
  var element = this.GetWindowFooterImageCell(index);
  if(element != null) {
   element.src = url;
  }
 },
 GetWindowHeaderNavigateUrl: function(index) {
  var link = this.GetWindowHeaderLinkElement(index);
  if(link)
   return link.href || ASPx.Attr.GetAttribute(linkEl, "savedhref");
  return "";
 },
 SetWindowHeaderNavigateUrl: function(index, url) {
  var link = this.GetWindowHeaderLinkElement(index);
  if(link) {
   if(ASPx.Attr.IsExistsAttribute(link, "savedhref"))
    ASPx.Attr.SetAttribute(link, "savedhref", url);
   else if(ASPx.Attr.IsExistsAttribute(link, "href"))
    link.href = url;
  }
 },
 GetWindowFooterNavigateUrl: function(index) {
  var link = this.GetWindowFooterLinkElement(index);
  if(link)
   return link.href || ASPx.Attr.GetAttribute(linkEl, "savedhref");
  return "";
 },
 SetWindowFooterNavigateUrl: function(index, url) {
  var link = this.GetWindowFooterLinkElement(index);
  if(link) {
   if(ASPx.Attr.IsExistsAttribute(link, "savedhref"))
    ASPx.Attr.SetAttribute(link, "savedhref", url);
   else if (ASPx.Attr.IsExistsAttribute(link, "href"))
    link.href = url;
  }
 },
 GetWindowHeaderText: function(index) {
  var element = this.GetWindowHeaderTextElement(index);
  if(element != null) 
    return element.innerHTML;
  return "";
 },
 SetWindowHeaderText: function(index, text) {
  var element = this.GetWindowHeaderTextElement(index);
  if(element != null) {
   element.innerHTML = text;
   this.CorrectHeaderContentElementHeight(index);
   this.CorrectElementVerticalAlignment(ASPx.AdjustVerticalMarginsInContainer, this.GetWindowHeaderElement(index), true);
  }
 },
 GetWindowFooterText: function(index) {
  var element = this.GetWindowFooterTextElement(index);
  if(element != null) 
   return element.innerHTML;
  return "";
 },
 SetWindowFooterText: function(index, text) {
  var element = this.GetWindowFooterTextElement(index);
  if(element != null) {
   element.innerHTML = text;
   this.CorrectWindowSizeGripPositionLite(index);
  }
 },
 CorrectWindowSizeGripPositionLite: function(index) {
  var sizeGrip = this.GetWindowSizeGripElement(index);
  if(!sizeGrip || sizeGrip.corrected) return;
  sizeGrip.style[this.rtl ? "marginRight" : "marginLeft"] = "-" + sizeGrip.offsetWidth + "px";
  sizeGrip.style.marginTop = "-" + sizeGrip.offsetHeight + "px";
  sizeGrip.corrected = true;
 },
 GetHeaderFooterHeightCore: function(index) {
  var extenders = [
   this.GetWindowHeaderElement(index),
   this.GetWindowFooterElement(index)
  ], height = 0;
  for(var i = 0; i < extenders.length; i++) {
   if(extenders[i])
    height += extenders[i].offsetHeight;
  }
  return height;
 },
 GetHeaderImageUrl: function() {
  return this.GetWindowHeaderImageUrl(-1);
 },
 SetHeaderImageUrl: function(value) {
  this.SetWindowHeaderImageUrl(-1, value);
 },
 GetFooterImageUrl: function() {
  return this.GetWindowFooterImageUrl(-1);
 },
 SetFooterImageUrl: function(value) {
  this.SetWindowFooterImageUrl(-1, value);
 },
 GetHeaderNavigateUrl: function() {
  return this.GetWindowHeaderNavigateUrl(-1);
 },
 SetHeaderNavigateUrl: function(value) {
  this.SetWindowHeaderNavigateUrl(-1, value);
 },
 GetFooterNavigateUrl: function() {
  return this.GetWindowFooterNavigateUrl(-1);
 },
 SetFooterNavigateUrl: function(value) {
  this.SetWindowFooterNavigateUrl(-1, value);
 },
 GetHeaderText: function() {
  return this.GetWindowHeaderText(-1);
 },
 SetHeaderText: function(value) {
  this.SetWindowHeaderText(-1, value);
 },
 GetFooterText: function() {
  return this.GetWindowFooterText(-1);
 },
 SetFooterText: function(value) {
  this.SetWindowFooterText(-1, value);
 },
 GetVisible: function() {
  return this.IsVisible();
 },
 SetVisible: function(visible) {
  if(visible && !this.IsVisible())
   this.Show();
  else if(!visible && this.IsVisible())
   this.Hide();
 },
 GetStateHiddenFieldName: function() {
  return this.uniqueID + "State";
 },
 GetWindowCountCore: function() {
  return 0; 
 },
 IsWindowElementsIDAssigned: function(index) {
  var contentElement = this.GetWindowContentElement(index);
  return ASPx.IsExistsElement(contentElement);
 },
 InitializeDOM: function () {
  var windowElement = this.GetWindowElement(this.GetWindowCountCore() - 1);
  if(windowElement)
   windowElement.dxinit = true;
 },
 IsDOMInitialized: function() {
  var windowElement = this.GetWindowElement(this.GetWindowCountCore() - 1);
  return windowElement && windowElement.dxinit;
 },
 IsDOMDisposed: function() { 
  var windowElement = this.GetWindowElement(this.GetWindowCountCore() - 1);
  return !ASPx.IsExistsElement(windowElement);
 },
 OnDispose: function() {
  ASPxClientControl.prototype.OnDispose.call(this);
  this.ClearPopupElementConnection();
 },
 RegisterInControlTree: function(tree) {
  var mainNode = tree.createNode(null, this);
  if(this.HasDefaultWindow())
   this.RegisterRelatedNodeForWindowElement(tree, -1, mainNode);
  for(var i = 0; i < this.GetWindowCount() ; i++)
   this.RegisterRelatedNodeForWindowElement(tree, i, mainNode);
 },
 RegisterRelatedNodeForWindowElement: function(tree, windowElementIndex, mainNode) {
  var windowElement = this.GetWindowElement(windowElementIndex);
  if(windowElement) {
   var childNode = tree.createNode(windowElement.id, null);
   tree.addRelatedNode(mainNode, childNode);
  }
 },
 CorrectWindowHeaderText: function(index) {
  var headerElement = this.GetWindowHeaderElement(index);
  if(!headerElement || headerElement.corrected) return;
  var leftChildrenWidth = 0, rightChildrenWidth = 0, headerContentElement;
  for(var i = 0; i < headerElement.childNodes.length; i++) {
   var child = headerElement.childNodes[i];
   if(!child.offsetWidth) continue;
   if(ASPx.GetElementFloat(child) === "right")
    rightChildrenWidth += child.offsetWidth + ASPx.GetLeftRightMargins(child);
   else if(ASPx.GetElementFloat(child) === "left")
    leftChildrenWidth += child.offsetWidth + ASPx.GetLeftRightMargins(child);
   else if(!headerContentElement)
    headerContentElement = child;
  }
  if(headerContentElement && (leftChildrenWidth > 0 || rightChildrenWidth > 0)) {
   var headerContentElementStyle = ASPx.GetCurrentStyle(headerContentElement);
   var originalMarginLeft = parseInt(headerContentElementStyle.marginLeft);
   var originalMarginRight = parseInt(headerContentElementStyle.marginRight);
   ASPx.SetStyles(headerContentElement, {
    marginLeft: leftChildrenWidth + originalMarginLeft,
    marginRight: rightChildrenWidth + originalMarginRight
   });
   this.CorrectHeaderContentElementHeight(index);
  }
  headerElement.corrected = true;
 },
 CorrectHeaderContentElementHeight: function(index) {
  var headerElement = this.GetWindowHeaderElement(index),
   headerContentElement = ASPx.GetChildByClassName(headerElement, PopupControlCssClasses.HeaderContentCssClassName);
  if(!headerElement || !headerContentElement) return;
  if(headerContentElement.style.height)
   headerContentElement.style.height = "";
  var contentElementHeight = ASPx.GetClearClientHeight(headerElement) - this.getTopBottomBordersAndPaddingsSummaryValue(headerContentElement),
   lineHeightForTextVerticalAlign = contentElementHeight,
   windowHeaderTextCell = this.GetWindowHeaderTextCell(index);
  if(windowHeaderTextCell)
   lineHeightForTextVerticalAlign -= this.getTopBottomBordersAndPaddingsSummaryValue(windowHeaderTextCell);
  ASPx.SetStyles(headerContentElement, { lineHeight: lineHeightForTextVerticalAlign, height: contentElementHeight }, false);
 },
 CorrectFooterTextElementWidth: function(index) {
  var footerElement = this.GetWindowFooterElement(index);
  var footerContentElement = ASPx.GetChildByClassName(footerElement, PopupControlCssClasses.FooterContentCssClassName);
  var footerTextElement = this.GetWindowFooterTextElement(index);
  var footerImageElement = this.GetWindowFooterImageCell(index);
  if(!footerElement || !footerContentElement || !footerTextElement)
   return;
  var footerTextMaxWidth = "";
  if(footerImageElement) {
   var footerTextMaxWidthCorrection = footerImageElement.offsetWidth + ASPx.GetLeftRightMargins(footerImageElement);
   footerTextMaxWidth = "calc(100% - " + footerTextMaxWidthCorrection + "px)";
  }
  ASPx.SetStyles(footerTextElement, { maxWidth: footerTextMaxWidth }, false);
 },
 OnBeforeDropdownShow: function() {
  var element = this.GetWindowElement(-1);
  if(!ASPx.GetElementDisplay(element)) {
   element.style.visibility = "hidden";
  }
  this.SetWindowDisplay(-1, true);
  if(this.adaptivityEnabled) {
   ASPx.SetElementDisplay(this.GetModalWrapperElement(-1), true);
   this.SetAdaptiveModalMode(-1, this.NeedAdaptiveModalMode());
  }
 },
 SetWindowDisplay: function(index, value) {
  var pcwElement = this.GetWindowElement(index);
  ASPx.SetElementDisplay(pcwElement, value);
 },
 getWindowHorizontalAlign: function(element) {
  return this.popupHorizontalAlign;
 },
 getWindowVerticalAlign: function(element) {
  return this.popupVerticalAlign;
 },
 getWindowHorizontalOffset: function(element) {
  return this.popupHorizontalOffset;
 },
 getWindowVerticalOffset: function(element) {
  return this.popupVerticalOffset;
 },
 GetHorizontalAlign: function() {
  return this.popupHorizontalAlign;
 },
 GetVerticalAlign: function() {
  return this.popupVerticalAlign;
 },
 GetPopupHorizontalOffset: function() {
  return this.popupHorizontalOffset;
 },
 SetPopupHorizontalOffset: function(offset) {
  this.popupHorizontalOffset = offset;
 },
 SetPopupVerticalOffset: function(offset) {
  this.popupVerticalOffset = offset;
 },
 GetPopupVerticalOffset: function() {
  return this.popupVerticalOffset;
 },
 ShowAtElement: function(htmlElement, savePopupElement) {
  this.ShowWindowAtElementByIndex(-1, htmlElement, savePopupElement);
 },
 ShowAtElementByID: function(id) {
  var htmlElement = document.getElementById(id);
  this.ShowAtElement(htmlElement);
 },
 ShowWindowAtElementByIndex: function(index, htmlElement, savePopupElement) {
  var lastIndexBackup = this.GetLastShownPopupElementIndex(index);
  this.ShowWindowByIndex(index, this.AddPopupElementInternal(index, htmlElement));
  if(!savePopupElement)
   this.RemovePopupElementInternal(index, htmlElement);
  this.SetLastShownPopupElementIndex(index, lastIndexBackup);
 },
 ShowWindowByIndex: function(index, popupElementIndex) {
  if(!this.isInitialized)
   return;
  if(popupElementIndex === undefined)
   popupElementIndex = this.GetLastShownPopupElementIndex(index);
  this.DoShowWindowCore(index, ASPx.InvalidPosition, ASPx.InvalidPosition, popupElementIndex, false, true);
 },
 DoShowWindowCore: function(index, x, y, popupElementIndex, closeOtherWindows, allowChangeZIndex, evt, closeOtherReason) {
 },
 DoShowWindow: function(index, popupElementIndex, evt) {
  if(!this.InternalIsWindowVisible(index)) {
   var x = ASPx.Evt.GetEventX(evt);
   var y = ASPx.Evt.GetEventY(evt);
   this.DoShowWindowCore(index, x, y, popupElementIndex, true, true, evt, ASPxClientPopupControlCloseReason.OuterMouseClick);
  }
 },
 SetWindowPos: function(index, element, x, y) {
  ASPx.SetStyles(element, { left: x, top: y });
  this.DoShowWindowIFrame(index, x, y, ASPx.InvalidDimension, ASPx.InvalidDimension);
  this.SetIsDragged(index, true);
  this.SetWindowLeft(index, ASPx.GetAbsoluteX(element));
  this.SetWindowTop(index, ASPx.GetAbsoluteY(element));
  this.UpdateWindowsStateCookie();
 },
 CorrectPopupPositionForClientWindow: function(element, popupPosition, isX) {
  if(element.isPopupPositionCorrectionOn && this.isPopupFullCorrectionOn || this.forceAdjustPositionToClientScreen) {
   popupPosition.position = ASPx.PopupUtils.AdjustPositionToClientScreen(element, popupPosition.position, this.rtl, isX);
  }
  return popupPosition;
 },
 GetClientPopupPos: function(element, popupElement, pos, isX, isDragged) {
  var index = this.GetWindowIndex(element);
  var popupPosition = null;
  if(this.GetIsMaximizedOnWebKitTouch(index))
   return new ASPx.PopupPosition(ASPx.PrepareClientPosForElement(0, element, isX), false);
  if(isDragged)
   popupPosition = new ASPx.PopupPosition(!this.IsValidPosition(pos) ? this.GetPosition(index, isX) : pos, false);
  else
   popupPosition = isX ? this.GetClientPopupPosX(element, popupElement, pos) : this.GetClientPopupPosY(element, popupElement, pos);
  popupPosition.position = ASPx.PrepareClientPosForElement(popupPosition.position, element, isX);
  if(ASPx.Browser.Firefox && ASPx.Browser.Version < 3 && this.GetWindowModalElement(index))
   popupPosition.position -= isX ? ASPx.GetDocumentScrollLeft() : ASPx.GetDocumentScrollTop();
  return popupPosition;
 },
 GetClientPopupPosX: function(element, popupElement, x) {
  var mainElement = this.GetWindowMainCell(element);
  var popupPosition = ASPx.PopupUtils.GetPopupAbsoluteX(mainElement, popupElement, this.getWindowHorizontalAlign(element), this.getWindowHorizontalOffset(element),
   x, this.GetWindowLeft(this.GetWindowIndex(element)), this.rtl, this.isPopupFullCorrectionOn);
  return this.CorrectPopupPositionForClientWindow(element, popupPosition, true);
 },
 GetClientPopupPosY: function(element, popupElement, y) {
  var mainElement = this.GetWindowMainCell(element);
  var popupPosition = ASPx.PopupUtils.GetPopupAbsoluteY(mainElement, popupElement, this.getWindowVerticalAlign(element), this.getWindowVerticalOffset(element),
   y, this.GetWindowTop(this.GetWindowIndex(element)), this.isPopupFullCorrectionOn, this.usedInDropDown, this.usedInDropDown);
  return this.usedInDropDown ? popupPosition : this.CorrectPopupPositionForClientWindow(element, popupPosition, false);
 },
 UpdateWindowPositionInternal: function(index, popupElement) {
  var positionUpdated = false,
   element = this.GetWindowElement(index);
  if(this.InternalIsWindowVisible(index) && element != null) {
   var horizontalPopupPosition;
   if(this.popupHorizontalAlign === ASPx.PopupUtils.WindowCenterAlignIndicator && window.innerWidth <= element.offsetWidth) {
    var scrollDiff = aspxGetPopupControlCollection().GetDocScrollDifference(),
     scrollInProgress = scrollDiff.horizontal !== 0 || scrollDiff.vertical !== 0;
    horizontalPopupPosition = scrollInProgress ? ASPx.PxToInt(element.style.left) : this.GetClientPopupPos(element, popupElement, ASPx.InvalidPosition, true, false);
   } else
    horizontalPopupPosition = this.GetClientPopupPos(element, popupElement, ASPx.InvalidPosition, true, false);
   var verticalPopupPosition = this.GetClientPopupPos(element, popupElement, ASPx.InvalidPosition, false, false);
   this.SetWindowPos(index, element, horizontalPopupPosition.position, verticalPopupPosition.position);
   positionUpdated = true;
  }
  return positionUpdated;
 },
 UpdatePositionAtElement: function(popupElement) {
  this.UpdateWindowPositionAtElement(null, popupElement);
 },
 UpdateWindowPositionAtElement: function(window, popupElement) {
  var index = (window != null) ? window.index : -1;
  this.UpdateWindowPositionInternal(index, popupElement);
 },
 TryAutoUpdatePosition: function(index) {
  if(this.GetAutoUpdatePosition(index))
   this.UpdateWindowPositionInternal(index, this.GetPopupElement(index, this.GetLastShownPopupElementIndex(index)));
 },
 GetLastShownPopupElementIndex: function(windowIndex) {
  var info = this.GetLastUsedPopupElementInfo(windowIndex);
  return ASPx.GetDefinedValue(info.shownPEIndex, 0);
 },
 SetLastShownPopupElementIndex: function(windowIndex, popupElementIndex) {
  var info = this.GetLastUsedPopupElementInfo(windowIndex);
  info.shownPEIndex = popupElementIndex;
 },
 GetLastUsedPopupElementInfo: function(index) {
  if(0 <= index && index < this.GetWindowCountCore())
   return this.windowsLastUsedPopupElementInfoList[index];
  return this.defaultLastUsedPopupElementInfo;
 },
 GetPopupElement: function(index, popupElementIndex) {
  var popupElement = this.GetPopupElementList(index)[popupElementIndex];
  return popupElement ? popupElement : null;
 },
 GetPopupElementList: function(index) {
  if(0 <= index && index < this.GetWindowCountCore())
   return this.windowsPopupElementList[index];
  return this.defaultWindowPopupElementList;
 },
 PopulatePopupElementsByIds: function(index) {
  var ids = this.GetPopupElementIDList(index);
  for(var i = 0; i < ids.length; i++) {
   var popupElement = ASPx.PopupUtils.FindPopupElementById(ids[i]);
   if(popupElement)
    this.AddWindowPopupElement(index, popupElement);
  }
 },
 PopulatePopupElements: function(index) {
  this.PopulatePopupElementsByIds(index);
 },
 SetPopupElementIDByIndex: function(index, popupElementId) {
  this.RemoveWindowAllPopupElements(index);
  this.SetPopupElementIDs(index, popupElementId.split(';'));
  if(aspxGetPopupControlCollection().IsDisappearTimerActive()) {
   aspxGetPopupControlCollection().ClearDisappearTimer();
   this.Hide(index);
  }
  this.PopulatePopupElements(index);
 },
 RefreshPopupElementConnection: function() {
  this.ClearPopupElementConnection();
  var index = this.HasDefaultWindow() ? -1 : 0;
  for(; index < this.GetWindowCount(); index++)
   this.PopulatePopupElements(index);
 },
 ClearPopupElementConnection: function() {
  var index = this.HasDefaultWindow() ? -1 : 0;
  for(; index < this.GetWindowCount(); index++)
   this.RemoveWindowAllPopupElements(index);
 },
 GetPopupElementIDList: function(index) {
  if(0 <= index && index < this.GetWindowCountCore())
   return this.windowsPopupElementIDList[index];
  return this.defaultWindowPopupElementIDList;
 },
 SetPopupElementIDs: function(index, ids) {
  if(0 <= index && index < this.GetWindowCountCore())
   this.windowsPopupElementIDList[index] = ids;
  this.defaultWindowPopupElementIDList = ids;
 },
 AddPopupElementInternal: function(index, element) {
  var popupElements = this.GetPopupElementList(index);
  for(var i = 0; i < popupElements.length; i++) {
   if(!popupElements[i]) {
    popupElements[i] = element;
    return i;
   }
  }
  popupElements.push(element);
  return popupElements.length - 1;
 },
 RemovePopupElementInternal: function(index, element) {
  var popupElements = this.GetPopupElementList(index);
  for(var i = 0; i < popupElements.length; i++) {
   if(popupElements[i] == element) {
    popupElements[i] = null;
    return;
   }
  }
 },
 AddPopupElement: function(popupElement) {
  this.AddWindowPopupElement(-1, popupElement);
 },
 AddWindowPopupElement: function(index, popupElement) {
  var popupElementIndex = this.AddPopupElementInternal(index, popupElement);
  this.SetPopupElementReference(index, popupElement, popupElementIndex, true);
 },
 RemovePopupElement: function(popupElement) {
  this.RemoveWindowPopupElement(-1, popupElement);
 },
 RemoveWindowPopupElement: function(index, popupElement) {
  this.RemovePopupElementInternal(index, popupElement);
  this.SetPopupElementReference(index, popupElement, null, false);
 },
 SetPopupElementReference: function(index, popupElement, popupElementIndex, attach) {
  if(!ASPx.IsExistsElement(popupElement)) return;
  var setReferenceFunction = this.getAttachReferenceFunction(attach);
  var setContextMenuReferenceFunction = attach ? ASPx.Evt.AttachContextMenuToElement : ASPx.Evt.DetachContextMenuFromElement;
  var windowPopupAction = this.GetWindowPopupAction(index);
  if(windowPopupAction == "LeftMouseClick")
   setReferenceFunction(popupElement, "mouseup", aspxPEMEvent);
  else if(windowPopupAction == "RightMouseClick")
   setContextMenuReferenceFunction(popupElement, aspxPEMEvent);
  else if(windowPopupAction == "MouseOver") {
   var windowElement = this.GetWindowElement(index);
   setReferenceFunction(popupElement, "mouseover", ASPx.PopupUtils.OverControl.OnMouseOver);
   setReferenceFunction(windowElement, "mouseover", aspxPWEMOver);
   if(attach)
    this.SetMSTouchMouseOverReference(popupElement, windowElement, this.name, index, this.appearAfter);
  }
  if(windowPopupAction == "LeftMouseClick" || windowPopupAction == "RightMouseClick") {
   setReferenceFunction(popupElement, "mousedown", aspxPEMEvent);
  }
  if(attach) {
   popupElement.DXPopupElementControl = this;
   popupElement.DXPopupWindowIndex = index;
   popupElement.DXPopupElementIndex = popupElementIndex;
  } else
   popupElement.DXPopupElementControl = popupElement.DXPopupWindowIndex = popupElement.DXPopupElementIndex = undefined;
 },
 getAttachReferenceFunction: function(attach) {
  return attach ? ASPx.Evt.AttachEventToElement : ASPx.Evt.DetachEventFromElement;
 },
 SetMSTouchMouseOverReference: function(popupElement, windowElement, popupName, index, appearAfter) {
  if(!ASPx.TouchUIHelper.pointerEnabled) return;
  popupElement.dxMsTouchGesture = popupElement.dxMsTouchGesture ||
   ASPx.TouchUIHelper.msTouchCreateGesturesWrapper(popupElement, function(evt) {
    window.setTimeout(function() {
     aspxGetPopupControlCollection().SetAppearTimer(popupName, index, popupElement.DXPopupElementIndex, appearAfter, evt);
    }, 0);
   });
  windowElement.dxMsTouchGesture = windowElement.dxMsTouchGesture || ASPx.TouchUIHelper.msTouchCreateGesturesWrapper(windowElement, function(evt) {
   window.setTimeout(function() {
    aspxGetPopupControlCollection().ClearDisappearTimer();
   }, 0);
  });
 },
 GetLastOverPopupElementIndex: function(windowIndex) {
  var info = this.GetLastUsedPopupElementInfo(windowIndex);
  return ASPx.GetDefinedValue(info.overPEIndex, -1);
 },
 SetLastOverPopupElementIndex: function(windowIndex, popupElementIndex) {
  var info = this.GetLastUsedPopupElementInfo(windowIndex);
  info.overPEIndex = popupElementIndex;
 },
 OnPopupElementMouseOver: function(evt, popupElement) {
  if(popupElement != null) {
   var index = popupElement.DXPopupWindowIndex;
   var isVisible = this.InternalIsWindowVisible(index);
   var popupElementIndex = popupElement.DXPopupElementIndex;
   if(this.GetLastOverPopupElementIndex(index) != popupElementIndex) {
    if(aspxGetPopupControlCollection().IsAppearTimerActive())
     aspxGetPopupControlCollection().ClearAppearTimer();
    if(aspxGetPopupControlCollection().IsDisappearTimerActive())
     aspxGetPopupControlCollection().ClearDisappearTimer();
    if(isVisible) {
     this.DoHideWindow(index, false, ASPxClientPopupControlCloseReason.MouseOut);
     isVisible = false;
    }
   }
   if(!isVisible) {
    aspxGetPopupControlCollection().SetAppearTimer(this.name, index, popupElement.DXPopupElementIndex, this.appearAfter, evt);
    aspxGetPopupControlCollection().InitOverObject(this, index, evt);
   }
   this.SetLastOverPopupElementIndex(index, popupElementIndex);
  }
 },
 OnPopupElementMouseOut: function(evt, popupElement) {
 },
 RemoveAllPopupElements: function() {
  this.RemoveWindowAllPopupElements(-1);
 },
 RemoveWindowAllPopupElements: function(index) {
  var popupElements = this.GetPopupElementList(index);
  for(var i = 0; i < popupElements.length; i++)
   this.RemoveWindowPopupElement(index, popupElements[i]);
 },
 GetWindowCurrentPopupElementByIndex: function(index) {
  var popupElement = this.GetPopupElement(index, this.GetLastShownPopupElementIndex(index));
  if(popupElement && popupElement.DXPopupElementControl)
   return popupElement;
  return null;
 },
 GetWindowCurrentPopupElementIndexByWindowIndex: function(windowIndex) {
  var popupElement = this.GetWindowCurrentPopupElementByIndex(windowIndex);
  return popupElement ? popupElement.DXPopupElementIndex : -1;
 },
 GetIsMaximizedOnWebKitTouch: function(index) {
  return false;
 },
 ProcessAccessibleElementOnHide: function() {
  if(this.accessibilityCompliant) {
   var focusElement = this.accessibleFocusElement ? this.accessibleFocusElement : this.GetCurrentPopupElement();
   ASPx.AccessibilityUtils.SetFocusAccessibleCore(focusElement);
   this.accessibleFocusElement = null;
  }
 },
 OnControlsInitialized: function() {
  this.InitializeAccessibleNavigationCore();
  setTimeout(function() {
   ASPx.GetControlCollection().ControlsInitialized.RemoveHandler(this.OnControlsInitialized, this);
  }.aspxBind(this), 0);
 },
 InitializeAccessibleNavigation: function() {
  this.Shown.AddHandler(this.InitializeAccessibleNavigationCore.aspxBind(this));
 },
 InitializeAccessibleNavigationCore: function() {
  this.resetFocusableElements();
  var focusableElement = this.getFirstFocusableElement();
  if(focusableElement) {
   var currentWindowContentCell = this.GetWindowContentElement(-1);
   var contentFirstActionElement = ASPx.FindFirstChildActionElement(currentWindowContentCell);
   if(contentFirstActionElement && contentFirstActionElement !== focusableElement)
    focusableElement = contentFirstActionElement;
   if(!this.preventAccessibilityFocus)
    ASPx.AccessibilityUtils.SetFocusAccessible(focusableElement);
   this.SetLoopingFocusHandlers();
  }
 },
 resetFocusableElements: function() {
  if(this.firstFocusableElement)
   ASPx.Evt.DetachEventFromElement(this.firstFocusableElement, "keydown", this.focusLastElementHandler);
  if(this.lastFocusableElement)
   ASPx.Evt.DetachEventFromElement(this.lastFocusableElement, "keydown", this.focusFirstElementHandler);
  this.firstFocusableElement = null;
  this.lastFocusableElement = null;
 },
 getFirstFocusableElement: function() {
  if(!this.firstFocusableElement)
   this.firstFocusableElement = ASPx.FindFirstChildActionElement(this.GetCurrentWindowElement());
  return this.firstFocusableElement;
 },
 getLastFocusableElement: function() {
  if(!this.lastFocusableElement)
   this.lastFocusableElement = ASPx.FindLastChildActionElement(this.GetCurrentWindowElement());
  return this.lastFocusableElement;
 },
 SetLoopingFocusHandlers: function() {
  ASPx.Evt.AttachEventToElement(this.getFirstFocusableElement(), "keydown", this.focusLastElementHandler);
  ASPx.Evt.AttachEventToElement(this.getLastFocusableElement(), "keydown", this.focusFirstElementHandler);
 },
 loopFocusHandler: function(evt, isLastFocusableElement) {
  var keyCode = ASPx.Evt.GetKeyCode(evt);
  if(keyCode !== ASPx.Key.Tab)
   return;
  var targetElement = isLastFocusableElement ? this.getLastFocusableElement() : this.getFirstFocusableElement();
  if(ASPx.Evt.GetEventSource(evt) !== targetElement)
   return;
  var elementToFocus = null;
  if(!isLastFocusableElement && evt.shiftKey)
   elementToFocus = this.getLastFocusableElement();
  else if(isLastFocusableElement && !evt.shiftKey)
   elementToFocus = this.getFirstFocusableElement();
  if(elementToFocus) {
   ASPx.AccessibilityUtils.SetFocusAccessible(elementToFocus);
   ASPx.Evt.PreventEventAndBubble(evt);
  }
 },
 getLeftRightBordersAndPaddingsSummaryValue: function(element, currentStyle) {
  return ASPx.GetLeftRightBordersAndPaddingsSummaryValue(element, currentStyle);
 },
 getTopBottomBordersAndPaddingsSummaryValue: function(element, currentStyle) {
  return ASPx.GetTopBottomBordersAndPaddingsSummaryValue(element, currentStyle);
 },
 AdjustModalElementBounds: function(element) {
 },
 RefreshDimensionsAfterCreateIframe: function(index) {
 },
 UpdatePositionAfterCallback: function(windowIndex) {
 }
});
ASPxClientPopupControlBase.AnimationType = {
 Fade: "fade",
 Slide: "slide",
 Auto: "auto",
 None: "none"
};
var ASPxClientPopupControl = ASPx.CreateClass(ASPxClientPopupControlBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.popupActionArray = [];
  this.windowsPopupElementIDList = [];
  this.windowsPopupElementList = [];
  this.windowsLastUsedPopupElementInfoList = [];
  this.windowsIsPopupedList = [];
  this.windowsPopupReasonMouseEventList = [];
  this.defaultPopupReasonMouseEvent = null;
  this.modal = false;
  this.modalArray = [];
  this.isDraggedArray = [];
  this.closeActionArray = [];
  this.showOnPageLoadArray = [];
  this.windows = [];
  this.windowCount = 0;
  this.closeOnEscapeArray = [];
  this.leftArray = [];
  this.contentUrlArray = [];
  this.contentUrlIFrameTitleArray = [];
  this.iframeLoadingArray = [];
  this.iframeAdjustingPostponedArray = [];
  this.isResizedArray = [];
  this.zIndexArray = [];
  this.topArray = [];
  this.shownArray = [];
  this.heightArray = [];
  this.widthArray = [];
  this.widthFromServer = false;
  this.widthFromServerArray = [];
  this.minHeightArray = [];
  this.minWidthArray = [];
  this.maxHeightArray = [];
  this.maxWidthArray = [];
  this.hideBodyScrollWhenModal = true;
  this.hideBodyScrollWhenModalArray = [];
  this.hideBodyScrollWhenMaximized = true;
  this.canScrollViewPort = false;
  this.canScrollViewPortArray = [];
  this.autoUpdatePositionArray = [];
  this.cachedSizeArray = [];
  this.enableContentScrollingArray = [];
  this.contentOverflowXArray = [];
  this.contentOverflowYArray = [];
  this.isPinned = false;
  this.isPinnedArray = [];
  this.pinX = 0;
  this.pinXArray = [];
  this.pinY = 0;
  this.pinYArray = [];
  this.lockScroll = 0;
  this.isCollapsed = false;
  this.isCollapsedArray = [];
  this.isCollapsedInit = false;
  this.isCollapsedInitArray = [];
  this.collapseExecutingLockCount = 0;
  this.isMaximized = false;
  this.isMaximizedArray = [];
  this.isMaximizedInit = false;
  this.isMaximizedInitArray = [];
  this.maximizationExecutingLockCount = 0;
  this.restoredWindowValues = {};
  this.restoredWindowValuesArray = [];
  this.browserResizingForMaxWindowLockCount = 0;
  this.updateRestoredWindowSizeLockCount = 0;
  this.touchUIScrollers = {};
  this.adaptivityEnabled = false;
  this.DefaultModalMaxWidth = 500;
  this.DefaultModalMinWidth = 0;
  this.stretchVertically = false;
  this.stretchVerticallyArray = [];
  this.fixedHeader = true;
  this.fixedHeaderArray = [];
  this.fixedFooter = true;
  this.fixedFooterArray = [];
  this.modalMinHeight = null;
  this.modalMinHeightArray = [];
  this.modalMinWidth = null;
  this.modalMinWidthArray = [];
  this.modalMaxHeight = null;
  this.modalMaxHeightArray = [];
  this.modalMaxWidth = null;
  this.modalMaxWidthArray = [];
  this.modalVerticalAlign = ModalAlign.WindowTop;
  this.modalHorizontalAlign = ModalAlign.WindowCenter;
  this.adaptiveModalMode = false;
  this.adaptiveModalModeArray = [];
  this.switchAtWindowInnerWidth = ASPx.MaxMobileWindowWidth;
  this.PinnedChanged = new ASPxClientEvent();
  this.AdaptiveModeChanged = new ASPxClientEvent();
 },
 SetData: function(data){
  if(data.windows)
   this.CreateWindows(data.windows);
 },
 InlineInitialize: function() {
  ASPxClientControl.prototype.InlineInitialize.call(this);
  this.InitializeArrayCores();
 },
 Initialize: function() {
  ASPxClientPopupControlBase.prototype.Initialize.call(this);
  aspxGetPopupControlCollection().EnsureSaveScrollState();
  if(this.HasDefaultWindow())
   this.InitializeWindow(-1);
  for(var i = 0; i < this.GetWindowCount() ; i++)
   this.InitializeWindow(i);
  this.InitializeScrollbars();
 },
 InitializeEnableContentScrolling: function() {
  for(var windowIndex = 0; windowIndex < this.GetWindowCount() ; windowIndex++) {
   var contentOverflowX = this.GetWindowOverflowX(windowIndex);
   var contentOverflowY = this.GetWindowOverflowY(windowIndex);
   this.enableContentScrollingArray.push(contentOverflowX != "None" || contentOverflowY != "None");
  }
  ASPxClientPopupControlBase.prototype.InitializeEnableContentScrolling.call(this);
 },
 InitializeScrollbars: function() {
  if(!ASPx.Browser.WebKitTouchUI && !ASPx.Browser.MSTouchUI && (!ASPx.Browser.WindowsPhonePlatform || !ASPx.Browser.IE))
   return;
  this.ForEachWindow(function(windowIndex) {
   if(this.GetEnableContentScrolling(windowIndex)) {
    var scrollElement = this.getTouchScrollerElement(windowIndex);
    if(scrollElement) {
     if(ASPx.Browser.MSTouchUI)
      scrollElement.style.touchAction = "auto";
     else {
      var options = this.GetWindowTouchScrollOptions(windowIndex);
      if(!this.HasIframeOnIos(windowIndex))
       this.touchUIScrollers[windowIndex] = ASPx.TouchUIHelper.MakeScrollable(scrollElement, options);
     }
    }
   }
  }.aspxBind(this));
 },
 GetWindowTouchScrollOptions: function (index) {
  var contentOverflowX = this.GetWindowOverflowX(index),
   contentOverflowY = this.GetWindowOverflowY(index);
  return {
   showHorizontalScrollbar: contentOverflowX === "Auto" || contentOverflowX === "Scroll",
   showVerticalScrollbar: contentOverflowY === "Auto" || contentOverflowY === "Scroll"
  };
 },
 ForEachWindow: function(callback) {
  var indices = [];
  if(this.HasDefaultWindow())
   indices.push(-1);
  else {
   for(var i = 0; i < this.GetWindowCount(); i++)
    indices.push(i);
  }
  ASPx.Data.ForEach(indices, callback);
 },
 GetMainElementId: function() {
  return null;
 },
 preventParentOverlowOnIos: function(index) {
  if(!ASPx.Browser.MacOSMobilePlatform) return;
  var parent = this.getParentPopupControl(index);
  if(parent) 
   parent.popupControl.changeContentOverflow(parent.windowIndex);
 },
 restoreParentOverflowOnIos: function(index) {
  if(!ASPx.Browser.MacOSMobilePlatform) return;
  var parent = this.getParentPopupControl(index);
  if(parent) 
   parent.popupControl.restoreContentOverflow(parent.windowIndex);
 },
 changeContentOverflow: function(index) {
  var scrollerElement = this.getTouchScrollerElement(index);
  if(!scrollerElement) return;
  ASPx.Attr.ChangeStyleAttribute(scrollerElement, "overflow", "visible");
  ASPx.Attr.ChangeStyleAttribute(scrollerElement, "overflowX", "visible");
  ASPx.Attr.ChangeStyleAttribute(scrollerElement, "overflowY", "visible");
 },
 restoreContentOverflow: function(index) {
  var scrollerElement = this.getTouchScrollerElement(index);
  if(!scrollerElement) return;
  ASPx.Attr.RestoreStyleAttribute(scrollerElement, "overflow");
  ASPx.Attr.RestoreStyleAttribute(scrollerElement, "overflowX");
  ASPx.Attr.RestoreStyleAttribute(scrollerElement, "overflowY");
 },
 UpdateScrollbar: function(index) {
  var touchUIScroller = this.touchUIScrollers[index];
  if(!touchUIScroller)
   return;
  var scrollElement = this.GetContentContainer(index);
  if(scrollElement)
   touchUIScroller.ChangeElement(scrollElement);
 },
 InitializeArrayCores: function() {
  if(this.GetWindowCountCore() > 0) {
   this.InitializeWindowPopupElementList();
   this.InitializeWindowPopupElementIDList();
   this.InitializeWindowLastUsedPopupElementInfoList();
   this.InitializeArray(this.shownArray);
   this.InitializeArray(this.windowsPopupReasonMouseEventList, null);
   this.InitializeArray(this.windowsIsPopupedList, false);
   this.InitializeArray(this.contentUrlArray, "");
   this.InitializeArray(this.contentUrlIFrameTitleArray, "");
   this.InitializeArray(this.popupActionArray, this.popupAction);
   this.InitializeArray(this.closeActionArray, this.closeAction);
   this.InitializeArray(this.showOnPageLoadArray, false);
   this.InitializeArray(this.isDraggedArray, false);
   this.InitializeArray(this.isPinnedArray, false);
   this.InitializeArray(this.isCollapsedArray, false);
   this.InitializeArray(this.isCollapsedInitArray, false);
   this.InitializeArray(this.isMaximizedArray, false);
   this.InitializeArray(this.isMaximizedInitArray, false);
   this.InitializeArray(this.restoredWindowValuesArray, {});
   this.InitializeArray(this.iframeAdjustingPostponedArray, {});
   this.InitializeArray(this.isResizedArray, false);
   this.InitializeArray(this.zIndexArray, -1);
   this.InitializeArray(this.leftArray, 0);
   this.InitializeArray(this.topArray, 0);
   this.InitializeArray(this.widthArray, constants.DEFAULT_WINDOW_WIDTH);
   this.InitializeArray(this.heightArray, constants.DEFAULT_WINDOW_HEIGHT);
   this.InitializeArray(this.widthFromServerArray, false);
   this.InitializeArray(this.pinXArray, 0);
   this.InitializeArray(this.pinYArray, 0);
   this.InitializeArray(this.minWidthArray, null);
   this.InitializeArray(this.minHeightArray, null);
   this.InitializeArray(this.maxWidthArray, null);
   this.InitializeArray(this.maxHeightArray, null);
   this.InitializeArray(this.cachedSizeArray, null);
   this.InitializeArray(this.iframeLoadingArray, false);
   this.InitializeArray(this.autoUpdatePositionArray, false);
   this.InitializeArray(this.hideBodyScrollWhenModalArray, true);
   this.InitializeArray(this.canScrollViewPortArray, false);
   this.InitializeArray(this.closeOnEscapeArray, this.closeOnEscape);
   this.InitializeArray(this.modalArray, false);
   this.InitializeArray(this.adaptiveModalModeArray, false);
   this.InitializeArray(this.fixedHeaderArray, true);
   this.InitializeArray(this.fixedFooterArray, true);
   this.InitializeArray(this.modalMinWidthArray, null);
   this.InitializeArray(this.modalMinHeightArray, null);
   this.InitializeArray(this.modalMaxWidthArray, null);
   this.InitializeArray(this.modalMaxHeightArray, null);
   this.InitializeArray(this.stretchVerticallyArray, false);
  }
 },
 InitializeArray: function(array, defaultValue) {
  if(array.length == 0) {
   for(var i = 0; i < this.GetWindowCountCore() ; i++)
    array[i] = defaultValue;
  }
 },
 InitializeWindowPopupElementIDList: function() {
  for(var i = 0; i < this.GetWindowCountCore() ; i++) {
   if(!this.windowsPopupElementIDList[i])
    this.windowsPopupElementIDList[i] = [];
  }
 },
 InitializeWindowPopupElementList: function() {
  for(var i = 0; i < this.GetWindowCountCore() ; i++) {
   if(!this.windowsPopupElementList[i])
    this.windowsPopupElementList[i] = [];
  }
 },
 InitializeWindowLastUsedPopupElementInfoList: function() {
  for(var i = 0; i < this.GetWindowCountCore() ; i++) {
   if(!this.windowsLastUsedPopupElementInfoList[i])
    this.windowsLastUsedPopupElementInfoList[i] = {};
  }
 },
 AllowMouseDown: function(evt, index) {
  return ASPxClientPopupControlBase.prototype.AllowMouseDown.call(this, evt, index) &&
   !this.PreventHeaderButtonMouseDownBubbling(evt, this.GetWindowPinButton(index)) &&
   !this.PreventHeaderButtonMouseDownBubbling(evt, this.GetWindowCollapseButton(index)) &&
   !this.PreventHeaderButtonMouseDownBubbling(evt, this.GetWindowMaximizeButton(index));
 },
 AssignHeaderButtonsEvents: function(index) {
  ASPxClientPopupControlBase.prototype.AssignHeaderButtonsEvents.call(this, index);
  this.AttachClickToHeaderButton(index, this.GetWindowPinButton(index), "ASPx.PWPBClick");
  this.AttachClickToHeaderButton(index, this.GetWindowCollapseButton(index), "ASPx.PWMNBClick");
  this.AttachClickToHeaderButton(index, this.GetWindowMaximizeButton(index), "ASPx.PWMXBClick");
 },
 InitializeWindow: function(index) {
  ASPxClientPopupControlBase.prototype.InitializeWindow.call(this, index);
  if(this.adaptivityEnabled) {
   ASPx.Evt.AttachEventToElement(this.GetModalWrapperElement(index), "scroll", function(e) { this.OnModalWrapperScroll(e, index); }.aspxBind(this));
   if(ASPx.Browser.WebKitTouchUI) {
    ASPx.Evt.AttachEventToElement(this.GetModalWrapperElement(index), "touchstart", function(e) { this.OnModalWrapperTouchStart(e); }.aspxBind(this));
    ASPx.Evt.AttachEventToElement(this.GetModalWrapperElement(index), "touchmove", function(e) { this.OnModalWrapperTouchMove(e, index); }.aspxBind(this));
   }
  } else {
   var modalElement = this.GetWindowModalElement(index);
   if(modalElement)
    ASPx.Evt.AttachEventToElement(modalElement, "mousedown", aspxPWMEMDown);
  }
 },
 BrowserWindowResizeSubscriber: function() {
  return true;
 },
 OnBrowserWindowResize: function(e) {
  window.setTimeout(this.SetPopupMaximizedPositionOnBrowserResize.aspxBind(this), 0);
  this.ForEachWindow(this.updateContentScrollIfNeeded.aspxBind(this));
 },
 SetPopupMaximizedPositionOnBrowserResize: function() {
  this.ForEachWindow(this.SetMaximizedPositionOnBrowserResize.aspxBind(this));
 },
 UpdateResizeCursor: function(index, element, verticalDirection, horizontalDirection) {
  if(this.GetAdaptiveModalMode(index))
   this.HideTemporaryCursor(element);
  else
   ASPxClientPopupControlBase.prototype.UpdateResizeCursor.call(this, index, element, verticalDirection, horizontalDirection);
 },
 SetMaximizedPositionOnBrowserResize: function(index) {
  var element = this.GetWindowElement(index);
  if(element && this.GetIsMaximized(index) && this.InternalIsWindowVisible(index)) {
   var left = this.GetMaximizedPosition(element, true);
   var top = this.GetMaximizedPosition(element, false);
   this.SetWindowPos(index, element, left, top);
  }
 },
 InitCollapsedWindows: function(index) {
  if((this.isCollapsedInit && index == -1) || (index >= 0 && index < this.isCollapsedInitArray.length && this.isCollapsedInitArray[index])) {
   if(this.InternalIsWindowVisible(index)) {
    this.DoCollapse(index, true);
    if(index == -1)
     this.isCollapsedInit = false;
    else
     this.isCollapsedInitArray[index] = false;
   }
  }
 },
 InitMaximizedWindows: function(index) {
  if(this.GetIsMaximizedInit(index) && this.InternalIsWindowVisible(index)) {
   this.DoMaximize(index, true);
   this.SetIsMaximizedInit(index, false);
  }
 },
 InitPinnedWindows: function(index) {
  if((this.isPinned && index == -1) || (index >= 0 && index < this.isPinnedArray.length && this.isPinnedArray[index]))
   this.HoldPosition(index, true);
 },
 AfterInitializeWindow: function(index) {
  if(this.contentOverflowX !== "None" && !this.GetWindowWidthFromServer(index))
   this.SetWindowWidth(index, 0);
  ASPxClientPopupControlBase.prototype.AfterInitializeWindow.call(this, index);
  this.InitPinnedWindows(index);
  this.InitMaximizedWindows(index);
  this.InitCollapsedWindows(index);
 },
 OnDragStop: function(index) {
  ASPxClientPopupControlBase.prototype.OnDragStop.call(this, index);
  if(this.adaptivityEnabled)
   ASPxClientPopupControl.WindowResizeHelper.Initialize(this.GetWindowElement(index));
  else
   this.updateContentScrollIfNeeded(index);
 },
 GetPropertyValue: function(index, propName) {
  if(0 <= index && index < this.GetWindowCountCore())
   return this[propName + "Array"][index];
  return ASPxClientPopupControlBase.prototype.GetPropertyValue.call(this, index, propName);
 },
 SetPropertyValue: function(index, propName, value) {
  if(0 <= index && index < this.GetWindowCountCore())
   this[propName + "Array"][index] = value;
  else
   ASPxClientPopupControlBase.prototype.SetPropertyValue.call(this, index, propName, value);
 },
 GetAdaptiveModalMode: function(index) {
  return this.GetPropertyValue(index, "adaptiveModalMode");
 },
 GetAutoUpdatePosition: function(index) {
  return this.GetPropertyValue(index, "autoUpdatePosition") && !this.GetAdaptiveModalMode(index);
 },
 SetAdaptiveModalMode: function(index, enabled) {
  ASPx.ToggleClassNameToElement(this.GetModalWrapperElement(index), this.GetModalSystemCssClass(), enabled);
  this.SetPropertyValue(index, "adaptiveModalMode", enabled);
 },
 GetIsPinned: function(index) {
  return this.GetPropertyValue(index, "isPinned");
 },
 SetIsPinned: function(index, value) {
  this.SetPropertyValue(index, "isPinned", value);
 },
 GetPinPosX: function(index) {
  return this.GetPropertyValue(index, "pinX");
 },
 SetPinPosX: function(index, pinX) {
  this.SetPropertyValue(index, "pinX", pinX);
 },
 GetPinPosY: function(index) {
  return this.GetPropertyValue(index, "pinY");
 },
 SetPinPosY: function(index, pinY) {
  this.SetPropertyValue(index, "pinY", pinY);
 },
 GetIsCollapsed: function(index) {
  return this.GetPropertyValue(index, "isCollapsed");
 },
 SetIsCollapsed: function(index, value) {
  this.SetPropertyValue(index, "isCollapsed", value);
 },
 GetIsMaximized: function(index) {
  return this.GetPropertyValue(index, "isMaximized");
 },
 GetIsMaximizedOnWebKitTouch: function(index) {
  return this.GetIsMaximized(index) && ASPx.Browser.WebKitTouchUI;
 },
 SetIsMaximized: function(index, value) {
  this.SetPropertyValue(index, "isMaximized", value);
 },
 GetIsMaximizedInit: function(index) {
  return this.GetPropertyValue(index, "isMaximizedInit");
 },
 SetIsMaximizedInit: function(index, value) {
  this.SetPropertyValue(index, "isMaximizedInit", value);
 },
 GetRestoredWindowData: function(index) {
  return ASPx.CloneObject(this.GetPropertyValue(index, "restoredWindowValues"));
 },
 GetEnableContentScrolling: function(index) {
  return this.GetPropertyValue(index, "enableContentScrolling");
 },
 GetWindowOverflowX: function(index) {
  return this.GetPropertyValue(index, "contentOverflowX");
 },
 GetWindowOverflowY: function(index) {
  return this.GetPropertyValue(index, "contentOverflowY");
 },
 SetRestoredWindowData: function(index, value) {
  this.SetPropertyValue(index, "restoredWindowValues", value);
 },
 GetWindowIsShown: function(index) {
  return this.GetPropertyValue(index, "shown");
 },
 SetWindowIsShown: function(index, shown) {
  this.SetPropertyValue(index, "shown", shown);
 },
 GetWindowWidthFromServer: function(index) {
  return this.GetPropertyValue(index, "widthFromServer");
 },
 GetHideBodyScrollWhenModal: function(index) {
  return this.GetPropertyValue(index, "hideBodyScrollWhenModal");
 },
 SetHideBodyScrollWhenModal: function(index, value) {
  this.SetPropertyValue(index, "hideBodyScrollWhenModal", value);
 },
 GetCanScrollViewPort: function(index) {
  return this.GetPropertyValue(index, "canScrollViewPort");
 },
 HasDefaultWindow: function() {
  return this.GetWindowCountCore() === 0;
 },
 GetWindowFooterHeightLite: function(index) {
  var footer = this.GetWindowFooterElement(index);
  if(footer)
   return footer.offsetHeight;
  return null;
 },
 SetWindowPopUpReasonMouseEvent: function(index, evt) {
  evt = ASPx.CloneObject(evt);
  if(evt === undefined)
   evt = null;
  if(0 <= index && index < this.GetWindowCountCore())
   this.windowsPopupReasonMouseEventList[index] = evt;
  this.defaultPopupReasonMouseEvent = evt;
 },
 GetPopUpReasonMouseEvent: function() {
  return this.GetWindowPopUpReasonMouseEvent(null);
 },
 GetWindowPopUpReasonMouseEvent: function(window) {
  var index = (window != null) ? window.index : -1;
  if(0 <= index && index < this.GetWindowCountCore())
   return this.windowsPopupReasonMouseEventList[index];
  return this.defaultPopupReasonMouseEvent;
 },
 GetWindowCountCore: function() {
  return (this.windows.length > 0) ? this.windows.length : this.windowCount;
 },
 SetClientModality: function(isModal) {
  this.SetWindowClientModality(-1, isModal);
 },
 SetWindowClientModality: function(index, isModal) {
  var modalElement = this.GetWindowModalElement(index);
  if(isModal && !ASPx.IsElementVisible(modalElement))
   this.DoShowWindowModalElement(index);
  if(!isModal && ASPx.IsElementVisible(modalElement)) {
   var element = this.GetWindowElement(index);
   this.DoHideWindowModalElement(element);
  }
 },
 GetWindowPinButton: function(index) {
  return ASPx.GetElementById(this.name + "_HPB" + index);
 },
 GetWindowCollapseButton: function(index) {
  return ASPx.GetElementById(this.name + "_HMNB" + index);
 },
 GetWindowMaximizeButton: function(index) {
  return ASPx.GetElementById(this.name + "_HMXB" + index);
 },
 GetWindowScrollDiv: function(index) {
  return this.GetWindowChild(index, "_CSD" + index);
 },
 GetWindowElementDisplayValue: function(windowHasAnyScrollbars, windowHeight) {
  return windowHasAnyScrollbars && windowHeight ? "block" : "table";
 },
 GetMainWindowWidth: function(index, noCache) {
  return this.GetClientWindowWidth(index, true, noCache);
 },
 GetClientWindowWidth: function(index, outerSize, noCache) {
  if(!noCache && (this.GetIsCollapsed(index) || this.GetIsMaximized(index))) {
   var cachedSize = this.GetWindowCachedSize(index);
   if(cachedSize != null)
    return cachedSize.width;
  }
  var element = this.GetWindowElement(index);
  if(element != null)
   return element.offsetWidth;
 },
 GetMainWindowHeight: function(index, noCache) {
  return this.GetClientWindowHeight(index, true, noCache);
 },
 GetClientWindowHeight: function(index, outerSize, noCache) {
  if(!noCache && (this.GetIsCollapsed(index) || this.GetIsMaximized(index))) {
   var cachedSize = this.GetWindowCachedSize(index);
   if(cachedSize != null)
    return cachedSize.height;
  }
  var element = this.GetWindowElement(index);
  if(element != null)
   return element.offsetHeight;
 },
 ShowModal: function() {
  this.ShowModalByIndex(-1);
 },
 ShowModalByIndex: function(index) {
  if(this.adaptivityEnabled) {
   this.SetAdaptiveModalMode(index, true);
   this.ResetModalStyles(index);
   this.ResetPopupStyles(index);
   this.DoShowModal(index, ASPx.InvalidPosition, ASPx.InvalidPosition, this.GetLastShownPopupElementIndex(index));
  }
 },
 DoShowWindowCore: function(index, x, y, popupElementIndex, closeOtherWindows, allowChangeZIndex, evt, closeOtherReason) {
  if(this.IsDOMDisposed()) return;
  this.SetWindowPopUpReasonMouseEvent(index, evt);
  if(this.adaptivityEnabled) {
   this.SetAdaptiveModalMode(index, this.NeedAdaptiveModalMode(index));
   this.ResetModalStyles(index);
   if(this.GetAdaptiveModalMode(index)) {
    this.ResetPopupStyles(index);
    this.DoShowModal(index, x, y, popupElementIndex);
    return;
   }
  }
  this.DoShowWindowAtPos(index, x, y, popupElementIndex, closeOtherWindows, allowChangeZIndex, evt, closeOtherReason);
 },
 NeedAdaptiveModalMode: function(index) {
  return window.innerWidth < this.GetSwitchAtWindowInnerWidth();
 },
 GetSwitchAtWindowInnerWidth: function() {
  return this.switchAtWindowInnerWidth;
 },
 GetModalSystemCssClass: function() {
  return "dxmodalSys";
 },
 DoShowWindowAtPos: function(index, x, y, popupElementIndex, closeOtherWindows, allowChangeZIndex, evt, closeOtherReason) {
  if(!this.isInitialized)
   this.PopulatePopupElements(index);
  var element = this.GetWindowElement(index);
  if(element != null && this.IsWindowElementsIDAssigned(index)) {
   this.StopCloseAnimation(index);
   this.PrepareToAdjustContentOnShow(index);
   if(closeOtherWindows)
    aspxGetPopupControlCollection().DoHideAllWindows(element, this.GetWindowElementId(index), false, closeOtherReason, 0);
   var isMoving = this.InternalIsWindowVisible(index);
   ASPx.SetElementDisplay(element, true);
   element.style.display = this.GetWindowElementDisplayValue(this.HasAnyScrollBars(index), this.GetPopupWindowDimensionFromCache(index, false));
   element.style.position = "absolute";
   var scrollDiv = this.GetWindowScrollDiv(index),
    shouldResetScrollSize = scrollDiv && this.GetEnableContentScrolling(index) && ASPx.GetDocumentMaxClientHeight() <= element.offsetHeight,
    savedScrollDivHeight = shouldResetScrollSize && scrollDiv.style.height;
   if(shouldResetScrollSize)
    scrollDiv.style.height = 0;
   this.RestoreWindowSizeFromCache(index);
   if(!this.GetWindowIsShown(index)) {
    var width = this.GetPopupWindowDimensionFromCache(index, true),
     height = this.GetPopupWindowDimensionFromCache(index, false);
    this.SetClientWindowSizeCoreLite(index, width, height);
    this.SetWindowIsShown(index, true);
   }
   var popupElement = this.GetPopupElement(index, popupElementIndex);
   if(popupElement)
    this.SetLastShownPopupElementIndex(index, popupElementIndex);
   if(this.GetIsMaximized(index)) {
    if(this.hideBodyScrollWhenMaximized)
     ASPx.PopupUtils.BodyScrollHelper.HideBodyScroll(element.id);
    this.NormalizeMaximizedWindowSize(index);
   }
   var isDragged = this.GetIsDragged(index);
   var horizontalPopupPosition = this.GetClientPopupPos(element, popupElement, x, true, isDragged);
   var verticalPopupPosition = this.GetClientPopupPos(element, popupElement, y, false, isDragged);
   var clientX = horizontalPopupPosition.position;
   var clientY = verticalPopupPosition.position;
   this.SetWindowPos(index, element, clientX, clientY);
   if(shouldResetScrollSize)
    scrollDiv.style.height = savedScrollDivHeight;
   this.DoShowWindowModalElement(index);
   this.SetVisibleWithAnimation(element, isMoving, index, horizontalPopupPosition, verticalPopupPosition);
   this.ShowWindowContentUrl(index);
   this.AdjustContentOnShow(index);
   scrollDiv = this.GetWindowScrollDiv(index);
   if(scrollDiv && this.GetEnableContentScrolling(index)) {
    var dimension = null;
    var windowMainCell = this.GetWindowMainCell(element);
    if(windowMainCell.style.width && windowMainCell.style.height)
     dimension = 'both';
    else if(windowMainCell.style.width)
     dimension = 'width';
    else if(windowMainCell.style.height)
     dimension = 'height';
    if(!dimension)
     return;
    ASPx.SetElementDisplay(scrollDiv, false);
    this.SetWindowScrollDivSize(scrollDiv, index, dimension);
    ASPx.SetElementDisplay(scrollDiv, true);
   }
   this.registerAndActivateWindow(element, index, allowChangeZIndex);
   this.RaisePopupOnShow(isMoving, index);
   this.CorrectWindowSizeGripPositionLite(index);
   this.CorrectWindowHeaderText(index);
   this.InitMaximizedWindows(index);
   this.InitCollapsedWindows(index);
   if(this.GetIsPinned(index)) window.setTimeout(function() { this.HoldPosition(index, true); }.aspxBind(this), 0);
   if(!this.GetShowOnPageLoad(index))
    this.CorrectElementVerticalAlignment(ASPx.AdjustVerticalMarginsInContainer, this.GetWindowHeaderElement(index));
   if(element.style.width.indexOf("px") > -1) {
    element.style.width = ASPx.GetCurrentStyle(element).width;
   }
   this.updateContentScrollIfNeeded(index);
  }
 },
 DoShowModal: function(index, x, y, popupElementIndex) {
  var element = this.GetWindowElement(index);
  if(element != null) {
   this.StopCloseAnimation(index);
   this.EnsureIframeOnIosContentOverflow(index);
   this.PrepareToAdjustContentOnShow(index);
   if(!ASPx.Browser.WebKitTouchUI)
    ASPx.PopupUtils.BodyScrollHelper.HideBodyScroll(element.id);
   this.DoShowWindowModalElement(index);
   var isMoving = this.InternalIsWindowVisible(index);
   ASPx.SetElementDisplay(this.GetModalWrapperElement(index), true);
   this.ResetScroll(index);
   ASPx.SetElementDisplay(element, true);
   this.SetSizeBeforeShow(index);
   this.UpdateAlignment(index);
   var popupElement = this.GetPopupElement(index, popupElementIndex);
   if(popupElement)
    this.SetLastShownPopupElementIndex(index, popupElementIndex);
   this.SetContentElementsAdaptiveDisplayStyle(index);
   var horizontalPopupPosition = this.GetClientPopupPos(element, popupElement, x, true, false),
    verticalPopupPosition = this.GetClientPopupPos(element, popupElement, y, false, false);
   this.SetVisibleWithAnimation(element, isMoving, index, horizontalPopupPosition, verticalPopupPosition);
   this.ShowWindowContentUrl(index);
   this.AdjustContentOnShow(index);
   this.registerAndActivateWindow(element, index, true);
   this.RaisePopupOnShow(isMoving, index);
   this.CorrectWindowHeaderText(index);
   if(!this.GetShowOnPageLoad(index))
    this.CorrectElementVerticalAlignment(ASPx.AdjustVerticalMarginsInContainer, this.GetWindowHeaderElement(index));
  }
 },
 EnsureIframeOnIosContentOverflow: function(index) {
  if(this.HasIframeOnIos(index)) {
   var contentElement = this.GetWindowContentElement(index);
   if(contentElement.style.overflow === "")
    contentElement.style.overflow = "auto";
  }
 },
 SetWindowElementZIndex: function(element, zIndex) {
  ASPxClientPopupControlBase.prototype.SetWindowElementZIndex.call(this, element, zIndex);
  if(this.adaptivityEnabled)
   this.SetModalWrapperZIndex(this.GetWindowIndex(element), zIndex);
  else
   this.updateContentScrollIfNeeded(this.GetWindowIndex(element));
 },
 SetModalWrapperZIndex: function(index, zIndex) {
  if(!this.GetAdaptiveModalMode(index)) return;
  ASPx.SetStyles(this.GetModalWrapperElement(index), {
   zIndex: zIndex
  });
 },
 updateContentScrollIfNeeded: function(index) {
  var windowElement = this.GetWindowElement(index);
  var wrapper = this.getWindowWrapper(windowElement);
  var wrapperScroll = this.getWindowWrapperScroll(windowElement);
  if(!wrapper || !this.WindowIsModal(index) || !this.GetHideBodyScrollWhenModal(index))
   return;
  ASPx.PopupUtils.adjustViewportScrollWrapper(wrapper, wrapperScroll, windowElement);
 },
 getWindowWrapper: function(windowElement) {
  return ASPx.GetParentByClassName(windowElement, PopupControlCssClasses.WindowWrapperCssClassName);
 },
 getWindowWrapperScroll: function(windowElement) {
  return ASPx.GetParentByClassName(windowElement, PopupControlCssClasses.WindowWrapperScrollCssClassName);
 },
 SizeCanBeSet: function(index, isWindowMaximizedAndCollapsed) {
  return ASPxClientPopupControlBase.prototype.SizeCanBeSet.call(this, index, isWindowMaximizedAndCollapsed) && !this.GetAdaptiveModalMode(index);
 },
 GetPopupWindowDimensionFromCache: function(index, isWidth) {
  var dimension;
  if(isWidth) {
   dimension = this.GetWindowWidthInternal(index);
   if(ASPx.IsExists(dimension)) {
    dimension = Math.max(dimension, this.GetWindowMinWidth(index));
    var maxWidth = this.GetWindowMaxWidth(index);
    if(maxWidth)
     dimension = Math.min(dimension, maxWidth);
   }
  }
  else {
   dimension = this.GetWindowHeightInternal(index);
   if(ASPx.IsExists(dimension)) {
    if(this.HasAnyScrollBars(index) && dimension === constants.DEFAULT_WINDOW_HEIGHT)
     return undefined;
    dimension = Math.max(dimension, this.GetWindowMinHeight(index));
    var maxHeight = this.GetWindowMaxHeight(index);
    if(maxHeight)
     dimension = Math.min(dimension, maxHeight);
   }
  }
  return dimension;
 },
 NormalizeMaximizedWindowSize: function(index) {
  var width = this.GetPopupWindowDimensionFromCache(index, true),
   height = this.GetPopupWindowDimensionFromCache(index, false),
   dimensions = this.getDocumentDimensions(index),
   sizeNormalizationIsNeeded = width < dimensions.width || height < dimensions.height;
  if(sizeNormalizationIsNeeded)
   this.NormalizeWindowSize(index, true);
 },
 NormalizeWindowSize: function(index, isMaximized) {
  var width = this.GetClientWindowWidth(index),
   height = this.GetClientWindowHeight(index),
   normWidth = width,
   normHeight = height,
   maxWidth = this.GetWindowMaxWidth(index),
   minWidth = this.GetWindowMinWidth(index),
   maxHeight = this.GetWindowMaxHeight(index),
   minHeight = this.GetWindowMinHeight(index);
  if(maxWidth)
   normWidth = Math.min(normWidth, maxWidth);
  if(minWidth)
   normWidth = Math.max(normWidth, minWidth);
  if(maxHeight)
   normHeight = Math.min(normHeight, maxHeight);
  if(minHeight)
   normHeight = Math.max(normHeight, minHeight);
  if(normWidth !== width || normHeight !== height)
   this.SetWindowSize(this.GetWindow(index), normWidth, normHeight);
  if(isMaximized) {
   var dimensions = this.getDocumentDimensions(index);
   if(this.GetIsCollapsed(index)) {
    if(normWidth != dimensions.width) {
     this.SetWindowSizeByIndexCore(index, dimensions.width, normHeight, true);
    }
   } else {
    if(normWidth != dimensions.width || normHeight != dimensions.height) {
     this.SetWindowSizeByIndexCore(index, dimensions.width, dimensions.height, false);
    }
   }
  }
 },
 DoShowWindowModalElement: function(index) {
  if(this.CanManipulateWithModalElement(index)) {
   if(this.adaptivityEnabled) {
    this.DoShowWindowModalElementWithAdaptivity(index);
    return;
   }
   var modalElement = this.GetWindowModalElement(index);
   var bodyScrollHasJustBeingHidden = false;
   if(this.GetHideBodyScrollWhenModal(index) && (!this.IsWindowVisible(this.GetWindow(index)) || !ASPx.IsElementVisible(modalElement))) {
    bodyScrollHasJustBeingHidden = true;
    aspxGetPopupControlCollection().LockWindowResizeByBodyScrollVisibilityChanging();
    if(!ASPx.Browser.WebKitTouchUI)
     ASPx.PopupUtils.BodyScrollHelper.HideBodyScroll(this.GetWindowElementId(index));
   }
   ASPx.SetElementDisplay(modalElement, true);
   this.AdjustModalElementBounds(modalElement);
   this.SetModalElementVisibilityWithAnimation(modalElement, index);
   aspxGetPopupControlCollection().RegisterVisibleModalElement(modalElement);
   if(bodyScrollHasJustBeingHidden)
    aspxGetPopupControlCollection().UnlockWindowResizeByBodyScrollVisibilityChanging();
  }
 },
 DoShowWindowModalElementWithAdaptivity: function(index) {
  var overlayElement = this.GetOverlayElement(index);
  if(!overlayElement) return;
  ASPx.SetStyles(overlayElement, {
   right: 0,
   bottom: 0,
   width: "",
   height: ""
  });
  ASPx.SetElementDisplay(overlayElement, true);
  this.SetModalElementVisibilityWithAnimation(overlayElement, index);
  ASPx.GetPopupControlCollection().RegisterVisibleModalElement(overlayElement);
 },
 SetSizeBeforeShow: function(index) {
  if(this.GetModalMaxWidth(index) && this.GetModalMaxWidth(index) !== this.DefaultModalMaxWidth)
   this.SetAdaptiveMaxWidthByIndex(index, this.GetModalMaxWidth(index));
  if(this.GetModalMinWidth(index) !== this.DefaultModalMinWidth)
   this.SetAdaptiveMinWidthByIndex(index, this.GetModalMinWidth(index));
  this.UpdateHeightDimensions(index);
 },
 UpdateHeightDimensions: function(index) {
  this.UpdateAdaptiveMinHeight(index);
  this.UpdateAdaptiveMaxHeight(index);
 },
 UpdateAdaptiveMinHeight: function(index) {
  if(this.GetModalMinHeight(index) !== null)
   this.SetAdaptiveHeightDimension(index, "minHeight", this.GetModalMinHeight(index));
 },
 UpdateAdaptiveMaxHeight: function(index) {
  if(this.GetModalMaxHeight(index) !== null)
   this.SetAdaptiveHeightDimension(index, "maxHeight", this.GetModalMaxHeight(index));
 },
 GetClientPopupPos: function(element, popupElement, pos, isX, isDragged) {
  if(!this.GetAdaptiveModalMode(this.GetWindowIndex(element)))
   return ASPxClientPopupControlBase.prototype.GetClientPopupPos.call(this, element, popupElement, pos, isX, isDragged);
  var getPosFunc = isX ? ASPx.GetAbsolutePositionX : ASPx.GetAbsolutePositionY;
  return { position: getPosFunc(element) };
 },
 GetAnimationVerticalDirection: function(index, verticalPopupPosition) {
  if(!this.GetAdaptiveModalMode(index))
   return ASPxClientPopupControlBase.prototype.GetAnimationVerticalDirection.call(this, index, verticalPopupPosition);
  return ASPxClientPopupControl.Animation.GetVerticalDirection(this.modalVerticalAlign, this.modalHorizontalAlign);
 },
 GetAnimationHorizontalDirection: function(index, horizontalPopupPosition) {
  if(!this.GetAdaptiveModalMode(index))
   return ASPxClientPopupControlBase.prototype.GetAnimationHorizontalDirection.call(this, index, horizontalPopupPosition);
  return ASPxClientPopupControl.Animation.GetHorizontalDirection(this.modalHorizontalAlign);
 },
 GetDefaultVerticalOffset: function() {
  return this.IsSmallDisplay() ? 10 : 30;
 },
 IsSmallDisplay: function() {
  return window.innerWidth < this.GetScreenLimitForCss();
 },
 GetScreenLimitForCss: function() {
  return ASPx.MaxMobileWindowWidth;
 },
 StartAutoAnimation: function(element, index, horizontalPopupPosition, verticalPopupPosition) {
  if(this.adaptivityEnabled) {
   if(this.NeedFadeAnimation(index, this.popupAnimationType))
    this.StartFadeAnimation(element, index);
   else
    this.StartSlideAnimation(element, index, horizontalPopupPosition, verticalPopupPosition);
  } else 
   ASPxClientPopupControlBase.prototype.StartAutoAnimation.call(this, element, index, horizontalPopupPosition, verticalPopupPosition);
 },
 DoHideWindowWithAutoAnimation: function(index, element, closeReason) {
  if(this.NeedFadeAnimation(index, this.closeAnimationType))
   this.DoHideWindowWithFadeAnimation(index, element, closeReason);
  else
   this.DoHideWindowWithSlideAnimation(index, closeReason);
 },
 IsDraggingAllowed: function(index) {
  return this.allowDragging && (!this.GetAdaptiveModalMode(index) || this.allowDraggingInAdaptiveMode);
 },
 IsResizeAllowed: function(index) {
  return ASPxClientPopupControlBase.prototype.IsResizeAllowed.call(this, index) && !this.GetAdaptiveModalMode(index);
 },
 IsFadeCloseAnimation: function(index) {
  return ASPxClientPopupControlBase.prototype.IsFadeCloseAnimation.call(this, index) || this.NeedFadeAnimation(index, this.closeAnimationType);
 },
 NeedFadeAnimation: function(index, animationType) {
  return ASPxClientPopupControl.Animation.NeedFadeAnimation(this.modalHorizontalAlign, this.modalVerticalAlign,
   animationType, this.popupHorizontalAlign, this.popupVerticalAlign, this.GetAdaptiveModalMode(index));
 },
 AllowModalElementAnimation: function(index) {
  if(this.GetAdaptiveModalMode(index))
   return this.HasOpenAnimation();
  return ASPxClientPopupControlBase.prototype.AllowModalElementAnimation.call(this, index);
 },
 DoHideWindowCore: function(index, closeReason) {
  var element = this.GetWindowElement(index);
  if(element != null) {
   if(this.HasCloseAnimation())
    this.PrepareElementAfterCloseAnimation(index, element);
   element.isHiding = true;
   element.style.zIndex = this.GetDefaultZIndexFromServer();
   this.SetIsDragged(index, false);
   this.UpdateWindowsStateCookie();
   element.isHiding = false;
   this.StopShowAnimation(index);
   if(ASPx.Browser.WebKitTouchUI || ASPx.Browser.Safari) {
    var dummy = element.offsetWidth; 
   }
   ASPx.SetElementDisplay(element, false);
   ASPx.SetElementVisibility(element, false);
   if(this.adaptivityEnabled) {
    ASPx.SetElementDisplay(this.GetModalWrapperElement(index), "");
    if(!ASPx.Browser.WebKitTouchUI)
     ASPx.PopupUtils.BodyScrollHelper.RestoreBodyScroll(element.id);
    this.SetWrapperScrollVisible(index, true);
    this.SetIsDragged(index, false);
   }
   if(this.hideBodyScrollWhenMaximized && this.GetIsMaximized(index))
    ASPx.PopupUtils.BodyScrollHelper.RestoreBodyScroll(element.id);
   this.DoHideWindowModalElement(element, closeReason);
   this.DoHideWindowIFrame(element);
   aspxGetPopupControlCollection().UnregisterVisibleWindow(element);
   this.ProcessAccessibleElementOnHide();
   this.HideWindowLoadingPanel(index);
  }
 },
 OnAnimationStop: function(index) {
  if(this.adaptivityEnabled) {
   this.SetWrapperScrollVisible(index, true);
   this.UnlockWrapperScrollEventEvent();
  }
  ASPxClientPopupControlBase.prototype.OnAnimationStop.call(this, index);
  if(!this.adaptivityEnabled && ASPx.Browser.Firefox)
   this.GetWindowElement(index).style.display = "table";
 },
 ResetModalStyles: function(index) {
  var element = this.GetWindowElement(index);
  if(element != null) {
   ASPx.SetStyles(element, {
    minWidth: "",
    maxWidth: "",
    marginTop: "",
    marginLeft: "",
    marginRight: "",
    position: ""
   });
   ASPx.SetStyles(this.GetWindowContentElement(index), {
    minHeight: "",
    maxHeight: "",
   });
   this.FixateFooter(index, false, 0);
   this.FixateHeader(index, false, 0);
   this.SetIsDragged(false);
   this.DoHideWindowModalElement(element);
  }
 },
 ResetPopupStyles: function(index) {
  var element = this.GetWindowElement(index);
  if(element != null) {
   ASPx.SetStyles(element, {
    left: "",
    top: "",
    width: "",
    height: "",
   });
   ASPx.SetStyles(this.GetWindowContentWrapperElement(index), {
    height: "",
    width: "",
    display: ""
   });
   ASPx.SetStyles(this.GetWindowContentElement(index), {
    display: "",
    width: "",
    height: ""
   });
   this.SetWindowIsShown(index, false);
  }
 },
 InitDivPosForHideSlideAnimation: function(animationDivElement) {
  ASPx.PopupUtils.InitAnimationDivCore(animationDivElement);
 },
 DoHideWindow: function(index, dontRaiseClosing, closeReason) {
  var cancel = ASPxClientPopupControlBase.prototype.DoHideWindow.call(this, index, dontRaiseClosing, closeReason);
  this.updateContentScrollIfNeeded(index);
  return cancel;
 },
 OnWindowShown: function(windowIndex) {
  this.EnsureContent(windowIndex, false);
  this.EnsureIFrameHeightAdjusted(windowIndex);
  if(this.GetAdaptiveModalMode(windowIndex))
   this.ChangeFooterFixed(windowIndex);
  else {
   var isMaximized = this.GetIsMaximized(windowIndex);
   if(isMaximized || this.HasAnyScrollBars(windowIndex))
    this.NormalizeWindowSize(windowIndex, isMaximized);
  }
  this.RaiseShown(windowIndex);
  var loadingElementsWillNotBeShown = !this.lpTimers[windowIndex] || this.lpTimers[windowIndex] < 0;
  if(this.InWindowCallback(windowIndex) && loadingElementsWillNotBeShown) {
   this.ShowWindowLoadingElementsInternal(windowIndex);
  }
  if(this.GetAdaptiveModalMode(windowIndex))
   this.UpdateAdaptiveMinHeight(windowIndex);
 },
 SetWrapperScrollVisible: function(index, visible) {
  if(!this.GetAdaptiveModalMode(index)) return;
  var modalWrapper = this.GetModalWrapperElement(index);
  if(visible) {
   ASPx.Attr.RestoreStyleAttribute(modalWrapper, "overflow-x");
   ASPx.Attr.RestoreStyleAttribute(modalWrapper, "overflow-y");
  } else {
   if(this.modalVerticalAlign === ModalAlign.WindowBottom && this.GetWindowElement(index).offsetHeight <= window.innerHeight)
    ASPx.Attr.ChangeStyleAttribute(modalWrapper, "overflow-y", "hidden");
   if(this.modalHorizontalAlign === ModalAlign.WindowRight)
    ASPx.Attr.ChangeStyleAttribute(modalWrapper, "overflow-x", "hidden");
  }
 },
 GetDragCorrection: function(index, element, isX) {
  if(this.adaptivityEnabled) {
   var offset = isX ? element.offsetLeft : element.offsetTop;
   offset -= ASPx.PxToInt(element.style[isX ? "left" : "top"]);
   return ASPx.GetPositionElementOffset(this.GetModalWrapperElement(index), isX) + offset;
  } else
   return ASPxClientPopupControlBase.prototype.GetDragCorrection.call(this, index, element, isX);
 },
 GetSlideAnimationDuration: function(index) {
  return !this.GetAdaptiveModalMode(index) ? ASPxClientPopupControlBase.prototype.GetSlideAnimationDuration.call(this, index) : 300;
 },
 GetSlideOffsetCoefficient: function(index) {
  return !this.GetAdaptiveModalMode(index) ? ASPxClientPopupControlBase.prototype.GetSlideOffsetCoefficient.call(this, index) : 0.25;
 },
 InitDivPosForShowSlideAnimation: function(index, animationDivElement, clientX, clientY, onAnimStopCallString) {
  if(!this.GetAdaptiveModalMode(index))
   ASPxClientPopupControlBase.prototype.InitDivPosForShowSlideAnimation.call(this, index, animationDivElement, clientX, clientY, onAnimStopCallString);
  else
   ASPx.PopupUtils.InitAnimationProperties(animationDivElement, onAnimStopCallString);
 },
 BeforeAnySlideAnimation: function(index) {
  this.FixateFooter(index, false, 0);
  this.FixateHeader(index, false, 0);
  this.SetWrapperScrollVisible(index, false);
 },
 StartSlideAnimation: function(animationDivElement, index, horizontalPopupPosition, verticalPopupPosition) {
  if(this.adaptivityEnabled) {
   this.LockWrapperScrollEvent();
   this.BeforeAnySlideAnimation(index);
  }
  ASPxClientPopupControlBase.prototype.StartSlideAnimation.call(this, animationDivElement, index, horizontalPopupPosition, verticalPopupPosition);
 },
 DoHideWindowWithSlideAnimation: function(index, closeReason) {
  if(this.adaptivityEnabled)
   this.BeforeAnySlideAnimation(index);
  ASPxClientPopupControlBase.prototype.DoHideWindowWithSlideAnimation.call(this, index, closeReason);
 },
 UpdatePositionAfterCallback: function(windowIndex) {
  if(!this.InternalIsWindowVisible(windowIndex)) return;
  if(this.adaptivityEnabled)
   this.TryAutoUpdatePosition(windowIndex);
  else if(this.contentLoadingMode === LoadContentViaCallback.OnFirstShow)
   this.UpdateWindowPositionInternal(windowIndex, this.GetPopupElement(windowIndex, this.GetLastShownPopupElementIndex(windowIndex)));
 },
 CreateLoadingDiv: function(parentElement, offsetElement, windowIndex) {
  if(typeof (windowIndex) != "undefined") { 
   var loadingDiv = ASPxClientControl.prototype.CreateLoadingDiv.call(this, parentElement, offsetElement);
   loadingDiv.id += windowIndex;
   return loadingDiv;
  }
 },
 CreateLoadingPanelWithAbsolutePosition: function(parentElement, offsetElement, windowIndex) {
  if(typeof (windowIndex) != "undefined") { 
   var loadingPanel = ASPxClientControl.prototype.CreateLoadingPanelWithAbsolutePosition.call(this, parentElement, offsetElement);
   loadingPanel.id += windowIndex;
   return loadingPanel;
  }
 },
 PerformWindowCallback: function(window, parameter, onSuccess) {
  ASPxClientPopupControlBase.prototype.PerformWindowCallback.call(this, window, parameter, onSuccess);
 },
 SetIframeVisibleForDragging: function(index, visible) {
  var iframeElement = this.GetWindowContentIFrameElement(index);
  if(ASPx.Browser.Edge)
   iframeElement.style.pointerEvents = visible ? "" : "none";
  ASPx.SetElementVisibility(iframeElement, visible);
 },
 OnResizeStop: function(evt, index, cursor, resizePanel) {
  ASPxClientPopupControlBase.prototype.OnResizeStop.call(this, evt, index, cursor, resizePanel);
  if(this.IsResizeAllowed(index))
   this.SetWindowCachedSize(index, this.GetClientWindowWidth(index), this.GetClientWindowHeight(index));
  this.updateContentScrollIfNeeded(index);
 },
 OnMouseDownModalElement: function(evt, index) {
  aspxGetPopupControlCollection().DoHideAllWindows(ASPx.Evt.GetEventSource(evt), "", false, ASPxClientPopupControlCloseReason.OuterMouseClick, evt.offsetX);
  this.SetIsPopuped(index, true);
 },
 IsRaiseAfterResizingLocked: function() {
  return this.CollapseExecuting() || this.MaximizationExecuting();
 },
 GetContentElementChildren: function(index, contentElement) {
  var cache = this.GetResizeSessionCache();
  if(!cache.contentElementChildren || !cache.contentElementChildren[index]) {
   cache.contentElementChildren = [];
   cache.contentElementChildren[index] = contentElement.getElementsByTagName("*");
  }
  return cache.contentElementChildren[index];
 },
 GetContentElementChildrenScroll: function(index, contentElementChildren) {
  var cache = this.GetResizeSessionCache();
  if(!cache.contentElementChildrenScroll || !cache.contentElementChildrenScroll[index]) {
   cache.contentElementChildrenScroll = [];
   cache.contentElementChildrenScroll[index] = [];
   for(var i = 0, len = contentElementChildren.length; i < len; i++) {
    var child = contentElementChildren[i];
    if(!!child.scrollLeft || !!child.scrollTop)
     cache.contentElementChildrenScroll[index].push([i, child.scrollLeft, child.scrollTop]);
   }
  }
  return cache.contentElementChildrenScroll[index];
 },
 GetElementBordersAndPaddings: function(index, element, leftRight) {
  var cache = this.GetResizeSessionCache();
  if(!cache.elementBordersAndPaddings || !cache.elementBordersAndPaddings[index]) {
   cache.elementBordersAndPaddings = [];
   var style = ASPx.GetCurrentStyle(element);
   cache.elementBordersAndPaddings[index] = {
    leftRight: this.getLeftRightBordersAndPaddingsSummaryValue(element, style),
    topBottom: this.getTopBottomBordersAndPaddingsSummaryValue(element, style)
   };
  }
  return leftRight ? cache.elementBordersAndPaddings[index].leftRight : cache.elementBordersAndPaddings[index].topBottom;
 },
 GetHeaderFooterHeight: function(index) {
  var cache = this.GetResizeSessionCache();
  if(!cache.headerFooterHeight || !cache.headerFooterHeight[index]) {
   cache.headerFooterHeight = [];
   cache.headerFooterHeight[index] = this.GetHeaderFooterHeightCore(index);
  }
  return cache.headerFooterHeight[index];
 },
 getContentElementDisplay: function(correctContentElementSize, contentUrl) {
  return correctContentElementSize || contentUrl ? "block" : "table-cell";
 },
 SetContentWrapperHeightLite: function(index, actualHeight, windowElem, contentWrapper) {
  if(!windowElem.style.height || ASPx.IsPercentageSize(windowElem.style.height))
   return;
  var borderOwner = this.GetWindowBorderOwnerElement(windowElem);
  var height = borderOwner == windowElem ? actualHeight : actualHeight - (borderOwner ? ASPx.GetTopBottomBordersAndPaddingsSummaryValue(borderOwner) : 0);
  height -= this.GetHeaderFooterHeight(index);
  if(height > 0)
   contentWrapper.style.height = height + "px";
 },
 SetWindowScrollDivSize: function(scrollDiv, index, dimension) {
  var windowClientTable = this.GetWindowClientTable(index);
  var headerElement = this.GetWindowHeaderElement(index);
  var height = windowClientTable.offsetHeight;
  if(headerElement)
   height -= headerElement.offsetHeight;
  height -= this.GetWindowFooterHeightLite(index);
  if(dimension == 'height' || dimension == 'both')
   ASPx.SetOffsetHeight(scrollDiv, height);
  if(dimension == 'width' || dimension == 'both') {
   var width = windowClientTable.offsetWidth;
   var contentElement = this.GetWindowContentElement(index);
   width -= this.getLeftRightBordersAndPaddingsSummaryValue(scrollDiv) + ASPx.GetHorizontalBordersWidth(contentElement);
   if(width > -1)
    scrollDiv.style.width = width + "px";
  }
  scrollDiv.style.marginRight = "0px";
 },
 AdjustIFrameHeight: function(index, iframe) {
  ASPxClientPopupControlBase.prototype.AdjustIFrameHeight.call(this, index, iframe);
  if(!this.InternalIsWindowVisible(index) || !iframe || this.GetAdaptiveModalMode(index)) return;
  this.SetIframeAdjustingPostponed(index, false);
  var content = this.GetContentContainer(index);
  var contentWrapper = this.GetWindowContentWrapperElement(index);
  iframe.style.verticalAlign = "text-bottom";
  var iframeHeight = contentWrapper.offsetHeight - ASPx.GetTopBottomBordersAndPaddingsSummaryValue(content);
  if(iframeHeight >= 0)
   iframe.style.height = iframeHeight + "px";
 },
 OnPinButtonClick: function(index) {
  var value = this.GetIsPinned(index);
  this.SetPinCore(index, !value);
 },
 SetPinCore: function(index, value) {
  if(this.GetIsPinned(index) != value) {
   this.SetIsPinned(index, value);
   this.HoldPosition(index, value);
   this.UpdateWindowsStateCookie();
   this.OnPinned(index, value);
  }
 },
 OnPinned: function(index, pinned) {
  this.RaisePinnedChanged(index, pinned);
 },
 HoldPosition: function(index, hold, element) {
  if(hold) {
   element = element || this.GetWindowElement(index);
   if(!element) return;
   var x = ASPx.GetAbsoluteX(element);
   var y = ASPx.GetAbsoluteY(element);
   scrollX = ASPx.GetDocumentScrollLeft();
   scrollY = ASPx.GetDocumentScrollTop();
   this.SetPinPosX(index, x - scrollX);
   this.SetPinPosY(index, y - scrollY);
  }
  this.UpdateHeaderButtonSelected(index, "GetWindowPinButton", hold);
  this.CheckHeaderCursor(index);
 },
 GetBodyWidth: function() {
  return aspxGetPopupControlCollection().GetSavedBodyWidth();
 },
 GetBodyHeight: function() {
  return aspxGetPopupControlCollection().GetSavedBodyHeight();
 },
 GetIsOutFromViewPort: function(index) {
  var element = this.GetWindowElement(index);
  if(!element) return false;
  var pinXTarget = this.GetPinPosX(index);
  var pinYTarget = this.GetPinPosY(index);
  var popupWindowWidth = this.GetClientWindowWidth(index);
  var docClientWidth = ASPx.GetDocumentClientWidth();
  var rightOutOffset = (pinXTarget + popupWindowWidth) - docClientWidth;
  var popupWindowHeight = this.GetClientWindowHeight(index);
  var docClientHeight = ASPx.GetDocumentClientHeight();
  var bottomOutOffset = (pinYTarget + popupWindowHeight) - docClientHeight;
  return (rightOutOffset > 0 || bottomOutOffset > 0);
 },
 needToHidePinnedOutFromViewPort: function(index) {
  return this.GetIsPinned(index) && this.GetIsOutFromViewPort(index);
 },
 AdjustPinPositionWhileScroll: function(index) {
  var element = this.GetWindowElement(index);
  if(!element) return;
  var x = ASPx.GetAbsoluteX(element);
  var y = ASPx.GetAbsoluteY(element);
  var scrollX = ASPx.GetDocumentScrollLeft();
  var scrollY = ASPx.GetDocumentScrollTop();
  var pinX = x - scrollX;
  var pinY = y - scrollY;
  var pinXTarget = this.GetPinPosX(index);
  var pinYTarget = this.GetPinPosY(index);
  if((pinX != pinXTarget) || (pinY != pinYTarget)) {
   this.lockScroll++;
   var xNew = pinXTarget + scrollX;
   var yNew = pinYTarget + scrollY;
   var bodyWidth = this.GetBodyWidth();
   var bodyHeight = this.GetBodyHeight();
   var popupWindowWidth = this.GetClientWindowWidth(index);
   var docClientWidth = ASPx.GetDocumentClientWidth();
   var rightOutOffset = (pinXTarget + popupWindowWidth) - docClientWidth;
   var popupWindowHeight = this.GetClientWindowHeight(index);
   var docClientHeight = ASPx.GetDocumentClientHeight();
   var bottomOutOffset = (pinYTarget + popupWindowHeight) - docClientHeight;
   var cancelScrollX = false;
   if(xNew + (popupWindowWidth - rightOutOffset) > bodyWidth) {
    xNew -= (xNew + (popupWindowWidth - rightOutOffset) - bodyWidth);
    cancelScrollX = true;
   }
   var cancelScrollY = false;
   if(yNew + (popupWindowHeight - bottomOutOffset) > bodyHeight) {
    yNew -= (yNew + (popupWindowHeight - bottomOutOffset) - bodyHeight);
    cancelScrollY = true;
   }
   xNew = ASPx.PrepareClientPosForElement(xNew, element, true);
   yNew = ASPx.PrepareClientPosForElement(yNew, element, false);
   this.SetWindowPos(index, element, xNew, yNew);
   if(cancelScrollX) {
    var scrollLeftMax = bodyWidth - ASPx.GetDocumentClientWidth();
    if((rightOutOffset > 0) && (scrollX > scrollLeftMax)) {
     this.lockScroll++;
     ASPx.SetDocumentScrollLeft(scrollLeftMax);
     this.lockScroll--;
    }
   }
   if(cancelScrollY) {
    var scrollTopMax = bodyHeight - ASPx.GetDocumentClientHeight();
    if((bottomOutOffset > 0) && (scrollY > scrollTopMax)) {
     this.lockScroll++;
     ASPx.SetDocumentScrollTop(scrollTopMax);
     this.lockScroll--;
    }
   }
   this.lockScroll--;
  }
 },
 OnCollapseButtonClick: function(index) {
  this.SetCollapsedCore(index, !this.GetIsCollapsed(index));
 },
 SetCollapsedCore: function(index, minimization) {
  if(this.GetIsCollapsed(index) == minimization) return;
  this.DoCollapse(index, minimization);
  this.OnCollapsed(index, minimization);
 },
 DoCollapse: function(index, minimization) {
  if(this.GetIsCollapsed(index) == minimization) return;
  this.StartCollapse();
  if(minimization) {
   var cachedWidth = this.GetClientWindowWidth(index);
   var cachedHeight = this.GetClientWindowHeight(index);
   var shouldUpdateRestoredSize = this.ShoulUpdatedRestoredWindowSizeOnCollapse(index);
   var width = this.GetMainWindowWidth(index, !shouldUpdateRestoredSize);
   var height = this.GetMainWindowHeight(index, !shouldUpdateRestoredSize);
   this.SetWindowSizeByIndex(index, width, 0);
   this.SetWindowContentVisible(index, false);
   this.SetWindowFooterVisible(index, false);
   this.ResetWindowHeight(index);
   this.SetIsCollapsed(index, minimization);
   this.SetWindowCachedSize(index, cachedWidth, cachedHeight);
   if(shouldUpdateRestoredSize)
    this.UpdateRestoredWindowSize(index, width, height);
  }
  else {
   if(this.MaximizationExecuting()) {
    var element = this.GetWindowElement(index);
    if(element) {
     element.style.left = ASPx.GetDocumentScrollLeft();
     element.style.top = ASPx.GetDocumentScrollTop();
    }
   }
   this.SetWindowContentVisible(index, true);
   this.SetWindowFooterVisible(index, true);
   this.SetIsCollapsed(index, minimization);
   if(this.GetIsMaximized(index)) {
    var documentClientWidth = ASPx.PopupUtils.GetDocumentClientWidthForPopup();
    var documentClientHeight = ASPx.PopupUtils.GetDocumentClientHeightForPopup();
    this.SetWindowSizeByIndex(index, documentClientWidth, documentClientHeight);
   } else {
    var restoredWindowData = this.GetRestoredWindowData(index);
    this.SetWindowSizeByIndex(index, restoredWindowData.width, restoredWindowData.height);
   }
   ASPx.GetControlCollection().AdjustControls(this.GetWindowElement(index));
  }
  this.UpdateHeaderButtonSelected(index, "GetWindowCollapseButton", minimization);
  this.EndCollapse();
  this.UpdateWindowsStateCookie();
 },
 ResetWindowHeight: function(index) {
  var element = this.GetWindowElement(index);
  if(element)
   element.style.height = "";
 },
 ShoulUpdatedRestoredWindowSizeOnCollapse: function(index) {
  return !this.GetIsMaximized(index);
 },
 OnCollapsed: function(index, value) {
  if(value)
   this.RaiseCollapsed(index);
  else
   this.RaiseExpanded(index);
  this.RaiseAfterResizing(index);
 },
 OnMaximizeButtonClick: function(index) {
  this.SetMaximizedCore(index, !this.GetIsMaximized(index));
 },
 SetMaximizedCore: function(index, maximization) {
  if(this.GetIsMaximized(index) == maximization) return;
  this.DoMaximize(index, maximization);
  this.OnMaximizedChanged(index, maximization);
 },
 GetMaximizedPosition: function(element, isX) {
  if(ASPx.Browser.WebKitTouchUI)
   return ASPx.PrepareClientPosForElement(0, element, isX);
  return ASPx.PrepareClientPosForElement(isX ? ASPx.GetDocumentScrollLeft() : ASPx.GetDocumentScrollTop(), element, isX);
 },
 PerformMaximaze: function (index, maximization, element) {
  if (this.hideBodyScrollWhenMaximized)
   ASPx.PopupUtils.BodyScrollHelper.HideBodyScroll(element.id);
  if (this.GetIsCollapsed(index))
   this.DoCollapse(index, false);
  var cachedWidth = this.GetClientWindowWidth(index);
  var cachedHeight = this.GetClientWindowHeight(index);
  var restoredWindowData = this.GetInitRestoredWindowData(index);
  var documentClientWidth = ASPx.PopupUtils.GetDocumentClientWidthForPopup();
  var documentClientHeight = ASPx.PopupUtils.GetDocumentClientHeightForPopup();
  var windowClientTable = this.GetWindowClientTable(index);
  var windowClientTableParent = windowClientTable.parentNode;
  childStyle = ASPx.GetCurrentStyle(windowClientTableParent);
  var left = this.GetMaximizedPosition(element, true);
  var top = this.GetMaximizedPosition(element, false);
  this.SetWindowPos(index, element, left, top);
  this.SetWindowSizeByIndex(index, documentClientWidth, documentClientHeight);
  this.SetWindowCachedSize(index, cachedWidth, cachedHeight);
  this.SetRestoredWindowData(index, restoredWindowData);
  this.SetIsMaximized(index, maximization);
 },
 PerformMinimize: function (index, maximization, element) {
  var restoredWindowData = this.GetRestoredWindowData(index);
  var width = restoredWindowData.width || this.GetMainWindowWidth(index);
  var height = restoredWindowData.height || this.GetMainWindowHeight(index);
  this.SetIsMaximized(index, maximization);
  var left = ASPx.PrepareClientPosForElement(restoredWindowData.left, element, true);
  var top = ASPx.PrepareClientPosForElement(restoredWindowData.top, element, false);
  this.SetWindowPos(index, element, left, top);
  this.SetWindowSizeByIndex(index, width, height);
  if (this.GetIsCollapsed(index)) {
   this.SetIsCollapsed(index, false);
   this.UpdateRestoredWindowSizeLock();
   this.DoCollapse(index, true);
   this.UpdateRestoredWindowSizeUnlock();
  }
  if (this.hideBodyScrollWhenMaximized)
   ASPx.PopupUtils.BodyScrollHelper.RestoreBodyScroll(element.id);
 },
 DoMaximize: function(index, maximization) {
  if(this.GetIsMaximized(index) == maximization) return;
  var element = this.GetWindowElement(index);
  if(!element) return;
  this.StartMaximization();
  if(maximization)
   this.PerformMaximaze(index, maximization, element);
  else
   this.PerformMinimize(index, maximization, element);
  if(this.GetIsPinned(index))
   this.HoldPosition(index, true, element);
  this.UpdateHeaderButtonSelected(index, "GetWindowMaximizeButton", maximization);
  this.EndMaximization();
  this.UpdateWindowsStateCookie();
  this.CheckHeaderCursor(index);
 },
 OnMaximizedChanged: function(index, value) {
  if(value)
   this.RaiseMaximized(index);
  else
   this.RaiseRestoredAfterMaximized(index);
  this.RaiseAfterResizing(index);
 },
 GetInitRestoredWindowData: function(index) {
  var restoredWindowData = this.GetRestoredWindowData(index);
  restoredWindowData.left = this.GetCurrentLeft(index);
  restoredWindowData.top = this.GetCurrentTop(index);
  restoredWindowData.width = this.GetMainWindowWidth(index);
  restoredWindowData.height = this.GetMainWindowHeight(index);
  return restoredWindowData;
 },
 getDocumentDimensions: function(index) {
  var documentClientWidth = ASPx.PopupUtils.GetDocumentClientWidthForPopup(),
   documentClientHeight = ASPx.PopupUtils.GetDocumentClientHeightForPopup();
  return { width: documentClientWidth, height: documentClientHeight };
 }, 
 UpdateMaximizedWindowSizeOnResize: function(index) {
  this.StartUpdateMaximizedWindowSizeOnResize();
  var dimensions = this.getDocumentDimensions(index);
  if(this.GetIsCollapsed(index)) dimensions.height = 0;
  this.SetWindowSizeByIndex(index, dimensions.width, dimensions.height);
  if(this.GetIsCollapsed(index)) {
   this.CorrectCollapsedSize(index);
  }
  window.setTimeout(function() { this.SetMaximizedWindowSizeAfterOnResize(index); }.aspxBind(this), 0);
  this.EndUpdateMaximizedWindowSizeOnResize();
 },
 SetMaximizedWindowSizeAfterOnResize: function(index) {
  this.StartUpdateMaximizedWindowSizeOnResize();
  var dimensions = this.getDocumentDimensions(index);
  windowWidthCurrent = this.GetMainWindowWidth(index, true);
  windowHeightCurrent = this.GetMainWindowHeight(index, true);
  if(this.GetIsCollapsed(index))
   dimensions.height = 0;
  if(dimensions.width != windowWidthCurrent || dimensions.height != windowHeightCurrent) {
   this.SetWindowSizeByIndex(index, dimensions.width, dimensions.height);
   if(this.GetIsCollapsed(index)) {
    this.CorrectCollapsedSize(index);
   }
  }
  this.EndUpdateMaximizedWindowSizeOnResize();
 },
 CorrectCollapsedSize: function(index) {
  var contentWrapper = this.GetWindowContentWrapperElement(index);
  if(contentWrapper && ASPx.IsElementVisible(contentWrapper))
   contentWrapper.style.display = 'none';
 },
 UpdateHeaderButtonSelected: function(index, methodGetWindowButton, flagSelected) {
  if(typeof (ASPx.GetStateController) != "undefined") {
   button = this[methodGetWindowButton](index);
   var method = flagSelected ? "SelectElementBySrcElement" : "DeselectElementBySrcElement";
   ASPx.GetStateController()[method](button);
  }
 },
 CheckHeaderCursor: function(index) {
  if(!this.allowDragging) return;
  var dragElement = this.GetDragElement(index);
  if(!dragElement) return;
  var styleCursor = dragElement.style.cursor;
  var isPinned = this.GetIsPinned(index);
  var isMaximized = this.GetIsMaximized(index);
  if((isPinned || isMaximized) && styleCursor != "default")
   dragElement.style.cursor = "default";
  else if(!isPinned && !isMaximized && styleCursor != "move")
   dragElement.style.cursor = "move";
 },
 StartCollapse: function() {
  this.collapseExecutingLockCount++;
 },
 EndCollapse: function() {
  this.collapseExecutingLockCount--;
 },
 CollapseExecuting: function() {
  return this.collapseExecutingLockCount > 0;
 },
 StartMaximization: function() {
  this.maximizationExecutingLockCount++;
 },
 EndMaximization: function() {
  this.maximizationExecutingLockCount--;
 },
 MaximizationExecuting: function() {
  return this.maximizationExecutingLockCount > 0;
 },
 StartUpdateMaximizedWindowSizeOnResize: function() {
  this.browserResizingForMaxWindowLockCount++;
 },
 EndUpdateMaximizedWindowSizeOnResize: function() {
  this.browserResizingForMaxWindowLockCount--;
 },
 ResizingForMaxWindowLocked: function() {
  return this.browserResizingForMaxWindowLockCount > 0;
 },
 UpdateRestoredWindowSizeLock: function() {
  this.updateRestoredWindowSizeLockCount++;
 },
 UpdateRestoredWindowSizeUnlock: function() {
  this.updateRestoredWindowSizeLockCount--;
 },
 UpdateRestoredWindowSizeLocked: function() {
  return this.updateRestoredWindowSizeLockCount > 0;
 },
 UpdateRestoredWindowSize: function(index, width, height) {
  if(!this.UpdateRestoredWindowSizeLocked()) {
   restoredMinWindowData = this.GetRestoredWindowData(index);
   restoredMinWindowData.width = width;
   restoredMinWindowData.height = height;
   this.SetRestoredWindowData(index, restoredMinWindowData);
  }
 },
 GetWindowsState: function() {
  var state = ASPxClientPopupControlBase.prototype.GetWindowsState.call(this);
  for(var i = 0; i < this.GetWindowCountCore() ; i++) {
   state += this.GetWindowState(i);
   if(i < this.GetWindowCountCore() - 1) state += ";";
  }
  return state;
 },
 CreateWindows: function(windowsNames) {
  for(var i = 0; i < windowsNames.length; i++) {
   var window = new ASPxClientPopupWindow(this, i, windowsNames[i]);
   this.windows.push(window);
  }
 },
 RaiseCloseButtonClick: function(index) {
  ASPxClientPopupControlBase.prototype.RaiseCloseButtonClick.call(this, index);
 },
 RaisePinnedChanged: function(index, pinned) {
  var window = index < 0 ? null : this.GetWindow(index);
  if(!this.PinnedChanged.IsEmpty()) {
   var args = new ASPxClientPopupWindowPinnedChangedEventArgs(window, pinned);
   this.PinnedChanged.FireEvent(this, args);
  }
 },
 RaiseCollapsed: function(index) {
  this.RaiseResize(index, ASPxClientPopupControlResizeState.Collapsed);
 },
 RaiseExpanded: function(index) {
  this.RaiseResize(index, ASPxClientPopupControlResizeState.Expanded);
 },
 RaiseMaximized: function(index) {
  this.RaiseResize(index, ASPxClientPopupControlResizeState.Maximized);
 },
 RaiseRestoredAfterMaximized: function(index) {
  this.RaiseResize(index, ASPxClientPopupControlResizeState.RestoredAfterMaximized);
 },
 GetContentWidth: function() {
  return this.GetWindowContentWidth(null);
 },
 GetContentHeight: function() {
  return this.GetWindowContentHeight(null);
 },
 SetSize: function(width, height) {
  ASPxClientPopupControlBase.prototype.SetSize.call(this, width, height);
 },
 GetWindowDimension: function(window, isWidth, forceFromCache) {
  var index = (window != null) ? window.index : -1;
  return this.GetWindowDimensionByIndex(index, isWidth, forceFromCache);
 },
 GetWindowContentDimension: function(window, isWidth) {
  var index = (window != null) ? window.index : -1,
   contentElem = this.GetWindowContentElement(index),
   dimensionHolder = contentElem.parentNode,
   paddingsHolder = contentElem;
  return isWidth ?
  (dimensionHolder.offsetWidth - this.getLeftRightBordersAndPaddingsSummaryValue(paddingsHolder)) :
  (dimensionHolder.offsetHeight - this.getTopBottomBordersAndPaddingsSummaryValue(paddingsHolder));
 },
 GetWindowContentWidth: function(window) {
  return this.GetWindowContentDimension(window, true);
 },
 GetWindowContentHeight: function(window) {
  return this.GetWindowContentDimension(window, false);
 },
 GetWindowHeight: function(window) {
  return this.GetWindowDimension(window, false);
 },
 GetWindowWidth: function(window) {
  return this.GetWindowDimension(window, true);
 },
 SetWindowSize: function(window, width, height) {
  return ASPxClientPopupControlBase.prototype.SetWindowSize.call(this, window, width, height);
 },
 GetContentHTML: function() {
  return this.GetContentHtml();
 },
 SetContentHTML: function(html) {
  this.SetContentHtml(html);
 },
 SetWindowPopupElementID: function(window, popupElementId) {
  var index = (window != null) ? window.index : -1;
  this.SetPopupElementIDByIndex(index, popupElementId);
 },
 SetPopupElementID: function(popupElementId) {
  this.SetPopupElementIDByIndex(-1, popupElementId);
 },
 GetCurrentPopupElementIndex: function() {
  return this.GetWindowCurrentPopupElementIndexByWindowIndex(-1);
 },
 GetWindowCurrentPopupElementIndex: function(window) {
  var index = (window != null) ? window.index : -1;
  return this.GetWindowCurrentPopupElementIndexByWindowIndex(index);
 },
 GetCurrentPopupElement: function() {
  return this.GetWindowCurrentPopupElementByIndex(-1);
 },
 GetWindowCurrentPopupElement: function(window) {
  var index = (window != null) ? window.index : -1;
  return this.GetWindowCurrentPopupElementByIndex(index);
 },
 ShowAtPos: function(x, y) {
  this.ShowWindowAtPos(null, Math.round(x), Math.round(y));
 },
 BringToFront: function() {
  this.BringWindowToFront(null);
 },
 IsWindowVisible: function(window) {
  return ASPxClientPopupControlBase.prototype.IsWindowVisible.call(this, window);
 },
 GetWindow: function(index) {
  return ASPxClientPopupControlBase.prototype.GetWindow.call(this, index);
 },
 GetWindowByName: function(name) {
  for(var i = 0; i < this.windows.length; i++)
   if(this.windows[i].name == name) return this.windows[i];
  return null;
 },
 GetWindowCount: function() {
  return this.GetWindowCountCore();
 },
 ShowWindow: function(window, popupElementIndex) {
  var index = (window != null) ? window.index : -1;
  this.ShowWindowByIndex(index, popupElementIndex);
 },
 ShowWindowAtElement: function(window, htmlElement) {
  var index = (window != null) ? window.index : -1;
  this.ShowWindowAtElementByIndex(index, htmlElement);
 },
 ShowWindowAtElementByID: function(window, id) {
  var htmlElement = document.getElementById(id);
  this.ShowWindowAtElement(window, htmlElement);
 },
 ShowWindowAtPos: function(window, x, y) {
  if(!this.isInitialized)
   return;
  var index = (window != null) ? window.index : -1;
  this.DoShowWindowCore(index, x, y, -1, false, true);
 },
 BringWindowToFront: function(window) {
  var index = (window != null) ? window.index : -1;
  var element = this.GetWindowElement(index);
  aspxGetPopupControlCollection().ActivateWindowElement(element, undefined, this.GetPopupType(), this.GetDefaultZIndexFromServer(), this.GetPopupControlZIndex());
 },
 HideWindow: function(window) {
  ASPxClientPopupControlBase.prototype.HideWindow.call(this, window);
 },
 GetWindowContentHTML: function(window) {
  return this.GetWindowContentHtml(window);
 },
 SetWindowContentHTML: function(window, html) {
  this.SetWindowContentHtml(window, html);
 },
 GetWindowContentHtml: function(window) {
  return ASPxClientPopupControlBase.prototype.GetWindowContentHtml.call(this, window);
 },
 SetWindowContentHtml: function(window, html, useAnimation) {
  ASPxClientPopupControlBase.prototype.SetWindowContentHtml.call(this, window, html, useAnimation);
 },
 AfterSetWindowContentHtml: function(index, contentContainer, useAnimation) {
  if(this.GetAdaptiveModalMode(index))
   this.TryAutoUpdatePosition(index);
  else if(this.InternalIsWindowVisible(index))
   this.RecalculateWindowSize(index);
  ASPxClientPopupControlBase.prototype.AfterSetWindowContentHtml.call(this, index, contentContainer, useAnimation);
  this.UpdateScrollbar(index);
 },
 UpdateAlignment: function(index) {
  if(this.GetIsDragged(index)) return;
  var element = this.GetWindowElement(index),
   wrapperStyle = getComputedStyle(this.GetModalWrapperElement(index)),
   top = ASPxClientPopupControl.AligmentCalculator.CalculateTopMargin(this.modalVerticalAlign, element.offsetHeight, this.GetDefaultVerticalOffset()),
   left = ASPxClientPopupControl.AligmentCalculator.CalculateLeftRightMargin(this.modalHorizontalAlign, ModalAlign.WindowLeft, wrapperStyle.paddingLeft),
   right = ASPxClientPopupControl.AligmentCalculator.CalculateLeftRightMargin(this.modalHorizontalAlign, ModalAlign.WindowRight, wrapperStyle.paddingRight);
  ASPx.SetStyles(element, {
   marginTop: top,
   marginLeft: left,
   marginRight: right
  });
 },
 GetOverlayElement: function(index) {
  return this.GetWindowModalElement(index);
 },
 GetModalWrapperElement: function(index) {
  if(!this.adaptivityEnabled) return null;
  var windowElement = this.GetWindowElement(index);
  return !!windowElement ? windowElement.parentNode : null;
 },
 GetWindowHeightWithoutContent: function(index) {
  var element = this.GetWindowElement(index),
   borderOwner = this.GetWindowBorderOwnerElement(element);
  return this.GetHeaderFooterHeightCore(index) + ASPx.GetVerticalBordersWidth(borderOwner);
 },
 StretchVertically: function() {
  this.StretchVerticallyByIndex(-1, true);
 },
 WindowStretchVertically: function(window) {
  var index = (window != null) ? window.index : -1;
  this.StretchVerticallyByIndex(index, true);
 },
 StretchVerticallyByIndex: function(index, value) {
  if(this.GetStretchVerticallyByIndex(index) !== value) {
   this.SetPropertyValue(index, "stretchVertically", value);
   var oldMinHeight = !!this.GetModalMinHeight(index) ? this.GetModalMinHeight(index) : 0;
   this.SetPropertyValue(index, "modalMinHeight", value ? "100vh" : this.minHeightBackup);
   this.minHeightBackup = oldMinHeight;
   this.UpdateHeightDimensions(index);
  }
 },
 SetAdaptiveMinWidth: function(minWidth) {
  this.SetAdaptiveMinWidthByIndex(-1, minWidth);
 },
 SetWindowAdaptiveMinWidth: function(window, minWidth) {
  var index = (window != null) ? window.index : -1;
  this.SetAdaptiveMinWidthByIndex(index, minWidth);
 },
 SetAdaptiveMaxWidth: function(maxWidth) {
  this.SetAdaptiveMaxWidthByIndex(-1, maxWidth);
 },
 SetWindowAdaptiveMaxWidth: function(window, maxWidth) {
  var index = (window != null) ? window.index : -1;
  this.SetAdaptiveMaxWidthByIndex(index, maxWidth);
 },
 SetAdaptiveMinHeight: function(minHeight) {
  this.SetAdaptiveMinHeightByIndex(-1, minHeight);
 },
 SetWindowAdaptiveMinHeight: function(window, minHeight) {
  var index = (window != null) ? window.index : -1;
  this.SetAdaptiveMinHeightByIndex(index, minHeight);
 },
 SetAdaptiveMaxHeight: function(maxHeight) {
  this.SetAdaptiveMaxHeightByIndex(-1, maxHeight);
 },
 SetWindowAdaptiveMaxHeight: function(window, maxHeight) {
  var index = (window != null) ? window.index : -1;
  this.SetAdaptiveMaxHeightByIndex(index, maxHeight);
 },
 SetAdaptiveHeightDimension: function(index, propertyName, value) {
  value = this.ConvertDimensionValueToString(value);
  value = value.indexOf("%") > -1 ? value.replace("%", "vh") : value;
  var margins = 0;
  if(this.stretchVertically && propertyName === "minHeight")
   margins = ASPx.GetTopBottomMargins(this.GetWindowElement(index));
  var contentElement = this.GetWindowContentElement(index);  
  var iframe = this.GetWindowContentIFrameElement(index);
  var additionalHeight = this.GetWindowHeightWithoutContent(index) + margins;
  var adaptiveHeight = "calc(" + value + " - " + additionalHeight + "px)";
  contentElement.style[propertyName] = adaptiveHeight;
  if (contentElement.style.minHeight) {
   if (iframe || this.HasAnyScrollBars(index))
    contentElement.style.height = "1px";
   else if (propertyName === "minHeight")
    this.SetContentWrapperAdaptiveHeight(index, adaptiveHeight);
  }
  if(iframe) {
   iframe.style.verticalAlign = "text-bottom";
   iframe.style.height = "100%";
  }
 },
 ConvertDimensionValueToString: function(value) {
  if(typeof value === "number")
   return value + "px";
  if(typeof value === "string")
   return value;
 },
 CanBeClosedByClickOnElement: function(index, srcElement, posX, id) {
  return ASPxClientPopupControlBase.prototype.CanBeClosedByClickOnElement.call(this, index, srcElement, posX, id) &&
   (!this.GetAdaptiveModalMode(index) || srcElement != this.GetModalWrapperElement(index) || posX < srcElement.offsetWidth - ASPx.GetVerticalScrollBarWidth());
 },
 SetWindowDisplay: function(index, value) {
  ASPxClientPopupControlBase.prototype.SetWindowDisplay.call(this, index, value);
  if(this.adaptivityEnabled) {
   var wrapper = this.GetModalWrapperElement(index);
   ASPx.SetElementDisplay(wrapper, value);
  }
 },
 HaveSpecialDivForAnimation: function() {
  return ASPxClientPopupControlBase.prototype.HaveSpecialDivForAnimation.call(this) || this.adaptivityEnabled;
 },
 WindowIsModal: function(index) {
  return ASPxClientPopupControlBase.prototype.WindowIsModal.call(this, index) || this.GetAdaptiveModalMode(index);
 },
 RecalculateWindowSize: function(index) {
  var window = this.GetWindowElement(index);
  var displayAfterSetSize = window.style.display;
  this.SetClientWindowSizeCoreLite(index, this.GetWindowWidthInternal(index), this.GetWindowHeightInternal(index), this.GetIsCollapsed(index));
  window.style.display = displayAfterSetSize;
  if(this.HasAnyScrollBars(index))
   this.NormalizeWindowSize(index, this.GetIsMaximized(index));
 },
 GetWindowContentIFrame: function(window) {
  return ASPxClientPopupControlBase.prototype.GetWindowContentIFrame.call(this, window);
 },
 GetWindowContentUrl: function(window) {
  return ASPxClientPopupControlBase.prototype.GetWindowContentUrl.call(this, window);
 },
 SetWindowContentUrl: function(window, url) {
  ASPxClientPopupControlBase.prototype.SetWindowContentUrl.call(this, window, url);
 },
 RefreshDimensionsAfterCreateIframe: function(index) {
  if(ASPx.IsElementVisible(this.GetWindowElement(index), true)) {
   var windowWidth = this.GetWindowDimensionByIndex(index, true, false);
   var windowHeight = this.GetWindowDimensionByIndex(index, false, false);
   this.SetClientWindowSizeCoreLite(index, windowWidth, windowHeight);
  }
 },
 GetPinned: function() {
  return this.GetIsPinned(-1);
 },
 SetPinned: function(value) {
  this.SetPinCore(-1, value);
 },
 GetWindowPinned: function(window) {
  var index = (window != null) ? window.index : -1;
  return this.GetIsPinned(index);
 },
 SetWindowPinned: function(window, value) {
  var index = (window != null) ? window.index : -1;
  this.SetPinCore(index, value);
 },
 GetMaximized: function() {
  return this.GetIsMaximized(-1);
 },
 SetMaximized: function(value) {
  this.SetMaximizedCore(-1, value);
 },
 GetWindowMaximized: function(window) {
  var index = (window != null) ? window.index : -1;
  return this.GetIsMaximized(index);
 },
 SetWindowMaximized: function(window, value) {
  var index = (window != null) ? window.index : -1;
  this.SetMaximizedCore(index, value);
 },
 GetCollapsed: function() {
  return this.GetIsCollapsed(-1);
 },
 SetCollapsed: function(value) {
  this.SetCollapsedCore(-1, value);
 },
 GetWindowCollapsed: function(window) {
  var index = (window != null) ? window.index : -1;
  return this.GetIsCollapsed(index);
 },
 SetWindowCollapsed: function(window, value) {
  var index = (window != null) ? window.index : -1;
  this.SetCollapsedCore(index, value);
 },
 RefreshWindowContentUrl: function(window) {
  ASPxClientPopupControlBase.prototype.RefreshWindowContentUrl.call(this, window);
 },
 SetWindowContentVisible: function(index, visible) {
  var contentElement = this.GetWindowContentWrapperElement(index);
  if(contentElement)
   this.SetWindowPartVisibleCore(contentElement, "DXPopupWindowContentDisplay", visible);
 },
 SetWindowFooterVisible: function(index, visible) {
  var footerElement = this.GetWindowFooterElement(index);
  if(footerElement)
   this.SetWindowPartVisibleCore(footerElement, "DXPopupWindowFooterDisplay", visible);
 },
 SetWindowPartVisibleCore: function(partElement, displayCacheName, visible) {
  var nothingChanged = ASPx.IsElementVisible(partElement) && visible;
  if(nothingChanged) return;
  if(!(ASPx.IsExists(partElement[displayCacheName])))
   partElement[displayCacheName] = partElement.style.display;
  partElement.style.display = visible ? partElement[displayCacheName] : 'none';
 },
 UpdatePosition: function() {
  this.UpdatePositionAtElement(this.GetPopupElement(-1, this.GetLastShownPopupElementIndex(-1)));
 },
 UpdatePositionAtElement: function(popupElement) {
  ASPxClientPopupControlBase.prototype.UpdatePositionAtElement.call(this, popupElement);
 },
 UpdateWindowPosition: function(window) {
  var index = (window != null) ? window.index : -1;
  this.UpdateWindowPositionAtElement(window, this.GetPopupElement(index, this.GetLastShownPopupElementIndex(index)));
 },
 UpdateWindowPositionAtElement: function(window, popupElement) {
  ASPxClientPopupControlBase.prototype.UpdateWindowPositionAtElement.call(this, window, popupElement);
 },
 UpdateWindowPositionInternal: function(index, popupElement) {
  if(this.GetAdaptiveModalMode(index)) {
   this.TryAutoUpdatePosition(index);
   return;
  }
  if(!ASPxClientPopupControlBase.prototype.UpdateWindowPositionInternal.call(this, index, popupElement))
   this.DoShowWindowAtPos(index, ASPx.InvalidDimension, ASPx.InvalidDimension, this.GetLastShownPopupElementIndex(index), false, false);
 },
 UpdateMode: function(index) {
  if(!this.adaptivityEnabled) return;
  var currentMode = this.GetAdaptiveModalMode(index),
   newMode = this.NeedAdaptiveModalMode(index);
  if(currentMode != newMode) {
   this.SetAdaptiveModalMode(index, newMode);
   if(!newMode && !ASPx.Browser.WebKitTouchUI) {
    var element = this.GetWindowElement(index);
    ASPx.PopupUtils.BodyScrollHelper.RestoreBodyScroll(element.id);
   }
   this.ShowWindowByIndex(-1);
   this.RaiseAdaptiveModeChanged();
  }
 },
 RaiseAdaptiveModeChanged: function() {
  if(!this.AdaptiveModeChanged.IsEmpty()) {
   var args = new ASPxClientEventArgs();
   this.AdaptiveModeChanged.FireEvent(this, args);
  }
 },
 TryAutoUpdatePosition: function(index) {
  this.UpdateMode(index);
  ASPxClientPopupControlBase.prototype.TryAutoUpdatePosition.call(this, index);
  if(this.GetAdaptiveModalMode(index)) {
   this.CorrectScrollPositionOnAndroid(index, false);
   this.ResetWebkitScrolling(this.GetModalWrapperElement(index), 100);
   this.UpdateHeightDimensions(index);
   this.ChangeHeaderFixed(index);
   this.UpdateAlignment(index);
   this.ChangeFooterFixed(index);
   if(this.GetIsDragged(index) &&
    ASPxClientPopupControl.WindowResizeHelper.AdjustModalOnWindowResize(this.GetWindowElement(index)))
    this.SetIsDragged(index, false);
  }
  if(this.GetIsMaximized(index)) {
   this.CorrectScrollPositionOnAndroid(index, true);
   this.UpdateMaximizedWindowSizeOnResize(index);
  }
 },
 CorrectScrollPositionOnAndroid: function(index, checkElementIsInPopup) {
  if(ASPx.Browser.AndroidMobilePlatform) {
   var activeElement = this.GetActiveElementIncludingIframes();
   if(activeElement && (activeElement.tagName === "INPUT" || activeElement.tagName === "TEXTAREA") &&
    (!checkElementIsInPopup || this.GetWindowElement(index).contains(activeElement)))
    window.setTimeout(function() {
     if(activeElement.scrollIntoViewIfNeeded)
      activeElement.scrollIntoViewIfNeeded();
    }, 100);
  }
 },
 GetActiveElementIncludingIframes: function(document) {
  document = document || window.document;
  if(document.body === document.activeElement || document.activeElement.tagName === "IFRAME") {
   var iframes = document.getElementsByTagName("iframe");
   for(var i = 0; i < iframes.length; i++) {
    var iFrameDocument = null;
    try {
     iFrameDocument = iframes[i].contentWindow.document;
    }
    catch(e) {  }
    if(iFrameDocument !== null) {
     var focused = this.GetActiveElementIncludingIframes(iframes[i].contentWindow.document);
     if(focused !== false) {
      return focused;
     }
    }
   }
  } else 
   return document.activeElement;
  return false;
 },
 OnModalWrapperScroll: function(e, index) {
  if(!this.GetAdaptiveModalMode(index) || this.IsWrapperScrollEventLocked()) return;
  this.ChangeHeaderFixed(index);
  this.ChangeFooterFixed(index);
 },
 OnModalWrapperTouchStart: function(e) {
  this.touchStartY = e.touches[0].clientY;
 },
 OnModalWrapperTouchMove: function (e, index) {
  if(e.touches.length > 1)
   return;
  var preventScroll = this.RequirePreventScrollForAdaptiveMode(e, index);
  if(preventScroll)
   ASPx.Evt.PreventEvent(e);
  this.touchStartY = e.touches[0].clientY;
 },
 RequirePreventScrollForAdaptiveMode: function(e, index) {
  var modalWrapper = this.GetModalWrapperElement(index),
   zoom = modalWrapper.offsetWidth / window.innerWidth,
   activeElement = document.activeElement,
   activeTyping = !!activeElement && (activeElement["type"] === "text" || activeElement["type"] === "textarea"); 
  if(zoom !== 1 || activeTyping)
   return false;
  var currentY = e.touches[0].clientY,
   preventScroll = currentY > this.touchStartY && modalWrapper.scrollTop === 0 ||
    currentY < this.touchStartY && modalWrapper.scrollTop + modalWrapper.clientHeight >= modalWrapper.scrollHeight;
  if(!preventScroll)
   return false;
  var targetElement = ASPx.Evt.GetEventSource(e),
   contentWrapper = this.GetWindowContentWrapperElement(index);
  while(targetElement && targetElement !== contentWrapper && targetElement.tagName !== 'BODY') {
   if(this.ElementHasScroll(targetElement))
    return false;
   targetElement = targetElement.parentNode;
  }
  return true;
 },
 ElementHasScroll: function(elem) {
  var style = window.getComputedStyle(elem);
  return ["overflow", "overflow-x", "overflow-y"].some(function(prop) {
   return ASPx.Data.ArrayContains(["scroll","auto"], style[prop]);
  });
 },
 GetFixedHeaderMaxBottom: function(index) {
  var contentWrapper = this.GetWindowContentWrapperElement(index);
  return ASPx.GetAbsolutePositionY(contentWrapper) + contentWrapper.offsetHeight;
 },
 GetFixedFooterMaxTop: function(index) {
  var header = this.GetWindowHeaderElement(index),
   contentWrapper = this.GetWindowContentWrapperElement(index),
   headerBottom = !!header ? ASPx.GetAbsolutePositionY(header) + header.offsetHeight : ASPx.GetAbsolutePositionY(contentWrapper);
  return window.innerHeight - headerBottom;
 },
 ChangeHeaderFixed: function(index) {
  if(!this.GetFixedHeader(index)) return;
  var element = this.GetWindowElement(index),
   modalWrapper = this.GetModalWrapperElement(index),
   isHeaderPartiallyHidden = modalWrapper.scrollTop > element.offsetTop,
   maxBottom = isHeaderPartiallyHidden ? this.GetFixedHeaderMaxBottom(index) : 0;
  this.FixateHeader(index, isHeaderPartiallyHidden, maxBottom);
 },
 ChangeFooterFixed: function(index) {
  if(!this.GetFixedFooter(index) || !this.GetWindowFooterElement(index)) return;
  var element = this.GetWindowElement(index),
   modalWrapper = this.GetModalWrapperElement(index),
   isFooterPartiallyHidden = element.offsetTop + element.offsetHeight - modalWrapper.scrollTop > window.innerHeight,
   maxTop = isFooterPartiallyHidden ? this.GetFixedFooterMaxTop(index) : 0;
  this.FixateFooter(index, isFooterPartiallyHidden, maxTop);
 },
 ChangeHeaderFooterFixed: function(index, elementToFix, isFixed, fixedClassName, offsetName, maxPos) {
  if(!elementToFix) return;
  var element = this.GetWindowElement(index),
   contentWrapper = this.GetWindowContentWrapperElement(index),
   changeClassNameFunc = isFixed ? ASPx.AddClassNameToElement : ASPx.RemoveClassNameFromElement,
   elementToFixHeight = elementToFix.offsetHeight;
  if(isFixed) {
   var borderOwner = this.GetWindowBorderOwnerElement(element),
    width = ASPx.GetClearClientWidth(borderOwner);
   ASPx.SetOffsetWidth(elementToFix, width);
   elementToFix.style[offsetName] = maxPos < elementToFixHeight ? maxPos - elementToFixHeight + "px" : "";
  } else
   elementToFix.style.width = "";
  contentWrapper.style["margin-" + offsetName] = isFixed ? elementToFixHeight + "px" : 0;
  changeClassNameFunc(elementToFix, fixedClassName);
 },
 FixateFooter: function(index, isFixed, maxTop) {
  this.ChangeHeaderFooterFixed(index, this.GetWindowFooterElement(index), isFixed, "dxFixedFooter", "bottom", maxTop);
 },
 FixateHeader: function(index, isFixed, maxBottom) {
  this.ChangeHeaderFooterFixed(index, this.GetWindowHeaderElement(index), isFixed, "dxFixedHeader", "top", maxBottom);
 },
 LockWrapperScrollEvent: function() {
  this.wrapperScrollEventLocked = true;
 },
 UnlockWrapperScrollEventEvent: function() {
  this.wrapperScrollEventLocked = false;
 },
 IsWrapperScrollEventLocked: function() {
  return this.wrapperScrollEventLocked;
 },
 ResetScroll: function(index) {
  if(!this.GetAdaptiveModalMode(index)) return;
  this.LockWrapperScrollEvent();
  this.GetModalWrapperElement(index).scrollTop = 0;
  this.UnlockWrapperScrollEventEvent();
 },
 AdjustModalElementBounds: function(element) {
  if(!ASPx.IsExistsElement(element)) return;
  ASPx.SetStyles(element, {
   left: 0,
   top: 0,
   right: 0,
   bottom: 0,
   width: "",
   height: ""
  });
 },
 RefreshPopupElementConnection: function() {
  ASPxClientPopupControlBase.prototype.RefreshPopupElementConnection.call(this);
 }
});
ASPxClientPopupControl.AligmentCalculator = (function() {
 function CalculateTopMargin(verticalAlign, elementHeight, defaultOffset) {
  if(verticalAlign === ModalAlign.WindowTop)
   return "";
  if(elementHeight < window.innerHeight) {
   var freeSpace = window.innerHeight - elementHeight;
   switch(verticalAlign) {
    case ModalAlign.WindowCenter:
     return freeSpace / 2;
    case ModalAlign.WindowBottom:
     return freeSpace - defaultOffset;
   }
  }
  return "";
 }
 function CalculateLeftRightMargin(horizontalAlign, forAligmenment, wrapperPadding) {
  if(horizontalAlign === forAligmenment) {
   if(ASPx.PxToInt(wrapperPadding) !== 0)
    return 0;
   return 10;
  }
  return "";
 }
 return {
  CalculateTopMargin: CalculateTopMargin,
  CalculateLeftRightMargin: CalculateLeftRightMargin
 };
})();
ASPxClientPopupControl.Animation = (function() {
 function GetVerticalDirection(verticalAlign, horizontalAlign) {
  switch(verticalAlign) {
   case ModalAlign.WindowTop:
    return -1;
   case ModalAlign.WindowCenter:
    if(horizontalAlign === ModalAlign.WindowCenter)
     return -1;
    return 0;
   case ModalAlign.WindowBottom:
    return 1;
  }
 }
 function GetHorizontalDirection(horizontalAlign) {
  switch(horizontalAlign) {
   case ModalAlign.WindowLeft:
    return -1;
   case ModalAlign.WindowCenter:
    return 0;
   case ModalAlign.WindowRight:
    return 1;
  }
 }
 function NeedFadeAnimation(horizontalAlign, verticalAlign, animationType, popupHorizontalAlign, popupVerticalAlign, adaptiveModalMode) {
  if(animationType === ASPxClientPopupControlBase.AnimationType.Auto) {
   if(adaptiveModalMode)
    return horizontalAlign === ModalAlign.WindowCenter && verticalAlign === ModalAlign.WindowCenter;
   else
    return popupHorizontalAlign === ASPx.PopupUtils.WindowCenterAlignIndicator && popupVerticalAlign === ASPx.PopupUtils.WindowCenterAlignIndicator;
  }
  return false;
 }
 return {
  GetVerticalDirection: GetVerticalDirection,
  GetHorizontalDirection: GetHorizontalDirection,
  NeedFadeAnimation: NeedFadeAnimation
 };
})();
ASPxClientPopupControl.WindowResizeHelper = (function() {
 var previousInnerWidth = 0,
  previousMargin = 0;
 function AdjustModalOnWindowResize(element) {
  var offsetLeft = element.offsetLeft,
   offsetWidth = element.offsetWidth,
   windowWidth = window.innerWidth,
   expectedLeft = windowWidth / 2 - offsetWidth / 2,
   toTheRightOfCenter = offsetLeft > expectedLeft,
   dw = windowWidth - previousInnerWidth,
   computedStyle = getComputedStyle(element),
   left = ASPx.PxToFloat(computedStyle.left),
   currentMargin = ASPx.PxToFloat(computedStyle.marginLeft),
   dm = currentMargin - previousMargin,
   newLeft = left - dm;
  if(toTheRightOfCenter)
   newLeft += dw;
  ASPx.SetStyles(element, { left: newLeft + "px" });
  if(Math.abs(offsetLeft - expectedLeft) <= 10 || dw < 0 && toTheRightOfCenter !== (element.offsetLeft > expectedLeft)) {
   ASPx.SetStyles(element, { left: "" });
   ASPx.Attr.RestoreStyleAttribute(element, "top");
   ASPx.Attr.RestoreStyleAttribute(element, "margin-top");
   return true;
  }
  previousMargin = currentMargin;
  previousInnerWidth = windowWidth;
  return false;
 }
 function Initialize(element) {
  previousInnerWidth = window.innerWidth;
  ASPx.Attr.ChangeStyleAttribute(element, "top", element.offsetTop + "px");
  ASPx.Attr.ChangeStyleAttribute(element, "margin-top", "0");
  previousMargin = ASPx.PxToFloat(getComputedStyle(element).marginLeft);
 }
 return {
  Initialize: Initialize,
  AdjustModalOnWindowResize: AdjustModalOnWindowResize
 };
})();
ASPxClientPopupControl.Cast = ASPxClientControl.Cast;
ASPxClientPopupControl.GetPopupControlCollection = function() {
 return aspxGetPopupControlCollection();
};
var ASPxClientPopupWindow = ASPx.CreateClass(null, {
 constructor: function(popupControl, index, name) {
  this.popupControl = popupControl;
  this.index = index;
  this.name = name;
 },
 GetHeaderImageUrl: function() {
  return this.popupControl.GetWindowHeaderImageUrl(this.index);
 },
 SetHeaderImageUrl: function(value) {
  this.popupControl.SetWindowHeaderImageUrl(this.index, value);
 },
 GetFooterImageUrl: function() {
  return this.popupControl.GetWindowFooterImageUrl(this.index);
 },
 SetFooterImageUrl: function(value) {
  this.popupControl.SetWindowFooterImageUrl(this.index, value);
 },
 GetHeaderNavigateUrl: function() {
  return this.popupControl.GetWindowHeaderNavigateUrl(this.index);
 },
 SetHeaderNavigateUrl: function(value) {
  this.popupControl.SetWindowHeaderNavigateUrl(this.index, value);
 },
 GetFooterNavigateUrl: function() {
  return this.popupControl.GetWindowFooterNavigateUrl(this.index);
 },
 SetFooterNavigateUrl: function(value) {
  this.popupControl.SetWindowFooterNavigateUrl(this.index, value);
 },
 GetHeaderText: function() {
  return this.popupControl.GetWindowHeaderText(this.index);
 },
 SetHeaderText: function(value) {
  this.popupControl.SetWindowHeaderText(this.index, value);
 },
 GetFooterText: function() {
  return this.popupControl.GetWindowFooterText(this.index);
 },
 SetFooterText: function(value) {
  this.popupControl.SetWindowFooterText(this.index, value);
 }
});
var ASPxClientPopupWindowEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(window) {
  this.constructor.prototype.constructor.call(this);
  this.window = window;
 }
});
var ASPxClientPopupWindowCancelEventArgs = ASPx.CreateClass(ASPxClientCancelEventArgs, {
 constructor: function(window, closeReason) {
  this.constructor.prototype.constructor.call(this);
  this.window = window;
  this.closeReason = closeReason;
 }
});
var ASPxClientPopupWindowCloseUpEventArgs = ASPx.CreateClass(ASPxClientPopupWindowEventArgs, {
 constructor: function(window, closeReason) {
  this.constructor.prototype.constructor.call(this, window);
  this.closeReason = closeReason;
 }
});
var ASPxClientPopupWindowResizeEventArgs = ASPx.CreateClass(ASPxClientPopupWindowEventArgs, {
 constructor: function(window, resizeState) {
  this.constructor.prototype.constructor.call(this, window);
  this.resizeState = resizeState;
 }
});
var ASPxClientPopupWindowPinnedChangedEventArgs = ASPx.CreateClass(ASPxClientPopupWindowEventArgs, {
 constructor: function(window, pinned) {
  this.constructor.prototype.constructor.call(this, window);
  this.pinned = pinned;
 }
});
var ASPxClientPopupControlCollection = ASPx.CreateClass(ASPxClientControlCollection, {
 constructor: function() {
  this.constructor.prototype.constructor.call(this);
  this.draggingControl = null;
  this.draggingWindowIndex = -1;
  this.gragXOffset = 0;
  this.gragYOffset = 0;
  this.visibleModalElements = [];
  this.visiblePopupWindowIds = [];
  this.windowResizeByBodyScrollVisibilityChangingLockCount = 0;
  this.savedBodyWidth = 0;
  this.savedBodyHeight = 0;
  this.overControl = null;
  this.overWindowIndex = -1;
  this.overXPos = ASPx.InvalidPosition;
  this.overYPos = ASPx.InvalidPosition;
  this.appearTimerID = -1;
  this.disappearTimerID = -1;
  this.scrollEventLockCount = 0;
  this.currentActiveWindowElement = null;
  this.resizeControl = null;
  this.resizeIndex = -2;
  this.resizeCursor = "";
  this.resizePanel = null;
  this.selectBanned = false;
  this.pcWindowsAreRestrictedByDocumentWindow = true;
  this.docScrollLeft = -1;
  this.docScrollTop = -1;
  this.EnsureSaveScrollState();
 },
 GetCollectionType: function(){
  return "Popup";
 },
 Remove: function(popupControl) {
  for(var i = this.visibleModalElements.length - 1; i >= 0; i--) {
   var modalElement = this.visibleModalElements[i];
   if(modalElement && modalElement.DXModalPopupControl === popupControl)
    this.UnregisterVisibleModalElement(modalElement);
  }
  for(var j = this.visiblePopupWindowIds.length - 1; j >= 0; j--) {
   var id = this.visiblePopupWindowIds[j];
   if(!ASPx.IsExists(id)) continue;
   var popupWindow = this.GetPopupWindowFromID(id);
   if(popupWindow.popupControl === popupControl) {
    var windowElement = popupControl.GetWindowElement(popupWindow.windowIndex);
    if(windowElement)
     this.UnregisterVisibleWindow(windowElement);
    else
     ASPx.Data.ArrayRemove(this.visiblePopupWindowIds, id);
   }
  }
  ASPxClientControlCollection.prototype.Remove.call(this, popupControl);
 },
 EnsureSaveScrollState: function() {
  if(ASPx.documentLoaded && this.docScrollLeft < 0 && this.docScrollTop < 0)
   this.SaveScrollState();
 },
 GetPopupWindowFromID: function(id) {
  var pos = id.lastIndexOf(ASPx.PCWIdSuffix);
  var name = id.substring(0, pos);
  var index = id.substr(pos + ASPx.PCWIdSuffix.length);
  var popupControl = aspxGetPopupControlCollection().Get(name);
  return { popupControl: popupControl, windowIndex: index };
 },
 DoHideAllWindows: function(srcElement, excptId, applyToAll, closeReason, posX) {
  for(var i = this.visiblePopupWindowIds.length - 1; i >= 0; i--) {
   var id = this.visiblePopupWindowIds[i];
   if(id == excptId) continue;
   var popupWindow = this.GetPopupWindowFromID(id),
    windowIndex = popupWindow.windowIndex,
    popupControl = popupWindow.popupControl;
   if(!popupControl.CanBeClosedByClickOnElement(windowIndex, srcElement, posX, id)) continue;
   if(popupControl != null) {
    var popupWindowZIndexArray = ASPx.PopupUtils.GetElementZIndexArray(popupControl.GetWindowElement(windowIndex));
    var isPopupHigherSrcElement = ASPx.PopupUtils.IsHigher(popupWindowZIndexArray, ASPx.PopupUtils.GetElementZIndexArray(srcElement)) || !popupControl.HasDefaultWindow();
    var windowCloseAction = popupControl.GetWindowCloseAction(windowIndex);
    if ((windowCloseAction != "CloseButton" && windowCloseAction != "None") && isPopupHigherSrcElement || applyToAll)
     popupControl.DoHideWindow(parseInt(windowIndex), false, closeReason);
   }
  }
 },
 DoShowAtCurrentPos: function(name, index, popupElementIndex, evtClone) {
  var pc = this.Get(name);
  if(pc != null && !pc.InternalIsWindowVisible(index))
   pc.DoShowWindowCore(index, this.overXPos, this.overYPos, popupElementIndex, true, true, evtClone, ASPxClientPopupControlCloseReason.MouseOut);
 },
 WindowZIndexWasInitialized: function(zIndex, pcZIndex) {
  return pcZIndex <= zIndex;
 },
 ActivateWindowElement: function(element, evt, popupType, defZIndex, zIndex) {
  var maxZIndex = this.GetMaxZIndex(popupType, defZIndex),
   topZIndex = this.WindowZIndexWasInitialized(maxZIndex, zIndex) ? parseInt(maxZIndex) : zIndex;
  if(this.WindowZIndexWasInitialized(element.style.zIndex, zIndex) && element.style.zIndex != topZIndex) {
   this.DeleteWindowFromZIndexOrder(element);
  }
  if(!this.WindowZIndexWasInitialized(element.style.zIndex, zIndex))
   topZIndex += 2;
  var popupWindow = this.GetPopupWindowFromID(element.id);
  popupWindow.popupControl.SetWindowElementZIndex(element, topZIndex);
  var pcWElementEventSource = ASPx.PopupUtils.FindEventSourceParentByTestFunc(evt, aspxTestPopupWindowElement);
  if(!evt || (evt && pcWElementEventSource == element)) { 
   if(this.GetCurrentActiveWindowElement() != element) {
    this.RefreshTabIndexes(false);
    this.SaveCurrentActiveWindowElement(element);
   }
  }
 },
 RefreshTabIndexes: function(forceRecalculate) {
  var topModalWindow = this.GetTopModalWindow();
  if(topModalWindow != null || forceRecalculate) {
   var topModalWindowZIndexArray = ASPx.PopupUtils.GetElementZIndexArray(topModalWindow);
   this.CalculateTabIndexes(topModalWindowZIndexArray);
  }
 },
 ElementHasTabIndex: function(element) {
  return ASPx.IsExists(ASPx.Attr.GetAttribute(element, "tabindex"));
 },
 IsElementCanBeActive: function(element) { 
  return element.tagName === "INPUT" || element.tagName === "A" ||
   element.tagName === "BUTTON" || element.tagName === "TEXTAREA" ||
   element.tagName === "SELECT" || this.ElementHasTabIndex(element);
 },
 GetCanBeActiveElements: function() { 
  var elements = document.getElementsByTagName("*"),
   canBeActiveElements = [];
  for(var i = 0; i < elements.length; i++) {
   if(this.IsElementCanBeActive(elements[i]))
    canBeActiveElements.push(elements[i]);
  }
  return canBeActiveElements;
 },
 GetEditableDivs: function(){
  if(document.querySelectorAll)
   return document.querySelectorAll("div[contenteditable=true]");
  var editableDivs = [ ];
  var allDivs = document.getElementsByTagName("DIV");
  for(var i = 0; i < allDivs.length; i++){
   var div = allDivs[i];
   if(div.getAttribute("contenteditable") == 'true')
    editableDivs.push(div);
  }
  return editableDivs;
 },
 CalculateTabIndexes: function(topModalWindowZIndexArray) {
  var elements = this.GetCanBeActiveElements();
  for(var i = 0; i < elements.length; i++) {
   var currentElementZIndexArray = ASPx.PopupUtils.GetElementZIndexArray(elements[i]),
    manager = ASPx.ControlTabIndexManager.getInstance(),
    tabIndexManagerGroupId = "pcCollection";
   if(ASPx.PopupUtils.IsHigher(currentElementZIndexArray, topModalWindowZIndexArray))
    manager.restoreTabIndexAttribute(elements[i], tabIndexManagerGroupId);
   else
    manager.changeTabIndexAttribute(elements[i], tabIndexManagerGroupId);
  }
 },
 PopupWindowIsModalByVisibleIndex: function(visiblePopupWindowIndex) {
  return this.PopupWindowIsModalByID(this.visiblePopupWindowIds[visiblePopupWindowIndex]);
 },
 PopupWindowIsModalByID: function(windowElementID) {
  var popupWindow = this.GetPopupWindowFromID(windowElementID);
  return popupWindow.popupControl.WindowIsModal(popupWindow.windowIndex);
 },
 SaveCurrentActiveWindowElement: function(windowElement) {
  this.currentActiveWindowElement = windowElement;
 },
 SkipCurrentActiveWindowElement: function(element) {
  if(element == this.GetCurrentActiveWindowElement())
   this.SaveCurrentActiveWindowElement(null);
 },
 GetCurrentActiveWindowElement: function() {
  return this.currentActiveWindowElement;
 },
 GetMaxZIndex: function (type, defaultZIndex) {
  var maxZIndex = defaultZIndex;
  for(var i = 0; i < this.visiblePopupWindowIds.length; i++) {
   var id = this.visiblePopupWindowIds[i];
   if(type !== undefined && this.GetPopupWindowFromID(id).popupControl.GetPopupType() !== type)
    continue;
   var currentWindow = ASPx.GetElementById(id);
   if(!!currentWindow && ASPx.IsElementVisible(currentWindow) && currentWindow.style && currentWindow.style.zIndex > maxZIndex)
    maxZIndex = currentWindow.style.zIndex;
  }
  return maxZIndex;
 },
 GetTopModalWindow: function() {
  return this.GetTopWindow(true);
 },
 GetTopWindow: function(onlyModal) {
  var topWindow = null;
  var topWindowZIndexArray = null;
  for(var i = 0; i < this.visiblePopupWindowIds.length; i++) {
   var currentWindow = ASPx.GetElementById(this.visiblePopupWindowIds[i]);
   if(onlyModal && !this.PopupWindowIsModalByVisibleIndex(i))
    continue;
   if(ASPx.IsElementVisible(currentWindow)) {
    var currentWindowZIndexArray = ASPx.PopupUtils.GetElementZIndexArray(currentWindow);
    if(topWindow == null || ASPx.PopupUtils.IsHigher(currentWindowZIndexArray, topWindowZIndexArray)) {
     topWindow = currentWindow;
     topWindowZIndexArray = currentWindowZIndexArray;
    }
   }
  }
  return topWindow;
 },
 DeleteWindowFromZIndexOrder: function(element) {
  for(var i = this.visiblePopupWindowIds.length - 1; i >= 0; i--) {
   var windowElement = ASPx.GetElementById(this.visiblePopupWindowIds[i]);
   if(!windowElement)
    ASPx.Data.ArrayRemoveAt(this.visiblePopupWindowIds, i);
   else if(windowElement.style.zIndex > element.style.zIndex) {
    var popupWindow = this.GetPopupWindowFromID(this.visiblePopupWindowIds[i]);
    popupWindow.popupControl.SetWindowElementZIndex(windowElement, windowElement.style.zIndex - 2);
   }
  }
 },
 AdjustModalElementsBounds: function() {
  for(var i = 0; i < this.visibleModalElements.length; i++)
   this.visibleModalElements[i].DXModalPopupControl.AdjustModalElementBounds(this.visibleModalElements[i]);
 },
 ClearAppearTimer: function() {
  this.appearTimerID = ASPx.Timer.ClearTimer(this.appearTimerID);
 },
 ClearDisappearTimer: function() {
  this.disappearTimerID = ASPx.Timer.ClearTimer(this.disappearTimerID);
 },
 IsAppearTimerActive: function() {
  return this.appearTimerID > -1;
 },
 IsDisappearTimerActive: function() {
  return this.disappearTimerID > -1;
 },
 SetAppearTimer: function(name, index, popupElementIndex, timeout, evt) {
  var evtClone = ASPx.CloneObject(evt);
  this.appearTimerID = window.setTimeout(function() {
   aspxGetPopupControlCollection().DoShowAtCurrentPos(name, index, popupElementIndex, evtClone);
  }, timeout);
 },
 SetDisappearTimer: function(name, index, timeout) {
  this.disappearTimerID = window.setTimeout(function() {
   aspxGetPopupControlCollection().OnPWDisappearTimer(name, index);
  }, timeout);
 },
 GetDocScrollDifference: function() {
  return new _aspxScrollDifference(ASPx.GetDocumentScrollLeft() - this.docScrollLeft, ASPx.GetDocumentScrollTop() - this.docScrollTop);
 },
 IsDocScrolled: function(scroll) {
  return scroll.horizontal != 0 || scroll.vertical != 0;
 },
 SaveScrollState: function() {
  this.docScrollLeft = ASPx.GetDocumentScrollLeft();
  this.docScrollTop = ASPx.GetDocumentScrollTop();
 },
 InitDragObject: function(control, index, x, y, xClientCorrection, yClientCorrection) {
  this.draggingControl = control;
  this.draggingWindowIndex = index;
  this.gragXOffset = x;
  this.gragYOffset = y;
  this.xClientCorrection = xClientCorrection;
  this.yClientCorrection = yClientCorrection;
  this.SetDocumentSelectionBan(true);
 },
 InitOverObject: function(control, index, evt) {
  this.overControl = control;
  this.overWindowIndex = index;
  if(evt)
   this.SaveCurrentMouseOverPos(evt);
 },
 InitResizeObject: function(control, index, cursor, resizePanel) {
  this.resizeControl = control;
  this.resizeIndex = index;
  this.resizeCursor = cursor;
  this.resizePanel = resizePanel;
  this.SetDocumentSelectionBan(true);
 },
 SetDocumentSelectionBan: function(value) {
  if(this.selectBanned === value)
   return;
  this.selectBanned = value;
  if(ASPx.Browser.WebKitFamily) {
   if(value) {
    if(!this.webkitUserSelectBackup && document.body.style.webkitUserSelect)
     this.webkitUserSelectBackup = document.body.style.webkitUserSelect;
    document.body.style.webkitUserSelect = "none";
   } else {
    if(this.webkitUserSelectBackup) {
     document.body.style.webkitUserSelect = this.webkitUserSelectBackup;
     delete this.webkitUserSelectBackup;
    } else
     document.body.style.webkitUserSelect = "auto";
   }
  }
 },
 IsResizeInint: function() {
  return this.resizeControl != null;
 },
 ClearDragObject: function() {
  this.draggingControl = null;
  this.draggingWindowIndex = -1;
  this.gragXOffset = 0;
  this.gragYOffset = 0;
  this.SetDocumentSelectionBan(this.resizeControl != null);
 },
 ClearResizeObject: function() {
  this.resizeControl = null;
  this.resizeIndex = -2;
  this.resizeCursor = "";
  this.SetDocumentSelectionBan(this.draggingControl != null);
  this.resizePanel.parentNode.removeChild(this.resizePanel);
 },
 Drag: function(evt) {
  if(ASPx.tableColumnResizing || ASPx.currentDragHelper || !ASPx.Evt.IsLeftButtonPressed(evt)) return;
  var x = ASPx.Evt.GetEventX(evt);
  var y = ASPx.Evt.GetEventY(evt);
  if(this.pcWindowsAreRestrictedByDocumentWindow && ASPx.PopupUtils.CoordinatesInDocumentRect(x, y)) {
   x += this.gragXOffset;
   y += this.gragYOffset;
   this.draggingControl.OnDrag(this.draggingWindowIndex, x, y, this.xClientCorrection, this.yClientCorrection, evt);
   if(ASPx.Browser.WebKitTouchUI)
    ASPx.Evt.PreventEvent(evt);
  }
 },
 DragStop: function() {
  this.draggingControl.OnDragStop(this.draggingWindowIndex);
  this.ClearDragObject();
 },
 ResizeStop: function(evt) {
  this.resizeControl.OnResizeStop(evt, this.resizeIndex, this.resizeCursor, this.resizePanel);
  aspxGetPopupControlCollection().ClearResizeObject();
 },
 setIframesMouseMoveEnabled: function(enabled) {
  for(var i = 0; i < this.visiblePopupWindowIds.length; i++) {
   var popupWindow = this.GetPopupWindowFromID(this.visiblePopupWindowIds[i]);
   var popupControl = popupWindow.popupControl;
   if(popupControl) {
    var iframe = popupControl.GetWindowContentIFrameElement(popupWindow.windowIndex);
    if(iframe)
     iframe.style.pointerEvents = enabled ? "" : "none";
   }
  }
 },
 OnPWMouseMove: function(evt, name, index) {
  if(this.draggingControl == null &&
   this.overControl == null &&
   this.resizeControl == null) {
   var pc = aspxGetPopupControlCollection().Get(name);
   if(pc != null) pc.OnMouseMove(evt, index);
  }
 },
 OnPWMouseOver: function(evt) {
  if(!this.overControl || this.draggingControl) return;
  if(this.IsOverPopupWindow(evt))
   this.ClearDisappearTimer();
 },
 IsOverPopupWindow: function(evt) {
  return ASPx.PopupUtils.FindEventSourceParentByTestFunc(evt, aspxTestPopupControlOverElement) != null;
 },
 OnDocumentKeyDown: function(evt) {
  var windowElement = this.GetTopWindow(false);
  if(windowElement) {
   var window = this.GetPopupWindowFromID(windowElement.id);
   if(window.popupControl);
    window.popupControl.OnDocumentKeyDown(evt, windowElement);
  }
 },
 OnDocumentMouseDown: function(evt) {
  var popupElement = ASPx.PopupUtils.FindEventSourceParentByTestFunc(evt, aspxTestPopupControlElement);
  var excptId = popupElement == null ? "" :
   popupElement.DXPopupElementControl.GetWindowElementId(popupElement.DXPopupWindowIndex);
  this.OnMouseDownCore(evt, excptId);
 },
 OnMouseDown: function(evt) {
  this.OnMouseDownCore(evt, "");
 },
 OnMouseDownCore: function(evt, excptId) {
  var srcElement = ASPx.Evt.GetEventSource(evt);
  this.DoHideAllWindows(srcElement, excptId, false, ASPxClientPopupControlCloseReason.OuterMouseClick, ASPx.Evt.GetEventX(evt));
  aspxGetPopupControlCollection().ClearAppearTimer();
 },
 OnMouseMove: function (evt) {
  if(ASPx.Browser.WebKitTouchUI && ASPx.TouchUIHelper.isGesture)
   return;
  if(this.draggingControl != null) {
   this.Drag(evt);
  }
  else if(this.overControl != null) {
   this.OnMouseOver(evt);
  }
  else if(this.resizeControl != null) {
   this.resizeControl.OnResize(evt, this.resizeIndex, this.resizeCursor, this.resizePanel);
  }
 },
 OnMouseOver: function(evt) {
  var element = ASPx.PopupUtils.FindEventSourceParentByTestFunc(evt, aspxTestPopupControlOverElement);
  var curPopupElement = this.overControl.GetWindowCurrentPopupElementByIndex(this.overWindowIndex);
  var popup = element != null ? element.DXPopupElementControl : null;
  var isPopupActionMouseOver = popup && popup.GetWindowPopupAction(this.overWindowIndex) == 'MouseOver';
  var isCurPopupElement = element !== null && element === curPopupElement;
  var isCurPopupWindow = element != null && element.id === this.overControl.GetWindowElementId(this.overWindowIndex);
  var isCurPopupElementOrCurPopupWindow = isCurPopupElement || isCurPopupWindow || isPopupActionMouseOver;
  if(isCurPopupElementOrCurPopupWindow) {
   var clearTimer = true;
   popup = element.DXPopupElementControl;
   if(popup && popup.GetLastShownPopupElementIndex(element.DXPopupWindowIndex) != element.DXPopupElementIndex)
    clearTimer = false;
   if(clearTimer)
    this.ClearDisappearTimer();
   this.SaveCurrentMouseOverPos(evt);
   return;
  }
  this.OnMouseOut();
 },
 OnMouseOut: function(evt) {
  if(!this.overControl || this.draggingControl) return;
  this.ClearAppearTimer();
  var windowCloseAction = this.overControl.GetWindowCloseAction(this.overWindowIndex);
  if(windowCloseAction == "MouseOut" && this.overControl.InternalIsWindowVisible(this.overWindowIndex)) {
   if(!this.IsDisappearTimerActive() && this.IsDisappearAllowedByMouseOut(evt))
    this.SetDisappearTimer(this.overControl.name, this.overWindowIndex, this.overControl.disappearAfter);
  }
  else
   this.OverStop();
 },
 IsDisappearAllowedByMouseOut: function(evt) {
  return ASPx.Browser.Firefox || ASPx.Browser.Chrome ? !this.IsOverPopupWindow(evt) : true;  
 },
 OnMouseUp: function(evt) {
  if(this.draggingControl != null)
   this.DragStop();
  if(this.resizeControl != null)
   this.ResizeStop(evt);
 },
 OnResize: function(evt) {
  this.AutoUpdateElementsPosition();
  this.AdjustModalElementsBounds();
 },
 OnScroll: function(evt) {
  if(this.scrollEventLockCount > 0)
   return;
  var scroll = this.GetDocScrollDifference();
  if(this.IsDocScrolled(scroll)) { 
   this.CorrectPositionAtScroll(scroll);
   this.AdjustModalElementsBounds();
   this.SaveScrollState();
  }
  this.CalculateDocumentDimensionsWithoutPinnedWindows(evt);
  this.FireScrollEventToWindows(evt);
 },
 GetSavedBodyWidth: function() {
  if(this.savedBodyWidth == 0)
   this.CalculateDocumentDimensionsWithoutPinnedWindows();
  return this.savedBodyWidth;
 },
 GetSavedBodyHeight: function() {
  if(this.savedBodyHeight == 0)
   this.CalculateDocumentDimensionsWithoutPinnedWindows();
  return this.savedBodyHeight;
 },
 HidePinnedPopupsThatOutFromViewPort: function() {
  var popupsToRestoreVisible = [];
  for(var i = 0; i < this.visiblePopupWindowIds.length; i++) {
   var popupWindow = this.GetPopupWindowFromID(this.visiblePopupWindowIds[i]);
   var popupControl = popupWindow.popupControl;
   if(!popupControl.needToHidePinnedOutFromViewPort(popupWindow.windowIndex))
    continue;
   var element = popupControl.GetWindowElement(popupWindow.windowIndex);
   if(!element) continue;
   var restoreData = {};
   restoreData.element = element;
   restoreData.display = element.style.display;
   element.style.display = "none";
   popupsToRestoreVisible.push(restoreData);
  }
  return popupsToRestoreVisible;
 },
 RestorePinnedPopupsThatOutFromViewPort: function(popupsToRestoreVisible) {
  if(popupsToRestoreVisible.length > 0) {
   for(var i = 0; i < popupsToRestoreVisible.length; i++) {
    var restoreData = popupsToRestoreVisible[i];
    restoreData.element.style.display = restoreData.display;
   }
  }
 },
 CalculateDocumentDimensionsWithoutPinnedWindows: function(evt) { 
  var popupsToRestoreVisible = [];
  var needToHideRestorePopupsThatOutFromViewPort = !!evt && ASPx.Evt.GetEventSource(evt) == document;
  if(needToHideRestorePopupsThatOutFromViewPort)
   popupsToRestoreVisible = this.HidePinnedPopupsThatOutFromViewPort();
  this.savedBodyWidth = ASPx.GetDocumentWidth();
  this.savedBodyHeight = ASPx.GetDocumentHeight();
  if(needToHideRestorePopupsThatOutFromViewPort)
   this.RestorePinnedPopupsThatOutFromViewPort(popupsToRestoreVisible);
 },
 FireScrollEventToWindows: function(evt) {
  for(var i = 0; i < this.visiblePopupWindowIds.length; i++) {
   var popupWindow = this.GetPopupWindowFromID(this.visiblePopupWindowIds[i]);
   var popupControl = popupWindow.popupControl;
   popupControl.OnScroll(evt, popupWindow.windowIndex);
  }
 },
 LockScrollEvent: function() {
  this.scrollEventLockCount++;
 },
 UnlockScrollEvent: function() {
  this.scrollEventLockCount--;
 },
 CorrectPositionAtScroll: function(scroll) {
  for(var i = 0; i < this.visiblePopupWindowIds.length; i++) {
   var popupWindow = this.GetPopupWindowFromID(this.visiblePopupWindowIds[i]);
   var popupControl = popupWindow.popupControl;
   if(popupControl != null && popupControl.InternalIsWindowVisible(popupWindow.windowIndex)) {
    if(popupControl.GetAutoUpdatePosition(popupWindow.windowIndex))
     popupWindow.popupControl.TryAutoUpdatePosition(popupWindow.windowIndex);
   }
  }
 },
 OnSelectStart: function() {
  return !this.selectBanned;
 },
 OverStop: function() {
  this.overControl = null;
  this.overWindowIndex = -1;
 },
 OnPWDisappearTimer: function(name, index) {
  var pc = this.Get(name);
  if(pc != null) {
   if(!pc.DoHideWindow(index, false, ASPxClientPopupControlCloseReason.MouseOut))
    this.OverStop();
   this.ClearDisappearTimer();
  }
 },
 SaveCurrentMouseOverPos: function(evt) {
  this.overXPos = ASPx.Evt.GetEventX(evt);
  this.overYPos = ASPx.Evt.GetEventY(evt);
 },
 RegisterVisibleModalElement: function(element) {
  if(ASPx.Data.ArrayIndexOf(this.visibleModalElements, element) == -1)
   this.visibleModalElements.push(element);
 },
 UnregisterVisibleModalElement: function(element) {
  ASPx.Data.ArrayRemove(this.visibleModalElements, element);
 },
 RegisterVisibleWindow: function(element, popupControl, index) {
  if(ASPx.Data.ArrayIndexOf(this.visiblePopupWindowIds, element.id) == -1) {
   this.visiblePopupWindowIds.push(element.id);
   if(popupControl && popupControl.GetWindowCloseAction(index) == "MouseOut")
    aspxGetPopupControlCollection().InitOverObject(popupControl, index, null);
   this.OnRegisteredVisibleWindow(element);
  }
 },
 OnRegisteredVisibleWindow: function(element) {
  var elementIndex = ASPx.Data.ArrayIndexOf(this.visiblePopupWindowIds, element.id);
  if(this.PopupWindowIsModalByVisibleIndex(elementIndex))
   ASPx.RemoveFocus(element);
 },
 UnregisterVisibleWindow: function(element) {
  this.DeleteWindowFromZIndexOrder(element);
  ASPx.Data.ArrayRemove(this.visiblePopupWindowIds, element.id);
  var forceRecalculate = this.PopupWindowIsModalByID(element.id);
  this.RefreshTabIndexes(forceRecalculate);
  this.SkipCurrentActiveWindowElement(element);
 },
 AutoUpdateElementsPosition: function() {
  for(var i = 0; i < this.visiblePopupWindowIds.length; i++) {
   var popupWindow = this.GetPopupWindowFromID(this.visiblePopupWindowIds[i]);
   var popupControl = popupWindow.popupControl;
   if(popupControl != null && popupControl.InternalIsWindowVisible(popupWindow.windowIndex))
    popupControl.TryAutoUpdatePosition(popupWindow.windowIndex);
  }
 },
 LockWindowResizeByBodyScrollVisibilityChanging: function() {
  this.windowResizeByBodyScrollVisibilityChangingLockCount++;
 },
 UnlockWindowResizeByBodyScrollVisibilityChanging: function() {
  this.windowResizeByBodyScrollVisibilityChangingLockCount--;
 },
 WindowResizeByBodyScrollVisibilityChangingLocked: function() {
  return this.windowResizeByBodyScrollVisibilityChangingLockCount > 0;
 },
 HideAllWindows: function() {
  this.DoHideAllWindows(null, "", true, ASPxClientPopupControlCloseReason.API, 0);
 }
});
var ASPxClientPopupControlResizeState = {
 Resized: 0,
 Collapsed: 1,
 Expanded: 2,
 Maximized: 3,
 RestoredAfterMaximized: 4
};
var ASPxClientPopupControlCloseReason = {
 API: "API",
 CloseButton: "CloseButton",
 OuterMouseClick: "OuterMouseClick",
 MouseOut: "MouseOut",
 Escape: "Escape"
};
var popupControlCollection = null;
function aspxGetPopupControlCollection() {
 if(popupControlCollection == null)
  popupControlCollection = new ASPxClientPopupControlCollection();
 return popupControlCollection;
}
function _aspxScrollDifference(horizontal, vertical) {
 this.horizontal = horizontal;
 this.vertical = vertical;
}
function aspxPWEMOver(evt) {
 aspxGetPopupControlCollection().OnPWMouseOver(evt);
}
ASPx.PWHMDown = function(evt) {
 return ASPx.Evt.CancelBubble(evt);
};
ASPx.PWCBClick = function(evt, name, index) {
 var pc = aspxGetPopupControlCollection().Get(name);
 if(pc != null) pc.OnPWHBClickCore(evt, index, "OnCloseButtonClick");
};
ASPx.PWPBClick = function(evt, name, index) {
 var pc = aspxGetPopupControlCollection().Get(name);
 if(pc != null) pc.OnPWHBClickCore(evt, index, "OnPinButtonClick");
};
ASPx.PWRBClick = function(evt, name, index) {
 var pc = aspxGetPopupControlCollection().Get(name);
 if(pc != null) pc.OnPWHBClickCore(evt, index, "OnRefreshButtonClick");
};
ASPx.PWMNBClick = function(evt, name, index) {
 var pc = aspxGetPopupControlCollection().Get(name);
 if(pc != null) pc.OnPWHBClickCore(evt, index, "OnCollapseButtonClick");
};
ASPx.PWMXBClick = function(evt, name, index) {
 var pc = aspxGetPopupControlCollection().Get(name);
 if(pc != null) pc.OnPWHBClickCore(evt, index, "OnMaximizeButtonClick");
};
ASPx.PWDGMDown = function (evt, name, index) {
 var pc = aspxGetPopupControlCollection().Get(name);
 return ASPx.PWMDown(evt, name, index, pc.IsDraggingAllowed(index));
};
ASPx.PWGripMDown = function(evt, name, index) {
 aspxPWMDownCore(evt, name, index, false);
 return ASPx.PWHMDown(evt);
};
ASPx.PWMMove = function(evt, name, index) {
 aspxGetPopupControlCollection().OnPWMouseMove(evt, name, index);
};
ASPx.PWMDown = function(evt, name, index, isWindowContentDraggingAllowed) { 
 var pointOnScrollBar = false;
 var pc = aspxGetPopupControlCollection().Get(name);
 if(pc && pc.GetEnableContentScrolling(index)) {
  var rtl = pc.rtl && (ASPx.Browser.Firefox || ASPx.Browser.Opera);
  pointOnScrollBar = aspxPointOnElementScrollBar(pc.GetContentContainer(index), evt.clientX, evt.clientY, rtl);
 }
 aspxPWMDownCore(evt, name, index, isWindowContentDraggingAllowed, pointOnScrollBar);
 if(isWindowContentDraggingAllowed) { 
  aspxGetPopupControlCollection().OnDocumentMouseDown(evt); 
  if(typeof (ASPx.GetDropDownCollection) == "function")
   ASPx.GetDropDownCollection().OnDocumentMouseDown(evt); 
  if(!pointOnScrollBar) {
   if(!ASPx.Browser.WebKitTouchUI && ASPx.Evt.GetEventSource(evt).tagName == "IMG") 
    ASPx.Evt.PreventEvent(evt);
  }
 }
};
function aspxPWMDownCore(evt, name, index, isDraggingAllowed, pointOnScrollBar) {
 var pc = aspxGetPopupControlCollection().Get(name);
 if(pc != null) {
  pc.OnActivate(index, evt);
  pc.OnMouseDown(evt, index, isDraggingAllowed, pointOnScrollBar);
 }
}
function aspxPWMEMDown(evt) {
 var internalScrollableModalDiv = ASPx.Browser.AndroidDefaultBrowser ? ASPx.Evt.GetEventSource(evt) : null;
 var modalDiv = internalScrollableModalDiv ? internalScrollableModalDiv.parentNode : ASPx.Evt.GetEventSource(evt);
 if(modalDiv != null) 
  modalDiv.DXModalPopupControl.OnMouseDownModalElement(evt, modalDiv.DXModalPopupWindowIndex);
}
function aspxPEMEvent(evt) {
 var element = ASPx.PopupUtils.FindEventSourceParentByTestFunc(evt, aspxTestPopupControlElement);
 if(element != null) {
  var popupControl = element.DXPopupElementControl;
  var index = element.DXPopupWindowIndex;
  if(evt.type == "mousedown") {
   popupControl.SetIsPopuped(index, popupControl.InternalIsWindowVisible(index));
   aspxGetPopupControlCollection().OnMouseDown(evt);
  }
  else {
   var windowPopupAction = popupControl.GetWindowPopupAction(element.DXPopupWindowIndex);
   var leftMouseButtonAction = windowPopupAction == "LeftMouseClick" && ASPx.Evt.IsLeftButtonPressed(evt);
   var isAccessibleKeyboardAction = popupControl.accessibilityCompliant && ASPx.Evt.IsActionKeyPressed(evt);
   var rightMouseButtonAction = windowPopupAction == "RightMouseClick" && !ASPx.Evt.IsLeftButtonPressed(evt);
   if(leftMouseButtonAction || rightMouseButtonAction || isAccessibleKeyboardAction) {
    if(rightMouseButtonAction)
     ASPx.PopupUtils.PreventContextMenu(evt);
    var windowCloseAction = popupControl.GetWindowCloseAction(index);
    var isPopuped = popupControl.GetIsPopuped(index);
    var isNewPopupElement = popupControl.GetLastShownPopupElementIndex(index) != element.DXPopupElementIndex;
    if(isPopuped && isNewPopupElement) {
     popupControl.DoHideWindow(index, false, ASPxClientPopupControlCloseReason.OuterMouseClick);
     aspxGetPopupControlCollection().ClearDisappearTimer();
     isPopuped = false;
    }
    if(!(isPopuped && windowCloseAction == "OuterMouseClick")) {
     popupControl.DoShowWindow(index, element.DXPopupElementIndex, evt);
    }
    if(windowCloseAction == "MouseOut")
     aspxGetPopupControlCollection().InitOverObject(popupControl, element.DXPopupWindowIndex, evt);
    return false;
   }
  }
 }
}
ASPx.PopupElementMouseEvent = aspxPEMEvent;
function aspxPointOnElementScrollBar(element, x, y, rtl) {
 var scrollWidth = ASPx.GetVerticalScrollBarWidth();
 var hasHorizontalScroll = element.scrollWidth > element.clientWidth;
 var hasVerticalScroll = element.scrollHeight > element.clientHeight;
 var ceilX = rtl ? ASPx.GetAbsoluteX(element) + scrollWidth :
  ASPx.GetAbsoluteX(element) + (element.offsetWidth - ASPx.GetHorizontalBordersWidth(element));
 var ceilY = ASPx.GetAbsoluteY(element) + (element.offsetHeight - ASPx.GetVerticalBordersWidth(element));
 return (hasVerticalScroll && x >= ceilX - scrollWidth && x <= ceilX) ||
   (hasHorizontalScroll && y >= ceilY - scrollWidth && y <= ceilY);
}
ASPx.PCAStop = function(name, index) {
 var pc = aspxGetPopupControlCollection().Get(name);
 if(pc != null) pc.OnAnimationStop(index);
};
ASPx.PCIframeLoad = function(evt) {
 var srcElement = ASPx.Evt.GetEventSource(evt);
 if(srcElement) {
  var pcName = srcElement.popupControlName;
  var pcWndIndex = srcElement.pcWndIndex;
  if(pcName) {
   var pc = aspxGetPopupControlCollection().Get(pcName);
   if(pc) pc.OnIFrameLoad(pcWndIndex);
  }
 }
};
function aspxTestPopupWindowElement(element) {
 return !!element.DXPopupWindowElement;
}
function aspxTestPopupControlElement(element) {
 return element.DXPopupElementControl && ASPx.IsExists(element.DXPopupWindowIndex);
}
function aspxTestPopupControlOverElement(element) {
 var collection = aspxGetPopupControlCollection();
 var popupControl = collection.overControl;
 var index = collection.overWindowIndex;
 var windowId = popupControl.GetWindowElementId(index);
 if(element.id == windowId)
  return true;
 var popupElements = popupControl.GetPopupElementList(index);
 for(var i = 0; i < popupElements.length; i++)
  if(popupElements[i] == element)
   return true;
 return false;
}
ASPx.Evt.AttachEventToDocument("keydown", function(evt) {
 aspxGetPopupControlCollection().OnDocumentKeyDown(evt);
});
ASPx.Evt.AttachEventToDocument(ASPx.TouchUIHelper.touchMouseDownEventName, function(evt) {
 aspxGetPopupControlCollection().OnDocumentMouseDown(evt);
});
ASPx.Evt.AttachEventToDocument(ASPx.TouchUIHelper.touchMouseUpEventName, function(evt) {
 return aspxGetPopupControlCollection().OnMouseUp(evt);
});
ASPx.Evt.AttachEventToElement(window, ASPx.TouchUIHelper.touchMouseMoveEventName, function(evt) {
 if(typeof(aspxGetPopupControlCollection) != "undefined")
  aspxGetPopupControlCollection().OnMouseMove(evt);
}, false, !ASPx.Browser.WebKitTouchUI);
ASPx.Evt.AttachEventToDocument("mouseout", function(evt) {
 if(typeof (aspxGetPopupControlCollection) != "undefined")
  aspxGetPopupControlCollection().OnMouseOut(evt);
});
 ASPx.Evt.AttachEventToElement(window, "resize", function(evt) {
 aspxGetPopupControlCollection().OnResize(evt);
});
ASPx.Evt.AttachEventToElement(window, "scroll", function(evt) {
 aspxGetPopupControlCollection().OnScroll(evt);
});
ASPx.Evt.AttachEventToDocument("selectstart", function(evt) {
 var ret = aspxGetPopupControlCollection().OnSelectStart(evt);
 if(!ret) return false; 
});
var currViewPortSize = null,
 viewPortSizeInterval = null;
function getViewPortSize() {
 return { 
  w: window.innerWidth, 
  h: window.innerHeight,
  x: window.pageXOffset,
  y: window.pageYOffset
 }; 
}
function ensureViewPortSizeInterval() {
 if(!!viewPortSizeInterval) return;
 viewPortSizeInterval = setInterval(function() {
  var size = getViewPortSize();
  if(currViewPortSize && (size.w != currViewPortSize.w || size.h != currViewPortSize.h || size.x != currViewPortSize.x || size.y != currViewPortSize.y)) {
   var controlCollection = aspxGetPopupControlCollection();
   controlCollection.ForEachControl(function(popupControl) {
    if(popupControl.GetCanScrollViewPort(-1) && popupControl.IsVisible()) {
     popupControl.updateContentScrollIfNeeded(-1);
     popupControl.UpdatePosition();
    }
   });
  }
  currViewPortSize = size;
 }, 50);
}
window.ASPxClientPopupControlBase = ASPxClientPopupControlBase;
window.ASPxClientPopupControl = ASPxClientPopupControl;
window.ASPxClientPopupWindow = ASPxClientPopupWindow;
window.ASPxClientPopupWindowEventArgs = ASPxClientPopupWindowEventArgs;
window.ASPxClientPopupWindowCancelEventArgs = ASPxClientPopupWindowCancelEventArgs;
window.ASPxClientPopupWindowResizeEventArgs = ASPxClientPopupWindowResizeEventArgs;
window.ASPxClientPopupWindowPinnedChangedEventArgs = ASPxClientPopupWindowPinnedChangedEventArgs;
window.ASPxClientPopupControlCollection = ASPxClientPopupControlCollection;
window.ASPxClientPopupControlResizeState = ASPxClientPopupControlResizeState;
window.ASPxClientPopupControlCloseReason = ASPxClientPopupControlCloseReason;
ASPx.GetPopupControlCollection = aspxGetPopupControlCollection;
ASPx.PopupControlCssClasses = PopupControlCssClasses;
})();

(function() {
ASPx.activeCalendar = null;
ASPx.calendarMsPerDay = 86400000;
var calendarWeekCount = 6;
var viewsContainerClassName = "dxeCVC";
var emptyDateCellClassName = "dxeEmptyDC";
var ASPxClientCalendar = ASPx.CreateClass(ASPxClientEdit, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.SelectionChanging = new ASPxClientEvent();
  this.SelectionChanged = new ASPxClientEvent();
  this.VisibleMonthChanged = new ASPxClientEvent();
  this.CustomDisabledDate = new ASPxClientEvent();
  this.CellClick = new ASPxClientEvent();
  this.isMouseDown = false;  
  this.forceMouseDown = false;
  this.supportGestures = true;
  this.swipeGestureStated = false;
  this.updateAnimationProcessing = false;
  this.selection = new ASPxClientCalendarSelection();
  this.selectionTransaction = null;  
  this.selectionStartDate = null;
  this.selectionPrevStartDate = null;
  this.lastSelectedDate = null;
  this.selectionCtrl = false;
  this.selectionByWeeks = false;  
  this.titleFormatter = null;
  this.updateAnimationLockCount = 0;
  this.forceUpdate = false;
  this.needToSetCursor = true;
  this.visibleDate = new Date();
  this.visibleDates = {};
  this.selectedNavigationDates = {};
  this.firstDayOfWeek = 0;    
  this.columns = 1;
  this.rows = 1;
  this.switchToSingleMonthAtWindowInnerWidth = 0;
  this.enableFast = true;
  this.showFastPopup = false;
  this.pickerType = ASPx.DatePickerType.Days;
  this.maxViewType = ASPx.DatePickerType.Decades;
  this.initialViewType = ASPx.DatePickerType.Days;
  this.enableFastNavInlineAnimation = true;
  this.enableMulti = false;
  this.customDraw = false;  
  this.showWeekNumbers = true;
  this.showDayHeaders = true;
  this.isDateEditCalendar = false;
  this.sharedParameters = new ASPx.CalendarSharedParameters();
  this.visibleDateColumnOffset = 0;
  this.enableDaysViewPeriodNavigation = true;
  this.enableMonthsYearsViewPeriodNavigation = true;
  this.accessibilityHelper = null;
  this.sizingConfig.allowSetHeight = false;
  this.isDateChangingByKeyboard = false;
  this.MainElementClick = new ASPxClientEvent();
 },
 SetData: function(data){
  ASPxClientEdit.prototype.SetData.call(this, data);
  if(data.selection)
   this.selection.AddArray(data.selection);
  if(data.sharedParameters)
   this.SetProperties(data.sharedParameters, this.sharedParameters);
 },
 SetProperties: function(properties, obj) {
  ASPxClientEdit.prototype.SetProperties.call(this, properties, obj);
  this.selection.SetPickerType(this.pickerType);
 },
 Initialize: function() {
  this.selectionTransaction = new ASPxClientCalendarSelectionTransaction(this);
  this.selectionPrevStartDate = this.selection.GetFirstDate();
  ASPxClientEdit.prototype.Initialize.call(this);
  var mainElement = this.GetMainElement();
  ASPx.Evt.PreventElementDragAndSelect(mainElement, false, false);
  if(ASPx.Browser.Opera && !ASPx.Browser.WebKitFamily)
   ASPx.Selection.SetElementAsUnselectable(mainElement, true, true);
  this.EnsureTodayStyle();
  if(this.accessibilityCompliant)
   this.accessibilityHelper = new AccessibilityHelperCalendar(this);
 },
 InlineInitialize: function() {
  this.customDraw = this.sharedParameters.calendarCustomDraw;
  for(var i = this.pickerType; i <= this.maxViewType; i++) {
   this.visibleDates[i] = this.visibleDate;
   this.selectedNavigationDates[i] = this.visibleDate;
  }
  this.currentViewType = this.pickerType;
  this.CreateViews();
  if(this.NeedFastNavigation())
   this.InitializeFastNavigation();
  if(this.isSlideCallbackAnimationEnabled() && !this.isSwipeGesturesEnabled() && this.AnimationHelperExists())
   ASPx.AnimationHelper.getSlideAnimationContainer(this.GetCallbackAnimationElement(), true, false);
  ASPxClientEdit.prototype.InlineInitialize.call(this);
  if(!this.CustomDisabledDate.IsEmpty())
   this.Update();
  this.SetInitialVisibleDate();
  this.CreateAdaptivityCssRules();
  if(!this.isDateEditCalendar)
   this.SwitchToInitialView();
 },
 UseSpecialKeyboardHandling: function() {
  return true;
 },
 SwitchToInitialView: function() {
  if(this.pickerType !== this.initialViewType)
   this.SwitchToGreaterView(0, 0, this.initialViewType, true);
 },
 AddActiveViewHoverStateItems: function() {
  var activeViews = this.GetActiveViews();
  for(var key in activeViews) {
   if(activeViews.hasOwnProperty(key)) {
    var view = activeViews[key];
    view.AddHoverStateItems();
   }
  }
 },
 RemoveActiveViewHoverStateItems: function() {
  var activeViews = this.GetActiveViews();
  for(var key in activeViews) {
   if(activeViews.hasOwnProperty(key)) {
    var view = activeViews[key];
    view.RemoveHoverStateItems();
   }
  }
 },
 NeedFastNavigation: function() {
  return this.showFastPopup;
 },
 InitializeFastNavigation: function() {
  this.fastNavigation = this.CreateFastNavigation();
 },
 InitializeEvents: function() { 
  ASPxClientEdit.prototype.InitializeEvents.call(this);
  var clear = this.GetClearButton();
  if(clear)
   ASPx.Evt.AttachEventToElement(clear, "click", this.OnClearClick.bind(this));
  var today = this.GetTodayButton();
  if(today)
   ASPx.Evt.AttachEventToElement(today, "click", this.OnTodayClick.bind(this));
  if(this.isDateEditCalendar) {
   var ok = this.GetTimeSectionOkButton();
   if(ok)
    ASPx.Evt.AttachEventToElement(ok, "click", this.OnOkClick.bind(this));
   var cancel = this.GetTimeSectionCancelButton();
   if(cancel)
    ASPx.Evt.AttachEventToElement(cancel, "click", this.OnCancelClick.bind(this));
  }
 },
 CreateAdaptivityCssRules: function() {
  if (this.switchToSingleMonthAtWindowInnerWidth <= 0)
   return;
  var styleSheet = ASPx.GetCurrentStyleSheet();
  if (!styleSheet || !styleSheet.insertRule) return;
  var lastColumn = this.columns - 1;
  var rule =
  "@media all and (max-width: " + this.switchToSingleMonthAtWindowInnerWidth + "px) { " +
   "#" + this.name + ".dxeCVC > tbody > tr > td:not(.view-visible):not(#" + this.name + "_F) > * { display: none; }" +
   "#" + this.name + " .dxeCVC > tbody > tr > td:not(.view-visible):not(#" + this.name + "_F) > * { display: none; }" +
   ".view-visible #" + this.name + "_" + this.GetArrowButtonID("M", true, "0x0") + "," +
   ".view-visible #" + this.name + "_" + this.GetArrowButtonID("M", false, "0x" + lastColumn) + "," +
   ".view-visible #" + this.name + "_" + this.GetArrowButtonID("Y", true, "0x0") + "," +
   ".view-visible #" + this.name + "_" + this.GetArrowButtonID("Y", false, "0x" + lastColumn) + "," +
   ".view-visible #" + this.name + "_" + this.GetArrowButtonID("TP", true, "0x0") + "," +
   ".view-visible #" + this.name + "_" + this.GetArrowButtonID("TP", false, "0x" + lastColumn) +
    " { visibility: visible!important; } " +
   "}";
  styleSheet.insertRule(rule, styleSheet.cssRules.length);
 },
 OnNavigationImageClick: function(offset, isVisibleInAdaptiveOnly) {
  if(!isVisibleInAdaptiveOnly || (this.switchToSingleMonthAtWindowInnerWidth > 0 && window.innerWidth <= this.switchToSingleMonthAtWindowInnerWidth))
   this.OnShiftMonth(offset);
 },
 SetInitialVisibleDate: function() {
  this.initialVisibleDate = this.GetVisibleDate();
 },
 EnsureTodayStyle: function() {
  if(!ASPxClientCalendar.AreDatesEqual(this.serverCurrentDate, new Date())) {
   var activeViews = this.GetActiveViews();
   for(var key in activeViews) {
    if(activeViews.hasOwnProperty(key)) {
     var view = activeViews[key];
     view.EnsureTodayStyle();
    }
   }
  }
 },
 CreateFastNavigation: function() {
  return new ASPxClientCalendarFastNavigation(this);
 },
 GetCalendarRowElements: function() {
  if(!this.viewsContainer) {
   var mainElement = this.GetMainElement();
   var mainElementIsViewsContainer = ASPx.ElementHasCssClass(this.GetMainElement(), viewsContainerClassName);
   this.viewsContainer = mainElementIsViewsContainer ? mainElement : ASPx.GetNodeByClassName(mainElement, viewsContainerClassName);
  }
  return this.viewsContainer.rows;
 },
 GetCalendarViewCellElements: function(rowElement) {
  return rowElement.cells;
 },
 GetMonthTable: function(viewIdPostfix) {
  return this.GetChildElement("mt" + viewIdPostfix);
 },
 GetYearCell: function(viewIdPostfix) {
  return this.GetChildElement("yc" + viewIdPostfix);
 },
 GetYearCellChildArea: function(viewIdPostfix) {
  return this.GetChildElement("yt" + viewIdPostfix);
 },
 GetMonthCell: function(viewIdPostfix) {
  return this.GetChildElement("mc" + viewIdPostfix);
 },
 GetViewCell: function(viewIdPostfix) {
  if (this.switchToSingleMonthAtWindowInnerWidth <= 0)
   throw new Error("Not Implemented");
  return this.GetChildElement("v" + viewIdPostfix);
 },
 GetFastNavHeader: function(viewIdPostfix) {
  return this.GetChildElement("FNH" + viewIdPostfix);
 },
 GetFastNavHeaderTextElement: function(viewIdPostfix) {
  return this.GetChildElement("yt" + viewIdPostfix);
 },
 GetArrowButton: function(type, isNext, viewID) {
  return this.GetChildElement(this.GetArrowButtonID(type, isNext, viewID));
 },
 GetArrowButtonID: function(type, isNext, viewID) {
  var id = (isNext ? "N" : "P") + type.toUpperCase() + "C";
  if(this.IsMultiView() && viewID === undefined)
   id += "_0x" + (isNext ? this.columns - 1 : 0);
  else if (viewID)
   id += "_" + viewID;
  return id + "Img";
 },
 SetMonthTableCellContent: function(cell, content, isWeekNumber) {
  cell.innerHTML = content;
 },
 FindInputElement: function() {
  return this.accessibilityCompliant ? this.GetAccessibilityAssistantElement() : this.GetChildElement("KBS");
 },
 GetAccessibilityActiveElements: function() {
  return this.accessibilityCompliant ? [this.accessibilityHelper.GetActiveElement()] : [this.GetInputElement()];
 },
 GetClearButton: function() {
  return this.GetChildElement("BC");
 },
 GetTodayButton: function() {
  return this.GetChildElement("BT");
 },
 GetTimeSectionOkButton: function() {
  return this.GetChildElement("BO");
 },
 GetTimeSectionCancelButton: function() {
  return this.GetChildElement("BCN");
 },
 GetFooter: function() {
  return this.GetChildElement("F");
 },
 GetValue: function() {
  return this.selection.GetFirstDate();
 },
 GetValueString: function() {
  var value = this.GetValue();
  return value == null ? null : ASPx.DateUtils.GetInvariantDateString(value);
 },
 SetValue: function(date) {  
  if(date) {
   date = ASPxClientCalendarDateDisabledHelper.GetCorrectedDate(date);
   date = ASPxClientCalendar.GetCorrectedDate(date, this.pickerType);
   this.SetVisibleDate(date);
  }
  this.SetSelectedDate(date);
 },
 GetViewKey: function(row, column) {
  return row + "x" + column;
 },
 GetView: function(row, column, viewType) {
  if(!ASPx.IsExists(viewType))
   return this.GetActiveView(row, column);
  var key = this.GetViewKey(row, column);
  return this.GetViewByKey(viewType, key);
 },
 GetViewByKey: function(viewType, key) {
  return this.views[viewType][key];
 },
 GetActiveView: function(row, column) {
  var key = this.GetViewKey(row, column);
  return this.GetActiveViews()[key];
 },
 GetActiveViews: function() {
  return this.GetViews(this.currentViewType);
 },
 GetViews: function(viewType) {
  return this.views[viewType];
 },
 CreateViews: function() {
  this.views = { };
  var key;
  for(var i = this.pickerType; i <= this.maxViewType; i++) {
   if(i == this.pickerType)
    this.visibleDates[i] = this.visibleDate;
   this.views[i] = {};
   for(var row = 0 ; row < this.rows; row++) {
    for(var col = 0; col < this.columns; col++) {
     key = this.GetViewKey(row, col);
     var view = this.CreateView(i, row, col);
     view.Initialize();
     this.views[i][key] = view;
    }
   }
  }
  if (this.switchToSingleMonthAtWindowInnerWidth)
   this.GetActiveViews()["0x0"].EnsureVisible(true);
 },
 CreateView: function(viewType, row, column) {
  switch(viewType) {
   case ASPx.DatePickerType.Days:
    return new ASPxClientCalendarDaysView(this, row, column);
   case ASPx.DatePickerType.Months:
    return new ASPxClientCalendarMonthsView(this, row, column);
   case ASPx.DatePickerType.Years:
    return new ASPxClientCalendarYearsView(this, row, column);
   case ASPx.DatePickerType.Decades:
    return new ASPxClientCalendarDecadesView(this, row, column);
  }
 },
 ChangeView: function(newViewType, disableAnimation) {
  var needChangeMonthYearCellVisibility = this.currentViewType == ASPx.DatePickerType.Days || newViewType == ASPx.DatePickerType.Days;
  var needUpdateHoverStateItems = this.NeedUpdateHoverStateItemsOnViewChanging(this.currentViewType, newViewType);
  if(needUpdateHoverStateItems)
   this.RemoveActiveViewHoverStateItems();
  this.currentViewType = newViewType;
  if(needUpdateHoverStateItems)
   this.AddActiveViewHoverStateItems();
  if(needChangeMonthYearCellVisibility)
   this.ChangeMonthYearCellVisibility(newViewType == ASPx.DatePickerType.Days);
  if(this.enableFastNavInlineAnimation && !disableAnimation)
   this.PerformActiveViewAnimation();
  this.Update();
  ASPx.SetElementDisplay(this.GetClearButton(), !this.IsInlineFastNavigationActive());
 },
 NeedUpdateHoverStateItemsOnViewChanging: function(oldViewType, newViewType) {
  return this.pickerType !== ASPx.DatePickerType.Days && (oldViewType === this.pickerType || newViewType === this.pickerType);
 },
 PerformActiveViewAnimation: function() {
  var activeViews = this.GetActiveViews();
  for(var key in activeViews) {
   if(activeViews.hasOwnProperty(key)) {
    var view = activeViews[key];
    ASPx.AnimationHelper.fadeIn(view.GetMainElement());
   }
  }
 },
 ChangeMonthYearCellVisibility: function(showMonthCell) {
  var activeViews = this.GetActiveViews();
  for(var key in activeViews) {
   if(activeViews.hasOwnProperty(key)) {
    this.ChangeViewMonthYearCellVisibility(key, showMonthCell);
   }
  }
  var spacers = ASPx.GetNodesByClassName(this.GetMainElement(), "dxeCHS");
  spacers.forEach(function(spacer) { this.SetElementVisible(spacer, showMonthCell); }.aspxBind(this));
 },
 ChangeViewMonthYearCellVisibility: function(key, showMonthCell) {
  var monthView = this.GetViewByKey(ASPx.DatePickerType.Days, key);
  var yearView = this.GetViewByKey(ASPx.DatePickerType.Months, key);
  var monthViewMainElement = monthView.GetMainElement();
  var yearViewMainElement = yearView.GetMainElement();
  if(!showMonthCell) {
   yearViewMainElement.style.width = monthViewMainElement.offsetWidth + "px";
   yearViewMainElement.style.height = monthViewMainElement.offsetHeight + "px";
  }
  this.SetElementVisible(monthViewMainElement, showMonthCell);
  this.SetElementVisible(yearViewMainElement, !showMonthCell);
  this.SetViewMainElementParentsVisibility(monthViewMainElement, yearViewMainElement, showMonthCell);
  var monthViewNavigationCells = monthView.GetNavigationCells();
  var yearViewNavigationCells = yearView.GetNavigationCells();
  for(var i = 0; i < monthViewNavigationCells.length; i++)
   if(monthViewNavigationCells[i])
    this.SetElementVisible(monthViewNavigationCells[i], showMonthCell);
  for(var i = 0; i < yearViewNavigationCells.length; i++)
   if(yearViewNavigationCells[i])
    this.SetElementVisible(yearViewNavigationCells[i], !showMonthCell);
 },
 SetViewMainElementParentsVisibility: function(monthViewMainElement, yearViewMainElement, showMonthCell) {
  this.SetElementVisible(monthViewMainElement.parentNode, showMonthCell);
  this.SetElementVisible(yearViewMainElement.parentNode, !showMonthCell);
 },
 SetElementVisible: function(element, visible) {
  ASPx.SetElementDisplay(element, visible);
 },
 IsFastNavigationActive: function() {
  return this.IsPopupFastNavigationActive() || this.IsInlineFastNavigationActive();
 },
 IsPopupFastNavigationActive: function() {
  return this.fastNavigation && this.fastNavigation.IsActive();
 },
 IsInlineFastNavigationActive: function() {
  return this.currentViewType != this.pickerType;
 },
 IsDateSelected: function(date) {
  return this.selection.Contains(date);
 },
 IsDateVisible: function(date) {
  var startDate = ASPxClientCalendar.CloneDate(this.GetActiveView(0, 0).visibleDate);
  startDate.setDate(1);  
  var endDate = this.GetActiveView(this.rows - 1, this.columns - 1).GetMaxVisibleDate();
  return (date >= startDate) && (date < endDate);
 },
 IsDateWeekend: function(date) {
  var day = date.getDay();
  return day == 0 || day == 6;
 },
 IsCustomDisabledDatesViaCallback: function(){
  return (this.callBack && this.IsCustomDisabledDateEventEmpty() && this.sharedParameters.disabledDates.length > 0);
 },
 HasCallback: function () {
  if (this.isDateEditCalendar)
   return this.customDraw;
  else
   return this.callBack;
 },
 IsCustomDisabledDateEventEmpty: function() {
  if(this.isDateEditCalendar)
   return ASPxClientDateEdit.active == null || ASPxClientDateEdit.active.CalendarCustomDisabledDate.IsEmpty();
  return this.CustomDisabledDate.IsEmpty();
 },
 IsDateDisabled: function(date) {
  return ASPxClientCalendarDateDisabledHelper.IsDateDisabled(this.sharedParameters, date, function(d) { return this.OnCustomDisabledDate(d); }.aspxBind(this), this.currentViewType, this.pickerType);
 },
 IsMultiView: function() {
  return this.columns > 1 || this.rows > 1;
 },
 UpdateCustomDisabledDatesOnCallback: function(callbackResult) {
  var callbackDatesInfo = eval(callbackResult[callbackResult.length - 1]);
  this.RemoveVisibleDisabledDates(callbackDatesInfo);
  this.sharedParameters.disabledDates = this.sharedParameters.disabledDates
   .concat(callbackDatesInfo.disabledDates);
 },
 RemoveVisibleDisabledDates: function(callbackDatesInfo) {
  var firstVisibleDate = callbackDatesInfo.firstVisibleDate;
  var lastVisibleDate = callbackDatesInfo.lastVisibleDate;
  var currentVisibleDate = ASPxClientCalendar.CloneDate(firstVisibleDate);
  while(currentVisibleDate.getTime() <= lastVisibleDate.getTime()) {
   var disabledDateIndex = this.GetDisabledDateIndex(currentVisibleDate);
   if(disabledDateIndex > -1)
    this.sharedParameters.disabledDates.splice(disabledDateIndex, 1);
   currentVisibleDate = ASPxClientCalendar.GetNextDate(currentVisibleDate, this.pickerType);
  }
 },
 GetDisabledDateIndex: function(disabledDate) {
  return ASPx.Data.ArrayIndexOf(this.sharedParameters.disabledDates, disabledDate, function(date) {
   return ASPxClientCalendar.AreDatesEqual(date, disabledDate);
  });
 },
 ShowLoadingPanel: function(){
  this.CreateLoadingPanelWithAbsolutePosition(this.GetMainElement().parentNode, this.GetLoadingPanelOffsetElement(this.GetMainElement()));
 },
 ShowLoadingDiv: function () {
  this.CreateLoadingDiv(this.GetMainElement().parentNode, this.GetMainElement());
 },
 GetCallbackAnimationElement: function() {
  return !this.IsMultiView() ? this.GetActiveView(0, 0).GetAnimatedElement() : this.GetMainElement();
 },
 CanHandleGesture: function(evt) {
  if(!this.AllowShiftVisiblePeriod())
   return false;
  var source = ASPx.Evt.GetEventSource(evt);
  var element = !this.IsMultiView() ? this.GetActiveView(0, 0).GetMainElement() : this.GetMainElement();
  return ASPx.GetIsParent(element, source);
 },
 AllowStartGesture: function() {
  return ASPxClientControl.prototype.AllowStartGesture.call(this) && (!this.enableMulti || !this.selectionTransaction.isActive) && !this.updateAnimationProcessing;
 },
 StartGesture: function() {
  this.swipeGestureStated = true;
 },
 AllowExecuteGesture: function(value) {
  return true;
 },
 ExecuteGesture: function(value, count) {
  if(!count) count = 1;
  this.OnShiftMonth((value > 0 ? -1 : 1) * count);
 }, 
 Update: function() {
  if(this.customDraw && !this.clientUpdate && !this.IsInlineFastNavigationActive()) {
   if(!this.isDateEditCalendar)
    this.UpdateFromServer();
   else if (this.sharedParameters.currentDateEdit != null)
    this.sharedParameters.currentDateEdit.CreateUpdateCallback();
  }
  else {
   if(this.IsAnimationEnabled() && !this.forceUpdatingOnMouseOver)
    this.StartBeforeUpdateAnimation();
   else
    this.UpdateInternal();
  }
 },
 UpdateFromServer: function() {
  if(this.callBack) {
   this.ShowLoadingElements();
   this.CreateCallback(this.sharedParameters.GetUpdateCallbackParameters());
  }
  else {
   this.SendPostBack("");
  }
 },
 UpdateInternal: function() {
  if(this.NeedCalculateSelectionOnUpdating())
   this.selection.Clear();
  var activeViews = this.GetActiveViews();
  for(var key in activeViews) {
   if(activeViews.hasOwnProperty(key)) {
    var view = activeViews[key];
    if(!view.isASPxClientCalendarView) continue;
    view.Update();
    if (this.switchToSingleMonthAtWindowInnerWidth)
     view.EnsureVisible(view.GetIndex() === this.visibleDateColumnOffset);
   }
  }
  if(this.IsAnimationEnabled() && !this.forceUpdatingOnMouseOver)
   this.StartAfterUpdateAnimation();
 },
 AnimationHelperExists: function() {
  return typeof (ASPx.AnimationHelper) !== "undefined";
 },
 IsAnimationEnabled: function() {
  return (this.isSlideCallbackAnimationEnabled() || this.enableCallbackAnimation) && !this.IsUpdateAnimationLocked();
 },
 LockUpdateAnimation: function() {
  this.updateAnimationLockCount++;
 },
 UnlockUpdateAnimation: function() {
  this.updateAnimationLockCount--;
 },
 IsUpdateAnimationLocked: function() {
  return this.updateAnimationLockCount > 0;
 },
 StartBeforeUpdateAnimation: function() {
  this.updateAnimationProcessing = true;
  var element = this.GetCallbackAnimationElement();
  if(!element.aspxTransition) {
   if(this.isSlideCallbackAnimationEnabled() && this.slideAnimationDirection)
    ASPx.AnimationHelper.slideOut(element, this.slideAnimationDirection, this.FinishBeforeUpdateAnimation.aspxBind(this), ASPx.AnimationEngineType.JS, this.rtl);
   else if(this.enableCallbackAnimation)
    ASPx.AnimationHelper.fadeOut(element, this.FinishBeforeUpdateAnimation.aspxBind(this));
  }
  if(this.updateAnimationProcessing)
   this.FinishBeforeUpdateAnimation();
 },
 FinishBeforeUpdateAnimation: function() {
  this.UpdateInternal();
 },
 StartAfterUpdateAnimation: function() {
  var element = this.GetCallbackAnimationElement();
  if (this.isSlideCallbackAnimationEnabled() && this.slideAnimationDirection)
   ASPx.AnimationHelper.slideIn(element, this.slideAnimationDirection, this.FinishAfterUpdateAnimation.aspxBind(this), ASPx.AnimationEngineType.JS, this.rtl);
  else if(this.enableCallbackAnimation) 
   ASPx.AnimationHelper.fadeIn(element, this.FinishAfterUpdateAnimation.aspxBind(this));
  else
   this.FinishAfterUpdateAnimation();
 },
 FinishAfterUpdateAnimation: function() {
  this.updateAnimationProcessing = false;
  this.slideAnimationDirection = null;
  this.CheckRepeatGesture();
 },
 ApplySelectionByDiff: function(selection, save) {
  var toShow = [ ];
  var toHide = [ ];
  var dates =  selection.GetDates();
  var oldDates = this.selection.GetDates();
  var selectionEdges = this.sharedParameters.dateRangeMode ? ASPx.Data.ArrayGetIntegerEdgeValues(dates) : null;
  var oldSelectionEdges = this.sharedParameters.dateRangeMode ? ASPx.Data.ArrayGetIntegerEdgeValues(oldDates) : null;
  var date;
  for(var i = 0; i < dates.length; i++) {
   date = dates[i];
   var isEdgeDateInSelection = selectionEdges
    && ASPxClientCalendar.IsFirstDateEqualToAnyOther(dates[i], selectionEdges.start, selectionEdges.end);
   var isEdgeDateInOldSelection = oldSelectionEdges
    && ASPxClientCalendar.IsFirstDateEqualToAnyOther(dates[i], oldSelectionEdges.start, oldSelectionEdges.end);
   if (!this.selection.Contains(date)
    || isEdgeDateInSelection && !isEdgeDateInOldSelection
    || !isEdgeDateInSelection && isEdgeDateInOldSelection)
    toShow.push(date);
  }
  for(var i = 0; i < oldDates.length; i++) {
   date = oldDates[i];
   if(!selection.Contains(date))
    toHide.push(date);
  }
  var activeViews = this.GetActiveViews();
  for(var key in activeViews) {
   if(activeViews.hasOwnProperty(key)) {
    var view = activeViews[key];
    if(!view.isASPxClientCalendarView) continue;
    view.UpdateSelection(toHide, false, selectionEdges);
    view.UpdateSelection(toShow, true, selectionEdges);
   }
  }
  this.selection.Assign(selection);
  if(this.accessibilityCompliant)
   this.accessibilityHelper.PronounceDates(dates);
 },
 GetDayInRangeClassName: function() {
  return ASPxClientCalendarView.DayInRangeClassName;
 },
 NeedApplySelectionToDayInRange: function() {
  return true;
 },
 ImportEtalonStyle: function(info, suffix) {
  var cell = this.GetEtalonStyleCell(suffix);
  if(ASPx.IsExistsElement(cell))
   info.Import(cell);   
 },
 GetEtalonStyleCell: function(name) {
  return ASPx.CacheHelper.GetCachedElementById(this, this.name + "_EC_" + name);
 },
 CanApplyDayCellStyle: function(suffix, isCurrentMonthDay) {
  return true;
 },
 UpdateStateObject: function() {
  var stateObject = { };
  var visibleDate = ASPxClientCalendarDateDisabledHelper.GetCorrectedDate(this.visibleDate);
  visibleDate = ASPxClientCalendar.GetCorrectedDate(visibleDate, this.pickerType);
  var initialVisibleDate = ASPxClientCalendarDateDisabledHelper.GetCorrectedDate(this.initialVisibleDate);
  initialVisibleDate = ASPxClientCalendar.GetCorrectedDate(initialVisibleDate, this.pickerType);
  stateObject.visibleDate = ASPx.DateUtils.GetInvariantDateString(visibleDate);
  stateObject.initialVisibleDate = ASPx.DateUtils.GetInvariantDateString(initialVisibleDate);
  stateObject.selectedDates = [];
  if(this.selection.count > 0) {
   var dates = this.selection.GetDates();
   for(var i = 0; i < dates.length; i++)
    stateObject.selectedDates.push(ASPx.DateUtils.GetInvariantDateString(dates[i]));
  }
  this.UpdateStateObjectWithObject(stateObject);
 },
 GetStateHiddenFieldName: function() {
  return this.uniqueID;
 },
 FormatDates: function(dates, separator) {
  var result = "";
  for(var i = 0; i < dates.length; i++) {
   if(result.length > 0)
    result += separator;
   result += ASPx.DateUtils.GetInvariantDateString(dates[i]);     
  }
  return result;
 },
 InitializeKeyHandlers: function() {
  this.AddKeyDownHandler(ASPx.Key.Enter, "OnEnterDown");
  this.AddKeyDownHandler(ASPx.Key.Esc, "OnEscape");
  this.AddKeyDownHandler(ASPx.Key.PageUp, "OnPageUp");
  this.AddKeyDownHandler(ASPx.Key.PageDown, "OnPageDown");
  this.AddKeyDownHandler(ASPx.Key.End, "OnEndKeyDown");
  this.AddKeyDownHandler(ASPx.Key.Home, "OnHomeKeyDown");
  this.AddKeyDownHandler(ASPx.Key.Left, this.rtl ? "OnArrowRight" : "OnArrowLeft");
  this.AddKeyDownHandler(ASPx.Key.Right, this.rtl ? "OnArrowLeft" : "OnArrowRight");
  this.AddKeyDownHandler(ASPx.Key.Up, "OnArrowUp");
  this.AddKeyDownHandler(ASPx.Key.Down, "OnArrowDown");
  this.AddKeyPressHandler(ASPx.Key.Enter, "OnEnterPressed");
 },
 OnArrowUp: function(evt) {
  if(this.IsPopupFastNavigationActive())
   this.fastNavigation.OnArrowUp(evt);
  else if(!this.GetReadOnly() || this.IsInlineFastNavigationActive()) {
   var newDate;
   if(!this.IsInlineFastNavigationActive()) {
    newDate = this.GetNearestDayForToday();
    if(this.lastSelectedDate)
     newDate = this.currentViewType == ASPx.DatePickerType.Days ? ASPxClientCalendar.GetPrevWeekDate(this.lastSelectedDate) : this.GetNearestDateFromUp(this.lastSelectedDate);
   }
   else
    newDate = this.GetNearestDateFromUp(this.selectedNavigationDates[this.currentViewType]);
   if(!ASPxClientCalendarDateDisabledHelper.IsDateWithinBoundaries(newDate))
    return true;
   if(this.CorrectVisibleMonth(newDate, false))
    this.DoKeyboardSelection(newDate, evt.shiftKey, "up");
  }
  return true;
 }, 
 OnArrowDown: function(evt) {
  if(this.IsPopupFastNavigationActive())
   this.fastNavigation.OnArrowDown(evt);
  else if(!this.GetReadOnly() || this.IsInlineFastNavigationActive()) {
   var newDate;
   if(!this.IsInlineFastNavigationActive()) {
    newDate = this.GetNearestDayForToday();
    if(this.lastSelectedDate)
     newDate = this.currentViewType == ASPx.DatePickerType.Days ? ASPxClientCalendar.GetNextWeekDate(this.lastSelectedDate) : this.GetNearestDateFromDown(this.lastSelectedDate);
   }
   else
    newDate = this.GetNearestDateFromDown(this.selectedNavigationDates[this.currentViewType]);
   if(this.CorrectVisibleMonth(newDate, true))
    this.DoKeyboardSelection(newDate, evt.shiftKey, "down");
  }
  return true;
 }, 
 OnArrowLeft: function(evt) {
  if(this.IsPopupFastNavigationActive())
   this.fastNavigation.OnArrowLeft(evt);
  else if(!this.GetReadOnly() || this.IsInlineFastNavigationActive()) {
   var newDate;
   if(!this.IsInlineFastNavigationActive()) {
    newDate = this.GetNearestDayForToday();
    if(this.lastSelectedDate)
     newDate = this.currentViewType == ASPx.DatePickerType.Days ? ASPxClientCalendar.GetYesterDate(this.lastSelectedDate) : this.GetNearestDateFromLeft(this.lastSelectedDate);
   }
   else
    newDate = this.GetNearestDateFromLeft(this.selectedNavigationDates[this.currentViewType]);
   if(!ASPxClientCalendarDateDisabledHelper.IsDateWithinBoundaries(newDate))
    return true;
   if(this.CorrectVisibleMonth(newDate, false))
    this.DoKeyboardSelection(newDate, evt.shiftKey, "left");
  }
  return true;
 }, 
 OnArrowRight: function(evt) {
  if(this.IsPopupFastNavigationActive())
   this.fastNavigation.OnArrowRight(evt);
  else if(!this.GetReadOnly() || this.IsInlineFastNavigationActive()) {
   var newDate;
   if(!this.IsInlineFastNavigationActive()) {
    newDate = this.GetNearestDayForToday();
    if(this.lastSelectedDate)
     newDate = this.currentViewType == ASPx.DatePickerType.Days ? ASPxClientCalendar.GetTomorrowDate(this.lastSelectedDate) : this.GetNearestDateFromRight(this.lastSelectedDate);
   }
   else
    newDate = this.GetNearestDateFromRight(this.selectedNavigationDates[this.currentViewType]);
   if(this.CorrectVisibleMonth(newDate, true))
    this.DoKeyboardSelection(newDate, evt.shiftKey, "right");
  }
  return true;
 }, 
 OnCallback: function(result){
  var rowElements = this.GetCalendarRowElements();
  for(var rowIndex = 0; rowIndex < this.rows; rowIndex++) {
   var viewCellElements = this.GetCalendarViewCellElements(rowElements[rowIndex]);
   for(var cellIndex = 0; cellIndex < this.columns; cellIndex++)
    ASPx.SetInnerHtml(viewCellElements[cellIndex], result[rowIndex * this.columns + cellIndex]);
  }
  if(this.sharedParameters.hasCustomDisabledDatesViaCallback)
   this.UpdateCustomDisabledDatesOnCallback(result);
  this.CreateViews();
  this.InitializeGestures();
  this.InitializeEnabled();
  if(!this.isDateEditCalendar)
   this.SetFocus();
  if(!this.sharedParameters.calendarCustomDraw)
   this.UpdateInternal();
  this.EnsureTodayStyle();
  this.SetInitialVisibleDate();
 }, 
 OnPageUp: function(evt) {
  if(this.IsPopupFastNavigationActive())
   this.fastNavigation.OnPageUp(evt);
  else if(!this.GetReadOnly() || this.IsInlineFastNavigationActive()) {
   var newDate;
   if(this.IsInlineFastNavigationActive())
    newDate = this.GetPageUpPageDownResultDate(true, evt.shiftKey, this.selectedNavigationDates[this.currentViewType]);
   else if(this.lastSelectedDate)
    newDate = this.GetPageUpPageDownResultDate(true, evt.shiftKey, this.lastSelectedDate);
   else
    newDate = this.GetNearestDayForToday();
   if(!ASPxClientCalendarDateDisabledHelper.IsDateWithinBoundaries(newDate))
    return true;
   if(this.CorrectVisibleMonth(newDate, false))
    this.DoKeyboardSelection(newDate, false, "left");
  }
  return true; 
 },
 OnPageDown: function(evt) {
  if(this.IsPopupFastNavigationActive())
   this.fastNavigation.OnPageDown(evt);
  else if(!this.GetReadOnly() || this.IsInlineFastNavigationActive()) {
   var newDate;
   if(this.IsInlineFastNavigationActive())
    newDate = this.GetPageUpPageDownResultDate(false, evt.shiftKey, this.selectedNavigationDates[this.currentViewType]);
   else if(this.lastSelectedDate)
    newDate = this.GetPageUpPageDownResultDate(false, evt.shiftKey, this.lastSelectedDate);
   else
    newDate = this.GetNearestDayForToday();
   if(!ASPxClientCalendarDateDisabledHelper.IsDateWithinBoundaries(newDate))
    return true;
   if(this.CorrectVisibleMonth(newDate, true))
    this.DoKeyboardSelection(newDate, false, "right");
  }
  return true;
 },
 OnEndKeyDown: function(evt) {
  if(!this.GetReadOnly() && !this.IsPopupFastNavigationActive() || this.IsInlineFastNavigationActive()) {
   var currentDate;
   if(this.IsInlineFastNavigationActive())
    currentDate = this.selectedNavigationDates[this.currentViewType];
   else
    currentDate = this.lastSelectedDate ?
     ASPxClientCalendar.CloneDate(this.lastSelectedDate) : this.GetNearestDayForToday();
   var newDate;
   if(this.currentViewType == ASPx.DatePickerType.Days)
    newDate = ASPxClientCalendar.GetLastDayInWeek(currentDate, this.firstDayOfWeek);    
   if(this.currentViewType == ASPx.DatePickerType.Months)
    newDate = new Date(currentDate.getFullYear(), 11, 1);
   if(this.currentViewType == ASPx.DatePickerType.Years)
    newDate = new Date(ASPxClientCalendar.GetDecadeStartYear(currentDate.getFullYear()) + 9, 0, 1);
   if(this.currentViewType == ASPx.DatePickerType.Decades)
    newDate = new Date(ASPxClientCalendar.GetCenturyStartYear(currentDate.getFullYear()) + 90, 0, 1);
   if(this.CorrectVisibleMonth(newDate, true))
    this.DoKeyboardSelection(newDate, evt.shiftKey, "left");
  }
  return true;
 },
 OnHomeKeyDown: function(evt) {
  if(!this.GetReadOnly() && !this.IsPopupFastNavigationActive() || this.IsInlineFastNavigationActive()) {
   var currentDate;
   if(this.IsInlineFastNavigationActive())
    currentDate = this.selectedNavigationDates[this.currentViewType];
   else
    currentDate = this.lastSelectedDate ?
     ASPxClientCalendar.CloneDate(this.lastSelectedDate) : this.GetNearestDayForToday();
   var newDate;
   if(this.currentViewType == ASPx.DatePickerType.Days)
    newDate = ASPxClientCalendar.GetFirstDayInWeek(currentDate, this.firstDayOfWeek);
   if(this.currentViewType == ASPx.DatePickerType.Months)
    newDate = new Date(currentDate.getFullYear(), 0, 1);
   if(this.currentViewType == ASPx.DatePickerType.Years)
    newDate = new Date(ASPxClientCalendar.GetDecadeStartYear(currentDate.getFullYear()), 0, 1);
   if(this.currentViewType == ASPx.DatePickerType.Decades)
    newDate = new Date(ASPxClientCalendar.GetCenturyStartYear(currentDate.getFullYear()), 0, 1);
   if(this.CorrectVisibleMonth(newDate, false))
    this.DoKeyboardSelection(newDate, evt.shiftKey, "right");
  }
  return true;
 },
 GetPageUpPageDownResultDate: function(isPageUp, shiftKey, currentDate) {
  var getNeighbourMonthDateAction = isPageUp ? ASPxClientCalendar.GetPrevMonthDate : ASPxClientCalendar.GetNextMonthDate;
  var getNeighbourYearDateAction = isPageUp ? ASPxClientCalendar.GetPrevYearDate : ASPxClientCalendar.GetNextYearDate;
  var offsetYearSign = isPageUp ? -1 : 1;
  if(this.currentViewType == ASPx.DatePickerType.Days)
   return shiftKey ? getNeighbourYearDateAction(currentDate) : getNeighbourMonthDateAction(currentDate);
  if(this.currentViewType == ASPx.DatePickerType.Months)
   return ASPxClientCalendar.GetDateWithYearOffset(currentDate, offsetYearSign);
  if(this.currentViewType == ASPx.DatePickerType.Years)
   return ASPxClientCalendar.GetDateWithYearOffset(currentDate, offsetYearSign * 10);
  if(this.currentViewType == ASPx.DatePickerType.Decades)
   return ASPxClientCalendar.GetDateWithYearOffset(currentDate, offsetYearSign * 100);
 },
 OnEnterDown: function() {
  var isPopupFastNavActive = this.IsPopupFastNavigationActive();
  var isInlineFastNavActive = this.IsInlineFastNavigationActive();
  if(isPopupFastNavActive || isInlineFastNavActive) {
   if(isPopupFastNavActive)
    this.fastNavigation.ApplyChanges();
   else {
    var selectedNavigationDate = this.selectedNavigationDates[this.currentViewType];
    this.SwitchToLessView();
    this.RaiseCellClick(selectedNavigationDate);
   }
   return true;
  }
  return false;
 },
 OnEnterPressed: function() {
  return true;
 },
 OnEscape: function() {
  this.CancelFastNavigation();
  return true;
 },
 CancelFastNavigation: function() {
  var isPopupFastNavActive = this.IsPopupFastNavigationActive();
  var isInlineFastNavActive = this.IsInlineFastNavigationActive();
  if(isPopupFastNavActive || isInlineFastNavActive) {
   if(isPopupFastNavActive)
    this.fastNavigation.CancelChanges();
   else
    this.ChangeView(this.currentViewType - 1);
  }
  if(!this.IsInlineFastNavigationActive())
   this.OnMainElementClick();
 },
 OnShiftMonth: function(offset, keepVisibleInSingleMode) {
  if(offset) {
   var date = this.GetNewVisibleDateByOffset(offset);
   if(this.IsInlineFastNavigationActive())
    this.selectedNavigationDates[this.currentViewType] = this.GetNewSelectedNavigationDateByOffset(offset);
   this.OnVisibleMonthChanged(date);
   if (keepVisibleInSingleMode)
    this.visibleDateColumnOffset = Math.min(Math.abs(offset), this.columns - 1);
  }
 },
 GetNewVisibleDateByOffset: function(offset) {
  return this.GetNewVisibleOrSelectedNavigationDateByOffset(this.visibleDates[this.currentViewType], offset);
 },
 GetNewSelectedNavigationDateByOffset: function(offset) {
  return this.GetNewVisibleOrSelectedNavigationDateByOffset(this.selectedNavigationDates[this.currentViewType], offset);
 },
 GetNewVisibleOrSelectedNavigationDateByOffset: function(currentDate, offset) {
  var date = ASPxClientCalendar.CloneDate(currentDate);
  if(this.currentViewType == ASPx.DatePickerType.Days)
   return ASPxClientCalendar.AddMonths(date, offset);
  if(this.currentViewType == ASPx.DatePickerType.Months)
   return ASPxClientCalendar.AddYears(date, offset);
  if(this.currentViewType == ASPx.DatePickerType.Years)
   return ASPxClientCalendar.AddYears(date, offset * 10);
  if(this.currentViewType == ASPx.DatePickerType.Decades)
   return ASPxClientCalendar.AddYears(date, offset * 100);
 },
 OnDayMouseDown: function(date, shift, ctrl, byWeeks) {
  if(!this.IsInlineFastNavigationActive())
   this.OnPickerViewMouseDown(date, shift, ctrl, byWeeks);
  else {
   this.selectedNavigationDates[this.currentViewType] = date;
   this.SwitchToLessView();
  }
  this.RaiseCellClick(date);
 },
 OnPickerViewMouseDown: function(date, shift, ctrl, byWeeks) {
  this.isMouseDown = true;
  this.selectionByWeeks = byWeeks;
  if(!this.enableMulti && this.isSwipeGesturesEnabled())
   return;
  this.selectionTransaction.Start();
  if(this.enableMulti) {
   if(ctrl) {
    this.selectionCtrl = true;
    this.selectionTransaction.CopyFromBackup();
   } else
    this.selectionCtrl = false;
   if(shift && this.selectionPrevStartDate) {
    this.selectionStartDate = this.selectionPrevStartDate;         
    this.selectionTransaction.selection.AddRange(this.selectionStartDate, date);
    if(byWeeks)
     this.selectionTransaction.selection.AddWeek(date);
   } else {
    this.selectionStartDate = date;
    this.selectionPrevStartDate = date;
    if(byWeeks)
     this.selectionTransaction.selection.AddWeek(date);
    else
     this.selectionTransaction.selection.Add(date);
   }
  } 
  else 
   this.selectionTransaction.selection.Add(date);
  if(!ASPxClientCalendarDateDisabledHelper.IsDateWithinBoundaries(date))
   this.selectionTransaction.CopyFromBackup();
  if(this.enableMulti)
   this.RemoveDisabledDatesFromSelection(this.selectionTransaction.selection);
  this.ApplySelectionByDiff(this.selectionTransaction.selection, false);
 },
 OnDayMouseOver: function(date) {
  if(this.IsInlineFastNavigationActive())
   return;
  if (!this.sharedParameters.DaysSelectingOnMouseOver.IsEmpty()) {
   var args = new ASPxDaysSelectingOnMouseOverEventArgs(date);
   this.sharedParameters.DaysSelectingOnMouseOver.FireEvent(this, args);
   if (args.cancel)
    return;
   this.selectionStartDate = args.selectionStartDate;
   date = args.overDate;
  }
  if (!this.enableMulti && this.isSwipeGesturesEnabled() && !this.sharedParameters.dateRangeMode)
   return;
  if (this.enableMulti || this.sharedParameters.dateRangeMode) {
   if(this.selectionCtrl)
    this.selectionTransaction.CopyFromBackup();
   else
    this.selectionTransaction.selection.Clear();
   if(this.sharedParameters.dateRangeMode)
    this.CalculateRangeSelectionOnMouseOver(date);
   else
    this.selectionTransaction.selection.AddRange(this.selectionStartDate, date);
   if(this.selectionByWeeks) {
    this.selectionTransaction.selection.AddWeek(date);
    this.selectionTransaction.selection.AddWeek(this.selectionStartDate);
   }
  } 
  else {
   this.selectionTransaction.selection.Clear();
   this.selectionTransaction.selection.Add(date);
  }
  if (this.enableMulti || this.sharedParameters.dateRangeMode)
   this.RemoveDisabledDatesFromSelection(this.selectionTransaction.selection);
  this.ApplySelectionByDiff(this.selectionTransaction.selection, false);
  if (this.updateDayStylesTwiceOnMouseOver)
   this.ForceUpdateOnMouseOver();
 },
 ForceUpdateOnMouseOver: function() {
  this.forceUpdatingOnMouseOver = true;
  try {
   this.Update();
  }
  finally {
   this.forceUpdatingOnMouseOver = false;
  }
 },
 CalculateRangeSelectionOnMouseOver: function(overDate) {
  var selectedRangeRestrictions = {
   start: ASPxClientCalendar.GetMinDate(this.selectionStartDate, overDate),
   end: ASPxClientCalendar.GetMaxDate(this.selectionStartDate, overDate)
  };
  var visibleRangeRestrictions = this.GetVisibleRangeRestrictions();
  ASPxClientCalendar.AddSelectedRangeVisiblePartToSelection(this.selectionTransaction.selection, selectedRangeRestrictions, visibleRangeRestrictions);
 },
 RaiseVisibleDaysMouseOut: function() {
  if (!this.sharedParameters.VisibleDaysMouseOut.IsEmpty())
   this.sharedParameters.VisibleDaysMouseOut.FireEvent(this);
 },
 OnDayMouseUp: function(date) {
  if(this.IsInlineFastNavigationActive())
   return;
  if(this.isMouseDown)
   this.OnMainElementClick();
  this.isMouseDown = false;
  if(!this.enableMulti && this.isSwipeGesturesEnabled() && this.swipeGestureStated)
   this.swipeGestureStated = false;
  if(this.enableMulti) {
   if(this.selectionCtrl && this.selectionTransaction.backup.Contains(date) &&
    ASPxClientCalendar.AreDatesEqual(date, this.selectionStartDate)) {
    if(this.selectionByWeeks)
     this.selectionTransaction.selection.RemoveWeek(date);
    else
     this.selectionTransaction.selection.Remove(date);
   }
  }
  else if(this.sharedParameters.dateRangeMode) {
   this.selectionTransaction.selection.Clear();
   this.selectionTransaction.selection.Add(date);
  }
  else if(this.isSwipeGesturesEnabled() && !this.swipeGestureStated) {
   this.selectionTransaction.selection.Add(date);
   if(!ASPxClientCalendarDateDisabledHelper.IsDateWithinBoundaries(date))
    this.selectionTransaction.CopyFromBackup();
   this.ApplySelectionByDiff(this.selectionTransaction.selection, false);
  }
  this.lastSelectedDate = ASPxClientCalendar.CloneDate(date);
  this.OnSelectionChanging();
 },
 GetTodayDate: function() {
  var parentSchedulerTodayDate = this.GetParentSchedulerTodayDate();
  if(parentSchedulerTodayDate)
   return parentSchedulerTodayDate;
  var now = new Date();
  var correctedNowDate = ASPxClientCalendar.GetCorrectedDate(now, this.pickerType);
  return new Date(correctedNowDate.getFullYear(), correctedNowDate.getMonth(), correctedNowDate.getDate());
 },
 GetParentSchedulerTodayDate: function() {
  return this.actualTodayDate;
 },
 EnsureHideFastNavigation: function() {
  if(this.fastNavigation)
   this.fastNavigation.Hide();
  else if(this.IsInlineFastNavigationActive())
   this.ChangeView(this.pickerType);
 },
 OnTodayClick: function() {
  this.EnsureHideFastNavigation();
  var todayDate = this.GetTodayDate();
  if(ASPxClientCalendarDateDisabledHelper.IsDateInRange(this.sharedParameters, todayDate)) {
   if(!this.IsDateDisabled(todayDate)) {
    this.selectionTransaction.Start();
    this.selectionTransaction.selection.Add(todayDate);
    this.lastSelectedDate = ASPxClientCalendar.CloneDate(todayDate);
    this.OnSelectionChanging();
   }
   if(!ASPxClientCalendar.AreDatesOfSamePeriod(todayDate, this.visibleDate, this.currentViewType))
    this.OnVisibleMonthChanged(todayDate);  
  }
 },
 OnClearClick: function() {
  if(this.isDateEditCalendar && ASPxClientDateEdit.active)
   ASPxClientDateEdit.active.OnTimeSectionClearClick();
  else {
   this.selectionTransaction.Start();
   this.OnSelectionChanging();
   this.selectionStartDate = null;
   this.selectionPrevStartDate = null;    
   this.ResetLastSelectedDate();
  }
 },
 OnOkClick: function() {
  var edit = ASPxClientDateEdit.active;
  if(edit)
   edit.OnApplyButtonClick();
 },
 OnCancelClick: function() {
  var edit = ASPxClientDateEdit.active;
  if(edit)
   edit.OnTimeSectionCancelClick();
 },
 ResetLastSelectedDate: function() {
  this.lastSelectedDate = null;
 },
 OnSelectMonth: function(row, column) {  
  var txn = this.selectionTransaction;
  txn.Start();
  var date = ASPxClientCalendar.CloneDate(this.GetActiveView(row, column).visibleDate);
  date.setDate(1);
  do {  
   if(ASPxClientCalendarDateDisabledHelper.IsDateInRange(this.sharedParameters, date) &&
    !this.IsDateDisabled(date))
    txn.selection.Add(date);
   date = ASPxClientCalendar.AddDays(date, 1);
  } while(date.getDate() > 1);
  this.OnSelectionChanging();
 },
 OnTitleClick: function(row, column) {
  if(!this.AllowProcessTitleClick())
   return;
  if(this.showFastPopup)
   this.ShowPopupFastNavigation(row, column);
  else
   this.SwitchToGreaterView(row, column);
 },
 SwitchToGreaterView: function(row, column, newViewType, disableAnimation) {
  newViewType = newViewType || this.currentViewType + 1;
  this.visibleDates[newViewType] = this.GetGreaterViewVisibleDate(newViewType, row, column);
  this.selectedNavigationDates[newViewType] = this.GetGreaterViewSelectedNavigationDate(newViewType, row, column);
  this.ChangeView(newViewType, disableAnimation);
 },
 SwitchToLessView: function() {
  var newViewType = this.currentViewType - 1;
  var selectedDate = this.selectedNavigationDates[this.currentViewType];
  this.visibleDates[newViewType] = this.GetLessViewVisibleDate(newViewType, selectedDate);
  var isSwitchedToPickerView = newViewType == this.pickerType;
  var oldVisibleDate = ASPxClientCalendar.CloneDate(this.visibleDate);
  if(isSwitchedToPickerView)
   this.visibleDate = this.visibleDates[newViewType];
  else
   this.selectedNavigationDates[newViewType] = selectedDate;
  this.ChangeView(newViewType);
  if(isSwitchedToPickerView && !ASPxClientCalendar.AreDatesOfSamePeriod(this.visibleDate, oldVisibleDate, this.pickerType))
   this.OnVisibleMonthChanged(this.visibleDate, oldVisibleDate, true);
 },
 GetViewByDate: function(date) {
  var activeViews = this.GetActiveViews();
  for(var key in activeViews) {
   if(activeViews.hasOwnProperty(key)) {
    var view = activeViews[key];
    if(view.IsDateVisible(date))
     return view;
   }
  }
 },
 GetGreaterViewVisibleDate: function(greaterViewType, currentRow, currentColumn) {
  var currentViewVisibleYear = this.GetActiveView(currentRow, currentColumn).visibleDate.getFullYear();
  var greaterViewTypeCurrentView = this.GetView(currentRow, currentColumn, greaterViewType);
  var greaterViewTypeCurrentViewVisibleYearOffset = greaterViewTypeCurrentView.GetVisibleDateOffsetInfo().year;
  var greaterViewTypeCurrentViewVisibleYear;
  if(greaterViewType == ASPx.DatePickerType.Months)
   greaterViewTypeCurrentViewVisibleYear = currentViewVisibleYear;
  if(greaterViewType == ASPx.DatePickerType.Years)
   greaterViewTypeCurrentViewVisibleYear = ASPxClientCalendar.GetDecadeStartYear(currentViewVisibleYear);
  if(greaterViewType == ASPx.DatePickerType.Decades)
   greaterViewTypeCurrentViewVisibleYear = ASPxClientCalendar.GetCenturyStartYear(currentViewVisibleYear);
  return new Date(greaterViewTypeCurrentViewVisibleYear - greaterViewTypeCurrentViewVisibleYearOffset, 0, 1);
 },
 GetGreaterViewSelectedNavigationDate: function(greaterViewType, currentRow, currentColumn) {
  var currentViewVisibleDate = this.GetActiveView(currentRow, currentColumn).visibleDate;
  var currentViewVisibleYear = currentViewVisibleDate.getFullYear();
  var currentViewVisibleMonth = currentViewVisibleDate.getMonth();
  var resultYear = greaterViewType != ASPx.DatePickerType.Decades ? currentViewVisibleYear : ASPxClientCalendar.GetDecadeStartYear(currentViewVisibleYear);
  var resultMonth = greaterViewType == ASPx.DatePickerType.Months ? currentViewVisibleMonth : 0;
  return new Date(resultYear, resultMonth, 1);
 },
 GetLessViewVisibleDate: function(lessViewType, currentSelectedNavigationDate) {
  var result = null;
  var currentView = this.GetViewByDate(currentSelectedNavigationDate);
  var prevViewVisibleDateOffsetInfo = this.GetView(currentView.row, currentView.column, lessViewType).GetVisibleDateOffsetInfo();
  if(lessViewType == ASPx.DatePickerType.Days) {
   result = new Date(currentSelectedNavigationDate.getFullYear(), currentSelectedNavigationDate.getMonth(), 1);
   result = ASPxClientCalendar.AddMonths(result, (-1) * prevViewVisibleDateOffsetInfo.month);
  }
  else
   result = new Date(currentSelectedNavigationDate.getFullYear() - prevViewVisibleDateOffsetInfo.year, 0, 1);
  return result;
 },
 ShowPopupFastNavigation: function(row, column) {
  this.fastNavigation.activeView = this.GetActiveView(row, column);
  this.fastNavigation.Show();
 },
 AllowProcessTitleClick: function() {
  return this.showFastPopup || this.enableFast && this.currentViewType < this.maxViewType;
 },
 OnMainElementClick: function(mouseEvt) {
  this.MainElementClick.FireEvent(this, mouseEvt);
 },
 OnSelectionChanging: function() {
  if(!this.SelectionChanging.IsEmpty()){
   var args = new ASPxClientCalendarSelectionEventArgs(false, this.selectionTransaction.selection);
   this.SelectionChanging.FireEvent(this, args);  
  }
  var changed = this.selectionTransaction.IsChanged();
  this.selectionTransaction.Commit();
  if(changed)
   this.OnValueChanged();  
 },
 OnVisibleMonthChanged: function(date, oldDate, skipVisibleDateUpdating) {
  oldDate = oldDate || this.visibleDate;
  var offsetInternal = this.currentViewType == ASPx.DatePickerType.Days ? ASPxClientCalendar.GetOffsetInMonths(oldDate, date) : 0;
  if(!skipVisibleDateUpdating)
   this.SetVisibleDateInternal(date);
  var processOnServer = this.currentViewType == ASPx.DatePickerType.Days ? this.RaiseVisibleMonthChanged(offsetInternal) : this.autoPostBack;
  if(processOnServer && !this.customDraw && !this.IsInlineFastNavigationActive())
   this.SendPostBackInternal("");
 },
 OnSelectionCancelled: function() {
  this.isMouseDown = false;  
  this.selectionTransaction.Rollback();
 },
 OnCustomDisabledDate: function(date) {
  return this.RaiseCustomDisabledDate(date);
 },
 RaiseCustomDisabledDate: function(date) {
  var args = new ASPxClientCalendarCustomDisabledDateEventArgs(date);
  this.CustomDisabledDate.FireEvent(this, args);
  return args;
 },
 RaiseValueChangedEvent: function() {
  var processOnServer = ASPxClientEdit.prototype.RaiseValueChangedEvent.call(this);
  processOnServer = this.RaiseSelectionChanged(processOnServer);
  return processOnServer;
 },
 SetVisibleDate: function(date) {
  this.EnsureHideFastNavigation(); 
  this.SetVisibleDateInternal(date);
 }, 
 SetVisibleDateInternal: function(date) {
  var old = this.visibleDates[this.currentViewType];
  date = ASPxClientCalendarDateDisabledHelper.GetCorrectedDate(date);
  date = ASPxClientCalendar.GetCorrectedDate(date, this.pickerType);
  this.visibleDates[this.currentViewType] = date;
  if(!this.IsInlineFastNavigationActive())
   this.visibleDate = date;
  if (this.IsAnimationEnabled() && this.AnimationHelperExists()) {
   var leftDir = this.rtl ? ASPx.AnimationHelper.SLIDE_LEFT_DIRECTION : ASPx.AnimationHelper.SLIDE_RIGHT_DIRECTION;
   var rightDir = this.rtl ? ASPx.AnimationHelper.SLIDE_RIGHT_DIRECTION : ASPx.AnimationHelper.SLIDE_LEFT_DIRECTION;
   this.slideAnimationDirection = old < this.visibleDates[this.currentViewType] ? rightDir : leftDir;
  } else {
   this.slideAnimationDirection = null;
  }
  if(!ASPxClientCalendar.AreDatesOfSamePeriod(date, old, this.currentViewType) || this.forceUpdate) {
   this.forceUpdate = false;
   this.Update(); 
  }
 },
 SetSelectedDate: function(date) {
  date = ASPxClientCalendar.GetCorrectedDate(date, this.pickerType);
  this.EnsureHideFastNavigation();
  if(ASPxClientCalendarDateDisabledHelper.IsDateInRange(this.sharedParameters, date) &&
   !this.IsDateDisabled(date)) {
   var selection = new ASPxClientCalendarSelection();
   selection.SetPickerType(this.pickerType);
   if(date != null) {
    selection.Add(date);
    this.lastSelectedDate = ASPxClientCalendar.CloneDate(date);
   }
   this.ApplySelectionByDiff(selection, true);
  }
 },
 AllowShiftVisiblePeriod: function() {
  return this.currentViewType == ASPx.DatePickerType.Days ?
   this.enableDaysViewPeriodNavigation : this.enableMonthsYearsViewPeriodNavigation;
 },
 CorrectVisibleMonth: function(newDate, isForwardDirection) {
  var offset = this.GetOffsetInCurrentViewTypePeriods(this.visibleDates[this.currentViewType], newDate);
  if(this.IsMultiView() && offset != 0) {
   var view = isForwardDirection ? this.GetActiveView(this.rows - 1, this.columns - 1) : 
            this.GetActiveView(0, 0);
   offset = this.IsDateVisible(newDate) ? 0 :
       this.GetOffsetInCurrentViewTypePeriods(view.visibleDate, newDate);
  }
  if(!this.IsInlineFastNavigationActive() && (!ASPxClientCalendarDateDisabledHelper.IsDateInRange(this.sharedParameters, newDate) ||
   this.IsDateDisabled(newDate)))
   offset = 0;
  var result = offset == 0 || this.AllowShiftVisiblePeriod();
  if(offset != 0 && this.AllowShiftVisiblePeriod())
   this.OnShiftMonth(offset);
  return result;
 },
 GetOffsetInCurrentViewTypePeriods: function(visibleDate, newDate) {
  return ASPxClientCalendar.GetOffsetInPeriods(visibleDate, newDate, this.currentViewType);
 },
 DoKeyboardSelection: function(date, shift, direction) {
  if(!this.IsInlineFastNavigationActive())
   this.DoKeyboardSelectionOnPickerView(date, shift, direction);
  else {
   var activeViews = this.GetActiveViews();
   for(var key in activeViews) {
    if(!activeViews.hasOwnProperty(key)) continue;
    var view = activeViews[key];
    view.UpdateSelection(this.selectedNavigationDates[this.currentViewType], false);
    view.UpdateSelection(date, true);
   }
   this.selectedNavigationDates[this.currentViewType] = date;
  }
 },
 DoKeyboardSelectionOnPickerView: function(date, shift, direction) {
  if(ASPxClientCalendarDateDisabledHelper.IsDateInRange(this.sharedParameters, date)) {
   this.isDateChangingByKeyboard = true;
   var existDate = this.IsDateDisabled(date) ? this.GetNearestDayForDate(date, direction) : date;
   if(existDate != null) {
    this.selectionTransaction.Start();
    if(this.enableMulti && shift && this.selectionStartDate) {
     this.selectionTransaction.selection.AddRange(this.selectionStartDate, existDate);
     this.RemoveDisabledDatesFromSelection(this.selectionTransaction.selection);
    } else {
     this.selectionTransaction.selection.Add(existDate);
     this.selectionStartDate = existDate;
    }
    this.lastSelectedDate = ASPxClientCalendar.CloneDate(existDate);
    this.OnSelectionChanging();
   }
   this.isDateChangingByKeyboard = false;
  }
 },
 RemoveDisabledDatesFromSelection: function(selection) {
  var selectedDates = selection.GetDates();
  for(var i = 0; i < selectedDates.length; i++) {
   if(this.IsDateDisabled(selectedDates[i]))
    selection.Remove(selectedDates[i]);
  }
 },
 GetNearestDayForToday: function() {
  var todayDate = this.GetTodayDate();
  if(this.sharedParameters.minDate && !ASPxClientCalendarDateDisabledHelper.IsDateInRange(this.sharedParameters, todayDate))
   todayDate = ASPxClientCalendar.CloneDate(this.IsDateDisabled(this.sharedParameters.minDate) ? this.GetNearestDayForDate(this.sharedParameters.minDate, "left") : this.sharedParameters.minDate);
  return todayDate;
 },
 GetNearestDayForDate: function(date, direction) {
  var nearestDate = null;
  var nextDate = date;
  while(nearestDate == null) {
   switch(direction) {
    case "up":
     nextDate = this.GetNearestDateFromUp(nextDate);
     break;
    case "down":
     nextDate = this.GetNearestDateFromDown(nextDate);
     break;
    case "left":
     nextDate = this.GetNearestDateFromLeft(nextDate);
     break;
    case "right":
     nextDate = this.GetNearestDateFromRight(nextDate);
     break;
   }
   var isForbiddenDate = !ASPxClientCalendarDateDisabledHelper.IsDateInRange(this.sharedParameters, nextDate) || this.IsDateDisabled(nextDate);
   nearestDate = isForbiddenDate ? null : nextDate;
  }
  return nearestDate;
 },
 GetNearestDateFromUp: function(date) {
  if(this.currentViewType == ASPx.DatePickerType.Days)
   return new Date(date.getTime() - (7 * 24 * 60 * 60 * 1000));
  if(this.currentViewType == ASPx.DatePickerType.Months) {
   var newDate = new Date(date.getTime());
   newDate = ASPxClientCalendar.AddMonths(newDate, -4);
   return newDate;
  }
  if(this.currentViewType == ASPx.DatePickerType.Years) {
   var newDate = new Date(date.getTime());
   newDate = ASPxClientCalendar.AddYears(newDate, -4);
   return newDate;
  }
  if(this.currentViewType == ASPx.DatePickerType.Decades) {
   var newDate = new Date(date.getTime());
   newDate = ASPxClientCalendar.AddYears(newDate, -40);
   return newDate;
  }
 },
 GetNearestDateFromDown: function(date) {
  if(this.currentViewType == ASPx.DatePickerType.Days)
   return new Date(date.getTime() + (7 * 24 * 60 * 60 * 1000));
  if(this.currentViewType == ASPx.DatePickerType.Months) {
   var newDate = new Date(date.getTime());
   newDate = ASPxClientCalendar.AddMonths(newDate, 4);
   return newDate;
  }
  if(this.currentViewType == ASPx.DatePickerType.Years) {
   var newDate = new Date(date.getTime());
   newDate = ASPxClientCalendar.AddYears(newDate, 4);
   return newDate;
  }
  if(this.currentViewType == ASPx.DatePickerType.Decades) {
   var newDate = new Date(date.getTime());
   newDate = ASPxClientCalendar.AddYears(newDate, 40);
   return newDate;
  }
 },
 GetNearestDateFromLeft: function(date) {
  if(this.currentViewType == ASPx.DatePickerType.Days)
   return new Date(date.getTime() - (1 * 24 * 60 * 60 * 1000));
  if(this.currentViewType == ASPx.DatePickerType.Months) {
   var newDate = new Date(date.getTime());
   newDate = ASPxClientCalendar.AddMonths(newDate, -1);
   return newDate;
  }
  if(this.currentViewType == ASPx.DatePickerType.Years) {
   var newDate = new Date(date.getTime());
   newDate = ASPxClientCalendar.AddYears(newDate, -1);
   return newDate;
  }
  if(this.currentViewType == ASPx.DatePickerType.Decades) {
   var newDate = new Date(date.getTime());
   newDate = ASPxClientCalendar.AddYears(newDate, -10);
   return newDate;
  }
 },
 GetNearestDateFromRight: function(date) {
  if(this.currentViewType == ASPx.DatePickerType.Days)
   return new Date(date.getTime() + (1 * 24 * 60 * 60 * 1000));
  if(this.currentViewType == ASPx.DatePickerType.Months) {
   var newDate = new Date(date.getTime());
   newDate = ASPxClientCalendar.AddMonths(newDate, 1);
   return newDate;
  }
  if(this.currentViewType == ASPx.DatePickerType.Years) {
   var newDate = new Date(date.getTime());
   newDate = ASPxClientCalendar.AddYears(newDate, 1);
   return newDate;
  }
  if(this.currentViewType == ASPx.DatePickerType.Decades) {
   var newDate = new Date(date.getTime());
   newDate = ASPxClientCalendar.AddYears(newDate, 10);
   return newDate;
  }
 },
 UseDelayedSpecialFocus: function() { 
  return true;
 },
 GetInnerEditors: function() {
  return [];
 },
 GetDelayedSpecialFocusTriggers: function() {
  var list = ASPxClientEdit.prototype.GetDelayedSpecialFocusTriggers.call(this);
  if(this.fastNavigation && this.showFastPopup)
   list.push(this.fastNavigation.GetPopupWindowElement());
  return list;
 },
 GetSelectedDate: function() {
  return this.GetValue();
 },
 GetVisibleDate: function() {
  return this.visibleDate;
 },
 SelectDate: function(date) {
  if(date) {
   date = ASPxClientCalendarDateDisabledHelper.GetCorrectedDate(date);
   this.selection.Add(date);
   this.Update();
  }
 },
 GetVisibleRangeRestrictions: function() {
  return {
   start: this.GetActiveView(0, 0).GetVisibleRangeRestrictions().start,
   end: this.GetActiveView(this.rows - 1, this.columns - 1).GetVisibleRangeRestrictions().end
  };
 },
 NeedCalculateSelectionOnUpdating: function() {
  return this.sharedParameters.dateRangeMode && this.selection.startDate && this.selection.endDate && !this.forceUpdatingOnMouseOver;
 },
 SelectRange: function(start, end) {
  if(start && end) {
   start = ASPxClientCalendarDateDisabledHelper.GetCorrectedDate(start);
   end = ASPxClientCalendarDateDisabledHelper.GetCorrectedDate(end);
   if(this.sharedParameters.dateRangeMode)
    this.selection.SetRestrictions(start, end);
   else
    this.selection.AddRange(start, end);
   this.Update();
  }
 },
 DeselectDate: function(date) {
  if(date) {
   this.selection.Remove(date);
   this.Update(); 
  }
 },
 DeselectRange: function(start, end) {
  if(start && end) {
   this.selection.RemoveRange(start, end);
   this.Update();
  }
 },
 ClearSelection: function() {
  this.selection.Clear();
  if(this.sharedParameters.dateRangeMode)
   this.selection.ResetRestrictions();
  this.Update();
 },
 GetSelectedDates: function() {
  return this.selection.GetDates();
 },
 RaiseSelectionChangedInternal: function(processOnServer) {
  if(!this.sharedParameters.CalendarSelectionChangedInternal.IsEmpty()) {
   var args = new ASPxClientProcessingModeEventArgs(processOnServer);
   this.sharedParameters.CalendarSelectionChangedInternal.FireEvent(this, args);
   processOnServer = args.processOnServer;
  }
  return processOnServer;
 },
 RaiseSelectionChanged: function(processOnServer) {
  processOnServer = this.RaiseSelectionChangedInternal(processOnServer);
  if(!this.SelectionChanged.IsEmpty()){
   var args = new ASPxClientProcessingModeEventArgs(processOnServer);  
   this.SelectionChanged.FireEvent(this, args);
   processOnServer = args.processOnServer;
  }
  return processOnServer;
 },
 RaiseVisibleMonthChanged: function(offsetInternal) {
  var processOnServer = this.autoPostBack;
  if(!this.VisibleMonthChanged.IsEmpty()){
   var args = new ASPxClientProcessingModeEventArgs(processOnServer);
   args.offsetInternal = offsetInternal;
   this.VisibleMonthChanged.FireEvent(this, args);
   processOnServer = args.processOnServer;
  }
  return processOnServer;
 },
 RaiseCellClick: function(date) {
  if(!this.CellClick.IsEmpty()) {
   var args = new ASPxClientCalendarCellClickEventArgs(date);
   this.CellClick.FireEvent(this, args);
  }
 },
 SetReadOnlyInternal: function(readOnly) {
  ASPxClientEdit.prototype.SetReadOnlyInternal.call(this, readOnly);
  this.ChangeReadOnlyAttributes(readOnly);
  var footer = this.GetFooter();
  if(footer)
   footer.style.display = readOnly ? "none" : "";
 },
 ChangeEnabledAttributes: function(enabled) {
  ASPx.Attr.ChangeDocumentEventsMethod(enabled)("mouseup", aspxCalDocMouseUp);
  ASPx.Attr.ChangeEventsMethod(enabled)(this.GetMainElement(), "click", ASPxClientCalendar.AnonymousHandlers.MainElementClick(this.name));
  var inputElement = this.GetInputElement();
  if(inputElement) {
   this.ChangeSpecialInputEnabledAttributes(inputElement, ASPx.Attr.ChangeEventsMethod(enabled));
   if(!this.accessibilityCompliant) {
    var changeMethod = enabled ? ASPx.Attr.RestoreTabIndexAttribute : ASPx.Attr.SaveTabIndexAttributeAndReset;
    changeMethod(inputElement);
   }
  }
  var btnElement = this.GetTodayButton();
  if(btnElement)
   this.ChangeButtonEnabledAttributes(btnElement, this.GetChangeButtonEnabledAttributesMethod(enabled));
  btnElement = this.GetClearButton();
  if(btnElement)
   this.ChangeButtonEnabledAttributes(btnElement, this.GetChangeButtonEnabledAttributesMethod(enabled));
  for(var i = this.pickerType; i <= this.maxViewType; i++) {
   var views = this.GetViews(i);
   for(var key in views) {
    if(views.hasOwnProperty(key)) {
     var view = views[key];
     if(!view.isASPxClientCalendarView) continue;
     view.ChangeEnabledAttributes(enabled);
     view.ChangeEditableAttributesOnChangeEnabledState(enabled);
    }
   }
  }
 },
 ChangeReadOnlyAttributes: function(readOnly) {
  if(!this.GetEnabled())
   return;
  for(var i = this.pickerType; i <= this.maxViewType; i++) {
   var views = this.GetViews(i);
   for(var key in views) {
    if(views.hasOwnProperty(key)) {
     var view = views[key];
     if(!view.isASPxClientCalendarView) continue;
     view.ChangeEditableAttributesOnChangeReadOnlyState(readOnly);
    }
   }
  }  
 },
 ChangeEnabledStateItems: function(enabled){
  ASPx.GetStateController().SetElementEnabled(this.GetMainElement(), enabled);
  var btnElement = this.GetTodayButton();
  if(btnElement)
   ASPx.GetStateController().SetElementEnabled(btnElement, enabled);
  btnElement = this.GetClearButton();
  if(btnElement)
   ASPx.GetStateController().SetElementEnabled(btnElement, enabled);
  this.EnsureHideFastNavigation();
  for(var i = this.pickerType; i <= this.maxViewType; i++) {
   var views = this.GetViews(i);
   for(var key in views) {
    if(views.hasOwnProperty(key)) {
     var view = views[key];
     if(!view.isASPxClientCalendarView) continue;
     view.ChangeEnabledStateItems(enabled);
    }
   }
  }
  this.UpdateInternal();   
 },
 ChangeButtonEnabledAttributes: function(element, method){
  method(element, "onclick");
  method(element, "ondblclick");
 },
 GetChangeButtonEnabledAttributesMethod: function(enabled) {
  return ASPx.Attr.ChangeAttributesMethod(enabled);
 },
 GetMinDate: function() {
  return this.sharedParameters.minDate;
 },
 SetMinDate: function(date) {
  date = ASPxClientCalendarDateDisabledHelper.GetCorrectedDate(date);
  date = ASPxClientCalendar.GetCorrectedDate(date, this.pickerType);
  this.sharedParameters.minDate = date;
  this.Update();
 },
 GetMaxDate: function() {
  return this.sharedParameters.maxDate;
 },
 SetMaxDate: function(date) {
  date = ASPxClientCalendarDateDisabledHelper.GetCorrectedDate(date);
  date = ASPxClientCalendar.GetCorrectedDate(date, this.pickerType);
  this.sharedParameters.maxDate = date;
  this.Update();
 },
 CheckDateEnabled: function(date){
  return !this.IsDateDisabled(date);
 },
 CanMouseDown: function(evt, date){
  if(!evt) return false;
  return ASPx.Evt.IsLeftButtonPressed(evt) && (!this.IsDateDisabled(date) || this.IsInlineFastNavigationActive());
 },
 CanMouseOver: function(date) {
  if(this.IsInlineFastNavigationActive())
   return false;
  if(this.forceMouseDown || this.isMouseDown || this.sharedParameters.dateRangeMode)
   return !this.IsDateDisabled(date);
  return false;
 },
 OnAssociatedLabelClick: function(evt) {
  ASPxClientCalendar.prototype.OnDelayedSpecialFocusMouseDown.call(this, evt);
 },
 getElementToObserveVisibilityChange: function () {
  return this.GetMainElement();
 },
 processVisibilityChanged: function (visible) {
  var focusHandlingInputForKeyboardSupport = this.GetMainElement().querySelector(".dxKBSI");
  ASPx.ToggleClassNameToElement(focusHandlingInputForKeyboardSupport, "dx-position-fixed", visible);
 }
});
ASPxClientCalendar.Cast = ASPxClientControl.Cast;
var AccessibilityHelperCalendar = ASPx.CreateClass(ASPx.AccessibilityHelperBase, {
 constructor: function(calendar) {
  this.constructor.prototype.constructor.call(this, calendar);
  this.control.GotFocus.AddHandler(function() { this.PronounceDates(this.control.GetSelectedDates(), true); }.aspxBind(this));
  this.control.LostFocus.AddHandler(function() { 
   setTimeout(function() { this.changeActivityAttributes(this.getMainElement(), { "aria-activedescendant": "" }); }.aspxBind(this), 200); 
  }.aspxBind(this));
  this.pickerType = calendar.pickerType;
 },
 PronounceDates: function(dates, useDescriptionText) {
  var datesText = this.getDatesText(dates);
  var dateEditInput = null;
  var activeItemArgs = null;
  var inactiveItemArgs = null;
  if(this.control.isDateEditCalendar) {
   var dateEdit = this.control.sharedParameters.currentDateEdit;
   if(dateEdit)
    dateEditInput = dateEdit.GetInputElement();
   activeItemArgs = {
    "role"    : "option",
    "aria-selected" : true
   };
   inactiveItemArgs = {
    "role"    : "",
    "aria-selected" : ""
   };
  }
  if(!this.control.isDateEditCalendar && useDescriptionText) 
   datesText = ASPx.AccessibilitySR.CalendarDescription + " " + datesText;
  this.PronounceMessage(datesText, activeItemArgs, inactiveItemArgs, null, dateEditInput);
 },
 getDatesText: function(dates) {
  var datesText = "";
  if(dates.length == 0)
   datesText = this.control.isDateEditCalendar ? ASPx.AccessibilitySR.CalendarDescription : ASPx.AccessibilitySR.BlankEditorText;
  else {
   dates.sort(function(x, y) { return x.valueOf() - y.valueOf(); });
   var ranges = this.getDateRanges(dates);
   datesText = this.getRangesText(ranges);
  }
  return datesText;
 },
 GetActiveElement: function(inputIsMainElement) {
  var activeElement = ASPx.AccessibilityHelperBase.prototype.GetActiveElement.call(this, inputIsMainElement);
  var mainElement = inputIsMainElement ? this.control.GetInputElement() : this.getMainElement();
  return activeElement == mainElement ? null : activeElement;
 },
 getRangesText: function(ranges) {
  var dateText = "";
  var hasMultiSelect = ranges.length > 1 || ranges.length === 1 && ranges[0].count > 1;
  if(hasMultiSelect)
   dateText = ASPx.AccessibilitySR.CalendarMultiSelectText;
  var rangesLength = ranges.length;
  var rangeDatesTextArray = [ ];
  for(var i = 0; i < rangesLength; i++)
   rangeDatesTextArray.push(this.getRangeText(ranges[i]));
  return dateText + rangeDatesTextArray.join(', ');
 },
 getRangeText: function(range) {
  var rangeFormatString = ASPx.AccessibilitySR.CalendarRangeFormatString;
  var startDateString = this.getDateString(range.start);
  if(range.count === 1)
   return startDateString;
  var endDateString = this.getDateString(ASPxClientCalendar.GetDateByOffset(range.start, range.count - 1, this.pickerType));
  return ASPx.Str.ApplyReplacement(rangeFormatString, [["{0}", startDateString], ["{1}", endDateString]]);
 },
 getDateString: function(date) {
  var dateStringArray = [ ];
  dateStringArray.push(ASPx.CultureInfo.dayNames[date.getDay()]);
  dateStringArray.push(ASPx.CultureInfo.monthNames[date.getMonth()]);
  dateStringArray.push(date.getDate());
  dateStringArray.push(date.getFullYear());
  return dateStringArray.join(' ');
 },
 getDateRanges: function(dates) {
  var ranges = [ ];
  var start = null;
  var end = null;
  for(var i = 0; i < dates.length; i++) {
   var d1 = dates[i];
   var d2 = i < dates.length ? dates[i + 1] : d1;
   if(!start)
    start = end = d1;
   if(this.isNeibourDates(d1, d2)) {
    end = d2;
   } else {
    ranges.push({ start: start, count: ASPxClientCalendar.GetPeriodsInRange(start, end, this.pickerType) });
    start = end = null;
   }
  }
  return ranges;
 },
 isNeibourDates: function(date1, date2) {
  var nextDate = ASPxClientCalendar.GetNextDate(date1, this.pickerType);
  return ASPxClientCalendar.AreDatesEqual(nextDate, date2);
 }
});
var ASPxClientCalendarCustomDisabledDateEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(date) {
  this.constructor.prototype.constructor.call(this);
  this.date = date;
  this.isDisabled = false;
 }
});
ASPxClientCalendar.AnonymousHandlers = { 
 MainElementClick: function(name) {
  return function(e) {
   var cal = ASPx.GetControlCollection().Get(name);
   if(cal)
    cal.OnMainElementClick(e);
  };
 },
 SelectMonth: function(name, row, column) {
  return function() {
   var cal = ASPx.GetControlCollection().Get(name);
   if(cal)
    cal.OnSelectMonth(row, column);
  };
 },
 NavigationButtonClick: function(name, offset, isVisibleInAdaptiveOnly) {
  return function() {
   var cal = ASPx.GetControlCollection().Get(name);
   if(cal)
    cal.OnNavigationImageClick(offset, isVisibleInAdaptiveOnly);
  };
 },
 TitleClick: function(name, row, column) {
  return function() {
   var cal = ASPx.GetControlCollection().Get(name);
   if(cal)
    cal.OnTitleClick(row, column);
  };
 },
 DayMouseEvent: function(name, row, column, index, byWeeks) {
  return function(e) {
   var cal = ASPx.GetControlCollection().Get(name);
   if(!cal)
    return;
   var view = cal.GetActiveView(row, column);
   if(!view.isNavigationView && cal.GetReadOnly())
    return;
   var date = view.GetDateByIndex(index);
   if(byWeeks)
    date = ASPxClientCalendar.AddDays(date, cal.firstDayOfWeek - date.getDay());
   var allowed = ASPxClientCalendarDateDisabledHelper.IsDateInRange(cal.sharedParameters, date) && (view.IsDateVisible(date) || byWeeks);
   if(view.isNavigationView)
    allowed = view.IsDateVisible(date);
   switch(e.type) {
    case "mousedown":
     if(allowed && cal.CanMouseDown(e, date)) {
      var ctrl = e.ctrlKey || ASPx.Browser.MacOSPlatform && e.metaKey;
      cal.OnDayMouseDown(date, e.shiftKey, ctrl, byWeeks);
     }
     break;
    case "mouseover":
     if(allowed && cal.CanMouseOver(date)) {
      if(cal.forceMouseDown)
       cal.OnDayMouseDown(date, false, false, false);
      else if (cal.isMouseDown || cal.sharedParameters.dateRangeMode)
       cal.OnDayMouseOver(date);
     }
     break;
    case "mouseup":
     if(cal.isMouseDown && !view.isNavigationView) {
      if(allowed && !cal.IsDateDisabled(date))
       cal.OnDayMouseUp(date);
      else
       cal.OnSelectionCancelled();
     }
     break;
    case "mouseout":
     if(cal.sharedParameters.dateRangeMode && !view.isNavigationView) {
      var isAllowedOverDate = false;
      var overCell = ASPx.Evt.GetEventRelatedTarget(e, false);
      var overCellIndex = view.GetDayCellIndex(overCell);
      if (ASPx.IsExists(overCellIndex)) {
       var overDate = view.GetDateByIndex(overCellIndex);
       isAllowedOverDate = overDate && ASPxClientCalendarDateDisabledHelper.IsDateInRange(cal.sharedParameters, overDate) && view.IsDateVisible(overDate) && !cal.IsDateDisabled(overDate);
      }
      if (!isAllowedOverDate) {
       cal.RaiseVisibleDaysMouseOut();
      }
     }
     break;
   }     
  };
 },
 FastNavMonthClick: function(name, month) {
  return function() {
   var cal = ASPx.GetControlCollection().Get(name);
   if(cal) {
    cal.fastNavigation.OnMonthClick(month);
   }
  };
 },
 FastNavYearClick: function(name, index) {
  return function() {
   var cal = ASPx.GetControlCollection().Get(name);
   if(cal)
    cal.fastNavigation.OnYearClick(index);
  };
 }
};
ASPxClientCalendar.GetMinDate = function(date1, date2) {
 return date1 < date2 ? date1 : date2;
};
ASPxClientCalendar.GetMaxDate = function(date1, date2) {
 return date1 > date2 ? date1 : date2;
};
ASPxClientCalendar.AddSelectedRangeVisiblePartToSelection = function(selection, selectedRangeRestrictions, visibleRangeRestrictions) {
 selection.Add(selectedRangeRestrictions.start);
 selection.Add(selectedRangeRestrictions.end);
 var bothRangeRestrictsLessThanVisibleStartDate = selectedRangeRestrictions.start < visibleRangeRestrictions.start
  && selectedRangeRestrictions.end < visibleRangeRestrictions.start;
 var bothRangeRestrictsGreaterThanVisibleEndDate = selectedRangeRestrictions.start > visibleRangeRestrictions.end
  && selectedRangeRestrictions.end > visibleRangeRestrictions.end;
 var rangeHasVisiblePart = !bothRangeRestrictsLessThanVisibleStartDate && !bothRangeRestrictsGreaterThanVisibleEndDate;
 if(rangeHasVisiblePart) {
  var requiredSelectionStart = ASPxClientCalendar.GetMaxDate(selectedRangeRestrictions.start, visibleRangeRestrictions.start);
  var requiredSelectionEnd = ASPxClientCalendar.GetMinDate(selectedRangeRestrictions.end, visibleRangeRestrictions.end);
  selection.AddRange(requiredSelectionStart, requiredSelectionEnd);
 }
};
ASPxClientCalendar.AreDatesEqual = function(date1, date2) {
 if(date1 == date2)  
  return true;
 if(!date1 || !date2)
  return false;
 return date1.getFullYear() == date2.getFullYear() && date1.getMonth() == date2.getMonth() && date1.getDate() == date2.getDate();
};
ASPxClientCalendar.IsFirstDateEqualToAnyOther = function () {
 var actualDate = arguments[0];
 for (var i = 1; i < arguments.length; i++)
  if (ASPxClientCalendar.AreDatesEqual(actualDate, arguments[i]))
   return true;
 return false;
};
ASPxClientCalendar.AreDatesOfSameMonth = function(date1, date2) {
 if(!date1 || !date2)
  return false;
 return date1.getFullYear() == date2.getFullYear() && date1.getMonth() == date2.getMonth();
};
ASPxClientCalendar.AreDatesOfSameYear = function(date1, date2) {
 if(!date1 || !date2)
  return false;
 return date1.getFullYear() == date2.getFullYear();
};
ASPxClientCalendar.AreDatesOfSameDecade = function(date1, date2) {
 if(!date1 || !date2)
  return false;
 return ASPxClientCalendar.GetDecadeStartYear(date1.getFullYear()) == ASPxClientCalendar.GetDecadeStartYear(date2.getFullYear());
};
ASPxClientCalendar.AreDatesOfSameCentury = function(date1, date2) {
 if(!date1 || !date2)
  return false;
 return ASPxClientCalendar.GetCenturyStartYear(date1.getFullYear()) == ASPxClientCalendar.GetCenturyStartYear(date2.getFullYear());
};
ASPxClientCalendar.AreDatesOfSamePeriod = function(date1, date2, viewType) {
 if(viewType == ASPx.DatePickerType.Days)
  return ASPxClientCalendar.AreDatesOfSameMonth(date1, date2);
 if(viewType == ASPx.DatePickerType.Months)
  return ASPxClientCalendar.AreDatesOfSameYear(date1, date2);
 if(viewType == ASPx.DatePickerType.Years)
  return ASPxClientCalendar.AreDatesOfSameDecade(date1, date2);
 if(viewType == ASPx.DatePickerType.Decades)
  return ASPxClientCalendar.AreDatesOfSameCentury(date1, date2);
};
ASPxClientCalendar.GetUTCTime = function(date) {
 return Date.UTC(date.getFullYear(), date.getMonth(), date.getDate());
};
ASPxClientCalendar.GetFirstDayOfYear = function(date) {
 return new Date(date.getFullYear(), 0, 1);  
};
ASPxClientCalendar.GetDayOfYear = function(date) {
 var ms = ASPxClientCalendar.GetUTCTime(date) - 
  ASPxClientCalendar.GetUTCTime(ASPxClientCalendar.GetFirstDayOfYear(date));
 return 1 + Math.floor(ms / ASPx.calendarMsPerDay);
};
ASPxClientCalendar.GetISO8601WeekOfYear = function(date) {
 var firstDate = new Date(date.getFullYear(), 0, 1);
 var firstDayOfWeek = firstDate.getDay();
 if(firstDayOfWeek == 0)
  firstDayOfWeek = 7;
 var daysInFirstWeek = 8 - firstDayOfWeek;
 var lastDate = new Date(date.getFullYear(), 11, 31);   
 var lastDayOfWeek = lastDate.getDay();
 if(lastDayOfWeek == 0)
  lastDayOfWeek = 7;
 var fullWeeks = Math.ceil((ASPxClientCalendar.GetDayOfYear(date) - daysInFirstWeek) / 7);
 var result = fullWeeks;   
 if(daysInFirstWeek > 3)
  result++;
 var isThursday = firstDayOfWeek == 4 || lastDayOfWeek == 4;
 if(result > 52 && !isThursday)
  result = 1;
 if(result == 0)
  return ASPxClientCalendar.GetISO8601WeekOfYear(new Date(date.getFullYear() - 1, 11, 31));
 return result;
};
ASPxClientCalendar.GetNextWeekDate = function(date) {
 var ret = new Date(date.getTime()); 
 var newDay = date.getDate() + 7;
 ret.setDate(newDay);
 return ret;
};
ASPxClientCalendar.GetPrevWeekDate = function(date) {
 var ret = new Date(date.getTime());
 var newDay = date.getDate() - 7;
 ret.setDate(newDay);
 return ret;
};
ASPxClientCalendar.GetYesterDate = function(date) {
 var ret = new Date(date.getTime());
 ret.setDate(ret.getDate() - 1);
 return ret;
};
ASPxClientCalendar.GetTomorrowDate = function(date) {
 var ret = new Date(date.getTime());
 ret.setDate(ret.getDate() + 1);
 return ret;
};
ASPxClientCalendar.GetNextMonthDate = function(date) {
 var ret = new Date(date.getTime());
 var maxDateInNextMonth = ASPxClientCalendar.GetDaysInMonth(ret.getMonth() + 1, ret.getFullYear());
 if(ret.getDate() > maxDateInNextMonth)
  ret.setDate(maxDateInNextMonth);
 ret.setMonth(ret.getMonth() + 1);
 return ret;
};
ASPxClientCalendar.GetNextYearDate = function(date) {
 return ASPxClientCalendar.GetDateWithYearOffset(date, 1);
};
ASPxClientCalendar.GetDateWithYearOffset = function(date, offset) {
 var ret = new Date(date.getTime());
 var maxDateInPrevYearMonth = ASPxClientCalendar.GetDaysInMonth(ret.getMonth(), ret.getFullYear() + offset);
 if(ret.getDate() > maxDateInPrevYearMonth)
  ret.setDate(maxDateInPrevYearMonth);
 ret.setFullYear(ret.getFullYear() + offset);
 return ret;
};
ASPxClientCalendar.GetPrevMonthDate = function(date) {
 var ret = new Date(date.getTime());
 var maxDateInPrevMonth = ASPxClientCalendar.GetDaysInMonth(ret.getMonth() - 1, ret.getFullYear());
 if(ret.getDate() > maxDateInPrevMonth)
  ret.setDate(maxDateInPrevMonth);
 ret.setMonth(ret.getMonth() - 1);
 return ret;
};
ASPxClientCalendar.GetPrevYearDate = function(date) {
 return ASPxClientCalendar.GetDateWithYearOffset(date, -1);
 };
ASPxClientCalendar.GetFirstDayInWeek = function(date, firstDayOfWeek) {
 var offset = date.getDay() - firstDayOfWeek;
 if(offset < 0)
  offset += 7;
 return ASPxClientCalendar.AddDays(date, -offset);
};
ASPxClientCalendar.GetLastDayInWeek = function(date,firstDayOfWeek) {
 return ASPxClientCalendar.AddDays(ASPxClientCalendar.GetFirstDayInWeek(date, firstDayOfWeek), 6);
};
ASPxClientCalendar.GetFirstDayInMonthDate = function(date) {
 var ret = new Date(date.getTime());
 ret.setDate(1);
 return ret;
};
ASPxClientCalendar.GetLastDayInMonthDate = function(date) {
 var ret = new Date(date.getTime());
 var maxDateInYearMonth = ASPxClientCalendar.GetDaysInMonth(ret.getMonth(), ret.getFullYear());
 ret.setDate(maxDateInYearMonth);
 return ret;
};
ASPxClientCalendar.AddDays = function(startDate, dayCount) {
 var date = ASPxClientCalendar.CloneDate(startDate);
 var dayDiff = 0;
 var hourInc = 3600000;
 if(dayCount < 0)
  hourInc = -1 * hourInc;
 dayCount = Math.abs(dayCount);
 while(true) {
  if(dayDiff == dayCount && startDate.getHours() == date.getHours())
   return date;
  if(dayDiff > dayCount) {
   date.setTime(-1 * hourInc + date.getTime());
   return date;
  }
  var day = date.getDate();
  date.setTime(hourInc + date.getTime());
  if(day != date.getDate())
   dayDiff++;
 }
 return date;
};
ASPxClientCalendar.AddMonths = function(date, count) {
 var newDate = ASPxClientCalendar.CloneDate(date);
 newDate.setMonth(count + newDate.getMonth());
 ASPx.DateUtils.FixTimezoneGap(date, newDate);
 if(newDate.getDate() < date.getDate())
  newDate = ASPxClientCalendar.AddDays(newDate, -newDate.getDate()); 
 return newDate;
};
ASPxClientCalendar.AddYears = function(date, count) {
 var newDate = ASPxClientCalendar.CloneDate(date);
 newDate.setFullYear(count + newDate.getFullYear());
 ASPx.DateUtils.FixTimezoneGap(date, newDate);
 return newDate;
};
ASPxClientCalendar.GetNextDate = function(date, viewType) {
 return ASPxClientCalendar.GetDateByOffset(date, 1, viewType);
};
ASPxClientCalendar.GetDateByOffset = function(date, offset, viewType) {
 if(viewType == ASPx.DatePickerType.Days)
  return ASPxClientCalendar.AddDays(date, offset);
 if(viewType == ASPx.DatePickerType.Months)
  return ASPxClientCalendar.AddMonths(date, offset);
 if(viewType == ASPx.DatePickerType.Years)
  return ASPxClientCalendar.AddYears(date, offset);
 if(viewType == ASPx.DatePickerType.Decades)
  return ASPxClientCalendar.AddYears(date, offset * 10);
};
ASPxClientCalendar.CloneDate = function(date) {
 var cloned = new Date();
 cloned.setTime(date.getTime());
 return cloned;
};
ASPxClientCalendar.GetDecadeStartYear = function(year) {
 return ASPx.DateUtils.GetDecadeStartYear(year);
};
ASPxClientCalendar.GetCenturyStartYear = function(year) {
 return ASPx.DateUtils.GetCenturyStartYear(year);
};
ASPxClientCalendar.GetDaysInRange = function(start, end) {
 return 1 + (ASPxClientCalendar.GetUTCTime(end) - ASPxClientCalendar.GetUTCTime(start)) / ASPx.calendarMsPerDay;
};
ASPxClientCalendar.GetDaysInMonth = function(month, year) {
 var d = new Date(year, month + 1, 0);
 return d.getDate();
};
ASPxClientCalendar.GetOffsetInMonths = function(start, end) {
 return end.getMonth() - start.getMonth() + 12 * (end.getFullYear() - start.getFullYear());
};
ASPxClientCalendar.GetOffsetInYears = function(start, end) {
 return end.getFullYear() - start.getFullYear();
};
ASPxClientCalendar.GetOffsetInDecades = function(start, end) {
 return (ASPxClientCalendar.GetDecadeStartYear(end.getFullYear()) - ASPxClientCalendar.GetDecadeStartYear(start.getFullYear())) / 10;
};
ASPxClientCalendar.GetOffsetInCenturies = function(start, end) {
 return (ASPxClientCalendar.GetCenturyStartYear(end.getFullYear()) - ASPxClientCalendar.GetCenturyStartYear(start.getFullYear())) / 100;
};
ASPxClientCalendar.GetOffsetInPeriods = function(start, end, viewType) {
 if(viewType == ASPx.DatePickerType.Days)
  return ASPxClientCalendar.GetOffsetInMonths(start, end);
 if(viewType == ASPx.DatePickerType.Months)
  return ASPxClientCalendar.GetOffsetInYears(start, end);
 if(viewType == ASPx.DatePickerType.Years)
  return ASPxClientCalendar.GetOffsetInDecades(start, end);
 if(viewType == ASPx.DatePickerType.Decades)
  return ASPxClientCalendar.GetOffsetInCenturies(start, end);
};
ASPxClientCalendar.GetPeriodsInRange = function(start, end, pickerType) {
 if(pickerType == ASPx.DatePickerType.Days)
  return ASPxClientCalendar.GetDaysInRange(start, end);
 if(pickerType == ASPx.DatePickerType.Months)
  return ASPxClientCalendar.GetOffsetInMonths(start, end) + 1;
 if(pickerType == ASPx.DatePickerType.Years)
  return ASPxClientCalendar.GetOffsetInYears(start, end) + 1;
 if(pickerType == ASPx.DatePickerType.Decades)
  return ASPxClientCalendar.GetOffsetInDecades(start, end) + 1;
};
ASPxClientCalendar.GetCorrectedDate = function(date, viewType) {
 return ASPx.DateUtils.CorrectDateByPickerType(date, viewType);
};
var ASPxClientCalendarDateDisabledHelper = {
 MinDate: new Date(100, 0, 1, 0, 0, 0, 0),
 MaxDate: new Date(9999, 11, 31, 23, 59, 59, 999),
 GetUpperLimitDate: function() {
  return this.MaxDate;
 },
 GetLowerLimitDate: function() {
  return this.MinDate;
 },
 IsDateWithinBoundaries: function(date) {
  return date >= this.GetLowerLimitDate() && date <= this.GetUpperLimitDate();
 },
 GetCorrectedDate: function(date) {
  if(!date)
   return null;
  if(this.IsDateWithinBoundaries(date))
   return date;
  else
   return date > this.GetUpperLimitDate() ? this.GetUpperLimitDate() : this.GetLowerLimitDate();
 },
 IsDateInRange: function(sharedParameters, date, keepTimePart) {
  if(date == null)
   return true;
  return this.IsDateFitToMinDate(date, sharedParameters.minDate, keepTimePart) && this.IsDateFitToMaxDate(date, sharedParameters.maxDate, keepTimePart) && this.IsDateWithinBoundaries(date);
 },
 IsDateFitToMinDate: function(date, minDate, keepTimePart) {
  if(minDate === null)
   return true;
  if(!keepTimePart)
   minDate = new Date(minDate.getFullYear(), minDate.getMonth(), minDate.getDate());
  return date >= minDate;
 },
 IsDateFitToMaxDate: function(date, maxDate, keepTimePart) {
  if(maxDate === null)
   return true;
  if(!keepTimePart)
   maxDate = new Date(maxDate.getFullYear(), maxDate.getMonth(), maxDate.getDate(), 23, 59, 59, 999);
  return date <= maxDate;
 },
 IsDateDisabled: function(sharedParameters, date, OnCustomDisabledDate, viewType, pickerType) {
  if(viewType !== pickerType)
   return false;
  if(date != null) {
   var length = sharedParameters.disabledDates.length;
   var correctedDate = ASPxClientCalendar.CloneDate(date);
   if(length > 0 && date != null) {
    correctedDate = ASPxClientCalendar.GetCorrectedDate(date, pickerType);
    for(var i = 0; i < length; i++) {
     var disabledDate = sharedParameters.disabledDates[i];
     if(disabledDate.getDate() == correctedDate.getDate() &&
      disabledDate.getMonth() == correctedDate.getMonth() &&
      disabledDate.getFullYear() == correctedDate.getFullYear())
      return true;
    }
   }
   if(OnCustomDisabledDate(correctedDate).isDisabled)
    return true;
  }
  return false;
 }
};
var ASPxClientCalendarSelection = ASPx.CreateClass(null, {
 constructor: function() {
  this.dates = { };
  this.count = 0;
  this.pickerType = ASPx.DatePickerType.Days;
 },
 SetPickerType: function(pickerType) {
  this.pickerType = pickerType;
 },
 Assign: function(source) {
  this.Clear();
  for(var key in source.dates) {
   if(source.dates.hasOwnProperty(key)) {
    var item = source.dates[key];
    if(item.constructor != Date) continue;
    this.Add(item);
   }
  }
 },
 Clear: function() {
  if(this.count > 0) {
   this.dates = { };
   this.count = 0;
  }
 },
 Equals: function(selection) {
  if(this.count != selection.count)
   return false;
  for(var key in this.dates) {
   if(this.dates.hasOwnProperty(key)) {
    if(this.dates[key].constructor != Date) continue;
    if(!selection.ContainsKey(key))
     return false;
   }
  }
  return true;
 },
 Contains: function(date) {
  var key = this.GetKey(this.GetCorrectedDate(date));
  return this.ContainsKey(key);
 },
 ContainsKey: function(key) {
  return !!this.dates[key];
 },
 GetCorrectedDate: function(date) {
  return ASPxClientCalendar.GetCorrectedDate(date, this.pickerType);
 },
 GetCorrectedYear: function(date) {
  var year = date.getFullYear();
  return this.pickerType != ASPx.DatePickerType.Decades ? year : ASPxClientCalendar.GetDecadeStartYear(year);
 },
 GetCorrectedMonth: function(date) {
  return this.pickerType < ASPx.DatePickerType.Years ? date.getMonth() : 0;
 },
 GetCorrectedDay: function(date) {
  return this.pickerType == ASPx.DatePickerType.Days ? date.getDate() : 1;
 },
 Add: function(date) {
  var correctedDate = this.GetCorrectedDate(date);
  var key = this.GetKey(correctedDate);
  if(!this.ContainsKey(key)) {
   this.dates[key] = ASPxClientCalendar.CloneDate(correctedDate);
   this.count++;
  }
 },
 AddArray: function(dates) {
  for(var i = 0; i < dates.length; i++)
   this.Add(dates[i]);
 },
 AddRange: function(start, end) {
  var correctedStart = this.GetCorrectedDate(start);
  var correctedEnd = this.GetCorrectedDate(end);
  if(correctedEnd < correctedStart) {
   this.AddRange(correctedEnd, correctedStart);
   return;
  }
  var date = ASPxClientCalendar.CloneDate(correctedStart);
  while(date <= correctedEnd) {
   this.Add(date);
   date = ASPxClientCalendar.GetNextDate(date, this.pickerType);
  }
 },
 AddWeek: function(startDate) {
  this.AddRange(startDate, ASPxClientCalendar.AddDays(startDate, 6));
 },
 SetRestrictions: function(start, end) {
  this.startDate = this.GetCorrectedDate(ASPxClientCalendar.CloneDate(start));
  this.endDate = this.GetCorrectedDate(ASPxClientCalendar.CloneDate(end));
 },
 ResetRestrictions: function() {
  this.startDate = null;
  this.endDate = null;
 },
 Remove: function(date) {
  var correctedDate = this.GetCorrectedDate(date);
  var key = this.GetKey(correctedDate);
  if(this.ContainsKey(key)) {
   delete this.dates[key];
   this.count--;
  }
 },
 RemoveArray: function(dates) {
  for(var i = 0; i < dates.length; i++)
   this.Remove(dates[i]);
 },
 RemoveRange: function(start, end) {
  var correctedStart = this.GetCorrectedDate(start);
  var correctedEnd = this.GetCorrectedDate(end);
  if(correctedEnd < correctedStart) {
   this.RemoveRange(correctedEnd, correctedStart);
   return;
  }
  var date = ASPxClientCalendar.CloneDate(correctedStart);
  while(date <= correctedEnd) {
   this.Remove(date);
   date = ASPxClientCalendar.GetNextDate(date, this.pickerType);
  }
 },
 RemoveWeek: function(startDate) {
  this.RemoveRange(startDate, ASPxClientCalendar.AddDays(startDate, 6));
 },
 GetDates: function() {
  var result = [ ];
  for(var key in this.dates) {
   if(this.dates.hasOwnProperty(key)) {
    var item = this.dates[key];
    if(item.constructor != Date) continue;
    result.push(ASPxClientCalendar.CloneDate(item));
   }
  }
  return result;  
 },
 GetFirstDate: function() {
  if(this.count == 0)
   return null;
  for(var key in this.dates) {
   if(this.dates.hasOwnProperty(key)) {
    var item = this.dates[key];
    if(item.constructor != Date) continue;
    return ASPxClientCalendar.CloneDate(item);
   }
  }
  return null;
 },
 GetKey: function(date) {  
  return ASPx.DateUtils.GetInvariantDateString(date);
 }
});
var ASPxClientCalendarSelectionTransaction = ASPx.CreateClass(null, {
 constructor: function(calendar) {
  this.calendar = calendar;
  this.isActive = false;
  this.backup = new ASPxClientCalendarSelection();
  this.selection = new ASPxClientCalendarSelection();
  this.backup.SetPickerType(calendar.pickerType);
  this.selection.SetPickerType(calendar.pickerType);
 },
 Start: function() {
  if(this.isActive)
   this.Rollback();
  this.backup.Assign(this.calendar.selection);
  this.selection.Clear();
  this.isActive = true;
  ASPx.activeCalendar = this.calendar;
 },
 Commit: function() {  
  this.calendar.ApplySelectionByDiff(this.selection, true);
  this.Reset();
 },
 Rollback: function() {
  this.calendar.ApplySelectionByDiff(this.backup);  
  this.Reset();
 },
 Reset: function() {
  this.backup.Clear();
  this.selection.Clear();
  this.isActive = false;
  ASPx.activeCalendar = null;
 },
 CopyFromBackup: function() {
  this.selection.Assign(this.backup);
 },
 IsChanged: function() {
  return !this.backup.Equals(this.selection);
 }
});
var ASPxClientCalendarView = ASPx.CreateClass(null, {
 constructor: function(calendar, row, column) {
  this.row = row;
  this.column = column;
  this.calendar = calendar;
  this.isASPxClientCalendarView = true;
  var temp = column + row;
  this.isLowBoundary = temp == 0;
  this.isHighBoundary = temp == calendar.rows + calendar.columns - 2;
  this.isLastViewInFirstRow = row == 0 && column == calendar.columns - 1;
  this.visibleDate = null;
  this.startDate = null;
  this.dayFunctions = {};
  this.dayStyleCache = {};
  this.dayCellCache = {};
  this.navButtonFunctions = {};
  this.titleFunction = null;
  this.isNavigationView = this.GetViewType() > this.calendar.pickerType;
  this.isFirstNavigationView = this.GetViewType() === ASPx.DatePickerType.Months;
  this.isLastNavigationView = this.GetViewType() === this.calendar.maxViewType;
 },
 Initialize: function() {
  if(!this.isNavigationView || this.isFirstNavigationView) {
   this.UpdateDate();
   this.AddHoverStateItems();
   if(!this.isNavigationView) {
    this.UpdateTitle();
    this.EnsureSelection();
    this.MakeDisabledStateItems();
   }
  }
 },
 GetDateFunctionsHash: function(selectWeeks) {
  return this.dayFunctions;
 },
 GetViewCell: function() {
  return this.calendar.GetViewCell(this.calendar.IsMultiView() ? this.GetIDPostfix() : "");
 },
 GetIndex: function() {
  return this.row * this.calendar.columns + this.column;
 },
 GetTitleCell: function() {
  return this.GetChildElement("TC");
 },
 GetTitleElement: function() {
  return this.GetChildElement("T") || this.GetTitleCell();
 },
 EnsureVisible: function(visible) {
  if(this.calendar.switchToSingleMonthAtWindowInnerWidth <= 0) return;
  var cell = this.GetViewCell();
  ASPx.ToggleClassNameToElement(cell, "view-visible", visible);
 },
 AttachCancelSelect: function(method, element) {
  method(element, "mouseup", aspxCalCancelSelect);
 },
 IsValidIndex: function(index) {
  return index >= 0 && index <= this.GetMaxIndex();
 },
 GetIDPostfix: function() {
  return "_" + this.row.toString() + "x" + this.column.toString();
 },
 GetChildElement: function(postfix) {
  if(this.calendar.IsMultiView())
   postfix += this.GetIDPostfix();
  return this.calendar.GetChildElement(postfix);
 },
 AttachDayMouseEvents: function(method, cell, handler) {
  var types = ["down", "up", "over", "out"];
  for(var i = 0; i < types.length; i++)
   method(cell, "mouse" + types[i], handler);
 },
 GetDayMouseEventFunction: function(index, selectWeeks) {
  var hash = this.GetDateFunctionsHash(selectWeeks);
  if(!hash[index])
   hash[index] = ASPxClientCalendar.AnonymousHandlers.DayMouseEvent(this.calendar.name, this.row, this.column, index, selectWeeks);
  return hash[index];
 },
 GetNavButtonFunction: function(buttonID, offset, isVisibleInAdaptiveOnly) {
  if(!this.navButtonFunctions[buttonID])
   this.navButtonFunctions[buttonID] = ASPxClientCalendar.AnonymousHandlers.NavigationButtonClick(this.calendar.name, offset, isVisibleInAdaptiveOnly);
  return this.navButtonFunctions[buttonID];
 },
 GetTitleFunction: function() {
  if(!this.titleFunction)
   this.titleFunction = ASPxClientCalendar.AnonymousHandlers.TitleClick(this.calendar.name, this.row, this.column);
  return this.titleFunction;
 },
 UpdateDate: function() {
  this.visibleDate = this.GetCurrentVisibleDate();
  var date = ASPxClientCalendar.CloneDate(this.visibleDate);
  date.setDate(1);
  this.UpdateNavigationCells(date);
  this.startDate = this.GetCurrentStartDate(date);
 },
 UpdateTitle: function() {
  var el = this.GetTitleElement();
  if(!el) return;
  el.innerHTML = this.GetTitleText();
  el.style.cursor = this.isLastNavigationView && !this.calendar.showFastPopup ? "default" : ASPx.GetPointerCursor();
 },
 GetActualTodayDate: function() {
  if(!this.calendar || !this.calendar.actualTodayDate)
   return ASPxClientCalendar.GetCorrectedDate(new Date(), this.GetViewType());
  return this.calendar.actualTodayDate;
 },
 IsDateVisible: function(date) {
  var result = !this.calendar.IsMultiView() || !this.IsDateOtherPeriod(date);
  if(!result) {
   result = result || this.isLowBoundary && date <= this.visibleDate ||
    this.isHighBoundary && date >= this.visibleDate;
  }
  return result;
 },
 GetDayCell: function(index) {
  if(ASPx.IsExistsElement(this.dayCellCache[index]))
   return this.dayCellCache[index];
  var dateContainer = this.GetDateCellContainer();
  var colIndex = this.GetDateCellColIndex(index);
  var rowIndex = this.GetDateCellRowIndex(index);
  var cell = dateContainer.rows[rowIndex].cells[colIndex];
  this.dayCellCache[index] = cell;
  return cell;
 },
 GetDayCellIndex: function(cell) {
  var currentDate = ASPxClientCalendar.CloneDate(this.startDate);
  var maxIndex = this.GetMaxIndex();
  var currentIndex = 0;
  do {
   currentIndex = this.GetIndexByDate(currentDate);
   if(this.GetDayCell(currentIndex) === cell)
    return currentIndex;
   currentDate = this.GetNextDate(currentDate);
  }
  while(currentIndex < maxIndex);
  return null;
 },
 ChangeTitleElementEnabledAttributes: function(element, method) {
  method(element, "cursor");
 },
 RemoveDayCellStyle: function(cell, suffix) {
  var info = new ASPxClientCalendarStyleInfo();
  this.calendar.ImportEtalonStyle(info, suffix);
  info.Remove(cell);
 },
 ApplySelectionToCell: function(index, showSelection, applyDateInRangeStyle) {
  var cell = this.GetDayCell(index);
  var info;
  if(showSelection) {
   if(this.GetStateController())
    this.GetStateController().DoClearHoverState(cell);
   if(!this.dayStyleCache[index]) {
    var backup = new ASPxClientCalendarStyleInfo();
    backup.Import(cell);
    this.dayStyleCache[index] = backup;
    info = backup.Clone();
   } else
    info = this.dayStyleCache[index].Clone();
   if(!applyDateInRangeStyle || this.calendar.NeedApplySelectionToDayInRange())
    this.calendar.ImportEtalonStyle(info, this.GetCellSelectedStyleName());
  } else
   info = this.dayStyleCache[index];
  info.Apply(cell);
  if(applyDateInRangeStyle) {
   if(showSelection)
    ASPx.AddClassNameToElement(cell, this.calendar.GetDayInRangeClassName());
   else
    ASPx.RemoveClassNameFromElement(cell, this.calendar.GetDayInRangeClassName());
  }
 },
 UpdateSelection: function(dates, showSelection, totalSelectionEdges) {
  if(ASPx.Ident.IsArray(dates))
   for(var i = 0; i < dates.length; i++)
    this.UpdateDateSelection(dates[i], showSelection, totalSelectionEdges);
  else
   this.UpdateDateSelection(dates, showSelection, totalSelectionEdges);
 },
 UpdateDateSelection: function(date, showSelection, totalSelectionEdges) {
  var index = this.GetIndexByDate(date);
  if(!this.IsValidIndex(index) || !this.IsDateVisible(date))
   return;
  var applyDateInRangeStyle = totalSelectionEdges
   && !ASPxClientCalendar.IsFirstDateEqualToAnyOther(date, totalSelectionEdges.start, totalSelectionEdges.end);
  this.ApplySelectionToCell(index, showSelection, applyDateInRangeStyle);
 },
 EnsureSelection: function() {
  var selection = this.calendar.selection;
  var selectedRangeRestrictions = null;
  if(!this.isNavigationView) {
   selectedRangeRestrictions = this.calendar.sharedParameters.dateRangeMode ? ASPx.Data.ArrayGetIntegerEdgeValues(selection.GetDates()) : null;
   if(this.calendar.NeedCalculateSelectionOnUpdating()) {
    selectedRangeRestrictions.start = ASPxClientCalendar.CloneDate(selection.startDate);
    selectedRangeRestrictions.end = ASPxClientCalendar.CloneDate(selection.endDate);
    var visibleRangeRestrictions = this.GetVisibleRangeRestrictions();
    ASPxClientCalendar.AddSelectedRangeVisiblePartToSelection(selection, selectedRangeRestrictions, visibleRangeRestrictions);
   }
  }
  var selectedDates = !this.isNavigationView ? selection.GetDates() : this.calendar.selectedNavigationDates[this.GetViewType()];
  this.UpdateSelection(selectedDates, true, selectedRangeRestrictions);
 },
 Update: function() {
  this.dayStyleCache = {};
  this.UpdateDate();
  this.UpdateDateCellHtml();
  this.UpdateTitle();
  this.EnsureSelection();
 },
 GetVisibleRangeRestrictions: function() {
  return {
   start: this.GetDateByIndex(0),
   end: this.GetDateByIndex(this.GetMaxIndex())
  };
 },
 GetMaxVisibleDate: function() {
  return this.GetVisibleRangeRestrictions().end;
 },
 ChangeButtonEnabledAttributes: function(element, method) {
  method(element, "onclick");
  method(element, "ondblclick");
 },
 AddHeaderDisabledStateItem: function(element) {
  var cell = this.calendar.GetEtalonStyleCell("DD");
  if(cell)
   ASPx.GetStateController().AddDisabledItem(element.id, cell.className, cell.style.cssText, null, null, null);
 },
 ApplyDayCellStyle: function(cell, date) {
  cell.style.cursor = "";
  var cal = this.calendar;
  var info = new ASPxClientCalendarStyleInfo();
  var needPointer = false;
  var readOnly = cal.GetReadOnly();
  cal.ImportEtalonStyle(info, this.GetCellStyleName());
  var isDateDisabled = false;
  if(this.IsDateVisible(date)) {
   var isCurrentMonthDate = !this.IsDateOtherPeriod(date);
   if(cal.IsDateWeekend(date) && cal.CanApplyDayCellStyle("DW", isCurrentMonthDate) && this.SupportsWeekendStyle())
    cal.ImportEtalonStyle(info, "DW");
   if(!isCurrentMonthDate)
    cal.ImportEtalonStyle(info, this.GetCellOtherPeriodStyleName());
   if(!ASPxClientCalendarDateDisabledHelper.IsDateInRange(cal.sharedParameters, date)
    && cal.CanApplyDayCellStyle(this.GetCellOutOfRangeStyleName(), isCurrentMonthDate) && !this.isNavigationView)
    cal.ImportEtalonStyle(info, this.GetCellOutOfRangeStyleName());
   if(cal.IsDateDisabled(date) && cal.CanApplyDayCellStyle(this.GetCellDisabledStyleName(), isCurrentMonthDate) && !this.isNavigationView) {
    cal.ImportEtalonStyle(info, this.GetCellDisabledStyleName());
    isDateDisabled = true;
   }
   if(ASPxClientCalendar.AreDatesEqual(this.GetActualTodayDate(), date) && cal.CanApplyDayCellStyle("DT", isCurrentMonthDate) && !this.isNavigationView)
    cal.ImportEtalonStyle(info, "DT");
   if(!cal.clientEnabled && cal.CanApplyDayCellStyle("DD", isCurrentMonthDate) && !this.isNavigationView)
    cal.ImportEtalonStyle(info, "DD");
   else if(!cal.enableMulti && !isDateDisabled && !readOnly || this.isNavigationView)
    needPointer = true;
  } else
   info.AddClassName(emptyDateCellClassName);
  info.Apply(cell);
  if(needPointer && cal.needToSetCursor)
   ASPx.SetPointerCursor(cell);
 },
 EnsureTodayStyle: function() {
  var serverCurrentDateIndex = this.GetIndexByDate(this.calendar.serverCurrentDate);
  var clientCurrentDateIndex = this.GetIndexByDate(new Date());
  if(this.IsValidIndex(serverCurrentDateIndex))
   this.RemoveDayCellStyle(this.GetDayCell(serverCurrentDateIndex), "DT");
  if(this.IsValidIndex(clientCurrentDateIndex))
   this.ApplyDayCellStyle(this.GetDayCell(clientCurrentDateIndex), new Date());
  this.dayStyleCache[serverCurrentDateIndex] = null;
  this.dayStyleCache[clientCurrentDateIndex] = null;
  this.EnsureSelection();
 },
 GetHeaderCellElements: function() {
  var result = [
   this.GetTitleCell(),
   this.GetTitleElement()
  ];
  var navigationCells = this.GetNavigationCells();
  for(var i = 0; i < navigationCells.length; i++)
   if(navigationCells[i])
    result.push(navigationCells[i]);
  return result;
 },
 SetHeaderCellsEnabled: function(enabled) {
  var headerCellElements = this.GetHeaderCellElements();
  for(var i = 0; i < headerCellElements.length; i++)
   if(headerCellElements[i])
    ASPx.GetStateController().SetElementEnabled(headerCellElements[i], enabled);
 },
 MakeDisabledStateItems: function() {
  if(this.isNavigationView)
   return;
  var element = this.GetTitleCell();
  if(element)
   this.AddHeaderDisabledStateItem(element);
  var element = this.GetTitleElement();
  if(element)
   this.AddHeaderDisabledStateItem(element);
 },
 ChangeEnabledStateItems: function(enabled) {
  this.SetHeaderCellsEnabled(enabled);
  if(enabled)
   this.AddHoverStateItems();
  else
   this.RemoveHoverStateItems();
 },
 ChangeEnabledAttributes: function(enabled) {
  var element = this.GetTitleElement();
  if(element)
   this.ChangeTitleElementEnabledAttributes(element, ASPx.Attr.ChangeStyleAttributesMethod(enabled));
 },
 ChangeEditableAttributesOnChangeEnabledState: function(enabled) {
  if(!this.calendar.enabled)
   return;
  var eventMethod = ASPx.Attr.ChangeEventsMethod(enabled);
  if(!this.isNavigationView)
   this.AttachTitleMouseEvents(eventMethod);
  if(!this.isNavigationView || this.isFirstNavigationView) {
   this.AttachNavigationMouseEvents(eventMethod);
   if(this.AllowAttachDetachDateEventsOnChangeEnabled())
    this.AttachDateMouseEvents(eventMethod, ASPx.Attr.InitiallyChangeStyleAttributesMethod(enabled));
  }
 },
 ChangeEditableAttributesOnChangeReadOnlyState: function(readOnly) {
  if(!this.calendar.enabled)
   return;
  if(this.AllowAttachDetachDateEventsOnChangeReadOnly()) {
   var eventMethod = ASPx.Attr.ChangeEventsMethod(!readOnly);
   this.AttachDateMouseEvents(eventMethod, ASPx.Attr.InitiallyChangeStyleAttributesMethod(!readOnly));
  }
 },
 GetNextDate: function(date) {
  return ASPxClientCalendar.GetNextDate(date, this.GetViewType());
 },
 AttachTitleMouseEvents: function(eventMethod) {
  var title = this.GetTitleElement();
  if(title)
   eventMethod(title, "click", this.GetTitleFunction());
 },
 AttachNavigationMouseEvents: function(eventMethod) {
  var navigationCells = this.GetNavigationCells();
  for(var i = 0; i < navigationCells.length; i++)
   if(this.NeedToAttachNavigationEvent(navigationCells[i])) {
    var navigationCellImage = this.GetNavigationCellImage(navigationCells[i]);
    var offset = this.GetNavigationCellOffset(navigationCells[i]);
    var isVisibleInAdaptiveOnly = this.IsVisibleInAdaptiveModeNavigationCell(navigationCells[i]);
    this.AttachNavigationImageEvent(navigationCellImage || navigationCells[i], eventMethod, offset, isVisibleInAdaptiveOnly);
   }
 },
 NeedToAttachNavigationEvent: function(navigationCell) {
  if(!ASPx.IsExists(navigationCell))
   return false;
  return this.IsDefaultVisibleNavigationCell(navigationCell) || this.IsVisibleInAdaptiveModeNavigationCell(navigationCell);
 },
 IsDefaultVisibleNavigationCell: function(navigationCell) {
  return this.IsPrevNavCell(navigationCell) && this.isLowBoundary
   || this.IsNextNavCell(navigationCell) && this.isLastViewInFirstRow;
 },
 IsVisibleInAdaptiveModeNavigationCell: function(navigationCell) {
  return this.calendar.IsMultiView()
   && (this.IsNextNavCell(navigationCell) && this.isLowBoundary && !this.isLastViewInFirstRow
   || this.IsPrevNavCell(navigationCell) && this.isLastViewInFirstRow && !this.isLowBoundary);
 },
 GetNavigationCellImage: function(navigationCell) {
  return ASPx.GetChildByTagName(navigationCell, "IMG");
 },
 AttachNavigationImageEvent: function(navigationCellImage, eventMethod, offset, isVisibleInAdaptiveOnly) {
  eventMethod(navigationCellImage, "click", this.GetNavButtonFunction(navigationCellImage.id, offset, isVisibleInAdaptiveOnly));
 },
 GetDateCells: function() {
  if(!this.dateCells)
   this.dateCells = this.GetMainElement().querySelectorAll(this.GetDateCellSelector());
  return this.dateCells;
 },
 GetStateController: function() {
  return typeof (ASPx.GetStateController) != "undefined" ? ASPx.GetStateController() : null;
 },
 AddHoverStateItems: function() {
  var stateController = this.GetStateController();
  if(!stateController)
   return;
  var hoverStyleInfo = new ASPxClientCalendarStyleInfo();
  this.calendar.ImportEtalonStyle(hoverStyleInfo, this.GetCellHoverStyleName());
  var dateCells = this.GetDateCells();
  for(var i = 0; i < dateCells.length; i++) {
   var cell = dateCells[i];
   if(!cell.id)
    cell.id = this.GetDateCellID(i);
   stateController.ClearCache(cell, ASPx.HoverItemKind);
   stateController.AddHoverItem(cell.id, [hoverStyleInfo.className], [hoverStyleInfo.cssText], null, null, null);
  }
 },
 RemoveHoverStateItems: function() {
  var stateController = this.GetStateController();
  if(!stateController)
   return;
  var dateCells = this.GetDateCells();
  for(var i = 0; i < dateCells.length; i++) {
   var cell = dateCells[i];
   if(!cell.id)
    cell.id = this.GetDateCellID(i);
   stateController.RemoveHoverItem(cell.id);
   stateController.ClearCache(cell, ASPx.HoverItemKind);
  }
 },
 GetDateCellID: function(cellIndex) { return this.GetMainElement().id + "_" + cellIndex; },
 GetNavigationCells: function() { throw "Not Implemented"; },
 GetNavigationCellOffset: function(navigationCell) { throw "Not Implemented"; },
 GetTitleText: function() { throw "Not Implemented"; },
 IsDateOtherPeriod: function(date) { throw "Not Implemented"; },
 GetCurrentVisibleDate: function() { throw "Not Implemented"; },
 GetCurrentStartDate: function() { throw "Not Implemented"; },
 UpdateNavigationCells: function(date) { throw "Not Implemented"; },
 GetDateByIndex: function(index) { throw "Not Implemented"; },
 GetIndexByDate: function(date) { throw "Not Implemented"; },
 GetDateCellContainer: function() { throw "Not Implemented"; },
 GetMainElement: function() { throw "Not Implemented"; },
 GetAnimatedElement: function() { throw "Not Implemented"; },
 GetDateCellColIndex: function(index) { throw "Not Implemented"; },
 GetDateCellRowIndex: function(index) { throw "Not Implemented"; },
 UpdateDateCellHtml: function(date) { throw "Not Implemented"; },
 SupportsWeekendStyle: function(date) { throw "Not Implemented"; },
 AttachDateMouseEvents: function(eventMethod, styleMethod) { throw "Not Implemented"; },
 GetVisibleDateOffsetInfo: function() { throw "Not Implemented"; },
 GetViewType: function() { throw "Not Implemented"; },
 AllowAttachDetachDateEventsOnChangeEnabled: function() { throw "Not Implemented"; },
 AllowAttachDetachDateEventsOnChangeReadOnly: function() { throw "Not Implemented"; },
 IsPrevNavCell: function(navigationCell) { throw "Not Implemented"; },
 IsNextNavCell: function(navigationCell) { throw "Not Implemented"; },
 GetCellStyleName: function() { throw "Not Implemented"; },
 GetCellSelectedStyleName: function() { throw "Not Implemented"; },
 GetCellHoverStyleName: function() { throw "Not Implemented"; },
 GetCellOtherPeriodStyleName: function() { throw "Not Implemented"; },
 GetCellOutOfRangeStyleName: function() { throw "Not Implemented"; },
 GetCellDisabledStyleName: function() { throw "Not Implemented"; },
 GetDateCellSelector: function() { throw "Not Implemented"; },
});
var ASPxClientCalendarDaysView = ASPx.CreateClass(ASPxClientCalendarView, {
 constructor: function(calendar, row, column) {
  this.constructor.prototype.constructor.call(this, calendar, row, column);
  this.dayFunctionsWithWeekSelection = {};
 },
 AttachDateMouseEvents: function(eventMethod, styleMethod) {
  var index;
  var cell;
  if(this.calendar.showDayHeaders) {
   var headCells = this.GetMonthTable().rows[0].cells;
   var dayNameIndex = 0;
   if(this.calendar.showWeekNumbers) {
    dayNameIndex++;
    cell = headCells[0];
    if(this.calendar.enableMulti) {
     eventMethod(cell, "click", ASPxClientCalendar.AnonymousHandlers.SelectMonth(this.calendar.name, this.row, this.column));
     if(this.calendar.needToSetCursor)
      styleMethod(cell, "cursor", ASPx.GetPointerCursor());
    }
    this.AttachCancelSelect(eventMethod, cell);
   }
   for(var j = 0; j < 7; j++)
    this.AttachCancelSelect(eventMethod, headCells[dayNameIndex++]);
  }
  for(var i = 0; i < calendarWeekCount; i++) {
   if(this.calendar.showWeekNumbers) {
    cell = this.GetWeekNumberCell(i);
    if(this.calendar.enableMulti)
     this.AttachDayMouseEvents(eventMethod, cell, this.GetDayMouseEventFunction(7 * i, true));
    else
     this.AttachCancelSelect(eventMethod, cell);
   }
   var date;
   for(var j = 0; j < 7; j++) {
    index = i * 7 + j;
    cell = this.GetDayCell(index);
    date = this.GetDateByIndex(index);
    var cal = this.calendar;
    if(!this.calendar.enableMulti && this.IsDateVisible(date) &&
     ASPxClientCalendarDateDisabledHelper.IsDateInRange(cal.sharedParameters, date) &&
     !cal.IsDateDisabled(date)) {
     if(this.calendar.needToSetCursor && (!cell.style.cursor || cell.style.cursor == ASPx.GetPointerCursor()))
      styleMethod(cell, "cursor", ASPx.GetPointerCursor());
    }
    this.AttachDayMouseEvents(eventMethod, cell, this.GetDayMouseEventFunction(index, false));
   }
  }
 },
 GetDateFunctionsHash: function(selectWeeks) {
  return selectWeeks ? this.dayFunctionsWithWeekSelection : this.dayFunctions;
 },
 UpdateNavigationCells: function(date) {
  var prevYearCell = this.GetPrevYearCell();
  var prevMonthCell = this.GetPrevMonthCell();
  var isEnabledDate = date.getFullYear() > 100;
  if(prevYearCell && ASPx.GetElementVisibility(prevYearCell) != isEnabledDate) {
   ASPx.SetElementVisibility(prevYearCell, isEnabledDate);
  }
  if(prevMonthCell) {
   var isEnabledDate = isEnabledDate || (date.getFullYear() == 100 && date.getMonth() > 0);
   if(ASPx.GetElementVisibility(prevMonthCell) != isEnabledDate)
    ASPx.SetElementVisibility(prevMonthCell, isEnabledDate);
  }
  var nextYearCell = this.GetNextYearCell();
  var nextMonthCell = this.GetNextMonthCell();
  isEnabledDate = date.getFullYear() < 9999;
  if(nextYearCell && ASPx.GetElementVisibility(nextYearCell) != isEnabledDate) {
   ASPx.SetElementVisibility(nextYearCell, isEnabledDate);
  }
  if(nextMonthCell) {
   var isEnabledDate = isEnabledDate || (date.getFullYear() == 9999 && date.getMonth() < 11);
   if(ASPx.GetElementVisibility(nextMonthCell) != isEnabledDate)
    ASPx.SetElementVisibility(nextMonthCell, isEnabledDate);
  }
 },
 IsPrevNavCell: function(navigationCell) {
  return navigationCell == this.GetPrevMonthCell() || navigationCell == this.GetPrevYearCell();
 },
 IsNextNavCell: function(navigationCell) {
  return navigationCell == this.GetNextMonthCell() || navigationCell == this.GetNextYearCell();
 },
 GetNavigationCellOffset: function(navigationCell) {
  if(navigationCell == this.GetPrevYearCell())
   return -12;
  if(navigationCell == this.GetPrevMonthCell())
   return -1;
  if(navigationCell == this.GetNextMonthCell())
   return 1;
  if(navigationCell == this.GetNextYearCell())
   return 12;
  return 0;
 },
 GetCurrentVisibleDate: function() {
  return ASPxClientCalendar.AddMonths(this.calendar.visibleDates[this.GetViewType()], this.GetIndex());
 },
 GetCurrentStartDate: function(visibleDate) {
  var offset = visibleDate.getDay() - this.calendar.firstDayOfWeek;
  if(offset < 0)
   offset += 7;
  return ASPxClientCalendar.AddDays(visibleDate, -offset);
 },
 GetDateByIndex: function(index) {
  return ASPxClientCalendar.AddDays(this.startDate, index);
 },
 GetIndexByDate: function(date) {
  return ASPxClientCalendar.GetDaysInRange(this.startDate, date) - 1;
 },
 IsDateOtherPeriod: function(date) {
  if(date == null)
   return false;
  return date.getMonth() != this.visibleDate.getMonth() ||
   date.getFullYear() != this.visibleDate.getFullYear();
 },
 GetDateCellColIndex: function(index) {
  var result = index % 7;
  if(this.calendar.showWeekNumbers)
   result++;
  return result;
 },
 GetDateCellRowIndex: function(index) {
  var result = (index - index % 7) / 7;
  if(this.calendar.showDayHeaders)
   result++;
  return result;
 },
 GetMaxIndex: function() {
  return 7 * calendarWeekCount - 1;
 },
 GetMaxVisibleDate: function() {
  var result = ASPxClientCalendar.CloneDate(this.visibleDate);
  result.setDate(ASPxClientCalendar.GetDaysInMonth(result.getMonth(), result.getFullYear()));
  return result;
 },
 GetDateCellContainer: function() {
  return this.GetMonthTable();
 },
 GetMainElement: function() {
  return this.GetMonthCell();
 },
 GetAnimatedElement: function() {
  return this.GetMonthTable();
 },
 GetMonthTable: function() {
  return this.calendar.GetMonthTable(this.calendar.IsMultiView() ? this.GetIDPostfix() : "");
 },
 GetMonthCell: function() {
  return this.calendar.GetMonthCell(this.calendar.IsMultiView() ? this.GetIDPostfix() : "");
 },
 GetWeekNumberCell: function(index) {
  if(this.calendar.showDayHeaders)
   index++;
  return this.GetMonthTable().rows[index].cells[0];
 },
 GetPrevYearCell: function() {
  return this.GetChildElement("PYC");
 },
 GetPrevMonthCell: function() {
  return this.GetChildElement("PMC");
 },
 GetNextMonthCell: function() {
  return this.GetChildElement("NMC");
 },
 GetNextYearCell: function() {
  return this.GetChildElement("NYC");
 },
 UpdateDateCellHtml: function() {
  var date = ASPxClientCalendar.CloneDate(this.startDate);
  var offset = this.calendar.firstDayOfWeek - 1;
  if(offset < 0)
   offset += 7;
  var weekNumber = ASPxClientCalendar.GetISO8601WeekOfYear(ASPxClientCalendar.AddDays(date, offset));
  var cell;
  for(var i = 0; i < calendarWeekCount; i++) {
   if(this.calendar.showWeekNumbers)
    this.calendar.SetMonthTableCellContent(this.GetWeekNumberCell(i), (weekNumber < 10 ? "0" : "") + weekNumber.toString(), true);
   for(var j = 0; j < 7; j++) {
    cell = this.GetDayCell(i * 7 + j);
    this.calendar.SetMonthTableCellContent(cell, this.IsDateVisible(date) ? date.getDate() : "&nbsp;");
    this.ApplyDayCellStyle(cell, date);
    date = this.GetNextDate(date);
   }
   if(++weekNumber > 52)
    weekNumber = ASPxClientCalendar.GetISO8601WeekOfYear(ASPxClientCalendar.AddDays(date, offset));
  }
 },
 GetTitleText: function() {
  if(!this.titleFormatter) {
   this.titleFormatter = new ASPx.DateFormatter();
   this.titleFormatter.SetFormatString(this.calendar.rtl ? "MMMM yyyy" : ASPx.CultureInfo.yearMonth);
  }
  return this.titleFormatter.Format(this.visibleDate);
 },
 SupportsWeekendStyle: function(date) {
  return true;
 },
 MakeDisabledStateItems: function() {
  var cells = this.GetAuxCells();
  for(var i = 0; i < cells.length; i++)
   this.AddAuxDisabledStateItem(cells[i], this.GetAuxId(i));
  ASPxClientCalendarView.prototype.MakeDisabledStateItems.call(this);
 },
 ChangeEnabledStateItems: function(enabled) {
  this.SetAuxCellsEnabled(enabled);
  ASPxClientCalendarView.prototype.ChangeEnabledStateItems.call(this, enabled);
 },
 SetAuxCellsEnabled: function(enabled) {
  var cells = this.GetAuxCells();
  for(var i = 0; i < cells.length; i++)
   ASPx.GetStateController().SetElementEnabled(cells[i], enabled);
 },
 GetNavigationCells: function() {
  return [
   this.GetPrevYearCell(),
   this.GetPrevMonthCell(),
   this.GetNextMonthCell(),
   this.GetNextYearCell()
  ];
 },
 GetAuxCells: function() {
  if(this.auxCells == null) {
   this.auxCells = [];
   var table = this.GetMonthTable();
   for(var i = 0; i < table.rows.length; i++) {
    var row = table.rows[i];
    if(i == 0 && this.calendar.showDayHeaders) {
     for(var j = 0; j < row.cells.length; j++)
      this.auxCells.push(row.cells[j]);
    }
    if(i > 0 && this.calendar.showWeekNumbers)
     this.auxCells.push(row.cells[0]);
   }
  }
  return this.auxCells;
 },
 GetAuxId: function(index) {
  return this.calendar.name + "_AUX_" + this.row + "_" + this.column + "_" + index;
 },
 AddAuxDisabledStateItem: function(element, id) {
  var cell = this.calendar.GetEtalonStyleCell("DD");
  if(cell) {
   element.id = id;
   ASPx.GetStateController().AddDisabledItem(id, cell.className, cell.style.cssText, null, null, null);
  }
 },
 GetVisibleDateOffsetInfo: function() {
  return {
   month: this.GetIndex(),
   year: 0
  };
 },
 GetViewType: function() { return ASPx.DatePickerType.Days; },
 AllowAttachDetachDateEventsOnChangeEnabled: function() {
  return !this.calendar.GetReadOnly();
 },
 AllowAttachDetachDateEventsOnChangeReadOnly: function() {
  return this.calendar.clientEnabled;
 },
 GetCellStyleName: function() { return "D"; },
 GetCellSelectedStyleName: function() { return "DS"; },
 GetCellHoverStyleName: function() { return "DH"; },
 GetCellOtherPeriodStyleName: function() { return "DA"; },
 GetCellOutOfRangeStyleName: function() { return "DO"; },
 GetCellDisabledStyleName: function() { return "DDD"; },
 GetDateCellSelector: function() { return "td[class*=\"dxeCalendarDay\"]"; },
});
ASPxClientCalendarView.DayInRangeClassName = "dxeDayInRange";
var ASPxClientCalendarLargeTimePeriodView = ASPx.CreateClass(ASPxClientCalendarView, {
 constructor: function(calendar, row, column) {
  this.constructor.prototype.constructor.call(this, calendar, row, column);
  if(calendar.fastNavRollbackTexts && this.isNavigationView)
   this.headerRollbackText = calendar.fastNavRollbackTexts[this.GetViewType() - 1];
 },
 GetMaxIndex: function() {
  return 11;
 },
 GetPrevTimePeriodCell: function() {
  return this.GetChildElement("PTPC");
 },
 GetNextTimePeriodCell: function() {
  return this.GetChildElement("NTPC");
 },
 Update: function() {
  ASPxClientCalendarView.prototype.Update.call(this);
  this.UpdateFastNavHeader();
 },
 UpdateFastNavHeader: function() {
  var fastNavHeader = this.GetFastNavHeader();
  if(fastNavHeader) {
   ASPx.SetElementDisplay(fastNavHeader, this.isNavigationView);
   if(this.isNavigationView) {
    var textElement = this.GetFastNavHeaderTextElement();
    if(textElement)
     ASPx.SetInnerHtml(textElement, this.headerRollbackText);
   }
  }
 },
 UpdateNavigationCells: function(date) {
  var prevPeriodCell = this.GetPrevTimePeriodCell();
  var isEnabledDate = date.getFullYear() > 100;
  if(prevPeriodCell && ASPx.GetElementVisibility(prevPeriodCell) != isEnabledDate) {
   ASPx.SetElementVisibility(prevPeriodCell, isEnabledDate);
  }
  var nextPeriodCell = this.GetNextTimePeriodCell();
  isEnabledDate = date.getFullYear() < 9999;
  if(nextPeriodCell && ASPx.GetElementVisibility(nextPeriodCell) != isEnabledDate) {
   ASPx.SetElementVisibility(nextPeriodCell, isEnabledDate);
  }
 },
 IsPrevNavCell: function(navigationCell) {
  return navigationCell == this.GetPrevTimePeriodCell();
 },
 IsNextNavCell: function(navigationCell) {
  return navigationCell == this.GetNextTimePeriodCell();
 },
 GetNavigationCellOffset: function(navigationCell) {
  if(navigationCell == this.GetPrevTimePeriodCell())
   return -1;
  if(navigationCell == this.GetNextTimePeriodCell())
   return 1;
  return 0;
 },
 GetYearCell: function() {
  return this.calendar.GetYearCell(this.calendar.IsMultiView() ? this.GetIDPostfix() : "");
 },
 GetFastNavHeader: function() {
  return this.calendar.GetFastNavHeader(this.calendar.IsMultiView() ? this.GetIDPostfix() : "");
 },
 GetFastNavHeaderTextElement: function() {
  var idPostfix = this.calendar.IsMultiView() ? this.GetIDPostfix() : "";
  idPostfix += "_rt";
  return this.calendar.GetFastNavHeaderTextElement(idPostfix);
 },
 GetAnimatedElement: function() {
  return this.GetYearCell();
 },
 SupportsWeekendStyle: function(date) {
  return false;
 },
 GetNavigationCells: function() {
  return [
   this.GetPrevTimePeriodCell(),
   this.GetNextTimePeriodCell()
  ];
 },
 GetDateCellContainer: function() {
  var idPostfix = this.calendar.IsMultiView() ? this.GetIDPostfix() : "";
  idPostfix += "_n";
  return this.calendar.GetYearCellChildArea(idPostfix);
 },
 GetDateCellColIndex: function(index) {
  return index % 4;
 },
 GetDateCellRowIndex: function(index) {
  return (index - index % 4) / 4;
 },
 GetMainElement: function() {
  return this.GetYearCell();
 },
 ChangeEnabledStateItems: function(enabled) {
  if(!this.isNavigationView)
   ASPxClientCalendarView.prototype.ChangeEnabledStateItems.call(this, enabled);
 },
 ChangeEnabledAttributes: function(enabled) {
  if(!this.isNavigationView)
   ASPxClientCalendarView.prototype.ChangeEnabledAttributes.call(this, enabled);
 },
 AttachDateMouseEvents: function(eventMethod, styleMethod) {
  var index;
  var date;
  for(var index = 0; index <= this.GetMaxIndex() ; index++) {
   cell = this.GetDayCell(index);
   date = this.GetDateByIndex(index);
   var cal = this.calendar;
   if(!this.isNavigationView && !this.calendar.enableMulti && this.IsDateVisible(date) &&
    ASPxClientCalendarDateDisabledHelper.IsDateInRange(cal.sharedParameters, date) &&
    !cal.IsDateDisabled(date)) {
    if(this.calendar.needToSetCursor && (!cell.style.cursor || cell.style.cursor == ASPx.GetPointerCursor()))
     styleMethod(cell, "cursor", ASPx.GetPointerCursor());
   }
   this.AttachDayMouseEvents(eventMethod, cell, this.GetDayMouseEventFunction(index, false));
  }
 },
 AllowAttachDetachDateEventsOnChangeEnabled: function() {
  return true;
 },
 AllowAttachDetachDateEventsOnChangeReadOnly: function() {
  return false;
 },
 GetCellStyleName: function() { return this.isNavigationView ? "FNI" : "MY"; },
 GetCellHoverStyleName: function() { return this.isNavigationView ? "FNIH" : "MYH"; },
 GetCellSelectedStyleName: function() { return this.isNavigationView ? "FNIS" : "MYS"; },
 GetCellOtherPeriodStyleName: function() { return this.isNavigationView ? "FNIA" : "MYA"; },
 GetCellOutOfRangeStyleName: function() { return "MYO"; },
 GetCellDisabledStyleName: function() { return "MYDD"; },
 GetDateCellSelector: function() { return "td[class*=\"dxeCalendarFastNavItemArea\"] td[class*=\"dxeCalendarFastNavItem\"]"; }
});
var ASPxClientCalendarMonthsView = ASPx.CreateClass(ASPxClientCalendarLargeTimePeriodView, {
 constructor: function(calendar, row, column) {
  this.constructor.prototype.constructor.call(this, calendar, row, column);
 },
 GetTitleText: function() {
  return this.startDate.getFullYear();
 },
 IsDateOtherPeriod: function(date) {
  return date.getFullYear() != this.visibleDate.getFullYear();
 },
 GetCurrentVisibleDate: function() {
  return ASPxClientCalendar.AddYears(this.calendar.visibleDates[this.GetViewType()], this.GetIndex());
 },
 GetCurrentStartDate: function(visibleDate) {
  return new Date(visibleDate.getFullYear(), 0, 1);
 },
 GetDateByIndex: function(index) {
  return ASPxClientCalendar.AddMonths(this.startDate, index);
 },
 GetIndexByDate: function(date) {
  return date.getMonth() + 12 * (date.getFullYear() - this.startDate.getFullYear());
 },
 UpdateDateCellHtml: function() {
  var date = ASPxClientCalendar.CloneDate(this.startDate);
  var cell;
  for(var i = 0; i <= this.GetMaxIndex(); i++) {
   cell = this.GetDayCell(i);
   cell.innerHTML = ASPx.CultureInfo.abbrMonthNames[i];
   this.ApplyDayCellStyle(cell, date);
   date = this.GetNextDate(date);
  }
 },
 GetVisibleDateOffsetInfo: function() {
  return {
   month: 0,
   year: this.GetIndex()
  };
 },
 GetViewType: function() { return ASPx.DatePickerType.Months; },
});
var ASPxClientCalendarYearsView = ASPx.CreateClass(ASPxClientCalendarLargeTimePeriodView, {
 constructor: function(calendar, row, column) {
  this.constructor.prototype.constructor.call(this, calendar, row, column);
 },
 GetTitleText: function() {
  var startYear = this.startDate.getFullYear();
  return ASPx.DateUtils.GetYearRangeFormatString(startYear + 1, 10);
 },
 IsDateOtherPeriod: function(date) {
  return date != null && ASPxClientCalendar.GetDecadeStartYear(date.getFullYear()) !== ASPxClientCalendar.GetDecadeStartYear(this.visibleDate.getFullYear());
 },
 GetCurrentVisibleDate: function() {
  return ASPxClientCalendar.AddYears(this.calendar.visibleDates[this.GetViewType()], this.GetIndex() * 10);
 },
 GetCurrentStartDate: function(visibleDate) {
  var decadeStartYear = ASPxClientCalendar.GetDecadeStartYear(visibleDate.getFullYear());
  return new Date(decadeStartYear - 1, 0, 1);
 },
 GetDateByIndex: function(index) {
  return ASPxClientCalendar.AddYears(this.startDate, index);
 },
 GetIndexByDate: function(date) {
  return date.getFullYear() - this.startDate.getFullYear();
 },
 UpdateDateCellHtml: function() {
  var date = ASPxClientCalendar.CloneDate(this.startDate);
  var cell;
  for(var i = 0; i <= this.GetMaxIndex(); i++) {
   cell = this.GetDayCell(i);
   cell.innerHTML = this.IsDateVisible(date) ? date.getFullYear() : "";
   this.ApplyDayCellStyle(cell, date);
   date = this.GetNextDate(date);
  }
 },
 GetVisibleDateOffsetInfo: function() {
  return {
   month: 0,
   year: this.GetIndex() * 10
  };
 },
 GetViewType: function() { return ASPx.DatePickerType.Years; },
});
var ASPxClientCalendarDecadesView = ASPx.CreateClass(ASPxClientCalendarLargeTimePeriodView, {
 constructor: function(calendar, row, column) {
  this.constructor.prototype.constructor.call(this, calendar, row, column);
 },
 GetTitleText: function() {
  var startYear = this.startDate.getFullYear();
  return ASPx.DateUtils.GetYearRangeFormatString(startYear + 10, 100);
 },
 IsDateOtherPeriod: function(date) {
  return date != null && ASPxClientCalendar.GetCenturyStartYear(date.getFullYear()) !== ASPxClientCalendar.GetCenturyStartYear(this.visibleDate.getFullYear());
 },
 GetCurrentVisibleDate: function() {
  return ASPxClientCalendar.AddYears(this.calendar.visibleDates[this.GetViewType()], this.GetIndex() * 100);
 },
 GetCurrentStartDate: function(visibleDate) {
  var centuryStartYear = ASPxClientCalendar.GetCenturyStartYear(visibleDate.getFullYear());
  return new Date(centuryStartYear - 10, 0, 1);
 },
 GetDateByIndex: function(index) {
  return ASPxClientCalendar.AddYears(this.startDate, index * 10);
 },
 GetIndexByDate: function(date) {
  return Math.floor((date.getFullYear() - this.startDate.getFullYear()) / 10);
 },
 UpdateDateCellHtml: function() {
  var date = ASPxClientCalendar.CloneDate(this.startDate);
  var cell;
  for(var i = 0; i <= this.GetMaxIndex() ; i++) {
   cell = this.GetDayCell(i);
   var dateYear = date.getFullYear();
   cell.innerHTML = this.IsDateVisible(date) ? ASPx.DateUtils.GetYearRangeFormatString(dateYear, 10) : "";
   this.ApplyDayCellStyle(cell, date);
   date = this.GetNextDate(date);
  }
 },
 GetVisibleDateOffsetInfo: function() {
  return {
   month: 0,
   year: this.GetIndex() * 100
  };
 },
 GetViewType: function() { return ASPx.DatePickerType.Decades; },
});
var ASPxClientCalendarFastNavigation = ASPx.CreateClass(null, {
 constructor: function(calendar) {
  this.calendar = calendar;
  this.activeMonth = -1;
  this.activeYear = -1;
  this.startYear = -1;
  this.activeView = null;
  this.partialId = "FNP";
  this.InitializeUI();
 },
 InitializeUI: function() {
  var item;
  var prefix = this.GetId();
  for(var m = 0; m < 12; m++) {
   item = this.GetMonthItem(m);
   if(!ASPx.IsExistsElement(item))
    break;
   item.id = prefix + "_M" + m;
   ASPx.Evt.AttachEventToElement(item, "click", ASPxClientCalendar.AnonymousHandlers.FastNavMonthClick(this.calendar.name, m));
  }
  for(var i = 0; i < 10; i++) {
   item = this.GetYearItem(i);
   if(!ASPx.IsExistsElement(item))
    break;
   item.id = prefix + "_Y" + i;
   ASPx.Evt.AttachEventToElement(item, "click", ASPxClientCalendar.AnonymousHandlers.FastNavYearClick(this.calendar.name, i));
  }
  ASPx.Evt.AttachEventToElement(this.GetPopupWindowElement(), "click", ASPxClientCalendar.AnonymousHandlers.MainElementClick(this.calendar.name));
  this.InitializePopup();
 },
 InitializePopup: function() {
  var popup = this.GetPopup();
  if(popup)
   popup.CloseUp.AddHandler(function(s, e) { this.Hide(); }.aspxBind(this));
 },
 IsActive: function() {
  return this.GetPopup().IsVisible();
 },
 Show: function() {
  this.Prepare();
  this.GetPopup().ShowAtElement(this.activeView.GetTitleElement());
 },
 Hide: function() {
  this.GetPopup().Hide();
 },
 SetMonth: function(month) {
  if(month != this.activeMonth) {
   var prevCell = this.GetMonthItem(this.activeMonth);
   var cell = this.GetMonthItem(month);
   if(ASPx.IsExistsElement(prevCell))
    this.ApplyItemStyle(prevCell, false, "M");
   this.ApplyItemStyle(cell, true, "M");
   this.activeMonth = month;
  }
 },
 ShiftMonth: function(offset) {
  var month = (this.activeMonth + offset) % 12;
  month = (month < 0) ? month + 12 : month;
  this.SetMonth(month);
 },
 SetYear: function(year) {
  var startYear = Math.floor(year / 10) * 10;
  this.SetStartYear(startYear);
  this.SetYearIndex(year - startYear);
 },
 SetYearIndex: function(index) {
  var prevIndex = this.activeYear - this.startYear;
  if(index != prevIndex) {
   var prevCell = this.GetYearItem(prevIndex);
   if(ASPx.IsExistsElement(prevCell))
    this.ApplyItemStyle(prevCell, false, "Y");
   var cell = this.GetYearItem(index);
   this.ApplyItemStyle(cell, true, "Y");
   this.activeYear = index + this.startYear;
  }
 },
 SetStartYear: function(year) {
  if(this.startYear == year) return;
  this.startYear = year;
  this.PrepareYearList();
 },
 ShiftYear: function(offset) {
  if(this.activeYear + offset > 99 && this.activeYear + offset < 9999)
   this.SetYear(this.activeYear + offset);
 },
 ShiftStartYear: function(offset) {
  this.SetStartYear(this.startYear + offset);
 },
 ApplyChanges: function() {
  this.Hide();
  var offset = this.calendar.GetOffsetInCurrentViewTypePeriods(this.calendar.visibleDate, new Date(this.activeYear, this.activeMonth, 1));
  offset -= this.activeView.GetIndex();
  if(offset != 0) {
   var date = this.calendar.GetNewVisibleDateByOffset(offset);
   this.calendar.OnVisibleMonthChanged(date);
  }
  this.calendar.OnMainElementClick();
 },
 CancelChanges: function() {
  this.Hide();
 },
 Prepare: function() {
  var date = this.activeView.visibleDate;
  this.activeYear = date.getFullYear();
  this.activeMonth = date.getMonth();
  this.startYear = ASPxClientCalendar.GetDecadeStartYear(this.activeYear);
  this.PrepareMonthList();
  this.PrepareYearList();
 },
 PrepareMonthList: function() {
  var item;
  for(var month = 0; month < 12; month++) {
   item = this.GetMonthItem(month);
   if(item == null)
    return;
   this.ApplyItemStyle(item, month == this.activeMonth, "M");
  }
 },
 PrepareYearList: function() {
  var year = this.startYear;
  var item;
  for(var index = 0; index < 10; index++) {
   item = this.GetYearItem(index);
   if(item == null)
    return;
   item.innerHTML = year;
   this.ApplyItemStyle(item, year == this.activeYear, "Y");
   year++;
  }
  this.PreparePreviousYearListCell();
  this.PrepareNextYearListCell();
 },
 PreparePreviousYearListCell: function() {
  var yearListTable = this.GetChildElement("y");
  if(!ASPx.IsExistsElement(yearListTable))
   return;
  var isEnabledDate = this.startYear > 100;
  var prevYearListCell = yearListTable.rows[0].cells[0];
  var isPrevYearListCellVisible = ASPx.GetElementVisibility(prevYearListCell);
  if(isPrevYearListCellVisible != isEnabledDate)
   ASPx.SetElementVisibility(prevYearListCell, isEnabledDate);
 },
 PrepareNextYearListCell: function() {
  var yearListTable = this.GetChildElement("y");
  if(!ASPx.IsExistsElement(yearListTable))
   return;
  var firstYearListRow = yearListTable.rows[0];
  var nextYearListCell = firstYearListRow.cells[firstYearListRow.cells.length - 1];
  var isLastYear = this.startYear + 9 == 9999;
  ASPx.SetElementVisibility(nextYearListCell, !isLastYear);
 },
 GetMonthItem: function(month) {
  var t = this.GetChildElement("m");
  if(!ASPx.IsExistsElement(t))
   return null;
  var colIndex = month % 4;
  var rowIndex = (month - colIndex) / 4;
  return t.rows[rowIndex].cells[colIndex];
 },
 GetYearItem: function(index) {
  var t = this.GetChildElement("y");
  if(!ASPx.IsExistsElement(t) || index < 0 || index > 9)
   return null;
  var colIndex = index % 5;
  var rowIndex = (index - colIndex) / 5;
  if(rowIndex == 0)
   colIndex++;
  return t.rows[rowIndex].cells[colIndex];
 },
 GetPopup: function() {
  return ASPx.GetControlCollection().Get(this.GetId());
 },
 GetPopupWindowElement: function() {
  return this.GetPopup().GetWindowElement(-1);
 },
 ApplyItemStyle: function(item, isSelected, type) {
  var info = new ASPxClientCalendarStyleInfo();
  this.calendar.ImportEtalonStyle(info, "FN" + type);
  if(isSelected)
   this.calendar.ImportEtalonStyle(info, "FN" + type + "S");
  info.Apply(item);
 },
 GetChildElement: function(postfix) {
  return ASPx.CacheHelper.GetCachedElementById(this.calendar, this.calendar.name + "_" + this.partialId + "_" + postfix);
 },
 GetId: function() {
  return this.calendar.name + "_" + this.partialId;
 },
 OnArrowUp: function(evt) {
  if(evt.shiftKey)
   this.ShiftMonth(-4);
  else
   this.ShiftYear(-5);
 },
 OnArrowDown: function(evt) {
  if(!evt.shiftKey)
   this.ShiftYear(5);
  else
   this.ShiftMonth(4);
 },
 OnArrowLeft: function(evt) {
  if(evt.shiftKey)
   this.ShiftMonth(-1);
  else
   this.ShiftYear(-1);
 },
 OnArrowRight: function(evt) {
  if(!evt.shiftKey)
   this.ShiftYear(1);
  else
   this.ShiftMonth(1);
 },
 OnPageUp: function(evt) {
  this.ShiftYear(-10);
 },
 OnPageDown: function(evt) {
  this.ShiftYear(10);
 },
 OnEnter: function() {
  this.ApplyChanges();
 },
 OnMonthClick: function(month) {
  this.SetMonth(month);
 },
 OnYearClick: function(index) {
  this.SetYearIndex(index);
 },
 OnYearShuffle: function(offset) {
  this.ShiftStartYear(offset);
 }
});
ASPx.ASPxClientCalendarFastNavigation = ASPxClientCalendarFastNavigation;
var ASPxClientCalendarStyleInfo = ASPx.CreateClass(null, {
 constructor: function() {
  this.className = "";
  this.cssText = "";
 },
 Clone: function() {
  var clone = new ASPxClientCalendarStyleInfo();
  clone.className = this.className;
  clone.cssText = this.cssText;
  return clone;
 },
 Apply: function(element) {
  if(element.className != this.className)
   element.className = this.className;
  if(element._style != this.cssText) {
   element.style.cssText = this.cssText; 
   element._style = this.cssText; 
  } 
 },
 Remove: function(element) {
  ASPx.RemoveClassNameFromElement(element, this.className);
  var styleRules = this.cssText.split(";");
  for(var i = 0; i < styleRules.length; i++) {
   var styleRule = styleRules[i];
   if(styleRule && element.style.cssText.indexOf(styleRule) !== -1)
    element.style.cssText = element.style.cssText.replace(styleRule, "");
  }
  element.style.cssText = element.style.cssText.replace(new RegExp(";+"), ";");
 },
 Import: function(element) {
  if(element.className.length > 0)
   this.AddClassName(element.className);
  var cssText = element.style.cssText;
  if(cssText.length > 0) {
   var pos = cssText.length - 1;
   while(pos > -1 && cssText.charAt(pos) == " ")
    --pos;
   if(cssText.charAt(pos) != ";")
    cssText += ";";
   this.cssText += cssText;
  }
 },
 AddClassName: function(className) {
  if(this.className.length > 1)
   this.className += " ";
  this.className += className;
 },
});
var ASPxClientCalendarSelectionEventArgs = ASPx.CreateClass(ASPxClientProcessingModeEventArgs, {
 constructor: function(processOnServer, selection){
  this.constructor.prototype.constructor.call(this, processOnServer);
  this.selection = selection;
 }
});
var ASPxDaysSelectingOnMouseOverEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function (overDate) {
  this.constructor.prototype.constructor.call(this);
  this.overDate = overDate;
 }
});
var ASPxClientCalendarCellClickEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(date) {
  this.constructor.prototype.constructor.call(this);
  this.date = date;
 }
});
function aspxCalDocMouseUp(evt) {
 var target = ASPx.Evt.GetEventSource(evt);
 if(ASPx.activeCalendar != null && ASPx.IsExistsElement(target)) {
  ASPx.activeCalendar.forceMouseDown = false;
  if(ASPx.activeCalendar.isMouseDown) {
   var activeViews = ASPx.activeCalendar.GetActiveViews();
   for(var key in activeViews) {
    if(activeViews.hasOwnProperty(key)) {
     var view = activeViews[key];
     if(!view.isASPxClientCalendarView || view.isNavigationView) continue;
     var monthCell = view.GetDateCellContainer();
     var parent = target.parentNode;
     while(ASPx.IsExistsElement(parent)) {
      if(parent == monthCell)
       return;
      parent = parent.parentNode;
     }
    }
   }
   ASPx.activeCalendar.OnSelectionCancelled();   
  }
  ASPx.activeCalendar = null;
 }
}
function aspxCalCancelSelect() {
 if(ASPx.activeCalendar != null) {
  ASPx.activeCalendar.forceMouseDown = false;
  ASPx.activeCalendar.OnSelectionCancelled();  
 }
}
ASPx.CalFNYShuffle = function(name, offset) {
 var edit = ASPx.GetControlCollection().Get(name);
 if(edit != null)
  edit.fastNavigation.OnYearShuffle(offset);
};
ASPx.CalFNBClick = function(name, action) {
 var edit = ASPx.GetControlCollection().Get(name);
 if(edit != null) {
  switch(action) {
   case "ok":
    if(edit.fastNavigation)
     edit.fastNavigation.ApplyChanges();
    break;
   case "cancel":
    edit.CancelFastNavigation();
    break;
  }    
 }
};
window.ASPxClientCalendar = ASPxClientCalendar;
window.ASPxClientCalendarCustomDisabledDateEventArgs = ASPxClientCalendarCustomDisabledDateEventArgs;
window.ASPxClientCalendarSelection = ASPxClientCalendarSelection;
window.ASPxClientCalendarDateDisabledHelper = ASPxClientCalendarDateDisabledHelper;
window.ASPxClientCalendarStyleInfo = ASPxClientCalendarStyleInfo;
window.ASPxClientCalendarSelectionEventArgs = ASPxClientCalendarSelectionEventArgs;
})();

(function() {
var serializingSeparator = "|";
var serializingSeparatorLength = serializingSeparator.length;
var lbIPostfixes = ['C', 'I', 'T'];
var lbIIdSuffix = "LBI";
var lbSIIdSuffix = lbIIdSuffix + "-1";
var lbAIRIdSuffix = "AIR";
var lbAIRTIdSuffix = lbAIRIdSuffix + "-1";
var lbTSIdSuffix = "_TS";
var lbBSIdSuffix = "_BS";
var lbHeaderDivIdSuffix = "_H";
var lTableIdSuffix = "_LBT";
var leVISuffix = "_VI";
var lbDSuffix = "_D";
var emptyItemsRange = "0:-1";
var nbsp = "&nbsp;";
var nameSeparator = "_";
var nbspChar = String.fromCharCode(160);
var NullSizeCellClassName = "dxlbNullSizeCell";
var itemCellTextAttributeName = "data-item-cell-text";
var itemSerializedTextsAttributeName = "data-item-serialized-texts";
var FIRST_CELL_MARKER_CSS_CLASS_NAME = "dxeFTM";
var LAST_CELL_MARKER_CSS_CLASS_NAME = "dxeLTM";
var selectAllMainElementID = "LBSAME";
var selectAllCheckBoxID = "LBSACB";
var filterMainElementID = "LBF";
var filteringTextBoxID = "LBFE";
var showFilterButtonID = "LBSFEB";
var inactiveFilterElementClassName = "dxeLBInactiveFilterPanelSys";
var listTableCollapsedClassName = "dxeLBTCollapsed";
var ListBoxSelectionMode = { Single : 0, Multiple : 1, CheckColumn : 2 };
var ListBoxVirtualScrollTableContainerIDPostfix = "LBVSTC";
var CONSTANTS = {
 CALLBACK_PREFIXES: {
  CUSTOM: "LECC",
  CUSTOMPERFORM: "LECCP",
  LOAD_RANGE_ITEMS: "LBCRI",
  FILTERING: "CBLF",
  FILTERING_CORRECT: "CBCF"
 },
 CALLBACK_RESULTS: {
  ITEMS: "i",
  FILTER_CUSTOMHIGHLIGHTING: "fCH",
  FILTER_LENGTH: "fL"
 }
};
var ListBoxStateControllerManagerBase = ASPx.CreateClass(null, {
 constructor: function(listBox) {
  this.listBox = listBox;
 },
 Initialize: function() {
  this.AddStateItems(false, false);
 },
 AddStateItems: function(clearCache, hoverItemOnly) {
  if(typeof (ASPx.GetStateController) !== "undefined") {
   var itemCellsIdSuffixes = this.listBox.GetItemCellsIdPostfixes();
   this.AddStateItemsCore(ASPx.GetStateController(), clearCache, itemCellsIdSuffixes, hoverItemOnly);
  }
 },
 AddStateItemsCore: function(controller, clearCache, itemCellsIdSuffixes, hoverItemOnly) {
  if(this.HasSampleItemStateItems())
   this.AddItemStateItems(controller, clearCache, itemCellsIdSuffixes, hoverItemOnly,-1);
 },
 AddItemStateItems: function(controller, clearCache, itemCellsIdSuffixes, hoverItemOnly, index) {
  var name = this.listBox.name + "_" + lbIIdSuffix + index;
  if(clearCache)
   this.listBox.ClearStateItemCache(controller, name, itemCellsIdSuffixes);
  if(this.NeedAddHoverStateToItem())
   controller.AddHoverItem(name, this.listBox.hoverClasses, this.listBox.hoverCssArray, itemCellsIdSuffixes, null, null, true);
  if(!hoverItemOnly) {
   this.AddFunctionalStates(controller, name, itemCellsIdSuffixes);
  }
 },
 NeedAddHoverStateToItem: function() {
  return !ASPx.Browser.WebKitTouchUI;
 },
 AddFunctionalStates: function(controller, name, itemCellsIdSuffixes) {
  controller.AddSelectedItem(name, this.listBox.selectedClasses, this.listBox.selectedCssArray, itemCellsIdSuffixes, null, null, true);
  controller.AddDisabledItem(name, this.listBox.disabledClasses, this.listBox.disabledCssArray, itemCellsIdSuffixes, null, null, true);
 },
 RemoveHoverStateItem: function() {
  if(typeof (ASPx.GetStateController) !== "undefined") {
   var itemCellsIdSuffixes = this.listBox.GetItemCellsIdPostfixes();
   this.RemoveHoverStateItemCore(ASPx.GetStateController(), itemCellsIdSuffixes);
  }
 },
 RemoveHoverStateItemCore: function(controller, itemCellsIdSuffixes) {
  if(this.HasSampleItemStateItems())
   this.RemoveItemStateHoverItem(controller, itemCellsIdSuffixes, -1);
 },
 RemoveItemStateHoverItem: function(controller, itemCellsIdSuffixes, index) {
  var name = this.listBox.name + "_" + lbIIdSuffix + index;
  this.listBox.ClearStateItemCache(controller, name, itemCellsIdSuffixes);
  if(!ASPx.Browser.WebKitTouchUI)
   controller.RemoveHoverItem(name, itemCellsIdSuffixes);
 },
 HasSampleItemStateItems: function() {
  return this.listBox.hasSampleItem;
 },
});
var VirtualRenderListBoxStateControllerManager = ASPx.CreateClass(ListBoxStateControllerManagerBase, {
 constructor: function(listBox, virtualRenderItemsManager) {
  this.constructor.prototype.constructor.call(this, listBox);
  this.virtualRenderItemsManager = virtualRenderItemsManager;
 },
 AddStateItemsCore: function(controller, clearCache, itemCellsIdSuffixes, hoverItemOnly) {
  ListBoxStateControllerManagerBase.prototype.AddStateItemsCore.call(this, controller, clearCache, itemCellsIdSuffixes, hoverItemOnly);
  var range = this.virtualRenderItemsManager.GetRenderedItemRange();
  for(var i = range.startIndex;i <= range.endIndex;i++) {
   if(i >= 0)
    this.AddItemStateItems(controller, clearCache, itemCellsIdSuffixes, hoverItemOnly, i);
  }
 },
 RemoveHoverStateItemCore: function(controller, itemCellsIdSuffixes) {
  ListBoxStateControllerManagerBase.prototype.RemoveHoverStateItemCore.call(this, controller, itemCellsIdSuffixes);
  var range = this.virtualRenderItemsManager.GetRenderedItemRange();
  for(var i = range.startIndex; i <= range.endIndex; i++) {
   if(i >= 0)
    this.RemoveItemStateHoverItem(controller, itemCellsIdSuffixes, i);
  }
 },
});
var DefaultListBoxStateControllerManager = ASPx.CreateClass(ListBoxStateControllerManagerBase, {
 constructor: function(listBox) {
  this.constructor.prototype.constructor.call(this, listBox);
 },
 AddStateItemsCore: function(controller, clearCache, itemCellsIdSuffixes, hoverItemOnly) {
  ListBoxStateControllerManagerBase.prototype.AddStateItemsCore.call(this, controller, clearCache, itemCellsIdSuffixes, hoverItemOnly);
  var count = this.listBox.GetItemCount();
  for(var i = 0;i < count;i++)
   this.AddItemStateItems(controller, clearCache, itemCellsIdSuffixes, hoverItemOnly, i);
 },
 RemoveHoverStateItemCore: function(controller, itemCellsIdSuffixes) {
  ListBoxStateControllerManagerBase.prototype.RemoveHoverStateItemCore.call(this, controller, itemCellsIdSuffixes);
  var count = this.GetItemCount();
  for(var i = 0; i < count; i++)
   this.RemoveItemStateHoverItem(controller, itemCellsIdSuffixes, i);
 },
});
var ListBoxItemsManagerBase = ASPx.CreateClass(null, {
 constructor: function(listBox) {
  this.listBox = listBox;
  this.listTable = listBox.GetListTable();
 },
 Initialize: function() {
 },
 GetListTableRows: function() {
  return this.listTable ? this.listTable.rows : [];
 },
 GetItemHtmlContent: function(index) { return null; },
 GetItem: function () { return null; },
 GetItemIndexByRow: function (itemRow) { return null; },
 GetItemCount: function () { return 0; },
 GetItemRow: function (index) {
  if (this.listTable && index >= 0) {
   var rowIndex = this.ConvertItemIndexToRowIndex(index);
   var itemRow = this.listTable.rows[rowIndex];
   if (itemRow && ASPx.ElementContainsCssClass(itemRow, "dxeListBoxItemRow"))
    return itemRow;
  }
  return null;
 },
 GetItemElement: function (index) {
  var result = null;
  var itemRow = this.GetItemRow(index);
  if (itemRow)
   result = this.GetFirstVisibleCell(itemRow) || itemRow.cells[0];
  return result;
 },
 GetFirstVisibleCell: function (itemRow) {
  for (var i = 0; i < itemRow.cells.length; i++)
   if (ASPx.GetElementDisplay(itemRow.cells[i]))
    return itemRow.cells[i];
  return null;
 },
 GetItemHeight: function(index) {
  throw new Error("this method is abstract");
 },
 GetTotalItemsHeight: function(firstItemIndex, lastItemIndex) {
  throw new Error("this method is abstract");
 },
 GetItemsHeight: function() { return 0; },
 GetItemsWidth: function() { return 0; },
 GetVisibleItemCount: function () { return 0; },
 GetTopSpacersHeight: function() {
  return this.listBox.GetTopScrollSpacerHeight();
 },
 GetItemTopOffset: function(index) {
  return this.GetItemTopOffsetCore(index);
 },
 GetItemTopOffsetCore: function(index) {
  var itemElement = this.GetItemElement(index);
  return itemElement ? itemElement.offsetTop + this.GetTopSpacersHeight() : 0;
 },
 IsItemVisible: function(index) {
  return this.IsItemEdgeVisible(index, true, true);
 },
 IsItemEdgeVisible: function(index, checkTop, checkBottom) {
  var result = false;
  var itemElement = this.GetItemElement(index);
  if(itemElement != null) {
   var scrollDiv = this.listBox.GetScrollDivElement();
   var topScrollDivEdge = scrollDiv.scrollTop;
   var bottomScrollDivEdge = scrollDiv.scrollTop + scrollDiv.clientHeight;
   var topItemElementEdge = this.GetItemTopOffset(index);
   var bottomItemElementEdge = topItemElementEdge + itemElement.getBoundingClientRect().height;
   var checkTopVisibleResult = !checkTop || this.IsVisibleOffset(topItemElementEdge, topScrollDivEdge, bottomScrollDivEdge);
   var checkBottomVisibleResult = !checkBottom || this.IsVisibleOffset(bottomItemElementEdge, topScrollDivEdge, bottomScrollDivEdge);
   result = checkTopVisibleResult && checkBottomVisibleResult;
  }
  return result;
 },
 IsVisibleOffset: function(offset, topScrollDivEdge, bottomScrollDivEdge) {
  return offset >= topScrollDivEdge && offset <= bottomScrollDivEdge;
 },
 GetFirstVisibleItem: function () { return null; },
 GetFirstVisibleItemRow: function() {
  var firstVisibleItemIndex = this.GetFirstVisibleItem();
  return this.listTable.rows[this.ConvertItemIndexToRowIndex(firstVisibleItemIndex)];
 },
 GetFirstRenderedItem: function () { },
 GetLastRenderedItem: function () { },
 InitializeInternalCheckBoxCollection: function () { },
 GetScrollDivChildElementHeight: function () { return null; },
 RemoveItem: function(index) { this.RemoveItemCore(index); },
 RemoveItemCore: function(index) {
  this.listBox.RemoveItemRow(index);
 },
 InsertItem: function () { },
 CreateNewItemRow: function (index) {
  var newItemRow = this.listBox.GetSampleItemRow();
  if (ASPx.IsExistsElement(newItemRow))
   newItemRow = newItemRow.cloneNode(true);
  return newItemRow;
 },
 ClearItems: function () {
  this.ClearItemsCore();
 },
 ClearItemsCore: function() {
  var tBody = this.listBox.GetListTableRowParent();
  tBody.innerHTML = "";
 },
 IsItemFiltered: function (index) { return false; },
 ConvertItemIndexToRowIndex: function () { return null; },
 Adjust: function () { },
 BeforeClientFiltering: function () { },
 ApplyFilterToItem: function (index, isSatisfy, savePrevState, isFilterReset) { },
 RestorePrevFilteredState: function (index) { },
 OnEndItemsFiltering: function () { },
 ChangeItemsFilteredState: function(action) {
  var count = this.GetItemCount();
  for (var i = 0; i < count; i++) {
   action(i);
   this.AfterChangeItemFilteredStateAction(i);
  }
 },
 AfterChangeItemFilteredStateAction: function() { },
 MakeAllItemsVisible: function () {
  this.ChangeItemsFilteredState(function (index) {
   this.ApplyFilterToItem(index, true, false, true);
  }.aspxBind(this));
 },
 MakeItemVisibleAtTop: function(index) {
  var scrollDiv = this.listBox.GetScrollDivElement();
  scrollDiv.scrollTop = this.GetItemTopOffset(index);
 },
 MakeItemVisible: function(index) { 
  if(!this.IsItemVisible(index)) {
   var scrollDiv = this.listBox.GetScrollDivElement();
   var scrollTop = scrollDiv.scrollTop;
   var scrollDivHeight = scrollDiv.clientHeight;
   var itemOffsetTop = this.GetItemTopOffset(index);
   var itemHeight = this.GetItemHeight(index);
   var itemAbove = scrollTop > itemOffsetTop;
   var itemBelow = scrollTop + scrollDivHeight < itemOffsetTop + itemHeight;
   if(itemAbove) {
    this.MakeItemVisibleAtTop(index);
   }
   else if(itemBelow) {
    var scrollDivChildElementHeight = this.listBox.GetScrollDivChildElementHeight();
    var scrollPaddings = scrollDiv.scrollHeight - scrollDivChildElementHeight;
    scrollDiv.scrollTop = itemOffsetTop + itemHeight - scrollDivHeight + scrollPaddings;
   }
  }
 },
 RewriteFilteredItemIndices: function(newFilteredItemIndices) { },
 OnScrollSpacerVisibilityChanged: function () { },
 SetItemHtml: function (index, html) { },
 SetItemTooltip: function(index, tooltip) { },
 SetItemAttribute: function(index, attrName, attrValue) { },
 AddItemCssClass: function (index, className) { },
 RemoveItemCssClass: function (index, className) { },
 SetItemTextCellHtml: function (itemIndex, textCellIndex, html) { },
 SetItemTextCellTooltip: function(itemIndex, textCellIndex, tooltip) { },
 SetItemTextCellAttribute: function(itemIndex, textCellIndex, attrName, attrValue) { },
 AddItemTextCellCssClass: function (itemIndex, textCellIndex, className) { },
 RemoveItemTextCellCssClass: function (itemIndex, textCellIndex, className) { },
 OnDecoratedItemsRendering: function () { },
 DeactivateScrollHandler: function() { },
 ActivateScrollHandler: function() { },
 IsScrollActivated: function() { return true; },
 CorrectItemsHeight: function() {},
 BeginUpdate: function() { },
 EndUpdate: function() { }
});
var ListBoxItemsDefaultManager = ASPx.CreateClass(ListBoxItemsManagerBase, {
 constructor: function (listBox) {
  this.constructor.prototype.constructor.call(this, listBox);
 },
 GetItemIndexByRow: function (itemRow) {
  var result = itemRow.rowIndex;
  if (this.listBox.ContainsFixWidthRow())
   result--;
  return result;
 },
 GetItemCount: function () {
  if (this.listTable) {
   var rowLength = this.listTable.rows.length;
   if (!!this.listBox.GetAccessibilityHeaderRow())
    rowLength--;
   if (this.listBox.ContainsFixWidthRow())
    rowLength--;
   return rowLength;
  }
  return 0;
 },
 GetItem: function (index) {
  var rowLength = this.GetItemCount();
  if (!this.listTable || index < 0 || index >= rowLength)
   return null;
  var row = this.listBox.GetItemRow(index);
  var image = this.listBox.imageCellExists ? ASPx.GetNodeByTagName(row.cells[this.listBox.GetImageCellIndex()], "IMG", 0) : null;
  var src = image == null ? "" : ASPx.ImageUtils.GetImageSrc(image);
  var itemValue = this.listBox.itemsValue[index] !== undefined ? this.listBox.itemsValue[index] : null;
  return new ASPxClientListBoxItem(this.listBox, index, this.listBox.GetItemRowTexts(row), itemValue, src, this.listBox.GetIsItemSelected(index));
 },
 GetVisibleItemCount: function () {
  var count = this.GetItemCount();
  var visibleItemCount = 0;
  for (var i = 0; i < count; i++) {
   if (ASPx.GetElementDisplay(this.GetItemRow(i)))
    visibleItemCount++;
  }
  return visibleItemCount;
 },
 GetFirstVisibleItem: function () {
  var itemCount = this.GetItemCount();
  for (var i = 0; i < itemCount; i++)
   if (this.GetItemRow(i) && this.IsItemFiltered(i))
    return i;
  return -1;
 },
 GetFirstFilteredItemIndex: function () {
  return this.GetFirstVisibleItem();
 },
 GetLastFilteredItemIndex: function() {
  var itemCount = this.GetItemCount();
  for(var i = itemCount - 1; i >= 0; i--)
   if(this.GetItemRow(i) && this.IsItemFiltered(i))
    return i;
  return -1;
 },
 GetNextFilteredItemIndex: function(currentIndex) {
  var itemCount = this.GetItemCount();
  for(var i = currentIndex + 1; i < itemCount; i++)
   if(this.GetItemRow(i) && this.IsItemFiltered(i))
    return i;
  return -1;
 },
 GetPrevFilteredItemIndex: function(currentIndex) {
  for(var i = currentIndex - 1; i >= 0; i--)
   if(this.GetItemRow(i) && this.IsItemFiltered(i))
    return i;
  return -1;
 },
 GetFirstRenderedItem: function () {
  return this.GetItemCount() > 0 ? this.GetItem(0) : null;
 },
 GetLastRenderedItem: function () {
  return this.GetItemCount() > 0 ? this.GetItem(this.GetItemCount() - 1) : null;
 },
 ConvertItemIndexToRowIndex: function (itemIndex) {
  return this.listBox.ContainsFixWidthRow() ? itemIndex + 1 : itemIndex;
 },
 GetScrollDivChildElementHeight: function () {
  return this.listBox.GetListTableHeight() + this.listBox.GetTopScrollSpacerHeight() + this.listBox.GetBottomScrollSpacerHeight();
 },
 IsItemFiltered: function (index) {
  return ASPx.GetElementDisplay(this.GetItemRow(index));
 },
 InsertItem: function (index, itemProperties) {
  this.listBox.InsertItemRow(index, itemProperties);
 },
 InitializeInternalCheckBoxCollection: function () {
  var count = this.GetItemCount();
  var enabled = this.listBox.GetEnabled();
  var changeEventMethod = ASPx.Attr.ChangeEventsMethod(enabled);
  for (var i = 0; i < count; i++)
   this.listBox.AddInternalCheckBoxToCollectionCore(i, enabled, changeEventMethod);
 },
 ApplyFilterToItem: function (index, isSatisfy, savePrevState, isFilterReset) {
  var itemRow = this.GetItemRow(index);
  if (savePrevState) {
   var newDisplayValue = isSatisfy ? "" : "none";
   ASPx.Attr.ChangeStyleAttribute(itemRow, "display", newDisplayValue);
  }
  else
   ASPx.SetElementDisplay(itemRow, isSatisfy);
 },
 RestorePrevFilteredState: function (index) {
  ASPx.Attr.RestoreStyleAttribute(this.GetItemRow(index), "display");
 },
 GetItemsHeight: function () {
  return this.listBox.GetListTableHeight();
 },
 GetTotalItemsHeight: function(firstItemIndex, lastItemIndex) {
  var result = 0;
  var rows = Array.prototype.slice.call(this.listBox.GetItemElements());
  var visibleRowsIndexes = [];
  rows.forEach(function(row, index) {
   if(ASPx.GetElementDisplay(row))
    visibleRowsIndexes.push(index);
  });
  if(firstItemIndex > visibleRowsIndexes.length)
   lastItemIndex = visibleRowsIndexes.length - 1;
  if(lastItemIndex > visibleRowsIndexes.length)
   lastItemIndex = visibleRowsIndexes.length - 1;
  for(var i = firstItemIndex;i <= lastItemIndex;i++)
   result += this.GetItemHeight(visibleRowsIndexes[i]);
  return result;
 },
 GetItemHeight: function(index) {
  if((isNaN(index))) throw new Error("index must be a number");
  var itemElement = this.GetItemElement(index);
  return itemElement != null ? itemElement.getBoundingClientRect().height : 0;
 },
 GetItemsWidth: function() {
  return this.listTable.offsetWidth;
 },
 GetNewItemIndexInFilteredRange: function(selectedIndex, step) {
  var rows = Array.prototype.slice.call(this.listTable.rows);
  var filteredRows = rows.filter(function(row) { 
   return ASPx.GetElementDisplay(row);
  });
  var selectedRow = this.GetItemRow(selectedIndex);
  var itemIndexInFilteredRange = ASPx.Data.ArrayIndexOf(filteredRows, selectedRow);
  var newItemIndexInFilteredRange = itemIndexInFilteredRange + step;
  if(newItemIndexInFilteredRange >= filteredRows.length)
   newItemIndexInFilteredRange = filteredRows.length - 1;
  else if(newItemIndexInFilteredRange < 0)
   newItemIndexInFilteredRange = 0;
  var newSelectedRow = filteredRows[newItemIndexInFilteredRange];
  return this.GetItemIndexByRow(newSelectedRow);
 }
});
var ListBoxItemsVirtualManager = ASPx.CreateClass(ListBoxItemsManagerBase, {
 constructor: function(listBox) {
  this.constructor.prototype.constructor.call(this, listBox);
  this.smallestItemHeight = 0;
  this.smallestItemWidth = 0;
  this.previousScrollPosition = 0;
 },
 Initialize: function () {
  ListBoxItemsManagerBase.prototype.Initialize.call(this);
  this.virtualScrollTopInvisibleItemsCount = 1;
  this.virtualScrollBottomInvisibleItemsCount = 1;
  this.showFilterButtonWidthCounted = false;
  this.isScrollProcessingActivated = true;
  this.InitializeItemRows();
  this.virtualScrollVisibleItemIndices = [];
  this.updateSmallestItemSize();
  this.UpdateScrollTableContainerHeight();
 },
 GetItemIndexByRow: function (itemRow) {
  return itemRow.itemIndex;
 },
 GetItemCount: function () {
  return this.deserializedItems.length;
 },
 GetItem: function(index, preventEncodeText) {
  if (index < 0 || index >= this.GetItemCount())
   return null;
  var deserializedItem = this.deserializedItems[index];
  var itemTexts = this.AdjustItemTexts(deserializedItem, preventEncodeText);
  var result = new ASPxClientListBoxItem(this.listBox, index, itemTexts, deserializedItem.value,
   deserializedItem.imageUrl, this.listBox.GetIsItemSelected(index));
  result.insertOrderIndex = deserializedItem.insertOrderIndex;
  return result;
 },
 GetItemHtmlContent: function(index) {
  return this.deserializedItems[index] && this.deserializedItems[index].htmlContent;
 },
 AdjustItemTexts: function (item, preventEncodeText) {
  var itemInnerTexts = this.GetItemInnerTexts(item, preventEncodeText);
  if (this.listBox.IsMultiColumn()) {
   for (var i = itemInnerTexts.length; i < this.listBox.columnFieldNames.length; i++)
    itemInnerTexts.push("");
  }
  return itemInnerTexts;
 },
 GetItemInnerTexts: function(item, preventEncodeText) {
  if(!item.texts)
   return item.texts;
  var adjustedItemTexts = [];
  for(var i = 0; i < item.texts.length; i++) {
   var itemText = item.texts[i] || "";
   if(!this.listBox.encodeHtml && !preventEncodeText)
    itemText = this.GetEncodedItemInnerText(itemText);
   adjustedItemTexts[i] = itemText;
  }
  return adjustedItemTexts;
 },
 GetEncodedItemInnerText: function(itemText) {
  var result = itemText;
  var encodedItemText = ASPx.Str.EncodeHtml(itemText);
  if(itemText !== encodedItemText) {
   var div = document.createElement("DIV");
   ASPx.SetInnerHtml(div, itemText);
   result = ASPx.GetInnerText(div);
  }
  return result;
 },
 GetVisibleItemCount: function () {
  return this.filteredItemIndices.length;
 },
 GetItemsHeight: function () {
  var result = 0;
  ASPx.Data.ForEach(this.filteredItemIndices, function(itemIndex) {
   result += this.GetItemHeight(itemIndex);
  }.bind(this));
  return result;
 },
 GetTotalItemsHeight: function(firstItemIndex, lastItemIndex) {
  var result = 0;
  if(lastItemIndex >= this.filteredItemIndices.length)
   lastItemIndex = this.filteredItemIndices.length - 1;
  for(var i = firstItemIndex;i <= lastItemIndex;i++) {
   result += this.GetItemHeight(this.filteredItemIndices[i]);
  }
  return result;
 },
 GetItemHeight: function(index) {
  return this.deserializedItems[index].calculatedHeight ? this.deserializedItems[index].calculatedHeight : this.smallestItemHeight;
 },
 GetItemsWidth: function() {
  var listTableOffsetWidth = this.listTable.offsetWidth;
  var showFilterButton = this.listBox.GetShowFilterButton();
  if(showFilterButton && !this.showFilterButtonWidthCounted) {
   listTableOffsetWidth += showFilterButton.GetMainElement().offsetWidth;
   this.showFilterButtonWidthCounted = true;
  } 
  var itemsWidth = this.UseVirtualItemWidth() ?
   Math.max(this.visibleItemTextMaxWidth + this.smallestItemWidth, listTableOffsetWidth)
   : listTableOffsetWidth;
  return itemsWidth;
 },
 UseVirtualItemWidth: function() {
  return !this.IsFixedWidth() && !this.listBox.hasDecoratedItems && !this.IsItemTextWrapEnabled();
 },
 IsFixedWidth: function() {
  return this.listBox.IsMultiColumn() || this.IsStandaloneListBoxWithFixedWidth();
 },
 IsStandaloneListBoxWithFixedWidth: function() {
  return !this.listBox.isComboBoxList && this.listBox.width !== "";
 },
 GetFirstRenderedItem: function () {
  for (var i = 0; i < this.listTable.rows.length; i++)
   if (this.listTable.rows[i].itemIndex !== undefined)
    return this.GetItem(this.listTable.rows[i].itemIndex);
  return null;
 },
 GetLastRenderedItem: function () {
  for (var i = this.listTable.rows.length - 1; i >= 0; i--)
   if (this.listTable.rows[i].itemIndex !== undefined)
    return this.GetItem(this.listTable.rows[i].itemIndex);
  return null;
 },
 GetTopSpacersHeight: function () {
  return ListBoxItemsManagerBase.prototype.GetTopSpacersHeight.call(this) + this.GetVirtualScrollTopSpacer().clientHeight;
 },
 GetItemTopOffset: function (index) {
  var result = this.GetItemTopOffsetCore(index);
  if(result === 0) {
   var renderedItemRange = this.GetRenderedItemRange();
   if((renderedItemRange.startIndex >= 0 && renderedItemRange.endIndex >= 0) && (index < renderedItemRange.startIndex || index > renderedItemRange.endIndex)) {
    itemIndexInFilteredRange = ASPx.Data.ArrayIndexOf(this.filteredItemIndices, index);
    if(itemIndexInFilteredRange !== -1) {
     result = this.GetTotalItemsHeight(0, itemIndexInFilteredRange) - this.GetItemHeight(itemIndexInFilteredRange);
    }
   }
  }
  return result;
 },
 IsItemVisible: function (index) {
  return this.IsItemRendered(index) ? ListBoxItemsManagerBase.prototype.IsItemVisible.call(this, index) : false;
 },
 AreAllItemsVisible: function() {
  return this.filteredItemIndices.length === this.GetItemCount();
 },
 IsLastItemBottomEdgeVisible: function() {
  return this.IsItemEdgeVisible(this.GetLastFilteredItemIndex(), false, true);
 },
 ConvertItemIndexToRowIndex: function (itemIndex) {
  if(this.listTable.rows.length < 1)
   return -1;
  if(this.AreAllItemsVisible() && this.listBox.syncLockCount < 1 && !this.listBox.hasItemTemplate) { 
   var rawIndex = itemIndex - this.listTable.rows[0].itemIndex;
   return rawIndex >= 0 && rawIndex < this.listTable.rows.length
    ? rawIndex
    : ASPx.Data.ArrayIndexOf(this.listTable.rows, itemIndex, function(element) {return element.itemIndex === itemIndex;});
  }
  return ASPx.Data.ArrayIndexOf(this.listTable.rows, itemIndex, function (element) { return element.itemIndex === itemIndex; });
 },
 GetScrollDivChildElementHeight: function () {
  return this.GetVirtualScrollTableContainer().getBoundingClientRect().height;
 },
 IsItemFiltered: function (index) {
  return this.deserializedItems[index] && this.deserializedItems[index].filtered;
 },
 GetFirstVisibleItem: function () { 
  for(var i = 0; i < this.listTable.rows.length; i++)
   if (this.listTable.rows[i] && ASPx.ElementContainsCssClass(this.listTable.rows[i], "dxeListBoxItemRow"))
    return this.listTable.rows[i].itemIndex;
  return -1;
 },
 GetFirstFilteredItemIndex: function() {
  return this.filteredItemIndices.length > 0 ? this.filteredItemIndices[0] : -1;
 },
 GetLastFilteredItemIndex: function() {
  return this.filteredItemIndices.length > 0 ? this.filteredItemIndices[this.filteredItemIndices.length - 1] : -1;
 },
 GetNextFilteredItemIndex: function(currentFilteredItemIndex) {
  return this.filteredItemIndices.length > 0 ? this.filteredItemIndices[ASPx.Data.ArrayIndexOf(this.filteredItemIndices, currentFilteredItemIndex) + 1] : -1;
 },
 GetPrevFilteredItemIndex: function(currentFilteredItemIndex) {
  return this.filteredItemIndices.length > 0 ? this.filteredItemIndices[ASPx.Data.ArrayIndexOf(this.filteredItemIndices, currentFilteredItemIndex) - 1] : -1;
 },
 GetNewItemIndexInFilteredRange: function(selectedIndex, step) {
  var itemIndexInFilteredRange = ASPx.Data.ArrayIndexOf(this.filteredItemIndices, selectedIndex);
  var newItemIndexInFilteredRange = itemIndexInFilteredRange + step;
  if(newItemIndexInFilteredRange >= this.filteredItemIndices.length)
   newItemIndexInFilteredRange = this.filteredItemIndices.length - 1;
  else if(newItemIndexInFilteredRange < 0)
   newItemIndexInFilteredRange = 0;
  return this.filteredItemIndices[newItemIndexInFilteredRange];
 },
 ShouldRenderItemOnInsert: function(index) {
  if (!this.listBox.IsDisplayed())
   return false;
  if (this.GetFirstVisibleItemRow() == null)
   return true;
  if (this.IsIndexInRenderedItemRange(index))
   return true;
  if (this.filteredItemIndices.length > 0) {
   var startFilteredItemIndex = this.filteredItemIndices[0];
   var endFilteredItemIndex = this.filteredItemIndices[this.filteredItemIndices.length - 1];
   return index < startFilteredItemIndex && this.IsItemVisible(startFilteredItemIndex)
    || index > endFilteredItemIndex && this.IsItemVisible(endFilteredItemIndex);
  }
  return false;
 },
 InsertItem: function(index, itemProperties) {
  var isInsertToEnd = index === this.GetItemCount();
  var isInsertToEndWithLock = isInsertToEnd && this.updateLock;
  var shouldRenderItemOnInsert = !isInsertToEndWithLock && this.ShouldRenderItemOnInsert(index);
  var isItemInsertedToTop = this.virtualScrollVisibleItemIndices.length > 0 && index < this.virtualScrollVisibleItemIndices[0];
  ASPx.Data.ArrayInsert(this.deserializedItems, this.listBox.CreateItem(index, itemProperties), index);
  this.deserializedItems[index].filtered = true;
  this.deserializedItems[index].insertOrderIndex = this.listBox.FindFreeIndex();
  if(!isInsertToEnd) {
   for(var i = 0; i < this.deserializedItems.length; i++)
    this.deserializedItems[i].index = i;
   var requiredItemIndexInFilteredRange = -1;
   for(var i = 0; i < this.filteredItemIndices.length; i++)
    if(this.filteredItemIndices[i] >= index) {
     this.filteredItemIndices[i]++;
     if(requiredItemIndexInFilteredRange == -1)
      requiredItemIndexInFilteredRange = i;
    }
   ASPx.Data.ArrayInsert(this.filteredItemIndices, index, requiredItemIndexInFilteredRange);
  }
  else
   this.filteredItemIndices.push(index);
  if(shouldRenderItemOnInsert) {
   this.updateSmallestItemSize();
  }
  if(!isInsertToEndWithLock) {
   this.virtualScrollVisibleItemIndices = [];
   var rows = this.GetListTableRows();
   for(var i = 0; i < rows.length; i++) {
    var row = rows[i];
    if(row.itemIndex !== undefined) {
     if(row.itemIndex >= index)
      row.itemIndex++;
     this.virtualScrollVisibleItemIndices.push(row.itemIndex);
    }
   }
   if(shouldRenderItemOnInsert) {
    ASPx.Data.ArrayInsert(this.virtualScrollVisibleItemIndices, index,
     ASPx.Data.ArrayIndexOf(this.virtualScrollVisibleItemIndices, index,
     function(element) { return element > index; }));
    this.listBox.InsertItemRow(index, itemProperties);
    this.RecreateItemRowsCompletelly(this.getScrollPosition());
   }
   this.UpdateScrollTableContainerHeight();
   if(isItemInsertedToTop)
    this.UpdateVirtualScrollSpacerHeight(this.virtualScrollVisibleItemIndices, 0);
   if(!this.listBox.IsDisplayed())
    this.listBox.ResetControlAdjustment();
  }
  this.UpdateItemTextMaxWidth(this.GetItem(index).text);
 },
 BeginUpdate: function() {
  this.updateLock = true;
 },
 EndUpdate: function() {
  this.updateLock = false;
  this.updateSmallestItemSize();
  this.RecreateItemRowsCompletelly(this.getScrollPosition());
  this.UpdateScrollTableContainerHeight();
  if(!this.listBox.IsDisplayed())
   this.listBox.ResetControlAdjustment();
 },
 RemoveItem: function(index) {
  var shouldRecreateItemRows = this.listBox.IsDisplayed() && this.IsIndexInRenderedItemRange(index);
  var shouldRemoveFromRender = this.GetItemRow(index);
  var isItemRemovedFromTop = this.virtualScrollVisibleItemIndices.length > 0 && index < this.virtualScrollVisibleItemIndices[0];
  var needUpdateItemTextMaxWidth = this.NeedUpdateItemTextMaxWidthOnRemoveItem(index);
  ASPx.Data.ArrayRemoveAt(this.deserializedItems, index);
  ASPx.Data.ArrayRemove(this.filteredItemIndices, index);
  for (var i = 0; i < this.deserializedItems.length; i++)
   this.deserializedItems[i].index = i;
  for (var i = 0; i < this.filteredItemIndices.length; i++)
   if (this.filteredItemIndices[i] > index)
    this.filteredItemIndices[i]--;
  this.virtualScrollVisibleItemIndices = [];
  if (shouldRemoveFromRender)
   this.RemoveItemCore(index);
  var rows = this.GetListTableRows();
  for (var i = 0; i < rows.length; i++) {
   var row = rows[i];
   if (row.itemIndex !== undefined) {
    if(row.itemIndex > index)
     row.itemIndex--;
    this.virtualScrollVisibleItemIndices.push(row.itemIndex);
   }
  }
  if (shouldRecreateItemRows)
   this.RecreateItemRowsCompletelly(this.getScrollPosition());
  this.UpdateScrollTableContainerHeight();
  if (isItemRemovedFromTop)
   this.UpdateVirtualScrollSpacerHeight(this.virtualScrollVisibleItemIndices, 0);
  if (needUpdateItemTextMaxWidth) {
   this.itemTextMaxWidth = 0;
   this.visibleItemTextMaxWidth = 0;
   for (var i = 0; i < this.GetItemCount() ; i++)
    this.UpdateItemTextMaxWidth(this.GetItem(i).text);
  }
  if (!this.listBox.IsDisplayed())
   this.listBox.ResetControlAdjustment();
 },
 ClearItems: function () {
  this.ClearItemsCore();
  this.deserializedItems = [];
  this.filteredItemIndices = [];
  this.virtualScrollVisibleItemIndices = [];
  if (this.listBox.isComboBoxList) {
   this.itemTextMaxWidth = 0;
   this.visibleItemTextMaxWidth = 0;
  }
  this.UpdateScrollTableContainerHeight();
  if (!this.listBox.IsDisplayed())
   this.listBox.ResetControlAdjustment();
 },
 CreateNewItemRow: function (index) {
  var newItemRow = ListBoxItemsManagerBase.prototype.CreateNewItemRow.call(this, index);
  newItemRow.itemIndex = index;
  return newItemRow;
 },
 Adjust: function() {
  if (this.GetItemCount() == 0 || !this.listBox.IsDisplayed())
   return;
  if(this.smallestItemHeight === 0) {
   this.updateSmallestItemSize();
   this.UpdateScrollTableContainerHeight();
  }
  if(this.smallestItemHeight !== 0) {
   if(this.IsItemTextWrapEnabled())
    this.CorrectItemsHeight();
   this.RecreateItemRowsCompletelly(this.getScrollPosition());
   this.listBox.InitializePageSize();
   if(!this.listBox.isComboBoxList)
    this.listBox.CorrectWidth();
  }
 },
 UpdateItemTextMaxWidth: function (itemText, isFiltering) {
  if (!this.UseVirtualItemWidth())
   return;
  if (!ASPx.IsExists(this.visibleItemTextMaxWidth))
   this.visibleItemTextMaxWidth = 0;
  this.visibleItemTextMaxWidth = Math.max(this.GetItemTextWidth(itemText), this.visibleItemTextMaxWidth);
  if (!isFiltering)
   this.itemTextMaxWidth = this.visibleItemTextMaxWidth;
 },
 GetItemTextWidth: function (itemText) {
  return Math.round(this.GetItemTextMeasureContext().measureText(itemText).width);
 },
 GetItemTextMeasureContext: function() {
  if (!this.itemTextMeasureContext) {
   var itemTextMeasureCanvas = document.createElement("canvas");
   this.itemTextMeasureContext = itemTextMeasureCanvas.getContext("2d");
   var mainElementStyle = ASPx.GetCurrentStyle(this.listBox.GetMainElement());
   var mainElementFont = mainElementStyle.font ? mainElementStyle.font :
    mainElementStyle.fontStyle + " " + mainElementStyle.fontVariant + " " + mainElementStyle.fontWeight + " "
     + mainElementStyle.fontSize + " / " + mainElementStyle.lineHeight + " " + mainElementStyle.fontFamily;
   this.itemTextMeasureContext.font = mainElementFont;
  }
  return this.itemTextMeasureContext;
 },
 NeedUpdateItemTextMaxWidthOnRemoveItem: function(index) {
  return this.UseVirtualItemWidth() && this.listBox.isComboBoxList && this.IsItemWithMaxText(this.GetItem(index).text);
 },
 BeforeClientFiltering: function () {
  if (this.listBox.isComboBoxList)
   this.visibleItemTextMaxWidth = 0;
 },
 IsItemWithMaxText: function(itemText) {
  return this.GetItemTextWidth(itemText) === this.itemTextMaxWidth;
 },
 ApplyFilterToItem: function (index, isSatisfy, savePrevState, isFilterReset) {
  if (savePrevState && !ASPx.IsExists(this.deserializedItems[index].savedFiltered))
   this.deserializedItems[index].savedFiltered = this.deserializedItems[index].filtered;
  this.ChangeItemFilteredFlag(index, isSatisfy, isFilterReset);
 },
 RestorePrevFilteredState: function (index) {
  var savedFilteredState = this.deserializedItems[index].savedFiltered;
  if (ASPx.IsExists(savedFilteredState)) {
   this.ChangeItemFilteredFlag(index, savedFilteredState);
   delete this.deserializedItems[index].savedFiltered;
  }
 },
 ChangeItemFilteredFlag: function (index, newValue, isFilterReset) {
  var item = this.deserializedItems[index];
  item.filtered = newValue;
  if (!isFilterReset && this.listBox.isComboBoxList && newValue)
   this.UpdateItemTextMaxWidth(item.text);
 },
 OnEndItemsFiltering: function() {
  if(this.listBox.IsDisplayed()) {
   this.RecreateItemRowsCompletelly(0);
  }
 },
 ChangeItemsFilteredState: function (action) {
  this.filteredItemIndices = [];
  ListBoxItemsManagerBase.prototype.ChangeItemsFilteredState.call(this, action);
 },
 AfterChangeItemFilteredStateAction: function (index) {
  if (this.IsItemFiltered(index))
   this.filteredItemIndices.push(index);
 },
 RewriteFilteredItemIndices: function (newFilteredItemIndices) {
  this.filteredItemIndices = newFilteredItemIndices;
 },
 MakeAllItemsVisible: function () {
  ListBoxItemsManagerBase.prototype.MakeAllItemsVisible.call(this);
  this.visibleItemTextMaxWidth = this.itemTextMaxWidth;
 },
 MakeItemVisible: function(index) { 
  if(index < 0) {
   index = 0;
  }
  ListBoxItemsManagerBase.prototype.MakeItemVisible.call(this, index);
 },
 InsertTempFirstItemRow: function() {
  try {
   this.listBox.LockRunStartupSciptsInItemRow();
   if(this.deserializedItems.length > 0)
    this.listBox.InsertItemRow(0, this.deserializedItems[0]);
  }
  finally {
   this.listBox.UnlockRunStartupSciptsInItemRow();
  }
 },
 RemoveFirstTempRow: function () {
  if (this.deserializedItems.length > 0)
   this.listBox.RemoveItemRow(0);
 },
 GetVirtualScrollItemHeight: function(virtualScrollItemRow) {
  return virtualScrollItemRow.getBoundingClientRect().height;
 },
 updateSmallestItemSize: function() {
  if(this.smallestItemHeight == 0 && this.GetItemCount() !== 0) {
   this.InsertTempFirstItemRow();
   var firstItemRow = this.GetFirstVisibleItemRow();
   var itemTextCell = this.listBox.GetItemFirstTextCell(0);
   var cellDisplay = itemTextCell.style.display; 
   itemTextCell.style.display = "";
   ASPx.SetInnerHtml(itemTextCell,".");
   this.smallestItemHeight = firstItemRow.offsetHeight;
   ASPx.AddClassNameToElement(this.listTable, listTableCollapsedClassName);
   ASPx.SetInnerHtml(itemTextCell,"");
   if(this.UseVirtualItemWidth() && this.smallestItemWidth === 0) {
    this.smallestItemWidth = firstItemRow.offsetWidth;
   }
   itemTextCell.style.display = cellDisplay;
   ASPx.RemoveClassNameFromElement(this.listTable, listTableCollapsedClassName);
   this.RemoveFirstTempRow();
  }
 },
 UpdateScrollTableContainerHeight: function () {
  var virtualScrollTableContainer = this.GetVirtualScrollTableContainer();
  if (virtualScrollTableContainer)
   ASPx.SetStyles(virtualScrollTableContainer, {
    height: this.GetItemsHeight()
     + this.listBox.GetTopScrollSpacerHeight()
     + this.listBox.GetBottomScrollSpacerHeight()
   });
 },
 UpdateVirtualScrollSpacerHeight: function(visibleIndices, scrollableContainerHeightDelta) {
  var firstVisibleIndex = visibleIndices.length > 0 && this.filteredItemIndices.length > 0 ? ASPx.Data.ArrayIndexOf(this.filteredItemIndices, visibleIndices[0]) : 0;
  var topSpacerHeight = 0;
  if(firstVisibleIndex > 0) {
   topSpacerHeight = this.GetTotalItemsHeight(0, firstVisibleIndex - 1);
  }
  if(!scrollableContainerHeightDelta)
   scrollableContainerHeightDelta = 0;
  ASPx.SetStyles(this.GetVirtualScrollTopSpacer(), { height: topSpacerHeight - scrollableContainerHeightDelta });
 },
 OnScrollSpacerVisibilityChanged: function() {
  this.UpdateScrollTableContainerHeight();
 },
 SetItemHtml: function(index, html) {
  this.deserializedItems[index].htmlContent = html;
 },
 SetItemTooltip: function (index, tooltip) {
  this.deserializedItems[index].tooltip = tooltip;
 },
 SetItemAttribute: function(index, attrName, attrValue) {
  if(!this.deserializedItems[index].attributes)
   this.deserializedItems[index].attributes = {};
  this.deserializedItems[index].attributes[attrName] = attrValue;
 },
 AddClassNameToCssClass: function(cssClass, className) {
  return (cssClass == "" || cssClass == undefined) ? className : cssClass + " " + className;
 },
 RemoveClassNameFromCssClass: function (cssClass, className) {
  var updClassName = " " + cssClass + " ";
  var newClassName = updClassName.replace(" " + className + " ", " ");
  return updClassName.length != newClassName.length ? ASPx.Str.Trim(newClassName) : cssClass;
 },
 AddItemCssClass: function (index, className) {
  this.deserializedItems[index].cssClass = this.AddClassNameToCssClass(this.deserializedItems[index].cssClass, className);
 },
 RemoveItemCssClass: function (index, className) {
  this.deserializedItems[index].cssClass = this.RemoveClassNameFromCssClass(this.deserializedItems[index].cssClass, className);
 },
 SetItemTextCellHtml: function (itemIndex, textCellIndex, html) {
  if (!this.deserializedItems[itemIndex].htmlContents)
   this.deserializedItems[itemIndex].htmlContents = [];
  this.SetItemTextCellInfoValue(this.deserializedItems[itemIndex].htmlContents, textCellIndex, html);
 },
 SetItemTextCellTooltip: function (itemIndex, textCellIndex, tooltip) {
  if (!this.deserializedItems[itemIndex].cellTooltips)
   this.deserializedItems[itemIndex].cellTooltips = [];
  this.SetItemTextCellInfoValue(this.deserializedItems[itemIndex].cellTooltips, textCellIndex, tooltip);
 },
 SetItemTextCellAttribute: function(itemIndex, textCellIndex, attrName, attrValue) {
  if(!this.deserializedItems[itemIndex].cellAttributes)
   this.deserializedItems[itemIndex].cellAttributes = [];
  var setValueAction = function(itemInfo, value) {
   if(!itemInfo.value)
    itemInfo.value = {};
   itemInfo.value[value.attrName] = value.attrValue;
  };
  this.SetItemTextCellInfoValue(this.deserializedItems[itemIndex].cellAttributes, textCellIndex,
   { attrName: attrName, attrValue: attrValue }, setValueAction);
 },
 AddItemTextCellCssClass: function (itemIndex, textCellIndex, className) {
  if (!this.deserializedItems[itemIndex].cellCssClasses)
   this.deserializedItems[itemIndex].cellCssClasses = [];
  var newCssClass = this.AddClassNameToCssClass(this.deserializedItems[itemIndex].cellCssClasses[textCellIndex], className);
  this.SetItemTextCellInfoValue(this.deserializedItems[itemIndex].cellCssClasses, textCellIndex, newCssClass);
 },
 RemoveItemTextCellCssClass: function (itemIndex, textCellIndex, className) {
  if (!this.deserializedItems[itemIndex].cellCssClasses)
   this.deserializedItems[itemIndex].cellCssClasses = [];
  var newCssClass = this.RemoveClassNameFromCssClass(this.deserializedItems[itemIndex].cellCssClasses[textCellIndex], className);
  this.SetItemTextCellInfoValue(this.deserializedItems[itemIndex].cellCssClasses, textCellIndex, newCssClass);
 },
 SetItemTextCellInfoValue: function (infoArray, textCellIndex, value, setValueAction) {
  var itemInfo = null;
  var filteredArray = infoArray.filter(function (info) { return info.index === textCellIndex; });
  if (filteredArray.length == 0) {
   itemInfo = { index: textCellIndex };
   infoArray.push(itemInfo);
  }
  else
   itemInfo = filteredArray[0];
  if(setValueAction)
   setValueAction(itemInfo, value);
  else
   itemInfo.value = value;
 },
 InitializeItems: function(items, itemsValue) {
  this.deserializedItems = this.listBox.DeserializeItems(items);
  this.filteredItemIndices = [];
  this.visibleItemTextMaxWidth = 0;
  this.itemTextMaxWidth = 0;
  for (var i = 0; i < this.deserializedItems.length; i++) {
   this.listBox.AdjustItemProperties(this.deserializedItems[i]);
   itemsValue[i] = this.deserializedItems[i].value;
   this.filteredItemIndices[i] = this.deserializedItems[i].index;
   this.deserializedItems[i].filtered = true;
   this.deserializedItems[i].insertOrderIndex = this.listBox.FindFreeIndex();
   this.UpdateItemTextMaxWidth(this.deserializedItems[i].text);
  }
 },
 InitializeItemRows: function () {
  var topSpacer = ASPx.CreateHtmlElement("DIV");
  topSpacer.id = this.listBox.name + "VirtualScrollTopSpacer";
  var tableContainer = ASPx.CreateHtmlElement("DIV");
  tableContainer.id = this.listBox.name + ListBoxVirtualScrollTableContainerIDPostfix;
  tableContainer.appendChild(topSpacer);
  var scrollDiv = this.listBox.GetScrollDivElement();
  ASPx.MoveChildrenToElement(scrollDiv, tableContainer);
  scrollDiv.appendChild(tableContainer);
  ASPx.SetStyles(tableContainer, { overflow: "hidden", width: "100%" });
  ASPx.Evt.AttachEventToElement(scrollDiv, "scroll", this.onScroll.bind(this));
 },
 getScrollPosition: function() {
  var scrollDiv = this.listBox.GetScrollDivElement();
  var scrollTop = scrollDiv.scrollTop - this.listBox.GetTopScrollSpacerHeight();
  if(scrollTop < 0)
   scrollTop = 0;
  return scrollTop;
 },
 onScroll: function() {
  var scrollTop = this.getScrollPosition();
  if(this.IsScrollActivated()) {
   var scrollDiv = this.listBox.GetScrollDivElement();
   if(!scrollDiv) return;
   var scrollDivHeight = scrollDiv.clientHeight;
   var scrollContainerHeight = this.GetScrollDivChildElementHeight();
   var scrollToBottom = scrollContainerHeight <= scrollDivHeight ? false : scrollTop >= scrollContainerHeight - scrollDivHeight;
   var isSmallScroll = Math.abs(scrollTop - this.previousScrollPosition) < scrollDivHeight;
   if(isSmallScroll)
    this.RecreateItemRowsPartially(scrollTop);
   else
    this.RecreateItemRowsCompletelly(scrollTop);
   if(scrollToBottom) {
    this.DeactivateScrollHandler();
    scrollDiv.scrollTop = this.GetScrollDivChildElementHeight() - scrollDivHeight;
   }
  }
  else {
   this.ActivateScrollHandler();
  }
  this.previousScrollPosition = scrollTop;
 },
 RecreateItemRowsCompletelly: function(scrollTop) {
  this.RecreateItemRows(scrollTop, false);
 },
 RecreateItemRowsPartially: function(scrollTop) {
  this.RecreateItemRows(scrollTop, true);
 },
 RecreateItemRows: function(scrollTop, recreateItemsPartially) {
  if(recreateItemsPartially == "undefined") throw new Error("recreateItemsPartially");
  if(this.listBox.IsDisplayed()) {
   var firstVisibleItemIndex = this.getFirstVisibleItemIndex(scrollTop);
   var lastVisibleItemIndex = this.getLastVisibleItemIndex(scrollTop);
   this.RecreateItemRowsCore(firstVisibleItemIndex, lastVisibleItemIndex, recreateItemsPartially);
   if(typeof (ASPxClientHint) != "undefined")
    this.UpdateHintControl();
   this.listBox.AssignEllipsisTooltips();
  }
 },
 RecreateItemRowsCore: function(topRenderedItemIndex, bottomRenderedItemIndex, recreateItemsPartially) {
  if(topRenderedItemIndex > bottomRenderedItemIndex && this.filteredItemIndices.length > 0)
   return;
  var newVisibleIndices = this.filteredItemIndices.slice(topRenderedItemIndex, bottomRenderedItemIndex + 1);
  this.RecreateItemRowsByVisibleIndices(newVisibleIndices, false, recreateItemsPartially);
  this.OnDecoratedItemsRendering();
  if(this.listBox.NeedToHandleCellWidth())
   this.listBox.CorrectCellNullWidthStyle(this.GetFirstVisibleItemRow());
 },
 getFirstVisibleItemIndex: function(scrollTop) {
  var result = -1;
  var scrollDiv = this.listBox.GetScrollDivElement();
  var scrollDivHeight = scrollDiv.clientHeight;
  var scrollContainerHeight = this.GetScrollDivChildElementHeight();
  var scrollToBottom = scrollContainerHeight <= scrollDivHeight ? false : scrollTop >= scrollContainerHeight - scrollDivHeight;
  var height = 0;
  if(scrollToBottom) {
   for(var i = this.filteredItemIndices.length - 1;i >= 0;i--) {
    height += this.GetItemHeight(this.filteredItemIndices[i]);
    if(height > scrollDivHeight) {
     result = i;
     break;
    }
   }
  }
  else {
   for(var i = 0;i < this.filteredItemIndices.length;i++) {
    height += this.GetItemHeight(this.filteredItemIndices[i]);
    if(height > scrollTop) {
     result = i > 1 ? i - 1 : 0;
     break;
    }
   }
  }
  return result;
 },
 getLastVisibleItemIndex: function(scrollTop) {
  var result = -1;
  var scrollDiv = this.listBox.GetScrollDivElement();
  var scrollDivHeight = scrollDiv.clientHeight;
  var scrollContainerHeight = this.GetScrollDivChildElementHeight();
  var scrollToBottom = scrollContainerHeight <= scrollDivHeight ? false : scrollTop >= scrollContainerHeight - scrollDivHeight;
  if(scrollToBottom) {
   result = this.filteredItemIndices[this.filteredItemIndices.length - 1];
  }
  else {
   var height = 0;
   result = this.filteredItemIndices.length - 1;
   if(this.filteredItemIndices) {
    for(var i = 0;i < this.filteredItemIndices.length;i++) {
     height += this.GetItemHeight(this.filteredItemIndices[i]);
     if(height >= (scrollTop + scrollDivHeight)) {
      result = i;
      break;
     }
    }
   }
  }
  return result == this.filteredItemIndices.length - 1 ? result : result + 1;
 },
 UpdateHintControl: function() {
  ASPxClientHint.hideByTargetsContainerElement(this.listTable, true);
  ASPxClientHint.Update();
 },
 GetScrollContentHeight: function() {
  return this.GetVirtualScrollTopSpacer().getBoundingClientRect().height
   + this.listBox.GetTopScrollSpacerHeight() + this.listBox.GetBottomScrollSpacerHeight()
   + this.listTable.getBoundingClientRect().height;
 },
 removeItems: function(indicesToRemove) {
  var renderedItemIndexesBeforeModification = this.virtualScrollVisibleItemIndices;
  var removedFromTopItemsHeight = 0;
  for(var i = 0;i < indicesToRemove.length;i++) {
   var itemIndex = indicesToRemove[i];
   if(renderedItemIndexesBeforeModification.indexOf(itemIndex) === 0) {
    removedFromTopItemsHeight += this.GetItemHeight(itemIndex);
    renderedItemIndexesBeforeModification = renderedItemIndexesBeforeModification.slice(1);
   }
   this.listBox.RemoveItemRow(itemIndex);
  }
  return removedFromTopItemsHeight;
 },
 insertItems: function(indicesToInsert) {
  var firstVisibleItemIndexBeforeInsert = this.GetFirstVisibleItem();
  var scrollableContainerHeightDelta = 0;
  var insertedToTopItemsHeight = 0;
  for(var i = 0;i < indicesToInsert.length;i++) {
   var itemIndex = indicesToInsert[i];
   if(itemIndex < firstVisibleItemIndexBeforeInsert) {
    insertedToTopItemsHeight += this.GetItemHeight(itemIndex);
   }
   this.listBox.InsertItemRow(itemIndex, this.deserializedItems[itemIndex]);
   if(!this.deserializedItems[itemIndex].calculatedHeight) {
    var itemRowElement = this.GetItemRow(itemIndex);
    var imageElements = itemRowElement.querySelectorAll("img");
    var updateCalculatedHeightFunction = function(itemIndex, itemRowElement) {
     this.deserializedItems[itemIndex].calculatedHeight = this.GetVirtualScrollItemHeight(itemRowElement);
     this.RecreateItemRows(this.getScrollPosition(),true);
    };
    for(var j = 0;j < imageElements.length;j++) {
     var img = imageElements[j];
     if(!img.complete) {
      ASPx.Evt.AttachEventToElement(img, "load", updateCalculatedHeightFunction.bind(this, itemIndex, itemRowElement));
      ASPx.Evt.AttachEventToElement(img, "error", updateCalculatedHeightFunction.bind(this, itemIndex, itemRowElement));
     }
    }
    this.deserializedItems[itemIndex].calculatedHeight = this.GetVirtualScrollItemHeight(itemRowElement);
    if(itemIndex < firstVisibleItemIndexBeforeInsert) {
     scrollableContainerHeightDelta += this.deserializedItems[itemIndex].calculatedHeight - this.smallestItemHeight;
    }
   }
   var isItemSelected = this.listBox.GetIsItemSelected(itemIndex);
   var stateController = typeof (ASPx.GetStateController) != "undefined" ? ASPx.GetStateController() : null;
   this.listBox.SetItemSelectionAppearance(itemIndex, isItemSelected, stateController, false);
   if (this.listBox.GetIsCheckColumnExists())
    this.listBox.SetCheckBoxChecked(itemIndex, isItemSelected);
   this.listBox.ChangeEnabledStateItem(itemIndex, this.listBox.GetEnabled(), stateController);
  }
  return {
   scrollableContainerHeightDelta: scrollableContainerHeightDelta,
   insertedToTopItemsHeight: insertedToTopItemsHeight
  };
 },
 RecreateItemRowsByVisibleIndices: function(newVisibleIndices, keepTopSpacerHeight, recreateItemsPartially) {
  if(recreateItemsPartially == "undefined") throw new Error("recreateItemsPartially");
  if(keepTopSpacerHeight == "undefined") throw new Error("keepTopSpacerHeight");
  newVisibleIndices = newVisibleIndices || [];
  var indicesToRemove = this.virtualScrollVisibleItemIndices.filter(function(index) {
   return newVisibleIndices.indexOf(index) === -1;
  });
  var indicesToInsert = newVisibleIndices.filter(function(index) {
   return this.virtualScrollVisibleItemIndices.indexOf(index) === -1;
  }.bind(this));
  this.listBox.LockSynchronization();
  var removedFromTopItemsHeight = this.removeItems(indicesToRemove);
  var insertionInfo = this.insertItems(indicesToInsert);
  var scrollableContainerHeightDelta = insertionInfo.scrollableContainerHeightDelta;
  var insertedToTopItemsHeight = insertionInfo.insertedToTopItemsHeight;
  this.virtualScrollVisibleItemIndices = newVisibleIndices;
  this.UpdateScrollTableContainerHeight();
  this.listBox.TryApplyHighlighting();
  this.listBox.UnlockSynchronization();
  if(recreateItemsPartially) {
   var virtualScrollTopSpacer = this.GetVirtualScrollTopSpacer();
   var newHeight = virtualScrollTopSpacer.getBoundingClientRect().height - insertedToTopItemsHeight + removedFromTopItemsHeight;
   newHeight = newHeight >= 0 ? newHeight : 0;
   ASPx.SetStyles(virtualScrollTopSpacer, { height: newHeight });
   if(scrollableContainerHeightDelta !== 0) {
    this.DeactivateScrollHandler();
    this.listBox.GetScrollDivElement().scrollTop += scrollableContainerHeightDelta;
   }
  }
  else if(!keepTopSpacerHeight)
   this.UpdateVirtualScrollSpacerHeight(newVisibleIndices);
  this.listBox.InitDXTextAttributes();
 },
 GetVirtualScrollTableContainer: function () {
  return this.listBox.tempCache.Get("virtualScrollTableContainer", this.GetVirtualScrollTableContainerCore.aspxBind(this), this.listBox);
 },
 GetVirtualScrollTableContainerCore: function () {
  if (!ASPx.IsExistsElement(this.listBox.virtualScrollTableContainer))
   this.listBox.virtualScrollTableContainer = ASPx.GetElementById(this.listBox.name + ListBoxVirtualScrollTableContainerIDPostfix);
  return this.listBox.virtualScrollTableContainer;
 },
 GetVirtualScrollTopSpacer: function () {
  return this.listBox.tempCache.Get("virtualScrollTopSpacer", this.GetVirtualScrollTopSpacerCore.aspxBind(this), this.listBox);
 },
 GetVirtualScrollTopSpacerCore: function () {
  if (!ASPx.IsExistsElement(this.listBox.virtualScrollTopSpacer))
   this.listBox.virtualScrollTopSpacer = ASPx.GetElementById(this.listBox.name + "VirtualScrollTopSpacer");
  return this.listBox.virtualScrollTopSpacer;
 },
 GetRenderedItemRange: function () {
  var firstRenderedItem = this.GetFirstRenderedItem();
  var lastRenderedItem = this.GetLastRenderedItem();
  return {
   startIndex: firstRenderedItem ? firstRenderedItem.index : -1,
   endIndex: lastRenderedItem ? lastRenderedItem.index : -1
  };
 },
 IsIndexInRenderedItemRange: function(index) {
  var renderedItemRange = this.GetRenderedItemRange();
  return index >= renderedItemRange.startIndex && index <= renderedItemRange.endIndex;
 },
 IsItemRendered: function (itemIndex) {
  return this.GetItemRow(itemIndex) !== null;
 },
 IsItemTextWrapEnabled: function() {
  if(!ASPx.IsExists(this.enableItemTextWrap)) {
   var sampleItemFirstTextCell = this.listBox.GetSampleItemFirstTextCell();
   this.enableItemTextWrap = sampleItemFirstTextCell && ASPx.GetCurrentStyle(sampleItemFirstTextCell).whiteSpace !== "nowrap";
  }
  return this.enableItemTextWrap;
 },
 OnDecoratedItemsRendering: function () {
  if(this.listBox.hasDecoratedItems && !this.IsFixedWidth() && this.listBox.IsDisplayed() && !this.IsItemTextWrapEnabled())
   this.listBox.CorrectWidth();
 },
 DeactivateScrollHandler: function() { 
  this.isScrollProcessingActivated = false;
 },
 ActivateScrollHandler: function() { 
  this.isScrollProcessingActivated = true;
 },
 CorrectItemsHeight: function() {
  var needUpdateSmallestItemSize = false;
  var rows = this.GetListTableRows();
  for(var i = 0; i < rows.length; i++) {
   var row = rows[i];
   var index = row.itemIndex;
   if(index != undefined) {
    var deserializedItem = this.GetDeserializedItemByIndex(index);
    var rowHeight = this.GetVirtualScrollItemHeight(row);
    if(deserializedItem.calculatedHeight != rowHeight) {
     this.deserializedItems[index].calculatedHeight = rowHeight;
     needUpdateSmallestItemSize = true;
    }
   }
  }
  if(needUpdateSmallestItemSize) {
   this.smallestItemHeight = 0;
   this.updateSmallestItemSize();
  }
 },
 GetDeserializedItemByIndex: function(itemIndex) {
  return this.deserializedItems.filter(function(item) { return item.index == itemIndex; })[0];
 },
 IsScrollActivated: function() {
  return this.isScrollProcessingActivated;
 }
});
var ASPxClientListEdit = ASPx.CreateClass(ASPxClientEdit, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.SelectedIndexChanged = new ASPxClientEvent();
  this.savedSelectedIndex = -1;
 },
 FindInputElement: function() {
  return this.FindStateInputElement();
 },
 FindStateInputElement: function(){
  return document.getElementById(this.name + leVISuffix);
 },
 GetItem: function(index) {
  throw "Not implemented";
 },
 GetItemValue: function(index) {
  throw "Not implemented";
 },
 GetValue: function(){
  return this.GetItemValue(this.GetSelectedIndex());
 }, 
 GetSelectedIndexInternal: function(){
  return this.savedSelectedIndex;
 },
 SetSelectedIndexInternal: function(index){
  this.savedSelectedIndex = index;
 },
 FindItemIndexByValue: function(value){
  for(var i = 0; i < this.GetItemCount(); i++){
   if(this.GetItemValue(i) == value)
    return i;
  }
  return -1;
 },
 RaiseItemClick: function() {
  var processOnServer = this.autoPostBack;
  if(!this.ItemClick.IsEmpty()){
   var args = new ASPxClientProcessingModeEventArgs(processOnServer);
   this.ItemClick.FireEvent(this, args);
   processOnServer = args.processOnServer;
  }
  return processOnServer;
 },
 RaiseItemDoubleClick: function() {
  var processOnServer = this.autoPostBack;
  if(!this.ItemDoubleClick.IsEmpty()){
   var args = new ASPxClientProcessingModeEventArgs(processOnServer);
   this.ItemDoubleClick.FireEvent(this, args);
   processOnServer = args.processOnServer;
  }
  return processOnServer;
 },
 RaiseValueChangedEvent: function() {
  if(!this.isInitialized) return false;
  var processOnServer = ASPxClientEdit.prototype.RaiseValueChangedEvent.call(this);
  processOnServer = this.RaiseValueChangedAdditionalEvents(processOnServer);
  return processOnServer;
 },
 RaiseValueChangedAdditionalEvents: function(processOnServer){
  return this.RaiseSelectedIndexChanged(processOnServer);
 },
 RaiseSelectedIndexChanged: function (processOnServer) {
  this.RaiseValidationInternal();
  if(!this.SelectedIndexChanged.IsEmpty()){
   var args = new ASPxClientProcessingModeEventArgs(processOnServer);
   this.SelectedIndexChanged.FireEvent(this, args);
   processOnServer = args.processOnServer;
  }
  return processOnServer;
 },
 UpdateHiddenInputs: function(){
  var element = this.FindStateInputElement();
  if(ASPx.IsExistsElement(element)) {
   var value = this.GetValue();
   if(value == null)
    value = "";
   element.value = value;
  }
 },
 GetModifyEvent: function () {
  return this.SelectedIndexChanged;
 },
 GetSelectedItem: function(){
  var index = this.GetSelectedIndexInternal();
  return this.GetItem(index);
 },
 GetSelectedIndex: function(){
  return this.GetSelectedIndexInternal();
 },
 SetSelectedItem: function(item){
  var index = (item != null) ? item.index : -1;
  this.SetSelectedIndex(index);
 },
 SetSelectedIndex: function(index){
  this.SelectIndexSilent(index);
 },
 SelectIndexSilent: function(index){
  throw "Not implemented";
 },
 OnValueChanged: function () {
  var processOnServer = this.RaiseValueChangedEvent() && this.GetIsValid();
  if(processOnServer)
   this.SendPostBackInternal("");
 },
 getElementToObserveVisibilityChange: function () {
  return this.GetMainElement();
 },
 processVisibilityChanged: function (visible) {
  var focusHandlingInputForKeyboardSupport = this.GetMainElement().querySelector(".dxKBSI");
  ASPx.ToggleClassNameToElement(focusHandlingInputForKeyboardSupport, "dx-position-fixed", visible);
 }
});
var ASPxClientListEditItem = ASPx.CreateClass(null, {
 constructor: function(listEditBase, index, text, value, imageUrl){
  this.listEditBase = listEditBase;
  this.index = index;
  this.imageUrl = imageUrl;
  this.text = text;
  this.value = value;
 }
});
var ASPxClientListBoxItem = ASPx.CreateClass(ASPxClientListEditItem, {
 constructor: function(listEditBase, index, texts, value, imageUrl, selected, cellStyles, cellCssClasses, cellTooltips, cellAttributes, htmlContents, style, cssClass, tooltip, attributes, htmlContent) {
  this.constructor.prototype.constructor.call(this, listEditBase, index, null, value, imageUrl);
  this.selected = !!selected;
  this.texts = texts;
  this.text = listEditBase.FormatText(texts, value);
  this.cellStyles = cellStyles;
  this.cellCssClasses = cellCssClasses;
  this.cellTooltips = cellTooltips;
  this.cellAttributes = cellAttributes;
  this.htmlContents = htmlContents;
  this.style = style;
  this.cssClass = cssClass;
  this.tooltip = tooltip;
  this.attributes = attributes;
  this.htmlContent = htmlContent;
 },
 GetColumnText: function(columnIndexOrFieldName){
  var columnIndex = -1;
  if(typeof(columnIndexOrFieldName) == "string")
   columnIndex = ASPx.Data.ArrayIndexOf(this.listEditBase.columnFieldNames, columnIndexOrFieldName);
  else if(typeof(columnIndexOrFieldName) == "number")
   columnIndex = columnIndexOrFieldName;
  return this.GetColumnTextByIndex(columnIndex);
 },
 GetColumnTextByIndex: function(columnIndex){
  if(0 <= columnIndex && columnIndex < this.texts.length)
   return this.texts[columnIndex];
  else
   return null;
 }
});
var ListBoxScrollCallbackHelperBase = ASPx.CreateClass(null, {
 constructor: function(listBoxControl) {
  this.listBoxControl = listBoxControl;
  this.itemsRange = "";
  this.defaultItemsRange = "0:" + (this.listBoxControl.callbackPageSize - 1);
 },
 OnScroll: function(){ },
 Reset: function(){ },
 IsScrolledToTopSpacer: function(){ return false; },
 IsScrolledToBottomSpacer: function(){ return false; },
 GetIsNeedToHideTopSpacer: function(){ return false; },
 GetIsNeedCallback: function(){ return false; },
 GetIsAnySpacerVisible: function() { return false; },
 GetItemsRangeForLoad: function(){ return this.defaultItemsRange; },
 SetItemsRangeForLoad: function(){}
});
var ListBoxScrollCallbackHelper = ASPx.CreateClass(ListBoxScrollCallbackHelperBase, {
 constructor: function(listBoxControl) {
  this.constructor.prototype.constructor.call(this, listBoxControl);
  this.isScrolledToTopSpacer = false;
  this.isScrolledToBottomSpacer = false;
 },
 OnScroll: function(){
  this.DetectScrollDirection();
  this.ResetItemsRange();
  if(this.GetIsAnySpacerVisible())
   this.RecalcItemsRangeForLoad();
 },
 DetectScrollDirection: function(){
  var listBoxControl = this.listBoxControl;
  var divElement = listBoxControl.GetScrollDivElement();
  var scrollTop = divElement.scrollTop;
  var scrollBottom = divElement.scrollTop + divElement.clientHeight;
  var isTopSpacerVisible = listBoxControl.GetScrollSpacerVisibility(true);
  var isBottomSpacerVisible = listBoxControl.GetScrollSpacerVisibility(false);
  this.isScrolledToTopSpacer = (scrollTop < parseInt(listBoxControl.GetTopSpacersHeight())) && isTopSpacerVisible;
  var listHeight = this.GetListHeight();
  this.isScrolledToBottomSpacer = (scrollBottom >= listBoxControl.GetTopSpacersHeight() + listHeight) && isBottomSpacerVisible;
 },
 GetListHeight: function () {
  var listTable = this.listBoxControl.GetListTable();
  return listTable.clientHeight;
 },
 Reset: function(){
  this.ResetItemsRange();
  this.isScrolledToTopSpacer = false;
  this.isScrolledToBottomSpacer = false;
 },
 ResetItemsRange: function(){
  this.itemsRange = "";
 },
 RecalcItemsRangeForLoad: function(){
  if(this.listBoxControl.isCallbackMode) {
   if(this.isScrolledToTopSpacer || this.isScrolledToBottomSpacer)
    this.SetItemsRangeForLoad(this.isScrolledToTopSpacer);
  }
 },
 IsScrolledToTopSpacer: function(){
  return this.isScrolledToTopSpacer;
 },
 IsScrolledToBottomSpacer: function(){
  return this.isScrolledToBottomSpacer;
 },
 GetIsAnySpacerVisible: function(){
  return this.isScrolledToTopSpacer || this.isScrolledToBottomSpacer;
 },
 GetIsNeedCallback: function(){
  return !this.GetIsItemsRangeEmpty();
 },
 GetIsNeedToHideTopSpacer: function(){
  return this.isScrolledToTopSpacer && this.GetIsItemsRangeEmpty();
 },
 GetItemsRangeForLoad: function(){
  return (!this.GetIsItemsRangeEmpty() ? this.itemsRange : this.defaultItemsRange);
 },
 SetItemsRangeForLoad: function(isForTop){
  var listbox = this.listBoxControl;
  var beginIndex = isForTop ? 
   listbox.serverIndexOfFirstItem - listbox.callbackPageSize : 
   listbox.serverIndexOfFirstItem + listbox.GetItemCount();
  beginIndex = beginIndex < 0 ? 0 : beginIndex;
  var endIndex = isForTop ? 
   listbox.serverIndexOfFirstItem - 1 : 
   beginIndex + listbox.callbackPageSize - 1;
  this.itemsRange = beginIndex + ":" + endIndex;
  this.isScrolledToTopSpacer = isForTop;
  this.isScrolledToBottomSpacer = !isForTop;
 },
 GetIsItemsRangeEmpty: function(){
  return (this.itemsRange == "" || this.itemsRange == emptyItemsRange);
 }
});
var ASPxClientListBoxBase = ASPx.CreateClass(ASPxClientListEdit, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.APILockCount = 0;
  this.updateSelectAllElementsLockCount = 0;
  this.enableSyncOnPerfCallback = false;
  this.scrollOnKBNavigationLockCount = 0;
  this.isComboBoxList = false;
  this.isSyncEnabled = true;
  this.ownerName = "";
  this.selectionEventsLockCount = 0;
  this.syncLockCount = 0;
  this.encodeHtml = true;
  this.useCaseInsensitiveSearch = true;
  this.serializingHelper = null;
  this.deletedItems = [];
  this.insertedItems = [];
  this.itemsValue = [];
  this.ItemDoubleClick = new ASPxClientEvent();
  this.ItemClick = new ASPxClientEvent();
 },
 InlineInitialize: function () {
  ASPxClientListEdit.prototype.InlineInitialize.call(this);
  for(var i = 0; i < this.itemsValue.length; i++)
   this.itemsValue[i] = this.GetDecodeValue(this.itemsValue[i]);
 },
 LockScrollOnKBNavigation: function(){
  this.scrollOnKBNavigationLockCount++;
 },
 UnlockScrollOnKBNavigation: function(){
  this.scrollOnKBNavigationLockCount--;
 },
 IsScrollOnKBNavigationLocked: function() {
  return this.scrollOnKBNavigationLockCount > 0;
 },
 LockSelectionEvents: function(){
  this.selectionEventsLockCount++;
 },
 UnlockSelectionEvents: function(){
  this.selectionEventsLockCount--;
 },
 IsSelectionEventsLocked: function(){
  return this.selectionEventsLockCount > 0;
 },
 LockSynchronizationOnInternalCallback: function(){
  if(!this.enableSyncOnPerfCallback)
   this.LockSynchronization();
 },
 UnlockSynchronizationOnInternalCallback: function (){
  if(!this.enableSyncOnPerfCallback)
   this.UnlockSynchronization();
 },
 GetItemCount: function(){
  return 0;
 },
 GetItemValue: function(index){
  if(0 <= index && index < this.GetItemCount())
   return this.PrepareItemValue(this.itemsValue[index]);
  return null;
 },
 GetItemTexts: function(item) {
  return item.text;
 },
 PrepareItemValue: function(value) {
  return (typeof(value) == "string" && value == "" && this.convertEmptyStringToNull) ? null : value;
 },
 LoadItemsFromCallback: function(isToTop, itemStrings){
 },
 SetValue: function(value){
  var index = this.FindItemIndexByValue(value);
  this.SelectIndexSilentAndMakeVisible(index);
 },
 FindItemIndexByText: function(text){
  var transformText = function(text) { return text; };
  var textIsString = typeof(text) === "string";
  if(this.useCaseInsensitiveSearch && textIsString)
   transformText = function(text) { return text.toUpperCase(); };
  text = transformText(text);
  for(var i = 0; i < this.GetItemCount(); i ++){
   if(transformText(this.GetItem(i).text) == text)
    return i;
  }
  return -1;
 },
 SelectIndex: function (index){ 
  if(this.SelectIndexSilentAndMakeVisible(index, false)){
   this.RaisePersonalStandardValidation();
   this.OnValueChanged();
  }
 },
 SelectIndexSilentAndMakeVisible: function(index, lockScrollingToItem){
  var selectionChanged = this.SelectIndexSilent(index);
  if(!this.IsScrollOnKBNavigationLocked() && !lockScrollingToItem && selectionChanged)
   this.MakeItemVisible(index);
  return selectionChanged;
 },
 FormatText: function (texts) {
  return texts;
 },
 MakeItemVisible: function(index){
 },
 InitOnContainerMadeVisible: function(){
 },
 AddItem: function(texts, value, imageUrl) {
  return this.AddItemInternal(this.CreateItemProperties(texts, value, imageUrl));
 },
 AddItemInternal: function(itemProperties) {
  var index = this.GetItemCount();
  this.InsertItemInternal(index, itemProperties);
  if(!ASPx.IsExists(this.GetItem(index)))
   index = -1;
  return index;
 },
 InsertItem: function(index, texts, value, imageUrl) {
  this.InsertItemInternal(index, this.CreateItemProperties(texts, value, imageUrl));
 },
 CreateItemProperties: function(texts, value, imageUrl, htmlContent, cssClass, tooltip) {
  return {
   texts: texts,
   value: value,
   imageUrl: imageUrl,
   htmlContent: htmlContent,
   cssClass: cssClass,
   tooltip: tooltip
  };
 },
 InsertItemInternal: function(index, itemProperties) {
 },
 BeginUpdate: function(){
  this.APILockCount ++;
 },
 EndUpdate: function(){
  this.APILockCount --;
  this.Synchronize();
 },
 LockUpdateSelectAllElements: function() {
  this.updateSelectAllElementsLockCount++;
 },
 UnlockUpdateSelectAllElements: function () {
  this.updateSelectAllElementsLockCount--;
 },
 IsUpdateSelectAllElementsLocked: function() {
  return this.updateSelectAllElementsLockCount > 0;
 },
 ClearItems: function(){
  this.BeginUpdate();
  this.UpdateArraysItemsCleared();
  this.ClearItemsCore();
  this.EndUpdate();
 },
 ClearItemsCore: function(){
 },
 ClearItemsForPerformCallback: function(){
  this.itemsValue = [];
  this.ClearItemsCore();
 },
 RemoveItem: function(index){
 },
 FindItemByText: function(text){
  var index = this.FindItemIndexByText(text);
  return this.GetItem(index);
 },
 FindItemByValue: function(value){
  var index = this.FindItemIndexByValue(value);
  return this.GetItem(index);
 },
 PerformCallback: function(arg) {
 },
 GetCallbackArguments: function(){
  var args = this.GetCustomCallbackArg();
  args += this.GetLoadItemsRangeCallbackArg();
  if(this.filterStrategy)
   args += this.filterStrategy.GetCallbackArguments();
  return args;
 },
 GetLoadItemsRangeCallbackArg: function(){
  return this.GetLoadItemsRangeCallbackArgCore(this.GetItemsRangeForLoad());
 },
 GetLoadCustomItemsRangeCallbackArguments: function(beginIndex, endIndex, value) {
  var itemsRange = beginIndex + ":" + endIndex;
  if(ASPx.IsExists(value))
   itemsRange = itemsRange + ":" + ASPx.Json.ToJson(value);
  var args = this.GetCustomCallbackArg();
  args += this.GetLoadItemsRangeCallbackArgCore(itemsRange);
  return args;
 },
 GetLoadItemsRangeCallbackArgCore: function(itemsRange) {
  return this.FormatCallbackArg(CONSTANTS.CALLBACK_PREFIXES.LOAD_RANGE_ITEMS, itemsRange);
 },
 FormatCallbackArg: function(prefix, arg) { 
  arg = arg.toString();
  return (ASPx.IsExists(arg) ? prefix + "|" + arg.length + ';' + arg + ';' : "");
 },
 GetItemsRangeForLoad: function(){
  return emptyItemsRange;
 },
 GetCallbackOwnerControl: function(){
  if(this.ownerName && !this.ownerControl)
   this.ownerControl = ASPx.GetControlCollection().Get(this.ownerName);
  return this.ownerControl;
 },
 GetCustomCallbackArg: function(){
  return this.stateObject["CustomCallback"];
 },
 SetCustomCallbackArg: function(arg){
  this.UpdateStateObjectWithObject({ CustomCallback: arg });
 },
 FormatAndSetCustomCallbackArg: function(arg, onPerformCallback){
  arg = ASPx.IsExists(arg) ? arg.toString() : "";
  var formatArg = this.FormatCallbackArg(onPerformCallback ? CONSTANTS.CALLBACK_PREFIXES.CUSTOMPERFORM : CONSTANTS.CALLBACK_PREFIXES.CUSTOM, arg);
  this.SetCustomCallbackArg(formatArg);
 },
 SendCallback: function(){
 },
 LockSynchronization: function(){
  this.syncLockCount++;
 },
 UnlockSynchronization: function(){
  this.syncLockCount--;
 },
 IsSyncLocked: function(){
  return this.syncLockCount > 0;
 },
 IsSyncEnabled: function(){
  return this.isSyncEnabled && !this.IsSyncLocked();
 },
 RegisterInsertedItem: function(index, itemProperties){
  if(this.IsSyncEnabled()){
   this.RefreshSynchroArraysIndex(index, true);
   var item = this.CreateItem(index, itemProperties);
   this.insertedItems.push(item);
   this.Synchronize();
  }
 },
 CreateItem: function(index, itemProperties) {
  return new ASPxClientListBoxItem(this, index, itemProperties.texts || [itemProperties.text], itemProperties.value, itemProperties.imageUrl,
   itemProperties.selected, itemProperties.cellStyles, itemProperties.cellCssClasses, itemProperties.cellTooltips, itemProperties.cellAttributes, itemProperties.htmlContents,
   itemProperties.style, itemProperties.cssClass, itemProperties.tooltip, itemProperties.attributes, itemProperties.htmlContent);
 },
 UpdateSyncArraysItemDeleted: function(item, isValueRemovingRequired){
  if(isValueRemovingRequired)
   ASPx.Data.ArrayRemoveAt(this.itemsValue, item.index);
  if(this.IsSyncEnabled()){
   var index = this.FindItemInArray(this.insertedItems, item);
   if(index == -1){
    this.RefreshSynchroArraysIndex(item.index, false);
    this.deletedItems.push(item);
   } else {
    this.RefreshSynchroArraysIndex(item.index, false);
    ASPx.Data.ArrayRemoveAt(this.insertedItems, index);
   }
   this.Synchronize();
  }
 },
 UpdateArraysItemsCleared: function(){
  if(this.IsSyncEnabled()){
   for(var i = this.GetItemCount() - 1; i >= 0; i --)
    this.UpdateSyncArraysItemDeleted(this.GetItem(i), false);
  } 
  this.itemsValue = [];
 },
 RefreshSynchroArraysIndex: function(startIndex, isIncrease){
  this.RefreshSynchroArrayIndexIndex(this.deletedItems, startIndex, isIncrease);
  this.RefreshSynchroArrayIndexIndex(this.insertedItems, startIndex, isIncrease);
 },
 RefreshSynchroArrayIndexIndex: function(array, startIndex, isIncrease){
  var delta = isIncrease ? 1 : -1;
  for(var i = 0; i < array.length; i ++){
   if(array[i].index >= startIndex)
    array[i].index += delta;
  }   
 },
 FindItemInArray: function(array, item){
  for(var i = array.length - 1; i >= 0; i--){
   var currentItem = array[i];
   if((!this.encodeHtml || currentItem.text == item.text) && currentItem.value == item.value &&
    currentItem.imageUrl == item.imageUrl)
    break;
  }
  return i;
 },
 Synchronize: function(){
  if(this.APILockCount == 0){
   if(this.IsSyncEnabled()){
    this.SynchronizeItems(this.deletedItems, "DeletedItems");
    this.SynchronizeItems(this.insertedItems, "InsertedItems");
   }
   this.CorrectSizeByTimer();
  }
 },
 CorrectSizeByTimer: function(){
 },
 SynchronizeItems: function(items, syncType){
  var itemsObj = { };
  itemsObj[syncType] = this.SerializeItems(items);
  this.UpdateStateObjectWithObject(itemsObj);
 },
 GetSerializingHelper: function(){ 
  if(this.serializingHelper == null)
   this.serializingHelper = this.CreateSerializingHelper();
  return this.serializingHelper;
 },
 CreateSerializingHelper: function(){
  return new ListBoxBaseItemsSerializingHelper(this);
 },
 SerializeItems: function(items){
  var serialiser = this.GetSerializingHelper();
  return serialiser.SerializeItems(items);
 },
 DeserializeItems: function(items) {
  return items.map(function(itemProperties, index) {
   return this.CreateItem(index, itemProperties);
  }.bind(this));
 }
});
var ListBoxBaseItemsSerializingHelper = ASPx.CreateClass(null, {
 constructor: function(listBoxControl) {
  this.listBoxControl = listBoxControl;
  this.startPos = 0;
 },
 SerializeItems: function(items){
  var sb = [ ];
  for(var i = 0; i < items.length; i++)
   this.SerializeItem(sb, items[i]);
  return sb.join("");
 },
 SerializeItem: function(sb, item) {
  if(!item)
   return;
  this.SerializeAtomValue(sb, item.index);
  this.SerializeAtomValue(sb, item.value);
  this.SerializeAtomValue(sb, item.imageUrl);
  var texts = this.listBoxControl.GetItemTexts(item);
  if(typeof(texts) == "string")
   this.SerializeAtomValue(sb, texts);
  else {
   for(var i = 0; i < texts.length; i++)
    this.SerializeAtomValue(sb, texts[i]);
  }
 },
 SerializeAtomValue: function(sb, value) {
  var valueStr = ASPx.IsExists(value) ? value.toString() : "";
  sb.push(valueStr.length);
  sb.push('|');
  sb.push(valueStr);
 },
 ParseItemIndex: function(serializedItem){
  return parseInt(this.ParseString(serializedItem));
 },
 ParseItemValue: function(serializedItem){
  return this.ParseString(serializedItem);
 },
 ParseString: function(str){
  var indexOfSeparator = str.indexOf(serializingSeparator, this.startPos);
  var strLength = parseInt(str.substring(this.startPos, indexOfSeparator));
  var strStartPos = indexOfSeparator + serializingSeparatorLength;
  this.startPos = strStartPos + strLength;
  return str.substring(strStartPos, strStartPos + strLength);
 },
 ParseTexts: function(serializedItems){
  return this.ParseString(serializedItems);
 },
 DeserializeValues: function(serializedValues){
  var deserializedValues = [];
  this.startPos = 0;
  while(this.startPos < serializedValues.length){
   deserializedValues.push(this.ParseItemValue(serializedValues));
  }
  return deserializedValues;
 }
});
var ListBoxItemsSerializingHelper = ASPx.CreateClass(ListBoxBaseItemsSerializingHelper, {
 constructor: function(listBoxControl) {
  this.constructor.prototype.constructor.call(this, listBoxControl);
 },
 ParseTexts: function(serializedItems){
  var textColumnCount = this.listBoxControl.GetItemTextCellCount();
  return (textColumnCount > 1) ? this.DeserializeItemTexts(serializedItems, textColumnCount) 
   : ListBoxBaseItemsSerializingHelper.prototype.ParseTexts.call(this, serializedItems);
 },
 DeserializeItemTexts: function(serializedItem, textColumnCount){
  var texts = [];
  for(var i = 0; i < textColumnCount; i++)
   texts.push(this.ParseString(serializedItem));
  return texts;
 }
});
var ListBoxSingleSelectionHelper = ASPx.CreateClass(null, {
 constructor: function(listBoxControl) {
  this.listBoxControl = listBoxControl;
  this.savedSelectedIndex = listBoxControl.savedSelectedIndex;
  this.updateHiddenInputsLockCount = 0;
  this.cachedSelectionChangedArgs = [];
 },
 ClearSelection: function(){
  this.SetSelectedIndexCore(-1);
  this.OnSelectionCleared();
 },
 OnSelectionCleared: function(){
  this.cachedSelectionChangedArgs = [];
 },
 GetSelectedIndexInternal: function(){
  return this.savedSelectedIndex;
 }, 
 SetSelectedIndexInternal: function(index){
  this.savedSelectedIndex = index;
 }, 
 SetSelectedIndexCore: function(index){
  if(index != this.savedSelectedIndex && -1 <= index && index < this.GetItemCount()){
   this.BeginSelectionUpdate();
   this.SetSelectedIndexInternal(index);
   this.EndSelectionUpdate();
   return true;
  }
  return false;
 },
 GetSelectedIndex: function(){
  return this.GetSelectedIndexInternal();
 },
 SetSelectedIndex: function(index){
  this.ChangeSelectedItem(index);
  this.SetSelectedIndexCore(index);
  this.OnItemSelectionChanged(index, true);
 },
 GetSelectedIndices: function(){ 
  var selectedIndex = this.GetSelectedIndexInternal();
  return selectedIndex != -1 ? [selectedIndex] : [];
 },
 GetSelectedValues: function(){ 
  var selectedValue =  this.listBoxControl.GetValue();
  return selectedValue != null ? [selectedValue] : [];
 },
 GetSelectedItems: function(){ 
  var selectedItem = this.listBoxControl.GetSelectedItem();
  return selectedItem != null? [selectedItem] : [];
 },
 SelectIndices: function(indices){},
 SelectItems: function(items){},
 SelectValues: function(values){},
 UnselectIndices: function (selected) { this.SetSelectedIndex(-1); },
 UnselectItems: function(items){},
 UnselectValues: function(values){},
 GetIsItemSelected: function(index){ return index == this.GetSelectedIndexInternal(); },
 ResetSelectionCollectionsCache: function(){ },
 OnItemClick: function(index, evt){
  var selected = true;
  this.BeginSelectionUpdate();
  this.ChangeSelectedItem(index);
  var selectedIndexChanged = this.SetSelectedIndexCore(index);
  this.EndSelectionUpdate();
  if(selectedIndexChanged)
   this.OnItemSelectionChanged(index, selected);
 },
 ChangeSelectedItem: function(newSelectedIndex){
  var selected = true;
  var oldSelectedIndex = this.GetSelectedIndexInternal();
  this.BeginSelectionUpdate();
  this.SetItemSelectionState(oldSelectedIndex, !selected);
  this.SetItemSelectionState(newSelectedIndex, selected);
  this.EndSelectionUpdate();
 },
 SetItemSelectionState: function (itemIndex, selected, controller) {
  this.BeginSelectionUpdate();
  this.listBoxControl.SetItemSelectionAppearance(itemIndex, selected, controller, true);
  this.EndSelectionUpdate();
 },
 GetFocusedIndex: function(){
  return this.GetSelectedIndexInternal();
 },
 BeginSelectionUpdate: function(){
  this.updateHiddenInputsLockCount++;
 },
 EndSelectionUpdate: function(){
  this.updateHiddenInputsLockCount--;
  if(!this.IsUpdateInternalSelectionStateLocked()){
   this.listBoxControl.UpdateInternalState();
   this.FlushSelectionChanged();
  }
 },
 IsUpdateInternalSelectionStateLocked: function(){
  return this.updateHiddenInputsLockCount > 0;
 },
 GetItemCount: function(){
  return this.listBoxControl.GetItemCount();
 },
 OnItemSelectionChanged: function(index, selected){
  if(this.IsUpdateInternalSelectionStateLocked()){
   var a = {Index: index, Selected: selected};
   this.cachedSelectionChangedArgs.push(a);
  }
  else 
   this.listBoxControl.OnItemSelectionChanged(index, selected);
 },
 FlushSelectionChanged: function(){
  if(this.IsUpdateInternalSelectionStateLocked()) 
   return;
  for(var i = 0; i < this.cachedSelectionChangedArgs.length; i++)
   this.listBoxControl.OnItemSelectionChanged(this.cachedSelectionChangedArgs[i].Index, this.cachedSelectionChangedArgs[i].Selected);
  this.cachedSelectionChangedArgs = [];
 },
 OnItemInserted: function(index){
  if(index <= this.savedSelectedIndex && this.savedSelectedIndex != -1)
   this.SetSelectedIndexInternal(this.savedSelectedIndex + 1);
 },
 OnItemRemoved: function(index){
  if(index < this.savedSelectedIndex)
   this.SetSelectedIndexInternal( this.savedSelectedIndex - 1);
  else if(index == this.savedSelectedIndex)
   this.SetSelectedIndexInternal(-1);
 },
 OnItemsCleared: function(){
  this.ClearSelection();
 }
});
var ListBoxMultiSelectionHelper = ASPx.CreateClass(ListBoxSingleSelectionHelper, {
 constructor: function(listBoxControl) {
  this.constructor.prototype.constructor.call(this, listBoxControl);
  this.selectedValuesCache = [];
  this.selectedItemsCache = [];
  this.savedSelectedIndices = [];
  this.selectedIndicesSortingRequired = false;
  this.focusedIndex = -1;
  this.lastIndexFocusedWithoutShift = -1;
 },
 SetSelectedIndex: function(index){
  this.SingleIndexSelection(index);
 },
 SetSelectedIndexCore: function(index){
  ListBoxSingleSelectionHelper.prototype.SetSelectedIndexCore.call(this, index);
  this.updateSelectAllElementsState();
 },
 updateSelectAllElementsState: function() {
  this.listBoxControl.updateSelectAllElementsState();
 },
 ResetSelectionCollectionsCache: function(){
  this.selectedIndicesSortingRequired = true;
  this.selectedItemsCache = [];
  this.selectedValuesCache = [];
 },
 GetSelectedIndices: function(){
  return this.GetSortedSelectedIndices().slice();
 },
 GetSortedSelectedIndices: function() {
  if(this.savedSelectedIndices.length > 1 && this.selectedIndicesSortingRequired)
   this.SortSelectedIndices();
  return this.savedSelectedIndices;
 },
 GetSelectedValues: function(){ 
  if(this.savedSelectedIndices.length == 0)
   return [];
  if(this.selectedValuesCache.length == 0)
   this.selectedValuesCache = this.GetSelectedValuesCore();
  return this.selectedValuesCache;
 },
 GetSelectedValuesCore: function(){
  var selectedValues = [];
  var selectedIndices = this.GetSortedSelectedIndices();
  if(selectedIndices.length == 0)
   return selectedValues;
  for(var i = 0; i < selectedIndices.length; i++)
   selectedValues.push(this.listBoxControl.GetItemValue([selectedIndices[i]]));
  return selectedValues;
 },
 GetSelectedItems: function(){
  if(this.savedSelectedIndices.length == 0)
   return [];
  if(this.selectedItemsCache.length == 0)
   this.selectedItemsCache = this.GetSelectedItemsCore();
  return this.selectedItemsCache;
 },
 GetSelectedItemsCore: function(){
  var selectedItems = [];
  for(var i = 0; i < this.savedSelectedIndices.length; i++)
   selectedItems.push(this.listBoxControl.GetItem(this.savedSelectedIndices[i]));
  return selectedItems;
 },
 SetIndicesSelectionState: function(indices, selected){
  this.BeginSelectionUpdate();
  var controller = typeof(ASPx.GetStateController) != "undefined" ? ASPx.GetStateController() : null;
  if(indices){
   var itemCount = this.listBoxControl.GetItemCount();
   for(var i = 0; i < indices.length; i++) {
    var index = indices[i];
    if(index >= 0 && index < itemCount)
     this.SetItemSelectionState(indices[i], selected, controller);
   }
  } else if(this.IsClientFilterApplied())
   this.SetAllFilteredItemsSelectionState(selected, controller);
  else
   this.SetAllItemsSelectionState(selected, controller);
  this.SetSelectedIndexCore(this.GetFirstSelectedIndex());
  this.EndSelectionUpdate();
 },
 IsClientFilterApplied: function() {
  return this.listBoxControl.IsClientFilterApplied();
 },
 SetAllFilteredItemsSelectionState: function (selected, controller) {
  for (var i = 0; i < this.listBoxControl.GetItemCount() ; i++) {
   if (this.listBoxControl.IsItemFiltered && !this.listBoxControl.IsItemFiltered(i))
    continue;
   this.SetItemSelectionState(i, selected, controller);
  }
 },
 SetItemsSelectionState: function(items, selected){
  var indices = items ? this.ConvertItemsToIndices(items) : null;
  this.SetIndicesSelectionState(indices, selected);
 },
 SetValuesSelectionState: function(values, selected){
  var indices = values ? this.ConvertValuesToIndices(values)  : null;
  this.SetIndicesSelectionState(indices, selected);
 },
 ConvertValuesToIndices: function(values){
  var indices = [];
  for(var i = 0; i < values.length; i++)
   indices.push(this.listBoxControl.FindItemIndexByValue(values[i]));
  return indices;
 },
 ConvertItemsToIndices: function(items){
  var indices = [];
  for(var i = 0; i < items.length; i++)
   indices.push(items[i].index);
  return indices;
 },
 SelectIndices: function(indices){
  this.SetIndicesSelectionState(indices, true);
 },
 SelectItems: function(items){
  this.SetItemsSelectionState(items, true);
 },
 SelectValues: function(values){
  this.SetValuesSelectionState(values, true);
 },
 UnselectIndices: function(indices){
  this.SetIndicesSelectionState(indices, false);
 },
 UnselectItems: function(items){
  this.SetItemsSelectionState(items, false);
 },
 UnselectValues: function(values){
  this.SetValuesSelectionState(values, false);  
 },
 GetIsItemSelected: function(index){ 
  return ASPx.Data.ArrayBinarySearch(this.GetSortedSelectedIndices(), index) > -1;
 },
 OnItemClick: function(index, evt){
  this.BeginSelectionUpdate();
  var ctrlKey = evt.ctrlKey || evt.metaKey;
  var shift = evt.shiftKey;
  if(ctrlKey)
   this.AddSelectedIndex(index);
  else if(shift){
   var startIndex = index > this.lastIndexFocusedWithoutShift ? this.lastIndexFocusedWithoutShift + 1 : index;
   var endIndex = index > this.lastIndexFocusedWithoutShift ? index : this.lastIndexFocusedWithoutShift - 1;
   this.SelectRangeIndicesOnly(startIndex, endIndex);
   this.SetFocusedIndexInternal(index, true);
  }else 
   this.SingleIndexSelection(index);
  this.EndSelectionUpdate();
 },
 OnItemCheckBoxClick: function(index, evt){
  this.BeginSelectionUpdate();
  this.AddSelectedIndex(index);
  this.EndSelectionUpdate();
 },
 AddSelectedIndex: function(index){
  this.SetFocusedIndexInternal(index, false);
  var indexInSelectedIndices = ASPx.Data.ArrayIndexOf(this.savedSelectedIndices, index);
  var selectionOperation = indexInSelectedIndices == -1;
  this.SetItemSelectionState(index, selectionOperation);
  this.SetSelectedIndexCore(this.GetFirstSelectedIndex());
 },
 SelectRangeIndicesOnly: function(startIndex, endIndex){
  this.BeginSelectionUpdate();
  var controller = typeof(ASPx.GetStateController) != "undefined" ? ASPx.GetStateController() : null;
  var itemCount = this.GetItemCount();
  for(var i = 0; i < itemCount; i ++) {
   if(i == this.lastIndexFocusedWithoutShift) 
    continue;
   if(startIndex !== endIndex && this.listBoxControl.IsItemFiltered && !this.listBoxControl.IsItemFiltered(i))
    continue;
   this.SetItemSelectionState(i, i >= startIndex && i <= endIndex, controller);
  }
  this.SetSelectedIndexCore(this.GetFirstSelectedIndex());
  this.EndSelectionUpdate();
 },
 SingleIndexSelection: function(index){
  this.SetFocusedIndexInternal(-1, false);
  this.SelectRangeIndicesOnly(index, index);
  this.SetFocusedIndexInternal(index, false);
 },
 SetAllItemsSelectionState: function(selected, controller){
  this.BeginSelectionUpdate();
  this.savedSelectedIndices = [ ];
  var itemCount = this.GetItemCount();
  for (var i = 0; i < itemCount; i++) {
   this.SetItemSelectionStateCore(i, selected, controller);
   if(selected)
    this.PushSelectedIndex(i);
   this.OnItemSelectionChanged(i, selected);
  }
  this.ResetSelectionCollectionsCache();
  this.EndSelectionUpdate();
 },
 SetItemSelectionState: function(itemIndex, selected, controller){
  this.SetItemSelectionStateCore(itemIndex, selected, controller);
  this.ResetSelectionCollectionsCache();
  var indexInSelectionArray = this.savedSelectedIndices.indexOf(itemIndex);
  if(selected && indexInSelectionArray == -1){
   this.PushSelectedIndex(itemIndex);
   this.OnItemSelectionChanged(itemIndex, true);
  }
  if(!selected && indexInSelectionArray != -1){
   this.RemoveSelectedIndexAt(indexInSelectionArray);
   this.OnItemSelectionChanged(itemIndex, false);
  }
 },
 GetFirstSelectedIndex: function(){
  var selectedIndices = this.GetSelectedIndices();
  var selectedIndicesCount = selectedIndices.length;
  var firstSelectedIndex = -1;
  if(selectedIndicesCount > 0){
   firstSelectedIndex = selectedIndices[0];
   for(var i = 1; i < selectedIndices.length; i++){
    if(firstSelectedIndex > selectedIndices[i])
     firstSelectedIndex = selectedIndices[i];
   }
  }
  return firstSelectedIndex;
 },
 PushSelectedIndex: function(index){
  this.savedSelectedIndices.push(index);
 },
 RemoveSelectedIndex: function(index){
  ASPx.Data.ArrayRemove(this.savedSelectedIndices, index);
 },
 RemoveSelectedIndexAt: function(indexInArray){
  ASPx.Data.ArrayRemoveAt(this.savedSelectedIndices, indexInArray);
 },
 SortSelectedIndices: function(){
  ASPx.Data.ArrayIntegerAscendingSort(this.savedSelectedIndices);
  this.selectedIndicesSortingRequired = false;
 },
 SetItemSelectionStateCore: function(itemIndex, selected, controller){
  ListBoxSingleSelectionHelper.prototype.SetItemSelectionState.call(this, itemIndex, selected, controller);
 },
 GetFocusedIndex: function(){
  return this.focusedIndex;
 },
 SetFocusedIndexInternal: function(index, isShiftPressed){
  if(!isShiftPressed)
   this.lastIndexFocusedWithoutShift = index;
  this.focusedIndex = index;
 },
 OnItemInserted: function(index){
  this.ResetSelectionCollectionsCache();
  ListBoxSingleSelectionHelper.prototype.OnItemInserted.call(this, index);
  if(this.focusedIndex >= index)
   this.focusedIndex ++;
  for(var i = 0; i < this.savedSelectedIndices.length; i++){
   if(this.savedSelectedIndices[i] >= index)
    this.savedSelectedIndices[i]++;
  }
  this.updateSelectAllElementsState();
 },
 OnItemRemoved: function(index){
  this.ResetSelectionCollectionsCache();
  ListBoxSingleSelectionHelper.prototype.OnItemRemoved.call(this, index);
  if(this.focusedIndex == index)
   this.focusedIndex = -1;
  else if(this.focusedIndex > index)
   this.focusedIndex --;
  if(this.GetIsItemSelected(index))
   this.RemoveSelectedIndex(index);
  for(var i = 0; i < this.savedSelectedIndices.length; i++){
   if(this.savedSelectedIndices[i] > index)
    this.savedSelectedIndices[i]--;
  }
  if(this.GetSelectedIndex() == -1)
   this.SetSelectedIndexCore(this.GetFirstSelectedIndex());
  this.updateSelectAllElementsState();
 },
 ClearSelection: function(){
  this.ResetSelectionCollectionsCache();
  ASPx.Data.ArrayClear(this.savedSelectedIndices);
  this.OnSelectionCleared();
  this.SetSelectedIndexCore(-1);
 }
});
var CheckBoxListMultiSelectionHelper = ASPx.CreateClass(ListBoxMultiSelectionHelper, {
 OnItemClick: function(index){
  this.BeginSelectionUpdate();
  this.AddSelectedIndex(index);
  this.EndSelectionUpdate();
 },
 GetFocusedItemIndex: function(){
  return this.lastIndexFocusedWithoutShift;
 },
 updateSelectAllElementsState: function () { },
 IsClientFilterApplied: function() { return false; }
});
var ListBoxCheckSelectionHelper = ASPx.CreateClass(ListBoxMultiSelectionHelper, {
 OnItemClick: function(index, evt){
  this.BeginSelectionUpdate();
  if(evt.shiftKey)
   ListBoxMultiSelectionHelper.prototype.OnItemClick.call(this, index, evt);
  else
   this.AddSelectedIndex(index);
  this.EndSelectionUpdate();
 }
});
var ASPxClientListBox = ASPx.CreateClass(ASPxClientListBoxBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.freeUniqIndex = -1;
  this.isHasFakeRow = false;
  this.headerDiv = null;
  this.headerTable = null;
  this.listTable = null;
  this.sampleItemFirstTextCell = null;
  this.width = "";
  this.defaultHeight = "";
  this.hasSampleItem = false;
  this.hoverClasses = [""];
  this.hoverCssArray = [""];
  this.selectAllHoverClasses = [""];
  this.selectAllHoverCssArray = [""];
  this.selectAllDisabledClasses = [""];
  this.selectAllDisabledCssArray = [""];
  this.selectedClasses = [""];
  this.selectedCssArray = [""];
  this.disabledClasses = [""];
  this.disabledCssArray = [""];
  this.imageCellExists = false;
  this.scrollHandlerLockCount = 0;
  this.columnFieldNames = [];
  this.textFormatString = "";
  this.nullValueItemDisplayText = null;
  this.defaultImageUrl = "";
  this.selectionMode = 0;
  this.initSelectedIndices = [];
  this.itemHorizontalAlign = "";
  this.emptyTextRowCellIndices = null;
  this.accessibilityHelper = null;
  this.accessibilityHelperID = "";
  this.allowMultipleCallbacks = false;
  this.isCallbackMode = false;
  this.callbackPageSize = -1;
  this.isTopSpacerVisible = false;
  this.isBottomSpacerVisible = false;
  this.serverIndexOfFirstItem = 0;
  this.scrollHelper = null;
  this.changeSelectAfterCallback = 0;
  this.ownerControl = null;
  this.SampleItem = null;
  this.sampleHeaderRow = null;
  this.scrollDivElement = null;
  this.scrollPageSize = 4;
  this.itemsValue = [];
  this.cachedValue = null;
  this.tempCache = new ListBoxTemporaryCache();
  this.sizingConfig.adjustControl = true;
  this.disableScrolling = false;
  this.icbFocusedStyle = null;
  this.icbImageProperties = null;
  this.internalCheckBoxCollection = null;
  this.focusableCheckInput = null;
  this.nativeCheckOnFocusHandler = null;
  this.enableSelectAll = false;
  this.enableFiltering = false;
  this.filteringDelay = 100;
  this.filterMinLength = 1;
  this.filterTimerID = -1;
  this.customFilteringEditorID = "";
  this.filteringTextBox = null;
  this.filteringTextBoxInput = null;
  this.showFilterButtonInput = null;
  this.highlighting = this.CreateHighlightingHelper();
  this.hasDecoratedItems = false;
  this.scrollDivMinWidth = 0;
  this.ItemFiltering = new ASPxClientEvent();
  this.CustomHighlighting = new ASPxClientEvent();
 },
 Initialize: function() {   
  this.LockScrollHandler();
  this.InitScrollPos();
  if(ASPx.Browser.WebKitTouchUI && !this.disableScrolling)
   ASPx.TouchUIHelper.MakeScrollable(this.GetScrollDivElement(), {showHorizontalScrollbar: false});
  this.CreateInternalCheckBoxCollection();
  this.InitSelection();
  if(!this.isComboBoxList)
   this.AdjustControlCore();
  this.InitializeLoadOnDemand();
  this.UnlockScrollHandler();
  if(!this.HasVirtualScrolling())
   this.freeUniqIndex = this.GetItemCount();
  ASPxClientEdit.prototype.Initialize.call(this);
  if(this.NeedUnfocusableScrollDivElement())
   ASPx.Attr.SetAttribute(this.GetScrollDivElement(), "tabIndex", "-1");
  this.EnsureFilteringElements();
 },
 InitDXTextAttributes: function(){
  if(this.emptyTextRowCellIndices != null){
   var itemWithDXTextCount = this.emptyTextRowCellIndices.length;
   for(var i = 0; i < itemWithDXTextCount; i++){
    var itemIndex = this.emptyTextRowCellIndices[i][0];
    var cellIndices = this.emptyTextRowCellIndices[i][1];
    var itemRow = this.GetItemRow(itemIndex);
    if(!itemRow) continue;
    for(var j = 0; j < cellIndices.length; j++){
     ASPx.Attr.SetAttribute(itemRow.cells[cellIndices[j]], "DXText", "");
    }
   }
  }
 },
 InitSelection: function(){
  var valueFromLastTime = this.GetValueFromValueInput();
  if(this.MultiSelectionMode()){
   if(valueFromLastTime != ""){
    var serialiser = this.GetSerializingHelper();
    var selectedValuesFromLastTime = serialiser.DeserializeValues(valueFromLastTime);
    var selectedIdicesFromLastTime = [];
    for(var i = 0; i < selectedValuesFromLastTime.length; i++)
     selectedIdicesFromLastTime.push(this.FindItemIndexByValue(selectedValuesFromLastTime[i]));
    this.SelectIndices(selectedIdicesFromLastTime);
   } else
    this.SelectIndices(this.initSelectedIndices);
  } else {
   var selectedIndex = (valueFromLastTime != "") ? 
    this.FindItemIndexByValue(valueFromLastTime) : this.GetSelectedIndexInternal();
   this.SetSelectedIndexInternal(selectedIndex);
   this.SelectIndexSilent(selectedIndex);
   this.GetItemSelectionHelper().SetSelectedIndexInternal(selectedIndex);
  }
  this.CacheValue();
 },
 BeginUpdate: function() {
  ASPxClientListBoxBase.prototype.BeginUpdate.call(this);
  if(this.isInitialized)
   this.itemsManager.BeginUpdate();
 },
 EndUpdate: function() {
  ASPxClientListBoxBase.prototype.EndUpdate.call(this);
  if(this.isInitialized)
   this.itemsManager.EndUpdate();
 },
 GetShowFilterButton: function() {
  return ASPx.GetControlCollection().Get(this.name + "_" + showFilterButtonID);
 },
 GetAccessibilityHelper: function() {
  var result = null;
  if(this.accessibilityCompliant) {
   if(!this.accessibilityHelper) {
    this.accessibilityHelper = new AccessibilityHelperListBox(this);
   }
   result = this.accessibilityHelper;
  }
  return result;
 },
 CreateHighlightingHelper: function() {
  return new ASPx.ListBoxHighlightingHelper(this, "em");
 },
 CreateInternalCheckBoxCollection: function() {
  if(this.IsNativeCheckBoxes() || this.internalCheckBoxCollection)
   return;
  this.internalCheckBoxCollection = new ASPx.CheckBoxInternalCollection(this.icbImageProperties, false, false, null, true, this.accessibilityCompliant);
  this.itemsManager.InitializeInternalCheckBoxCollection();
 },
 AddInternalCheckBoxToCollection: function(index) {
  if(!this.internalCheckBoxCollection)
   return;
  var enabled = this.GetEnabled();
  var changeEventMethod = ASPx.Attr.ChangeEventsMethod(enabled);
  this.AddInternalCheckBoxToCollectionCore(index, enabled, changeEventMethod);
 },
 AddInternalCheckBoxToCollectionCore: function(index, enabled, changeEventMethod) {
  var inputElement = this.GetItemCheckBoxInput(index);
  if(inputElement) {
   var internalCheckBox = this.internalCheckBoxCollection.Add(this.GetInternalCheckBoxKey(index), inputElement);
   internalCheckBox.CreateFocusDecoration(this.icbFocusedStyle);
   internalCheckBox.SetEnabled(enabled);
   internalCheckBox.autoSwitchEnabled = false;
   var checkBoxFocusableElement = this.GetCheckBoxFocusableElement(index);
   this.ChangeSpecialInputEnabledAttributes(checkBoxFocusableElement, changeEventMethod, true);
   if(this.accessibilityCompliant) {
    this.SetupCheckBoxAccessibilityAttributes(checkBoxFocusableElement, index);
   }
   internalCheckBox.CheckedChanged.AddHandler(
    function(s, e) {
     if(ASPx.Evt.GetKeyCode(e) == ASPx.Key.Space) {
      var element = ASPx.Evt.GetEventSource(e);
      this.GetItemSelectionHelper().OnItemCheckBoxClick(this.FindInternalCheckBoxIndex(element), e);
     }
    }.aspxBind(this)
   );
   internalCheckBox.Focus.AddHandler(
    function(s, e) {
     var index = this.FindInternalCheckBoxIndex(s.mainElement);
     window.setTimeout(function() { this.MakeItemVisible(index); }.aspxBind(this),50);
    }.aspxBind(this)
   );
  }
 },
 SetupCheckBoxAccessibilityAttributes: function(checkBox, index) {
  if(index !== -1) { 
   ASPx.Attr.SetAttribute(checkBox, "aria-label", this.GetAccessibilityHelper().getTextForScreenReader(this.GetItem(index)));
  }
 },
 ClearInternalCheckBoxCollection: function() {
  if(this.internalCheckBoxCollection)
   this.internalCheckBoxCollection.Clear();
 },
 RemoveInternalCheckBoxFromCollecntion: function(index) {
  if(this.internalCheckBoxCollection)
   this.internalCheckBoxCollection.Remove(this.GetInternalCheckBoxKey(index));
 },
 GetInternalCheckBoxKey: function(index) {
  return this.name + nameSeparator + this.GetItemValue(index);
 },
 GetInternalCheckBox: function (index) {
  if(this.internalCheckBoxCollection == null)
   this.CreateInternalCheckBoxCollection();
  if(this.internalCheckBoxCollection)
   return this.internalCheckBoxCollection.Get(this.GetInternalCheckBoxKey(index));
  return null;
 },
 IsNativeCheckBoxes: function() {
  return !this.icbImageProperties;
 },
 SetCheckBoxChecked: function(index, checked) {
  var checkBox = this.IsNativeCheckBoxes() ? this.GetItemCheckBoxInput(index) : this.GetInternalCheckBox(index);
  if(checkBox)
   this.SetCheckBoxCheckedCore(checkBox, checked);
  if(this.accessibilityCompliant) {
   setTimeout(function() { this.GetAccessibilityHelper().SetCheckBoxesValidationAttributes(); }.bind(this), 0);
  }
 },
 SetCheckBoxCheckedCore: function (checkBox, checked) {
  if(this.IsNativeCheckBoxes())
   checkBox.checked = checked;
  else
   checkBox.SetValue(checked ? ASPx.CheckBoxInputKey.Checked : ASPx.CheckBoxInputKey.Unchecked);
 },
 SetCheckBoxEnabled: function (index, enabled) {
  var checkBox = this.IsNativeCheckBoxes() ? this.GetItemCheckBoxInput(index) : this.GetInternalCheckBox(index);
  if (checkBox)
   this.SetCheckBoxEnabledCore(checkBox, enabled);
 },
 SetCheckBoxEnabledCore: function (checkbox, enabled) {
  if (this.IsNativeCheckBoxes()) {
   checkbox.disabled = !enabled;
   this.ChangeNativeCheckEnabledAttributes(checkbox, ASPx.Attr.ChangeEventsMethod(this.GetEnabled()));
  }
  else
   checkbox.SetEnabled(enabled);
  this.ChangeSpecialInputEnabledAttributes(this.IsNativeCheckBoxes() ?
   checkbox : checkbox.inputElement, ASPx.Attr.ChangeEventsMethod(enabled));
 },
 ClearItems: function() {
  ASPxClientListBoxBase.prototype.ClearItems.call(this);
  this.ClearInternalCheckBoxCollection();
  this.freeUniqIndex = this.GetItemCount();
 },
 OnDelayedSpecialFocusMouseDown: function (evt) {
  if(this.filteringTextBox) {
   var isEventFromFilteringTextBox = ASPx.Evt.GetEventSource(evt) == this.filteringTextBox.GetInputElement();
   this.filteringTextBoxInput = isEventFromFilteringTextBox ? this.filteringTextBox.GetInputElement() : null;
  }
  if(this.showFilterButton) {
   var isEventFromShowFilterButton = ASPx.GetIsParent(this.showFilterButton.GetMainElement(), ASPx.Evt.GetEventSource(evt));
   this.showFilterButtonInput = isEventFromShowFilterButton ? this.showFilterButton.GetInternalButton() : null;
   this.isFilterEditorShowing = isEventFromShowFilterButton;
  }
  if(this.GetIsCheckColumnExists())
   this.SetFocusableCheckInput(this.GetCheckBoxInputFromEvent(evt));
  ASPxClientListBoxBase.prototype.OnDelayedSpecialFocusMouseDown.call(this, evt);
  var shiftPressed = evt.shiftKey;
  var ctrlKey = evt.ctrlKey || evt.metaKey;
  if(shiftPressed || ctrlKey)
   ASPx.Selection.Clear();
 },
 GetCheckBoxInputFromEvent: function(evt) {
  var element = ASPx.Evt.GetEventSource(evt);
  if(this.IsNativeCheckBoxes())
   return element.type == "checkbox" ? element : null;
  var index = this.FindInternalCheckBoxIndex(element);
  if(index > -1)
   return this.GetCheckBoxFocusableElement(index);
  else if(this.IsSelectAllCheckBoxClicked(element))
   return this.GetSelectAllCheckBoxFocusableElement();
  return null;
 },
 IsSelectAllCheckBoxClicked: function(eventSource) {
  return this.selectAllCheckBox && ASPx.GetIsParent(this.selectAllCheckBox.container, eventSource)
   && (eventSource == this.selectAllCheckBox.mainElement || eventSource.tagName == "LABEL");
 },
 IsNativeSelectAllCheckBoxClicked: function (eventSource) {
  return this.nativeSelectAllCheckBox && ASPx.GetIsParent(this.nativeSelectAllCheckBox, eventSource);
 },
 GetSelectAllClickableElement: function() {
  return this.IsMultiColumn() ? this.selectAllMainElement.parentNode : this.selectAllMainElement;
 },
 GetSelectAllCheckBoxFocusableElement: function() {
  return this.accessibilityCompliant ? this.selectAllCheckBox.mainElement : this.selectAllCheckBox.inputElement;
 },
 GetCheckBoxFocusableElement: function(index) {
  var internalCheckBox = this.GetInternalCheckBox(index);
  if(!internalCheckBox)
   return null;
  return this.accessibilityCompliant ? internalCheckBox.mainElement : internalCheckBox.inputElement;
 },
 FindInternalCheckBoxIndex: function(element) {
  var level = 5;
  while(level > 0) {
   var id = element.id;
   if(id && element.tagName == "TD" && id.slice(-1) == lbIPostfixes[0])
    return this.GetItemIndexByRow(element.parentNode);
   element = element.parentNode;
   level--;
  }
  return -1;
 },
 IsCheckBoxClicked: function(evt) {
  return !!this.GetCheckBoxInputFromEvent(evt);
 },
 GetFocusableInputElement: function() {
  return this.showFilterButtonInput || this.filteringTextBoxInput || this.focusableCheckInput || this.GetInputElement();
 },
 IsElementBelongToInputElement: function (element) {
  return ASPxClientEdit.prototype.IsElementBelongToInputElement.call(this, element)
  || this.filteringTextBox && this.filteringTextBox.ownerListBox == this && this.filteringTextBox.IsElementBelongToInputElement(element);
 },
 SetFocusableCheckInput: function(element) {
  this.focusableCheckInput = element;
 },
 OnFocusCore: function() {
  if(this.UseDelayedSpecialFocus())
   this.specialFocusTimer = ASPx.Timer.ClearTimer(this.specialFocusTimer);
  if(this.focused)
   this.UnlockFocusEvents();
  else
   ASPxClientListBoxBase.prototype.OnFocusCore.call(this);
 },
 OnLostFocusCore: function() {
  if(!this.IsFocusEventsLocked()) { 
   this.SetFocusableCheckInput(null);
   this.filteringTextBoxInput = null;
   this.showFilterButtonInput = null;
  }
  ASPxClientListBoxBase.prototype.OnLostFocusCore.call(this);
 },
 IsFocusEventsLocked: function() {
  var result = ASPxClientEdit.prototype.IsFocusEventsLocked.call(this) ||
      this.IsInternalFilteringTextBoxFocusEventsLocked() ||
      this.isFilterEditorShowing;
  if(this.accessibilityCompliant)
   result = this.focused && (result || this.HasInternalFilteringTextBoxFocus());
  return result;
 },
 HasInternalFilteringTextBoxFocus: function() {
  return !this.customFilteringEditorID && this.filteringTextBox && ASPx.GetIsParent(this.filteringTextBox.GetMainElement(), ASPx.GetActiveElement());
 },
 IsInternalFilteringTextBoxFocusEventsLocked: function() {
  return !this.customFilteringEditorID && this.filteringTextBox && this.filteringTextBox.IsFocusEventsLocked();
 },
 ForceLockFocusEvents: function() {
  this.focusEventsLocked = true;
 },
 GetValueFromValueInput: function(){
  var valueInput = this.FindStateInputElement();
  if(ASPx.IsExistsElement(valueInput))
   return valueInput.value;
  return "";
 },
 NeedUnfocusableScrollDivElement: function() {
  return ASPx.Browser.Firefox;
 },
 GetInitSelectedIndex: function(){
  return this.savedSelectedIndex;
 },
 CacheValue: function(){
  this.cachedValue = this.GetValue();
 },
 InitScrollPos: function(){ 
  if(!this.isComboBoxList && this.isCallbackMode && this.GetInitSelectedIndex() == -1)
   this.GetScrollDivElement().scrollTop = 0;
 },
 InitializeLoadOnDemand: function(){
  var loadOnDemandRequired = this.isCallbackMode && this.GetEnabledByServer();
  this.scrollHelper = this.CreateScrollHelper(loadOnDemandRequired);
 },
 CreateScrollHelper: function (loadOnDemandRequired) {
  if (loadOnDemandRequired)
   return new ListBoxScrollCallbackHelper(this);
  return new ListBoxScrollCallbackHelperBase(this);
 },
 HasVirtualScrolling: function() { return !!this.itemsInfo || this.itemsManager instanceof ListBoxItemsVirtualManager; },
 CreateItemsManager: function() {
  if (this.HasVirtualScrolling()) {
   var manager = new ListBoxItemsVirtualManager(this);
   manager.InitializeItems(this.itemsInfo, this.itemsValue);
   delete this.itemsInfo;
   return manager;
  }
  return new ListBoxItemsDefaultManager(this);
 },
 CreateStateControllerManager: function() {
  var result = null;
  if(this.HasVirtualScrolling()) {
   result = this.CreateVirtualRenderStateControllerManager();
  }
  else {
   result = this.CreateDefaultRenderStateControllerManager();
  }
  return result;
 },
 CreateVirtualRenderStateControllerManager: function() {
  return new VirtualRenderListBoxStateControllerManager(this, this.itemsManager);
 },
 CreateDefaultRenderStateControllerManager: function() {
  return new DefaultListBoxStateControllerManager(this);
 },
 InlineInitialize: function(){
  if(this.HasVirtualScrolling())
   this.freeUniqIndex = 0;
  this.itemsManager = this.CreateItemsManager();
  this.stateControllerManager = this.CreateStateControllerManager();
  this.filterStrategy = this.isComboBoxList ? null : this.CreateFilterStrategy();
  this.EnsureFixWidthRow();
  this.InitializeNativeCheckHandlers();
  this.LockScrollHandler();
  this.InitializeItemsAttributes();
  this.InitDXTextAttributes();
  this.stateControllerManager.Initialize();
  this.itemsManager.Initialize();
  this.AddSelectAllStateItems(true);
  this.UnlockScrollHandler();
  if(this.NeedToHandleCellWidth()) {
   var headerTable = this.GetHeaderTableElement();
   var firstHeaderRow = !!headerTable && headerTable.rows[0];
   this.CorrectCellNullWidthStyle(firstHeaderRow);
   this.CorrectCellNullWidthStyle(this.itemsManager.GetFirstVisibleItemRow());
  }
  ASPxClientListBoxBase.prototype.InlineInitialize.call(this);
  this.EnsureSelectAllElements();
 },
 IsItemVisible: function(index) {
  return this.itemsManager.IsItemVisible(index);
 },
 UseSpecialKeyboardHandling: function() {
  return true;
 },
 GetItemIndexByInsertionOrder: function (itemIndex) { 
  return this.HasVirtualScrolling() ? this.GetItem(itemIndex).insertOrderIndex : this.FindFreeIndex();
 },
 InsertItemRow: function (index, itemProperties) {
  var newItemRow = this.itemsManager.CreateNewItemRow(index);
  ASPx.Attr.RemoveAttribute(newItemRow, "id");
  var listTable = this.GetListTable();
  var tbody = this.GetTableRowParent(listTable);
  var rowBeforeNewItemRow = this.GetListTableRowBeforeNewItemRow(index, listTable);
  var scrollDiv = this.GetScrollDivElement();
  var oldScrollTop = scrollDiv.scrollTop;
  if(rowBeforeNewItemRow)
   tbody.insertBefore(newItemRow, rowBeforeNewItemRow);
  else
   tbody.appendChild(newItemRow);  
  if(ASPx.Browser.Firefox && scrollDiv.scrollTop != oldScrollTop)
   scrollDiv.scrollTop = oldScrollTop;
  var newIndex = this.GetItemIndexByInsertionOrder(index);
  var newId = this.CreateItemId(newIndex);
  var newClientId = this.CreateItemClientId(newIndex);
  this.InitializeItemAttributes(newItemRow, newClientId, true);
  this.AddStateControllerClasses(newId);
  this.PrepareItem(newItemRow, itemProperties);
  if (this.needUnselectableItemRows)
   this.SetItemRowUnselectable(newItemRow);
  if (this.GetIsCheckColumnExists() && !this.IsNativeCheckBoxes()) {
   if (!this.internalCheckBoxCollection)
    this.CreateInternalCheckBoxCollection();
   this.AddInternalCheckBoxToCollection(index);
  }
 },
 RemoveItemRow: function (index) {
  if (this.GetIsCheckColumnExists() && !this.IsNativeCheckBoxes())
   this.RemoveInternalCheckBoxFromCollecntion(index);
  var row = this.GetItemRow(index);
  if (ASPx.IsExistsElement(row)) {
   var firstCellId = this.GetItemElement(index).id;
   var itemId = firstCellId.match(/LBI\d+/)[0];
   this.RemoveStateControllerClasses(itemId);
   row.parentNode.removeChild(row);
  }
 },
 SetItemRowsUnselectable: function() {
  var count = this.GetItemCount();
  for (var i = 0; i < count; i++) {
   var itemRow = this.GetItemRow(i);
   if (itemRow)
    this.SetItemRowUnselectable(itemRow);
  }
  this.needUnselectableItemRows = true;
 },
 SetItemRowUnselectable: function (itemRow) {
  for (var j = 0; j < itemRow.cells.length; j++)
   ASPx.Selection.SetElementAsUnselectable(itemRow.cells[j], true);
 },
 GetInactiveFilterElementClassName: function() {
  return inactiveFilterElementClassName;
 },
 GetAnimatedFilterElementClassName: function() {
  return "dxeLBAnimatedFilterPanelSys";
 },
 GetCompactViewFilterAdjacentScrollDivSelector: function() {
  return "*[class*=\"dxeListBoxFilter\"]:not(.dxeLBInactiveFilterPanelSys) + *[class*=\"dxeListBoxSelectAll\"] + .dxlbd";
 },
 GetCompactViewInactiveFilterAdjacentScrollDivSelector: function() {
  return ".dxeLBInactiveFilterPanelSys + *[class*=\"dxeListBoxSelectAll\"] + .dxlbd";
 },
 EnsureFilteringElements: function () {
  if(this.enableFiltering) {
   this.EnsureFilteringTextBox();
   if(!this.customFilteringEditorID) {
    this.filterMainElement = this.GetChildElement(filterMainElementID);
    this.showFilterButton = this.GetShowFilterButton();
    if(this.showFilterButton) {
     this.showFilterButton.ownerListBox = this;
     var changeEventMethod = ASPx.Attr.ChangeEventsMethod(this.GetEnabled());
     var showFilterButtonInternalButton = this.showFilterButton.GetInternalButton();
     if(showFilterButtonInternalButton)
      this.ChangeSpecialInputEnabledAttributes(showFilterButtonInternalButton, changeEventMethod, true);
     this.showFilterButton.SetEnabled(this.GetEnabled());
     this.UpdateFilterButtonHeight();
     this.UpdateShowHideFilterElementCssRules();
    }
   }
  }
 },
 CreateFilterStrategy: function() {
  if(this.enableFiltering)
   return new ListBoxFilterStrategy(this);
  return new ListEditFilterStrategyBase();
 },
 UpdateShowHideFilterElementCssRules: function() {
  var scrollDiv = this.GetScrollDivElement();
  var scrollDivClientHeight = scrollDiv.offsetHeight - ASPx.GetTopBottomBordersAndPaddingsSummaryValue(scrollDiv);
  var filterMainElementOffsetHeight = this.GetFilterMainElementHeight();
  if (ASPx.GetElementVisibility(this.filteringTextBox.GetMainElement(), true))
   scrollDivClientHeight += filterMainElementOffsetHeight;
  var showHideFilterStyle = this.EnsureShowHideFilterStyle();
  var mainElementSelector = "#" + this.name;
  var styleContent = [
   mainElementSelector + " " + this.GetCompactViewFilterAdjacentScrollDivSelector()
    + " { max-height: " + (scrollDivClientHeight - filterMainElementOffsetHeight) + "px; }",
   mainElementSelector + " " + this.GetCompactViewInactiveFilterAdjacentScrollDivSelector()
    + " { max-height: " + scrollDivClientHeight + "px; }"
  ];
  showHideFilterStyle.innerHTML = styleContent.join('\n');
 },
 EnsureShowHideFilterStyle: function() {
  if(!this.showHideFilterStyle) {
   this.showHideFilterStyle = this.FindShowHideFilterStyle();
   if(!this.showHideFilterStyle) {
    this.showHideFilterStyle = document.createElement('style');
    this.showHideFilterStyle.id = this.GetShowHideFilterStyleID();
    ASPx.Attr.AppendStyleType(this.showHideFilterStyle);
    document.getElementsByTagName('head')[0].appendChild(this.showHideFilterStyle);
   }
  }
  return this.showHideFilterStyle;
 },
 FindShowHideFilterStyle: function() {
  return ASPx.GetChildById(document.getElementsByTagName('head')[0], this.GetShowHideFilterStyleID());
 },
 GetShowHideFilterStyleID: function() {
  return this.name + "ShowHideFilterStyle";
 },
 GetFilterMainElementHeight: function() {
  if(!this.filterMainElementHeight) {
   var filteringTextBoxClone = this.filteringTextBox.GetMainElement().cloneNode(true);
   filteringTextBoxClone.style.position = "absolute";
   filteringTextBoxClone.style.visibility = "hidden";
   document.body.appendChild(filteringTextBoxClone);
   this.filterMainElementHeight = filteringTextBoxClone.offsetHeight;
   document.body.removeChild(filteringTextBoxClone);
   var filterMainElementClone = this.filterMainElement.cloneNode(false);
   filterMainElementClone.style.position = "absolute";
   filterMainElementClone.style.visibility = "hidden";
   ASPx.RemoveClassNameFromElement(filterMainElementClone, this.GetInactiveFilterElementClassName());
   ASPx.RemoveClassNameFromElement(filterMainElementClone, this.GetAnimatedFilterElementClassName());
   document.body.appendChild(filterMainElementClone);
   this.filterMainElementHeight += ASPx.GetTopBottomBordersAndPaddingsSummaryValue(filterMainElementClone);
   document.body.removeChild(filterMainElementClone);
  }
  return this.filterMainElementHeight;
 },
 RemoveShowHideFilterCssRules: function () {
  var showHideFilterStyle = this.FindShowHideFilterStyle();
  if(showHideFilterStyle)
   showHideFilterStyle.innerHTML = "";
 },
 UpdateFilterButtonHeight: function() {
  setTimeout(function () {
   this.showFilterButton.SetHeight(this.selectAllMainElement.offsetHeight - ASPx.GetVerticalBordersWidth(this.selectAllMainElement));
  }.aspxBind(this), 0);
 },
 EnsureFilteringTextBox: function() {
  this.filteringTextBox = this.FindFilteringTextBox();
  if(this.filteringTextBox) {
   this.filteringTextBox.UserInput.AddHandler(this.filterStrategy.OnInput.bind(this.filterStrategy));
   if(!this.customFilteringEditorID) {
    this.filteringTextBox.ownerListBox = this;
    var changeEventMethod = ASPx.Attr.ChangeEventsMethod(this.GetEnabled());
    this.ChangeSpecialInputEnabledAttributes(this.filteringTextBox.GetInputElement(), changeEventMethod, true);
    this.filteringTextBox.SetEnabled(this.GetEnabled());
    this.filteringTextBox.KeyDown.AddHandler(function(sender, args) {
     if(ASPx.Evt.GetKeyCode(args.htmlEvent) === ASPx.Key.Esc)
      sender.GetInputElement().value = "";
    });
   }
  }
 },
 FindFilteringTextBox: function() {
  var actualFilteringTextBoxID = this.customFilteringEditorID ? this.customFilteringEditorID : this.name + "_" + filteringTextBoxID;
  return ASPx.GetControlCollection().Get(actualFilteringTextBoxID);
 },
 CollectionChanged: function(isFiltering) {
  if(isFiltering)
   this.itemsManager.OnEndItemsFiltering();
 },
 ChangeItemsFilteredState: function(action) {
  this.itemsManager.ChangeItemsFilteredState(action);
 },
 RewriteFilteredItemIndices: function (newFilteredItemIndices) {
  this.itemsManager.RewriteFilteredItemIndices(newFilteredItemIndices);
 },
 BeforeClientFiltering: function () {
  this.itemsManager.BeforeClientFiltering();
 },
 ApplyFilterToItem: function (index, isSatisfy, savePrevState, isFilterReset) {
  this.itemsManager.ApplyFilterToItem(index, isSatisfy, savePrevState, isFilterReset);
 },
 RestorePrevFilteredState: function (index) {
  this.itemsManager.RestorePrevFilteredState(index);
 },
 IsItemFiltered: function (index) {
  return this.itemsManager.IsItemFiltered(index);
 },
 IsClientFilterApplied: function() {
  return !this.isComboBoxList && this.filterStrategy.filter != "" && !this.isCallbackMode;
 },
 MakeAllItemsVisible: function () {
  this.itemsManager.MakeAllItemsVisible();
 },
 ShowFilterElement: function() {
  ASPx.RemoveClassNameFromElement(this.filterMainElement, this.GetInactiveFilterElementClassName());
  this.showFilterButton.SetVisible(false);
  if(ASPx.Browser.VirtualKeyboardSupported) {
   this.ReplaceFilteringTextBoxShowNullTextOnFocusFunction();
   this.isFilterEditorShowing = false;
   this.filteringTextBox.GetInputElement().focus();
  }
  else
   setTimeout(function () {
    this.isFilterEditorShowing = false;
    this.filteringTextBox.GetInputElement().focus();
   }.aspxBind(this), 200);
 },
 HideFilterElement: function () {
  ASPx.AddClassNameToElement(this.filterMainElement, this.GetInactiveFilterElementClassName());
  this.showFilterButton.SetVisible(true);
  this.UpdateFilterButtonHeight();
  this.CorrectHeight(true);
  setTimeout(function () {
   this.filteringTextBox.UnlockFocusEvents();
   this.showFilterButton.GetInternalButton().focus();
  }.aspxBind(this), 0);
 },
 ReplaceFilteringTextBoxShowNullTextOnFocusFunction: function () {
  if(this.filteringTextBox.nullTextDisplayMode === ASPx.NullTextDisplayMode.UnfocusedAndFocused) {
   var origin = this.filteringTextBox.ensureActivateFocusedNullTextMechanism;
   var filteringTextBox = this.filteringTextBox;
   this.filteringTextBox.ensureActivateFocusedNullTextMechanism = function() {
    setTimeout(function() {
     origin.call(filteringTextBox);
     filteringTextBox.ensureActivateFocusedNullTextMechanism = origin;
     setTimeout(function () {
      if(filteringTextBox.isFocusedNullTextElementDisplayed())
       filteringTextBox.adjustFocusedNullTextElement();
     }, 300);
    }, 400);
   };
  }
 },
 EnsureSelectAllElements: function () {
  if(this.enableSelectAll && !this.selectAllMainElement) {
   this.EnsureSelectAllCheckElement();
   this.selectAllMainElement = this.GetChildElement(selectAllMainElementID);
   var selectAllClickableElement = this.GetSelectAllClickableElement();
   ASPx.Evt.AttachEventToElement(selectAllClickableElement, "click", this.onSelectAllClickableElementClick.bind(this));
  }
 },
 EnsureSelectAllCheckElement: function () {
  var selectAllCheckBoxInput = null;
  if(!this.IsNativeCheckBoxes()) {
   this.CreateSelectAllCheckBox();
   selectAllCheckBoxInput = this.GetSelectAllCheckBoxFocusableElement();
  }
  else {
   this.nativeSelectAllCheckBox = this.GetChildElement(selectAllCheckBoxID + "_I");
   this.nativeSelectAllCheckBox.disabled = !this.GetEnabled();
   selectAllCheckBoxInput = this.nativeSelectAllCheckBox;
  }
  var changeEventMethod = ASPx.Attr.ChangeEventsMethod(this.GetEnabled());
  this.ChangeSpecialInputEnabledAttributes(selectAllCheckBoxInput, changeEventMethod, true);
 },
 CreateSelectAllCheckBox: function () {
  var selectAllCheckBoxElement = this.GetChildElement(selectAllCheckBoxID);
  var selectAllCheckBoxInputElement = this.GetChildElement(selectAllCheckBoxID + "_S");
  var selectAllStateController = ASPx.CheckableElementStateController.Create(this.icbImageProperties, CheckBoxInputKey.Checked, CheckBoxInputKey.Unchecked, CheckBoxInputKey.Indeterminate, true);  
  this.selectAllCheckBox = new ASPx.CheckBoxInternal(selectAllCheckBoxInputElement, selectAllStateController, true, false,
   ASPx.CheckEditElementHelper.Instance, selectAllCheckBoxElement, true, undefined, undefined, this.accessibilityCompliant);
  this.selectAllCheckBox.CreateFocusDecoration(this.icbFocusedStyle);
  this.selectAllCheckBox.SetEnabled(this.GetEnabled());
  this.selectAllCheckBox.GetReadOnly = this.GetReadOnly.bind(this);
  this.selectAllCheckBox.CheckedChanged.AddHandler(this.onSelectAll.aspxBind(this));
  if(ASPx.Browser.WebKitFamily)
   ASPx.Evt.AttachEventToElement(this.selectAllCheckBox.mainElement.parentNode, "selectstart", ASPx.Evt.PreventEventAndBubble);
 },
 onSelectAllClickableElementClick: function (evt) {
  if (!this.GetEnabled() || this.GetReadOnly()) {
   if (this.IsNativeCheckBoxes() || this.isNative)
    ASPx.Evt.PreventEvent(evt);
   return false;
  }
  if(this.IsSelectAllCheckBoxClicked(ASPx.Evt.GetEventSource(evt)))
   return;
  if(!this.IsNativeSelectAllCheckBoxClicked(ASPx.Evt.GetEventSource(evt))) {
   var currentCheckState = this.getSelectAllCheckElementState();
   var newCheckState = currentCheckState != ASPx.CheckBoxCheckState.Checked ?
    ASPx.CheckBoxCheckState.Checked : ASPx.CheckBoxCheckState.Unchecked;
   this.updateSelectAllCheckElementState(newCheckState);
  }
  this.onSelectAll();
 },
 onSelectAll: function () {
  this.LockUpdateSelectAllElements();
  var selectAllCheckState = this.getSelectAllCheckElementState();
  this.onSelectAllCore(selectAllCheckState);
  this.UnlockUpdateSelectAllElements();
 },
 onSelectAllCore: function (currentCheckState) {
  var toSelect = currentCheckState == ASPx.CheckBoxCheckState.Checked;
  var valueBeforeSelectAll = this.GetValue();
  var selectionBeforeSelectAll = this.GetValueFromValueInput();
  if (toSelect)
   this.SelectAll();
  else
   this.UnselectAll();
  if(selectionBeforeSelectAll !== this.GetValueFromValueInput())
   this.OnItemSelectionChanged(-1, toSelect, true, valueBeforeSelectAll !== this.GetValue());
 },
 getSelectAllCheckElementState: function () {
  if(this.selectAllCheckBox)
   return this.selectAllCheckBox.GetCurrentCheckState();
  if(this.nativeSelectAllCheckBox)
   return this.nativeSelectAllCheckBox.checked ? ASPx.CheckBoxCheckState.Checked : ASPx.CheckBoxCheckState.Unchecked;
  return null;
 },
 updateSelectAllCheckElementState: function (checkState) {
  if(this.selectAllCheckBox) {
   var checkValue = this.selectAllCheckBox.stateController.GetValueByCheckState(checkState);
   this.selectAllCheckBox.SetValue(checkValue, !this.isInitialized);
  } else if(this.nativeSelectAllCheckBox)
   this.nativeSelectAllCheckBox.checked = checkState === ASPx.CheckBoxCheckState.Checked;
 },
 updateSelectAllElementsState: function() {
  if(!this.IsUpdateSelectAllElementsLocked() && this.enableSelectAll) {
   this.EnsureSelectAllElements();
   this.updateSelectAllElementsStateCore();
  }
 },
 updateSelectAllElementsStateCore: function() {
  var selectAllCheckState = ASPx.CheckBoxCheckState.Unchecked;
  var isFilteredSelectedItemFound = false;
  var isFilteredUnselectedItemFound = false;
  var itemCount = this.GetItemCount();
  for(var i = 0; i < itemCount; i++) {
   if(this.IsItemFiltered(i)) {
    if(this.GetIsItemSelected(i))
     isFilteredSelectedItemFound = true;
    else
     isFilteredUnselectedItemFound = true;
   }
   if (isFilteredSelectedItemFound && isFilteredUnselectedItemFound) {
    selectAllCheckState = ASPx.CheckBoxCheckState.Indeterminate;
    break;
   }
   if(i == itemCount - 1 && isFilteredSelectedItemFound && !isFilteredUnselectedItemFound)
    selectAllCheckState = ASPx.CheckBoxCheckState.Checked;
  }
  this.updateSelectAllCheckElementState(selectAllCheckState);
 },
 changeSelectAllElementsEnabledState: function(enabled) {
  var selectAllCheckBoxInput = null;
  if(this.selectAllCheckBox) {
   this.selectAllCheckBox.SetEnabled(enabled);
   selectAllCheckBoxInput = this.GetSelectAllCheckBoxFocusableElement();
  }
  else if(this.nativeSelectAllCheckBox) {
   this.nativeSelectAllCheckBox.disabled = !enabled;
   selectAllCheckBoxInput = this.nativeSelectAllCheckBox;
  }
  if(selectAllCheckBoxInput) {
   var changeEventMethod = ASPx.Attr.ChangeEventsMethod(enabled);
   this.ChangeSpecialInputEnabledAttributes(selectAllCheckBoxInput, changeEventMethod, true);
  }
  ASPx.GetStateController().SetElementEnabled(this.selectAllMainElement, enabled);
 },
 NeedToHandleCellWidth: function() {
  return this.IsMultiColumn() && (ASPx.Browser.Firefox || ASPx.Browser.Edge);
 },
 CorrectCellNullWidthStyle: function(row) {
  if(!row) return;
  var cellCount = row.cells.length;
  for(var i = 0; i < cellCount; i++) {
   var cellStyle = !!window.getComputedStyle ? window.getComputedStyle(row.cells[i]) : ASPx.GetCurrentStyle(row.cells[i]);
   var originalWidth = parseInt(cellStyle.width);
   var needToApply = originalWidth === 0 || originalWidth <= ASPx.PxToInt(cellStyle.paddingLeft) || originalWidth <= ASPx.PxToInt(cellStyle.paddingRight);
   var action = needToApply ? ASPx.AddClassNameToElement : ASPx.RemoveClassNameFromElement;
   action(row.cells[i], NullSizeCellClassName);
  }
 },
 InitializeNativeCheckHandlers: function() {
  this.nativeCheckOnFocusHandler = function(evt) {
   this.SetFocusableCheckInput(ASPx.Evt.GetEventSource(evt));
  }.aspxBind(this);
 },
 ChangeNativeCheckEnabledAttributes: function(element, method) {
  if(this.nativeCheckOnFocusHandler)
   method(element, "focus", this.nativeCheckOnFocusHandler);
 },
 InitializeItemsAttributes: function() { 
  var listTable = this.GetListTable();
  if(this.isHasFakeRow){
   this.LockSynchronization();
   this.ClearItems();
   this.UnlockSynchronization();
  }
  listTable.ListBoxId = this.name;
  var rowIdConst = this.name + "_";
  if(this.hasSampleItem)
   this.InitializeItemAttributes(this.GetSampleItemRow(), rowIdConst + lbSIIdSuffix);
  if(!this.HasVirtualScrolling()) {
   rowIdConst += lbIIdSuffix;
   var count = this.GetItemCount();
   if(this.HasAccessibilityHeaderRow())
    count--;
   for (var i = 0; i < count; i++)
    this.InitializeItemAttributes(this.GetItemRow(i), rowIdConst + i);
  }
  var rows = listTable.rows;
  if(this.HasAccessibilityHeaderRow() && rows[rows.length - 1])
   rows[rows.length - 1].id = this.GetAccessibilityHeaderRowID();
 },
 InitializeItemAttributes: function(row, rowId) {
  var cells = row.cells;
  var itemCellsIdSuffixes = this.GetItemCellsIdPostfixes();
  for(var i = 0; i < row.cells.length; i++) {
   cells[i].style.textAlign = this.itemHorizontalAlign;
   cells[i].id = rowId + itemCellsIdSuffixes[i];
  }
  if(this.GetIsCheckColumnExists() && this.IsNativeCheckBoxes() && rowId != this.GetSampleItemRowID()) {
   var input = this.GetItemCheckBoxInput(this.GetItemIndexByRow(row));
   this.ChangeNativeCheckEnabledAttributes(input, ASPx.Attr.ChangeEventsMethod(this.GetEnabled()));
   this.ChangeSpecialInputEnabledAttributes(input, ASPx.Attr.ChangeEventsMethod(this.GetEnabled()));
  }
 },
 InitializePageSize: function(){
  var divElement = this.GetScrollDivElement();
  var count = this.GetItemCount();
  if (divElement && count > 0) {
   var firstVisibleRow = this.itemsManager.GetFirstVisibleItemRow();
   if(firstVisibleRow)
    this.scrollPageSize = Math.round(divElement.clientHeight / firstVisibleRow.offsetHeight) - 1;
  }
 },
 AddSelectAllStateItems: function(isInitialization) {
  if (this.enableSelectAll && typeof (ASPx.GetStateController) !== "undefined") {
   var stateController = ASPx.GetStateController();
   var name = this.name + "_" + selectAllMainElementID;
   if (!isInitialization)
    this.ClearStateItemCache(stateController, name, [""]);
   stateController.AddHoverItem(name, this.selectAllHoverClasses, this.selectAllHoverCssArray, "", null, null, true);
   stateController.AddDisabledItem(name, this.selectAllDisabledClasses, this.selectAllDisabledCssArray, "", null, null, true);
  }
 },
 RemoveSelectAllStateItems: function() {
  if (this.enableSelectAll && typeof (ASPx.GetStateController) !== "undefined") {
   var stateController = ASPx.GetStateController();
   var name = this.name + "_" + selectAllMainElementID;
   this.ClearStateItemCache(stateController, name, [""]);
   stateController.RemoveHoverItem(name, "");
   stateController.RemoveDisabledItem(name, "");
  }
 },
 ClearStateItemCache: function(stateController, name, suffixes) {
  for (var i = 0; i < suffixes.length; i++) {
   var element = document.getElementById(name + suffixes[i]);
   var elements = ASPx.GetNodes(element);
   elements.push(element);
   ASPx.Data.ForEach(elements, stateController.ClearElementCache.bind(stateController));
  }
 },
 AfterInitialize: function() {
  if(this.disableScrolling) {
   var scrollDiv = this.GetScrollDivElement();
   var mainElement = this.GetMainElement();
   var listTable = this.GetListTable();
   scrollDiv.style.height = mainElement.style.height = (listTable 
    ? ASPx.GetClearClientHeight(listTable)
    : this.GetListTableHeight() - ASPx.GetTopBottomBordersAndPaddingsSummaryValue(mainElement)) + "px";
  }
  this.CallbackSpaceInit(true);
  ASPxClientListBoxBase.prototype.AfterInitialize.call(this);
 },
 GetEnabledByServer: function(){
  return this.enabled;
 },
 SetEnabled: function(enabled){  
  ASPxClientListBoxBase.prototype.SetEnabled.call(this, enabled);
  this.CallbackSpaceInit(false);
 },
 SetReadOnlyInternal: function(readOnly) {
  ASPxClientListBoxBase.prototype.SetReadOnlyInternal.call(this, readOnly);
  if (readOnly) {
   this.RemoveSelectAllStateItems();
   this.stateControllerManager.RemoveHoverStateItem();
  }
  else {
   this.AddSelectAllStateItems(false);
   this.stateControllerManager.AddStateItems(true, true);
  }
 }, 
 CallbackSpaceInit: function(isInitialization){
  if(this.isCallbackMode){
   this.SetBottomScrollSpacerVisibility(this.GetScrollSpacerVisibility(false));
   this.SetTopScrollSpacerVisibility(this.GetScrollSpacerVisibility(true));
   if(isInitialization || this.isComboBoxList){
    this.EnsureSelectedItemVisible();
    ASPx.Evt.AttachEventToElement(this.GetScrollDivElement(), "scroll", aspxLBScroll);
   }
  }
 },
 GetListTable: function() {
  return this.tempCache.Get("ListTable", this.GetListTableCore, this);
 },
 GetListTableCore: function(){
  if(!ASPx.IsExistsElement(this.listTable))
   this.listTable = ASPx.GetElementById(this.name + lTableIdSuffix);
  return this.listTable;
 },
 GetItemElements: function() {
  return this.GetListTable().rows;
 },
 GetListTableHeight: function(){
  return this.GetListTable().offsetHeight;
 },
 GetHeaderDivElement: function(){
  if(!ASPx.IsExistsElement(this.headerDiv))
   this.headerDiv = ASPx.GetElementById(this.name + lbHeaderDivIdSuffix);
  return this.headerDiv;
 },
 GetHeaderTableElement: function(){
  if(!ASPx.IsExistsElement(this.headerTable)){
   var headerDiv = this.GetHeaderDivElement();
   this.headerTable = ASPx.GetNodeByTagName(headerDiv, "table", 0);
  }
  return this.headerTable;
 },
 GetScrollDivElement: function(){
  if(!ASPx.IsExistsElement(this.scrollDivElement))
   this.scrollDivElement = document.getElementById(this.name + lbDSuffix);
  return this.scrollDivElement;
 },
 GetItemElement: function(index) {
  return this.itemsManager.GetItemElement(index);
 },
 GetItemRow: function(index){
  return this.itemsManager.GetItemRow(index);
 },
 GetItemIndexByRow: function (itemRow) {
  return this.itemsManager.GetItemIndexByRow(itemRow);
 },
 GetItemSelectableElementsByRow: function(row) {
  return row.cells;
 },
 GetItemTexts: function(item) {
  return item.texts ? item.texts : [ item.text ];
 },
 GetItemHtmlContent: function(index) {
  return this.itemsManager.GetItemHtmlContent(index);
 },
 GetItemCount: function(){
  return this.itemsManager.GetItemCount();
 },
 GetListTableRowParent: function() {
  var listTable = this.GetListTable();
  return this.GetTableRowParent(listTable);
 },
 EnsureFixWidthRow: function (isSetItemHtmlProcessing) {
  var needfixWidthRow = !this.ContainsFixWidthRow() && this.IsMultiColumn() && (isSetItemHtmlProcessing || this.hasItemTemplate);
  if (needfixWidthRow)
   this.CreateFixWidthRow();
 },
 CreateFixWidthRow: function() {
  this.fixWidthRow = document.createElement("TR");
  var etalonRow = this.GetSampleItemRow();
  for(var i = 0; i < etalonRow.cells.length; i++) {
   var fixWidthCell = document.createElement("TD");
   var etalonCell = etalonRow.cells[i];
   var etalonCellStyle = ASPx.GetCurrentStyle(etalonCell);
   fixWidthCell.style.width = etalonCell.style.width || etalonCellStyle.width;
   fixWidthCell.style.borderLeftWidth = etalonCellStyle.borderLeftWidth;
   fixWidthCell.style.borderRightWidth = etalonCellStyle.borderRightWidth;
   fixWidthCell.style.borderLeftStyle = etalonCellStyle.borderLeftStyle;
   fixWidthCell.style.borderRightStyle = etalonCellStyle.borderRightStyle;
   fixWidthCell.style.paddingLeft = etalonCellStyle.paddingLeft;
   fixWidthCell.style.paddingRight = etalonCellStyle.paddingRight;
   fixWidthCell.style.boxSizing = etalonCellStyle.boxSizing;
   fixWidthCell.style.display = etalonCellStyle.display;
   this.fixWidthRow.appendChild(fixWidthCell);
  }
  ASPx.SetElementVisibility(this.fixWidthRow, "hidden");
  this.fixWidthRow.style.height = "0px";
  var listTableBody = this.GetListTableRowParent();
  listTableBody.insertBefore(this.fixWidthRow, listTableBody.childNodes[0]);
 },
 ContainsFixWidthRow: function() {
  return this.fixWidthRow && this.fixWidthRow.parentNode === this.GetListTableRowParent();
 },
 GetVisibleItemCount: function () {
  return this.itemsManager.GetVisibleItemCount();
 },
 GetIndexVisibleItem: function(item) {
  var count = this.GetItemCount();
  var visibleItemCount = 0;
  for(var i = 0; i < count; i ++){
   if(this.IsItemFiltered(i))
    visibleItemCount++;
   var curItem = this.GetItem(i);
   if(item.value === curItem.value && item.text === curItem.text)
    break;
  }
  return visibleItemCount;
 },
 GetItemCellCount: function(){
  if(this.hasSampleItem)
   return this.GetSampleItemRow().cells.length;
  if(this.GetItemCount() > 0)
   return this.itemsManager.GetFirstVisibleItemRow().cells.length;
  return 0;
 },
 GetItemTextCellCount: function(){
  return this.GetItemCellCount() - this.GetItemFirstTextCellIndex();
 },
 GetItemFirstTextCellIndex: function(){
  var itemFirstTextCellIndex  = 0;
  if(this.GetIsCheckColumnExists())
   itemFirstTextCellIndex++;
  if(this.imageCellExists)
   itemFirstTextCellIndex++;
  return itemFirstTextCellIndex;
 },
 GetItemFirstTextCell: function(index){
  return this.GetItemTextCell(index, 0);
 },
 GetItemTextCell: function(itemIndex, textCellIndex) {
  var rowElement = this.GetItemRow(itemIndex);
  if(rowElement == null) 
   return null;
  return rowElement.cells[this.GetItemFirstTextCellIndex() + textCellIndex];
 },
 GetItemTextCells: function(item) {
  var firstTextCellIndex = this.GetItemFirstTextCellIndex();
  return Array.prototype.slice.call(this.GetItemSelectableElementsByRow(item), firstTextCellIndex);
 },
 GetItemTopOffset: function(index){
  return this.itemsManager.GetItemTopOffset(index);
 },
 GetItemHeight: function(index){
  return this.itemsManager.GetItemHeight(index);
 },
 GetItemsHeight: function(){
  return this.itemsManager.GetItemsHeight();
 },
 GetItemsWidth: function () {
  return this.itemsManager.GetItemsWidth();
 },
 GetItemCheckBoxInput: function(index){
  var itemRow = this.GetItemRow(index);
  var checkBoxCell = itemRow ? itemRow.cells[this.GetCheckBoxCellIndex()] : null;
  return checkBoxCell ? ASPx.GetNodesByTagName(checkBoxCell, "input")[0] : null;
 },
 GetIsCheckColumnExists: function(){
  if(!this.checkCellExists)
   this.checkCellExists = this.CheckColumnSelectionMode();
  return this.checkCellExists;
 },
 GetCheckBoxCellIndex: function(){
  return 0;
 },
 GetImageCellIndex: function(){
  return this.GetIsCheckColumnExists() ? 1 : 0;
 },
 GetItemCellsIdPostfixes: function(){
  if(this.itemCellsIdPostfixes == null){
   this.itemCellsIdPostfixes = [];
   var i = 0;
   if(this.GetIsCheckColumnExists()) {
    this.itemCellsIdPostfixes.push(lbIPostfixes[0]);
    i++;
   }
   if(this.imageCellExists){
    this.itemCellsIdPostfixes.push(lbIPostfixes[1]);
    i++;
   }
   var cellCount = this.GetItemCellCount();
   for(; i < cellCount; i++) 
    this.itemCellsIdPostfixes.push(lbIPostfixes[2] + i);
  }
  return this.itemCellsIdPostfixes;
 },
 AdjustControl: function (nestedCall) {
  if(this.IsAdjustmentRequired()) 
   this.heightCorrected = false;
  ASPxClientEdit.prototype.AdjustControl.call(this, nestedCall);
 },
 AdjustControlCore: function(){
  this.RemoveShowHideFilterCssRules();
  if(this.disableScrolling)
   return;
  ASPxClientEdit.prototype.AdjustControlCore.call(this);
  this.CorrectSize();
  this.itemsManager.Adjust();
  this.EnsureSelectedItemVisible();
  if(this.showFilterButton) {
   this.UpdateFilterButtonHeight();
   this.UpdateShowHideFilterElementCssRules();
  }
 },
 CorrectSize: function() {
  if(this.isComboBoxList || this.disableScrolling || this.filterStrategy.currentCallbackIsFiltration)
   return;
  this.LockScrollHandler();
  this.CorrectHeight();
  this.CorrectWidth();
  this.InitializePageSize();
  this.UnlockScrollHandler();
 },
 OnCorrectSizeByTimer: function() {
  if(this.IsVisible())
   this.CorrectSize();
 }, 
 SetProtectionFromFlick_inFF: function(changeVisibility, changeDisplay){
  if(!ASPx.Browser.Firefox) return;
  var listTable = this.GetListTable();
  if(changeVisibility)
   listTable.style.visibility = "hidden";
  if(changeDisplay)
   listTable.style.display = "none";
 },
 ResetProtectionFromFlick_inFF: function(){
  if(!ASPx.Browser.Firefox) return;
  var listTable = this.GetListTable();
  listTable.style.visibility = "";
  listTable.style.display = "";
 },
 CorrectHeight: function(force){
  if(ASPx.Browser.Firefox && this.heightCorrected && !force) return; 
  this.heightCorrected = true;
  var mainElement = this.GetMainElement();
  var divElement = this.GetScrollDivElement();
  divElement.style.height = "0px";
  var height = mainElement.offsetHeight;
  divElement.style.height = height + "px";
  var extrudedHeight = mainElement.offsetHeight;
  var heightCorrection = extrudedHeight - height;
  if(heightCorrection > 0){
   var divHeight = divElement.offsetHeight;
   this.SetProtectionFromFlick_inFF(true, false);
   divElement.style.height = (divHeight - heightCorrection) + "px";
   this.ResetProtectionFromFlick_inFF(); 
   extrudedHeight = mainElement.offsetHeight;
   var paddingsHeightCorrection = extrudedHeight - height;
   if(paddingsHeightCorrection > 0)
    divElement.style.height = (divHeight - heightCorrection - paddingsHeightCorrection) + "px";
  } 
 },
 IsMultiColumn: function(){
  return this.columnFieldNames.length > 0;
 },
 IsCorrectWidthRequired: function(){
  return true;
 },
 GetVisibleColumnCount: function() {
  if (!this.visibleColumnCount) {
   this.visibleColumnCount = this.IsMultiColumn() ?
    ASPx.Data.CollectionToArray(this.GetSampleItemRow().cells)
     .slice(this.GetItemFirstTextCellIndex())
     .filter(function (cell) { return ASPx.GetElementDisplay(cell); }).length
    : -1;
  }
  return this.visibleColumnCount;
 },
 CorrectWidth: function () {
  if(!this.IsCorrectWidthRequired()) return;
  if(this.IsMultiColumn())
   this.CorrectMultiColumnWidth();
  else
   this.CorrectNonMultiColumnWidth();
 },
 CorrectMultiColumnWidth: function(){
  var scrollBarWidth = this.GetVerticalScrollBarWidth(); 
  this.CorrectMultiColumnHeaderWidth(scrollBarWidth);
 },
 CollapseMultiColumnHeaderWidth:function(){
  var headerDivElement = this.GetHeaderDivElement();
  headerDivElement.style.width = "0px";
 },
 CorrectMultiColumnHeaderWidth: function(scrollBarWidth){
  var headerDivElement = this.GetHeaderDivElement();
  if(ASPx.IsExistsElement(headerDivElement)){
   var headerTable;
   if(ASPx.Browser.WebKitFamily){
    headerTable = this.GetHeaderTableElement();
    if(!ASPx.IsExistsElement(headerTable))
     headerTable = null;
   }
   if(this.rtl)
    headerDivElement.style.paddingLeft = scrollBarWidth + "px";
   else
    headerDivElement.style.paddingRight = scrollBarWidth + "px";
   if(headerTable)
    window.setTimeout(function() { headerTable.style.width = "100%"; }, 0);
  }
 },
 CorrectNonMultiColumnWidth: function(){
  var mainElement = this.GetMainElement(),
   divElement = this.GetScrollDivElement();
  if(this.width == ""){
   var itemsWidth = this.GetItemsWidth();
   if (itemsWidth != 0 || !ASPx.Browser.NetscapeFamily) { 
    divElement.style.width = Math.max((itemsWidth + this.GetVerticalScrollBarWidth()), this.scrollDivMinWidth) + "px";
    if(ASPx.Browser.Firefox) 
     mainElement.style.width = divElement.offsetWidth + "px";
   }
  } else {  
   mainElement.style.width = this.width;
   if(this.width !== "100%") {
    var scrollDivWidth = ASPx.Browser.WebKitFamily ? 1 : 0;
    var oldScrollTop = divElement.scrollTop;
    divElement.style.width = scrollDivWidth + "px";
    scrollDivWidth = ASPx.Browser.Edge ? mainElement.clientWidth - ASPx.GetHorizontalBordersWidth(mainElement) : mainElement.clientWidth;
    divElement.style.width = scrollDivWidth + "px";
    var isScrollEventWillRaised = divElement.scrollTop != oldScrollTop;
    if(isScrollEventWillRaised)
     this.itemsManager.DeactivateScrollHandler();
    divElement.scrollTop = oldScrollTop;
   }
  }
 },
 UpdateAdjustmentFlags: function() {
  var mainElement = this.GetMainElement();
  if(mainElement) {
   var mainElementStyle = ASPx.GetCurrentStyle(mainElement);
   this.UpdatePercentSizeConfig([this.width], [mainElementStyle.height, mainElement.style.height]);
  }
 },
 EnsureSelectedItemVisible: function() {
  var index = this.GetSelectedIndex();
  if(index != -1)
   this.itemsManager.MakeItemVisibleAtTop(index);
 },
 MakeItemVisible: function(index) { 
  if(!this.itemsManager.IsItemVisible(index))
   this.itemsManager.MakeItemVisibleAtTop(index);
 },
 ScrollItemToTop: function(index) {
  this.LockScrollHandler();
  this.SetScrollTop(this.GetItemTopOffset(index));
  this.UnlockScrollHandler();
 },
 GetScrollDivChildElementHeight: function() {
  return this.itemsManager.GetScrollDivChildElementHeight();
 },
 SetScrollTop: function(scrollTop){
  var scrollDiv = this.GetScrollDivElement();
  if(scrollDiv){ 
   scrollDiv.scrollTop = scrollTop;
   if(ASPx.Browser.Opera) 
    this.CachedScrollTop();
  }   
 },
 CachedScrollTop: function(){
  var scrollDiv = this.GetScrollDivElement();
  scrollDiv.cachedScrollTop = scrollDiv.scrollTop;
 },
 RestoreScrollTopFromCache: function(){
  var scrollDiv = this.GetScrollDivElement();
  if(scrollDiv && ASPx.IsExists(scrollDiv.cachedScrollTop))
   scrollDiv.scrollTop = scrollDiv.cachedScrollTop;
 },
 IsListBoxWidthLessThenList: function(){
  var divElement = this.GetScrollDivElement();
  var listTable = this.GetListTable();
  var listTabelWidth = listTable.style.width;
  var isLess = false;
  listTable.style.width = "";
  isLess = listTable.offsetWidth < divElement.offsetWidth;
  listTable.style.width = listTabelWidth;
  return isLess;
 },
 GetVerticalScrollBarWidth: function(){
  var divElement = this.GetScrollDivElement(); 
  if(!this.verticalScrollBarWidth || this.verticalScrollBarWidth <= 0){
   this.verticalScrollBarWidth = this.GetVerticalScrollBarWidthCore(divElement);
   return this.verticalScrollBarWidth;
  } else
   return this.GetIsVerticalScrollBarVisible(divElement) ? this.verticalScrollBarWidth : 0;
 },
 GetIsVerticalScrollBarVisible: function(divElement){
  var verticalOverflow = this.GetVerticalOverflow(divElement);
  if(verticalOverflow != "auto"){
   return divElement.clientHeight < this.GetListTableHeight();
  } else {
   var borderWidthWithScroll = divElement.offsetWidth - divElement.clientWidth;
   return borderWidthWithScroll == this.scrollDivBordersWidthWithScroll;
  }
 },
 GetVerticalScrollBarWidthCore: function(divElement){
  var overflowYReserv = this.GetVerticalOverflow(divElement);
  this.SetVerticalOverflow(divElement, "auto");
  this.scrollDivBordersWidthWithScroll = divElement.offsetWidth - divElement.clientWidth;
  this.SetProtectionFromFlick_inFF(false, true);
  this.SetVerticalOverflow(divElement, "hidden");
  var bordersWidthWithoutScroll = divElement.offsetWidth - divElement.clientWidth;
  this.SetVerticalOverflow(divElement, overflowYReserv);
  this.ResetProtectionFromFlick_inFF();
  return this.scrollDivBordersWidthWithScroll - bordersWidthWithoutScroll;
 },
 GetVerticalOverflowPropertyName: function() {
  if(ASPx.Browser.WebKitFamily || ASPx.Browser.AndroidDefaultBrowser || ASPx.Browser.Firefox && ASPx.Browser.Version >= 3)
   return "overflowY";
  return "overflow";
 },
 GetVerticalOverflow: function(element){
  return element.style[this.GetVerticalOverflowPropertyName()];
 },
 SetVerticalOverflow: function(element, value) {
  element.style[this.GetVerticalOverflowPropertyName()] = value;
 },
 MultiSelectionMode: function(){
  return this.selectionMode != ListBoxSelectionMode.Single;
 },
 CheckColumnSelectionMode: function(){
  return this.selectionMode == ListBoxSelectionMode.CheckColumn;
 },
 OnItemClick: function(index, evt){
  if(!this.isInitialized) 
   return;
  if (this.GetReadOnly()) {
   ASPx.Evt.PreventEvent(evt);
   return this.OnItemClickOrDblClickReadOnly();
  }
  if(this.CheckColumnSelectionMode() && this.IsCheckBoxClicked(evt))
   this.GetItemSelectionHelper().OnItemCheckBoxClick(index, evt);
  else
   this.GetItemSelectionHelper().OnItemClick(index, evt);
  this.SetFocus();
  this.RaiseItemClick();
 },
 OnItemClickOrDblClickReadOnly: function(){
  return false;
 },
 OnItemDblClick: function(){
  if (this.GetReadOnly())
   return this.OnItemClickOrDblClickReadOnly();
  return this.RaiseItemDoubleClick();
 },
 CanChangeSelection: function(){
  return !this.GetReadOnly() || !this.isInitialized;
 },
 SelectIndexSilent: function(index){ 
  return this.SetItemSelectionStateSilent(index);
 },
 SetItemSelectionStateSilent: function(index) {
  if(!this.CanChangeSelection())
   return;
  var oldSelectionIndex = this.GetSelectedIndex();
  this.LockSelectionEvents();
  this.SetSelectedIndexCore(index);
  this.UnlockSelectionEvents();
  return index !== oldSelectionIndex;
 },
 SetItemSelectionAppearance: function (index, selected, controller, checkCanChangeSelection) {
  if (checkCanChangeSelection && !this.CanChangeSelection())
   return;
  if(!controller)
   controller = ASPx.GetStateController();
  var itemFirstTextCell = this.GetItemFirstTextCell(index);
  if(selected)
   controller.SelectElementBySrcElement(itemFirstTextCell);
  else
   controller.DeselectElementBySrcElement(itemFirstTextCell);
 },
 GetItemSelectionHelper: function(){
  if(!this.itemSelectionHelper)
   this.itemSelectionHelper = this.CreateItemSelectionHelper();
  return this.itemSelectionHelper;
 },
 CreateItemSelectionHelper: function(){
  if(this.selectionMode == ListBoxSelectionMode.Single)
   return new ListBoxSingleSelectionHelper(this);
  else if(this.selectionMode == ListBoxSelectionMode.Multiple)
   return new ListBoxMultiSelectionHelper(this);
  else if(this.selectionMode == ListBoxSelectionMode.CheckColumn)
   return new ListBoxCheckSelectionHelper(this);
 },
 GetValue: function(){
  var index = this.GetSelectedIndex();
  if(0 <= index && index < this.itemsValue.length)
   return this.itemsValue[index];
  return null;
 },
 SetValue: function(value){
  var index = this.FindItemIndexByValue(value);
  this.SetSelectedIndex(index);
 },
 GetSelectedItem: function(){
  var index = this.GetSelectedIndex();
  return this.GetItem(index);
 },
 GetSelectedIndex: function(){
  if(!this.itemSelectionHelper)
   return this.GetSelectedIndexInternal();
  return this.GetItemSelectionHelper().GetSelectedIndex();
 },
 SetSelectedIndex: function(index){
  this.LockSelectionEvents();
  this.SetSelectedIndexCore(index);
  this.EnsureSelectedItemVisible(index);
  this.UnlockSelectionEvents();
 },
 SetSelectedIndexCore: function(index){
  this.GetItemSelectionHelper().SetSelectedIndex(index);
 },
 GetSelectedIndices: function(){
  return this.GetItemSelectionHelper().GetSelectedIndices();
 },
 GetSelectedValues: function(){ 
  return this.GetItemSelectionHelper().GetSelectedValues();
 },
 GetSelectedItems: function(){
  return this.GetItemSelectionHelper().GetSelectedItems();
 },
 SelectAll: function(){
  this.SelectIndices();
 },
 UnselectAll: function(){
  this.UnselectIndices();
 },
 SelectIndices: function(indices){
  this.LockSelectionEvents();
  this.GetItemSelectionHelper().SelectIndices(indices);
  this.UnlockSelectionEvents();
 },
 SelectItems: function(items){
  this.LockSelectionEvents();
  this.GetItemSelectionHelper().SelectItems(items);
  this.UnlockSelectionEvents();
 },
 SelectValues: function(values){
  this.LockSelectionEvents();
  this.GetItemSelectionHelper().SelectValues(values);
  this.UnlockSelectionEvents();
 },
 UnselectIndices: function(indices){
  this.LockSelectionEvents();
  this.GetItemSelectionHelper().UnselectIndices(indices);
  this.UnlockSelectionEvents();
 },
 UnselectItems: function(items){
  this.LockSelectionEvents();
  this.GetItemSelectionHelper().UnselectItems(items);
  this.UnlockSelectionEvents();
 },
 UnselectValues: function(values){
  this.LockSelectionEvents();
  this.GetItemSelectionHelper().UnselectValues(values);
  this.UnlockSelectionEvents();
 },
 GetIsItemSelected: function(index){
  return this.GetItemSelectionHelper().GetIsItemSelected(index);
 },
 GetFocusedIndex: function(){
  return this.GetItemSelectionHelper().GetFocusedIndex();
 },
 UpdateInternalState: function(){
  this.UpdateHiddenInputs();
 },
 IsUpdateHiddenInputsLocked: function(){
  return this.GetItemSelectionHelper().IsUpdateInternalSelectionStateLocked();
 },
 UpdateHiddenInputs: function(){
  if(this.IsUpdateHiddenInputsLocked())
   return;
  if(this.MultiSelectionMode()){ 
   var element = this.FindStateInputElement();
   if(ASPx.IsExistsElement(element)) {
    var sb = [ ];
    var serialiser = this.GetSerializingHelper();
    var selectedIndices = this.GetSelectedIndices();
    for(var i = 0; i < selectedIndices.length; i++)
     serialiser.SerializeAtomValue(sb, this.GetItemValue(selectedIndices[i]));
    element.value = sb.join("");
   }
  } else 
   ASPxClientListBoxBase.prototype.UpdateHiddenInputs.call(this);
 },
 UseDelayedSpecialFocus: function() { 
  return true;
 },
 GetInnerEditors: function() {
  var result = ASPxClientListBoxBase.prototype.GetInnerEditors();
  if(this.filteringTextBox) {
   result.push(this.filteringTextBox);
  }
  return result;
 },
 AdjustWidthInDropDown: function(parentComboBoxMainElement, isCallbackMode, customWidth) {
  var lbScrollDiv = this.GetScrollDivElement();
  var lbMainElement = this.GetMainElement();
  var scrollWidth = 0;
  if (this.IsMultiColumn() && isCallbackMode && this.GetScrollSpacerVisibility(false) && this.GetBottomScrollSpacerHeight() == 0)
   this.SetBottomScrollSpacerVisibility(true);
  var keepCurrentWidth = this.HasVirtualScrolling() && this.hasDecoratedItems && this.isComboBoxScrollingCallbackProcessing;
  if(!keepCurrentWidth) {
   lbMainElement.style.width = "";
   lbScrollDiv.style.paddingRight = "0px";
   lbScrollDiv.style.width = "100%";
  }
  else
   this.isComboBoxScrollingCallbackProcessing = false;
  if (customWidth != "") {
   lbMainElement.style.width = customWidth;
   var width = lbMainElement.clientWidth;
   var scrollInfo = this.SetScrollDivAndCorrectionForScroll(width, false);
   width = scrollInfo.scrollDivWidth;
   scrollWidth = scrollInfo.scrollWidth;
   if(!this.enableEllipsis) {
    var difference = this.GetItemsWidth() - lbScrollDiv.clientWidth;
    if (difference > 0) {
     lbMainElement.style.width = (lbMainElement.offsetWidth + difference) + "px";
     lbScrollDiv.style.width = (lbMainElement.clientWidth) + "px";
    }
   }
  } else {
   var width = this.GetItemsWidth();
   var scrollInfo = this.SetScrollDivAndCorrectionForScroll(width, true);
   width = scrollInfo.scrollDivWidth;
   scrollWidth = scrollInfo.scrollWidth;
   if (ASPx.Browser.Firefox && lbMainElement.offsetWidth < lbScrollDiv.offsetWidth)
    lbMainElement.style.width = "0%"; 
   if (parentComboBoxMainElement) {
    var widthDifference = parentComboBoxMainElement.offsetWidth - lbMainElement.offsetWidth;
    if (widthDifference > 0) {
     this.scrollDivMinWidth = width + widthDifference;
     lbScrollDiv.style.width = this.scrollDivMinWidth + "px";
     var twoBorderSize = (lbMainElement.offsetWidth - lbMainElement.clientWidth);
     lbMainElement.style.width = (width + widthDifference + twoBorderSize) + "px"; 
    }
   }
  }
  if (this.IsMultiColumn())
   this.CorrectMultiColumnHeaderWidth(scrollWidth);
  if (this.NeedToHandleCellWidth())
   this.CorrectCellNullWidthStyle(this.itemsManager.GetFirstVisibleItemRow());
  if (this.ContainsFixWidthRow()) {
   var lbHeaderDiv = this.GetHeaderDivElement();
   if (lbHeaderDiv)
    lbScrollDiv.style.width = lbHeaderDiv.offsetWidth - ASPx.GetLeftRightBordersAndPaddingsSummaryValue(lbScrollDiv) + "px";
  }
  return lbScrollDiv.offsetWidth;
 },
 SetScrollDivAndCorrectionForScroll: function(width, widthByContent) {
  var lbScrollDiv = this.GetScrollDivElement();
  var scrollWidth = this.GetVerticalScrollBarWidth();
  var browserCanHaveScroll = this.GetVerticalOverflow(lbScrollDiv) == "auto";
  if (widthByContent && browserCanHaveScroll)
   width += scrollWidth;
  lbScrollDiv.style.width = width + "px";
  return { scrollDivWidth: width, scrollWidth: scrollWidth };
 },
 BeforeAdjustHeightInDropDown: function() {
  this.GetMainElement().style.height = "0px";
 },
 AdjustHeightInDropDown: function(customHeight, visibleRowCount) {
  this.BeforeAdjustHeightInDropDown();
  if(this.itemsManager.smallestItemHeight === 0)
   this.itemsManager.updateSmallestItemSize();
  var lbHeight = 0;
  if (customHeight == "")
   lbHeight = this.GetHeightByContent(visibleRowCount);
  else
   lbHeight = this.GetHeightByServerValue(customHeight);
  this.itemsManager.Adjust(); 
  this.InitializePageSize();
  return lbHeight;
 },
 GetHeightByContent: function(visibleRowCount) {
  var lbScrollDiv = this.GetScrollDivElement(),
   itemCount = this.GetVisibleItemCount(),
   hasVerticalScrollbar = itemCount > visibleRowCount;
  lbScrollDiv.style.height = "";
  var height = 0;
  if (hasVerticalScrollbar)
   height = this.itemsManager.GetTotalItemsHeight(0, visibleRowCount - 1);
  else {
   if(itemCount !== 0) {
    height = this.GetItemsHeight();
   }
  }
  height += "px";
  lbScrollDiv.style.height = height;
  height = lbScrollDiv.offsetHeight;
  height += ASPx.GetTopBottomBordersAndPaddingsSummaryValue(this.GetMainElement());
  var lbHeaderDiv = this.GetHeaderDivElement();
  if (ASPx.IsExists(lbHeaderDiv))
   height += lbHeaderDiv.offsetHeight;
  return height;
 },
 GetHeightByServerValue: function(customHeight) {
  var lbMainElement = this.GetMainElement();
  var lbScrollDiv = this.GetScrollDivElement();
  var height = customHeight;
  lbMainElement.style.height = "0px";
  lbScrollDiv.style.height = "0px";
  lbMainElement.style.height = height;
  var trueLbOffsetHeight = lbMainElement.offsetHeight;
  var trueLbClientHeight = lbMainElement.clientHeight;
  lbScrollDiv.style.height = lbMainElement.clientHeight + "px";
  var lbHeightCorrection = lbMainElement.offsetHeight - trueLbOffsetHeight;
  lbScrollDiv.style.height = (trueLbClientHeight - lbHeightCorrection) + "px";
  height = lbMainElement.offsetHeight;
  return height;
 },
 GetLoadingParentElement: function() {
  return this.GetScrollDivElement().parentNode;
 },
 ShowLoadingPanel: function() { 
  if(!this.isComboBoxList){
   var loadingParentElement = this.GetLoadingParentElement();
   var lp = this.CreateLoadingPanelWithAbsolutePosition(loadingParentElement);
   this.PreventMouseWheelOnElement(lp);
  }
 },
 ShowLoadingDiv: function () {
  if(!this.isComboBoxList){
   var loadingParentElement = this.GetLoadingParentElement();
   var ld = this.CreateLoadingDiv(loadingParentElement);
   this.PreventMouseWheelOnElement(ld);
  }
 },
 PreventMouseWheelOnElement: function(element) {
  if(!element) return;
  var wheelEventName = ASPx.Evt.GetMouseWheelEventName();
  ASPx.Evt.AttachEventToElement(element, wheelEventName, function(evt) {
   if(this.scrollHelper.GetIsAnySpacerVisible())
    ASPx.Evt.PreventEvent(evt);
  }.aspxBind(this));
 },
 ParseCallbackResult: function(result, shouldSelectSilentDelegate){
  var gottenEgdeOfCollection = false;
  var isLoadindToTopByScroll = this.scrollHelper.IsScrolledToTopSpacer();
  if(result[CONSTANTS.CALLBACK_RESULTS.ITEMS].length) {
   var deserializedItems = this.DeserializeItems(result[CONSTANTS.CALLBACK_RESULTS.ITEMS]);
   this.LoadItemsFromCallback(isLoadindToTopByScroll, deserializedItems, shouldSelectSilentDelegate);
   gottenEgdeOfCollection = deserializedItems.length < this.callbackPageSize;
  }
  var noMoreItemsForLoadThisDirection = !result[CONSTANTS.CALLBACK_RESULTS.ITEMS].length || gottenEgdeOfCollection;
  this.SetScrollSpacerVisibility(isLoadindToTopByScroll, !noMoreItemsForLoadThisDirection);
  this.scrollHelper.Reset();
 },
 LoadItemsFromCallback: function(isToTop, deserializedItems, shouldSelectSilentDelegate){
  this.LockSynchronizationOnInternalCallback();
  this.BeginUpdate();
  var isMultiSelect = this.MultiSelectionMode();
  this.RemoveAccessibilityHeaderRow();
  if(isToTop){
   var scrollHeightCorrection = 0;
   for(var i = deserializedItems.length - 1; i >= 0; i--) {
    this.InsertItemInternal(0, deserializedItems[i]);
    scrollHeightCorrection += this.GetItemHeight(0);
   } 
   this.GetScrollDivElement().scrollTop += scrollHeightCorrection;
   this.serverIndexOfFirstItem -= deserializedItems.length;
   if(this.serverIndexOfFirstItem < 0) this.serverIndexOfFirstItem = 0;
  } else {
   for(var i = 0; i < deserializedItems.length; i++) {
    var itemIndex = this.AddItemInternal(deserializedItems[i]);
    var shouldSelectSilent = shouldSelectSilentDelegate && shouldSelectSilentDelegate(deserializedItems[i].value, deserializedItems[i].text);
    this.SelectValueOnLoad(itemIndex, deserializedItems[i].selected, shouldSelectSilent, isMultiSelect);
   } 
  }
  if(this.changeSelectAfterCallback != 0) {
   var newIndex = this.GetSelectedIndex() + this.changeSelectAfterCallback;
   newIndex = this.GetAdjustedIndex(newIndex);
   this.SelectIndexSilent(newIndex);
   if(this.scrollHelper.isScrolledToTopSpacer)
    this.ScrollItemToTop(newIndex);
   else
    this.MakeItemVisible(newIndex);
  }
  this.AddAccessibilityHeaderRow();
  this.EndUpdate();
  this.UnlockSynchronizationOnInternalCallback();
 },
 SelectValueOnLoad: function (index, selected, shouldSelectSilent, isMultiSelect) {
  if(selected && this.changeSelectAfterCallback == 0) {
   if(isMultiSelect) {
    this.SelectIndices([index]);
   } else {
    if(shouldSelectSilent)
     this.SelectIndexSilent(index);
    else
     this.SelectIndex(index);
   }
  }
 },
 CreateSerializingHelper: function(){
  return new ListBoxItemsSerializingHelper(this);
 },
 InCallback: function(){
  var callbackOwner = this.GetCallbackOwnerControl();
  if(callbackOwner != null)
   return callbackOwner.InCallback();
  return ASPxClientListEdit.prototype.InCallback.call(this);
 },
 GetItemsRangeForLoad: function(){
  return this.scrollHelper.GetItemsRangeForLoad();
 },
 GetScrollSpacerElement: function(isTop){
  return document.getElementById(this.name + (isTop ? lbTSIdSuffix : lbBSIdSuffix));
 },
 GetScrollSpacerVisibility: function(isTop){
  if(!this.clientEnabled)
   return false;
  return isTop ? this.isTopSpacerVisible : this.isBottomSpacerVisible;
 },
 SetScrollSpacerVisibility: function(isTop, visibility){
  this.LockScrollHandler();
  var spacer = this.GetScrollSpacerElement(isTop);
  if(spacer){
   if(visibility)
    spacer.style.height = this.GetRequiredScrollSpacerHeight() + "px";
   if(this.clientEnabled){
    if(isTop)
     this.isTopSpacerVisible = visibility;
    else
     this.isBottomSpacerVisible = visibility;
   }
   if(ASPx.GetElementDisplay(spacer) != visibility){
    ASPx.SetElementDisplay(spacer, visibility);
    ASPx.GetElementVisibility(spacer, visibility);
   }
  }
  this.itemsManager.OnScrollSpacerVisibilityChanged();
  this.UnlockScrollHandler();
 },
 GetRequiredScrollSpacerHeight: function() {
  return this.GetScrollDivElement().clientHeight;
 },
 SetTopScrollSpacerVisibility: function(visibility){
  this.SetScrollSpacerVisibility(true, visibility);
 },
 SetBottomScrollSpacerVisibility: function(visibility){
  this.SetScrollSpacerVisibility(false, visibility);
 },
 GetTopScrollSpacerHeight: function(){
  return this.GetScrollSpacerVisibility(true) ? this.GetScrollSpacerElement(true).clientHeight : 0;
 },
 GetBottomScrollSpacerHeight: function(){
  return this.GetScrollSpacerVisibility(false) ? this.GetScrollSpacerElement(false).clientHeight : 0;
 },
 GetTopSpacersHeight: function() {
  return this.itemsManager.GetTopSpacersHeight();
 },
 SendCallback: function(onSuccess) {
  if(!this.InCallback()){
   this.ShowLoadingElements();
   var callbackOwner = this.GetCallbackOwnerControl();
   if(callbackOwner != null)
    callbackOwner.SendCallback(onSuccess);
   else {
    var argument = this.GetCallbackArguments();
    this.CreateCallback(argument, null, onSuccess);
   }
  }
 },
 OnCallback: function(result, shouldSelectSilentDelegate) {
  if(result.serverMode)
   this.UpdateStateObjectWithObject({serverMode: true});
  if(!this.filterStrategy || !this.filterStrategy.ShouldDiscardCallbackResult()) {
   this.ParseCallbackResult(result, shouldSelectSilentDelegate);
   if(!this.isComboBoxList)
    this.filterStrategy.OnCallback(result);
   this.OnCallbackFinally();
  }
 },
 OnCallbackError: function(result){
  ASPxClientListBoxBase.prototype.OnCallbackError.call(this, result);
  this.OnCallbackFinally();
 },
 OnCallbackFinally: function () {
  this.HideLoadingPanel();
  this.changeSelectAfterCallback = 0;
 },
 DoEndCallback: function() {
  this.filterStrategy.OnBeforeDoEndCallback();
  ASPxClientListBoxBase.prototype.DoEndCallback.call(this);
  this.filterStrategy.OnAfterDoEndCallback();
 },
 RaiseEndCallback: function() {
  if(this.preventEndCallbackRising)
   this.preventEndCallbackRising = false;
  else
   ASPxClientListBoxBase.prototype.RaiseEndCallback.call(this);
 },
 LockScrollHandler: function(){
  this.scrollHandlerLockCount ++;
 },
 UnlockScrollHandler: function(){
  this.scrollHandlerLockCount --;
 },
 IsScrollHandlerLocked: function(){
  return this.scrollHandlerLockCount > 0;
 },
 OnScroll: function(){
  if(this.IsScrollHandlerLocked()) return;
  if(this.IsVisible() && !this.InCallback() && ( this.GetScrollSpacerVisibility(true) || this.GetScrollSpacerVisibility(false))) {
   this.scrollHelper.OnScroll();
   if(this.scrollHelper.GetIsNeedToHideTopSpacer())
    this.SetTopScrollSpacerVisibility(false);
   if(this.scrollHelper.GetIsNeedCallback()) {
    this.isComboBoxScrollingCallbackProcessing = this.isComboBoxList;
    this.SendCallback();
   }
  }
 },
 OnBrowserWindowResize: function(e) {
  if(this.IsVisible())
   this.CorrectSize();
 },
 KeyboardSupportAllowed: function(){
  return !this.CheckColumnSelectionMode();
 },
 InitializeKeyHandlers: function() {
  if(this.KeyboardSupportAllowed()){
   this.AddKeyDownHandler(ASPx.Key.PageUp, "OnPageUp");
   this.AddKeyDownHandler(ASPx.Key.PageDown, "OnPageDown");
   this.AddKeyDownHandler(ASPx.Key.End, "OnEndKeyDown");
   this.AddKeyDownHandler(ASPx.Key.Home, "OnHomeKeyDown");
   this.AddKeyDownHandler(ASPx.Key.Up, "OnArrowUp");
   this.AddKeyDownHandler(ASPx.Key.Down, "OnArrowDown");
  } else if(this.accessibilityCompliant && !this.IsNativeCheckBoxes()) {
   this.AddKeyDownHandler(ASPx.Key.Up, "OnAccessArrowUp");
   this.AddKeyDownHandler(ASPx.Key.Down, "OnAccessArrowDown");
  }
 },
 OnArrowUp: function(evt){
  if(this.isInitialized)
   this.SelectNeighbour(-1);
  return true;
 },
 OnArrowDown: function(evt){
  if(this.isInitialized)
   this.SelectNeighbour(1);
  return true;
 },
 OnAccessArrowUp: function(evt){
  if(!this.isInitialized) return true;
  var index = this.GetFocusedIndex();
  var isItemCheckBoxFocused = this.GetInternalCheckBox(index) && this.GetInternalCheckBox(index).focused;
  var isSelectAllCheckBoxFocused = this.selectAllCheckBox && this.selectAllCheckBox.focused;
  if(index > this.GetFirstFilteredItemIndex() && isItemCheckBoxFocused)
   this.SetFocusedIndex(this.GetPrevFilteredItemIndex(index));
  else if(index == this.GetFirstFilteredItemIndex() && this.selectAllCheckBox && !isSelectAllCheckBoxFocused) {
   this.selectAllCheckBox.mainElement.focus();
   this.GetItemSelectionHelper().SetFocusedIndexInternal(index, false);
  }
  else
   this.SetFocusedIndex(this.GetLastFilteredItemIndex());
  return true;
 },
 OnAccessArrowDown: function(evt){
  if(!this.isInitialized) return true;
  var index = this.GetFocusedIndex();
  var isItemCheckBoxFocused = this.GetInternalCheckBox(index) && this.GetInternalCheckBox(index).focused;
  var isSelectAllCheckBoxFocused = this.selectAllCheckBox && this.selectAllCheckBox.focused;
  if(index < this.GetLastFilteredItemIndex() && isItemCheckBoxFocused)
   this.SetFocusedIndex(this.GetNextFilteredItemIndex(index));
  else if(index == this.GetLastFilteredItemIndex() && this.selectAllCheckBox && !isSelectAllCheckBoxFocused) {
   this.selectAllCheckBox.mainElement.focus();
   this.GetItemSelectionHelper().SetFocusedIndexInternal(index, false);
  }
  else
   this.SetFocusedIndex(this.GetFirstFilteredItemIndex());
  return true;
 },
 SetFocusedIndex: function(index) {
  if(this.GetIsCheckColumnExists()) {
   this.MakeItemVisible(index);
   setTimeout(function () { this.GetInternalCheckBox(index).mainElement.focus(); }.aspxBind(this), 0);
  }
  this.GetItemSelectionHelper().SetFocusedIndexInternal(index, false);
 },
 OnPageUp: function(evt){
  if(this.isInitialized)
   this.SelectNeighbour(-this.scrollPageSize);
  return true;
 },
 OnPageDown: function(evt){
  if(this.isInitialized)
   this.SelectNeighbour(this.scrollPageSize);
  return true;
 },
 OnHomeKeyDown: function(evt){
  if(this.isInitialized)
   this.SelectNeighbour(-this.GetItemCount());
  return true;
 },
 OnEndKeyDown: function(evt){
  if(this.isInitialized)
   this.SelectNeighbour(this.GetItemCount());
  return true;
 },
 GetAdjustedIndex: function(index){
  if(index < 0) index = 0;
  else{
   var itemCount = this.GetItemCount();
   if(index >= itemCount) index = itemCount - 1;
  }
  return index;
 },
 SelectNeighbour: function (step) {
  var itemCount = this.GetItemCount();
  if(itemCount > 0) {
   this.changeSelectAfterCallback = 0;
   var selectedIndex = this.GetFocusedIndex();
   var newSelectedIndex = this.GetNewSelectedIndex(selectedIndex, step);
   newSelectedIndex = this.GetAdjustedIndex(newSelectedIndex);
   if(selectedIndex != newSelectedIndex && this.IsItemFiltered(newSelectedIndex)) {
    this.LockScrollOnKBNavigation();
    this.SetSelectedIndexCore(newSelectedIndex);
    this.UnlockScrollOnKBNavigation();
   }
   if(this.GetIsNeedToCallbackLoadItemsToTop(newSelectedIndex, step, itemCount)) {
    this.LoadItemsOnCallback(true, newSelectedIndex);
   } else if(this.GetIsNeedToCallbackLoadItemsToBottom(newSelectedIndex, step, itemCount)) {
    this.LoadItemsOnCallback(false, newSelectedIndex);
   }
   this.itemsManager.MakeItemVisible(newSelectedIndex);
  }
 },
 GetNewSelectedIndex: function(selectedIndex, step) {
  var pageDownSize = step == 1 ? this.scrollPageSize + 1 : this.scrollPageSize; 
  var isFirstPageDown = selectedIndex == -1 && step == pageDownSize && step > 1;
  if(isFirstPageDown)
   step++;
  var newSelectedIndex = 0;
  var areThereUnfilteredItems = this.GetVisibleItemCount() < this.GetItemCount();
  if(areThereUnfilteredItems)
   newSelectedIndex = this.itemsManager.GetNewItemIndexInFilteredRange(selectedIndex, step);
  else
   newSelectedIndex = selectedIndex + step;
  return newSelectedIndex;
 },
 GetIsNeedToCallbackLoadItemsToTop: function(selectedIndex, step, itemCount){
  return this.isCallbackMode && this.GetScrollSpacerVisibility(true) && 
   this.serverIndexOfFirstItem > 0 && ((step < 0 && selectedIndex <= 0) || step <= -itemCount);
 },
 GetIsNeedToCallbackLoadItemsToBottom: function(selectedIndex, step, itemCount){
  return this.isCallbackMode && this.GetScrollSpacerVisibility(false) && 
   ((step > 0 && selectedIndex >= itemCount - 1) || step >= itemCount);
 },
 LoadItemsOnCallback: function(isToTop, index){
  this.changeSelectAfterCallback = index - this.GetSelectedIndex();
  this.scrollHelper.SetItemsRangeForLoad(isToTop);
  this.isComboBoxScrollingCallbackProcessing = this.isComboBoxList;
  this.SendCallback();
 },
 FindInputElement: function(){
  if(this.accessibilityCompliant)
   return this.isComboBoxList ? null : this.GetAccessibilityAssistantElement();
  return this.GetKBSInput();
 },
 GetKBSInput: function() {
  return this.GetChildElement("KBS");
 },
 GetAccessibilityActiveElements: function() {
  var accessibilityElements = [];
  if(this.CheckColumnSelectionMode()) {
   for(var i = 0; i < this.GetItemCount() ; i++) {
    var checkBoxFocusableElement = this.GetCheckBoxFocusableElement(i);
    if(checkBoxFocusableElement)
     accessibilityElements.push(checkBoxFocusableElement);
   }
  }
  accessibilityElements.push(this.accessibilityCompliant ? this.GetAccessibilityHelper().GetActiveElement() : this.GetInputElement());
  return accessibilityElements;
 },
 SetHoverElement: function(element){
  ASPx.GetStateController().SetCurrentHoverElementBySrcElement(element);
 },
 InitOnContainerMadeVisible: function(){
  this.AdjustControl();
 },
 ClearItemsCore: function(){
  this.itemsManager.ClearItems();
  this.EnsureFixWidthRow();
  this.AddAccessibilityHeaderRow();
  this.OnItemsCleared();
  this.SetValue(null);
 },
 OnItemsCleared: function(){
  this.GetItemSelectionHelper().OnItemsCleared();
 },
 CorrectCellWidthsOnFirstRowItemReplacement: function(oldFirstRowItemIndex, newFirstRowItemIndex) {
  if (!this.ContainsFixWidthRow() && !this.HasVirtualScrolling()) {
   var oldFirstRowItemHasTemplate = this.ItemRowHasTemplate(oldFirstRowItemIndex);
   var newFirstRowItemHasTemplate = this.ItemRowHasTemplate(newFirstRowItemIndex);
   if(!oldFirstRowItemHasTemplate && !newFirstRowItemHasTemplate)
    this.CopyCellWidths(oldFirstRowItemIndex, newFirstRowItemIndex);
  }
 },
 CopyCellWidths: function(sourceRowIndex, destinationRowIndex){
  var cellCount = this.GetItemCellCount();
  var sourceRow = this.GetItemRow(sourceRowIndex);
  var destRow = this.GetItemRow(destinationRowIndex);
  if (!sourceRow || !destRow) return; 
  var lastDestCellIndex = destRow.cells.length - 1;
  for(var i = 0; i < lastDestCellIndex; i++) {
   destRow.cells[i].style.width = sourceRow.cells[i].style.width;
  }
  if(destRow.cells.length === cellCount) {
   destRow.cells[lastDestCellIndex].style.width = sourceRow.cells[lastDestCellIndex].style.width;
  } else {
   var cellWidths = ASPx.Data.CollectionToArray(sourceRow.cells)
    .slice(lastDestCellIndex)
    .map(function(cell) { return ASPx.PxToInt(cell.style.width); })
    .reduce(function(accumulator, current) { return accumulator + current; }, 0);
   destRow.cells[lastDestCellIndex].style.width = cellWidths + "px";
  }
  if(this.NeedToHandleCellWidth())
   this.CorrectCellNullWidthStyle(destRow);
 },
 RemoveItem: function (index) {
  var firstRenderedItem = this.itemsManager.GetFirstRenderedItem();
  if (firstRenderedItem && index == firstRenderedItem.index && this.GetItemRow(firstRenderedItem.index + 1) !== null)
   this.CorrectCellWidthsOnFirstRowItemReplacement(firstRenderedItem.index, firstRenderedItem.index + 1);
  if (0 <= index && index < this.GetItemCount()) {
   this.UpdateSyncArraysItemDeleted(this.GetItem(index), true);
   this.itemsManager.RemoveItem(index);
   this.OnItemRemoved(index);
  }
 },
 GetItem: function(index, preventEncodeText) {
  return this.itemsManager.GetItem(index, preventEncodeText);
 },
 GetItemRowTexts: function(row) {
  var serializedTexts = this.GetTextsDataAttribute(row);
  if(ASPx.IsExists(serializedTexts))
   return JSON.parse(serializedTexts);
  var texts = [];
  var i = this.GetItemFirstTextCellIndex();
  var cellsLength = this.IsMultiColumn() ? row.cells.length : i + 1;
  for(; i < cellsLength; i++) {
   var textCell = row.cells[i];
   texts.push(ASPxClientListBox.GetItemCellInnerText(textCell));
  }
  return texts;
 },
 ItemRowHasTemplate: function(itemIndex) {
  var itemRow = this.GetItemRow(itemIndex);
  return itemRow ? this.ItemRowHasTemplateCore(itemRow) : false;
 },
 ItemRowHasTemplateCore: function(itemRow) {
  return this.ItemRowHasSerializedTextsAttr(itemRow);
 },
 ItemRowHasSerializedTextsAttr: function(itemRow) {
  return ASPx.Attr.IsExistsAttribute(itemRow, itemSerializedTextsAttributeName);
 },
 ItemCellHasTextAttr: function(itemTextCell) {
  return ASPx.Attr.IsExistsAttribute(itemTextCell, itemCellTextAttributeName);
 },
 GetFirstVisibleItem: function() {
  return this.itemsManager.GetFirstVisibleItem();
 },
 GetFirstFilteredItemIndex: function () {
  return this.itemsManager.GetFirstFilteredItemIndex();
 },
 GetLastFilteredItemIndex: function() {
  return this.itemsManager.GetLastFilteredItemIndex();
 },
 GetNextFilteredItemIndex: function(currentFilteredItemIndex) {
  return this.itemsManager.GetNextFilteredItemIndex(currentFilteredItemIndex);
 },
 GetPrevFilteredItemIndex: function(currentFilteredItemIndex) {
  return this.itemsManager.GetPrevFilteredItemIndex(currentFilteredItemIndex);
 },
 PerformCallback: function(arg, onSuccess) {
  this.SetScrollSpacerVisibility(true, false);
  this.SetScrollSpacerVisibility(false, false);
  this.ClearItemsForPerformCallback();
  this.serverIndexOfFirstItem = 0;
  this.SetScrollSpacerVisibility(true, false);
  this.SetScrollSpacerVisibility(false, false);
  this.FormatAndSetCustomCallbackArg(arg, true);
  this.SendCallback(onSuccess);
  this.FormatAndSetCustomCallbackArg(arg, false);
 },
 GetTableRowParent: function(table){
  if(table.tBodies.length > 0)
   return table.tBodies[0];
  return table;
 },
 ProtectWhitespaceSerieses: function(text){
  if(text == "") 
   text = nbsp;
  else {
   if(text.charAt(0) == ' ')
    text = nbsp + text.slice(1);
   if(text.charAt(text.length - 1) == ' ')
    text = text.slice(0, -1) + nbsp;
   text = text.replace(new RegExp("  ", "g"), " &nbsp;");
  }
  return text;
 }, 
 InsertItemInternal: function(index, itemProperties) {
  if(!this.hasSampleItem) 
   return;
  this.AdjustItemProperties(itemProperties);
  ASPx.Data.ArrayInsert(this.itemsValue, itemProperties.value, index);
  this.itemsManager.InsertItem(index, itemProperties);
  this.RegisterInsertedItem(index, itemProperties);
  this.OnItemInserted(index);
 },
 GetListTableRowBeforeNewItemRow: function (newItemIndex, listTable) {
  var lastRenderedItem = this.itemsManager.GetLastRenderedItem();
  if (!lastRenderedItem || lastRenderedItem.index < newItemIndex) {
   var lastItemRow = lastRenderedItem ? this.GetItemRow(lastRenderedItem.index) : null;
   var lastListTableRow = listTable.rows[listTable.rows.length - 1];
   if (lastItemRow)
    return lastItemRow === lastListTableRow ? null : lastItemRow.nextSibling;
   if (!!this.GetAccessibilityHeaderRow())
    return this.ContainsFixWidthRow() ? listTable.rows[1] : listTable.rows[0];
   return null;
  }
  for (var i = 0; i < listTable.rows.length; i++)
   if (this.GetItemIndexByRow(listTable.rows[i]) >= newItemIndex)
    return listTable.rows[i];
  return null;
 },
 AdjustItemProperties: function(itemProperties) {
  if(!itemProperties.texts || itemProperties.texts.length == 0)
   itemProperties.texts = [""];
  else if(typeof (itemProperties.texts) === "string")
   itemProperties.texts = [itemProperties.texts];
  if(typeof (itemProperties.value) === "undefined")
   itemProperties.value = itemProperties.texts[0];
  if(!ASPx.IsExists(itemProperties.imageUrl) || itemProperties.imageUrl === "")
   itemProperties.imageUrl = this.defaultImageUrl;
 },
 AddStateControllerClasses: function(itemId){
  var itemCellsIdPostfixes = this.GetItemCellsIdPostfixes();
  var sampleItemFirstTextCell = this.GetSampleItemFirstTextCell();
  var styleController = ASPx.GetStateController();
  var hoverStyleClasses = this.CreateStyleClasses(itemId, itemCellsIdPostfixes, 
      styleController.GetHoverElement(sampleItemFirstTextCell), ASPx.HoverItemKind);
  var selectedStyleClasses = this.CreateStyleClasses(itemId, itemCellsIdPostfixes, 
      styleController.GetSelectedElement(sampleItemFirstTextCell), ASPx.SelectedItemKind);
  var disabledStyleClasses = this.CreateStyleClasses(itemId, itemCellsIdPostfixes, 
      styleController.GetDisabledElement(sampleItemFirstTextCell), ASPx.DisabledItemKind);
    ASPx.AddHoverItems(this.name, hoverStyleClasses, true);
    ASPx.AddSelectedItems(this.name, selectedStyleClasses, true);
    ASPx.AddDisabledItems(this.name, disabledStyleClasses, true);
  ASPx.Attr.RemoveAttribute(sampleItemFirstTextCell, ASPx.CachedStatePrefix + ASPx.HoverItemKind);
  ASPx.Attr.RemoveAttribute(sampleItemFirstTextCell, ASPx.CachedStatePrefix + ASPx.SelectedItemKind);
  ASPx.Attr.RemoveAttribute(sampleItemFirstTextCell, ASPx.CachedStatePrefix + ASPx.DisabledItemKind);
 },
 RemoveStateControllerClasses: function(itemId){
  var itemCellsIdPostfixes = this.GetItemCellsIdPostfixes();
  var classes = [];
  classes[0] = [];
  classes[0][0] = [itemId];
  classes[0][1] = itemCellsIdPostfixes;
    ASPx.RemoveHoverItems(this.name, classes);
    ASPx.RemoveSelectedItems(this.name, classes);
    ASPx.RemoveDisabledItems(this.name, classes);
 },
 GetCellInfo: function(index, infoArray) {
  if(!infoArray) return null;
  var filteredArray = infoArray.filter(function(info) { return info.index === index; });
  return filteredArray.length ? filteredArray[0].value : null;
 },
 PrepareItem: function(newItemRow, itemProperties) {
  var i = 0;
  if(this.GetIsCheckColumnExists())
   i++;
  if(this.imageCellExists) {
   this.PrepareItemImage(newItemRow, i, itemProperties.imageUrl);
   i++;
  }
  if(itemProperties.htmlContent) {
   this.SetItemHtmlContent(newItemRow, itemProperties.htmlContent);
   this.SetTextsDataAttribute(newItemRow, itemProperties.texts);
  } else {
   this.SetItemTextContent(i, newItemRow, itemProperties);
  }
  this.AssignDecorationSettingsToElement(newItemRow, itemProperties.style, itemProperties.cssClass, itemProperties.tooltip, itemProperties.attributes);
 },
 LockRunStartupSciptsInItemRow: function() {
  this.lockRunStartupScipts = true;
 },
 UnlockRunStartupSciptsInItemRow: function() {
  this.lockRunStartupScipts = false;
 },
 IsRunStartupSciptsInItemRowLocked: function() {
  return this.lockRunStartupScipts;
 },
 EnsureStartupScriptsInContainer: function(container) {
  if(!this.InCallback() && !this.IsRunStartupSciptsInItemRowLocked())
   ASPx.RunStartupScripts(false, container);
 },
 SetItemHtml: function(index, html) {
  this.hasDecoratedItems = true;
  this.hasItemTemplate = true;
  this.EnsureFixWidthRow(true);
  this.itemsManager.SetItemHtml(index, html);
  this.ProcessItemRow(index, function(itemRow) {
   if(!this.ItemRowHasSerializedTextsAttr(itemRow))
    this.SetTextsDataAttribute(itemRow, this.GetItem(index).texts);
   this.SetItemHtmlContent(itemRow, html);
   this.itemsManager.OnDecoratedItemsRendering();
  }.bind(this));
 },
 SetTextsDataAttribute: function(itemRow, texts) { ASPx.Attr.SetAttribute(itemRow, itemSerializedTextsAttributeName, JSON.stringify(texts)); },
 GetTextsDataAttribute: function(itemRow) { return ASPx.Attr.GetAttribute(itemRow, itemSerializedTextsAttributeName); },
 SetItemTooltip: function(index, tooltip) {
  this.itemsManager.SetItemTooltip(index, tooltip);
  this.ProcessItemRow(index, function(itemRow) { this.SetElementTooltip(itemRow, tooltip); }.aspxBind(this));
 },
 SetItemAttribute: function(index, attributeName, attributeValue) {
  this.itemsManager.SetItemAttribute(index, attributeName, attributeValue);
  this.ProcessItemRow(index, function(itemRow) { ASPx.Attr.SetAttribute(itemRow, attributeName, attributeValue); }.aspxBind(this));
 },
 AddItemCssClass: function(index, className) {
  this.hasDecoratedItems = true;
  this.itemsManager.AddItemCssClass(index, className);
  this.ProcessItemRow(index, function(itemRow) {
   ASPx.AddClassNameToElement(itemRow, className);
   this.itemsManager.OnDecoratedItemsRendering();
  }.bind(this));
 },
 RemoveItemCssClass: function(index, className) {
  this.hasDecoratedItems = true;
  this.itemsManager.RemoveItemCssClass(index, className);
  this.ProcessItemRow(index, function(itemRow) {
   ASPx.RemoveClassNameFromElement(itemRow, className);
   this.itemsManager.OnDecoratedItemsRendering();
  }.bind(this));
 },
 SetItemTextCellHtml: function(itemIndex, textCellIndex, html) {
  this.hasDecoratedItems = true;
  this.itemsManager.SetItemTextCellHtml(itemIndex, textCellIndex, html);
  this.ProcessItemTextCell(itemIndex, textCellIndex, function(textCell) {
   if(!this.ItemCellHasTextAttr(textCell))
    this.SetItemCellTextDataAttribute(textCell, this.GetItem(itemIndex).texts[textCellIndex]);
   this.SetItemTextCellHtmlContent(textCell, html);
   this.itemsManager.OnDecoratedItemsRendering();
  }.aspxBind(this));
 },
 SetItemCellTextDataAttribute: function(textCell, text) {
  ASPx.Attr.SetAttribute(textCell, itemCellTextAttributeName, text);
 },
 SetItemTextCellTooltip: function(itemIndex, textCellIndex, tooltip) {
  this.itemsManager.SetItemTextCellTooltip(itemIndex, textCellIndex, tooltip);
  this.ProcessItemTextCell(itemIndex, textCellIndex, function(textCell) { this.SetElementTooltip(textCell, tooltip); }.aspxBind(this));
 },
 SetItemTextCellAttribute: function(itemIndex, textCellIndex, attributeName, attributeValue) {
  this.itemsManager.SetItemTextCellAttribute(itemIndex, textCellIndex, attributeName, attributeValue);
  this.ProcessItemTextCell(itemIndex, textCellIndex, function(textCell) { ASPx.Attr.SetAttribute(textCell, attributeName, attributeValue); }.aspxBind(this));
 },
 AddItemTextCellCssClass: function(itemIndex, textCellIndex, className) {
  this.hasDecoratedItems = true;
  this.itemsManager.AddItemTextCellCssClass(itemIndex, textCellIndex, className);
  this.ProcessItemTextCell(itemIndex, textCellIndex, function(textCell) {
   ASPx.AddClassNameToElement(textCell, className);
   this.itemsManager.OnDecoratedItemsRendering();
  }.bind(this));
 },
 RemoveItemTextCellCssClass: function(itemIndex, textCellIndex, className) {
  this.hasDecoratedItems = true;
  this.itemsManager.RemoveItemTextCellCssClass(itemIndex, textCellIndex, className);
  this.ProcessItemTextCell(itemIndex, textCellIndex, function(textCell) {
   ASPx.RemoveClassNameFromElement(textCell, className);
   this.itemsManager.OnDecoratedItemsRendering();
  }.bind(this));
 },
 ProcessItemRow: function(index, action) {
  var itemRow = this.GetItemRow(index);
  if(itemRow)
   action(itemRow);
 },
 ProcessItemTextCell: function(itemIndex, textCellIndex, action) {
  var itemTextCell = this.GetItemTextCell(itemIndex, textCellIndex);
  if(itemTextCell && !this.ItemRowHasTemplateCore(itemTextCell.parentNode))
   action(itemTextCell);
 },
 SetItemHtmlContent: function(itemRow, html) {
  var redundantCells = ASPx.Data.CollectionToArray(itemRow.cells)
   .slice(this.GetItemFirstTextCellIndex(), itemRow.cells.length - 1);
  redundantCells.forEach(function(cell) { itemRow.removeChild(cell); });
  var itemHtmlContainerCell = itemRow.cells[itemRow.cells.length - 1];
  ASPx.SetElementDisplay(itemHtmlContainerCell, this.GetVisibleColumnCount() !== 0);
  itemHtmlContainerCell.colSpan = Math.max(itemHtmlContainerCell.colSpan, this.GetVisibleColumnCount());
  if(this.IsMultiColumn()) {
   if(this.GetItemFirstTextCellIndex() === 0)
    ASPx.AddClassNameToElement(itemHtmlContainerCell, FIRST_CELL_MARKER_CSS_CLASS_NAME);
   ASPx.AddClassNameToElement(itemHtmlContainerCell, LAST_CELL_MARKER_CSS_CLASS_NAME);
  }
  itemHtmlContainerCell.style.width = "";
  itemHtmlContainerCell.innerHTML = html;
  this.RemoveEllipsisFromNode(itemHtmlContainerCell);
  this.EnsureStartupScriptsInContainer(itemHtmlContainerCell);
 },
 SetItemTextContent: function(textCellIndex, newItemRow, itemProperties) {
  var cellCount = this.GetItemCellCount();
  for(var j = 0; textCellIndex < cellCount; textCellIndex++, j++) {
   var cellStyle = this.GetCellInfo(j, itemProperties.cellStyles);
   var cellCssClass = this.GetCellInfo(j, itemProperties.cellCssClasses);
   var cellTooltip = this.GetCellInfo(j, itemProperties.cellTooltips);
   var cellAttributes = this.GetCellInfo(j, itemProperties.cellAttributes);
   var htmlContent = this.GetCellInfo(j, itemProperties.htmlContents);
   this.PrepareItemTextCell(newItemRow.cells[textCellIndex], itemProperties.texts[j], cellStyle, cellCssClass, cellTooltip, cellAttributes, htmlContent);
  }
 },
 SetItemTextCellHtmlContent: function(cell, html) {
  cell.innerHTML = html;
  this.RemoveEllipsisFromNode(cell);
  this.EnsureStartupScriptsInContainer(cell);
 },
 PrepareItemImage: function(newItemRow, imageCellIndex, imageUrl){
  var imageCell = newItemRow.cells[imageCellIndex];
  var image = ASPx.GetNodeByTagName(imageCell, "IMG", 0);
  if(!imageUrl) {
   if(image)
    ASPx.RemoveElement(image);
   imageCell.innerHTML = "&nbsp;";
  } else {
   if(!image) {
    image = document.createElement("IMG");
    imageCell.innerHTML = "";
    imageCell.appendChild(image);
   }
   ASPx.ImageUtils.SetImageSrc(image, imageUrl);
  }
 }, 
 PrepareItemTextCell: function(cell, text, style, cssClass, tooltip, attributes, htmlContent) {
  if(!ASPx.IsExists(text)) 
   text = "";
  if(this.encodeHtml)
   text = ASPx.Str.EncodeHtml(text);
  if(htmlContent) {
   this.SetItemTextCellHtmlContent(cell, htmlContent);
   this.SetItemCellTextDataAttribute(cell, this.ProtectWhitespaceSerieses(text));
  }
  else {
   cell.innerHTML = this.ProtectWhitespaceSerieses(text);
   if(this.enableEllipsis)
    ASPx.AddClassNameToElement(cell, ASPx.ELLIPSIS_MARKER_CLASS);
  }
  this.AssignDecorationSettingsToElement(cell, style, cssClass, tooltip, attributes);
  if(text == "")
   ASPx.Attr.SetAttribute(cell, "DXText", text);
 },
 AssignDecorationSettingsToElement: function(element, style, cssClass, tooltip, attributes) {
  if(cssClass)
   ASPx.AddClassNameToElement(element, cssClass);
  if(style) {
   var styleSheet = ASPx.GetCurrentStyleSheet();
   ASPx.AddClassNameToElement(element, ASPx.CreateImportantStyleRule(styleSheet, style));
  }
  if(tooltip)
   this.SetElementTooltip(element, tooltip);
  if(attributes)
   for(var key in attributes)
    if(attributes.hasOwnProperty(key))
     ASPx.Attr.SetAttribute(element, key, attributes[key]);
 },
 SetElementTooltip: function(element, tooltip) {
  this.RemoveEllipsisTooltip(element);
  ASPx.Attr.SetAttribute(element, "title", tooltip);
 },
 FormatText: function(texts, value) {
  if(typeof(texts) === "string")
   return texts;
  else if(!this.IsMultiColumn())
   return texts[0];
  else
   return this.FormatTextCore(texts, value);
 },
 FormatTextCore: function(texts, value) {
  var result = "";
  if(this.isComboBoxList) {
   if(this.nullValueItemDisplayText !== null && value === null)
    result = this.nullValueItemDisplayText;
   else
    result = ASPx.Formatter.Format(this.textFormatString, texts);
  } else
   result = texts.join("; ");
  return result;
 },
 OnItemInserted: function(index){
  this.GetItemSelectionHelper().OnItemInserted(index);
 },
 OnItemRemoved: function(index){
  this.GetItemSelectionHelper().OnItemRemoved(index);
 },
 CreateItemId: function(index){
  return lbIIdSuffix + index;
 },
 CreateItemClientId: function(index){
  return this.name + "_" + lbIIdSuffix + index;
 },
 CreateStyleClasses: function(id, postfixes, item, kind){
  var classes = [];
  if(item && item[kind]){
   classes[0] = [];
   classes[0][0] = item[kind].classNames;
   classes[0][1] = item[kind].cssTexts;
   classes[0][2] = [];
   classes[0][2][0] = id;
   classes[0][3] = postfixes;
  }
  return classes;
 },
 CorrectSizeByTimer: function(){
  if(this.APILockCount == 0 && this.IsDisplayed())
   window.setTimeout(function() { this.OnCorrectSizeByTimer(); }.aspxBind(this), 0);
 },
 FindFreeIndex: function(){
  return this.freeUniqIndex ++;
 },
 GetSampleItemRowID: function(){
  return this.name + "_" + lbSIIdSuffix;
 },
 GetAccessibilitySampleHeaderRowID: function() {
  return this.name + "_" + lbAIRTIdSuffix;
 },
 GetSampleItemRow: function(){
  if(this.SampleItem == null)
   this.SampleItem = ASPx.GetElementById(this.GetSampleItemRowID());
  return this.SampleItem;
 },
 GetAccessibilitySampleHeaderRow: function() {
  if(this.sampleHeaderRow == null)
   this.sampleHeaderRow = ASPx.GetElementById(this.GetAccessibilitySampleHeaderRowID());
  return this.sampleHeaderRow;
 },
 AddAccessibilityHeaderRow: function() {
  if(!this.HasAccessibilityHeaderRow()) return;
  var listTableBody = ASPx.GetChildByTagName(this.GetListTable(), "TBODY", 0);
  var headerRow = this.GetAccessibilitySampleHeaderRow().cloneNode(true);
  headerRow.id = this.GetAccessibilityHeaderRowID();
  listTableBody.appendChild(headerRow);
 },
 HasAccessibilityHeaderRow: function() {
  return this.accessibilityCompliant && this.IsMultiColumn();
 },
 GetAccessibilityHeaderRow: function() {
  return this.GetChildElement(lbAIRIdSuffix);
 },
 RemoveAccessibilityHeaderRow: function() {
  var headerRow = this.GetAccessibilityHeaderRow();
  if(headerRow)
   ASPx.RemoveElement(headerRow);
 },
 GetAccessibilityHeaderRowID: function() {
  return this.name + "_" + lbAIRIdSuffix;
 },
 GetSampleItemFirstTextCell: function(){
  if(!ASPx.IsExistsElement(this.sampleItemFirstTextCell)){
   var sampleItemRow = this.GetSampleItemRow();
   if(ASPx.IsExistsElement(sampleItemRow))
    this.sampleItemFirstTextCell = sampleItemRow.cells[this.imageCellExists ? 1 : 0];
  }
  return this.sampleItemFirstTextCell;
 },
 ChangeEnabledAttributes: function(enabled){
  this.ChangeListTableEvents(this.GetListTable(), ASPx.Attr.ChangeEventsMethod(enabled));
  var focusableElement = this.GetInputElement();
  if(focusableElement) {
   this.ChangeSpecialInputEnabledAttributes(focusableElement, ASPx.Attr.ChangeEventsMethod(enabled));
   if(this.accessibilityCompliant)
    this.ChangeFocusableElementTabIndex(focusableElement, enabled);
   else if(!this.isComboBoxList) {
    var changeMethod = enabled ? ASPx.Attr.RestoreTabIndexAttribute : ASPx.Attr.SaveTabIndexAttributeAndReset;
    changeMethod(focusableElement);
   }
  }
 },
 ChangeFocusableElementTabIndex: function(focusableElement, enabled) {
  if(!this.isComboBoxList) {
   if(enabled)
    ASPx.Attr.SetAttribute(focusableElement, "tabindex", "0");
   else
    focusableElement.removeAttribute("tabindex");
  }
 },
 ChangeEnabledStateItems: function(enabled){
  var controller = ASPx.GetStateController();
  controller.SetElementEnabled(this.GetMainElement(), enabled);
  var count = this.GetItemCount();
  var i = this.hasSampleItem ? -1 : 0 ;
  for(; i < count; i ++){
   this.ChangeEnabledStateItem(i, enabled, controller);
  }
  this.changeSelectAllElementsEnabledState(enabled);
  var changeEventMethod = ASPx.Attr.ChangeEventsMethod(enabled);
  if(this.filteringTextBox && !this.customFilteringEditorID) {
   this.filteringTextBox.SetEnabled(enabled);
   this.ChangeSpecialInputEnabledAttributes(this.filteringTextBox.GetInputElement(), changeEventMethod, true);
  }
  if(this.showFilterButton) {
   this.showFilterButton.SetEnabled(enabled);
   this.ChangeSpecialInputEnabledAttributes(this.showFilterButton.GetInternalButton(), changeEventMethod, true);
  }
 },
 ChangeEnabledStateItem: function (index, enabled, controller) {
  var element = this.GetItemFirstTextCell(index);
  if (element)
   controller.SetElementEnabled(element, enabled);
  if (this.GetIsCheckColumnExists() && index >= 0)
   this.SetCheckBoxEnabled(index, enabled);
 },
 ChangeListTableEvents: function(listTable, method){
  if(this.isComboBoxList){
   method(listTable, "mouseup", aspxLBIClick);
   if(ASPx.Browser.Firefox)
    method(listTable, "mousedown", ASPx.Evt.PreventEvent); 
  }
  else{
   method(listTable, "click", aspxLBIClick);   
   method(listTable, "dblclick", aspxLBIClick); 
   if(this.MultiSelectionMode())
    this.AttachSelectStartHandlerToElement(listTable);
  }
 },
 AttachSelectStartHandlerToElement: function(element) {
  ASPx.Evt.AttachEventToElement(element, "selectstart", aspxLBTSelectStart);
 },
 IsValueChanged: function(){
  return this.cachedValue != this.GetValue();
 },
 OnItemSelectionChanged: function(index, selected, fromSelectAllClick, forceValueChanged){
  if(this.CheckColumnSelectionMode() && !fromSelectAllClick)
   this.SetCheckBoxChecked(index, selected);
  if(!this.IsSelectionEventsLocked()) {
   this.SetRaiseSelectedIndexChangedArguments(this.autoPostBack, index, selected);
   var valueChanged = this.IsValueChanged() || forceValueChanged;
   if(valueChanged) {
    this.RaisePersonalStandardValidation();
    this.OnValueChanged();
   } else {
    if(this.RaiseSelectedIndexChanged())
     this.SendPostBackInternal("");
   }
  }
  this.CacheValue();
  if(this.accessibilityCompliant && !fromSelectAllClick)
   this.GetAccessibilityHelper().OnSelectedIndexChanged(index);
 },
 SetRaiseSelectedIndexChangedArguments: function(processOnServer, index, selected){
  this.selectedIndexChangedArguments = {
   processOnServer: processOnServer,
   index: index,
   selected: selected
  };
 },
 GetRaiseSelectedIndexChangedArguments: function(){
  if(!this.selectedIndexChangedArguments)
   this.SetRaiseSelectedIndexChangedArguments(false, this.GetSelectedIndex(), true);
  return this.selectedIndexChangedArguments;
 },
 RaiseSelectedIndexChanged: function (processOnServer) {
  this.RaiseValidationInternal();
  var savedArgs = this.GetRaiseSelectedIndexChangedArguments();
  processOnServer = savedArgs.processOnServer || processOnServer;
  if(!this.SelectedIndexChanged.IsEmpty()){
   var args = new ASPxClientListEditItemSelectedChangedEventArgs(savedArgs.index, savedArgs.selected, processOnServer);
   this.SelectedIndexChanged.FireEvent(this, args);
   processOnServer = args.processOnServer;
  }
  return processOnServer;
 },
 RaiseItemFiltering: function(item, filter, isFit) {
  if(!this.ItemFiltering.IsEmpty()) {
   var args = new ASPxClientListEditItemFilteringEventArgs(item, filter, isFit);
   this.ItemFiltering.FireEvent(this, args);
   isFit = args.isFit;
  }
  return isFit;
 },
 RaiseCustomHighlighting: function(filter, callbackHighlighting) {
  if(!this.CustomHighlighting.IsEmpty()) {
   var args = new ASPxClientListEditCustomHighlightingEventArgs(filter);
   args.highlighting = callbackHighlighting;
   this.CustomHighlighting.FireEvent(this, args);
   return args.highlighting;
  }
  return callbackHighlighting;
 },
 SetWidth: function(width) {
  this.width = width + "px";
  this.GetScrollDivElement().style.width = "100%";
  ASPxClientListBoxBase.prototype.SetWidth.call(this, width);
 },
 SetHeight: function(height) {
  this.heightCorrected = false;
  ASPxClientListBoxBase.prototype.SetHeight.call(this, height);
  this.CorrectHeight();
 },
 OnAssociatedLabelClick: function(focusableElement) {
  var isValidElement = focusableElement && ASPx.IsActionElement(focusableElement) && ASPx.GetIsParent(this.GetMainElement(), focusableElement);
  if(isValidElement)
   focusableElement.focus();
  else
   ASPxClientListBoxBase.prototype.OnDelayedSpecialFocusMouseDown.call(this, null);
 },
 TryApplyHighlighting: function() {
  var ownerControl = this.GetCallbackOwnerControl();
  var filterStrategy = ownerControl && ownerControl.filterStrategy ? ownerControl.filterStrategy : this.filterStrategy;
  if(filterStrategy && filterStrategy.ApplyHighlighting)
   filterStrategy.ApplyHighlighting();
 },
 onDropDownModalChanged: function(enabled) {
  if(!this.IsMultiColumn())
   return;
  if(enabled && !this.itemsManager.GetFirstVisibleItemRow())
   return;
  this.updateCellWidthsOnDropDownChanged(enabled);
 },
 updateCellWidthsOnDropDownChanged: function(enabled) {
  var applyFunction = this.getUpdateCellWidthsFunctionOnDropDownChanged(enabled);
  var sampleRow = this.GetSampleItemRow();
  var headerRow = this.GetHeaderTableElement().rows[0];
  var dataRows = this.itemsManager.GetListTableRows();
  for(var i = this.columnFieldNames.length - 1; i >= 0; i--) {
   applyFunction(sampleRow, i);
   applyFunction(headerRow, i);
   for(var row, j = 0; row = dataRows[j]; j++)
    applyFunction(row, i);
  }
 },
 getUpdateCellWidthsFunctionOnDropDownChanged: function(enabled) {
  if(enabled) {
   var row = this.itemsManager.GetFirstVisibleItemRow();
   var widths = Array.prototype.slice.call(row.cells, 0).map(function(cell) { return cell.offsetWidth; });
   var commonWidth = widths.reduce(function(a, b) { return a + b; }, 0);
   widths = widths.map(function(w) { return (w * 100) / commonWidth; });
   return function(row, cellIndex) {
    ASPx.Attr.ChangeStyleAttribute(row.cells[cellIndex], "width", widths[cellIndex] + "%");
   };
  }
  return function(row, cellIndex) {
   ASPx.Attr.RestoreStyleAttribute(row.cells[cellIndex], "width");
  };
 }
});
ASPxClientListBox.GetItemCellInnerText = function(itemTextCell) {
 var text;
 if(typeof(itemTextCell.attributes["DXText"]) != "undefined")
  text = ASPx.Attr.GetAttribute(itemTextCell, "DXText");
 else {
  var itemCellTextAttribute = ASPx.Attr.GetAttribute(itemTextCell, itemCellTextAttributeName);    
  text = ASPx.IsExists(itemCellTextAttribute) ? itemCellTextAttribute : ASPx.GetInnerText(itemTextCell);
 }
 text = text.replace(new RegExp(nbspChar, "g"), " ");
 return text;
};
var ASPxClientNativeListBox = ASPx.CreateClass(ASPxClientListBoxBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
 },
 InitializeEvents: function() {
  ASPxClientListBoxBase.prototype.InitializeEvents.call(this);
  if(!!this.GetMainElement()) {
   ASPx.Evt.AttachEventToElement(this.GetMainElement(), "keydown", this.OnKeyDown.aspxBind(this));
   ASPx.Evt.AttachEventToElement(this.GetMainElement(), "keyup", this.OnKeyUp.aspxBind(this));
   ASPx.Evt.AttachEventToElement(this.GetMainElement(), "keypress", this.OnKeyPress.aspxBind(this));
  }
 },
 SetReadOnlyInternal: function(readOnly) {
  ASPxClientListBoxBase.prototype.SetReadOnlyInternal.call(this, readOnly);
  var options = this.GetMainElement().querySelectorAll("option");
  for (var i = 0, option; option = options[i]; i++) {
   if (readOnly)
    ASPx.Attr.SetAttribute(option, "disabled", "disabled");
   else
    ASPx.Attr.RemoveAttribute(option, "disabled");
  }
 }, 
 SetMainElement: function(mainElement){
  this.mainElement = mainElement;
 },
 FindInputElement: function(){
  return this.GetMainElement();
 }, 
 GetOptionCount: function(){
  return this.GetMainElement().options.length;
 },
 GetOption: function(index){
  return this.GetMainElement().options[index];
 },
 GetItemCount: function(){
  return this.GetOptionCount();
 },
 SelectIndexSilent: function(index){
  var selectedIndex = this.GetSelectedIndexInternal();
  var isValidIndex = (-1 <= index && index < this.GetItemCount());
  if((selectedIndex != index && isValidIndex) || !this.isInitialized){
   this.SetSelectedIndexInternal(index);
   return true;
  }
  return false;
 },
 GetSelectedIndexInternal: function(){
  return this.GetMainElement().selectedIndex; 
 },
 SetSelectedIndexInternal: function(index){
  this.GetMainElement().selectedIndex = index; 
 },
 ClearItemsCore: function(){
  this.GetMainElement().innerHTML = "";
 },
 RemoveItem: function(index){
  if(0 <= index && index < this.GetItemCount()){
   var oldSelectedIndex = this.GetSelectedIndexInternal();
   this.UpdateSyncArraysItemDeleted(this.GetItem(index), true);
   var option = this.GetOption(index);
   this.GetMainElement().removeChild(option);
   this.UpdateOptionValues();
   this.OnItemRemoved(oldSelectedIndex, index);
  }
 },
 OnItemRemoved: function(oldSelectedIndex, newSelectedIndex){
  if(newSelectedIndex == oldSelectedIndex && !this.MultiSelectionMode())
   this.SetSelectedIndexInternal(-1);
 },
 MultiSelectionMode: function(){
  return this.GetMainElement().multiple;
 },
 GetItem: function(index){
  if(0 <= index && index < this.GetOptionCount()) {
   var text = this.GetOption(index).text;
   var selected = this.GetMainElement().options[index].selected;
   var itemValue = this.itemsValue[index] !== undefined ? this.itemsValue[index] : null;
   if(ASPx.IsExists(text))
    return new ASPxClientListBoxItem(this, index, text, itemValue, "", selected);
  }
  return null;
 },
 PerformCallback: function(arg) {
  this.ClearItemsForPerformCallback();
  this.FormatAndSetCustomCallbackArg(arg, true);
  this.SendCallback();
  this.FormatAndSetCustomCallbackArg(arg, false);
 },
 SendCallback: function(){
  if(!this.InCallback()){
   var callbackOwner = this.GetCallbackOwnerControl();
   if(callbackOwner != null)
    callbackOwner.SendCallback();
    else {
    var argument = this.GetCallbackArguments();
    this.CreateCallback(argument);
   }
  }
 },
 ParseCallbackResult: function(result){
  var deserializedItems = this.DeserializeItems(result[CONSTANTS.CALLBACK_RESULTS.ITEMS]);
  this.LoadItemsFromCallback(true, deserializedItems);
 },
 InsertItemInternal: function(index, itemProperties) {
  if(typeof (itemProperties.value) == "undefined")
   itemProperties.value = itemProperties.texts;
  var oldSelectedIndex = this.GetSelectedIndexInternal();
  var isAdd = this.GetOptionCount() <= index;
  var newOption = document.createElement("OPTION");
  if(isAdd)
   this.GetMainElement().appendChild(newOption);
  else
   this.GetMainElement().insertBefore(newOption, this.GetOption(index));
  newOption.innerHTML = itemProperties.texts;
  this.UpdateOptionValues();
  ASPx.Data.ArrayInsert(this.itemsValue, itemProperties.value, index);
  this.RegisterInsertedItem(index, itemProperties); 
  if(index == oldSelectedIndex && index != -1)
   this.SetSelectedIndex(index + 1);
 },
 UpdateOptionValues: function() {
  if(this.APILockCount == 0){
   for(var i = 0; i < this.GetOptionCount(); i++)
    this.GetOption(i).value = i;
  }
 },
 ChangeEnabledAttributes: function(enabled){
  if(!this.isComboBoxList) {
   this.GetMainElement().disabled = !enabled;
   this.ChangeSpecialInputEnabledAttributes(this.GetMainElement(), ASPx.Attr.ChangeEventsMethod(enabled), true);
  }
 },
 OnCallback: function(result) {
  this.ParseCallbackResult(result);
 },
 OnItemDblClick: function(){
  this.RaiseItemDoubleClick();
 },
 LoadItemsFromCallback: function(isToTop, deserializedItems){
  this.BeginUpdate();
  this.LockSynchronizationOnInternalCallback();
  var mainElement = this.GetMainElement();
  for(var i = deserializedItems.length - 1; i >= 0; i--) {
   this.InsertItemInternal(0, deserializedItems[i]);
   if(deserializedItems[i].selected)
    mainElement.options[0].selected = true;
  }
  this.UnlockSynchronizationOnInternalCallback();
  this.EndUpdate();
 },
 EndUpdate: function(){
  ASPxClientListBoxBase.prototype.EndUpdate.call(this);
  this.UpdateOptionValues();
 },
 GetSelectedIndices: function(){
  var selectedIndices = [];
  var mainElement = this.GetMainElement();
  for(var i = 0; i < mainElement.options.length; i++){
   if(mainElement.options[i].selected)
    selectedIndices.push(i);
  }
  return selectedIndices;
 },
 GetSelectedValues: function(){ 
  var selectedValues = [];
  var selectedIndices = this.GetSelectedIndices();
  for(var i = 0; i < selectedIndices.length; i++)
   selectedValues.push(this.GetItemValue(selectedIndices[i]));
  return selectedValues;
 },
 GetSelectedItems: function(){
  var selectedItems = [];
  var selectedIndices = this.GetSelectedIndices();
  for(var i = 0; i < selectedIndices.length; i++)
   selectedItems.push(this.GetItem(selectedIndices[i]));
  return selectedItems;
 },
 SelectAll: function(){
  this.SetAllItemsSelectedValue(true);
 },
 UnselectAll: function(){
  this.SetAllItemsSelectedValue(false);
 },
 SetAllItemsSelectedValue: function(selected){
  var mainElement = this.GetMainElement();
  for(var i = 0; i < mainElement.options.length; i++)
   mainElement.options[i].selected = selected;
 },
 SelectIndices: function(indices){
  this.SetIndicesSelectionState(indices, true);
 },
 UnselectIndices: function(indices){
  this.SetIndicesSelectionState(indices, false);
 },
 SetIndicesSelectionState: function(indices, selected){
  var mainElement = this.GetMainElement();
  for(var i = 0; i < indices.length; i++){
   mainElement.options[indices[i]].selected = selected;
  }
 },
 SelectItems: function(items){
  if(ASPx.IsExists(items))
   this.SetItemsSelectionState(items, true);
  else
   this.SelectAll();
 },
 UnselectItems: function(items){
  if(ASPx.IsExists(items))
   this.SetItemsSelectionState(items, false);
  else
   this.UnselectAll();
 },
 SetItemsSelectionState: function(items, selected){
  var mainElement = this.GetMainElement();
  for(var i = 0; i < items.length; i++){
   mainElement.options[items[i].index].selected = selected;
  }
 },
 SelectValues: function(values){
  this.SetValuesSelectedState(values, true);
 },
 UnselectValues: function(values){
  this.SetValuesSelectedState(values, false);
 },
 SetValuesSelectedState: function(values, selected){
  var mainElement = this.GetMainElement();
  var index;
  for(var i = 0; i < values.length; i++){
   index = this.FindItemIndexByValue(values[i]);
   mainElement.options[index].selected = selected;
  }
 },
 EnsureRequiredNativeAttributesExists: function() {
  var input = this.GetInputElement();
  if(!input.onchange)
   ASPx.Evt.AttachEventToElement(input, "change", function() { ASPx.EValueChanged(this.name); }.aspxBind(this));
 }
});
var AccessibilityHelperListBox = ASPx.CreateClass(ASPx.AccessibilityHelperBase, {
 constructor: function(listBox) {
  this.constructor.prototype.constructor.call(this, listBox);
  this.checkBoxRefocusTimeout = 1000;
  this.firstReadingColumnIndex = this.control.CheckColumnSelectionMode() ? 1 : 0;
  this.Initialize();
 },
 Initialize: function() {
  if(this.control.CheckColumnSelectionMode() && !this.control.IsNativeCheckBoxes())
   this.control.GotFocus.AddHandler(function() { this.SetActionElementFocus(); }.aspxBind(this));
  this.control.GotFocus.AddHandler(function() { this.OnSelectedIndexChanged(this.control.GetSelectedIndex()); }.aspxBind(this));
  this.control.LostFocus.AddHandler(function() { 
   setTimeout(function() { 
    this.changeActivityAttributes(this.getMainElement(), { "aria-activedescendant": "" }); 
   }.aspxBind(this), 200); 
  }.aspxBind(this));
 },
 OnSelectedIndexChanged: function(index) {
  var stateSelected = index != -1 && this.control.GetItem(index) && this.control.GetItem(index).selected;
  var selectedIndex = this.control.GetSelectedIndex();
  if(this.control.CheckColumnSelectionMode() || stateSelected || selectedIndex == -1)
   this.setSelectionAttributes(index, stateSelected);
 },
 getPronounceTimeout: function() {
  if(ASPx.Browser.WebKitFamily && this.control.CheckColumnSelectionMode())
   return 1000;
  return ASPx.AccessibilityHelperBase.prototype.getPronounceTimeout.call(this);
 },
 getHeaderCellCaptionText: function(index) {
  var headerDiv = this.control.GetHeaderDivElement();
  if(!headerDiv) return "";
  var headerTable = headerDiv.firstElementChild;
  return headerTable.rows[0].cells[this.firstReadingColumnIndex + index].textContent;
 },
 isItemCheckBoxFocused: function() {
  for(var i = 0; i < this.control.GetItemCount() ; i++) {
   var internalCheckBox = this.control.GetInternalCheckBox(i);
   if(internalCheckBox && internalCheckBox.focused)
    return true;
  }
  return false;
 },
 isSelectAllCheckBoxFocused: function() {
  return this.control.selectAllCheckBox && this.control.selectAllCheckBox.focused;
 },
 SetActionElementFocus: function() {
  if(this.control.enableFiltering) {
   if(!this.control.HasInternalFilteringTextBoxFocus())
    this.SetFilterPanelFocus();
  }
  else
   this.SetCheckBoxFocus();
 },
 SetCheckBoxFocus: function () {
  var isCheckBoxFocused = this.isItemCheckBoxFocused() || this.isSelectAllCheckBoxFocused();
  if(!isCheckBoxFocused)
   this.ProcessRefocusHandler(function() {
    this.control.SetFocusedIndex(0);
   }.aspxBind(this));
 },
 SetFilterPanelFocus: function() {
  if(this.control.customFilteringEditorID || ASPx.ElementHasCssClass(this.control.filterMainElement, this.control.GetInactiveFilterElementClassName())) {
   if(this.control.showFilterButton)
    this.ProcessRefocusHandler(function() {
     this.control.showFilterButton.Focus(); 
    }.aspxBind(this));
  } else 
    this.ProcessRefocusHandler(function() {
     ASPx.FindFirstChildActionElement(this.control.filterMainElement).focus(); 
    }.aspxBind(this));
 },
 ProcessRefocusHandler: function(handler) {
   setTimeout(function() {
   if(!this.control.focused) return;
   handler();
  }.aspxBind(this), this.checkBoxRefocusTimeout);
 },
 getTextForScreenReader: function(item) {
  var result = "";
  if(!this.control.IsMultiColumn()) {
   result= item.text;
  } else {
   var columnsCount = this.control.columnFieldNames.length;
   var formatString = ASPx.AccessibilitySR.TableItemFormatString;
   for(var i = 0; i < columnsCount; i++)
    result += ASPx.Str.ApplyReplacement(formatString, [["{0}", this.getHeaderCellCaptionText(i)], ["{1}", item.texts[i]]]);
  }
  return result;
 },
 setSelectionAttributes: function(index, stateSelected) {
  if(index == -1) index = 0;
  var item = this.control.GetItem(index);
  if(!item) return;
  var assistText = this.getTextForScreenReader(item);
  var activeItemArgs = {
   "role"    : "option",
   "aria-posinset" : index + 1,
   "aria-setsize"  : this.control.itemTotalCount,
   "aria-selected" : stateSelected
  };
  var inactiveItemArgs = {
   "role"    : "",
   "aria-posinset" : "",
   "aria-setsize"  : "",
   "aria-selected" : ""
  };
  this.PronounceMessage(assistText, activeItemArgs, inactiveItemArgs);
 },
 SetCheckBoxesValidationAttributes: function() {
  if(!this.control.CheckColumnSelectionMode() || !this.control.GetErrorCell()) return;
  var errorTextElement = this.control.ariaExplanatoryTextManager.GetErrorTextElement();
  for (var i = 0; i < this.control.GetItemCount() ; i++) {
   var checkBoxFocusableElement = this.control.GetCheckBoxFocusableElement(i);
   if(checkBoxFocusableElement) {
    ASPx.Attr.SetOrRemoveAttribute(checkBoxFocusableElement, "aria-describedby", !this.control.isValid ? errorTextElement.id : null);
    ASPx.Attr.SetOrRemoveAttribute(checkBoxFocusableElement, "aria-invalid", !this.control.isValid);
   }
  }
 }
});
ASPxClientListBox.Cast = ASPxClientControl.Cast;
var ASPxClientCheckListBase = ASPx.CreateClass(ASPxClientListEdit, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);          
  this.imageProperties = null;
  this.internalButtonCollection = null; 
  this.icbFocusedStyle = [];
  this.items = [];
 },
 SetData: function(data){
  ASPxClientEdit.prototype.SetData.call(this, data);
  if(data.items)
   this.CreateItems(data.items);
 },
 Initialize: function() {
  ASPxClientListEdit.prototype.Initialize.call(this);
  this.UpdateInternalSelectedIndex(); 
 },
 UpdateInternalSelectedIndex: function() {
  var selectedIndexFromServer = this.GetSelectedIndex();
  var stateInput = this.FindStateInputElement();
  if(stateInput) {
   var restoredSelectedIndex = stateInput.value;
   if(restoredSelectedIndex != '' && restoredSelectedIndex != selectedIndexFromServer) {
    this.SetSelectedIndex(selectedIndexFromServer);
    this.SetSelectedIndex(restoredSelectedIndex);
   }
  }
 },
 CreateButtonInternalCollection: function() { 
  this.internalButtonCollection = this.CreateCheckBoxInternalCollection();
  for(var i = 0; i < this.GetItemCount(); i++) {
   var icbInputElement = this.GetItemInput(i);
   var internalButton = this.internalButtonCollection.Add(icbInputElement.id, icbInputElement, this.GetItemElement(i));
   internalButton.CreateFocusDecoration(this.icbFocusedStyle);
   internalButton.SetEnabled(this.GetEnabled());
   internalButton.GetReadOnly = this.GetReadOnly.bind(this);
   internalButton.CheckedChanged.AddHandler(function(s, e) {
    this.OnItemClick(this.GetItemIndexByElement(ASPx.Evt.GetEventSource(e)));
   }.aspxBind(this));
   internalButton.Focus.AddHandler(function(s, e) {
    if(!this.focused)
     this.OnFocus();
   }.bind(this));
   internalButton.LostFocus.AddHandler(function(s, e) { this.OnLostFocus(); }.aspxBind(this));
   this.attachToCellsClick(i);
   this.PrepareInternalButton(internalButton, i);
  }
  this.attachToMainElementMouseDown();
 },
 CreateCheckBoxInternalCollection: function () {
  return new ASPx.CheckBoxInternalCollection(this.imageProperties, false, true, ASPx.CheckEditElementHelper.Instance, undefined,
   this.accessibilityCompliant);
 },
 CheckableElementsExist: function() {
  return !!this.imageProperties;
 },
 SetEnabled: function(enabled){
  ASPxClientListEdit.prototype.SetEnabled.call(this, enabled);
  var stateInput = this.FindStateInputElement();
  if(enabled)
   ASPx.Attr.RemoveAttribute(stateInput, "disabled");
  else
   ASPx.Attr.SetAttribute(stateInput, "disabled", "disabled");
 },
 SetFocus: function() {
  this.UpdateFocus(); 
 },
 UpdateFocus: function() {
 },
 IsElementBelongToInputElement: function(element) {
  return this.GetItemIndexByElement(element) != -1;
 },
 attachToCellsClick: function(index) {
  var element = this.GetItemElement(index);
  ASPx.Evt.AttachEventToElement(element, "click", function(evt) {
   var src = ASPx.Evt.GetEventSource(evt);
   var label = ASPx.CheckEditElementHelper.Instance.GetLabelElement(element);
   var button = this.internalButtonCollection.Get(this.GetItemInput(index).id);
   if(!ASPx.GetIsParent(button.mainElement, src) && src !== label && src.parentElement !== label) {
    ASPx.CheckEditElementHelper.Instance.InvokeClick(button, evt);
   }
  }.aspxBind(this));
 },
 attachToMainElementMouseDown: function() {
  var mainElement = this.GetMainElement();
  ASPx.Evt.AttachEventToElement(mainElement, "mousedown", function() {
   if(!this.enabled || this.readOnly)
    return;
   this.LockFocusEvents();
   setTimeout(function() { this.UnlockFocusEvents(); }.aspxBind(this), 0);
  }.aspxBind(this));
 },
 GetItemIndexByElement: function(element) {
  for(var i = 0; i < this.GetItemCount(); i++) {
   var itemElement = this.GetItemElement(i);
   if(ASPx.GetIsParent(itemElement, element))
    return i;
  }
  return -1;  
 },
 GetItemInput: function(index) {
  return this.GetChildElement("RB" + index + "_I");
 },
 GetItemElement: function(index) {
  return this.GetChildElement("RB" + index);
 },
 GetItemFocusableElement: function(index) {
  return this.accessibilityCompliant ? this.GetChildElement("RB" + index + "_I_D") : this.GetItemInput(index);
 },
 GetAccessibilityActiveElements: function() {
  var accessibilityElements = [];
  for(var i = 0; i < this.GetItemCount(); i++) 
   accessibilityElements.push(this.GetItemFocusableElement(i));
  return accessibilityElements;
 },
 GetItemCount: function() {
  return this.items.length;
 },
 OnItemClick: function(index) {
 },
 OnItemClickReadonly: function() {
  var index = this.GetSelectedIndexInternal();
  this.SelectIndexSilent(index);
 },
 UpdateHiddenInputs: function(index) {
  var stateInput = this.FindStateInputElement();
  if(ASPx.IsExistsElement(stateInput))
   stateInput.value = index;
  var valueInput = this.GetValueInputElement();
  if(ASPx.IsExistsElement(valueInput)) {
   var value = this.GetValue();
   valueInput.value = ASPx.IsExists(value) ? value : " ";
  }
 },
 GetItemValue: function(index){
  if(index > -1 && index < this.items.length) {
   if(typeof(this.items[index].value) == "string" && this.items[index].value == "" && this.convertEmptyStringToNull)
    return null;
   else
    return this.items[index].value;
  }
  return null;
 },
 SetValue: function(value) {
  for(var i = 0; i < this.items.length; i++) {
   if(this.GetItemValue(i) == value) {   
    this.SelectIndexSilent(i);
    return;
   }
  } 
  this.SelectIndexSilent(-1);    
 },
 CreateItems: function(itemsProperties){
  for(var i = 0; i < itemsProperties.length; i++)
   this.CreateItem(i, {
    texts: itemsProperties[i][0],
    value: this.GetDecodeValue(itemsProperties[i][1]),
    imageUrl: itemsProperties[i][2]
   });
 },
 CreateItem: function(index, itemProperties){
  var item = new ASPxClientListEditItem(this, index, itemProperties.texts, itemProperties.value, itemProperties.imageUrl);
  this.items.push(item);
 },
 GetItem: function(index){
  return (0 <= index && index < this.items.length) ? this.items[index] : null;
 },
 ChangeEnabledAttributes: function(enabled){
  if(!this.CheckableElementsExist()) {
   for(var i = 0; i < this.GetItemCount(); i++){
    var element = this.GetItemInput(i);
    if(element){
     this.ChangeItemEnabledAttributes(element, ASPx.Attr.ChangeAttributesMethod(enabled));
     this.ChangeSpecialInputEnabledAttributes(element, ASPx.Attr.ChangeEventsMethod(enabled), true);
     element.disabled = !enabled;
    }
   }
  } else {
   var selectedIndex = this.GetSelectedIndexInternal();
   this.UpdateCheckableElementDecorations(selectedIndex, enabled);
  }
 },
 ChangeEnabledStateItems: function(enabled){
  ASPx.GetStateController().SetElementEnabled(this.GetMainElement(), enabled);
  if(this.isNative){
   for(var i = 0; i < this.GetItemCount(); i++){
    var element = this.GetItemInput(i);
    if(element)
     ASPx.GetStateController().SetElementEnabled(element, enabled);
   }
  }
 },
 ChangeItemEnabledAttributes: function(element, method){
  method(element, "onclick");
 }
});
var ASPxClientRadioButtonList = ASPx.CreateClass(ASPxClientCheckListBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);          
 },
 InlineInitialize: function() {
  if(this.CheckableElementsExist()) 
   this.CreateButtonInternalCollection();
  ASPxClientCheckListBase.prototype.InlineInitialize.call(this);
 },
 Initialize: function() {
  ASPxClientCheckListBase.prototype.Initialize.call(this);
  this.UpdateHiddenInputs(this.GetSelectedIndex());
  this.SetSelectedIndex(this.GetSelectedIndex()); 
 },
 PrepareInternalButton: function(internalRadioButton){
  internalRadioButton.autoSwitchEnabled = false;
 },
 GetInputElement: function() {
  if(this.isNative) {
   var index = this.GetSelectedIndexInternal();
   return this.GetItemInput(index);
  } else 
   return this.GetValueInputElement();
 },
 GetValueInputElement: function() {
  if(this.valueInput == null) {
   var stateInput = this.FindStateInputElement();
   this.valueInput = this.GetHiddenField(null, this.name + "_ValueInput", stateInput.parentNode, stateInput);
  }
  return this.valueInput;
 },
 GetValueInputToValidate: function() {
  return this.GetValueInputElement();
 },
 SelectIndexSilent: function(index) {
  var itemCount = this.GetItemCount();
  var isValidIndex = (-1 <= index && index < itemCount);
  if(isValidIndex) {
   if(this.CheckableElementsExist()) 
    this.UpdateCheckableElementDecorations(index, this.GetEnabled());
   else {
    for(var i = 0; i < itemCount; i++) {
     var element = this.GetItemInput(i);
     if(element)
      element.checked = (i == index);
    }
   }
   this.SetSelectedIndexInternal(index);
   this.UpdateHiddenInputs(index);
  }
 },
 UpdateCheckableElementDecorations: function(selectedIndex, enabled) {
  if(this.CheckableElementsExist()) {
   for(var i = 0; i < this.items.length; i++) {
    var inputElement = this.GetItemInput(i);
    var internalButton = this.internalButtonCollection.Get(inputElement.id);
    internalButton.SetEnabled(enabled);
    internalButton.SetValue(i == selectedIndex ? ASPx.CheckBoxInputKey.Checked : ASPx.CheckBoxInputKey.Unchecked);
   }
  }
 },
 UpdateFocus: function() {
  var index = this.GetSelectedIndexInternal();
  if(index == -1)
   index = 0;
  var itemElement = this.GetItemFocusableElement(index);
  if(itemElement != null && ASPx.GetActiveElement() != itemElement && ASPx.IsEditorFocusable(itemElement)) 
   ASPx.SetFocus(itemElement);
 },
 OnItemClick: function(index) {
  if(this.GetSelectedIndexInternal() != index) {
   this.SelectIndexSilent(index);
   this.RaisePersonalStandardValidation();
   this.OnValueChanged();
  }
  this.UpdateFocus();
 },
 RequireInputElementToValidate: function() {
  return false;
 },
 GetItem: function(index){
  var item = ASPxClientCheckListBase.prototype.GetItem.call(this, index);
  if(item)
   item.selected = index == this.GetSelectedIndexInternal();
  return item;
 }
});
ASPxClientRadioButtonList.Cast = ASPxClientControl.Cast;
var ASPxClientCheckBoxList = ASPx.CreateClass(ASPxClientCheckListBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);          
  this.selectionEventsLockCount = 0;
  this.initializeInputValue = null;
  this.restoredSelectedIndices = null;
 },
 InlineInitialize: function() {
  if(this.CheckableElementsExist()) 
   this.CreateButtonInternalCollection();
  ASPxClientCheckListBase.prototype.InlineInitialize.call(this);
 },
 Initialize: function() {
  this.initializeInputValue = this.GetInputElement().value;
  ASPxClientCheckListBase.prototype.Initialize.call(this);
  this.SaveRestoredIndices();
  this.InitSelection();
 },
 SaveRestoredIndices: function() {
  var value = this.initializeInputValue;
  if(!ASPx.IsExists(value) || value === "")
   return;
  var serializer = this.GetSerializingHelper();
  var itemStringIndices = serializer.DeserializeValues(value);
  var itemIndices = [];
  for(var i = 0; i < itemStringIndices.length; i++) {
   var itemIndex = parseInt(itemStringIndices[i]);
   itemIndices.push(itemIndex);
  }
  this.restoredSelectedIndices = itemIndices;
 },
 InitSelection: function() {
  if(this.restoredSelectedIndices)
   this.UnselectAll();
  var selectedIndices = this.restoredSelectedIndices || this.initSelectedIndices;
  this.SelectIndices(selectedIndices);
  this.CacheValue();
 },
 PrepareInternalButton: function(internalCheckBox, index){
  internalCheckBox.autoSwitchEnabled = true;
  internalCheckBox.SetChecked(this.GetItemSelectionHelper().GetIsItemSelected(index));
 },
 SelectIndexSilent: function(index) {
  var itemCount = this.GetItemCount();
  var isValidIndex = (-1 <= index && index < itemCount);
  if(isValidIndex)
   this.SelectIndices([index]);
 },
 UpdateCheckableElementDecorations: function(selectedIndex, enabled) {
  if(this.CheckableElementsExist()) {
   for(var i = 0; i < this.items.length; i++) {
    var inputElement = this.GetItemInput(i);
    var internalButton = this.internalButtonCollection.Get(inputElement.id);
    internalButton.SetEnabled(enabled);
   }
  }
 },
 SetSelectionDecoration: function(index, selected){ 
  if(this.CheckableElementsExist()){
   var inputElement = this.GetItemInput(index);
   var internalButton = this.internalButtonCollection.Get(inputElement.id);
   internalButton.SetValue(selected ? ASPx.CheckBoxInputKey.Checked : ASPx.CheckBoxInputKey.Unchecked);
  } else {
   var element = this.GetItemInput(index);
   if(element)
    element.checked = (selected); 
  }
 },
 OnItemClick: function(index) {
  this.GetItemSelectionHelper().OnItemClick(index);
 },
 UpdateFocus: function() {
  var index = this.GetItemSelectionHelper().GetFocusedItemIndex();
  if(index == -1)
   index = this.GetSelectedIndexInternal();
  if(index == -1)
   index = 0;
  var itemElement = this.GetItemFocusableElement(index);
  if(itemElement != null && ASPx.GetActiveElement() != itemElement && ASPx.IsEditorFocusable(itemElement)) 
   ASPx.SetFocus(itemElement);
 },
 UpdateInternalState: function(){
  this.UpdateHiddenInputs();
 },
 IsUpdateHiddenInputsLocked: function(){
  return this.GetItemSelectionHelper().IsUpdateInternalSelectionStateLocked();
 },
 UpdateHiddenInputs: function(){
  if(this.IsUpdateHiddenInputsLocked()) 
   return;
  var element = this.FindStateInputElement();
  if(ASPx.IsExistsElement(element)) { 
   var sb = [ ];
   var serialiser = this.GetSerializingHelper();
   var selectedIndices = this.GetSelectedIndices();
   for(var i = 0; i < selectedIndices.length; i++)
    serialiser.SerializeAtomValue(sb, selectedIndices[i]);
   element.value = sb.join("");
  }
 },
 GetSerializingHelper: function(){ 
  if(this.serializingHelper == null)
   this.serializingHelper = new ListBoxBaseItemsSerializingHelper(this);
  return this.serializingHelper;
 },
 SetItemSelectionAppearance: function(index, selected, controller, checkCanChangeSelection){
 },
 LockSelectionEvents: function(){
  this.selectionEventsLockCount++;
 },
 UnlockSelectionEvents: function(){
  this.selectionEventsLockCount--;
 },
 IsSelectionEventsLocked: function(){
  return this.selectionEventsLockCount > 0;
 },
 CacheValue: function(){
  this.cachedValue = this.GetValue();
 },
 IsValueChanged: function(){
  return this.cachedValue != this.GetValue();
 },
 OnItemSelectionChanged: function(index, selected){
  this.SetSelectionDecoration(index, selected);
  if(!this.IsSelectionEventsLocked()) {
   this.SetRaiseSelectedIndexChangedArguments(this.autoPostBack, index, selected);
   var valueChanged = this.IsValueChanged();
   if(valueChanged) {
    this.RaisePersonalStandardValidation();
    this.OnValueChanged();
   } else {
    if(this.RaiseSelectedIndexChanged())
     this.SendPostBackInternal("");
   }
  }
  this.CacheValue();
 },
 SetRaiseSelectedIndexChangedArguments: function(processOnServer, index, selected){
  this.selectedIndexChangedArguments = {
   processOnServer: processOnServer,
   index: index,
   selected: selected
  };
 },
 GetRaiseSelectedIndexChangedArguments: function(){
  if(!this.selectedIndexChangedArguments)
   this.SetRaiseSelectedIndexChangedArguments(false, this.GetSelectedIndex(), true);
  return this.selectedIndexChangedArguments;
 },
 RaiseSelectedIndexChanged: function (processOnServer) {
  this.RaiseValidationInternal();
  var savedArgs = this.GetRaiseSelectedIndexChangedArguments();
  processOnServer = savedArgs.processOnServer || processOnServer;
  if(!this.SelectedIndexChanged.IsEmpty()){
   var args = new ASPxClientListEditItemSelectedChangedEventArgs(savedArgs.index, savedArgs.selected, processOnServer);
   this.SelectedIndexChanged.FireEvent(this, args);
   processOnServer = args.processOnServer;
  }
  return processOnServer;
 },
 GetItemSelectionHelper: function(){
  if(!this.itemSelectionHelper)
   this.itemSelectionHelper = this.CreateItemSelectionHelper();
  return this.itemSelectionHelper;
 },
 CreateItemSelectionHelper: function(){
  return new CheckBoxListMultiSelectionHelper(this);
 },
 GetItem: function(index){
  var item = ASPxClientCheckListBase.prototype.GetItem.call(this, index);
  item.selected = this.GetItemSelectionHelper().GetIsItemSelected(index);
  return item;
 },
 SetValue: function(value){
  var index = this.FindItemIndexByValue(value);
  this.SetSelectedIndex(index);
 },
 GetSelectedIndexInternal: function(){
  if(!this.isInitialized)
   return ASPxClientCheckListBase.prototype.GetSelectedIndexInternal.call(this);
  return this.GetItemSelectionHelper().GetSelectedIndex();
 },
 SetSelectedIndex: function(index){
  this.LockSelectionEvents();
  this.GetItemSelectionHelper().SetSelectedIndex(index);
  this.UnlockSelectionEvents();
 },
 GetSelectedIndices: function(){
  return this.GetItemSelectionHelper().GetSelectedIndices();
 },
 GetSelectedValues: function(){ 
  return this.GetItemSelectionHelper().GetSelectedValues();
 },
 GetSelectedItems: function(){
  return this.GetItemSelectionHelper().GetSelectedItems();
 },
 SelectAll: function(){
  this.SelectIndices();
 },
 UnselectAll: function(){
  this.UnselectIndices();
 },
 SelectIndices: function(indices){
  this.LockSelectionEvents();
  this.GetItemSelectionHelper().SelectIndices(indices);
  this.UnlockSelectionEvents();
 },
 SelectItems: function(items){
  this.LockSelectionEvents();
  this.GetItemSelectionHelper().SelectItems(items);
  this.UnlockSelectionEvents();
 },
 SelectValues: function(values){
  this.LockSelectionEvents();
  this.GetItemSelectionHelper().SelectValues(values);
  this.UnlockSelectionEvents();
 },
 UnselectIndices: function(indices){
  this.LockSelectionEvents();
  this.GetItemSelectionHelper().UnselectIndices(indices);
  this.UnlockSelectionEvents();
 },
 UnselectItems: function(items){
  this.LockSelectionEvents();
  this.GetItemSelectionHelper().UnselectItems(items);
  this.UnlockSelectionEvents();
 },
 UnselectValues: function(values){
  this.LockSelectionEvents();
  this.GetItemSelectionHelper().UnselectValues(values);
  this.UnlockSelectionEvents();
 }
});
ASPxClientCheckBoxList.Cast = ASPxClientControl.Cast;
var ASPxClientListEditItemSelectedChangedEventArgs = ASPx.CreateClass(ASPxClientProcessingModeEventArgs, {
 constructor: function(index, isSelected, processOnServer){
  this.constructor.prototype.constructor.call(this, processOnServer);
  this.index = index;
  this.isSelected = isSelected;
 }
});
function aspxLBTSelectStart(evt){
 var shiftPressed = evt.shiftKey;
 var ctrlKey = evt.ctrlKey || evt.metaKey;
 if(shiftPressed || ctrlKey){
  ASPx.Selection.Clear();
  ASPx.Evt.PreventEventAndBubble(evt);
 }
}
function aspxLBIClick(evt){
 if(ASPx.TouchUIHelper.isMouseEventFromScrolling) return;
 var element = ASPx.Evt.GetEventSource(evt);
 while(element != null && element.tagName != "BODY"){
  if(element.tagName == "TR"){
   var table = element.offsetParent;
   if(table && table.ListBoxId){
    var lb = ASPx.GetControlCollection().Get(table.ListBoxId);
    if(lb != null) {
     var retValue;
     if(evt.type == "dblclick") 
      retValue =lb.OnItemDblClick();
     else if(!lb.isComboBoxList || ASPx.Evt.IsLeftButtonPressed(evt)) {
      var itemIndex = lb.GetItemIndexByRow(element);
      retValue = lb.OnItemClick(itemIndex, evt);
     }
     if(typeof(retValue) != "undefined")
      return retValue;
    }
    break;
   }
  }
  element = element.parentNode;
 }
}
function aspxLBScroll(evt){
 var sourceId = ASPx.Evt.GetEventSource(evt).id;
 if(sourceId.slice(-lbDSuffix.length) == lbDSuffix){
  var name = sourceId.slice(0, -2);
  var lb = ASPx.GetControlCollection().Get(name);
  if(lb != null && lb.isInitialized) 
   lb.OnScroll();
 }
}
ASPx.NLBIDClick = function(evt) {
 var element = ASPx.Evt.GetEventSource(evt);
 if(element != null && element.tagName == "SELECT"){
  var lb = ASPx.GetControlCollection().Get(element.id);
  if(lb != null)
   lb.OnItemDblClick();
 }
};
ASPx.ERBLIClick = function(name, index) {
 var list = ASPx.GetControlCollection().Get(name);
 if(list != null) {
  if(list.GetReadOnly())
   return false;
  list.OnItemClick(index);
 }
};
ASPx.ERBLICancel = function(name) {
 var list = ASPx.GetControlCollection().Get(name);
 if(list != null)
  list.OnItemClickReadonly();
};
ASPx.ShowListBoxFilter = function(name) {
 var list = ASPx.GetControlCollection().Get(name);
 if(list != null)
  list.ShowFilterElement();
};
ASPx.HideListBoxFilter = function(name) {
 var list = ASPx.GetControlCollection().Get(name);
 if (list != null)
  list.HideFilterElement();
};
var highlightingOpeningGuid = "680fb6b5-de5f-4af1-b444-2617b6dc5aab";
var highlightingClosingGuid = "ee51e3d2-fb72-45fc-b737-6d3432008053";
ASPx.ListBoxHighlightingHelper = ASPx.CreateClass(null, {
 constructor: function(listBox, tagName) {
  this.listBox = listBox;
  this.tagName = tagName;
  this.highlightingOpeningTag = "<" + tagName + ">";
  this.highlightingClosingTag = "</" + tagName + ">";
  this.highlightingOpeningTagPlaceholder = new RegExp(highlightingOpeningGuid, "g");
  this.highlightingClosingTagPlaceholder = new RegExp(highlightingClosingGuid, "g");
  this.customReplacer = highlightingOpeningGuid + "$&" + highlightingClosingGuid;
 },
 Apply: function(text, isCustom) {
  if(text == "" || !this.listBox.encodeHtml) return;
  if(isCustom)
   this.applyCustom(text);
  else
   this.apply(text, ASPx.ContainsFilteringUtils.SelectContainsTextInElement, false);
 },
 Remove: function(text, isCustom) {
  if(isCustom)
   this.removeCustom(text);
  else
   this.apply(text, ASPx.ContainsFilteringUtils.UnselectContainsTextInElement, true);
 },
 Refresh: function(text, isCustom) {
  if(text == "") return;
  if(isCustom)
   this.applyCustom(text, true);
  else
   this.apply(text, ASPx.ContainsFilteringUtils.ReselectContainsTextInElement, false);
 },
 applyCustom: function(highlighting, refreshing) { 
  var count = this.listBox.GetItemCount();
  var highlightingRegExpxByColumns = this.getCustomHighlightingRegExpsByColumns(highlighting);
  for(var i = 0; i < count; i++) {
   var item = this.listBox.GetItemRow(i);
   if(!item || this.listBox.ItemRowHasTemplate(i)) continue;
   this.applyCustomCore(item, highlightingRegExpxByColumns, refreshing);
  }
 },
 applyCustomCore: function(item, highlightingRegExpxByColumns, refreshing) {
  var elements = this.getTextCellElements(item);
  for(var i = 0, el; el = elements[i]; i++) {
   if(refreshing)
    this.removeCustomFromItem(el);
   this.applyCustomToItem(el, highlightingRegExpxByColumns[i]);
  }
 },
 applyCustomToItem: function(element, regexp) {
  if(!regexp)
   return;
  var currentText = ASPx.Attr.GetAttribute(element, "DXText");
  if(!ASPx.IsExists(currentText)) ASPx.Attr.SetAttribute(element, "DXText", ASPx.GetInnerText(element));
  var oldInnerText = ASPx.GetInnerText(element);
  var newInnerText = oldInnerText.replace(regexp, this.customReplacer);
  newInnerText = ASPx.ContainsFilteringUtils.PrepareElementText(newInnerText)
   .replace(this.highlightingOpeningTagPlaceholder, this.highlightingOpeningTag)
   .replace(this.highlightingClosingTagPlaceholder, this.highlightingClosingTag);
  if(newInnerText !== oldInnerText)
   ASPx.SetInnerHtml(element, newInnerText);
 },
 removeCustomFromItem: function(element) {
  var currentText = ASPx.Attr.GetAttribute(element, "DXText");
  if(ASPx.IsExists(currentText)) {
   currentText = ASPx.ContainsFilteringUtils.PrepareElementText(currentText);
   ASPx.SetInnerHtml(element, currentText === "" ? "&nbsp;" : currentText);
  }
 },
 removeCustom: function() {
  var count = this.listBox.GetItemCount();
  for(var i = 0; i < count; i++) {
   var item = this.listBox.GetItemRow(i);
   if(!item || this.listBox.ItemRowHasTemplate(i)) continue;
   this.removeCustomCore(item);
  }
 },
 removeCustomCore: function(item) {
  var elements = this.getTextCellElements(item);
  for(var i = 0, el; el = elements[i]; i++)
   this.removeCustomFromItem(el);
 },
 getCustomHighlightingRegExpsByColumns: function(highlighting) {
  var columns = this.listBox.IsMultiColumn() ? this.listBox.columnFieldNames : [""];
  return columns.map(function(fieldName) {
   if(typeof (highlighting) === "string" || Array.isArray(highlighting) || highlighting instanceof RegExp)
    return this.arrayToRegEx(highlighting);
   if(typeof (highlighting) === "object")
    return this.arrayToRegEx(highlighting[fieldName]);
   return null;
  }.bind(this));
 },
 arrayToRegEx: function(texts) {
  if(texts instanceof RegExp)
   return texts;
  if(typeof (texts) === "string")
   return this.arrayToRegEx([texts]);
  if(Array.isArray(texts)) {
   texts = texts
    .filter(function(t) { return typeof (t) === "string" && t.length; })
    .sort(function(a, b) { return b.length - a.length; })
    .map(ASPx.Str.EscapeForRegEx);
   if(texts.length)
    return new RegExp("(" + texts.join("|") + ")", "gi");
  }
  return null;
 },
 apply: function(text, func, allColumns) {
  var count = this.listBox.GetItemCount();
  for (var i = 0; i < count; i++) {
   var item = this.listBox.GetItemRow(i);
   if (item && (allColumns || ASPx.GetElementDisplay(item)) && this.canApply(item)) {
    var elements = this.listBox.GetItemSelectableElementsByRow(item);
    this.applyToItem(text, elements, func, allColumns);
   }
  }
 },
 applyToItem: function(text, elements, func, allColumns) {
  var itemValues = this.getItemValues(elements);
  var itemSelection = this.getItemSelection(itemValues, this.listBox.textFormatString, text);
  var firstTextCellIndex = this.getFirstTextCellIndex();
  if (allColumns) {
   for (var i = 0; i < elements.length; i++)
    this.applyToItemCore(func, elements[i], itemSelection[i]);
  } else
   this.applyToTextCells(func, firstTextCellIndex, elements, itemSelection);
 },
 getItemSelection: function (itemValues, textFormatString, text) {
  return ASPx.ContainsFilteringUtils.GetColumnSelectionsForItem(itemValues, textFormatString, text);
 },
 applyToTextCells: function(func, firstTextCellIndex, elements, itemSelection) {
  for(var i = 0; i < itemSelection.length; i++)
   this.applyToItemCore(func, elements[itemSelection[i].index + firstTextCellIndex], itemSelection[i]);
 },
 applyToItemCore: function (func, itemElement, itemSelection) {
  if (!this.listBox.ItemCellHasTextAttr(itemElement))
   func(itemElement, itemSelection, this.tagName);
 },
 getItemValues: function (elements) {
  var result = [];
  for (var i = this.getFirstTextCellIndex() ; i < elements.length; i++)
   result.push(ASPxClientListBox.GetItemCellInnerText(elements[i]));
  return result;
 },
 canApply: function (item) {
  return !this.listBox.ItemRowHasTemplateCore(item);
 },
 getFirstTextCellIndex: function () {
  return this.listBox.GetItemFirstTextCellIndex();
 },
 getTextCellElements: function(item) {
  return this.listBox.GetItemTextCells(item);
 }
});
var ListEditFilterStrategyBase = ASPx.CreateClass(null, {
 OnPaste: function(evt) { },
 OnInput: function() { },
 OnClearButtonClick: function() { },
 OnTextChanged: function() { },
 OnEscape: function() { },
 OnKeyDown: function(evt) { },
 OnAfterEnter: function() { },
 OnSelectedIndexChanged: function() { },
 OnLostFocus: function() { },
 OnCallback: function(result) { },
 OnBeforeDoEndCallback: function() { },
 OnAfterDoEndCallback: function() { },
 OnBeforeCallbackFinally: function() { },
 OnAfterCallbackFinally: function() { },
 OnPerformCallback: function() { },
 Filtering: function() { },
 CancelFiltering: function() { },
 ShouldDiscardCallbackResult: function() { },
 GetCallbackArguments: function() { return ""; },
 CanNavigateByKbd: function() { return true; },
 IsFilterMeetRequirementForMinLength: function (filter) { return true; },
 ResetCallbackState: function() { },
 ClearFilterApplied: function() { },
 OnDropDownHideArea: function() { },
 OnDropDownButtonClick: function() { },
 OnDropDownCloseByDocumentOrWindowEvent: function() { },
 OnApplyChanges: function() { },
 OnCancelChanges: function() { },
 OnUndo: function() { }
});
var ListEditIncrementalFilterStrategyBase = ASPx.CreateClass(ListEditFilterStrategyBase, {
 constructor: function(filterDelay, filterMinLength, isCallbackMode) {
  this.filterTimeoutId = -1;
  this.filterDelay = filterDelay;
  this.filterMinLength = filterMinLength;
  this.isCallbackMode = isCallbackMode;
  this.filter = "";
  this.highlighting = "";
  this.filterInitialized = false;
  this.needEmptyFilterBeforeFiltering = false;
  this.currentCallbackIsFiltration = false;
  this.refiltrationRequired = false;
 },
 GetInputFilterValue: function() { throw "Not Implemented"; },
 GetListBoxControl: function() { throw "Not Implemented"; },
 IsSatisfy: function(text, filter) { throw "Not Implemented"; },
 InCallback: function() { throw "Not Implemented"; },
 IsEnabled: function() { throw "Not Implemented"; },
 SendCallbackCore: function() { throw "Not Implemented"; },
 PreventEndCallbackRising: function() { throw "Not Implemented"; },
 GetSelectedIndex: function() { throw "Not Implemented"; },
 NotifyCollectionChanged: function() { throw "Not Implemented"; },
 OnCallbackCore: function(highlighting, newFilterLength) { throw "Not Implemented"; },
 RaiseItemFilteringEvent: function(item, filter, isFit) { throw "Not Implemented"; },
 RaiseCustomHighlightingEvent: function(filter, highlighting) { throw "Not Implemented"; },
 OnBeforeFilteringOnClient: function(filter) { }, 
 OnAfterFilteringOnClientCore: function (filter, firstSatisfyItemIndex) { throw "Not Implemented"; },
 SupportsFilterCorrection: function() { throw "Not Implemented"; },
 OnFirstSatisfiedItemFound: function(index, text, isTextClearing) { },
 TryProcessFilterLessMinLength: function() { return true; },
 AllowEmptyFilterResults: function() { return true; },
 OnBeforeFiltering: function() { },
 OnAfterFiltering: function() { },
 OnFilteringCancelled: function() { },
 OnTextChanged: function() { },
 OnFilterRollback: function() { },
 CanStartFilterOnInput: function() {
  return this.IsEnabled() && !this.InCallback();
 },
 OnAfterFilteringOnClient: function (filter, satisfyItemIndices) {
  this.GetListBoxControl().RewriteFilteredItemIndices(satisfyItemIndices);
  var firstSatisfyItemIndex = satisfyItemIndices.length > 0 ? satisfyItemIndices[0] : -1;
  this.OnAfterFilteringOnClientCore(filter, firstSatisfyItemIndex);
 },
 ShouldClearFilterBeforeFiltering: function(filter) { return false; },
 OnInput: function() {
  if(this.CanStartFilterOnInput()) {
   this.FilterStopTimer();
   this.FilterStartTimer();
  }
 },
 OnCallback: function(result) {
  this.OnCallbackCore(result[CONSTANTS.CALLBACK_RESULTS.FILTER_CUSTOMHIGHLIGHTING], result[CONSTANTS.CALLBACK_RESULTS.FILTER_LENGTH]);
  this.currentCallbackIsFiltration = false;
 },
 CancelFiltering: function() {
  this.FilterStopTimer();
 },
 Filtering: function(fromApi) {
  this.FilterStopTimer();
  var inputValue = this.GetInputFilterValue();
  this.needEmptyFilterBeforeFiltering = this.ShouldClearFilterBeforeFiltering(inputValue);
  var newFilter = this.needEmptyFilterBeforeFiltering ? "" : inputValue;
  var oldFilter = this.filter;
  if(!this.FilterCompare(newFilter)) {
   this.SetFilter(newFilter);
   if(!this.IsFilterMeetRequirementForMinLength() && this.TryProcessFilterLessMinLength(oldFilter))
    return;
   else {
    this.OnBeforeFiltering();
    if(this.isCallbackMode)
     this.FilteringOnServer();
    else
     this.FilteringOnClient();
    this.OnAfterFiltering();
   }
  }
  else
   this.OnFilteringCancelled(fromApi);
 },
 FilteringOnClient: function() {
  var listBox = this.GetListBoxControl(),
   count = listBox.GetItemCount(),
   filter = this.filter,
   visibleItems = [],
   visibleItemFound = false;
  this.DiscardHighlighting();
  while(true) {
   var preparedFilter = ASPx.Str.PrepareStringForFilter(filter);
   listBox.BeforeClientFiltering();
   for(var i = 0; i < count; i++) {
    var item = listBox.GetItem(i);
    var isFit = this.IsSatisfy(item.text, preparedFilter);
    isFit = this.RaiseItemFilteringEvent(item, filter, isFit);
    if(isFit) {
     if(!visibleItemFound) {
      this.OnBeforeFilteringOnClient(filter);
      for(var j = 0; j < i; j++)
       listBox.ApplyFilterToItem(j, false);
      var isTextClearing = filter == "" && this.filter != item.text;
      this.OnFirstSatisfiedItemFound(i, item.text, isTextClearing);
      visibleItemFound = true;
     }
     visibleItems.push(i);
    }
    if(visibleItemFound)
     listBox.ApplyFilterToItem(i, isFit);
   }
   if(visibleItemFound || this.AllowEmptyFilterResults() || !filter)
    break;
   filter = filter.substr(0, filter.length - 1);
  }
  if(!visibleItemFound) {
   this.OnBeforeFilteringOnClient(filter); 
   if(this.AllowEmptyFilterResults()) {
    for(var i = 0; i < count; i++)
     listBox.ApplyFilterToItem(i, false);
   }
  }
  this.OnAfterFilteringOnClient(filter, visibleItems);
  this.SetHighlighting(filter);
  this.OnEndFiltering(visibleItemFound || this.AllowEmptyFilterResults());
 },
 FilteringOnServer: function() {
  if(!this.InCallback()) {
   var listBox = this.GetListBoxControl();
   listBox.ClearItems(); 
   listBox.serverIndexOfFirstItem = 0;
   listBox.SetScrollSpacerVisibility(true, false);
   listBox.SetScrollSpacerVisibility(false, false);
  }
  this.SendFilteringCallback();
 },
 SendFilteringCallback: function(owner) {
  this.currentCallbackIsFiltration = true;
  this.SendCallbackCore();
 },
 OnEndFiltering: function(visibleCollectionChanged) {
  if(visibleCollectionChanged)
   this.NotifyCollectionChanged();
  this.ApplyHighlighting();
 },
 IsFilterTimerActive: function() {
  return this.filterTimeoutId !== -1;
 },
 FilterStopTimer: function() {
  this.filterTimeoutId = ASPx.Timer.ClearTimer(this.filterTimeoutId);
 },
 FilterStartTimer: function() {
  this.filterTimeoutId = ASPx.Timer.SetControlBoundTimeout(function() {
   this.filterTimeoutId = -1;
   this.Filtering();
  }.bind(this), this.GetListBoxControl(), this.filterDelay);
 },
 IsFilterMeetRequirementForMinLength: function(filter) {
  if(typeof (filter) !== "string")
   filter = this.GetInputFilterValue();
  return typeof (filter) === "string" ? filter.length >= this.filterMinLength : true;
 },
 GetCallbackArguments: function() {
  if(this.filter) {
   var callbackPrefix = this.SupportsFilterCorrection() ? CONSTANTS.CALLBACK_PREFIXES.FILTERING_CORRECT : CONSTANTS.CALLBACK_PREFIXES.FILTERING;
   return ASPx.FilteringUtils.FormatCallbackArg(callbackPrefix, this.filter);
  }
  return "";
 },
 OnAfterDoEndCallback: function() {
  if(this.refiltrationRequired) {
   this.refiltrationRequired = false;
   window.setTimeout(this.Filtering.bind(this), 0);
  }
 },
 OnBeforeDoEndCallback: function() {
  if(this.refiltrationRequired)
   this.PreventEndCallbackRising();
 },
 OnSelectedIndexChanged: function() {
  this.ClearFilterApplied();
 },
 SetHighlighting: function(filter, callbackHighlighting) {
  callbackHighlighting = this.ProcessCallbackHighlighting(callbackHighlighting);
  var customHighlighting = this.RaiseCustomHighlightingEvent(filter, callbackHighlighting);
  this.isCustomHighlighting = customHighlighting !== null && customHighlighting !== undefined;
  this.highlighting = this.isCustomHighlighting ? customHighlighting : filter;
 },
 ProcessCallbackHighlighting: function(obj) {
  if(obj === undefined || obj === null)
   return undefined;
  var val = obj.val;
  var regEx = !!obj.regEx;
  if(regEx) {
   if(typeof (val) === "string")
    val = new RegExp(val, "gi");
   if(!Array.isArray(val) && typeof (val) === "object") {
    for(var col in val) {
     if(!val.hasOwnProperty(col)) continue;
     if(typeof (val[col]) === "string")
      val[col] = new RegExp(val[col], "gi");
    }
   }
  }
  return val;
 },
 IsEmptyFilter: function() {
  return !this.filterInitialized || this.filter === "";
 },
 ShouldDiscardCallbackResult: function() {
  var discardCallbackResult = !this.needEmptyFilterBeforeFiltering && !this.IsFilterEqualInputValue() && this.currentCallbackIsFiltration;
  if(discardCallbackResult)
   this.refiltrationRequired = true;
  return discardCallbackResult;
 },
 IsFilterEqualInputValue: function() {
  var currentFilter = this.GetInputFilterValue();
  return this.FilterCompareLower(ASPx.Str.PrepareStringForFilter(currentFilter));
 },
 FilterCompare: function(value) {
  return this.filterInitialized && this.filter === value;
 },
 FilterCompareLower: function(value) {
  if(!this.filterInitialized)
   return false;
  return ASPx.Str.PrepareStringForFilter(this.filter) == value;
 },
 DiscardHighlighting: function() {
  this.GetListBoxControl().highlighting.Remove(this.highlighting, this.isCustomHighlighting);
 },
 ApplyHighlighting: function() {
  this.GetListBoxControl().highlighting.Apply(this.highlighting, this.isCustomHighlighting);
 },
 RefreshHighlighting: function() {
  this.GetListBoxControl().highlighting.Refresh(this.highlighting, this.isCustomHighlighting);
 },
 MakeAllItemsVisible: function() {
  this.GetListBoxControl().MakeAllItemsVisible();
 },
 SetFilter: function(newFilter) {
  this.filter = newFilter;
  this.highlighting = "";
  this.isCustomHighlighting = undefined;
  this.filterInitialized = true;
 },
 ClearFilter: function() {
  this.filter = "";
  this.highlighting = "";
  this.isCustomHighlighting = undefined;
  this.filterInitialized = false;
 },
 ClearFilterApplied: function() {
  this.filterInitialized = false;
 },
 FilteringBackspace: function() {
  throw "Not Implemented";
 },
});
var ListBoxFilterStrategy = ASPx.CreateClass(ListEditIncrementalFilterStrategyBase, {
 constructor: function(listBox) {
  this.constructor.prototype.constructor.call(this, listBox.filteringDelay, listBox.filterMinLength, listBox.isCallbackMode);
  this.listBox = listBox;
 },
 SupportsFilterCorrection: function() {
  return false;
 },
 IsEnabled: function() {
  return this.listBox.GetEnabled();
 },
 GetInputFilterValue: function() {
  return this.listBox.filteringTextBox.GetInputElement().value;
 },
 NotifyCollectionChanged: function() {
  this.listBox.CollectionChanged(true);
 },
 TryProcessFilterLessMinLength: function(oldFilter) {
  this.SetFilter("");
  return !oldFilter;
 },
 IsSatisfy: function(text, filter) {
  return ASPx.Str.PrepareStringForFilter(text).indexOf(filter) !== -1;
 },
 GetListBoxControl: function() {
  return this.listBox;
 },
 OnAfterFilteringOnClientCore: function (filter, firstSatisfyItemIndex) {
  if(firstSatisfyItemIndex !== -1)
   this.listBox.CorrectCellWidthsOnFirstRowItemReplacement(0, firstSatisfyItemIndex);
 },
 OnEndFiltering: function(visibleCollectionChanged) {
  ListEditIncrementalFilterStrategyBase.prototype.OnEndFiltering.call(this, visibleCollectionChanged);
  if(this.listBox.IsMultiColumn())
   this.listBox.CorrectWidth();
  this.listBox.updateSelectAllElementsState();
 },
 SendCallbackCore: function() {
  this.listBox.SendCallback();
 },
 InCallback: function() {
  return this.listBox.InCallback();
 },
 PreventEndCallbackRising: function() {
  this.listBox.preventEndCallbackRising = true;
 },
 GetSelectedIndex: function() {
  return this.listBox.GetSelectedIndex();
 },
 OnCallbackCore: function(highlighting, newFilterLength) {
  if(this.currentCallbackIsFiltration)
   this.SetHighlighting(this.filter, highlighting);
  if(this.filter)
   this.OnEndFiltering();
 },
 FilteringBackspace: function() {
  var textBox = this.listBox.filteringTextBox;
  if(textBox)
   ASPx.StartWithFilteringUtils.RollbackOneSuggestedChar(textBox.GetInputElement());
  this.FilterStartTimer();
 },
 RaiseItemFilteringEvent: function(item, filter, isFit) {
  return this.listBox.RaiseItemFiltering(item, filter, isFit);
 },
 RaiseCustomHighlightingEvent: function(filter, callbackHighlighting) {
  return this.listBox.RaiseCustomHighlighting(filter, callbackHighlighting);
 }
});
ASPx.ListBoxItemsDefaultManager = ListBoxItemsDefaultManager;
ASPx.ListBoxItemsVirtualManager = ListBoxItemsVirtualManager;
ASPx.VirtualRenderListBoxStateControllerManager = VirtualRenderListBoxStateControllerManager;
ASPx.DefaultListBoxStateControllerManager = DefaultListBoxStateControllerManager;
ASPx.ListEditIncrementalFilterStrategyBase = ListEditIncrementalFilterStrategyBase;
ASPx.ListBoxFilterStrategy = ListBoxFilterStrategy;
ASPx.ListEditFilterStrategyBase = ListEditFilterStrategyBase;
var ASPxClientListEditItemFilteringEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(item, filter, isFit) {
  this.constructor.prototype.constructor.call(this);
  this.item = item;
  this.isFit = isFit;
  this.filter = filter;
 }
});
var ASPxClientListEditCustomHighlightingEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(filter) {
  this.constructor.prototype.constructor.call(this);
  this.highlighting = null;
  this.filter = filter;
 }
});
ASPx.ListBoxScrollCallbackHelper = ListBoxScrollCallbackHelper;
window.ASPxClientListEdit = ASPxClientListEdit;
window.ASPxClientListEdit.CONSTANTS = CONSTANTS;
window.ASPxClientListEditItem = ASPxClientListEditItem;
window.ASPxClientListBoxItem = ASPxClientListBoxItem;
window.ASPxClientListBoxBase = ASPxClientListBoxBase;
window.ASPxClientListBox = ASPxClientListBox;
window.ASPxClientNativeListBox = ASPxClientNativeListBox;
window.ASPxClientCheckListBase = ASPxClientCheckListBase;
window.ASPxClientRadioButtonList = ASPxClientRadioButtonList;
window.ASPxClientCheckBoxList = ASPxClientCheckBoxList;
window.ASPxClientListEditItemSelectedChangedEventArgs = ASPxClientListEditItemSelectedChangedEventArgs;
window.ASPxClientListEditItemFilteringEventArgs = ASPxClientListEditItemFilteringEventArgs;
window.ASPxClientListEditCustomHighlightingEventArgs = ASPxClientListEditCustomHighlightingEventArgs;
})();

(function() {
var currentSelectedItemCallbackPrefix = "CBSI";
var loadDropDownOnDemandCallbackPrefix = "CBLD";
var listBoxNameSuffix = "_L";
var comboBoxValueInputSuffix = "VI";
var ASPxClientComboBoxBase = ASPx.CreateClass(ASPxClientDropDownEditBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.lbEventLockCount = 0;
  this.receiveGlobalMouseWheel = false;
  this.collectCallbackIDs = false;
  this.callbackIDs = { };
  this.callbackIDsToReset = { };
  this.listBox = null;
  this.lastSuccessValue = "";
  this.islastSuccessValueInit = false;
  this.SelectedIndexChanged = new ASPxClientEvent();
 },
 Initialize: function(){
  this.InitializeListBoxOwnerName();
  ASPxClientDropDownEditBase.prototype.Initialize.call(this);
  this.InitLastSuccessValue();
 },
 InitializeListBoxOwnerName: function(){
  var lb = this.GetListBoxControl();
  if(lb)
   lb.ownerName = this.name;
 },
 InitLastSuccessValue: function(){
  this.SetLastSuccessValue(this.GetValue());
 },
 SetLastSuccessValue: function (value) {
  if(this.convertEmptyStringToNull && value === "")
   value = null;
  this.lastSuccessValue = value;
  this.islastSuccessValueInit = true;
 },
 GetDropDownInnerControlName: function(suffix){
  return "";
 },
 CreateAccessibilityHelper: function() {
  return new AccessibilityHelperComboBox(this);
 },
 GetListBoxControl: function(){
  if(!ASPx.IsExists(this.listBox)){
   var name = this.GetDropDownInnerControlName(listBoxNameSuffix);
   this.listBox = ASPx.GetControlCollection().Get(name);
  }
  if(this.isNative || (this.listBox && !!this.listBox.GetMainElement()))
   return this.listBox;
  return null;
 },
 GetCallbackArguments: function(){
  return this.GetListBoxCallbackArguments();
 },
 GetListBoxCallbackArguments: function(){
  var lb = this.GetListBoxControl();
  return lb.GetCallbackArguments();
 },
 SendCallback: function(onSuccess) {
  var callbackID = this.CreateCallback(this.GetCallbackArguments(), null, onSuccess);
  this.OnCreateCallback(callbackID);
 },
 SendSpecialCallback: function(args, handler) {
  var callbackID = this.CreateCallback(args, null, handler);
  this.OnCreateCallback(callbackID);
 },
 OnCreateCallback: function(callbackID) {
  if(this.collectCallbackIDs)
   this.callbackIDs[callbackID] = true;
  this.UnlockDoEndCallback();
 },
 CanProcessCallbackResult: function(callbackID) {
  var result = !this.collectCallbackIDs || !this.callbackIDsToReset[callbackID];
  delete this.callbackIDs[callbackID];
  delete this.callbackIDsToReset[callbackID];
  if(!result)
   this.LockDoEndCallback();
  return result;
 },
 LockDoEndCallback: function() {
  this.lockDoEndCallback = true;
  this.lockDoEndCallbackTimerId =  window.setTimeout(function() { this.lockDoEndCallback = false; }.bind(this), 200);
 },
 UnlockDoEndCallback: function() {
  this.lockDoEndCallback = false;
  ASPx.Timer.ClearTimer(this.lockDoEndCallbackTimerId);
 },
 IsDoEndCallbackLocked: function() { 
  return !!this.lockDoEndCallback; 
 },
 ResetWaitingCallbacks: function() {
  var ids = Object.keys(this.callbackIDs);
  if(ids.length === 0) return;
  ids.forEach(function(id) { this.callbackIDsToReset[id] = true; }.bind(this));
  this.callbackIDs = { };
  this.requestCount = 0;
  ASPx.GetControlCollection().ResetRequestCount(); 
  this.CancelCallbackInternal();
 },
 SetReadOnlyInternal: function(readOnly) {
  ASPxClientDropDownEditBase.prototype.SetReadOnlyInternal.call(this, readOnly);
  var lb = this.GetListBoxControl();
  if(lb)
   lb.SetReadOnly(readOnly);
 },
 SetText: function(text){
  var lb = this.GetListBoxControl();
  var index = this.GetAdjustedSelectedIndexByText(lb, text);
  var isAllowNullValue = !this.isDropDownListStyle || this.allowNull;
  var isChangingTextInEmpty = index < 0 && !text && this.lastSuccessText !== text;
  if(isAllowNullValue || !isChangingTextInEmpty) {
   this.SelectIndex(index, false);
   this.SetTextBase(text);
   this.SetLastSuccessText(text);
   this.SetLastSuccessValue(index >= 0 ? lb.GetValue() : text);
  }
 },
 GetValue: function(){
  var value = this.islastSuccessValueInit ? this.lastSuccessValue : this.GetValueInternal();
  if(this.convertEmptyStringToNull && value === "")
   value = null;
  return value;
 },
 GetValueInternal: function(){
  var text = this.GetTextInternal();
  var textChanges = text != this.lastSuccessText;
  if(textChanges){
   var lb = this.GetListBoxControl();
   if(lb){
    var index = this.GetAdjustedSelectedIndexByText(lb, text);
    this.SelectIndexSilent(lb, index); 
    if(index != -1)
     return lb.GetValue();
   }
  }
  return ASPxClientDropDownEditBase.prototype.GetValue.call(this);
 },
 GetLastSuccesfullValue: function() {
  return this.GetValue();
 },
 GetSetValueOptimizeHelper: function () {
  this.setValueOptimizeHelper = this.setValueOptimizeHelper || new setValueOptimizeHelper();
  return this.setValueOptimizeHelper;
 },
 SetValue: function (value) {
  this.GetSetValueOptimizeHelper().setValue(this, value);
  if(this.accessibilityCompliant)
   this.GetAccessibilityHelper().SetLabelAttribute(null, null);
 },
 SetValueInternal: function(value) {
  var lb = this.GetListBoxControl();
  if (lb) {
   lb.SetValue(value);
   var item = lb.GetSelectedItem();
   var text = item ? item.text : value;
   this.OnSelectionChangedCore(text, item, false);
   this.UpdateValueInput();
  }
 },
 Clear: function() {
  ASPxClientDropDownEditBase.prototype.Clear.call(this);
  if(!this.GetListBoxControl())
   this.islastSuccessValueInit = false;
 },
 GetFormattedText: function() {
  return this.GetText();
 },
 GetAdjustedSelectedIndexByText: function(lb, text){
  if(!lb)
   return -1;
  var lbSelectedItem = lb.GetSelectedItem();
  if(lbSelectedItem != null && (lbSelectedItem.text == text || !this.isInitialized))
   return lbSelectedItem.index;
  return this.FindItemIndexByText(lb, text);
 },
 FindItemIndexByText: function(lb, text){
  if(lb)
   return lb.FindItemIndexByText(text);
 },
 CollectionChanged: function(){
 },
 HasChanges: function(){
  return false;
 },
 SelectIndex: function(index, initialize){
  var lb = this.GetListBoxControl();
  if(!lb)
   return false;
  var isSelectionChanged = lb.SelectIndexSilentAndMakeVisible(index, initialize);
  var item = lb.GetSelectedItem();
  var text = item != null ? item.text : "";
  if(isSelectionChanged || this.HasChanges())
   this.OnSelectionChangedCore(text, item, false);
  this.UpdateValueInput();
  return isSelectionChanged;
 },
 OnSelectChanged: function(){
  if(this.lbEventLockCount > 0) return;
  var lb = this.GetListBoxControl();
  var item = lb.GetSelectedItem();
  var text = item != null ? item.text : "";
  this.OnSelectionChangedCore(text, item, false);
  this.OnChange();
 },
 OnSelectionChangedCore: function(text, item, canBeRolledBack){
  this.SetTextBase(text);
  this.ShowItemImage(item);
  if(!canBeRolledBack){
   this.SetLastSuccessText(text);
   this.SetLastSuccessValue(item != null ? item.value : text);
  }
 },
 ShowItemImageByIndex: function(index){
  var item = this.GetItem(index);
  this.ShowItemImage(item);
 },
 ShowCurrentItemImage: function() {
  var selectedItem = this.GetSelectedItem();
  this.ShowItemImage(selectedItem);
 },
 ShowItemImage: function(item){
  var imageUrl = item != null ? item.imageUrl : "";
  this.SetSelectedImage(imageUrl);
 },
 GetDropDownImageElement: function(){
  var itemImageCell = this.GetDropDownItemImageCell();
  if(itemImageCell != null)
   return ASPx.GetNodeByTagName(itemImageCell, "IMG", 0);
  return null;
 },
 SetSelectedImage: function(imageUrl) {
  var imgElement = this.GetDropDownImageElement();
  if(imgElement != null) {
   var imageExists = imageUrl != "";
   imageUrl = imageExists ? imageUrl : ASPx.EmptyImageUrl;
   imgElement.src = imageUrl;
   var itemImageCell = this.GetDropDownItemImageCell();
   if(ASPx.GetElementDisplay(itemImageCell) != imageExists)
    ASPx.SetElementDisplay(itemImageCell, imageExists);
  }
 },
 OnCallback: function(result) {
 },
 OnChange: function(){
  this.UpdateValueInput();
  this.RaisePersonalStandardValidation();
  this.OnValueChanged();
 },
 UpdateValueInput: function() {
 },
 RaiseValueChangedEvent: function() {
  if(!this.isInitialized) return;
  var processOnServer = ASPxClientTextEdit.prototype.RaiseValueChangedEvent.call(this);
  processOnServer = this.RaiseSelectedIndexChanged(processOnServer);
  return processOnServer;
 },
 RaiseSelectedIndexChanged: function(processOnServer) {
  if(!this.SelectedIndexChanged.IsEmpty()){
   var args = new ASPxClientProcessingModeEventArgs(processOnServer);
   this.SelectedIndexChanged.FireEvent(this, args);
   processOnServer = args.processOnServer;
  }
  return processOnServer;
 },
 GetItemHtmlContent: function(index) {
  var lb = this.GetListBoxControl();
  return lb && lb.GetItemHtmlContent(index);
 },
 AddItem: function(texts, value, imageUrl, htmlContent, cssClass, tooltip) {
  var index = this.GetListBoxControl().AddItem(texts, value, imageUrl, htmlContent, cssClass, tooltip);
  this.CollectionChanged();
  return index;
 },
 InsertItem: function(index, texts, value, imageUrl, htmlContent, cssClass, tooltip){
  this.GetListBoxControl().InsertItem(index, texts, value, imageUrl, htmlContent, cssClass, tooltip);
  this.CollectionChanged();
 },
 RemoveItem: function(index){
  this.GetListBoxControl().RemoveItem(index);
  this.CollectionChanged();
 },
 ClearItems: function(){
  this.GetListBoxControl().ClearItems();
  this.ClearItemsInternal();
 },
 BeginUpdate: function(){
   this.GetListBoxControl().BeginUpdate();
 },
 EndUpdate: function(){
  this.GetListBoxControl().EndUpdate();
  this.CollectionChanged();
 },
 MakeItemVisible: function(index){
 },
 GetItem: function(index){
  var lb = this.GetListBoxControl();
  if(lb)
   return this.GetItemCore(index);
  else
   return null;
 },
 GetItemCore: function(index) {
  return this.GetListBoxControl().GetItem(index);
 },
 FindItemByText: function(text) {
  var lb = this.GetListBoxControl();
  if(lb)
   return lb.FindItemByText(text);
  return null;
 },
 FindItemByValue: function(value){
  var lb = this.GetListBoxControl();
  if(lb)
   return lb.FindItemByValue(value);
  return null;
 },
 GetItemCount: function(){
  var lb = this.GetListBoxControl();
  if(lb)
   return lb.GetItemCount(); 
  return 0;
 },
 GetSelectedIndex: function(){
  var lb = this.GetListBoxControl();
  if(lb)
   return lb.GetSelectedIndex();
  else
   return -1;
 },
 SetSelectedIndex: function(index){
  this.SelectIndex(index, false);
 },
 GetSelectedItem: function(){
  var lb = this.GetListBoxControl();
  var index = lb.GetSelectedIndex();
  return lb.GetItem(index);
 },
 SetSelectedItem: function(item){
  var index = (item != null) ? item.index : -1;
  this.SelectIndex(index, false);
 },
 GetText: function(){
  return this.lastSuccessText;
 },
 PerformCallback: function(arg) {
 },
 ClearItemsInternal: function(){
  this.SetValue(null);
  this.CollectionChanged();
 },
 GetModifyEvent: function() {
  if(this.isNative)
   return this.SelectedIndexChanged;
  else
   return ASPxClientDropDownEditBase.prototype.GetModifyEvent.call(this);
 }
});
var ASPxClientComboBox = ASPx.CreateClass(ASPxClientComboBoxBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.allowMultipleCallbacks = false;
  this.allowNull = false;
  this.isCallbackMode = false;
  this.loadDropDownOnDemand = false;
  this.needToLoadDropDown = false;
  this.isPerformCallback = false;
  this.changeSelectAfterCallback = 0;
  this.incrementalFilteringMode = "Contains";
  this.filterStrategy = null;
  this.filterTimer = ASPx.Browser.WebKitTouchUI ? 300 : 100; 
  this.filterMinLength = 0;
  this.customFiltering = false;
  this.initTextCorrectionRequired = false;
  this.isDropDownListStyle = true;
  this.defaultDropDownHeight = "";
  this.dropDownHeight = "";
  this.dropDownWidth = "";
  this.dropDownRows = 7;
  this.enterKeyPressed = false;
  this.onLoadDropDownOnDemandCallbackFinalizedEventHandler = null;
  this.callBackCoreComplete = false; 
  this.adroidSamsungBugTimeout = 0; 
  this.isNeedToForceFirstShowLoadingPanel = true; 
  this.forceLoadCustomRangeOnDropDown = false;
  this.needToInitPopupWindowOnShow = false;
  this.ItemFiltering = new ASPxClientEvent();
  this.CustomHighlighting = new ASPxClientEvent();
 },
 Initialize: function(){
  this.needToLoadDropDown = this.loadDropDownOnDemand;
  var lb = this.GetListBoxControl();
  this.InitializeListBoxOwnerName();
  this.InitScrollSpacerVisibility();
  this.InitializeFilterStrategy();
  var mainElement = this.GetMainElement();
  var input = this.GetInputElement();    
  var ddbutton = this.GetDropDownButton();
  ASPx.Evt.AttachEventToElement(input, "paste", this.SyncRawValueIfHasTextDecorators.bind(this, true));
  if(this.isDropDownListStyle && ASPx.Browser.WindowsPlatform && ASPx.Browser.Safari) {
   ASPx.Evt.AttachEventToElement(this.GetInputElement(), "blur", function() {
    var inputElementValue = this.GetInputElement().value;
    if(!this.focusEventsLocked && !inputElementValue && !!this.GetText())
     this.OnTextChanged();
   }.aspxBind(this)); 
  }
  if(this.isToolbarItem) {
   mainElement.unselectable="on";
   input.unselectable="on";
   if(input.offsetParent)
    input.offsetParent.unselectable="on";
   if(ddbutton)
    ddbutton.unselectable="on";
   if(lb)
    lb.SetItemRowsUnselectable();
  }
  this.RemoveRaisePSValidationFromListBox();
  this.RedirectStandardValidators();
  if(lb && lb.GetItemCount() > 0)
   this.EnsureListBoxSelectionSynchronized(lb);
  ASPxClientComboBoxBase.prototype.Initialize.call(this);
 },
 InitScrollSpacerVisibility: function() {
  var lb = this.GetListBoxControl();
  if(!lb || lb.GetItemCount() >= lb.callbackPageSize)
   return;
  lb.SetScrollSpacerVisibility(true, false);
  lb.SetScrollSpacerVisibility(false, false);
 },
 InitializeFilterStrategy: function() {
  var fs = this.filterStrategy;
  ASPx.Evt.AttachEventToElement(this.GetInputElement(), "keydown", fs.OnKeyDown.bind(fs));
 },
 CreateFilterStrategy: function() {
  if(this.incrementalFilteringMode == "Contains")
   return new ComboBoxContainsFilterStrategy(this);
  else if(this.incrementalFilteringMode == "StartsWith")
   return new ComboBoxStartsWithFilterStrategy(this);
  else if(this.incrementalFilteringMode == "None")
   return new ComboBoxDisabledFilterStrategy(this);
 },
 shouldStartUserInputTimer: function() {
  return true;
 },
 onInputChangedOnUserInputTimer: function(onRestart) {
  ASPxClientDropDownEditBase.prototype.onInputChangedOnUserInputTimer.call(this);
  if (!onRestart) {
   this.SyncRawValueIfHasTextDecorators();
   this.filterStrategy.OnInput();
  }
 },
 RaiseItemFiltering: function(item, filter, isFit) {
  if(!this.ItemFiltering.IsEmpty()) {
   var args = new ASPxClientListEditItemFilteringEventArgs(item, filter, isFit);
   this.ItemFiltering.FireEvent(this, args);
   isFit = args.isFit;
  }
  return isFit;
 },
 RaiseCustomHighlighting: function(filter, callbackHighlighting) {
  if(!this.CustomHighlighting.IsEmpty()) {
   var args = new ASPxClientListEditCustomHighlightingEventArgs(filter);
   args.highlighting = callbackHighlighting;
   this.CustomHighlighting.FireEvent(this, args);
   return args.highlighting;
  }
  return callbackHighlighting;
 },
 InlineInitialize: function() {
  this.BeforeInlineInitialize();
  this.filterStrategy = this.CreateFilterStrategy();
  ASPxClientComboBoxBase.prototype.InlineInitialize.call(this);
 },
 UseSpecialKeyboardHandling: function() {
  return true;
 },
 IsClearButtonVisibleAuto: function() {
  return this.allowNull && ASPxClientComboBoxBase.prototype.IsClearButtonVisibleAuto.call(this);
 },
 BeforeInlineInitialize: function() {
  this.lastSuccessValue = this.GetDecodeValue(this.lastSuccessValue);
  this.InsureInputValueCorrect();
 },
 InsureInputValueCorrect: function(){ 
  if(this.initTextCorrectionRequired){
   var lb = this.GetListBoxControl();
   if(lb){
    var initSelectedIndex = lb.GetSelectedIndexInternal();
    if(initSelectedIndex >= 0){
     var initSelectedText = lb.GetItem(initSelectedIndex).text;
     var input = this.GetInputElement();
     if(ASPx.IsExists(this.GetRawValue()) && this.GetRawValue() != initSelectedText){
      this.SetRawValue(initSelectedText);
      this.SetInputValue(this.GetDecoratedText(initSelectedText));
     } 
     else if(input.value != initSelectedText)
      this.SetInputValue(initSelectedText);
    }
   }
  }
 },
 ChangeEnabledAttributes: function(enabled){
  ASPxClientComboBoxBase.prototype.ChangeEnabledAttributes.call(this, enabled);
  var changeEventsMethod = ASPx.Attr.ChangeEventsMethod(enabled);
  var mainElement = this.GetMainElement();
  if(mainElement)
   changeEventsMethod(mainElement, ASPx.Evt.GetMouseWheelEventName(), aspxCBMouseWheel);
  var btnElement = this.GetDropDownButton();
  if(btnElement)
   changeEventsMethod(btnElement, "onmousemove", ASPx.CBDDButtonMMove);
 },
 GetDropDownInnerControlName: function(suffix){
  return ASPxClientDropDownEditBase.prototype.GetDropDownInnerControlName.call(this, suffix);
 },
 AdjustControlCore: function() {
  ASPxClientEdit.prototype.AdjustControlCore.call(this);
  this.ResetDropDownSizeCache();
 },
 RemoveRaisePSValidationFromListBox: function() {
  var listBox = this.GetListBoxControl();
  if(listBox)
   listBox.RaisePersonalStandardValidation = function() { };
 },
 RedirectStandardValidators: function() {
  var valueInput = this.GetValueInput();
  if(ASPx.IsExistsElement(valueInput) && valueInput.Validators) {
   for(var i = 0; i < valueInput.Validators.length; i++)
    valueInput.Validators[i].controltovalidate = valueInput.id;
  }
 },
 GetValueInputToValidate: function(){
  return this.GetValueInput();
 },
 SetText: function(text, applyFilter) {
  ASPxClientComboBoxBase.prototype.SetText.call(this, text);
  if(applyFilter)
   this.filterStrategy.Filtering(true);
 },
 SetTextBase: function(text) {
  ASPxClientComboBoxBase.prototype.SetTextBase.call(this, text);
  this.restartCurrentUserInputTimer();
 },
 SetReadOnly: function(readOnly) {
  if(this.isDropDownListStyle && this.incrementalFilteringMode === "None")
   return;
  ASPxClientComboBoxBase.prototype.SetReadOnly.call(this, readOnly);
 },
 GetValueInput: function(){
  return document.getElementById(this.name + "_" + comboBoxValueInputSuffix);
 },
 GetListBoxScrollDivElement: function(){
  return this.GetListBoxControl().GetScrollDivElement();
 },
 RollbackValueInputValue: function(){
  var inputElement = this.GetValueInput();
  if(inputElement)
   inputElement.value = this.lastSuccessValue;
 },
 UpdateValueInput: function() {
  var inputElement = this.GetValueInput();
  if(inputElement) {
   var value = this.GetValue();
   inputElement.value = value != null ? value : "";
  }
 },
 SetInputValue: function(value) {
  var inputElement = this.GetInputElement();
  if(inputElement) {
   inputElement.value = value;
   this.restartCurrentUserInputTimer();
  }
 },
 CollectionChanged: function(filtering){
  this.GetSetValueOptimizeHelper().onItemCollectionChanged();
  var listBox = this.GetListBoxControl();
  listBox.CollectionChanged(filtering);
  var needUpdateDropDownPositionAndSize = listBox.APILockCount == 0 && (this.isShownAtFirst || this.pcIsShowingNow);
  if(needUpdateDropDownPositionAndSize)
   this.UpdateDropDownPositionAndSize();
 },
 UpdateDropDownPositionAndSize: function(){
  this.InitDropDownSize();
  if(this.droppedDown){
   var pc = this.GetPopupControl();
   if(pc)
    pc.UpdatePositionAtElement(this.GetMainElement());
  }
  if(!this.clientVisible)
   this.ResetControlAdjustment();
 },
 GetDropDownHeight: function(){
  if(this.ddHeightCache != ASPx.InvalidDimension)
   return this.ddHeightCache;
  this.EnsureDropDownWidth(); 
  return this.AdjustListBoxHeight();
 },
 GetDropDownWidth: function(){
  return (this.ddWidthCache != ASPx.InvalidDimension && !this.GetIsControlWidthWasChanged()) ? this.ddWidthCache : this.AdjustListBoxWidth();
 },
 EnsureDropDownWidth: function() {
  this.GetDropDownWidth();
 },
 InitDropDownSize: function() {
  if(!this.enabled || this.GetItemCount() == 0) return; 
  var pc = this.GetPopupControl();
  if(pc && this.IsDisplayed() && !this.IsHidden()) {
   var pcwElement = pc.GetCurrentWindowElement();
   if(ASPx.IsExistsElement(pcwElement)){
    var isPcwDisplayed = ASPx.GetElementDisplay(pcwElement);
    if(!isPcwDisplayed)
     pc.SetWindowDisplay(-1, true);
    var listBoxWidth = this.AdjustListBoxWidth();
    var listBoxHeight = this.AdjustListBoxHeight();
    if(listBoxHeight != this.ddHeightCache || listBoxWidth != this.ddWidthCache){
     this.ddHeightCache = listBoxHeight;
     this.ddWidthCache = listBoxWidth;
     pc.SetSize(this.ddWidthCache, this.ddHeightCache);
     pc.SetIsDragged(-1, false);
     pc.ShowAtElement(this.GetMainElement(), true);
    }
    if(!isPcwDisplayed)
     pc.SetWindowDisplay(-1, false);
   }
  } else {
   this.needToInitPopupWindowOnShow = true;
  }
 },
 InitMainElementCache: function(){
  this.mainElementWidthCache = this.GetMainElement().clientWidth;
 },
 GetDefaultDropDownHeight: function(listHeight, count){
  if(this.defaultDropDownHeight == ""){
   this.defaultDropDownHeight = ((listHeight / count) * this.dropDownRows) + "px";
  }
  return this.defaultDropDownHeight;
 },
 AdjustListBoxHeight: function () {
  return this.GetListBoxControl().AdjustHeightInDropDown(this.dropDownHeight, this.dropDownRows);
 },
 AdjustListBoxWidth: function () {
  this.InitMainElementCache();
  return this.GetListBoxControl().AdjustWidthInDropDown(this.GetMainElement(), this.isCallbackMode, this.dropDownWidth);
 },
 SelectIndexSilent: function(lb, index, lockScrollingToItem){
  this.lbEventLockCount ++;
  lb.SelectIndexSilentAndMakeVisible(index, lockScrollingToItem);
  this.ShowItemImageByIndex(index);
  this.lbEventLockCount --;
 },
 GetDecoratedText: function(text) {
  var result;
  var lb = this.GetListBoxControl();
  var hasMultiColumnFormattedSelectedItem = this.displayFormat != null &&
              lb && lb.IsMultiColumn() &&
              this.GetSelectedItem() != null;
  if(hasMultiColumnFormattedSelectedItem)
   result = this.GetMultiColumnFormattedSelectedItemText(lb);
  else
   result = ASPxClientComboBoxBase.prototype.GetDecoratedText.call(this, text);
  return result;
 },
 GetMultiColumnFormattedSelectedItemText: function(lb) {
  var selectedItem = this.GetSelectedItem();
  var textColumnCount = this.GetTextColumnCountForTextDecoration(lb, selectedItem);
  var texts = [textColumnCount];
  for(var i = 0; i < textColumnCount; i++)
   texts[i] = selectedItem.GetColumnTextByIndex(i);
  return ASPx.Formatter.Format(this.displayFormat, texts);
 },
 GetTextColumnCountForTextDecoration: function(lb, item) {
  return lb.GetItemTextCellCount();
 },
 CanApplyNullTextDecoration: function() {
  var result;
  if(this.GetListBoxControl() || !this.loadDropDownOnDemand) {
   var value = this.isInitialized ? this.GetRawValue() : this.GetValue();
   var isValueNull = this.convertEmptyStringToNull && value === "" ? true : value === null;
   result = this.GetSelectedIndex() == -1 && isValueNull;
  } else
   result = this.GetCurrentText() === "";
  return result;
 },
 ForceTextChanged: function() {
  if(this.isCallbackMode && this.filterStrategy)
   this.filterStrategy.ClearFilterApplied();
  ASPxClientComboBoxBase.prototype.ForceTextChanged.call(this);
 },
 ShowDropDownArea: function(isRaiseEvent){
  if(this.needToLoadDropDown) {
   this.EnsureDropDownLoaded();
   return;
  }
  if(this.RequireLoadCustomRangeOnDropDown()){
   this.LoadCustomItemsRange();
   return;
  }
  var lb = this.GetListBoxControl();
  if(!lb || (!this.isDropDownModal() && !lb.GetItemCount()))
   return;
  if(!this.filterStrategy.IsFilterMeetRequirementForMinLength() && !this.isDropDownModal()) {
   this.DropDownButtonPop(true); 
   return;
  }
  if(this.needToInitPopupWindowOnShow) {
   this.needToInitPopupWindowOnShow = false;
   this.InitDropDownSize();
  }
  ASPxClientDropDownEditBase.prototype.ShowDropDownArea.call(this, isRaiseEvent);
  this.EnsureListBoxSelectionSynchronized(lb);
  this.EnsureSelectedItemVisibleOnShow(lb);
  lb.CallbackSpaceInit();
  if(this.accessibilityCompliant)
   this.GetAccessibilityHelper().SetExpandedState(true);
  if(!lb.GetItemCount())
   this.onNoResultsFiltering();
  if(!this.filterStrategy.IsFilterMeetRequirementForMinLength())
   this.onProcessFilterLessMinLength();
 },
 ForceShowLoadingPanel: function() {
  if(this.GetItemCount() == 0 && !this.needToLoadDropDown) {
   var lb = this.GetListBoxControl();
   if(lb) {
    var sizes = { width: this.GetWidth(), height: 100 };
    ASPxClientDropDownEditBase.prototype.ShowDropDownArea.call(this, false, sizes);
    lb.SetHeight(sizes.height);
    lb.SetWidth(sizes.width);
   }
  }
 },
 FireFoxRequiresCacheScrollBar: function(){
  return ASPx.Browser.Firefox && ASPx.Browser.Version >= 3.6; 
 },
 BrowserRequiresCacheScrollBar: function(){
  return ASPx.Browser.WebKitFamily || ASPx.Browser.Opera || this.FireFoxRequiresCacheScrollBar(); 
 },
 HideDropDownArea: function(isRaiseEvent){
  if(this.filterStrategy)
   this.filterStrategy.OnDropDownHideArea();
  if(this.BrowserRequiresCacheScrollBar())
   this.CachedScrollTop();
  ASPxClientDropDownEditBase.prototype.HideDropDownArea.call(this, isRaiseEvent);
  if(this.accessibilityCompliant)
   this.GetAccessibilityHelper().SetExpandedState(false);
 },
 EnsureSelectedItemTextSynchronized: function(){
  var selectedItem = this.GetSelectedItem();
  if(!this.CanSynchronizeSelectedItemText(selectedItem))
   return;
  var textUnsynchronized = this.GetText() !== selectedItem.text;
  var textDecorationUnsynchronized = this.HasTextDecorators() && this.CanApplyTextDecorators() && 
   this.GetDecoratedText(selectedItem.text) !== this.GetInputElement().value; 
  if(textUnsynchronized || textDecorationUnsynchronized || !this.IsImageSynchronized(selectedItem)) {
   this.SetTextBase(selectedItem.text);
   this.ShowItemImage(selectedItem);
   this.SetLastSuccessText(selectedItem.text);
   this.UpdateValueInput();
  }
 },
 IsImageSynchronized: function(selectedItem) {
  var ddImageElement = this.GetDropDownImageElement();
  var imageUrl = selectedItem.imageUrl != "" ? selectedItem.imageUrl : ASPx.Url.GetAbsoluteUrl(ASPx.EmptyImageUrl);
  return !ddImageElement || ASPx.ImageUtils.GetImageSrc(ddImageElement) === imageUrl;
 },
 CanSynchronizeSelectedItemText: function(selectedItem) {
  return !!selectedItem;
 },
 EnsureListBoxSelectionSynchronized: function(listBox){
  var rawText = this.GetTextInternal();
  var lbItem = listBox.GetSelectedItem();
  var lbText = lbItem != null ? lbItem.text : "";
  var isTextsExist = rawText != null && lbText != "";
  var needSynchronize = rawText != lbText || !this.isInitialized;
  if(needSynchronize && isTextsExist) {
   this.SynchronizeListBoxSelection(listBox, rawText);
   if(!this.isInitialized && this.IsValueRestoredByBrowser())
    this.SynchronizeListBoxInitSelection();
  }
 },
 SynchronizeListBoxSelection: function(listBox, rawText) {
  var newSelectedIndex = this.GetAdjustedSelectedIndexByText(listBox, rawText);
  listBox.SelectIndexSilent(newSelectedIndex, false);
 },
 SynchronizeListBoxInitSelection: function() {
  setTimeout(function () {
   var inputText = this.GetInputElement().value;
   var selectedItem = this.FindItemByText(inputText);
   if(selectedItem)
    this.SelectIndex(selectedItem.index, true);
  }.aspxBind(this), 0);
 },
 EnsureSelectedItemVisibleOnShow: function(listBox){
  if(this.BrowserRequiresCacheScrollBar()) 
   listBox.RestoreScrollTopFromCache();
  listBox.EnsureSelectedItemVisible();
 },
 CachedScrollTop: function(){
  this.GetListBoxControl().CachedScrollTop();
  if(this.BrowserRequiresCacheScrollBar()){ 
   var scrollDiv = this.GetListBoxScrollDivElement();
   if(scrollDiv != null)
    scrollDiv.scrollTop = 0;
  }
 },
 IsFilterEnabled: function() {
  return this.incrementalFilteringMode != "None";
 },
 ChangeInputEnabled: function(element, enabled, readOnly){
  ASPxClientTextEdit.prototype.ChangeInputEnabled.call(this, element, enabled, readOnly || (this.isDropDownListStyle && !this.IsFilterEnabled()));
 },
 GetCallbackArguments: function(){
  var args = ASPxClientComboBoxBase.prototype.GetCallbackArguments.call(this);
  args += this.filterStrategy.GetCallbackArguments();
  return args;
 },
 ClearEditorValueByClearButtonCore: function() {
  this.enterKeyPressed = false;
  ASPxClientDropDownEditBase.prototype.ClearEditorValueByClearButtonCore.call(this);
  if(!this.IsFilterEnabled() && this.isDropDownListStyle)
   this.HideDropDownArea();
  else
   this.filterStrategy.OnClearButtonClick();
 },
 ResetEditorState: function() {
  ASPxClientComboBoxBase.prototype.ResetEditorState.call(this);
  this.isNeedToForceFirstShowLoadingPanel = true;
  this.filterStrategy.ResetCallbackState();
 },
 IsFilterRollbackRequiredAfterApply: function() {
  var filterRollbackRequired = !this.GetSelectedItem() && !this.focused && this.InCallback();
  return filterRollbackRequired;
 },
 IsNullState: function() {
  return this.GetSelectedIndex() === -1 && ASPxClientComboBoxBase.prototype.IsNullState.call(this);
 },
 OnPost: function(args) {
  if(!args.isCallback && this.isDropDownListStyle && ASPx.GetFocusedElement() == this.GetInputElement())
   this.OnTextChangedInternal();
  ASPxClientComboBoxBase.prototype.OnPost.call(this, args);
 },
 GetLoadingParentElement: function(listBox) {
  return listBox.GetLoadingParentElement();
 },
 ShowLoadingPanel: function() { 
  var lb = this.GetListBoxControl();
  var loadingParentElement = this.GetLoadingParentElement(lb);
  if(!this.loadingPanelElement) {
   var loadingPanel = this.CreateLoadingPanelWithAbsolutePosition(loadingParentElement, loadingParentElement);
   lb.PreventMouseWheelOnElement(loadingPanel); 
  }
 },
 ShowLoadingDiv: function () {
  var lb = this.GetListBoxControl();
  var loadingParentElement = this.GetLoadingParentElement(lb);
  if(!this.loadingDivElement) {
   var loadingDiv = this.CreateLoadingDiv(loadingParentElement);
   lb.PreventMouseWheelOnElement(loadingDiv);
  }
 },
 HideLoadingPanelOnCallback: function(){
  return false;
 },
 OnCallback: function(result, callbackID) {
  if(!this.CanProcessCallbackResult(callbackID) || !this.GetMainElement())
   return;
  this.defaultDropDownHeight = "";
  if(ASPx.Browser.WebKitTouchUI) { 
   if(this.needToLoadDropDown)
    this.OnLoadDropDownOnDemandCallback(result.c);
   window.setTimeout(function() {
    this.OnCallbackCore(result);
    this.DoEndCallback();
   }.aspxBind(this), 300);
  } else
   this.OnCallbackCore(result);
 },
 OnCallbackCore: function(result) {
  if(result.serverMode)
   this.UpdateStateObjectWithObject({serverMode: true});
  if(this.needToLoadDropDown) {
   if(!ASPx.Browser.WebKitTouchUI)
    this.OnLoadDropDownOnDemandCallback(result.c);
  } else if(!this.filterStrategy.ShouldDiscardCallbackResult()) {
   this.OnCallbackBeforeListBox();
   this.OnListBoxCallback(result);
   this.OnCallbackInternal(result);
   this.OnCallbackFinally(true);
  }
  this.callBackCoreComplete = true;
 },
 OnListBoxCallback: function(result) {
  var selectedValue = this.GetValue();
  var selectedText = this.GetText();
  function shouldSelectSilent(value, text) {
   return value === selectedValue || text === selectedText;
  }
  this.GetListBoxControl().OnCallback(result, shouldSelectSilent);
  this.EnsureSelectedItemTextSynchronized();
 },
 OnLoadDropDownOnDemandCallbackFinalized: function() {
  this.DoReInitializeAfterLoadDropDownOnDemand();
  this.HideLoadingPanel();
  this.HideLoadingDiv();
  var isCallbackForShowDropDownArea = !this.onLoadDropDownOnDemandCallbackFinalizedEventHandler;
  if(isCallbackForShowDropDownArea) {
   this.ShowDropDown();
   if(this.isDropDownModal())
    this.onDropDownModalChanged(true);
  }
  else
   this.onLoadDropDownOnDemandCallbackFinalizedEventHandler();
  this.FixButtonState();
  this.initializeDropDown();
 },
 OnCallbackFinalized: function() {
  if(this.needToLoadDropDown)
   this.OnLoadDropDownOnDemandCallbackFinalized();
 },
 OnLoadDropDownOnDemandCallback: function(html) {
  var node = this.GetLoadedDropDownPrevSibling();
  var tempDiv = node.ownerDocument.createElement('div');
  tempDiv.innerHTML = html;
  var len = tempDiv.childNodes.length;
  for(var ind = len - 1; ind >= 0; ind--) {
   ASPx.InsertElementAfter(tempDiv.childNodes.item(ind), node);
  }
 },
 GetLoadedDropDownPrevSibling: function() {
  return this.GetMainElement();
 },
 ProcessCallbackError: function(errorObj, callbackID) {
  if(!this.CanProcessCallbackResult(callbackID))
   return;
  this.callBackCoreComplete = true;
  ASPxClientDropDownEditBase.prototype.ProcessCallbackError.call(this, errorObj);
 },
 DoEndCallback: function(){ 
  if(!this.callBackCoreComplete && ASPx.Browser.WebKitTouchUI || this.IsDoEndCallbackLocked()) {
   this.UnlockDoEndCallback();
   return;
  }
  this.filterStrategy.OnBeforeDoEndCallback();
  ASPxClientDropDownEditBase.prototype.DoEndCallback.call(this);
  this.filterStrategy.OnAfterDoEndCallback();
  this.callBackCoreComplete = false; 
 },
 RaiseEndCallback: function(){
  if(this.preventEndCallbackRising) {
   this.preventEndCallbackRising = false;
   ASPx.GetControlCollection().DecrementRequestCount(); 
  } else {
   ASPxClientDropDownEditBase.prototype.RaiseEndCallback.call(this);
  }
 },
 OnCallbackError: function(result, data) {
  var lb = this.GetListBoxControl();
  if(lb)
   lb.OnCallbackError(result);
  else
   ASPxClientComboBoxBase.prototype.OnCallbackError.call(this, result, data);
  this.OnCallbackFinally(false);
 },
 OnCallbackFinally: function(isSuccessful){
  this.filterStrategy.OnBeforeCallbackFinally();
  this.CollectionChanged();
  this.HideLoadingElements();
  if(this.isNeedToForceFirstShowLoadingPanel)
   this.isNeedToForceFirstShowLoadingPanel = false;
  this.isPerformCallback = false;
  this.changeSelectAfterCallback = 0;
  if(isSuccessful)
   this.filterStrategy.OnAfterCallbackFinally();
 },
 OnCallbackBeforeListBox: function(){
  var lb = this.GetListBoxControl();
  this.changeSelectAfterCallback = lb.changeSelectAfterCallback;
 },
 OnCallbackCorrectSelectedIndex: function(){
  var lb = this.GetListBoxControl();
  if(this.changeSelectAfterCallback != 0)
   this.SetTextInternal(lb.GetSelectedItem().text);
 },
 OnCallbackInternal: function(result){
  this.OnCallbackCorrectSelectedIndex();
  if(this.isPerformCallback) {
   var lb = this.GetListBoxControl();
   if(!lb.GetItemCount()) {
    this.onNoResultsFiltering();
    if(!this.isDropDownModal())
     this.HideDropDownArea(true);
   }
  }
  this.filterStrategy.OnCallback(result);
 },
 DoReInitializeAfterLoadDropDownOnDemand: function() {
  this.InitializeListBoxOwnerName();
  this.needToLoadDropDown = false;
 },
 CancelLoadCustomRangeOnDropDown: function() {
  delete this.customItemsRangeInfo;
 },
 ForceLoadCustomItemsRangeOnDropDown: function(startIndex, valueToSelect) {
  var count = this.GetListBoxControl().callbackPageSize;
  this.customItemsRangeInfo = { startIndex: startIndex, endIndex: startIndex + count - 1, valueToSelect: valueToSelect };
 },
 RequireLoadCustomRangeOnDropDown: function() { return !!this.customItemsRangeInfo; },
 LoadCustomItemsRange: function() {
  if(this.InCallback()) return;
  this.ClearItems();
  this.ShowInputLoadingPanel();
  var startIndex = this.customItemsRangeInfo.startIndex;
  var endIndex = this.customItemsRangeInfo.endIndex;
  var value = this.customItemsRangeInfo.valueToSelect;
  var callbackArgs = this.GetListBoxControl().GetLoadCustomItemsRangeCallbackArguments(startIndex, endIndex, value);
  this.SendSpecialCallback(callbackArgs, function() { this.OnSuccessCustomItemsRangeLoad(); }.aspxBind(this));
 },
 OnSuccessCustomItemsRangeLoad: function() {
  var info = this.customItemsRangeInfo;
  if(!info) return;
  var listBox = this.GetListBoxControl();
  var startIndex = info.startIndex;
  listBox.serverIndexOfFirstItem = startIndex;
  listBox.SetScrollSpacerVisibility(true, startIndex > 0);
  if(ASPx.IsExists(info.valueToSelect))
   this.SetValue(info.valueToSelect);
  this.CancelLoadCustomRangeOnDropDown();
  this.ShowDropDown();
 },
 EnsureDropDownLoaded: function(callbackFunction) {
  if(this.needToLoadDropDown) {
   this.onLoadDropDownOnDemandCallbackFinalizedEventHandler = callbackFunction ? function() {
    callbackFunction();
   } : null;
   var args = this.FormatLoadDropDownOnDemandCallbackArguments();
   this.SendLoadDropDownOnDemandCallback(args);
  }
 },
 IsDropDownButtonClick: function(evt) {
  return ASPx.GetIsParent(this.GetDropDownButton(), ASPx.Evt.GetEventSource(evt));
 },
 OnDropDown: function(evt) {
  var returnValue = ASPxClientDropDownEditBase.prototype.OnDropDown.call(this, evt);
  if(this.IsDropDownButtonClick(evt) && this.IsCanToDropDown()) {
   this.OnDropDownButtonClick(evt);
   return returnValue;
  }
  return true;
 },
 OnDropDownButtonClick: function(evt) {
  if(this.filterStrategy != null)
   this.filterStrategy.OnDropDownButtonClick();     
  this.ForceRefocusEditor(evt);
 },
 SendCallback: function(onSuccess){
  if(!this.pcIsShowingNow)
   this.ShowLoadingElements();
  ASPxClientComboBoxBase.prototype.SendCallback.call(this, onSuccess);
 },
 IsAndroidKeyEventsLocked: function() {
  return ASPx.Browser.AndroidMobilePlatform && this.androidKeyEventsLocked;
 },
 LockAndroidKeyEvents: function() {
  this.androidKeyEventsLocked = true;
 },
 UnlockAndroidKeyEvents: function() {
  this.androidKeyEventsLocked = false;
 },
 CancelChangesOnUndo: function() {
  if(this.isCallbackMode)
   this.SetTextInternal(this.lastSuccessText);
  else
   this.OnCancelChanges();
  this.filterStrategy.OnUndo();
 },
 OnKeyDown: function(evt) {
  if(this.IsCtrlZ(evt)) {
   this.CancelChangesOnUndo();
   return ASPx.Evt.PreventEvent(evt);
  }
  var isClearKey = ASPx.Data.ArrayIndexOf([ASPx.Key.Delete, ASPx.Key.Backspace], evt.keyCode) >= 0;
  if(isClearKey && this.allowNull && (this.IsAllTextSelected() || this.isDropDownListStyle && !this.IsFilterEnabled()))
   this.ClearEditorValueAndForceOnChange();
  else if(this.IsAndroidKeyEventsLocked())
   return ASPx.Evt.PreventEventAndBubble(evt);
  else
   ASPxClientComboBoxBase.prototype.OnKeyDown.call(this, evt);
 },
 OnKeyUp: function(evt) {
  if(this.IsAndroidKeyEventsLocked())
   return ASPx.Evt.PreventEventAndBubble(evt);
  return ASPxClientComboBoxBase.prototype.OnKeyUp.call(this, evt);
 },
 IsAllTextSelected: function() {
  var input = this.GetInputElement();
  var textLength = input.value.length;
  if(textLength === 0)
   return false;
  var selectionInfo = ASPx.Selection.GetExtInfo(input);
  var selectionLength = selectionInfo.endPos - selectionInfo.startPos;
  return selectionLength === textLength;
 },
 SelectNeighbour: function (step){
  if((this.isToolBarItem && !this.droppedDown) || this.GetReadOnly()) return;
  this.SelectNeighbourInternal(step);
 },
 SelectNeighbourInternal: function(step){
  var lb = this.GetListBoxControl();
  if(this.droppedDown)
   this.lbEventLockCount ++;
  lb.SelectNeighbour(step);
  if(this.droppedDown) {
   var selectedItem = lb.GetSelectedItem();
   if (selectedItem) {
    this.OnSelectionChangedCore(selectedItem.text, selectedItem, true);
   }
   this.lbEventLockCount --;
  }
  if(this.accessibilityCompliant)
   this.GetAccessibilityHelper().SetLabelAttribute(null, null);
 },
 GetFocusSelectAction: function() {
  return this.isToolbarItem ? null : "all";
 },
 OnArrowUp: function(evt){
  if(!this.isInitialized) return true;
  if(this.RequireLoadCustomRangeOnDropDown() && !this.droppedDown) {
   this.LoadCustomItemsRange();
   return;
  }
  var isProcessed = ASPxClientDropDownEditBase.prototype.OnArrowUp.call(this, evt);
  if(!isProcessed && this.filterStrategy.CanNavigateByKbd())
   this.SelectNeighbour(-1);
  return true;
 },
 OnTextChanged: function () {
  if(!this.IsFocusEventsLocked())
   ASPxClientComboBoxBase.prototype.OnTextChanged.call(this);
 },
 OnTextChangedInternal: function() {
  if(!this.forceValueChanged) {
   var preserveFilterInInput = this.InCallback() && this.filterStrategy.currentCallbackIsFiltration;
   if(preserveFilterInInput) return;
  }
  ASPxClientComboBoxBase.prototype.OnTextChangedInternal.call(this);
  if(this.filterStrategy)
   this.filterStrategy.OnTextChanged();
 },
 OnArrowDown: function(evt){
  if(!this.isInitialized) return true;
  if(this.RequireLoadCustomRangeOnDropDown() && !this.droppedDown) {
   this.LoadCustomItemsRange();
   return;
  }
  var isProcessed = ASPxClientDropDownEditBase.prototype.OnArrowDown.call(this, evt);
  if(!isProcessed && this.filterStrategy.CanNavigateByKbd())
   this.SelectNeighbour(1);
  return true;
 },
 OnPageUp: function(){
  if(!this.isInitialized || !this.filterStrategy.CanNavigateByKbd()) return true;
  return this.OnPageButtonDown(false);
 },
 OnPageDown: function(){
  if(!this.isInitialized || !this.filterStrategy.CanNavigateByKbd()) return true;
  return this.OnPageButtonDown(true);
 },
 OnPageButtonDown: function(isDown){
  if(!this.isInitialized) return true;
  var lb = this.GetListBoxControl();
  if(lb){
   var direction = isDown ? 1 : -1;
   this.SelectNeighbour(lb.scrollPageSize * direction);
  }
  return true;
 },
 OnHomeKeyDown: function(evt){
  if(!this.isInitialized) return true;
  return this.OnHomeEndKeyDown(evt, true);
 },
 OnEndKeyDown: function(evt){
  if(!this.isInitialized) return true;
  return this.OnHomeEndKeyDown(evt, false);
 },
 OnHomeEndKeyDown: function(evt, isHome){
  if(!this.isInitialized) return true;
  var input = this.GetValueInput();
  if((input && input.readOnly) || evt.ctrlKey){
   var lb = this.GetListBoxControl();
   var count = lb.GetItemCount();
   this.SelectNeighbour(isHome ? -count : count);
   return true;
  }
  return false;
 },
 OnEscape: function() {
  this.filterStrategy.OnEscape();
  return ASPxClientComboBoxBase.prototype.OnEscape.call(this);
 },
 OnEnter: function(){
  if(!this.isInitialized) return true;
  if(this.isDropDownListStyle) this.enterKeyPressed = true;
  if(this.filterStrategy.IsCloseByEnterLocked()) return;
  this.enterProcessed = this.droppedDown; 
  if(!this.isEnterLocked) { 
   this.OnApplyChangesAndCloseWithEvents();
   this.filterStrategy.OnAfterEnter();
  }
  return this.enterProcessed;
 },
 OnTab: function(evt){
  if(!this.isInitialized) 
   return true;
  if(this.InCallback())
   this.filterStrategy.callbackProcessingStateManager.SetApply();
  else
   this.OnApplyChangesAndCloseWithEvents();
 },
 OnApplyChanges: function(){
  if(!this.focused || (this.isDropDownListStyle && !this.IsFilterEnabled())) return;
  this.OnApplyChangesInternal();
 },
 OnApplyChangesAndCloseWithEvents: function() {
  this.OnApplyChangesInternal();
  this.HideDropDownArea(true);
 },
 OnApplyChangesInternal: function(){
  var inCallback = this.InCallback();
  var lb = this.GetListBoxControl();
  var isChanged = this.HasChanges();
  var isRollback = false;
  if(isChanged || this.filterStrategy.isTotallyMismatchedFilter) {
   this.filterStrategy.isTotallyMismatchedFilter = false;
   this.filterStrategy.needEmptyFilterBeforeFiltering = false;
   var text = this.GetCurrentText();
   if(this.filterStrategy.OnApplyChanges())
    return;
   var adjustedSelectedIndex = this.GetAdjustedSelectedIndexByText(lb, text);
   var isNullState = this.allowNull && !text;
   var rollbackRequired = this.isDropDownListStyle && adjustedSelectedIndex < 0 && !isNullState;
   if(rollbackRequired) {
    var rollbackToItem = lb.GetSelectedItem();
    isRollback = rollbackToItem == null && this.isCallbackMode; 
    if(isRollback) {
     this.RollbackValueInputValue();
     this.RollbackTextInputValue();
    }
    text = rollbackToItem != null ? rollbackToItem.text : this.lastSuccessText;
   } 
   if(!isRollback) {
    var adjustedSelectedItem = this.GetItem(adjustedSelectedIndex);
    var adjustedSelectedItemText = adjustedSelectedItem && adjustedSelectedItem.text;
    text = adjustedSelectedItemText || text;
    var hasChanges = this.HasChanges(text);
    this.SetText(text);
    if(hasChanges)
     this.OnChange();
   }
   else if(!inCallback) {
    this.filterStrategy.OnFilterRollback();
   }
  } 
 },
 GetCurrentText: function(){
  var textDecorated = !this.focused && this.GetRawValue() != null;
  return textDecorated ? this.GetRawValue() : this.GetInputElement().value;
 },
 GetCurrentValue: function(){
  var value = null;
  var selectedItem = this.listBox.GetSelectedItem();
  if(selectedItem && (selectedItem.value !== "" || !this.convertEmptyStringToNull))
   value = selectedItem.value;
  return selectedItem ? value : this.GetValue();
 },
 HasChanges: function(currentText){
  currentText = currentText === undefined ? this.GetCurrentText() : currentText;
  return this.lastSuccessText != currentText || this.lastSuccessValue != this.GetCurrentValue();
 },
 OnButtonClick: function(number){
  if(number != this.dropDownButtonIndex) {
   if(this.droppedDown)
    this.OnApplyChangesAndCloseWithEvents(false);
   else
    ASPxClientComboBoxBase.prototype.OnTextChanged.call(this);
  }
  ASPxClientButtonEditBase.prototype.OnButtonClick.call(this, number);
 },
 OnCancelChanges: function(){
  var isCancelProcessed = ASPxClientDropDownEditBase.prototype.OnCancelChanges.call(this);
  this.filterStrategy.OnCancelChanges();
  var lb = this.GetListBoxControl();
  if(ASPx.IsExists(lb)) {
   var index = this.GetAdjustedSelectedIndexByText(lb, this.lastSuccessText);
   this.SelectIndexSilent(lb, index);
  }
  return isCancelProcessed;
 },
 ShouldCloseOnMCMouseDown: function () {
  return this.GetInputElement().readOnly;
 },
 OnCloseUp: function(evt){
  var evt = ASPx.Evt.GetEvent(evt);
  if(ASPx.Browser.Firefox && evt.type == "mouseup" && ASPx.Evt.GetEventSource(evt).tagName == "DIV") { 
   var scrollDiv = this.GetListBoxControl().GetScrollDivElement();
   var scrollDivID = scrollDiv ? scrollDiv.id : "";
   if(scrollDivID == ASPx.Evt.GetEventSource(evt).id) 
    return;
  }
  ASPxClientDropDownEditBase.prototype.OnCloseUp.call(this, evt);
 },
 OnDDButtonMouseMove: function(evt){
  return (this.droppedDown ? ASPx.Evt.CancelBubble(evt) : true);
 },
 CloseDropDownByDocumentOrWindowEvent: function(causedByWindowResizing) {
  if(!this.InCallback()) {
   this.OnApplyChangesInternal();
   ASPxClientDropDownEditBase.prototype.CloseDropDownByDocumentOrWindowEvent.call(this, causedByWindowResizing);
  }
  this.filterStrategy.OnDropDownCloseByDocumentOrWindowEvent();
 },
 IsCanToDropDown: function() {
  if(this.loadDropDownOnDemand) {
   var lb = this.GetListBoxControl();
   return (!this.needToLoadDropDown && (lb.GetItemCount() || this.isDropDownModal()));
  }
  return ASPxClientDropDownEditBase.prototype.IsCanToDropDown.call(this);
 },
 OnPopupControlShown: function(){
  if(!this.isInitialized) return;
  if(ASPx.Browser.Opera) 
   this.GetListBoxControl().RestoreScrollTopFromCache();
  if(this.lockListBoxClick)
   this.RemoveLockListBoxClick();
  if(this.InCallback()) 
   this.ShowLoadingDivAndPanel();
  ASPxClientDropDownEditBase.prototype.OnPopupControlShown.call(this);
  if(!this.isShownAtFirst) {
   this.InitDropDownSize();
   this.isShownAtFirst = true;
  }
 },
 OnLBSelectedIndexChanged: function(){
  if(!this.lockListBoxClick) {
   this.OnSelectChanged();
   this.filterStrategy.OnSelectedIndexChanged();
   if(this.IsNavigationOnKeyPress()){
    if(!this.droppedDown) {
     ASPx.Selection.Set(this.GetInputElement());
    }
   } else if(this.focused) {
    if(ASPx.IsElementVisible(this.GetInputElement())) 
     this.ForceRefocusEditor();
    else {
     this.UnlockFocusEvents(); 
     this.OnLostFocus(); 
    }
   }
  }
 },
 IsNavigationOnKeyPress: function() {
  var lb = this.GetListBoxControl();
  return lb.IsScrollOnKBNavigationLocked();
 },
 OnListBoxItemMouseUp: function(evt){
  if(!this.lockListBoxClick && !this.InCallback()){
   this.OnApplyChangesInternal();
   this.OnCloseUp(evt);
  }
 },
 OnMouseWheel: function(evt){
  if(this.allowMouseWheel && !this.droppedDown && this.filterStrategy.CanNavigateByKbd()) {
   var wheelDelta = ASPx.Evt.GetWheelDelta(evt);
   if(wheelDelta > 0)
    this.SelectNeighbour(-1);
   else  if(wheelDelta < 0)
    this.SelectNeighbour(1);
   return ASPx.Evt.PreventEvent(evt);
  }
 },
 OnOpenAnotherDropDown: function(){
  this.OnApplyChangesAndCloseWithEvents();
 },
 ParseValue: function() {
  var forceValueChanged = !this.IsValueChanging() && this.IsValueChangeForced();
  var newText = this.GetInputElement().value;
  var oldText = this.GetText();
  var isNeedToParseValue = oldText != newText;
  if(isNeedToParseValue || forceValueChanged) {
   this.StartValueChanging();
   if(this.CanTextBeAccepted(newText, oldText) || forceValueChanged){
    if(isNeedToParseValue || newText)
     this.SetText(newText);
    this.OnChange();
   } else
    this.SetTextInternal(oldText);
   this.EndValueChanging();
  }
 },
 CanTextBeAccepted: function(newText, oldText){
  var notAnyTextCanBeAccepted = this.isDropDownListStyle;
  if(notAnyTextCanBeAccepted){
   var lb = this.GetListBoxControl();
   var newTextPresentInItemCollection = this.GetAdjustedSelectedIndexByText(lb, newText) != -1;
   return newTextPresentInItemCollection;
  }
  var wasTextErased = !newText && oldText;
  if((!wasTextErased) && this.nullText && this.CanApplyNullTextDecoration()) {
   return false;
  }
  return true;
 },
 MakeItemVisible: function(index){
  var lb = this.GetListBoxControl();
  lb.MakeItemVisible(index);
 },
 PerformCallback: function(arg, onSuccess) {
  this.isPerformCallback = true;
  this.CancelLoadCustomRangeOnDropDown();
  this.filterStrategy.OnPerformCallback();
  if(this.needToLoadDropDown) {
   var formatCallbackArg = function(prefix, arg) {  
    arg = arg.toString();
    return (ASPx.IsExists(arg) ? prefix + "|" + arg.length + ';' + arg + ';' : "");
   };
   if(arg === undefined || arg == null)
    arg = "";
   var performArgs = formatCallbackArg(ASPxClientListEdit.CONSTANTS.CALLBACK_PREFIXES.CUSTOM, arg);
   this.onLoadDropDownOnDemandCallbackFinalizedEventHandler = function() {
    var selectedItem = this.listBox.GetSelectedItem();
    if(selectedItem != null)
     this.SetTextInternal(selectedItem.text);
    var lb = this.GetListBoxControl();
    if(lb)
     lb.SetCustomCallbackArg(performArgs);
   };
   var loadItemsRangeArgs = formatCallbackArg(ASPxClientListEdit.CONSTANTS.CALLBACK_PREFIXES.LOAD_RANGE_ITEMS, "0:-2");
   var args = this.FormatLoadDropDownOnDemandCallbackArguments(performArgs + loadItemsRangeArgs);
   this.SendLoadDropDownOnDemandCallback(args, onSuccess);
  } else {
   this.ClearItemsInternal();
   this.GetListBoxControl().PerformCallback(arg, onSuccess);
  }
 },
 ClearItemsInternal: function(){
  ASPxClientComboBoxBase.prototype.ClearItemsInternal.call(this);
  var lbScrollDiv = this.GetListBoxScrollDivElement();
  if(lbScrollDiv)
   lbScrollDiv.scrollTop = "0px";
 },
 SendLoadDropDownOnDemandCallback: function(args, handler) {
  this.ShowInputLoadingPanel();
  this.SendSpecialCallback(args, handler);
 },
 ShowInputLoadingPanel: function() {
  var inputElement = this.GetInputElement();
  var inputParentElement = inputElement.parentNode;
  this.CreateLoadingDiv(inputParentElement, inputElement);
  this.CreateLoadingPanelWithAbsolutePosition(inputParentElement, inputElement);
 },
 FormatLoadDropDownOnDemandCallbackArguments: function(args) {
  var internalArgs = ASPx.IsExists(args) ? args.toString() : "";
  var resultArgs = loadDropDownOnDemandCallbackPrefix + "|0;;";
  return resultArgs + internalArgs;
 },
 CorrectCaretPositionInChrome: function() {
  if(!ASPx.Browser.Chrome) return;
  var currentSelection = ASPx.Selection.GetInfo(this.GetInputElement());
  if(currentSelection.startPos === currentSelection.endPos)
   ASPx.Selection.SetCaretPosition(this.GetInputElement(), 0);
 },
 ForceRefocusEditor: function(evt, isNativeFocus) {
  this.CorrectCaretPositionInChrome();
  this.refocusWhenInputClicked = this.IsElementBelongToInputElement(ASPx.Evt.GetEventSource(evt));
  ASPxClientButtonEditBase.prototype.ForceRefocusEditor.call(this, evt, isNativeFocus);
 },
 OnFocusCore: function () {
  if(this.needToLoadDropDown) {
   var args = this.FormatLoadDropDownOnDemandCallbackArguments();
   this.SendLoadDropDownOnDemandCallback(args);
  } else
   this.FixButtonState();
  ASPxClientDropDownEditBase.prototype.OnFocusCore.call(this);
 },
 FixButtonState: function() {
  var lb = this.GetListBoxControl();
  if(lb && this.ddButtonPushed) {
   this.DropDownButtonPop(true);
  }
 },
 getDropDownEventTargets: function() {
  return ASPxClientComboBoxBase.prototype.getDropDownEventTargets.call(this).concat([
   this.isDropDownListStyle ? this.getInputCell() : null,
  ]);
 },
 onDropDownModalChanged: function(enabled) {
  ASPxClientComboBoxBase.prototype.onDropDownModalChanged.call(this, enabled);
  if(!enabled) {
   if(!this.GetItemCount() || !this.filterStrategy.IsFilterMeetRequirementForMinLength())
    setTimeout(this.HideDropDownArea.bind(this, true), 0);
   this.showDropDownModalMessageElement(false);
  }
  this.GetListBoxControl().onDropDownModalChanged(enabled);
  this.UpdateDropDownPositionAndSize();
 },
 onProcessFilterLessMinLength: function() {
  if(this.isDropDownModal() && this.droppedDown)
   this.showDropDownModalMessageElement(true, this.isDropDownListStyle ? this.msgFilterMinLength : (this.msgFilterMinLength + "<br />" + this.msgFilterNoResults));
  if(!this.isDropDownModal())
   this.HideDropDownArea(true);
 },
 onNoResultsFiltering: function() {
  if(this.isDropDownModal() && this.droppedDown)
   this.showDropDownModalMessageElement(true, this.msgFilterNoResults);
 },
 onBeforeFiltering: function() {
  if(this.isDropDownModal() && this.droppedDown)
   this.showDropDownModalMessageElement(false);
 },
 showDropDownModalMessageElement: function(visible, message) {
  var listBox = this.GetListBoxControl();
  if(!listBox) 
   return;
  if(visible && !this.dropDownModalMessageElement) {
   this.dropDownModalMessageElement = document.createElement("div");
   this.dropDownModalMessageElement.className = "dxdd-info";
   listBox.GetMainElement().parentNode.insertBefore(this.dropDownModalMessageElement, listBox.GetMainElement());
  }
  else if(visible)
   this.dropDownModalMessageElement.style.display = "";
  else if(!visible && this.dropDownModalMessageElement)
   this.dropDownModalMessageElement.style.display = "none";
  if(visible && message)
   this.dropDownModalMessageElement.innerHTML = message;
  if(this.dropDownModalMessageElement)
   ASPx.SetElementDisplay(listBox.GetMainElement(), !visible);
 },
 onDropDownApplyCommandClick: function() {
  this.OnApplyChangesAndCloseWithEvents();
 },
 onDropDownCloseCommandClick: function() {
  this.OnEscape();
 },
 SetItemHtml: function(index, html) {
  this.GetListBoxControl().SetItemHtml(index, html);
 },
 SetItemTooltip: function(index, tooltip) { this.GetListBoxControl().SetItemTooltip(index, tooltip); },
 SetItemAttribute: function(index, attributeName, attributeValue) { this.GetListBoxControl().SetItemAttribute(index, attributeName, attributeValue); },
 AddItemCssClass: function(index, className) { this.GetListBoxControl().AddItemCssClass(index, className); },
 RemoveItemCssClass: function(index, className) { this.GetListBoxControl().RemoveItemCssClass(index, className); },
 SetItemTextCellHtml: function(itemIndex, textCellIndex, html) { this.GetListBoxControl().SetItemTextCellHtml(itemIndex, textCellIndex, html); },
 SetItemTextCellTooltip: function(itemIndex, textCellIndex, tooltip) { this.GetListBoxControl().SetItemTextCellTooltip(itemIndex, textCellIndex, tooltip); },
 SetItemTextCellAttribute: function(itemIndex, textCellIndex, attributeName, attributeValue) { this.GetListBoxControl().SetItemTextCellAttribute(itemIndex, textCellIndex, attributeName, attributeValue); },
 AddItemTextCellCssClass: function(itemIndex, textCellIndex, className) { this.GetListBoxControl().AddItemTextCellCssClass(itemIndex, textCellIndex, className); },
 RemoveItemTextCellCssClass: function(itemIndex, textCellIndex, className) { this.GetListBoxControl().RemoveItemTextCellCssClass(itemIndex, textCellIndex, className); },
 GetAccessibilityText: function() {
  var helper = this.GetAccessibilityHelper();
  return helper && helper.getListSelectedItemText() || this.GetCurrentText();
 }
});
ASPx.Ident.scripts.ASPxClientComboBox = true;
ASPxClientComboBox.Cast = ASPxClientControl.Cast;
var CallbackProcessingStateManager = function(){
 var states = { 
  Default:   0,
  Rollback:     1,
  Apply:     2,
  ApplyAfterRollback: 3
 };
 var state = states.Default;
 return {
  ResetState: function() {
   state = states.Default;
  },
  IsApply: function() {
   return state == states.Apply;
  },
  IsRollback: function() {
   return state == states.Rollback;
  },
  IsApplyAfterRollback: function() {
   return state == states.ApplyAfterRollback;
  },
  NoFilterPostProcessing: function() {
   return !this.IsApply() && !this.IsApplyAfterRollback() && !this.IsRollback();
  },
  SetRollback: function() {
   if(state == states.Default)
    state = states.Rollback;
  },
  SetApply: function() {
   if(state == states.Default)
    state = states.Apply;
  },
  SetApplyAfterRollback: function() {
   if(state == states.Default || state == states.Apply)
    state = states.ApplyAfterRollback;
  },
  OnCallbackResult: function(filterRollbackRequired) {
   if(state == states.Apply) {
    state = filterRollbackRequired ? states.ApplyAfterRollback : states.Default;
    return;
   }
   if(state == states.Rollback) {
    state = states.ApplyAfterRollback;
    return;
   }
   if(state == states.ApplyAfterRollback) {
    state = states.Default;
    return;
   }
  }
 };
};
var ASPxClientNativeComboBox = ASPx.CreateClass(ASPxClientComboBoxBase, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.initSelectedIndex = -1;
  this.raiseValueChangedOnEnter = false;
 },
 InlineInitialize: function () {
  ASPxClientComboBoxBase.prototype.InlineInitialize.call(this);
  var lb = this.GetListBoxControl();
  if(lb != null) lb.SetMainElement(this.GetMainElement());
  if(this.initSelectedIndex == -1) { 
   this.SelectIndex(this.initSelectedIndex, true);
  }
 },
 FindInputElement: function(){
  return this.GetMainElement();
 }, 
 GetDropDownInnerControlName: function(suffix){
  return this.name + suffix;
 },
 PerformCallback: function(arg) {
  this.GetListBoxControl().PerformCallback(arg);
 },
 GetTextInternal: function(){
  var selectedItem = this.GetSelectedItem();
  return (selectedItem != null) ? selectedItem.text : "";
 },
 HasTextDecorators: function() {
  return false;
 },
 SetText: function (text){
  var lb = this.GetListBoxControl();
  var index = this.FindItemIndexByText(lb, text);
  this.SelectIndex(index, false);
  this.SetLastSuccessText((index > -1) ? text : "");
  this.SetLastSuccessValue((index > -1) ? lb.GetValue() : null);
 },
 GetValue: function(){
  var selectedItem = this.GetSelectedItem();
  return (selectedItem != null) ? selectedItem.value : null;
 },
 SetValue: function(value){
  var lb = this.GetListBoxControl();
  if(lb){
   lb.SetValue(value);
   var item = lb.GetSelectedItem();
   var text = item ? item.text : value;
   this.SetLastSuccessText(item != null ? text : "");
   this.SetLastSuccessValue(item != null ? item.value : null);
  }
 },
 ForceRefocusEditor: function(){
 },
 OnCallback: function(result) {
  this.GetListBoxControl().OnCallback(result);
  if(this.GetItemCount() > 0)
   this.SetSelectedIndex(0);
 },
 OnTextChanged: function() {
  this.OnChange();
 },
 SetTextInternal: function(text){
 },
 SetTextBase: function(text){
 },
 ChangeEnabledAttributes: function(enabled){
  this.GetMainElement().disabled = !enabled;
  this.ChangeSpecialInputEnabledAttributes(this.GetMainElement(), ASPx.Attr.ChangeEventsMethod(enabled), true);
 }
});
var AccessibilityHelperComboBox = ASPx.CreateClass(ASPx.AccessibilityHelperBase, {
 constructor: function(comboBox) {
  this.constructor.prototype.constructor.call(this, comboBox);
  this.currentValue = null;
 },
 SetLabelAttribute: function(text, isItemSelected) {
  this.currentValue = this.control.GetValue();
  var message = text !== null ? this.getLabelText(text, isItemSelected) : this.getListSelectedItemText();
  this.PronounceMessage(message);
 },
 PronounceMessage: function(text) {
  var input = this.getInputElement();
  var expandArg = {"aria-expanded" : this.control.droppedDown };
  ASPx.AccessibilityHelperBase.prototype.PronounceMessage.call(this, text, expandArg, ASPx.CloneObject(expandArg), null, input);
 }, 
 SetExpandedState: function(expanded) {
  if(this.currentValue != this.control.GetValue()) {
   this.SetLabelAttribute(null, null);
  } else {
   var input = this.getInputElement();
   var expandArg =  { "aria-expanded": expanded };
   this.changeActivityAttributes(input, expandArg);
   this.changeActivityAttributes(this.getItem(true), expandArg);
  }
 },
 getLabelText: function(text, isItemSelected) {
  var blankText = ASPx.AccessibilitySR.BlankEditorText;
  if(!text)
   text = blankText;
  var itemsCount = this.getListBoxControl().GetVisibleItemCount();
  var formatString = ASPx.AccessibilitySR.ComboBoxFilteringResultFormatString;
  if(!isItemSelected || itemsCount == 1)
   formatString += ASPx.AccessibilitySR.ComboBoxCurrentTextFormatString;
  return ASPx.Str.ApplyReplacement(formatString, [["{0}", itemsCount],
   ["{1}", (isItemSelected || !this.control.lastSuccessText) ? text : this.control.lastSuccessText],
   ["{2}", this.getInputElement().value || blankText]]);
 },
 getListBoxControl: function() { return this.control.GetListBoxControl(); },
 getInputElement: function() { return this.control.GetInputElement(); },
 getListSelectedItemText: function() {
  var lb = this.getListBoxControl();
  var selectedItem = lb.GetSelectedItem();
  var itemText = "";
  if(!!selectedItem) {
   var formatString = ASPx.AccessibilitySR.ItemPositionFormatString;
   var visibleIndex = this.control.isCallbackMode ? selectedItem.index + 1 : lb.GetIndexVisibleItem(selectedItem);
   var itemPositionText = ASPx.Str.ApplyReplacement(formatString, [["{0}", visibleIndex], ["{1}", lb.GetVisibleItemCount()]]);
   itemText = selectedItem.text + itemPositionText;
  } else {
   var input = this.getInputElement();
   itemText = !!input.value ? input.value : ASPx.AccessibilitySR.BlankEditorText;
  }
  return itemText;
 }
});
function setValueOptimizeHelper() {
 var itemCollectionWasChangedSinceLastSetValue = false;
 function canReSetValue() {
  return itemCollectionWasChangedSinceLastSetValue;
 }
 function onSetValue() {
  itemCollectionWasChangedSinceLastSetValue = false;
 }
 return {
  onItemCollectionChanged: function () {
   itemCollectionWasChangedSinceLastSetValue = true;
  },
  setValue: function (comboBox, newValue, methodName) {
   var item = comboBox.FindItemByValue(newValue);
   var reSetValue = comboBox.GetValue() === newValue;
   if (reSetValue && !canReSetValue() && (!item || item.selected)) return;
   comboBox.SetValueInternal(newValue);
   onSetValue();
  }
 };
}
ASPx.CBDDButtonMMove = function(evt){
 return ASPx.GetDropDownCollection().OnDDButtonMouseMove(evt);
};
function aspxCBMouseWheel(evt){
 var srcElement = ASPx.Evt.GetEventSource(evt);
 var focusedCB = ASPx.GetDropDownCollection().GetFocusedDropDown();
 if(focusedCB != null && ASPx.GetIsParent(focusedCB.GetMainElement(), srcElement))
  return focusedCB.OnMouseWheel(evt);
}
var ComboBoxDisabledFilterStrategy = ASPx.CreateClass(ASPx.ListEditFilterStrategyBase, {
 constructor: function(comboBox) {
  this.constructor.prototype.constructor.call(this, comboBox.filterTimer, comboBox.filterMinLength, comboBox.isCallbackMode);
  this.comboBox = comboBox;
  this.callbackProcessingStateManager = new CallbackProcessingStateManager();
 },
 OnDropDownCloseByDocumentOrWindowEvent: function() {
  if(this.comboBox.InCallback())
   this.callbackProcessingStateManager.SetApply();
 },
 OnAfterCallbackFinally: function() {
  if(this.callbackProcessingStateManager.IsApply() || this.callbackProcessingStateManager.IsApplyAfterRollback()) {
   this.comboBox.OnApplyChangesAndCloseWithEvents();
   this.callbackProcessingStateManager.ResetState();
  }
 },
 IsCloseByEnterLocked: function() { return false; },
});
var ComboBoxIncrementalFilterStrategyBase = ASPx.CreateClass(ASPx.ListEditIncrementalFilterStrategyBase, {
 constructor: function(comboBox) {
  this.constructor.prototype.constructor.call(this, comboBox.filterTimer, comboBox.filterMinLength, comboBox.isCallbackMode);
  this.comboBox = comboBox;
  this.isDropDownListStyle = comboBox.isDropDownListStyle;
  this.callbackProcessingStateManager = new CallbackProcessingStateManager();
  this.isTotallyMismatchedFilter = false;
 },
 OnInput: function() {
  if (!this.comboBox.allowNull && !this.GetInputFilterValue())
   this.ClearFilterApplied();
  ASPx.ListEditIncrementalFilterStrategyBase.prototype.OnInput.call(this);
 },
 OnKeyDown: function(evt) {
  var cbInputElement = this.comboBox.GetInputElement();
  var selInfo = ASPx.Selection.GetInfo(cbInputElement);
  if(selInfo.startPos != selInfo.endPos && evt.keyCode == ASPx.Key.Backspace) {
   var currentText = cbInputElement.value;
   var cutText = currentText.slice(0, selInfo.startPos) + currentText.slice(selInfo.endPos);
   var newFilter = ASPx.Str.PrepareStringForFilter(cutText);
   if(cutText != currentText && this.comboBox.filterStrategy.FilterCompareLower(newFilter)) {
    cbInputElement.value = cutText; 
    ASPx.Selection.SetCaretPosition(cbInputElement, selInfo.startPos);
   }
  }
 },
 OnEscape: function() {
  this.FilterStopTimer();
  if(this.InCallback())
   this.callbackProcessingStateManager.SetRollback();
 },
 OnUndo: function() {
  if(this.isCallbackMode)
   this.Filtering();
  else {
   this.FilteringStopClient();
   this.GetListBoxControl().EnsureSelectedItemVisible();
  }
 },
 OnApplyChanges: function () {
  if (this.IsFilterTimerActive()) {
   this.FilterNowAndApply();
   return true;
  }
  return false;
 },
 OnCancelChanges: function () {
  this.OnFilterRollback();
 },
 OnClearButtonClick: function () {
  if (!this.InCallback()) {
   this.FilteringStop();
   if (this.isCallbackMode)
    this.Filtering();
  }
 },
 OnDropDownCloseByDocumentOrWindowEvent: function() {
  if(this.InCallback())
   this.callbackProcessingStateManager.SetApply();
 },
 PreventEndCallbackRising: function() {
  this.comboBox.preventEndCallbackRising = true;
 },
 OnBeforeCallbackFinally: function() {
  this.currentCallbackIsFiltration = false;
 },
 OnAfterCallbackFinally: function() {
  var filterRollbackRequired = false;
  if(this.callbackProcessingStateManager.IsApply() || this.callbackProcessingStateManager.IsApplyAfterRollback()) {
   this.ApplyAfterFinalFiltrationCallback();
   filterRollbackRequired = this.comboBox.IsFilterRollbackRequiredAfterApply();
  }
  if(this.callbackProcessingStateManager.IsRollback())
   filterRollbackRequired = true;
  this.callbackProcessingStateManager.OnCallbackResult(filterRollbackRequired);
  if(filterRollbackRequired)
   window.setTimeout(this.OnFilterRollback.bind(this), 0);
 },
 OnPerformCallback: function() {
  this.ClearFilter();
 },
 CanNavigateByKbd: function() {
  return this.IsFilterMeetRequirementForMinLength();
 },
 ApplyAfterFinalFiltrationCallback: function() {
  var itemIsSelected = this.TrySelectItemAfterFilter();
  this.comboBox.HideDropDownArea();
  var requiredApplyFailed = this.comboBox.isDropDownListStyle && !itemIsSelected && this.comboBox.focused && this.callbackProcessingStateManager.IsApply();
  if(requiredApplyFailed)
   this.comboBox.ShowDropDownArea(true);
  var needApplyChanges = itemIsSelected || !this.comboBox.focused;
  if(needApplyChanges)
   this.comboBox.OnApplyChangesInternal();
 },
 TrySelectItemAfterFilter: function() {
  var lb = this.GetListBoxControl();
  if(!lb) return false;
  var selectedItem;
  if(this.isDropDownListStyle)
   selectedItem = lb.GetVisibleItemCount() == 1 ? lb.GetItem(0) : null;
  else
   selectedItem = lb.FindItemByText(this.filter);
  if(selectedItem) {
   lb.SelectIndexSilent(selectedItem.index);
   this.comboBox.SetTextInternal(selectedItem.text);
  }
  return !!selectedItem;
 },
 IsEnabled: function() {
  return this.comboBox.GetEnabled();
 },
 Filtering: function(fromApi) {
  ASPx.ListEditIncrementalFilterStrategyBase.prototype.Filtering.call(this, fromApi);
  this.comboBox.EnsureClearButtonVisibility();
 },
 ShouldClearFilterBeforeFiltering: function(filter) {
  return this.TryRollbackLastSuccessText(this.GetInputFilterValue());
 },
 OnBeforeFiltering: function() {
  this.comboBox.onBeforeFiltering();
  this.EnsureDropDownAreaStateBeforeFiltering();
  if(this.isCallbackMode && !this.comboBox.droppedDown && this.comboBox.isNeedToForceFirstShowLoadingPanel)
   this.comboBox.ForceShowLoadingPanel();
 },
 OnAfterFiltering: function() {
  if(!this.isCallbackMode)
   this.ResetCallbackState();
 },
 OnFilteringCancelled: function(filteringFromApi) {
  if(this.comboBox.isCallbackMode) {
   var firstItem = this.GetListBoxControl().GetItem(0);
   if(firstItem && firstItem.selected) {
    this.HighlightTextAfterCallback(firstItem.text);
    this.EnsureDropDownAreaStateBeforeFiltering();
   }
   else if(filteringFromApi)
    this.EnsureDropDownAreaStateBeforeFiltering();
  }
  this.ResetCallbackState();
 },
 OnFilterRollback: function() {
  if(this.InCallback() && this.currentCallbackIsFiltration) 
   return;
  if(this.isCallbackMode && this.filterInitialized) {
   var listBox = this.GetListBoxControl();
   this.callbackProcessingStateManager.SetApplyAfterRollback();
   if(this.comboBox.GetText() != "" && this.comboBox.isDropDownListStyle) {
    listBox.ClearItems();
    this.needEmptyFilterBeforeFiltering = false;
    var currentSelectedItemCbArgs = ASPx.FilteringUtils.FormatCallbackArg(currentSelectedItemCallbackPrefix, "");
    this.comboBox.SendSpecialCallback(currentSelectedItemCbArgs);
   } else
    this.Filtering();
   this.SetFilter(this.comboBox.GetText());
   this.SetHighlighting(this.filter);
   this.ClearFilterApplied();
  }
 },
 NotifyCollectionChanged: function() {
  this.comboBox.CollectionChanged(true);
 },
 TryProcessFilterLessMinLength: function(oldFilter) {
  this.comboBox.onProcessFilterLessMinLength();
  this.ResetCallbackState();
  this.GetListBoxControl().SelectIndexSilent(-1, false);
  return true;
 },
 GetSelectedIndex: function() {
  return this.comboBox.GetSelectedIndex();
 },
 ResetCallbackState: function() {
  this.callbackProcessingStateManager.ResetState();
 },
 HighlightTextAfterCallback: function() { },
 IsCloseByEnterLocked: function() { return false; },
 TryRollbackLastSuccessText: function(filter) {
  if(this.comboBox.allowNull || filter) return false;
  var inpValue = this.comboBox.lastSuccessText;
  var inputElement = this.comboBox.GetInputElement();
  if(this.comboBox.HasTextDecorators()) {
   this.comboBox.SetRawValue(inpValue);
   if(this.comboBox.CanApplyTextDecorators())
    this.comboBox.SetInputValue(this.comboBox.GetDecoratedText(inpValue));
   else
    this.comboBox.SetInputValue(inpValue);
  }
  else if(inputElement.value != inpValue)
   this.comboBox.SetInputValue(inpValue);
  if(this.comboBox.focused)
   ASPx.Selection.Set(inputElement, 0, inputElement.value.length);
  var lb = this.comboBox.GetListBoxControl();
  if(lb) {
   if(this.comboBox.lastSuccessValue != null)
    lb.SetValue(this.comboBox.lastSuccessValue);
   else {
    var index = lb.FindItemIndexByText(this.comboBox.lastSuccessText);
    lb.SelectIndexSilent(index);
   }
  }
  this.comboBox.ShowCurrentItemImage();
  return true;
 },
 EnsureDropDownAreaStateBeforeFiltering: function() {
  var showDropDown = this.CanShowDropDownOnFocus(this.filter);
  if(this.callbackProcessingStateManager.NoFilterPostProcessing() && showDropDown) {
   var lb = this.GetListBoxControl();
   if(lb)
    lb.LockScrollHandler();
   this.EnsureShowDropDownArea();
   if(lb)
    lb.UnlockScrollHandler();
  } else if(!showDropDown)
   this.comboBox.HideDropDownArea();
 },
 EnsureShowDropDownArea: function() {
  if(!this.comboBox.droppedDown && this.comboBox.focused) {
   this.comboBox.CancelLoadCustomRangeOnDropDown();
   this.comboBox.ShowDropDownArea(true);
  }
 },
 CanShowDropDownOnFocus: function(filter) {
  if(filter != "")
   return true;
  return !!this.comboBox.showDropDownOnFocus ? this.comboBox.showDropDownOnFocus !== "Never" : true;
 },
 AllowEmptyFilterResults: function() {
  return !this.comboBox.isDropDownListStyle;
 },
 GetInputFilterValue: function() {
  var rawValue = this.comboBox.GetRawValue();
  return rawValue !== null && rawValue !== undefined ? rawValue : this.comboBox.GetInputElement().value;
 },
 GetListBoxControl: function() {
  return this.comboBox.GetListBoxControl();
 },
 OnBeforeFilteringOnClient: function(filter) {
  var comboBox = this.comboBox;
  if(comboBox.isDropDownListStyle) {
   if(this.GetInputFilterValue() != filter)
    comboBox.SetInputValue(filter);
   if(ASPx.IsExists(comboBox.GetRawValue()))
    comboBox.SetRawValue(filter);
   this.SetFilter(filter);
  }
  this.TryRollbackLastSuccessText(filter);
 },
 OnAfterFilteringOnClientCore: function (filter, firstSatisfyItemIndex) {
  if(firstSatisfyItemIndex !== -1 && this.CanShowDropDownOnFocus(filter))
   this.GetListBoxControl().CorrectCellWidthsOnFirstRowItemReplacement(0, firstSatisfyItemIndex);
  else {
   this.comboBox.onNoResultsFiltering();
   if(!this.comboBox.isDropDownModal())
    this.comboBox.HideDropDownArea(true);
  }
  this.needEmptyFilterBeforeFiltering = false;
 },
 FilteringStop: function() {
  if(!this.isCallbackMode)
   this.FilteringStopClient();
 },
 FilteringStopClient: function() {
  this.MakeAllItemsVisible();
  this.ClearFilter();
  this.DiscardHighlighting();
 },
 MakeAllItemsVisible: function() {
  ASPx.ListEditIncrementalFilterStrategyBase.prototype.MakeAllItemsVisible.call(this);
  this.NotifyCollectionChanged();
 },
 FilterNowAndApply: function() {
  this.callbackProcessingStateManager.SetApply();
  this.Filtering();
  if(!this.comboBox.isCallbackMode)
   this.comboBox.OnApplyChangesInternal();
 },
 InCallback: function() {
  return this.comboBox.InCallback();
 },
 OnCallbackCore: function(highlighting, newFilterLength) {
  if(this.currentCallbackIsFiltration) {
   var lb = this.GetListBoxControl();
   if(!lb.GetItemCount() || !this.CanShowDropDownOnFocus(this.filter)) {
    this.comboBox.onNoResultsFiltering();
    if(!this.comboBox.isDropDownModal())
     this.comboBox.HideDropDownArea(true);
   }
   else {
    this.OnFilterCallbackHighlightAndSelect(highlighting, newFilterLength);
    var isNeedToKeepDropDownVisible = !this.comboBox.isPerformCallback && this.callbackProcessingStateManager.NoFilterPostProcessing();
    if(!this.CanShowDropDownOnFocus(this.filter))
     this.comboBox.HideDropDownArea();
    else if(isNeedToKeepDropDownVisible)
     this.EnsureShowDropDownArea();
    this.OnEndFiltering();
   }
  }
  else
   this.RefreshHighlighting();
 },
 OnFilterCallbackHighlightAndSelect: function(highlighting, newFilterLength) {
  var listBox = this.GetListBoxControl();
  var firstItemText = listBox.GetItem(0).text;
  var isTextClearing = !this.comboBox.allowNull && this.IsEmptyFilter() && firstItemText;
  if(!isTextClearing) {
   var isFilterRollBack = this.CheckForFilterRollback(newFilterLength);
   var isNonFilterChangingCallback = (listBox.GetSelectedItem() == null);
   this.isTotallyMismatchedFilter = this.TryRollbackLastSuccessText(this.filter);
   var isNullState = this.comboBox.allowNull && !this.filter && !listBox.FindItemByText(this.filter);
   if(!this.isTotallyMismatchedFilter && !isNullState)
    this.SetHighlighting(this.filter, highlighting);
   if(!this.isTotallyMismatchedFilter && !isNullState && (isFilterRollBack || isNonFilterChangingCallback))
    this.HighlightTextAfterCallback(firstItemText);
   else
    this.DiscardHighlighting();
  }
  else
   this.TryRollbackLastSuccessText(this.filter);
 },
 CheckForFilterRollback: function(newFilterLength) {
  var filter = ASPx.Str.PrepareStringForFilter(this.filter);
  if(typeof(newFilterLength) === "number" && filter.length > newFilterLength) {
   var inputText = this.GetCutInputText(this.filter, newFilterLength);
   this.SetFilter(filter.substring(0, newFilterLength));
   this.comboBox.SetInputValue(inputText);
   return true;
  }
  return false;
 },
 GetCutInputText: function(text, textLength) {
  var saveCaseSensitive = true;
  var result = ASPx.Str.PrepareStringForFilter(text, saveCaseSensitive);
  return result.substring(0, textLength);
 },
 SendCallbackCore: function() {
  this.comboBox.SendCallback();
 },
 SupportsFilterCorrection: function() {
  return this.isDropDownListStyle;
 },
 SetListBoxSuggestionSelection: function() {
  var lb = this.GetListBoxControl();
  var singleItem = lb && lb.GetVisibleItemCount() == 1;
  var canSuggest = this.comboBox.isDropDownListStyle && this.comboBox.droppedDown && singleItem;
  var itemIndex = -1;
  if(canSuggest) {
   itemIndex = lb.GetFirstFilteredItemIndex();
   this.comboBox.SelectIndexSilent(lb, itemIndex);
  }
  if(this.comboBox.accessibilityCompliant)
   this.comboBox.GetAccessibilityHelper().SetLabelAttribute(canSuggest ? lb.GetItem(itemIndex).text : this.GetInputFilterValue(), canSuggest);
 },
 FilteringBackspace: function() {
  var currentText = this.GetInputFilterValue();
  if(currentText.length)
   this.comboBox.SetInputValue(currentText.slice(0, -1));
  this.FilterStartTimer();
 },
 RaiseItemFilteringEvent: function(item, filter, isFit) {
  return this.comboBox.RaiseItemFiltering(item, filter, isFit);
 },
 RaiseCustomHighlightingEvent: function(filter, callbackHighlighting) {
  return this.comboBox.RaiseCustomHighlighting(filter, callbackHighlighting);
 }
});
var ComboBoxContainsFilterStrategy = ASPx.CreateClass(ComboBoxIncrementalFilterStrategyBase, {
 IsSatisfy: function(text, filter) {
  return ASPx.Str.PrepareStringForFilter(text).indexOf(filter) != -1;
 },
 OnDropDownHideArea: function() {
  if(!this.isCallbackMode)
   this.FilteringStopClient();
 },
 OnDropDownButtonClick: function() {
  var lb = this.GetListBoxControl();
  if(lb && lb.GetVisibleItemCount() == 0 && this.isDropDownListStyle)
   this.comboBox.OnCancelChanges();
 },
 OnTextChanged: function() {
  if(!this.comboBox.IsFocusEventsLocked())
   if(!this.comboBox.ChangedByEnterKeyPress())
    this.OnFilterRollback();
 },
 OnBeforeCallbackFinally: function () {
  this.RefreshHighlighting();
  this.SetListBoxSuggestionSelection();
  ComboBoxIncrementalFilterStrategyBase.prototype.OnBeforeCallbackFinally.call(this);
 },
 OnEndFiltering: function(visibleCollectionChanged) {
  ComboBoxIncrementalFilterStrategyBase.prototype.OnEndFiltering.call(this, visibleCollectionChanged);
  this.SetListBoxSuggestionSelection();
 },
 IsCloseByEnterLocked: function() {
  if(this.comboBox.isDropDownListStyle) {
   if(this.IsFilterTimerActive()) return false;
   var lb = this.GetListBoxControl();
   if(lb && lb.GetVisibleItemCount() == 1) return false;
   var selectedItem = this.comboBox.GetSelectedItem();
   if(selectedItem)
    if(this.GetInputFilterValue() == selectedItem.text)
     return false;
   return true;
  }
  return false;
 },
});
var ComboBoxStartsWithFilterStrategy = ASPx.CreateClass(ComboBoxIncrementalFilterStrategyBase, {
 HighlightTextAfterCallback: function(firstItemText) {
  var lb = this.GetListBoxControl();
  this.FilteringHighlightCompletedText(firstItemText);
  if(this.comboBox.accessibilityCompliant)
   this.comboBox.GetAccessibilityHelper().SetLabelAttribute(firstItemText, true);
  if(!this.comboBox.isPerformCallback)
   this.comboBox.SelectIndexSilent(lb, 0);
 },
 OnFirstSatisfiedItemFound: function(index, text, isTextClearing) {
  if(this.needEmptyFilterBeforeFiltering && isTextClearing) return;
  var lb = this.GetListBoxControl();
  if(!isTextClearing)
   this.FilteringHighlightCompletedText(text);
  this.comboBox.SelectIndexSilent(lb, isTextClearing ? -1 : index, true);
 },
 FilteringHighlightCompletedText: function(filterItemText) {
  var input = this.comboBox.GetInputElement();
  ASPx.StartWithFilteringUtils.HighlightSuggestedText(input, filterItemText, this.comboBox,
   this.comboBox.restartCurrentUserInputTimer.bind(this.comboBox));
  if(ASPx.IsExists(this.comboBox.GetRawValue()))
   this.comboBox.SyncRawValueIfHasTextDecorators(false);
 },
 IsSatisfy: function(text, filter) {
  return ASPx.Str.PrepareStringForFilter(text).indexOf(filter) == 0;
 },
 OnDropDownHideArea: function() {
  this.FilteringStop();
 },
 OnEndFiltering: function(visibleCollectionChanged) {
  ComboBoxIncrementalFilterStrategyBase.prototype.OnEndFiltering.call(this, visibleCollectionChanged);
  var selectedItem = this.GetListBoxControl().GetSelectedItem();
  if (selectedItem)
   this.GetListBoxControl().MakeItemVisible(selectedItem.index);
  if(this.comboBox.accessibilityCompliant) {
   this.comboBox.GetAccessibilityHelper().SetLabelAttribute(!!selectedItem ? selectedItem.text : this.GetInputFilterValue(), !!selectedItem);
  }
 },
 OnAfterEnter: function() {
  var inputElement = this.comboBox.GetInputElement();
  ASPx.Selection.SetCaretPosition(inputElement);
 },
 TrySelectItemAfterFilter: function() {
  var lb = this.GetListBoxControl();
  var selectedItem = lb.GetItem(0);
  return !!selectedItem;
 }
});
ASPx.ComboBoxDisabledFilterStrategy = ComboBoxDisabledFilterStrategy;
ASPx.ComboBoxContainsFilterStrategy = ComboBoxContainsFilterStrategy;
ASPx.ComboBoxStartsWithFilterStrategy = ComboBoxStartsWithFilterStrategy;
window.ASPxClientComboBoxBase = ASPxClientComboBoxBase;
window.ASPxClientComboBox = ASPxClientComboBox;
window.ASPxClientNativeComboBox = ASPxClientNativeComboBox;
})();

(function() {
ASPx.currentDragHelper = null;
var currentCursorTargets = null;
var DragHelper = ASPx.CreateClass(null, {
 constructor: function(e, root, clone){
  if(ASPx.currentDragHelper != null) ASPx.currentDragHelper.cancelDrag();
  this.dragArea = 5;
  this.clickX = ASPx.Evt.GetEventX(e);
  this.clickY = ASPx.Evt.GetEventY(e);
  this.centerClone = false;
  this.cachedCloneWidth = -1;
  this.cachedCloneHeight = -1;
  this.cachedOriginalX = -1;
  this.cachedOriginalY = -1;
  this.canDrag = true; 
  if(typeof(root) == "string") 
   root = ASPx.GetParentByTagName(ASPx.Evt.GetEventSource(e), root);
  this.source = e ? ASPx.Evt.GetEventSource(e) : null;
  this.obj = root && root != null ? root : ASPx.Evt.GetEventSource(e);
  this.clone = clone;
  this.dragObj = null; 
  this.additionalObj = null;
  this.onDoClick = null;
  this.onEndDrag = null;
  this.onCancelDrag = null;
  this.onDragDivCreating = null;
  this.onDragDivCreated = null;
  this.onCloneCreating = null;
  this.onCloneCreated = null;
  this.dragDiv = null;
  ASPx.currentDragHelper = this;
  this.clearSelectionOnce = false;
  this.PreventContextMenuOnLongTap();
  ASPx.TouchUIHelper.startPreventingTouchMove();
 }, 
 drag: function(e) {
  if(!this.canDrag) return;
  ASPx.Selection.Clear();
  if(!this.isDragging()) {
   if(!this.isOutOfDragArea(e)) 
    return;
   this.startDragCore(e);
  }
  ASPx.Selection.SetElementSelectionEnabled(document.body, false);
  this.dragCore(e);
 },
 startDragCore: function(e) {  
  this.dragObj = this.clone != true ? this.obj : this.createClone(e);
 },
 dragCore: function(e) { 
  this.updateDragDivPosition(e);
 },
 endDrag: function(e) { 
  if(!this.isDragging() && !this.isOutOfDragArea(e)) {
   if(this.onDoClick)
    this.onDoClick(this, e);
  } else {
   if(this.onEndDrag)
    this.onEndDrag(this, e);
  }
  this.cancelDrag();
 },
 cancel: function(){
  this.cancelDrag();
 },
 cancelDrag: function() {
  ASPx.TouchUIHelper.stopPreventingTouchMove();
  if(this.dragDiv != null) {
   document.body.removeChild(this.dragDiv);
   this.dragDiv = null;
  }
  if(this.onCancelDrag)
   this.onCancelDrag(this);
  ASPx.currentDragHelper = null;
  ASPx.Selection.SetElementSelectionEnabled(document.body, true);
 },
 isDragging: function() {    
  return this.dragObj != null;
 },
 updateDragDivPosition: function(e) {
  if(this.centerClone) {
   this.dragDiv.style.left = ASPx.Evt.GetEventX(e) - this.cachedCloneWidth / 2 + "px";
   ASPx.SetAbsoluteY(this.dragDiv, ASPx.Evt.GetEventY(e) - this.cachedCloneHeight / 2);
  } else {
   this.dragDiv.style.left = this.cachedOriginalX + ASPx.Evt.GetEventX(e) - this.clickX + "px";
   ASPx.SetAbsoluteY(this.dragDiv, this.cachedOriginalY + ASPx.Evt.GetEventY(e) - this.clickY);
  }
 },
 createClone: function(e) {
  this.dragDiv = document.createElement("div");
  if(this.onDragDivCreating)
   this.onDragDivCreating(this, this.dragDiv);
  var clone = this.creatingClone();  
  this.dragDiv.appendChild(clone);
  document.body.appendChild(this.dragDiv);
  this.dragDiv.style.position = "absolute";
  this.dragDiv.style.top = "0";
  this.dragDiv.style.left = "0";
  this.dragDiv.style.cursor = "move";
  this.dragDiv.style.borderStyle = "none";
  this.dragDiv.style.padding = "0";
  this.dragDiv.style.margin = "0";
  this.dragDiv.style.backgroundColor = "transparent";
  this.dragDiv.style.zIndex = 20000; 
  if(this.onCloneCreated)
   this.onCloneCreated(clone);
  this.cachedCloneWidth = clone.offsetWidth;
  this.cachedCloneHeight = clone.offsetHeight;
  if(!this.centerClone) {  
   this.cachedOriginalX = ASPx.GetAbsoluteX(this.obj);
   this.cachedOriginalY = ASPx.GetAbsoluteY(this.obj);
  }
  this.dragDiv.style.width = this.cachedCloneWidth + "px";
  this.dragDiv.style.height = this.cachedCloneHeight + "px";
  if(this.onDragDivCreated)
   this.onDragDivCreated(this, this.dragDiv);
  this.updateDragDivPosition(e);
  return this.dragDiv;
 },
 creatingClone: function() {
  var clone = this.obj.cloneNode(true);
  var scripts = ASPx.GetNodesByTagName(clone, "SCRIPT");
  for(var i = scripts.length - 1; i >= 0; i--)
   ASPx.RemoveElement(scripts[i]);
  ASPx.RippleHelper.RemoveRippleContainer(clone);
  if(!this.onCloneCreating) return clone;
  return this.onCloneCreating(clone);
 },
 addElementToDragDiv: function(element) {
  if(this.dragDiv == null) return;
  this.additionalObj = element.cloneNode(true);
  this.additionalObj.style.visibility = "visible";
  this.additionalObj.style.display = "";
  this.additionalObj.style.top = "";
  this.dragDiv.appendChild(this.additionalObj);
 },
 removeElementFromDragDiv: function() {
  if(this.additionalObj == null || this.dragDiv == null) return;
  this.dragDiv.removeChild(this.additionalObj);
  this.additionalObj = null;
 },
 isOutOfDragArea: function(e) {
  return Math.max(
   Math.abs(ASPx.Evt.GetEventX(e) - this.clickX), 
   Math.abs(ASPx.Evt.GetEventY(e) - this.clickY)
  ) >= this.dragArea;
 },
 PreventContextMenuOnLongTap: function() {
  if(!ASPx.DragUtils.RequirePreventContextMenuOnLongTap(this.obj))
   return;
  this.contextMenuHandler = function(e) {
   ASPx.Evt.DetachEventFromElement(this.obj, "contextmenu", this.contextMenuHandler);
   ASPx.Evt.PreventEvent(e);
  }.bind(this);
  ASPx.Evt.AttachEventToElement(this.obj, "contextmenu", this.contextMenuHandler);
 }
});
var DragUtils = {
 PreventContextMenuOnLongTapMarker: "dxPCM",
 RequirePreventContextMenuOnLongTap: function(element) {
  return element && ASPx.ElementHasCssClass(element, this.PreventContextMenuOnLongTapMarker);
 },
 PreventContextMenuOnLongTap: function(element) {
  if(element && ASPx.Browser.Edge && ASPx.Browser.MSTouchUI) {
   ASPx.AddClassNameToElement(element, this.PreventContextMenuOnLongTapMarker);
  }
 }
};
var CursorTargetTag = { Right: 0, Left: 1, Top: 2, Bottom: 3 };
var CursorTargets = ASPx.CreateClass(null, {
 constructor: function(control) {
  this.control = control;
  this.list = [];
  this.oldtargetElement = null;
  this.oldtargetTag = CursorTargetTag.Right;
  this.targetElement = null;
  this.targetTag = CursorTargetTag.Right;
  this.x = 0;
  this.y = 0;
  this.onTargetCreated = null;
  this.onTargetChanging = null;
  this.onTargetChanged = null;
  this.onTargetAdding = null;
  this.onTargetAllowed = null;
  currentCursorTargets = this;
  this.treeLine = null;
  this.initialScrollOffsetInfo = this.GetParentElementsScrollOffsetInfo();
 },
 addElement: function(element) {
  if(!this.canAddElement(element)) return null;
  var target = new CursorTarget(element);
  if (this.onTargetCreated)
   this.onTargetCreated(this, target);
  this.list.push(target);
  return target;
 },
 removeElement: function(element) {
  for(var i = 0; i < this.list.length; i++) {
   if(this.list[i].element == element) {
    this.list.splice(i, 1);
    return;
   }
  }
 },
 addParentElement: function(parent, child) {
  var target = this.addElement(parent);
  if(target != null) {
   target.targetElement = child;
  }
  return target;
 },
 RegisterTargets: function(element, idPrefixArray) {
  this.addFunc = this.addElement;
  this.RegisterTargetsCore(element, idPrefixArray);
 },
 UnregisterTargets: function(element, idPrefixArray) {
  this.addFunc = this.removeElement;
  this.RegisterTargetsCore(element, idPrefixArray);
 },
 RegisterTargetsCore: function(element, idPrefixArray) {
  if(element == null) return;
  for(var i = 0; i < idPrefixArray.length; i++)
   this.RegisterTargetCore(element, idPrefixArray[i]);
 },
 RegisterTargetCore: function(element, idPrefix) {
  if(!ASPx.IsExists(element.id)) return;
  if(element.id.indexOf(idPrefix) > -1)
   this.addFunc(element);
  for(var i = 0; i < element.childNodes.length; i++)
   this.RegisterTargetCore(element.childNodes[i], idPrefix);
 },
 canAddElement: function(element) {
  if(element == null || !ASPx.GetElementDisplay(element))
   return false;
  for(var i = 0; i < this.list.length; i++) {
   if(this.list[i].targetElement == element) return false;
  }
  if(this.onTargetAdding != null && !this.onTargetAdding(this, element)) return false;
  return element.style.visibility != "hidden";
 },
 getTarget: function(x, y) {
  for(var i = 0; i < this.list.length; i++) {
   var record = this.list[i];
   if(record.contains(x, y)) {
    if(!this.onTargetAllowed || this.onTargetAllowed(record.targetElement, x, y))
     return record.targetElement;
   }
  }
  return null;
 },
 targetChanged: function(element, tag) {
  this.targetElement = element;
  this.targetTag = ASPx.IsExists(tag) ? tag : ASPx.CursorTargetTag.Right;
  if(this.onTargetChanging)
   this.onTargetChanging(this);
  if(this.oldtargetElement != this.targetElement || this.oldtargetTag != this.targetTag) {
   if(this.onTargetChanged)
    this.onTargetChanged(this);
   this.oldtargetElement = this.targetElement;
   this.oldtargetTag = this.targetTag;
  }
 },
 cancelChanging: function() {
  this.targetElement = this.oldtargetElement;
  this.targetTag = this.oldtargetTag;
 },
 refreshTargetTag: function(allowVerticalTags){
  this.targetTag = this.calculateTargetTag(allowVerticalTags);
 },
 calculateTargetTag: function(allowVerticalTags){
  if(allowVerticalTags && this.isCenterPartOfElement())
   return this.isTopPartOfElement() ? CursorTargetTag.Top : CursorTargetTag.Bottom;
  return this.isLeftPartOfElement() ? CursorTargetTag.Left : CursorTargetTag.Right;
 },
 isCenterPartOfElement: function(){
  if(!this.targetElement) return false;
  var coordinate = this.y - this.targetElementY();
  return coordinate < this.targetElement.offsetHeight / 3 || coordinate >  2 * this.targetElement.offsetHeight / 3;
 },
 isLeftPartOfElement: function() {
  if(!this.targetElement) return true;
  var left = this.x - this.targetElementX();
  return left < this.targetElement.offsetWidth / 2;
 },
 isTopPartOfElement: function() {
  if(!this.targetElement) return true;
  var top = this.y - this.targetElementY();
  return top < this.targetElement.offsetHeight / 2;
 },
 targetElementX: function() {
  return this.targetElement != null ? ASPx.GetAbsoluteX(this.targetElement) : 0;
 },
 targetElementY: function() {
  return this.targetElement != null ? ASPx.GetAbsoluteY(this.targetElement) : 0;
 },
 onmousemove: function(e) {
  this.doTargetChanged(e);
 },
 onmouseup: function(e) {
  this.doTargetChanged(e);
  currentCursorTargets = null;
 },
 doTargetChanged: function(e) {
  this.x = ASPx.Evt.GetEventX(e);
  this.y = ASPx.Evt.GetEventY(e);
  var coords = this.GetScrollOffsetCoordinates(this.x, this.y);
  this.targetChanged(this.getTarget(coords.x, coords.y), 0);
 },
 GetScrollOffsetCoordinates: function(x, y) {
  var scrollOffsetInfo = this.GetParentElementsScrollOffsetInfo();
  var dx = scrollOffsetInfo.left - this.initialScrollOffsetInfo.left;
  var dy = scrollOffsetInfo.top - this.initialScrollOffsetInfo.top;
  return {
   x : x + dx,
   y : y + dy
  };
 },
 GetParentElementsScrollOffsetInfo: function() {
  var result = { top : 0, left : 0 };
  var treeLine = this.GetScrollableElementsTreeLine();
  for(var i = 0; i < treeLine.length; i++) {
   result.top += treeLine[i].scrollTop;
   result.left += treeLine[i].scrollLeft;
  }
  return result;
 },
 GetScrollableElementsTreeLine: function() {
  if(!this.treeLine)
   this.treeLine = ASPx.GetElementTreeLine(this.control.GetMainElement().parentNode).filter(function(el) { 
    return ASPx.IsScrollableElement(el); 
   });
  return this.treeLine;
 }
});
var CursorTarget = ASPx.CreateClass(null, {
 constructor: function(element) {
  this.element = element;
  this.targetElement = element;
  this.UpdatePosition();
 },
 contains: function(x, y) {
  return x >= this.absoluteX && x <= this.absoluteX + this.GetElementWidth() &&
   y >= this.absoluteY && y <= this.absoluteY + this.GetElementHeight();
 },
 GetElementWidth: function() {
  return this.element.offsetWidth;
 },
 GetElementHeight: function() {
  return this.element.offsetHeight;
 },
 UpdatePosition: function() {
  this.absoluteX = ASPx.GetAbsoluteX(this.element);
  this.absoluteY = ASPx.GetAbsoluteY(this.element);
 }
});
if(ASPx.Browser.MSTouchUI)
 ASPx.Evt.AttachEventToDocument(ASPx.TouchUIHelper.pointerCancelEventName, function(e) {
  if(ASPx.currentDragHelper != null) {
   ASPx.currentDragHelper.cancel(e);
   return true;
  }
 });
ASPx.Evt.AttachEventToDocument(ASPx.TouchUIHelper.touchMouseUpEventName, function(e) {
  if(ASPx.currentDragHelper != null) {
   ASPx.currentDragHelper.endDrag(e);
   return true;
  }
});
ASPx.Evt.AttachEventToDocument(ASPx.TouchUIHelper.touchMouseMoveEventName, function(e) {
 if(ASPx.currentDragHelper != null && !(ASPx.Browser.WebKitTouchUI && ASPx.TouchUIHelper.isGesture)) {
  ASPx.currentDragHelper.drag(e);
  if(ASPx.TouchUIHelper.isTouchEvent(e) && ASPx.currentDragHelper.canDrag) {
   ASPx.Evt.PreventEvent(e);
   ASPx.TouchUIHelper.preventScrollOnEvent(e);
  }
  return true;
 }
});
ASPx.Evt.AttachEventToDocument("keydown", function(e) {
 if(!ASPx.currentDragHelper) return;
 if(e.keyCode == ASPx.Key.Esc)
  ASPx.currentDragHelper.cancelDrag();
 return true;
});
ASPx.Evt.AttachEventToDocument("keyup", function(e) {
 if (!ASPx.currentDragHelper) return;
 if(e.keyCode == ASPx.Key.Esc && ASPx.Browser.WebKitFamily)
  ASPx.currentDragHelper.cancelDrag();
 return true;
});
ASPx.Evt.AttachEventToDocument("selectstart", function(e) {
 var drag = ASPx.currentDragHelper;
 if(drag && (drag.canDrag || drag.clearSelectionOnce)) {
  ASPx.Selection.Clear();
  drag.clearSelectionOnce = false;
  ASPx.Evt.PreventEvent(e);
  return false;
 }
});
ASPx.Evt.AttachEventToDocument(ASPx.TouchUIHelper.touchMouseUpEventName, function(e) { 
 if(currentCursorTargets != null) {
  currentCursorTargets.onmouseup(e);
  return true;
 }
});
ASPx.Evt.AttachEventToDocument(ASPx.TouchUIHelper.touchMouseMoveEventName, function(e) {
 if(currentCursorTargets != null) {
  currentCursorTargets.onmousemove(e);
  return true;
 }
});
ASPx.DragHelper = DragHelper;
ASPx.CursorTargets = CursorTargets;
ASPx.CursorTarget = CursorTarget;
ASPx.CursorTargetTag = CursorTargetTag;
ASPx.DragUtils = DragUtils;
})();

(function() {
var GridDragHelperBase = ASPx.CreateClass(null, {
 maxRepeatScrollTimeout : 30,
 updateTargetPositionTimeout: 50,
 scrollingStep: 1,
 constructor: function() {
  this.isHorzDrag = false;
  this.savedPositions = { };
  this.rect = null;
 },
 GetActiveTargets: function() { return [ ]; },
 GetScrollHelper: function() { return null; },
 GetExtraCellWidth: function() { return 0; },
 GetCustomizationWindowElement: function() { return null; },
 GetScrollableControl: function() { 
  var helper = this.GetScrollHelper();
  return this.isHorzDrag ? helper.GetHorzScrollableControl() : helper.GetVertScrollableControl();
 },
 OnDragCreated: function(isHorzDrag) {
  if(this.NeedScrollOnDrag(isHorzDrag))
   this.InitializeDragScrolling(isHorzDrag);
 },
 InitializeDragScrolling: function(isHorzDrag) {
  this.isHorzDrag = isHorzDrag;
  this.SaveControlDimensions();
  this.mouseMoveHandler = function(e) { this.OnMouseMove(e); }.aspxBind(this);
  ASPx.Evt.AttachEventToDocument("mousemove", this.mouseMoveHandler);
 },
 SaveControlDimensions: function() {
  var scrollableControl = this.GetScrollableControl();
  var visibility = ASPx.GetElementDisplay(scrollableControl);
  ASPx.SetElementDisplay(scrollableControl, true);
  var scrollDivX = ASPx.GetAbsoluteX(scrollableControl);
  var scrollDivY = ASPx.GetAbsoluteY(scrollableControl);
  var width = scrollableControl.offsetWidth;
  var height = scrollableControl.offsetHeight;
  ASPx.SetElementDisplay(scrollableControl, visibility);
  this.SaveControlDimensionsCore(scrollDivX, width, scrollDivY, height);
 },
 SaveControlDimensionsCore: function(scrollDivX, width, scrollDivY, height) {
  this.rect = { 
   left: scrollDivX, 
   right: scrollDivX + width - this.GetExtraCellWidth(),
   top: scrollDivY,
   bottom: scrollDivY + height
  };
 },
 NeedScrollOnDrag: function(isHorzDrag) {
  var helper = this.GetScrollHelper();
  if(!helper || (isHorzDrag && !helper.HasHorzScroll()) || !isHorzDrag && !helper.HasVertScroll())
   return false;
  return ASPx.Browser.Firefox || helper.HasVertScroll();
 },
 OnMouseMove: function(e) {
  var pos = this.isHorzDrag ? ASPx.Evt.GetEventX(e) : ASPx.Evt.GetEventY(e);
  if(pos === this.savedPositions[this.isHorzDrag])
   return;
  var line = { 
   start:  this.isHorzDrag ? this.rect.left  : this.rect.top,
   end: this.isHorzDrag ? this.rect.right : this.rect.bottom
  };
  var isLeft = pos < line.start;
  var diff = isLeft ? line.start - pos : pos - line.end;
  if(diff <= 0) {
   this.CancelScrolling();
   return;
  }
  this.repeatScrollTimeout = diff < this.maxRepeatScrollTimeout ? this.maxRepeatScrollTimeout - diff : 1;
  this.scrollInc = this.scrollingStep * (isLeft ? -1 : 1);
  this.savedPositions[this.isHorzDrag] = pos;
  this.StartScrolling(this.isHorzDrag);
 },
 StartScrolling: function() {
  if(this.scrollingProcessing)
   return;
  this.scrollingProcessing = true;
  this.scrollHandler = this.RepeatScrolling();
 },
 CancelDrag: function() {
  if(this.mouseMoveHandler)
   ASPx.Evt.DetachEventFromDocument("mousemove", this.mouseMoveHandler);
  this.CancelScrolling();
 },
 CancelScrolling: function() {
  this.scrollingProcessing = false;
  this.scrollHandler = ASPx.Timer.ClearTimer(this.scrollHandler);
 },
 RepeatScrolling: function() {
  var scrollableControl = this.GetScrollableControl();
  if(this.isHorzDrag)
   scrollableControl.scrollLeft += this.scrollInc;
  else
   scrollableControl.scrollTop += this.scrollInc;
  return window.setTimeout(function() { this.scrollHandler = this.RepeatScrolling(); }.aspxBind(this), this.repeatScrollTimeout);
 },
 UpdateTargetPositionPostponed: function() {
  if(!this.GetActiveTargets().length)
   return;
  this.updateTargetPositionTimerID = ASPx.Timer.ClearTimer(this.updateTargetPositionTimerID);
  this.updateTargetPositionTimerID = window.setTimeout(function() { this.UpdateTargetPosition(); }.aspxBind(this), this.updateTargetPositionTimeout);
 },
 UpdateTargetPosition: function() { 
  var targets = this.GetActiveTargets();
  for(var i = 0; i < targets.length; i++)
   targets[i].UpdatePosition();
 },
 OnHeaderTargetAllowed: function(targetElement, x, y) {
  if(!this.rect)
   return true;
  var custWin = this.GetCustomizationWindowElement();
  var inRect = x >= this.rect.left && x <= this.rect.right;
  return inRect || custWin === targetElement;
 },
 UpdateScrollableControlsOnDrag: function(src) {
  this.UpdateTargetPositionPostponed();
  var helper = this.GetScrollHelper();
  var contentScrollDiv = helper.GetScrollDiv(helper.GetContentTable());
  if(contentScrollDiv === src && helper.HasVertScroll()) {
   var scrollDivs = [ helper.GetScrollDiv(helper.GetHeaderTable()), helper.GetScrollDiv(helper.GetFooterTable()) ];
   for(var i = 0; i < scrollDivs.length; i++)
    if(scrollDivs[i])
     scrollDivs[i].scrollLeft = src.scrollLeft;
  }
 }
});
var BatchEditApi = ASPx.CreateClass(null, {
 constructor: function(owner) {
  this.owner = owner;
 },
 GetHelper: function() { return this.owner.GetBatchEditHelper(); },
 GetColumnIndex: function(column) {  },
 CreateControlCellInfo: function(key, column) { },
 SetCellValueCore: function(key, column, value, displayText, cancelCellHighlighting) {
  var helper = this.GetHelper();
  var columnIndex = this.GetColumnIndex(column);
  if(!helper || columnIndex === null) 
   return;
  if(!helper.IsValidRecord(key) || !helper.IsEditableColumn(columnIndex))
   return;
  if(helper.IsEditingCell(key, columnIndex))
   return;
  if(!ASPx.IsExists(displayText))
   displayText = helper.GetColumnDisplayTextByEditor(value, columnIndex);
  if(helper.IsCheckColumn(columnIndex))
   displayText = helper.GetCheckColumnDisplayText(value, columnIndex);
  if(helper.IsColorEditColumn(columnIndex))
   displayText = helper.GetColorEditColumnDisplayText(value, columnIndex);
  helper.SetCellValue(key, columnIndex, value, displayText, cancelCellHighlighting);
  helper.ResetCellValidationState(key, columnIndex);
  helper.UpdateSyncInput(); 
  helper.UpdateItem(key, [columnIndex], false, false, true);
  helper.UpdateCommandButtonsEnabled();
  helper.RemoveRecordErrorIfHasNoChanges(key);
 },
 GetColumnDisplayText: function(column, value) {
  var helper = this.GetHelper();
  var columnIndex = this.GetColumnIndex(column);
  if(!helper || columnIndex === null) 
   return;
  return helper.GetColumnDisplayTextByEditor(value, columnIndex);
 },
 GetCellValueCore: function(key, column, initial) {
  var helper = this.GetHelper();
  var columnIndex = this.GetColumnIndex(column);
  if(!helper || columnIndex === null) return;
  return helper.GetCellValue(key, columnIndex, initial);
 },
 GetCellTextContainerCore: function(key, column) {
  var helper = this.GetHelper();
  var columnIndex = this.GetColumnIndex(column);
  if(!helper || columnIndex === null) return;
  return helper.GetCellTextContainer(key, columnIndex);
 },
 HasChangesCore: function(key, column) {
  var helper = this.GetHelper();
  if(!helper) return false;
  var columnIndex = this.GetColumnIndex(column);
  return helper.HasChanges(key, columnIndex);
 },
 ResetChangesCore: function(key, columnIndex) {
  var helper = this.GetHelper();
  if(!helper) return;
  helper.ResetChanges(key, columnIndex);
  helper.UpdateCommandButtonsEnabled();
 },
 StartEditCore: function(key, columnIndex) {
  var helper = this.GetHelper();
  if(!helper) return;
  helper.StartEdit(key, columnIndex);
 },
 EndEdit: function() {
  var helper = this.GetHelper();
  if(!helper || helper.GetFocusHelper().lockUserEndEdit) 
   return;
  helper.EndEdit();
 },
 MoveFocusBackward: function() {
  var helper = this.GetHelper();
  if(!helper) return;
  return helper.GetFocusHelper().MoveFocusPrev();
 },
 MoveFocusForward: function() {
  var helper = this.GetHelper();
  if(!helper) return;
  return helper.GetFocusHelper().MoveFocusNext();
 },
 IsColumnEdited: function(column) {
  var helper = this.GetHelper();
  if(!helper || !column) return false;
  return helper.IsColumnEdited(this.GetColumIndex(column));
 },
 ValidateItems: function(validateOnlyModified, validateOnCurrentPageOnly) {
  var helper = this.GetHelper();
  if(!helper) return false;
  return !!helper.UserValidateItems(null, validateOnlyModified, validateOnCurrentPageOnly).isValid;
 },
 ValidateRecordCore: function(key) {
  var helper = this.GetHelper();
  if(!helper) return false;
  return !!helper.UserValidateItems(key).isValid;
 }, 
 IsDeletedRecordCore: function(key) {
  var helper = this.GetHelper();
  return helper ? helper.IsDeletedRecord(key) : false;
 },
 IsNewRecordCore: function(key) {
  var helper = this.GetHelper();
  if(!helper) return false;
  return helper.IsNewRecord(key);
 },
 GetEditCellInfo: function() {
  var helper = this.GetHelper();
  if(!helper || !helper.IsEditing()) 
   return null;
  var column = helper.GetFocusedColumn();  
  if(column && !helper.IsColumnEditing(column.index))
   column = null;
  return this.CreateControlCellInfo(helper.GetEditingRecordKey(), column);
 },
 AddNewRecordCore: function(parentRecordKey) {
  var helper = this.GetHelper();
  if(helper)
   helper.AddNewRecord(parentRecordKey);
 },
 DeleteRecordCore: function(key) {
  var helper = this.GetHelper();
  if(helper)
   helper.DeleteItem(key);
 },
 RecoverRecordCore: function(key) {
  var helper = this.GetHelper();
  if(helper)
   helper.RecoverRecord(key);
 },
 GetRecordKeys: function(includeDeleted) {
  var helper = this.GetHelper();
  if(!helper) return [ ];
  return helper.GetRecordKeys(!includeDeleted);
 },
 GetInsertedRecordKeys: function() {
  var helper = this.GetHelper();
  if(!helper) return [ ];
  var indices = helper.GetInsertedRecordKeys();
  if(helper.IsNewItemOnTop())
   indices.reverse();
  return indices;
 },
 GetDeletedRecordKeys: function() {
  var helper = this.GetHelper();
  if(!helper) return [ ];
  return helper.deletedItemKeys.slice();
 },
 GetUpdatedRecordKeys: function() {
  var helper = this.GetHelper();
  if(!helper) return [ ];
  return ASPx.GetObjectKeys(helper.updatedValues);
 },
 GetUnsavedChanges: function() {
  var helper = this.GetHelper();
  if(!helper) return { };
  return helper.GetChangedValuesInfo();
 }
});
var GridStyleHelperBase = ASPx.CreateClass(null, {
 ClearItemStyleKey: "items",
 ErrorItemHtmlKey: "ei",
 BatchEditCellKey: "bec",
 BatchEditModifiedCellKey: "bemc",
 BatchEditMergedModifiedCellKey: "bemergmc",
 BatchEditDeletedItemKey: "bedi",
 FocusedCellKey: "fc",
 SelectedCellKey: "sc",
 InitCellStyleKey: "initial",
 AppliedBatchEditCellStylKey: "batchEdit",
 AppliedFocusedCellStyleKey: "focused",
 AppliedSelectedCellStyleKey: "selected",
 GetStyles: function() { return null; },
 GetStyleInfo: function(styleKey, columnIndex) {
  var info = this.GetStyleInfoCore(styleKey, columnIndex);
  if(info)
   info.styleKey = styleKey;
  return info;
 },
 GetStyleInfoCore: function(styleKey, keyPostFix) {
  var styles = this.GetStyles();
  if(!styles)
   return null;
  if(ASPx.IsExists(keyPostFix)) {
   var key = styleKey + keyPostFix;
   if(styles.hasOwnProperty(key))
    return styles[key];
  }
  return styles[styleKey];
 },
 GetCellStyleKeys: function() {
  var result = [];
  result.push(this.AppliedBatchEditCellStylKey);
  result.push(this.AppliedFocusedCellStyleKey);
  result.push(this.AppliedSelectedCellStyleKey);
  return result;
 },
 UpdateCellBatchEditStyle: function(style, cell) { this.UpdateCellStyle(this.AppliedBatchEditCellStylKey, style, cell); },
 UpdateCellFocusedStyle: function(style, cell) { this.UpdateCellStyle(this.AppliedFocusedCellStyleKey, style, cell); },
 UpdateCellSelectedStyle: function(style, cell) { this.UpdateCellStyle(this.AppliedSelectedCellStyleKey, style, cell); },
 UpdateCellStyle: function(styleKey, style, cell) {
  if(!cell) return;
  this.EnsureCellStyles(cell);
  cell.appliedStyles[styleKey] = this.GetCellStyleToApply(style);
  this.ApplyCellStyles(cell);
 },
 EnsureCellStyles: function(cell) {
  if(cell.appliedStyles)
   return;
  cell.appliedStyles = { }; 
  cell.appliedStyles[this.InitCellStyleKey] = this.CreateEmptyCellStyle(cell.className, cell.style.cssText);
  var keys = this.GetCellStyleKeys();
  for(var i = 0; i < keys.length; i++)
   cell.appliedStyles[keys[i]] = this.CreateEmptyCellStyle();
 },
 CreateEmptyCellStyle: function(className, cssText) {  
  className = className || "";
  cssText = cssText || "";
  return { className: className, cssText: cssText};
 },
 GetCellStyleToApply: function(style) {
  var result = this.CreateEmptyCellStyle();
  if(style) {
   result.className = style.className || "";
   result.cssText = style.cssText || "";
  }
  return result;
 },
 ApplyCellStyles: function(cell) {
  var className = "";
  var cssText = "";
  for(var key in cell.appliedStyles) {
   if(!cell.appliedStyles.hasOwnProperty(key)) continue;
   var style = cell.appliedStyles[key];
   if(!style) continue;
   if(style.className)
    className += " " + style.className;
   if(style.cssText)
    cssText += ";" + style.cssText;
  }
  cell.className = className;
  cell.style.cssText = cssText;
 },
 AddToBatchEditStyle: function(cell, styles, classNames) { this.AddToCellStyleCore(cell, this.AppliedBatchEditCellStylKey, styles, classNames); },
 AddToInitialStyle: function(cell, styles, classNames) { this.AddToCellStyleCore(cell, this.InitCellStyleKey, styles, classNames); },
 AddToCellStyleCore: function(cell, styleKey, styles, classNames) {
  if((!styles && !classNames) || !cell) return;
  this.EnsureCellStyles(cell);
  var style = cell.appliedStyles[styleKey];
  if(!style) return;
  if(classNames)
   style.className += " " + classNames.join(' ');
  if(styles) {
   var fakeCell = document.createElement("TD");
   fakeCell.style.cssText = style.cssText || "";
   for(var property in styles) {
    if(styles.hasOwnProperty(property)) {
     var value = styles[property];
     fakeCell.style[property] = value + (typeof (value) == "number" ? "px" : "");
    }
   }   
   style.cssText = fakeCell.style.cssText;
  }  
  this.ApplyCellStyles(cell);
 },
 ChangeCellInitialClass: function(cell, className, add, preventApply) {
  if(!cell || !cell.appliedStyles)
   return;
  var hasClass = cell.appliedStyles.initial.className.indexOf(className) > -1;
  if(hasClass && !add)
    cell.appliedStyles.initial.className =  cell.appliedStyles.initial.className.replace(className, "");
  if(!hasClass && add)
    cell.appliedStyles.initial.className += " " + className;
  if(!preventApply)
   this.ApplyCellStyles(cell);
 },
 GetEmptyCellStyle: function() { return this.CreateEmptyCellStyle(); },
 GetBatchEditCellStyle: function() { return this.GetStyleInfo(this.BatchEditCellKey); },
 GetBatchEditModifiedCellStyle: function(columnIndex) { return this.GetStyleInfo(this.BatchEditModifiedCellKey, columnIndex); },
 GetBatchEditMergedModifiedCellStyle: function() { return this.GetStyleInfo(this.BatchEditMergedModifiedCellKey); },
 GetFocusedCellStyle: function(style) { return this.GetStyleInfo(this.FocusedCellKey); },
 GetSelectedCellStyle: function(style) { return this.GetStyleInfo(this.SelectedCellKey); },
 IsBatchEditCellStyle: function(style) { return this.CheckStyleInfoByKey(style, this.BatchEditCellKey); },
 IsBatchEditModifiedCellStyle: function(style) { return this.CheckStyleInfoByKey(style, this.BatchEditModifiedCellKey); },
 IsBatchEditMergedModifiedCellStyle: function(style) { return this.CheckStyleInfoByKey(style, this.BatchEditMergedModifiedCellKey); },
 IsFocusedCellStyle: function(style) { return this.CheckStyleInfoByKey(style, this.FocusedCellKey); },
 GetClearItemStyle: function() { return this.GetStyleInfo(this.ClearItemStyleKey); },
 GetBatchEditDeletedItemStyle: function() { return this.GetStyleInfo(this.BatchEditDeletedItemKey); },
 IsClearItemStyle: function(style) { return this.CheckStyleInfoByKey(style, this.ClearItemStyleKey); },   
 IsBatchEditDeletedItemStyle: function(style) { return this.CheckStyleInfoByKey(style, this.BatchEditDeletedItemKey); },   
 CheckStyleInfoByKey: function(styleInfo, key) {
  if(!styleInfo)
   return false;
  return styleInfo.styleKey == key;
 },
 ApplyElementStyle: function(element, styleInfo, skipInitialStyle){
  if(!element) return;
  if(!skipInitialStyle) {
   if(!ASPx.IsExists(element.initialClassName))
    element.initialClassName = element.className;
   if(!ASPx.IsExists(element.initialCssText))
    element.initialCssText = element.style.cssText;
   element.className = element.initialClassName;
   element.style.cssText = element.initialCssText;
  }
  if(styleInfo) {
   element.className += " " + styleInfo.className;
   element.style.cssText += " " + styleInfo.cssText;
  }
 },
 AddClassToElement: function(element, className){
  if(!element) return;
  ASPx.AddClassNameToElement(element, className);
  this.ChangeElementInitialClass(element, className, true);
 },
 RemoveClassFromElement: function(element, className){
  if(!element) return;
  ASPx.RemoveClassNameFromElement(element, className);
  this.ChangeElementInitialClass(element, className);
 },
 ChangeElementInitialClass: function(element, className, add) {
  if(!element) return;
  if(!ASPx.IsExists(element.initialClassName))
   element.initialClassName = element.className;  
  var hasClass = element.initialClassName.indexOf(className) > -1;
  if(hasClass && !add)
    element.initialClassName =  element.initialClassName.replace(className, "");
  if(!hasClass && add)
    element.initialClassName += " " + className;
 },
 AddStyleToElementInitialCssText: function(element, style) {
  this.EnsureElementInitialCssTextFromServer(element);
  var fakeElement = document.createElement("DIV");
  for(var property in style) {
   if(!style.hasOwnProperty(property)) continue;
   var value = style[property];
   fakeElement.style[property] = value + (typeof (value) === "number" ? "px" : "");
  }  
  element.initialCssText = element.initialCssTextFromServer + ";" + fakeElement.style.cssText;
 },
 ResetElementInitialCssText: function(element) {
  if(element.initialCssTextFromServer)
   element.initialCssText = element.initialCssTextFromServer;
 },
 EnsureElementInitialCssTextFromServer: function(element) {
  if(!element.initialCssTextFromServer)
   element.initialCssTextFromServer = element.initialCssText;
 },
 GetErrorItemHtml: function() {
  var styles = this.GetStyles();
  if(!styles)
   return null;
  return styles[this.ErrorItemHtmlKey];
 }
});
var GridCommonUtils = {
 BacthEditLockFocusEventsTriggerTimeout: 50,
 NeedSaveActiveElement: function (control) { return ASPx.Browser.WindowsPhonePlatform && ASPx.Browser.Edge; },
 IsBatchEditMode: function (control) { return control.GetBatchEditHelper && !!control.GetBatchEditHelper(); },
 IsInput: function (element) {
  if (!element) return false;
  return element.tagName == "INPUT" || element.tagName == "TEXTAREA";
 },
 SaveActiveElement: function (control) {
  if (!this.NeedSaveActiveElement(control)) return;
  var activeElement = ASPx.GetActiveElement();
  var isBatchEditing = this.IsBatchEditMode(control);
  var isInput = this.IsInput(activeElement);
  if (!activeElement || !isInput && !isBatchEditing || !ASPx.GetIsParent(control.GetMainElement(), activeElement))
   return;
  control.activeElementSettings = { activeElement: activeElement };
  if (isInput)
   control.activeElementSettings.selInfo = ASPx.Selection.GetInfo(activeElement);
  if (isBatchEditing)
   this.LockBatchEditFocusEvents(control);
 },
 RestoreActiveElement: function (control) {
  var settings = control.activeElementSettings;
  if (!settings) return;
  var oldElement = settings.activeElement;
  if (ASPx.IsExistsElement(oldElement) && oldElement !== ASPx.GetActiveElement()) {
   oldElement.focus();
   if (settings.selInfo)
    ASPx.Selection.Set(oldElement, settings.selInfo.startPos, settings.selInfo.endPos);
  }
  delete control.activeElementSettings;
  this.UnLockBatchEditFocusEvents(control);
 },
 LockBatchEditFocusEvents: function (control) { control.BatchEditFocusEventsLocked = true; },
 UnLockBatchEditFocusEvents: function (control) {
  ASPx.Timer.ClearTimer(control.bacthEditLockFocusEventsTriggerID);
  if (control.BatchEditFocusEventsLocked)
   control.bacthEditLockFocusEventsTriggerID = window.setTimeout(function () { delete control.BatchEditFocusEventsLocked; }, this.BacthEditLockFocusEventsTriggerTimeout);
 },
 IsBatchEditFocusEventsLocked: function (control) { return !!control.BatchEditFocusEventsLocked; }
};
ASPx.GridDragHelperBase = GridDragHelperBase;
ASPx.BatchEditApi = BatchEditApi;
ASPx.GridStyleHelperBase = GridStyleHelperBase;
ASPx.GridCommonUtils = GridCommonUtils;
})();

(function() {
var GridHeaderFilterMode = { List: 1, CheckedList: 2, DateRangePicker: 3, DateRangeCalendar: 4, NumericRangePicker: 5 };
var GridFilterHelper = ASPx.CreateClass(null, {
 constructor: function(grid) {
  this.grid = grid;
  this.activeElement = null;
  this.lockFilter = true;
  this.searchFilterTimer = -1;
  this.searchEditorInitialValue = undefined;
  this.savedSearchEditorValue_beforeCallback = undefined;
  this.searchEditorLastClientValue = undefined;
  this.searchEditorValueChangedOnCallbackWaiting = false;
  this.initialHeaderFilterPopupMinWidth = null;
  this.headerFilterPopupWithButtonPanelMinWidth = null;
  this.headerFilterPopupRelatedColumn = null;
  this.headerFilterPopupDimensions = { };
  this.headerFilterColumnIndicesToInitialize = [ ];
  this.initialHeaderFilterState = { };
  this.SearchEditorKeyDownHandler = this.OnSearchEditorKeyDown.bind(this);
  this.SearchEditorValueChangedHandler = this.OnSearchEditorValueChanged.bind(this);
  this.SearchEditorUserInputHandler = this.OnSearchEditorUserInput.bind(this);
  this.HeaderFilterPopup_PopUpHandler = this.OnHeaderFilterPopup_PopUp.bind(this);
  this.HeaderFilterPopup_CloseUpHandler = this.OnHeaderFilterPopup_CloseUp.bind(this);
  this.HeaderFilterPopup_ResizeHandler = this.OnHeaderFilterPopup_Resize.bind(this);
  ASPx.GetControlCollection().ControlsInitialized.AddHandler(this.OnControlsInitialized, this);
 },
 Reset: function() {
  this.initialHeaderFilterState = { };
 },
 IsFilterLocked: function() { return this.lockFilter; },
 LockFilter: function() { this.lockFilter = true; },
 UnlockFilter: function() { this.lockFilter = false; },
 GetActiveElement: function() { return this.activeElement; },
 ResetActiveElement: function() { this.activeElement = null; },
 IsValidInstance: function() { return this.grid.IsValidInstance(); },
 GetAllowSearchFilterTimer: function() { return this.grid.allowSearchFilterTimer; },
 GetSearchFilterDelay: function() { return this.grid.searchFilterDelay; },
 GetEnableAccessibility: function() { return this.grid.accessibilityCompliant; },
 ResolveColumnIndex: function(id) { return this.grid.getColumnIndex(id); },
 GetSearchEditor: function() { return this.grid.GetSearchEditor(); },
 GetCustomSearchPanelEditor: function() { return this.grid.GetCustomSearchPanelEditor(); },
 GetSearchPanelFilter: function() { return this.grid.searchPanelFilter; },
 ApplySearchPanelFilter: function(value) { this.grid.ApplySearchPanelFilter(value, true); },
 GetContentTable: function() { return this.grid.GetMainTable(); },
 OnInit: function() {
  this.LockFilter();
  window.setTimeout(function() { this.UnlockFilter(); }.bind(this), 0);
  this.EnsureSearchEditor();
  window.setTimeout(function() { this.SaveFilterEditorsState(); }.bind(this), 0);
  window.setTimeout(this.InitializeHeaderFilterPopup.bind(this), 0);
 },
 OnAfterCallback: function() {
  this.LockFilter();
  window.setTimeout(function() { this.UnlockFilter(); }.bind(this), 0);
  this.EnsureSearchEditor();
  window.setTimeout(function() { this.SaveFilterEditorsState(); }.bind(this), 0);
  window.setTimeout(this.InitializeHeaderFilterPopup.bind(this), 0);
 },
 OnBeforeCallback: function() {
  this.LockFilter();
  this.UnloadHeaderFilterPopup();
  var edit = this.GetSearchEditor();
  if(edit)
   this.savedSearchEditorValue_beforeCallback = this.GetEditorStringValue(edit);
 },
 OnCancelCallbackCore: function() {
  this.UnlockFilter();
  this.InitializeHeaderFilterPopup();
 },
 SaveFilterEditorsState: function() { },
 ClearFilterEditorsState: function() { },
 OnDispose: function() {
  ASPx.GetControlCollection().ControlsInitialized.RemoveHandler(this.OnControlsInitialized, this);
 },
 LoadSearchEditorValueOnCallback: function() {
  var edit = this.GetSearchEditor();
  if(edit) {
   var value = this.GetEditorStringValue(edit);
   this.searchEditorValueChangedOnCallbackWaiting = value !== this.savedSearchEditorValue_beforeCallback;
   this.searchEditorLastClientValue = value;
   this.savedSearchEditorValue_beforeCallback = undefined;
  }
 },
 SetSearchPanelCustomEditor: function(editor) {
  if(!ASPx.Ident.IsASPxClientEdit(editor) || !editor.GetMainElement())
   return;
  if(this.grid.customSearchPanelEditorID === editor.name)
   return;
  this.RemoveSearchEditorEvents(this.GetSearchEditor());
  this.grid.customSearchPanelEditorID = editor.name;
  this.EnsureSearchEditor();
 },
 AssignSearchEditorEvents: function(edit) {
  if(edit.dxgvFilterHelper === this)
   return;
  if(edit.KeyDown)
   edit.KeyDown.AddHandler(this.SearchEditorKeyDownHandler);
  if(edit.ValueChanged)
   edit.ValueChanged.AddHandler(this.SearchEditorValueChangedHandler);
  if(edit.UserInput)
   edit.UserInput.AddHandler(this.SearchEditorUserInputHandler);
  edit.dxgvFilterHelper = this;
 },
 RemoveSearchEditorEvents: function(edit) {
  if(!edit || edit.dxgvFilterHelper !== this)
   return;
  if(edit.KeyDown)
   edit.KeyDown.RemoveHandler(this.SearchEditorKeyDownHandler);
  if(edit.ValueChanged)
   edit.ValueChanged.RemoveHandler(this.SearchEditorValueChangedHandler);
  if(edit.UserInput)
   edit.UserInput.RemoveHandler(this.SearchEditorUserInputHandler);
  delete edit.dxgvFilterHelper;
 },
 EnsureSearchEditor: function() {
  var edit = this.GetSearchEditor();
  if(!edit) return;
  this.AssignSearchEditorEvents(edit);
  var isCustomEditor = edit === this.GetCustomSearchPanelEditor();
  this.searchEditorInitialValue = isCustomEditor ? this.GetSearchPanelFilter() : this.GetEditorStringValue(edit);
  var applySearchValueOnCallback = this.searchEditorValueChangedOnCallbackWaiting && this.searchEditorInitialValue !== this.searchEditorLastClientValue;
  if(applySearchValueOnCallback) {
   window.setTimeout(function() {
    edit.SetValue(this.searchEditorLastClientValue);
    this.ApplySearchFilterFromEditor(edit);
   }.bind(this), 0);
  }  else {
   if(isCustomEditor)
    window.setTimeout(function() { edit.SetValue(this.GetSearchPanelFilter()); }.bind(this), 0);
  }
  this.searchEditorValueChangedOnCallbackWaiting = false;
 },
 GetEditorStringValue: function(edit) {
  var value = edit.GetValueString();
  return ASPx.IsExists(value) ? value : "";
 },
 OnSearchEditorKeyDown: function(s, e) {
  if(!e.htmlEvent || !this.IsValidInstance())
   return;
  e = e.htmlEvent;
  var clearEditor = e.keyCode == ASPx.Key.Delete && e.ctrlKey;
  if(e.keyCode == ASPx.Key.Enter || clearEditor) {
   if(clearEditor)
    s.SetValue(null);
   this.ApplySearchFilterFromEditor(s);
   ASPx.Evt.PreventEventAndBubble(e);
   return;
  }
  this.CreateSearchFilterTimer(s);
 },
 OnSearchEditorUserInput: function(s, e) {
  if(!this.IsValidInstance() || this.IsSearchFilterTimerActive())
   return;
  this.OnSearchEditorOnPaste(s);
 },
 OnSearchEditorOnPaste: function(editor) {
  this.EnsureEditorRawValue(editor);
  this.CreateSearchFilterTimer(editor);
 },
 OnSearchEditorValueChanged: function(s, e) {
  if(!this.IsValidInstance())
   return;
  window.setTimeout(function() { this.ApplySearchFilterFromEditor(s);  }.bind(this), 0);
 },
 IsSearchFilterTimerActive: function() {
  return this.searchFilterTimer !== -1;
 },
 CreateSearchFilterTimer: function(editor) {
  if(!this.GetAllowSearchFilterTimer()) return;
  this.ClearSearchFilterTimer();
  this.searchFilterTimer = window.setTimeout(function() { this.ApplySearchFilterFromEditor(editor);  }.bind(this), this.GetSearchFilterDelay());
 },
 ClearSearchFilterTimer: function() {
  this.searchFilterTimer = ASPx.Timer.ClearTimer(this.searchFilterTimer);
 },
 ApplySearchFilterFromEditor: function(edit) {
  this.ClearSearchFilterTimer();
  if(this.IsFilterLocked()) return;
  if(!edit || !this.GetContentTable())
   return;
  edit.Validate();
  if(!edit.GetIsValid()) 
   return;
  var value = this.GetEditorStringValue(edit);
  if(value === this.searchEditorInitialValue)
   return;
  this.SaveFilterEditorActiveElement(edit);
  this.ApplySearchPanelFilter(value);
 },
 EnsureEditorRawValue: function(edit) {
  if(ASPx.GetFocusedEditor() === edit && edit.SyncRawValueIfHasTextDecorators) {
   edit.SyncRawValueIfHasTextDecorators();
  }
 },
 SaveFilterEditorActiveElement: function(editor) {
  if(!editor) return;
  var columnIndex = this.ResolveColumnIndex(editor.name);
  if(columnIndex < 0 && editor !== this.GetSearchEditor())
   return;
  this.activeElement = this.GetFilterEditorInputElement(editor);
 },
 GetFilterEditorInputElement: function(editor) {
  if(document.activeElement && !ASPx.Browser.VirtualKeyboardSupported) 
   return document.activeElement;
  if(editor.GetInputElement) 
   return editor.GetInputElement();
  return null;
 },
 GetHeaderFilterPopup: function() { return this.grid.GetHeaderFilterPopup(); },
 GetEnableCallbackAnimation: function() { return this.grid.enableCallbackAnimation; },
 GetEnableHeaderFilterCaching: function() { return this.grid.enableHeaderFilterCaching; },
 GetHeaderFilterIconClassName: function() { return this.grid.HeaderFilterButtonClassName; }, 
 GetColumnHeaders: function(columnIndex) { return [ this.grid.GetHeader(columnIndex, false), this.grid.GetHeader(columnIndex, true) ]; },
 GetColumn: function(columnIndex) { return this.grid._getColumn(columnIndex); },
 GetColumnCount: function() { return this.grid.GetColumnsCount(); },
 ApplyHeaderFilter: function() { this.grid.ApplyHeaderFilterByColumn(); },
 GetCustomizationWindow: function() { return this.grid.GetCustomizationWindow(); },
 ShowLoadingPanelInsideHeaderFilterPopup: function() { this.grid.ShowLoadingPanelInsideHeaderFilterPopup(); },
 GetListBox: function(columnIndex) { 
  var listBox = ASPx.GetControlCollection().Get(this.grid.name + "_HFListBox" + columnIndex); 
  return listBox && !listBox.IsDOMDisposed() ? listBox : null;
 },
 GetSelectAllCheckBox: function(columnIndex) { 
  var checkBox = ASPx.GetControlCollection().Get(this.grid.name + "_HFSACheckBox" + columnIndex); 
  return checkBox && !checkBox.IsDOMDisposed() ? checkBox : null;
 },
 GetDateEdit_From: function(columnIndex) {
  var dateEdit = ASPx.GetControlCollection().Get(this.grid.name + "_HFFDE" + columnIndex); 
  return dateEdit && !dateEdit.IsDOMDisposed() ? dateEdit : null;
 },
 GetDateEdit_To: function(columnIndex) { 
  var dateEdit = ASPx.GetControlCollection().Get(this.grid.name + "_HFTDE" + columnIndex); 
  return dateEdit && !dateEdit.IsDOMDisposed() ? dateEdit : null;
 },
 GetCalendar: function(columnIndex){ 
  var calendar = ASPx.GetControlCollection().Get(this.grid.name + "_HFC" + columnIndex); 
  return calendar && !calendar.IsDOMDisposed() ? calendar: null;
 },
 GetSpinEdit_From: function(columnIndex) {
  var spinEdit = ASPx.GetControlCollection().Get(this.grid.name + "_HFFSE" + columnIndex);
  return spinEdit && !spinEdit.IsDOMDisposed() ? spinEdit : null;
 },
 GetSpinEdit_To: function(columnIndex) {
  var spinEdit = ASPx.GetControlCollection().Get(this.grid.name + "_HFTSE" + columnIndex);
  return spinEdit && !spinEdit.IsDOMDisposed() ? spinEdit : null;
 },
 GetRangeTrackBar: function(columnIndex) {
  var rangeTrackBar = ASPx.GetControlCollection().Get(this.grid.name + "_HFTB" + columnIndex);
  return rangeTrackBar && !rangeTrackBar.IsDOMDisposed() ? rangeTrackBar : null;
 },
 GetHeaderFilterPopupRelatedColumn: function() { return this.headerFilterPopupRelatedColumn; },
 GetHeaderFilterButton: function(isCancelButton) {
  var popup = this.GetHeaderFilterPopup();
  if(popup)
   return ASPx.GetControlCollection().Get(isCancelButton ? popup.cpCancelButtonID : popup.cpOkButtonID);
  return null;
 },
 SendHeaderFilterCallback: function(columnIndex, shiftKey) {
  this.grid.gridFuncCallBack([ ASPxClientGridViewCallbackCommand.FilterPopup, this.grid.name, columnIndex, shiftKey ? "T" : ""], this.OnHeaderFilterCallback);
 },
 OnHeaderFilterCallback: function(values) {
  var grid = ASPx.GetControlCollection().Get(values[0]);
  if(grid)
   grid.GetFilterHelper().ProcessHeaderFilterCallback(values[1], values[2]);
 },
 GetHeaderFilterState: function(columnIndex) {
  var listBoxSelectedIndices = [ ];
  var pickerRange = null;
  var calendarDates = null;
  var listBox = this.GetListBox(columnIndex);
  if(listBox)
   listBoxSelectedIndices = listBox.GetSelectedIndices();
  var column = this.GetColumn(columnIndex);
  if(column.HFMode === ASPx.GridHeaderFilterMode.DateRangePicker) {
   var dateEditFrom = this.GetDateEdit_From(columnIndex);
   var dateEditTo = this.GetDateEdit_To(columnIndex);
   if(dateEditFrom && dateEditTo)
    pickerRange = { start: dateEditFrom.GetValue(), end: dateEditTo.GetValue() };
  }
  if(column.HFMode === ASPx.GridHeaderFilterMode.DateRangeCalendar) {
   var calendar = this.GetCalendar(columnIndex);
   if(calendar)
    calendarDates = calendar.GetSelectedDates();
  }
  if(column.HFMode === ASPx.GridHeaderFilterMode.NumericRangePicker) {
   var rangeTrackBar = this.GetRangeTrackBar(columnIndex);
   if(rangeTrackBar)
    pickerRange = { start: rangeTrackBar.GetPositionStart(), end: rangeTrackBar.GetPositionEnd() };
   var spinEdit_From = this.GetSpinEdit_From(columnIndex);
   if(spinEdit_From) {
    if(pickerRange) pickerRange.start = spinEdit_From.GetValue();
    else pickerRange = { start: spinEdit_From.GetValue() };
   }
   var spinEdit_To = this.GetSpinEdit_To(columnIndex);
   if(spinEdit_To) {
    if(pickerRange) pickerRange.end = spinEdit_To.GetValue();
    else pickerRange = { end: spinEdit_To.GetValue() };
   }
  }
  return { listBoxSelectedIndices: listBoxSelectedIndices, pickerRange: pickerRange, calendarDates: calendarDates };
 },
 IsHeaderFilterChanged: function(columnIndex) {
  var initialState = this.initialHeaderFilterState[columnIndex];
  var currentState = this.GetHeaderFilterState(columnIndex);
  if(!initialState || !currentState)
   return false;
  if(!ASPx.Data.ArrayEqual(initialState.listBoxSelectedIndices, currentState.listBoxSelectedIndices))
   return true;
  var column = this.GetColumn(columnIndex);
  if((column.HFMode === ASPx.GridHeaderFilterMode.DateRangePicker || column.HFMode === ASPx.GridHeaderFilterMode.NumericRangePicker) && currentState.pickerRange)
   return initialState.pickerRange.start !== currentState.pickerRange.start || initialState.pickerRange.end !== currentState.pickerRange.end;
  if(column.HFMode === ASPx.GridHeaderFilterMode.DateRangeCalendar && currentState.calendarDates)
   return !ASPx.Data.ArrayEqual(initialState.calendarDates, currentState.calendarDates);
  return false;
 },
 GetHeaderFilterCallbackState: function(columnIndex) {
  var result = [ ];
  var listBox = this.GetListBox(columnIndex);
  if(listBox)
   result = result.concat(listBox.GetSelectedValues());
  var currentState = this.GetHeaderFilterState(columnIndex);
  if(currentState.calendarDates && currentState.calendarDates.length > 0)
   result.push("(Calendar)|" + this.CalcDateRanges(currentState.calendarDates, false).join("|"));
  if(currentState.pickerRange && (currentState.pickerRange.start || currentState.pickerRange.end)) {
   var column = this.GetColumn(columnIndex);
   var pickerType;
   var range;
   if(column.HFMode === ASPx.GridHeaderFilterMode.DateRangePicker) {
    pickerType = "(DateRangePicker)";
    range = [
     currentState.pickerRange.start && ASPx.DateUtils.GetInvariantDateString(currentState.pickerRange.start) || "",
     currentState.pickerRange.end   && ASPx.DateUtils.GetInvariantDateString(currentState.pickerRange.end) || ""
    ];
   }
   if(column.HFMode === ASPx.GridHeaderFilterMode.NumericRangePicker) {
    pickerType = "(NumericRangePicker)";
    range = [
     currentState.pickerRange.start && parseFloat(currentState.pickerRange.start) || "",
     currentState.pickerRange.end   && parseFloat(currentState.pickerRange.end) || ""
    ];
   }
   result.push(pickerType + "|" + range.join("|"));
  }
  return result;
 },
 ProcessHeaderFilterCallback: function(columnIndex, htmlObj) {
  this.headerFilterColumnIndicesToInitialize.push(parseInt(columnIndex));
  this.SetHeaderFilterPopupHtml(htmlObj, columnIndex);
 },
 SetHeaderFilterPopupHtml: function(htmlObj, columnIndex) {
  this.GetHeaderFilterPopup().SetContentHtml(htmlObj, this.GetEnableCallbackAnimation());
 },
 OnControlsInitialized: function() {
  for(var i = 0; i < this.headerFilterColumnIndicesToInitialize.length; i++)
   this.InitHeaderFilter(this.headerFilterColumnIndicesToInitialize[i]);
  this.headerFilterColumnIndicesToInitialize = [ ];
 },
 InitHeaderFilter: function(columnIndex) {
  this.initialHeaderFilterState[columnIndex] = this.GetHeaderFilterState(columnIndex);
  var column = this.GetColumn(columnIndex);
  this.headerFilterPopupRelatedColumn = column;
  this.InitializeListBox(column);
  if(column.HFMode === ASPx.GridHeaderFilterMode.CheckedList)
   this.InitializeSelectAllCheckBox(column);
  if(column.HFMode === ASPx.GridHeaderFilterMode.DateRangePicker)
   this.InitializeDateRangePicker(column);
  if(column.HFMode === ASPx.GridHeaderFilterMode.DateRangeCalendar)
   this.InitializeCalendar(column);
  if(column.HFMode === ASPx.GridHeaderFilterMode.NumericRangePicker)
   this.InitializeNumericRangeEditors(column);
  if(this.GetEnableAccessibility())
   this.InitializeAccessibility(column);
 },
 InitializeListBox: function(column) {
  var listBox = this.GetListBox(column.index);
  if(!listBox) return;
  if(column.HFMode === ASPx.GridHeaderFilterMode.List && this.GetEnableAccessibility())
   listBox.ItemClick.AddHandler(this.OnListBoxSelectionChanged.bind(this));
  else {
   listBox.SelectedIndexChanged.AddHandler(this.OnListBoxSelectionChanged.bind(this));
   listBox.KeyDown.AddHandler(this.ProcessHeaderFilterKeyDown.bind(this));
  }
  var element = listBox.GetListTable ? listBox.GetListTable() : listBox.GetMainElement();
  ASPx.Evt.AttachEventToElement(element, "mousedown", function() { window.setTimeout(ASPx.Selection.Clear, 0); });
  listBox.gvColumn = column;
  if(listBox.cpFSI && listBox.cpFSI.length > 0)
   this.PrepareSeparators(listBox);
  if(this.IsListBoxHasScrolling())
   this.AdjustHeaderFilterListBox(column);
 },
 ProcessHeaderFilterKeyDown: function(listbox, args) {
  this.LockHeaderFilterApply();
  var evt = args.htmlEvent;
  if(evt.keyCode == ASPx.Key.Enter) {
   this.UnlockHeaderFilterApply();
   this.OnListBoxSelectionChanged(listbox);
  }
  window.setTimeout(this.UnlockHeaderFilterApply.bind(this), 100);
 },
 LockHeaderFilterApply: function() {
  this.lockHeaderFilterApply = true;
 },
 UnlockHeaderFilterApply: function() {
  this.lockHeaderFilterApply = false;
 },
 IsHeaderFilterApplyLocked: function() {
  return !!this.lockHeaderFilterApply;
 },
 AdjustHeaderFilterListBox: function(column) {
  var listBox = this.GetListBox(column.index);
  if(listBox && listBox.GetMainElement() && this.RequireShowHeaderFilterListBoxScrollbar(column)) {
   ASPx.SetStyles(listBox.GetMainElement(), { minHeight: this.GetHeaderFilterPopupScrollableElement().offsetHeight });
   listBox.AdjustControl();
  }
 },
 InitializeSelectAllCheckBox: function(column) {
  var checkBox = this.GetSelectAllCheckBox(column.index);
  if(!checkBox) return;
  checkBox.CheckedChanged.AddHandler(function(s) { this.OnSelectAllCheckedChanged(s); }.bind(this));
  checkBox.gvColumn = column;
 },
 InitializeDateRangePicker: function(column) {
  var dateEdit_From = this.GetDateEdit_From(column.index);
  var dateEdit_To = this.GetDateEdit_To(column.index);
  if(!dateEdit_From || !dateEdit_To)
   return;
  dateEdit_From.gvColumn = dateEdit_To.gvColumn = column;
  dateEdit_From.ValueChanged.AddHandler(this.OnEditChanged.bind(this));
  dateEdit_To.ValueChanged.AddHandler(this.OnEditChanged.bind(this));
  this.AdjustRangePicker(dateEdit_From, dateEdit_To);
 },
 InitializeNumericRangeEditors: function(column) {
  var spinEdit_From = this.GetSpinEdit_From(column.index);
  var spinEdit_To = this.GetSpinEdit_To(column.index);
  var rangeTrackBar = this.GetRangeTrackBar(column.index);
  if(spinEdit_From) {
   spinEdit_From.gvColumn = column;
   spinEdit_From.ValueChanged.AddHandler(function (s, e) {
    if(rangeTrackBar) rangeTrackBar.SetPositionStart(s.GetValue());
    this.OnEditChanged(s);
   }.bind(this));
  }
  if(spinEdit_To) {
   spinEdit_To.gvColumn = column;
   spinEdit_To.ValueChanged.AddHandler(function (s, e) {
    if(rangeTrackBar) rangeTrackBar.SetPositionEnd(s.GetValue());
    this.OnEditChanged(s);
   }.bind(this));
  }
  if(rangeTrackBar) {
   rangeTrackBar.gvColumn = column;
   rangeTrackBar.ValueChanged.AddHandler(function (s, e) {
    if(spinEdit_From) spinEdit_From.SetValue(s.GetPositionStart());
    if(spinEdit_To) spinEdit_To.SetValue(s.GetPositionEnd());
    this.OnEditChanged(s);
   }.bind(this));
  }
  if(!spinEdit_From || !spinEdit_To)
   return;
  this.AdjustRangePicker(spinEdit_From, spinEdit_To);
 },
 AdjustRangePicker: function(editor_From, editor_To) {
  var firstCaptionCell = editor_From.GetCaptionCell();
  var secondCaptionCell = editor_To.GetCaptionCell();
  var width = Math.max(ASPx.GetClearClientWidth(firstCaptionCell), ASPx.GetClearClientWidth(secondCaptionCell));
  ASPx.SetStyles(firstCaptionCell, { minWidth: width });
  ASPx.SetStyles(secondCaptionCell, { minWidth: width });
 },
 InitializeCalendar: function(column) {
  var calendar = this.GetCalendar(column.index);
  calendar.SelectionChanged.AddHandler(this.OnEditChanged.bind(this));
  calendar.gvColumn = column;
 },
 OnListBoxSelectionChanged: function(listBox) {
  if(!listBox) return;
  var column = listBox.gvColumn;
  if(this.RequireApplyHeaderFilterNow(column.HFMode, column.index))
   this.ApplyHeaderFilter();
  else {
   if(column.HFMode === ASPx.GridHeaderFilterMode.CheckedList)
    this.UpdateSelectAllCheckState(column.index);
   this.UpdateOkButtonEnabledState(column.index);
  }
 },
 OnSelectAllCheckedChanged: function(checkBox) {
  var columnIndex = checkBox.gvColumn.index;
  var listBox = this.GetListBox(columnIndex);
  if(checkBox.GetChecked())
   listBox.SelectAll();
  else
   listBox.UnselectAll();
  this.UpdateOkButtonEnabledState(columnIndex);
 },
 OnEditChanged: function(editor) {
  this.UpdateOkButtonEnabledState(editor.gvColumn.index);
 },
 RequireApplyHeaderFilterNow: function(mode, columnIndex) {
  return mode === ASPx.GridHeaderFilterMode.List && this.IsHeaderFilterChanged(columnIndex) && !this.IsHeaderFilterApplyLocked();
 },
 UpdateSelectAllCheckState: function(columnIndex) {
  var checkBox = this.GetSelectAllCheckBox(columnIndex);
  var listBox = this.GetListBox(columnIndex);
  if(!checkBox || !listBox) 
   return;
  var selectedItemCount = listBox.GetSelectedIndices().length;
  var checkState = ASPx.CheckBoxCheckState.Indeterminate;
  if(selectedItemCount === 0)
   checkState = ASPx.CheckBoxCheckState.Unchecked;
  else if(selectedItemCount === listBox.GetItemCount())
   checkState = ASPx.CheckBoxCheckState.Checked;
  checkBox.SetCheckState(checkState);
 },
 UpdateOkButtonEnabledState: function(columnIndex) {
  if(this.GetColumn(columnIndex).HFMode !== ASPx.GridHeaderFilterMode.List)
   this.SetHFOkButtonEnabled(this.IsHeaderFilterChanged(columnIndex));
 },
 ApplyHeaderFilterInitialState: function(columnIndex) {
  var state = this.initialHeaderFilterState[columnIndex];
  if(!state) return;
  var column = this.GetColumn(columnIndex);
  var listBox = this.GetListBox(columnIndex);
  if(listBox) {
   if(column.HFMode === ASPx.GridHeaderFilterMode.List) {
    if(this.GetEnableAccessibility() && state.listBoxSelectedIndices.length > 0)
     listBox.SelectIndex(state.listBoxSelectedIndices[0]);
   } else {
    listBox.UnselectAll();
    listBox.SelectIndices(state.listBoxSelectedIndices);
   }
  }
  if(column.HFMode === ASPx.GridHeaderFilterMode.CheckedList)
   this.UpdateSelectAllCheckState(columnIndex);
  if(column.HFMode === ASPx.GridHeaderFilterMode.DateRangePicker) {
   this.GetDateEdit_From(columnIndex).SetValue(state.pickerRange.start);
   this.GetDateEdit_To(columnIndex).SetValue(state.pickerRange.end);
  }
  if(column.HFMode === ASPx.GridHeaderFilterMode.DateRangeCalendar) {
   var calendar = this.GetCalendar(columnIndex);
   calendar.SetValue(null);
   var dates = state.calendarDates || [ ];
   for(var i = 0; i < dates.length; i++)
    calendar.SelectDate(dates[i]);
  }
  if(column.HFMode === ASPx.GridHeaderFilterMode.NumericRangePicker) {
   var rangeTrackBar = this.GetRangeTrackBar(columnIndex);
   if(rangeTrackBar) {
    rangeTrackBar.SetPositionStart(state.pickerRange.start);
    rangeTrackBar.SetPositionEnd(state.pickerRange.end);
   }
   var spinEdit_From = this.GetSpinEdit_From(columnIndex);
   if(spinEdit_From)
    spinEdit_From.SetValue(state.pickerRange.start);
   var spinEdit_To = this.GetSpinEdit_To(columnIndex);
   if(spinEdit_To)
    spinEdit_To.SetValue(state.pickerRange.end);
  }
  this.SetHFOkButtonEnabled(false);
 },
 IsListBoxHasScrolling: function() { return true; }, 
 RequireShowHeaderFilterListBoxScrollbar: function(column) { return this.IsListBoxHasScrolling() && column && (column.HFMode === ASPx.GridHeaderFilterMode.List || column.HFMode === ASPx.GridHeaderFilterMode.CheckedList); },
 GetHeaderFilterPopupScrollableElement: function() { return this.GetHeaderFilterPopup().GetWindowContentElement(-1); },
 InitializeHeaderFilterPopup: function() {
  var popup = this.GetHeaderFilterPopup();
  if(!popup || !popup.GetWindowElement(-1))
   return;
  this.initialHeaderFilterPopupMinWidth = popup.GetWindowMinWidth();
  popup.PopUp.AddHandler(this.HeaderFilterPopup_PopUpHandler);
  popup.CloseUp.AddHandler(this.HeaderFilterPopup_CloseUpHandler);
  popup.Resize.AddHandler(this.HeaderFilterPopup_ResizeHandler);
  if(this.IsListBoxHasScrolling()) {
   popup.AfterResizing.AddHandler(this.OnHeaderFilter_AfterResizing.bind(this));
   ASPx.Evt.AttachEventToElement(this.GetHeaderFilterPopupScrollableElement(), "scroll", this.OnHeaderFilterPopup_Scroll.bind(this));
  }
  this.InitializeHeaderFilterButtons();
 },
 OnHeaderFilterPopup_PopUp: function(popup) {
  var columnIndex = this.FindColumnIndexByHeaderChild(popup.GetCurrentPopupElement());
  var column = this.GetColumn(columnIndex);
  if(!column) return;
  var shiftKey = popup.GetPopUpReasonMouseEvent().shiftKey;
  var callbackWaiting = this.LoadHeaderFilterPopupData(popup, column, shiftKey);
  if(callbackWaiting) {
   var size = this.GetHeaderFilterPopupSize(columnIndex);
   this.SetHFButtonPanelVisibility(popup, this.RequireButtonPanel(column));
   this.AssignHeaderFilterPopupMinWidth(column);
   if(size) {
    popup.SetSize(size[0], size[1]);
    if(ASPx.Browser.Firefox)
     popup.Shown.AddHandler(function(s) { window.setTimeout(function() { s.SetSize(size[0], size[1]); }, 0); }); 
   }
   this.ShowLoadingPanelInsideHeaderFilterPopup();
  }
  if(this.IsListBoxHasScrolling())
   window.setTimeout(this.UpdateHeaderFilterPopupScroll.bind(this), popup.fadeAnimationDuration);
 },
 LoadHeaderFilterPopupData: function(popup, column, shiftKey) {
  if(column === this.GetHeaderFilterPopupRelatedColumn() && this.UseHeaderFilterContentCaching(column.index) && popup.savedShiftKey === shiftKey) {
   this.ApplyHeaderFilterInitialState(column.index);
  } else {
   this.SendHeaderFilterCallback(column.index, shiftKey);
   popup.SetContentHtml("");
   this.headerFilterPopupRelatedColumn = null;
   popup.savedShiftKey = shiftKey;
   return true;
  }
 },
 UpdateHeaderFilterPopupScroll: function() {
  var column = this.GetHeaderFilterPopupRelatedColumn();
  var disablePopupScroll = this.RequireShowHeaderFilterListBoxScrollbar(column) && this.GetHeaderFilterPopup().IsVisible();
  ASPx.SetStyles(this.GetHeaderFilterPopupScrollableElement(), { overflowY: disablePopupScroll ? "hidden" : "auto" });
 },
 OnHeaderFilterPopup_CloseUp: function(popup) {
  var column = this.GetHeaderFilterPopupRelatedColumn();
  if(column && !this.UseHeaderFilterContentCaching(column.index))
   window.setTimeout(function() { popup.SetContentHtml(""); }, 0);
  this.UpdateHeaderFilterPopupScroll();
 },
 OnHeaderFilterPopup_Resize: function(popup) {
  var columnIndex = this.FindColumnIndexByHeaderChild(popup.GetCurrentPopupElement());
  if(this.GetColumn(columnIndex))
   this.SetHeaderFilterPopupSize(columnIndex, popup.GetWidth(), popup.GetHeight());
 },
 OnHeaderFilter_AfterResizing: function(popup) {
  var column = this.GetHeaderFilterPopupRelatedColumn();
  if(column) {
   this.AdjustHeaderFilterListBox(column);
   var rangeTrackBar = this.GetRangeTrackBar(column.index);
   if(rangeTrackBar)
    rangeTrackBar.AdjustControl();
  }
 },
 OnHeaderFilterPopup_Scroll: function(e) {
  var column = this.GetHeaderFilterPopupRelatedColumn();
  if(this.RequireShowHeaderFilterListBoxScrollbar(column))
   this.GetHeaderFilterPopupScrollableElement().scrollTop = 0;
 },
 InitializeHeaderFilterButtons: function() {
  var popup = this.GetHeaderFilterPopup();
  if(!popup) return;
  var buttons = this.GetHeaderFilterButtons();
  for(var i = 0; i < buttons.length; i++) {
   popup.AddPopupElement(buttons[i]);
   if(this.GetEnableAccessibility())
    ASPx.Evt.AttachEventToElement(buttons[i], "keydown", GridFilterHelper.HeaderFilterButtonKeyDownHandler);
  }
 },
 UnloadHeaderFilterPopup: function() {
  var popup = this.GetHeaderFilterPopup();
  if(!popup) return;
  popup.PopUp.RemoveHandler(this.HeaderFilterPopup_PopUpHandler);
  popup.CloseUp.RemoveHandler(this.HeaderFilterPopup_CloseUpHandler);
  popup.Resize.RemoveHandler(this.HeaderFilterPopup_ResizeHandler);
  popup.RemoveAllPopupElements();
  popup.Hide();
  if(this.GetEnableAccessibility()) {
   var buttons = this.GetHeaderFilterButtons();
   for(var i = 0; i < buttons.length; i++)
    ASPx.Evt.DetachEventFromElement(buttons[i], "keydown", GridFilterHelper.HeaderFilterButtonKeyDownHandler);
  }
 },
 GetHeaderFilterButtons: function() {
  var buttons = [ ];
  var visibleIndices = this.GetVisibleColumnIndices();
  for(var i = 0; i < visibleIndices.length; i++) {
   var index = visibleIndices[i];
   var headers = this.GetColumnHeaders(index);
   for(var j = 0; j < headers.length; j++)
    this.PopulateHeaderFilterButtons(headers[j], buttons);
  }
  var custWindow = this.GetCustomizationWindow();
  if(custWindow)
   this.PopulateHeaderFilterButtons(custWindow.GetWindowClientTable(-1), buttons);
  return buttons;
 },
 GetVisibleColumnIndices: function() {
  var indices = [ ];
  for(var i = 0; i < this.GetColumnCount(); i++) {
   if(this.GetColumn(i).visible)
    indices.push(this.GetColumn(i).index);
  }
  return indices;
 },
 PopulateHeaderFilterButtons: function(container, buttons) {
  if(!container) return;
  var images = container.getElementsByTagName("IMG");
  for(var i = 0; i < images.length; i++) {
   var button = ASPx.getSpriteMainElement(images[i]);
   if(ASPx.ElementContainsCssClass(button, this.GetHeaderFilterIconClassName()))
    buttons.push(button);
  }
 },
 RequireButtonPanel: function(column) {
  return column.HFMode !== ASPx.GridHeaderFilterMode.List;
 },
 SetHFButtonPanelVisibility: function(popup, visible) {
  var buttonPanel = this.GetHeaderFilterPopupButtonPanelElement();
  if(buttonPanel) {
   ASPx.SetElementDisplay(buttonPanel, visible);
   this.SetHFOkButtonEnabled(false);
   var okButton = this.GetHeaderFilterButton(false);
   var cancelButton = this.GetHeaderFilterButton(true);
   if(okButton && cancelButton && okButton.GetWidth() != cancelButton.GetWidth())
    ASPx.MakeEqualControlsWidth(popup.cpOkButtonID, popup.cpCancelButtonID);
  }
 },
 SetHFOkButtonEnabled: function(enabled) {
  var button = this.GetHeaderFilterButton(false);
  if(button)
   button.SetEnabled(enabled);
 },
 GetHeaderFilterPopupSize: function(key) {
  var size = this.headerFilterPopupDimensions[key];
  if(size) return size;
  if(!this.headerFilterPopupDimensions["Default"]) {
   var popup = this.GetHeaderFilterPopup();
   this.SetHeaderFilterPopupSize("Default", popup.GetWidth(), popup.GetHeight());
  }
  return this.headerFilterPopupDimensions["Default"];
 },
 SetHeaderFilterPopupSize: function(key, width, height) {
  this.headerFilterPopupDimensions[key] = [ width, height ];
 },
 AssignHeaderFilterPopupMinWidth: function(column) {
  var popup = this.GetHeaderFilterPopup();
  popup.minWidth = this.GetHeaderFilterPopupMinWidth(column);
 },
 GetHeaderFilterPopupMinWidth: function(column) {
  if(this.RequireButtonPanel(column))
   return this.GetHeaderFilterPopupWithButtonPanelMinWidth();
  return this.initialHeaderFilterPopupMinWidth;
 },
 GetHeaderFilterPopupWithButtonPanelMinWidth: function() {
  if(!ASPx.IsExists(this.headerFilterPopupWithButtonPanelMinWidth))
   this.headerFilterPopupWithButtonPanelMinWidth = this.CalculateHeaderFilterPopupWithButtonPanelMinWidth();
  return this.headerFilterPopupWithButtonPanelMinWidth;
 },
 CalculateHeaderFilterPopupWithButtonPanelMinWidth: function() {
  var popup = this.GetHeaderFilterPopup();
  var minWidth = popup.GetWidth();
  var buttonPanel = this.GetHeaderFilterPopupButtonPanelElement();
  if(buttonPanel) {
   var footerElement = buttonPanel.parentNode;
   var excess = buttonPanel.offsetWidth - ASPx.GetClearClientWidth(footerElement);
   minWidth += excess;
  }
  minWidth = Math.max(minWidth, this.initialHeaderFilterPopupMinWidth);
  return minWidth;
 },
 GetHeaderFilterPopupButtonPanelElement: function() {
  var popup = this.GetHeaderFilterPopup();
  return document.getElementById(popup.cpButtonPanelID);
 },
 FindColumnIndexByHeaderChild: function(element) {
  if(!element) 
   return -1;
  var level = 0;
  while(level < 6) {
   var index = this.ResolveColumnIndex(element.id);
   if(index > -1)
    return index;
   element = element.parentNode;
   level++;
  }
  return -1;
 },
 UseHeaderFilterContentCaching: function(columnIndex) {
  if(!this.GetEnableHeaderFilterCaching())
   return false;
  var listBox = this.GetListBox(columnIndex);
  return listBox && listBox.GetMainElement() && listBox.GetItemCount() < 1000; 
 },
 CalcDateRanges: function(dates) { 
  var result = [ ];
  dates.sort(function(a, b) { return a - b; });
  var range = { start: null, end: null };
  for(var i = 0; i < dates.length; i++) {
   var date = dates[i];
   if(!range.start || !range.end)
    range.start = range.end = date;
   var isLastDate = dates.length === i + 1;
   var nextDate = ASPxClientCalendar.AddDays(date, 1);
   if(!isLastDate && ASPx.DateUtils.AreDatesEqualExact(nextDate, dates[i + 1])) {
    range.end = nextDate;
   } else {
    result.push(ASPx.DateUtils.GetInvariantDateString(range.start));
    result.push(ASPx.DateUtils.GetInvariantDateString(range.end));
    range.start = range.end = null;
   }
  }
  return result;
 },
 InitializeAccessibility: function(column) {
  var listBox = this.GetListBox(column.index);
  if(listBox) {
   listBox.SelectedIndexChanged.AddHandler(function() { this.MakeListBoxSelectedItemVisible(column); }.bind(this));
   this.MakeListBoxSelectedItemVisible(column);
  }
  var popup = this.GetHeaderFilterPopup();
  if(popup && !popup.gvAccessibilityEventsAssigned) {
   popup.Shown.AddHandler(function() { this.MakeListBoxSelectedItemVisible(this.GetHeaderFilterPopupRelatedColumn()); }.bind(this));
   ASPx.Evt.AttachEventToElement(popup.GetCurrentWindowElement(), "keydown", this.ProcessAccessibleHeaderFilterPopupKeyDown.bind(this));
   popup.gvAccessibilityEventsAssigned = true;
  }
 },
 MakeListBoxSelectedItemVisible: function(column) {
  if(!column || column.HFMode !== ASPx.GridHeaderFilterMode.List)
   return;
  var listBox = this.GetListBox(column.index);
  var itemIndex = listBox.GetSelectedIndex();
  var div = this.GetHeaderFilterPopupScrollableElement();
  var item = listBox.GetItemElement(itemIndex);
  if(!div || !item)
   return;
  var itemHeight = item.offsetHeight;
  var divHeight = parseInt(ASPx.GetCurrentStyle(div).height);
  var itemStart = item.offsetTop;
  var itemEnd = itemStart + itemHeight;
  var divStart = div.scrollTop;
  var divEnd = divStart + divHeight;
  var scrollTop = divStart;
  var isItemAbove = itemStart < divStart;
  var isItemBelow = itemEnd > divEnd;
  if(isItemAbove)
   scrollTop = itemStart;
  else if(isItemBelow)
   scrollTop = itemEnd - divHeight;
  if(div.scrollTop !== scrollTop)
   div.scrollTop = scrollTop;
 },
 ProcessAccessibleHeaderFilterPopupKeyDown: function(e) {
  var keyCode = ASPx.Evt.GetKeyCode(e);
  if(keyCode !== ASPx.Key.Enter) 
   return;
  var handled = true;
  var column = this.GetHeaderFilterPopupRelatedColumn();
  if(column.HFMode === ASPx.GridHeaderFilterMode.List) {
   this.OnListBoxSelectionChanged(this.GetListBox(column.index));
  } else {
   var applyFilterOnEnter = this.IsHeaderFilterChanged(column.index) && !this.IsCancelButtonEventSource(e) && !this.IsDateEditorDroppedDown(column);
   if(applyFilterOnEnter)
    this.ApplyHeaderFilter();
   else
    handled = false;
  }
  if(handled)
   ASPx.Evt.PreventEventAndBubble(e);
 },
 IsCancelButtonEventSource: function(evt) {
  return ASPx.GetIsParent(this.GetHeaderFilterButton(true).GetMainElement(), ASPx.Evt.GetEventSource(evt));
 },
 IsDateEditorDroppedDown: function(column) {
  if(column.HFMode === ASPx.GridHeaderFilterMode.DateRangePicker)
   return this.GetDateEdit_From(column.index).droppedDown || this.GetDateEdit_To(column.index).droppedDown;
  return false;
 },
 PrepareSeparators: function(listBox) {
  if(typeof(ASPxClientListBox) != "undefined" && listBox instanceof ASPxClientListBox)
   GridHFListBoxWrapper.Initialize(listBox);
  for(var i = 0; i < listBox.cpFSI.length; i++) {
   var separatorIndex = listBox.cpFSI[i];
   var item = listBox.GetItemElement(separatorIndex);
   if(ASPx.IsExists(item)) {
    var tr = ASPx.GetParentByTagName(item, "TR");
    this.AppendSeparatorRow(tr);
   }
  }
 },
 AppendSeparatorRow: function(targetRow){
  var newTr = document.createElement("TR");
  ASPx.InsertElementAfter(newTr, targetRow);
  var td = document.createElement("TD");
  var colSpan = this.GetColSpanSum(targetRow);
  if(colSpan > 1)
   td.colSpan = colSpan;
  newTr.appendChild(td);
  var separatorDiv = document.createElement("DIV");
  separatorDiv.className = this.GetFilterValuesSeparatorClassName();
  td.appendChild(separatorDiv);
 },
 GetColSpanSum: function(tableRow){
  var colSpan = 0;
  var cells = ASPx.GetChildNodesByTagName(tableRow, "TD");
  for(var i = 0; i < cells.length; i++)
   colSpan += cells[i].colSpan;
  return colSpan;
 },
 GetFilterValuesSeparatorClassName: function() { return this.grid.GetCssClassNamePrefix() + "HFSD"; },
});
var GridHFListBoxWrapper = {
 Initialize: function(listBox){
  listBox.GetItemRow = GridHFListBoxWrapper.GetItemRow;
  listBox.GetItemCount = GridHFListBoxWrapper.GetItemCount;
  listBox.OnItemClickCore = listBox.OnItemClick;
  listBox.OnItemClick = GridHFListBoxWrapper.OnItemClick;
  listBox.FindInternalCheckBoxIndexCore = listBox.FindInternalCheckBoxIndex;
  listBox.FindInternalCheckBoxIndex = GridHFListBoxWrapper.FindInternalCheckBoxIndex;
 },
 GetItemRow: function(index){
  var itemRows = GridHFListBoxWrapper.GetItemRows(this);
  if(index >= 0)
   return itemRows[index] || null;
  return null;
 },
 OnItemClick: function(index, evt){
  var correctIndex = GridHFListBoxWrapper.GetCorrectItemIndex(this, index);
  this.OnItemClickCore(correctIndex, evt);
 },
 FindInternalCheckBoxIndex: function(element){
  var index = this.FindInternalCheckBoxIndexCore(element);
  return GridHFListBoxWrapper.GetCorrectItemIndex(this, index);
 },
 GetItemCount: function(){
  return GridHFListBoxWrapper.GetItemRows(this).length;
 },
 GetCorrectItemIndex: function(listBox, index){
  for(var i = 0; i < listBox.cpFSI.length; i++) {
   if(listBox.cpFSI[i] < index)
    index--;
  }
  return index;
 },
 GetItemRows: function(listBox){
  var itemRows = [];
  var listTable = listBox.GetListTable();
  var rows = listTable ? listTable.rows : null;
  for(var i = 0; rows && i < rows.length; i++){
   if(ASPx.ElementContainsCssClass(rows[i], "dxeListBoxItemRow"))
    itemRows.push(rows[i]);
  }
  return itemRows;
 }
};
GridFilterHelper.HeaderFilterButtonKeyDownHandler = function(evt) { ASPx.Evt.InvokeMouseClickByKeyDown(evt, ASPx.PopupElementMouseEvent); };
ASPx.GridHeaderFilterMode = GridHeaderFilterMode;
ASPx.GridFilterHelper = GridFilterHelper;
})();

(function() {
var GridKbdHelper = ASPx.CreateClass(ASPx.KbdHelper, {
 constructor: function(grid) {
  this.constructor.prototype.constructor.call(this, grid);
  this.grid = grid;
 },
 CanFocus: function(e) {
  var source = ASPx.Evt.GetEventSource(e);
  if(source.tagName === "A")
   return true;
  return ASPx.KbdHelper.prototype.CanFocus.call(this, e);
 },
 HandleNoFocusAction: function(e, actionName) {
  this.HandleKbdEvent(e, actionName);
 },
 HandleKeyDown: function(e) {
  return this.HandleKbdEvent(e, "HandleKeyDown");
 },
 HandleKeyPress: function(e) {
  return this.HandleKbdEvent(e, "HandleKeyPress");
 },
 HandleKeyUp: function(e) {
  return this.HandleKbdEvent(e, "HandleKeyUp");
 },
 HandleKbdEvent: function(e, actionName) {
  var action = actionName.replace(/^Handle*/g, "Raise");
  var handled = this.grid[action](e);
  if(handled)
   ASPx.Evt.PreventEventAndBubble(e);
  return handled;
 }
});
var ASPxClientGridKeyboardEvent = ASPx.CreateClass(ASPxClientEvent, {
 constructor: function(kbdHelperOwner) {
  this.constructor.prototype.constructor.call(this);
  this.kbdHelperOwner = kbdHelperOwner;
 },
 AddHandler: function(handler, executionContext) {
  ASPxClientEvent.prototype.AddHandler.call(this, handler, executionContext);
  this.kbdHelperOwner.OnKbdEventChanged();
 },
 RemoveHandler: function(handler, executionContext) {
  ASPxClientEvent.prototype.RemoveHandler.call(this, handler, executionContext);
  this.kbdHelperOwner.OnKbdEventChanged();
 },
 ClearHandlers: function() {
  ASPxClientEvent.prototype.ClearHandlers.call(this);
  this.kbdHelperOwner.OnKbdEventChanged();
 }
});
var ASPxClientGridKeyboardEventArgsBase = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(htmlEvent) {
  this.constructor.prototype.constructor.call(this);
  this.htmlEvent = htmlEvent;
  this.handled = false;
  this.isCtrlPressed = htmlEvent.ctrlKey;
  this.isAltPressed = htmlEvent.altKey;
  this.isShiftPressed = htmlEvent.shiftKey;
  this.keyCode = ASPx.Evt.GetKeyCode(htmlEvent);
 }
});
ASPx.GridKbdHelper = GridKbdHelper;
ASPx.ASPxClientGridKeyboardEvent = ASPxClientGridKeyboardEvent;
ASPx.ASPxClientGridKeyboardEventArgsBase = ASPxClientGridKeyboardEventArgsBase;
})();

(function() {
var GridExportItemType = {
 ExportToPdf: "ExportToPdf",
 ExportToDocx: "ExportToDocx",
 ExportToRtf: "ExportToRtf",
 ExportToCsv: "ExportToCsv",
 ExportToXls: "ExportToXls",
 ExportToXlsx: "ExportToXlsx"
};
var TOOLBAR_CLIENT_STATE_KEY = "toolbar";
var CHECKED_CLIENT_STATE_KEY = "checked";
var CLICKED_CLIENT_STATE_KEY = "clicked";
var GridCommandMenuHelper = ASPx.CreateClass(null, {
 constructor: function(exportFormat) {
  this.exportFormat = exportFormat;
 },
 GetItemCommand: function(item) {
  return item.menu.cpItemsProps.commands[item.indexPath];
 },
 IsExportItem: function(itemType) {
  return itemType == GridExportItemType.ExportToPdf
   || itemType == GridExportItemType.ExportToDocx
   || itemType == GridExportItemType.ExportToRtf
   || itemType == GridExportItemType.ExportToCsv
   || itemType == GridExportItemType.ExportToXls
   || itemType == GridExportItemType.ExportToXlsx;
 },
 GetExportFormat: function(exportCommand) {
  var exportFormat = this.exportFormat;
  switch(exportCommand) {
   case GridExportItemType.ExportToPdf:
    return exportFormat.Pdf;
   case GridExportItemType.ExportToDocx:
    return exportFormat.Docx;
   case GridExportItemType.ExportToRtf:
    return exportFormat.Rtf;
   case GridExportItemType.ExportToCsv:
    return exportFormat.Csv;
   case GridExportItemType.ExportToXls:
    return exportFormat.Xls;
   case GridExportItemType.ExportToXlsx:
    return exportFormat.Xlsx;
  }
  return null;
 }
});
var CommandToolbarHelper = ASPx.CreateClass(GridCommandMenuHelper, {
 constructor: function(control, exportFormat) {
  this.constructor.prototype.constructor.call(this, exportFormat);
  this.control = control;
  this.ResetState();
 },
 GetCallbackState: function() {
  var state = { };
  if(this.clickedToolbarIndex >= 0 && this.clickedToolbarMenuItem)
   state[CLICKED_CLIENT_STATE_KEY] = [this.clickedToolbarIndex, this.clickedToolbarMenuItem.indexPath];
  var checkedState = this.GetCheckedItemsState();
  if(checkedState.length > 0)
   state[CHECKED_CLIENT_STATE_KEY] = checkedState;
  return ASPx.Json.ToJson(state);
 },
 GetCheckedItemsState: function() {
  var result = [ ];
  this.ForEachToolbar(function(toolbar, toolbarIndex) {
   if(toolbar.allowCheckItems)
    result.push([toolbarIndex, toolbar.GetCheckedState()]);
  }.bind(this));
  return result;
 },
 ResetState: function() {
  this.clickedToolbarIndex = -1;
  this.clickedToolbarMenuItem = null;
  this.SetClientStateValue(null);
 },
 SaveClientState: function() {
  this.SetClientStateValue(this.GetCallbackState());
 },
 SetClientStateValue: function(value) {
  this.control.stateObject[TOOLBAR_CLIENT_STATE_KEY] = value;
 },
 GetToolbarSettings: function() {
  return this.control.toolbars;
 },
 GetToolbarByIndex: function(index) {
  return this.control.GetToolbar(index);
 },
 GetToolbarByName: function(name) {
  var settings = this.GetToolbarSettings();
  var foundToolbars = settings.filter(function(t) { return t.name === name; });
  if(foundToolbars.length < 1)
   return null;
  return this.GetToolbarByIndex(foundToolbars[0].index);
 },
 GetToolbarNameByIndex: function(index) {
  var settings = this.GetToolbarSettings(),
   foundToolbars = settings.filter(function(t) { return t.index === index; });
  return (foundToolbars.length > 0) ? foundToolbars[0].name : null;
 },
 GetToolbarIndexByName: function(name) {
  var index = -1;
  var success = false;
  var n = name.length - 1;
  while(n >= 0 && !isNaN(parseInt(name.substr(n), 10))) {
   index = parseInt(name.substr(n), 10);
   success = true;
   n--;
  }
  return success ? index: -1;
 },
 InitializeCustomizationWindowHandlers: function() {
  var custWindow = this.GetCustomizationWindow();
  if(custWindow) {
   custWindow.PopUp.AddHandler(function() {
    this.SetCheckedItemsState(this.IsShowCustomizationWindowItem.bind(this), true);
   }.aspxBind(this));
   custWindow.CloseUp.AddHandler(function() {
    this.SetCheckedItemsState(this.IsShowCustomizationWindowItem.bind(this), false);
   }.aspxBind(this));
  }
 },
 OnInit: function() {
  this.InitializeCustomizationWindowHandlers();
 },
 OnBeforeCallback: function() {
  this.SaveClientState();
 },
 OnAfterCallback: function() {
  this.ResetState();
  this.InitializeCustomizationWindowHandlers();
  this.RefreshItemsState();
 },
 RefreshItemsState: function() {
  this.ForEachItem(null, this.RefreshItemState.aspxBind(this));
 },
 SetCheckedItemsState: function(filterFunc, checked) {
  var setCheckedFunc = function(item) { item.SetChecked(checked); };
  this.ForEachItem(filterFunc, setCheckedFunc);
 },
 OnBatchEditItemsStateChanged: function(state) {
  this.OnUpdateEditEnabledChanged(state.enabled);
 },
 OnUpdateEditEnabledChanged: function(enabled) {
  var setEnabledFunc = function(item) { item.SetEnabled(enabled); };
  this.ForEachItem(this.IsUpdateEditItem.aspxBind(this), setEnabledFunc);
 },
 RefreshItemState: function(item) {
  this.RefreshItemBadge(item);
  this.RefreshItemEnabled(item);
 },
 RefreshSelectionBasedItemBadge: function(item, count) {
  this.UpdateItemBadge(item, count > 1 ? count : 0);
 },
 UpdateItemBadge: function(item, count) {
  var menu = item.menu;
  var itemElement = menu.GetItemElement(item.GetIndexPath());
  var badge = ASPx.BadgeManager.findBadge(itemElement);
  if(!badge)
   badge = ASPx.BadgeManager.createBadgeForToolbar(item);
  if(badge) {
   var badgeText = count > 0 ? count : "";
   if(ASPx.BadgeManager.getBadgeText(itemElement) != badgeText) {
    ASPx.BadgeManager.setBadgeText(badge, badgeText);
    menu.renderHelper.CalculateItemMinSize(itemElement, true);
    menu.AdjustControl();
   }
  }
 },
 RefreshItemEnabled: function(item) {
  var itemEnabled = this.GetToolbarItemEnabled(item);
  if(itemEnabled !== null)
   item.SetEnabled(itemEnabled);
 },
 ForEachToolbar: function(actionFunc) {
  var settings = this.GetToolbarSettings();
  for(var i = 0; i < settings.length; i++) {
   var toolbarIndex = settings[i].index;
   var menu = this.GetToolbarByIndex(toolbarIndex);
   actionFunc(menu, toolbarIndex);
  }
 },
 ForEachAdaptiveToolbar: function(actionFunc) {
  this.ForEachToolbar(function(menu) {
   if(menu.IsEnabledAdaptivity())
    actionFunc(menu);
  });
 },
 ForEachItem: function(filterFunc, actionFunc) {
  this.ForEachToolbar(function(menu) {
   this.ForEachItemInternal(menu, filterFunc, actionFunc);
  }.bind(this));
 },
 ForEachItemInternal: function(itemsOwner, filterFunc, actionFunc) {
  if(!itemsOwner) return;
  for(var i = 0; i < itemsOwner.GetItemCount(); i++){
   var item = itemsOwner.GetItem(i);
   if(!filterFunc || filterFunc(item))
    actionFunc(item);
   this.ForEachItemInternal(item, filterFunc, actionFunc);
  }
 },
 RefreshItemBadge: function(item) {
 },
 GetToolbarItemEnabled: function(item){
  return null;
 },
 IsUpdateEditItem: function(item) {
  return false;
 },
 GetCustomizationWindow: function() {
  return null;
 },
 IsShowCustomizationWindowItem: function(item) {
  return false;
 },
 GetSelectedGridItemCount: function() {
  return 0;
 },
 GetSelectedVisibleGridItemCount: function() {
  return 0;
 },
 OnToolbarMenuItemClick: function(toolbar, e) {
  this.clickedToolbarIndex = this.GetToolbarIndexByName(toolbar.name);
  this.clickedToolbarMenuItem = e.item;
  this.SaveClientState();
  var clickedToolbarInfo = { index: this.clickedToolbarIndex, name: this.GetToolbarNameByIndex(this.clickedToolbarIndex) },
   handled = this.control.RaiseToolbarItemClick(clickedToolbarInfo, e.item);
  if(!handled)
   this.ProcessToolbarItemClick(e);
  this.ResetState();
 },
 ProcessToolbarItemClick: function(e) {
  var item = e.item,
   command = this.GetItemCommand(item);
  if(this.IsExportItem(command))
   this.ToolbarExport(command);
 },
 ToolbarExport: function(exportCommand) {
  var exportFormat = this.GetExportFormat(exportCommand);
  this.control.ExportTo(exportFormat);
 },
 ProcessCustomToolbarItemClickOnServer: function(usePostBack) {
 }
});
var GridToolbarHelper = ASPx.CreateClass(CommandToolbarHelper, {
 constructor: function(grid) {
  this.constructor.prototype.constructor.call(this, grid, ASPx.ASPxClientGridExportFormat);
  this.grid = grid;
 },
 OnAfterCallback: function() {
  CommandToolbarHelper.prototype.OnAfterCallback.call(this);
  if(this.grid.IsLastCallbackProcessedAsEndless())
   this.OnUpdateEditEnabledChanged(this.IsUpdateEditItemEnabled());
 },
 ProcessCustomToolbarItemClickOnServer: function(usePostBack) {
  var args = [ "" ];
  if(usePostBack)
   this.SendToolbarPostback(args);
  else
   this.SendToolbarCallback(args);
 },
 OnBatchEditItemsStateChanged: function(state) {
  ASPx.CommandToolbarHelper.prototype.OnBatchEditItemsStateChanged.call(this, state);
  this.ForEachItem(null, function(item) {
   this.UpdateBatchPreviewItemsState(item, state);
  }.bind(this));
 },
 UpdateBatchPreviewItemsState: function(item, state) { },
 SendToolbarCallback: function(args) {
  this.grid.gridCallBack([ ASPxClientGridViewCallbackCommand.Toolbar ].concat(args));
 },
 SendToolbarPostback: function(toolbarCommand) {
  this.grid.gridPostBack([ASPxClientGridViewCallbackCommand.Toolbar, toolbarCommand]);
 },
 ToolbarStartEdit: function() {
  if(this.IsBatchEditMode()) {
   var visibleIndex = 0;
   var columnIndex = 0;
   var cellInfo = this.GetFocusedCellInfo();
   if(cellInfo) {
    visibleIndex = this.grid.ConvertKeyToVisibleIndex(cellInfo.recordKey);
    columnIndex = cellInfo.columnIndex;
   }
   this.grid.batchEditApi.StartEdit(visibleIndex, columnIndex);
  }
  else
   this.grid.StartEditItem(this.GetFocusedItemIndex());
 },
 ToolbarDeleteItem: function() {
  var focusedItemIndex = this.GetFocusedItemIndex();
  if(focusedItemIndex == -1 && this.IsBatchEditMode()) {
   var cellInfo = this.GetFocusedCellInfo();
   if(cellInfo)
    focusedItemIndex = this.grid.ConvertKeyToVisibleIndex(cellInfo.recordKey);
  }
  this.grid.DeleteGridItem(focusedItemIndex);
 },
 ToolbarDeleteSelectedVisibleItems: function() {
  this.ToolbarDeleteSelectedItemsInternal("DeleteSelectedVisible");
 },
 ToolbarDeleteSelectedItemsInternal: function(commandName) {
  if(!this.grid.ConfirmDeleteGridItem())
   return;
  if(this.IsBatchEditMode()) {
   var keys = this.grid.GetSelectedKeysOnPage();
   for(var i = 0, key; key = keys[i]; i++)
    this.grid.DeleteItemByKey(key);
  }
  else
   this.SendToolbarCallback([ commandName ]);
 },
 GetFocusedItemIndex: function(){
  return this.control._getFocusedItemIndex();
 },
 GetFocusedCellInfo: function() {
  var helper = this.control.GetCellFocusHelper();
  return helper ? helper.GetFocusedCellInfo() : null;
 },
 GetSelectedGridItemCount: function() {
  return this.control._getSelectedRowCount();
 },
 GetSelectedVisibleGridItemCount: function() {
  return this.control._getSelectedRowCountOnPage();
 },
 GetCustomizationWindow: function() {
  return this.grid.GetCustomizationWindow();
 },
 IsUpdateEditItemEnabled: function() {
  if(this.IsBatchEditMode())
   return this.grid.batchEditApi.HasChanges();
  return this.grid.allowEdit && this.grid.IsEditing();
 },
 IsEditingItem: function(visibleIndex){
  return this.control.IsEditingItem(visibleIndex);
 },
 GetBatchEditHelper: function() {
  return this.control.GetBatchEditHelper();
 },
 IsBatchEditMode: function(){
  return !!this.GetBatchEditHelper();
 },
 HasBatchEditFocusedCell: function() {
  return this.IsBatchEditMode() && this.GetFocusedCellInfo();
 }
});
ASPx.GridExportItemType = GridExportItemType;
ASPx.GridCommandMenuHelper = GridCommandMenuHelper;
ASPx.CommandToolbarHelper = CommandToolbarHelper;
ASPx.GridToolbarHelper = GridToolbarHelper;
})();
(function() {
var GridSortOrder = { None: 0, Ascending: 1, Descending: 2 };
var ASPxClientGridColumnMovingTargetPosition = {
 Right: 0,
 Left: 1,
 Top: 2,
 Bottom: 3
};
var ASPxClientGridBase = ASPx.CreateClass(ASPxClientControl, {
 MainTableID: "DXMainTable",
 CustomizationWindowSuffix: "_custwindow",
 EditingRowID: "_DXEditingRow",
 EditingErrorItemID: "DXEditingErrorItem", 
 EmptyHeaderSuffix: "_emptyheader",
 PagerBottomID: "DXPagerBottom",
 PagerTopID: "DXPagerTop",
 SearchEditorID: "DXSE",
 SelectButtonID: "DXSelBtn",
 HeaderFilterButtonClassName: "dxgv__hfb",
 CommandColumnItemClassName: "dxgv__cci",
 DetailGridSuffix: "dxdt",
 FixedColumnsDivID: "DXFixedColumnsDiv",
 FixedColumnsContentDivID: "DXFixedColumnsContentDiv",
 ProgressBarDisplayControlIDFormat: "PBc{0}i{1}",
 AccessibleFilterRowButtonID: "AFRB",
 RequireKeyFieldNameText: "Error while trying to perform a CRUD operation with an incorrect or unspecified KeyFieldName property value.",
 EtalonBatchRecordPostFix: "dxgbeEtalonRecord",
 InvalidItemIndex: -23061988,
 constructor: function(name){
  this.constructor.prototype.constructor.call(this, name);
  this.callBacksEnabled = true;
  this.custwindowLeft = null;
  this.custwindowTop = null;
  this.custwindowVisible = null;
  this.userChangedSelection = false;
  this.confirmDelete = "";
  this.editorIDList = [ ];
  this.keys = [ ];
  this.lastMultiSelectIndex = -1;
  this.mainTableClickData = {
   processing: false,
   focusChanged: false,
   selectionChanged: false
  };
  this.afterCallbackRequired = false;
  this.enableHeaderFilterCaching = true;
  this.supportGestures = true;
  this.checkBoxImageProperties = null;
  this.internalCheckBoxCollection = null;
  this.sizingConfig.adjustControl = true;
  this.lookupBehavior = false;
  this.isAccessibleRowEditing = false;
  this.batchEditApi = this.CreateBatchEditApi();
  this.CustomButtonClick = new ASPxClientEvent();
  this.SelectionChanged = new ASPxClientEvent();
  this.ColumnSorting = new ASPxClientEvent();
  this.ColumnGrouping = new ASPxClientEvent();
  this.CustomizationWindowCloseUp = new ASPxClientEvent();
  this.InternalCheckBoxClick = new ASPxClientEvent();
  this.KeyDown = new ASPx.ASPxClientGridKeyboardEvent(this);
  this.KeyPress = new ASPx.ASPxClientGridKeyboardEvent(this);
  this.KeyUp = new ASPx.ASPxClientGridKeyboardEvent(this);
  this.BatchEditStartEditing = new ASPxClientEvent();
  this.BatchEditEndEditing = new ASPxClientEvent();
  this.BatchEditConfirmShowing = new ASPxClientEvent();
  this.BatchEditTemplateCellFocused = new ASPxClientEvent();
  this.BatchEditChangesSaving = new ASPxClientEvent();
  this.BatchEditChangesCanceling = new ASPxClientEvent();
  this.BatchEditSummaryDisplayText = new ASPxClientEvent();
  this.FocusedCellChanging = new ASPxClientEvent();
  this.CellSelectionChanging = new ASPxClientEvent();
  this.ClipboardCellPasting = new ASPxClientEvent();
  this.ToolbarItemClick = new ASPxClientEvent();
  this.pendingCommands = [ ];
  this.pageRowCount = 0;
  this.pageRowSize = 0;
  this.pageIndex = 0;
  this.pageCount = 1;
  this.allowDelete = false;
  this.allowEdit = false;
  this.allowInsert = false;
  this.allowFocusedRow = false;
  this.allowFocusedCell = false;
  this.allowSelectionCell = false;
  this.allowSelectByItemClick = false;
  this.allowSelectSingleRowOnly = false;
  this.allowMultiColumnAutoFilter = false;
  this.focusedRowIndex = -1;
  this.selectedWithoutPageRowCount = 0;
  this.selectAllSettings = [ ];
  this.selectAllBtnStateWithoutPage = null;
  this.visibleStartIndex = 0;
  this.columns = [ ];
  this.columnResizeMode = ASPx.ColumnResizeMode.None;
  this.horzScroll = ASPx.ScrollBarMode.Hidden;
  this.vertScroll = ASPx.ScrollBarMode.Hidden;
  this.scrollToRowIndex = -1;
  this.useEndlessPaging = false;
  this.allowBatchEditing = false;
  this.batchEditClientState = { };
  this.resetScrollTop = false;
  this.callbackOnFocusedRowChanged = false;
  this.callbackOnSelectionChanged = false;
  this.autoFilterDelay = 1200;
  this.searchFilterDelay = 1200;
  this.allowSearchFilterTimer = true;
  this.editState = 0;
  this.kbdHelper = null;
  this.enableKeyboard = false;
  this.keyboardLock = false;
  this.accessKey = null;
  this.customKbdHelperName = null;
  this.endlessPagingHelper = null;
  this.toolbarHelper = null;
  this.icbFocusedStyle = null;
  this.pendingEvents = [ ];
  this.customSearchPanelEditorID = null;
  this.searchPanelFilter = null;
  this.isDetailGrid = null;
  this.rowHotTrackStyle = null;
  this.updateButtonName = "";
  this.cancelButtonName = "";
  this.isAccessibleFilterRowMenu = false;
  this.userHandledCallbackError = false;
 },
 HasHorzScroll: function() { return this.horzScroll != ASPx.ScrollBarMode.Hidden; },
 HasVertScroll: function() { return this.vertScroll != ASPx.ScrollBarMode.Hidden; },
 HasScrolling: function() { return this.HasHorzScroll() || this.HasVertScroll(); },
 AllowResizing: function() { return this.columnResizeMode != ASPx.ColumnResizeMode.None && this.showColumnHeaders; },
 GetGridTD: function() { 
  var table = this.GetMainElement();
  if(!table) return null;
  return table.rows[0].cells[0];
 },
 GetArrowDragDownImage: function() { return this.GetChildElement("IADD"); },
 GetArrowDragUpImage: function() { return this.GetChildElement("IADU"); },
 GetArrowDragLeftImage: function() { return this.GetChildElement("IADL"); },
 GetArrowDragRightImage: function() { return this.GetChildElement("IADR"); },
 GetArrowDragFieldImage: function() { return this.GetChildElement("IDHF"); },
 GetEndlessPagingUpdatableContainer: function() { return this.GetChildElement("DXEPUC"); },
 GetEndlessPagingLPContainer: function() { return this.GetChildElement("DXEPLPC"); },
 GetBatchEditorsContainer: function() { return this.GetChildElement("DXBEsC"); },
 GetBatchEditorContainer: function(columnIndex) { return this.GetChildElement("DXBEC" + columnIndex); }, 
 GetLoadingPanelDiv: function() {  return this.GetChildElement("LPD"); },
 GetFixedColumnsDiv: function() {  return this.GetChildElement(this.FixedColumnsDivID); },
 GettItem: function(visibleIndex) { return null; },
 GetDataItemIDPrefix: function() { },
 GetEmptyDataItemIDPostfix: function() { },
 GetEmptyDataItem: function() { return this.GetChildElement(this.GetEmptyDataItemIDPostfix()); },
 GetDataRowSelBtnIDPrefix: function() { return "_" + this.SelectButtonID; },
 GetDataRowSelBtn: function(index) { return this.FindSelectButton(this.GetItem(index), this.GetDataRowSelBtnIDPrefix(index)); },
 FindSelectButton: function(container, idPrefix) { return container && container.querySelector("input[id^='" + this.name + idPrefix + "']"); },
 GetSelectAllBtn: function(index) { return this.GetChildElement("DXSelAllBtn" + index); },
 GetMainTable: function() { return this.GetChildElement(this.MainTableID); },
 GetLoadingPanelContainer: function() { return this.GetChildElement("DXLPContainer"); },
 GetStatusBar: function() { return this.GetChildElement("DXStatus"); },
 GetGroupPanel: function() { return this.GetChildElement("grouppanel"); },
 GetHeader: function(columnIndex, inGroupPanel) { 
  var id = "col" + columnIndex;
  if(inGroupPanel)
   id = "group" + id;
  return this.GetChildElement(id); 
 },
 GetHeaderRow: function(index) {
  return ASPx.GetElementById(this.name + "_" + ASPx.GridViewConsts.HeaderRowID + index);
 },
 GetEditingRow: function(obj) { return ASPx.GetElementById((obj ? obj.name : this.name) + this.EditingRowID); },
 GetEditingErrorItem: function(obj, visibleIndex) { 
  var id = (obj ? obj.name : this.name) + "_" + this.EditingErrorItemID;
  if(ASPx.IsExists(visibleIndex))
   id = id + visibleIndex;
  return ASPx.GetElementById(id); 
 },
 GetEditFormTable: function() { return ASPx.GetElementById(this.name + "_DXEFT"); },
 GetCustomizationWindow: function() { return ASPx.GetControlCollection().Get(this.name + this.CustomizationWindowSuffix); },
 GetCustomizationWindowElement: function() {
  var win = this.GetCustomizationWindow();
  return win ? win.GetWindowElement(-1) : null;  
 },
 GetParentRowsWindow: function() { return ASPx.GetControlCollection().Get(this.name + "_DXparentrowswindow"); },
 GetEditorPrefix: function() { return "DXEditor"; },
 GetPopupEditForm: function() { return ASPx.GetControlCollection().Get(this.name  + "_DXPEForm"); },
 GetFilterRowMenu: function() { return ASPx.GetControlCollection().Get(this.name + "_DXFilterRowMenu"); },
 GetFilterRow: function() { return ASPx.GetControlCollection().Get(this.name + "_DXFilterRow"); },
 GetFilterControlPopup: function() { return ASPx.GetControlCollection().Get(this.name + "_DXPFCForm"); },
 GetFilterControl: function() { return ASPx.GetControlCollection().Get(this.name +  "_DXPFCForm_DXPFC"); }, 
 GetHeaderFilterPopup: function() { return ASPx.GetControlCollection().Get(this.name + "_DXHFP"); },
 GetToolbarByName: function(name){
  return this.GetToolbarHelper().GetToolbarByName(name);
 },
 GetToolbar: function(index){
  return ASPx.GetControlCollection().Get(this.name + "_DXCTMenu" + index);
 },
 IsBatchEditDeletedItem: function(visibleIndex) {
  var helper = this.GetBatchEditHelper();
  return helper && helper.IsDeletedRecord(this.ConvertVisibleIndexToKey(visibleIndex));
 },
 IsEmptyHeaderID: function(id) { return false; },
 IsDataItem: function(visibleIndex) { return !!this.GetItem(visibleIndex); },
 GetSearchEditor: function() { 
  var editor = this.GetCustomSearchPanelEditor() || this.GetGridSearchEditor();
  if(editor && editor.GetMainElement())
   return editor;
  return null;
 },
 GetGridSearchEditor: function() { return ASPx.GetControlCollection().Get(this.name + "_" + this.SearchEditorID); },
 GetCustomSearchPanelEditor: function() { return ASPx.GetControlCollection().Get(this.customSearchPanelEditorID); },
 SetSearchPanelCustomEditor: function(editor) { this.GetFilterHelper().SetSearchPanelCustomEditor(editor); },
 GetEditorByColumnIndex: function(colIndex) {
  var list = this._getEditors();
  for(var i = 0; i < list.length; i++) {
   if(this.tryGetNumberFromEndOfString(list[i].name).value === colIndex)
    return list[i];
  }
  return null;
 },
 GetProgressBarControlID: function(visibleIndex, columnIndex) { return ASPx.Str.ApplyReplacement(this.ProgressBarDisplayControlIDFormat, [["{0}", columnIndex], ["{1}", visibleIndex]]); },
 GetProgressBarControl: function(visibleIndex, columnIndex) { return ASPx.GetControlCollection().Get(this.name + "_" + this.GetProgressBarControlID(visibleIndex, columnIndex)); },
 CreateBatchEditApi: function() { },
 SetProperties: function(properties, obj) {
  ASPxClientControl.prototype.SetProperties.call(this, properties, obj);
  this.CreateColumns();
  this.CreateToolbars();
  this.Invalidate();
 },
 CreateColumns: function() {
  this.columns = [ ];
  for(var i = 0; i < this.columnProp.length; i++)
   this.columns.push(this.CreateColumn(this.columnProp[i]));
 },
 CreateToolbars: function(){
  this.toolbars = [ ];
  for(var i = 0; this.toolbarsProp && i < this.toolbarsProp.length; i++){
   var toolbarInfo = { index: this.toolbarsProp[i][0], name: this.toolbarsProp[i][1] };
   if(this.GetToolbar(toolbarInfo.index))
    this.toolbars.push(toolbarInfo);
  }
 },
 CreateColumn: function(prop) { },
 IsFilterLocked: function() { return this.GetFilterHelper().IsFilterLocked(); },
 LockFilter: function() { this.GetFilterHelper().LockFilter(); },
 UnlockFilter: function() { this.GetFilterHelper().UnlockFilter(); },
 InlineInitialize: function() {
  ASPxClientControl.prototype.InlineInitialize.call(this);
  this.InitializeBubbleEvents();
 },
 InitializeBubbleEvents: function() {
  this.AttachMainTableClickEvents();
 },
 Initialize: function() {
  ASPxClientControl.prototype.Initialize.call(this);
  this.GetFilterHelper().OnInit();
  this.GetToolbarHelper().OnInit();
  if(this.enabled)
   this.SetHeadersClientEvents();
  this.EnsureRowKeys();
  this._setFocusedItemInputValue();
  this.InitializeAccessibilityEvents();
  this.InitializeCommandColumnHeaderLinkEvents();
  this.EnsureRowHotTrackItems();
  if(this.checkBoxImageProperties){
   this.CreateInternalCheckBoxCollection();
   this.UpdateSelectAllCheckboxesState();
  }
  this.CheckPendingEvents();
  this.CheckEndlessPagingLoadNextPage();
  this.PrepareCommandButtons();
  var batchEditHelper = this.GetBatchEditHelper();
  if(batchEditHelper)
   batchEditHelper.Init();
  var cellSelectionHelper = this.GetCellSelectionHelper();
  if(cellSelectionHelper)
   cellSelectionHelper.Update();
  var cellFocusHelper = this.GetCellFocusHelper();
  if(cellFocusHelper)
   cellFocusHelper.Update();
  var clipboardHelper = this.GetClipboardHelper();
  if(clipboardHelper)
   clipboardHelper.Initialize();
  this.InitKbdHelper();
  window.setTimeout(this.scrollToElementAsignedFromServer.bind(this), 0);
 },
 scrollToElementAsignedFromServer: function () {
  if(this.shouldScrollToNewRow) {
   this.GetScrollHelper().MakeRowVisible(this.GetEditingRow());
   this.shouldScrollToNewRow = false;
  }
  if(this.scrollToRowIndex >= 0) {
   this.MakeRowVisible(this.scrollToRowIndex);
   this.scrollToRowIndex = -1;
  }
 },
 AttachEventToEditor: function(columnIndex, eventName, handler) {
  var editor = this.GetEditorByColumnIndex(columnIndex);
  if(!ASPx.Ident.IsASPxClientEdit(editor))
   return;
  var attachKeyDownToInput = eventName === "KeyDown" && this.IsCheckEditor(editor);
  if(!editor[eventName] && !attachKeyDownToInput)
   return;
  var duplicateAttachLocker = "dxgv" + eventName + "Assigned";
  if(editor[duplicateAttachLocker]) 
   return;
  if(attachKeyDownToInput)
   ASPx.Evt.AttachEventToElement(editor.GetFocusableInputElement(), "keydown", function(e) { handler(editor, { htmlEvent: e }); });
  else
   editor[eventName].AddHandler(handler);
  editor.dxgvColumnIndex = columnIndex;
  editor[duplicateAttachLocker] = true;
 },
 IsCheckEditor: function(editor) {
  return ASPx.Ident.IsASPxClientCheckEdit && ASPx.Ident.IsASPxClientCheckEdit(editor);
 },
 IsStaticBinaryImageEditor: function(editor) {
  return ASPx.Ident.IsStaticASPxClientBinaryImage && ASPx.Ident.IsStaticASPxClientBinaryImage(editor);
 },
 IsDetailGrid: function() { 
  if(this.isDetailGrid !== null)
   return this.isDetailGrid;
  var regTest = new RegExp(this.DetailGridSuffix + "[0-9]");
  this.isDetailGrid = regTest.test(this.name);
  if(this.isDetailGrid)
   return true;
  var mainElement = this.GetMainElement();
  var parent = mainElement.parentNode;
  while(parent && parent.tagName !== "BODY") {
   this.isDetailGrid = regTest.test(parent.id);
   if(this.isDetailGrid) return true;
   parent = parent.parentNode;
  }
  return false;
 },
 PrepareCommandButtons: function(){
  if(!this.cButtonIDs || this.cButtonIDs.length == 0) return;
  for(var i = 0; i < this.cButtonIDs.length; i++){
   var name = this.cButtonIDs[i];
   var element = ASPx.GetElementById(name);
   if(!element) continue;
   var button = new ASPxClientButton(name);
   var buttonMainElement = button.GetMainElement();
   element.cpGVCommandButtonInitialized = true;
   button.cpGVName = this.name;
   button.useSubmitBehavior = false;
   button.causesValidation = false;
   button.isNative = !!eval(ASPx.Attr.GetAttribute(buttonMainElement, "data-isNative"));
   button.isImage = !!eval(ASPx.Attr.GetAttribute(buttonMainElement, "data-isImage"));
   button.encodeHtml = !!eval(ASPx.Attr.GetAttribute(buttonMainElement, "data-encodeHtml"));
   button.enabled = !ASPx.ElementContainsCssClass(buttonMainElement, "dxbDisabled");
   button.clientVisible = ASPx.GetElementDisplay(buttonMainElement);
   button.accessibilityCompliant = this.accessibilityCompliant;
   button.Click.AddHandler(this.OnCommandButtonClick.aspxBind(this));
   button.InlineInitialize();
   this.PrepareCommandButton(button);
  }
  delete this.cButtonIDs;
 },
 PrepareCommandButton: function(button) {  
  if(this.allowBatchEditing && ASPx.GetIsParent(this.GetStatusBar(), button.GetMainElement())) { 
   this.EnsureCommandButtonClickArgs(button);
   var commandName = button.gvClickArgs && button.gvClickArgs[0][0];
   if(commandName === "UpdateEdit")
    this.updateButtonName = button.name;
   if(commandName === "CancelEdit")
    this.cancelButtonName = button.name;
   if(commandName === "PreviewChanges")
    this.previewChangesButtonName = button.name;
   if(commandName === "HidePreview")
    this.hidePreviewButtonName = button.name;
   if(commandName === "UpdateSummaries")
    this.updateSummariesButtonName = button.name;
  }
 },
 GetBatchEditCommandButtons: function() {
  var buttons = { };
  buttons.updateButton = ASPx.GetControlCollection().Get(this.updateButtonName);
  buttons.cancelButton = ASPx.GetControlCollection().Get(this.cancelButtonName);
  buttons.previewChangesButton = ASPx.GetControlCollection().Get(this.previewChangesButtonName);
  buttons.hidePreviewButton = ASPx.GetControlCollection().Get(this.hidePreviewButtonName);
  buttons.updateSummariesButton = ASPx.GetControlCollection().Get(this.updateSummariesButtonName);
  return buttons;
 },
 PrepareCommandButtonsIDList: function(container) {
  if(!this.cButtonIDs)
   this.cButtonIDs = [ ];
  var initButtonIndex = this.GetInitCommandButtonIndex();
  var elementList = container.getElementsByTagName("*");
  for(var i = 0; i < elementList.length; i++) {
   var element = elementList[i];
   var comandButtonIDPattern = /%DXItemIndex\d+%$/g; 
   if(element.id && comandButtonIDPattern.test(element.id)) {
    var patternID = element.id;
    var buttonID = patternID.replace(comandButtonIDPattern, initButtonIndex--);
    ASPx.SetInnerHtml(element.parentNode, element.parentNode.innerHTML.replace(new RegExp(patternID, "g"), buttonID));
    this.cButtonIDs.push(buttonID);
   }
  }
 },
 GetInitCommandButtonIndex: function() {
  var index = 0;
  var disposedControls = [];
  ASPx.GetControlCollection().ForEachControl(function(control) {
   if(control.cpGVName !== this.name)
    return;
   if(!control.GetMainElement()) { 
    disposedControls.push(control);
    return;
   }
   var matches = control.name.match(/_DXCBtn(-?\d+)/);
   if(matches && matches.length > 1) {
    var buttonIndex = parseInt(matches[1]);
    index = Math.min(index, buttonIndex);
   }
  }, this);
  for(var i = 0; i < disposedControls.length; i++)
   ASPx.GetControlCollection().Remove(disposedControls[i]);
  return index - 1;
 },
 EnsureCommandButtonClickArgs: function(button) {
  if(!button.gvClickArgs)
   button.gvClickArgs = eval(ASPx.Attr.GetAttribute(button.GetMainElement(), "data-args"));
 },
 OnCommandButtonClick: function(s, e){
  var mainElement = s.GetMainElement();
  if(!s.gvClickArgs)
   s.gvClickArgs = eval(ASPx.Attr.GetAttribute(mainElement, "data-args"));
  this.EnsureCommandButtonClickArgs(s);
  if(s.gvClickArgs && s.gvClickArgs.length > 1)
   this.ScheduleUserCommand(s.gvClickArgs[0], s.gvClickArgs[1], mainElement);
 },
 GetCommandButtonsInContainer: function(container) {
  var buttons = [];   
  ASPx.GetControlCollection().ProcessControlsInContainer(container, function(control){
   var isCommandButton = control.cpGVName === this.name && control.name.indexOf("DXCBtn") > -1;
   if(isCommandButton)
    buttons.push(control);
  }.bind(this));
  return buttons;
 },
 FindCommandButtonByChildElement: function(element) {
  if(!element) return null;
  var mainElement = ASPx.GetParentByPartialClassName(element, this.CommandColumnItemClassName);
  var buttonId = mainElement && mainElement.id;
  return buttonId ? ASPx.GetControlCollection().GetByName(buttonId) : null;
 },
 IsNewButton: function(button) { return this.CheckButtonByCommandName(button, "AddNew"); },
 IsEditButton: function(button) { return this.CheckButtonByCommandName(button, "StartEdit"); },
 IsDeleteButton: function(button) { return this.CheckButtonByCommandName(button, "Delete"); },
 IsRecoverButton: function(button) { return this.CheckButtonByCommandName(button, "Recover"); },
 IsCancelButton: function(button) { return this.CheckButtonByCommandName(button, "CancelEdit"); },
 IsSelectButton: function(button) { return this.CheckButtonByCommandName(button, "Select"); },
 IsCustomButton: function(button) { return this.CheckButtonByCommandName(button, "CustomButton"); },
 CheckButtonByCommandName: function (button, commandName) {
  if(!button) return false;
  this.EnsureCommandButtonClickArgs(button);
  return button.gvClickArgs[0] && button.gvClickArgs[0][0] === commandName ;
 },
 CheckEndlessPagingLoadNextPage: function() {
  window.setTimeout(function() {
   var scrollHelper = this.GetScrollHelper();
   if(this.useEndlessPaging && scrollHelper)
    scrollHelper.CheckEndlessPagingLoadNextPage();
  }.aspxBind(this), 0);
 },
 EnsureRowKeys: function() {
  if(ASPx.IsExists(this.stateObject.keys))
   this.keys = this.stateObject.keys;
  if(!this.keys)
   this.keys = [ ];
 }, 
 CheckPendingEvents: function() {
  if(this.pendingEvents.length < 1)
   return;
  for(var i = 0; i < this.pendingEvents.length; i++)
   this.ScheduleRaisingEvent(this.pendingEvents[i]);
  this.pendingEvents.length = 0;
 },
 ScheduleRaisingEvent: function(eventName) {
  window.setTimeout(function() { this[eventName](); }.aspxBind(this), 0);
 },
 CreateInternalCheckBoxCollection: function() {
  if(!this.internalCheckBoxCollection)
   this.internalCheckBoxCollection = new ASPx.CheckBoxInternalCollection(this.checkBoxImageProperties, true, undefined, undefined, undefined, this.accessibilityCompliant);
  else
   this.internalCheckBoxCollection.SetImageProperties(this.checkBoxImageProperties);
  this.CompleteInternalCheckBoxCollection();
 },
 CompleteInternalCheckBoxCollection: function() {
  if(!this.IsLastCallbackProcessedAsEndless()){
   this.internalCheckBoxCollection.Clear();
   for(var i = 0; i < this.selectAllSettings.length; i++){
    var selectAllSettings = this.selectAllSettings[i];
    if(selectAllSettings === null)
     continue;
    var icbSelectAllElement = this.GetSelectAllBtn(selectAllSettings.index);
    if(ASPx.IsExistsElement(icbSelectAllElement))
     this.AddInternalCheckBoxToCollection(icbSelectAllElement, -(selectAllSettings.index + 1), !this.IsCheckBoxDisabled(icbSelectAllElement));
   }
  }
  for(var i = 0; i < this.pageRowCount; i ++) {
   var index = i + this.visibleStartIndex;
   var icbInputElement = this.GetDataRowSelBtn(index);
   if(icbInputElement) {
    var enabled = !this.IsCheckBoxDisabled(icbInputElement);
    this.AddInternalCheckBoxToCollection(icbInputElement, index, enabled);
   }
  }
 },
 IsCheckBoxDisabled: function(icbInputElement) {
  var icbMainElement = ASPx.CheckableElementHelper.Instance.GetICBMainElementByInput(icbInputElement);
  return icbMainElement.className.indexOf(this.GetDisabledCheckboxClassName()) != -1;
 },
 GetCssClassNamePrefix: function() { return ""; },
 GetDisabledCheckboxClassName: function() { return this.GetCssClassNamePrefix() + "_cd"; },
 AddInternalCheckBoxToCollection: function (icbInputElement, visibleIndex, enabled) {
  var internalCheckBox = null;
  if(this.IsLastCallbackProcessedAsEndless())
   internalCheckBox = this.internalCheckBoxCollection.Get(icbInputElement.id);
  if(internalCheckBox && internalCheckBox.inputElement != icbInputElement){
   this.internalCheckBoxCollection.Remove(icbInputElement.id);
   internalCheckBox = null;
  }
  if(!internalCheckBox)
   internalCheckBox = this.internalCheckBoxCollection.Add(icbInputElement.id, icbInputElement);
  internalCheckBox.CreateFocusDecoration(this.icbFocusedStyle);
  internalCheckBox.SetEnabled(enabled && this.GetEnabled());
  internalCheckBox.readOnly = this.readOnly;
  internalCheckBox.autoSwitchEnabled = !this.allowSelectSingleRowOnly;
  var grid = this;
  function OnCheckedChanged(s, e){
   if(!s.autoSwitchEnabled && s.GetValue() == ASPx.CheckBoxInputKey.Unchecked){
    var value = s.stateController.GetNextCheckBoxValue(s.GetValue(), s.allowGrayedByClick && s.allowGrayed);
    s.SetValue(value);
   }
   var rowCheckBox = grid.GetDataRowSelBtn(visibleIndex);
   if(grid.allowSelectSingleRowOnly)
    grid._selectAllSelBtn(false, rowCheckBox.id);
   if(!grid.RaiseInternalCheckBoxClick(visibleIndex)){
    grid.ScheduleCommand(function() { grid.SelectItem(visibleIndex, s.GetChecked()); }, true);
    grid.mainTableClickCore(e, true);
   }
  }
  function OnSelectAllCheckedChanged(s, e) {
   grid.ScheduleCommand(function() { this.ProcessSelectAllCheckBoxCheckedChanged(s); }.bind(grid), true);
   grid.mainTableClickCore(e, true);
  }
  var checkedChangedHandler = visibleIndex < 0 ? OnSelectAllCheckedChanged : OnCheckedChanged;
  internalCheckBox.CheckedChanged.AddHandler(checkedChangedHandler);
 },
 ProcessSelectAllCheckBoxCheckedChanged: function(checkBox, e) {
  var index = this.tryGetNumberFromEndOfString(checkBox.inputElement.id).value;
  var columnSelectAllSettings = this.GetColumnSelectAllSettings(index);
  if(!columnSelectAllSettings)
   return;
  switch(columnSelectAllSettings.mode){
   case 1:
    if(checkBox.GetChecked())
     this.SelectAllItemsOnPage();
    else 
     this.UnselectAllItemsOnPage();
    break;
   case 2:
    if(checkBox.GetChecked())
     this.SelectItemsCore(null, true, true);
    else 
     this.UnselectFilteredItemsCore(true);
    break;
  }
  this.UpdateSelectAllCheckboxesState();
 },
 GetColumnSelectAllSettings: function(index){
  for(var i = 0; i < this.selectAllSettings.length; i++){
   if(this.selectAllSettings[i].index == index)
    return this.selectAllSettings[i];
  }
 },
 SelectItemsCore: function(visibleIndices, selected, changedBySelectAll){
  if(!ASPx.IsExists(selected)) selected = true;
  if(!ASPx.IsExists(visibleIndices)) {
   selected = selected ? "all" : "unall";
   changedBySelectAll = ASPx.IsExists(changedBySelectAll) ? changedBySelectAll : false;
   visibleIndices = [ ];
  } else {
   changedBySelectAll = false;
   if(visibleIndices.constructor != Array)
    visibleIndices = [visibleIndices];
  }
  this.gridCallBack([ASPxClientGridViewCallbackCommand.SelectRows, selected, changedBySelectAll].concat(visibleIndices));
 },
 UnselectFilteredItemsCore: function(changedBySelectAll){
  if(!ASPx.IsExists(changedBySelectAll))
   changedBySelectAll = false;
  this.gridCallBack([ASPxClientGridViewCallbackCommand.SelectRows, "unallf", changedBySelectAll]);
 },
 AdjustControlCore: function() {
  ASPxClientControl.prototype.AdjustControlCore.call(this);
  this.UpdateScrollableControls();
  this.ApplyPostBackSyncData();
  this.AdjustPagerControls();
  this.UpdateBatchEditActiveElements();
  this.InvalidateLayout();
 },
 UpdateBatchEditActiveElements: function () {
  var cellFocusHelper = this.GetCellFocusHelper();
  if(cellFocusHelper)
   cellFocusHelper.LoadUnfocusableAreaElements();
  var batchEditHelper = this.GetBatchEditHelper();
  if(batchEditHelper)
   batchEditHelper.UpdateAllRecordActiveElements();
 },
 NeedCollapseControlCore: function() {
  return this.HasScrolling();
 },
 CollapseControl: function () {
  ASPx.GridCommonUtils.SaveActiveElement(this);
  ASPxClientControl.prototype.CollapseControl.call(this);
 },
 ExpandControl: function () {
  ASPxClientControl.prototype.ExpandControl.call(this);
  ASPx.GridCommonUtils.RestoreActiveElement(this);
 },
 InRegularCallback: function() {
  return this.InCallback() && !this.GetCallbackHelper().HasWaitedFuncCallbacks();
 },
 gridCallBack: function (args, callbackHandler) {
  this.GetCallbackHelper().SendRequest(args, callbackHandler);
 },
 gridPostBack: function(args) { 
  this.GetCallbackHelper().SendPostback(args); 
 },
 gridFuncCallBack: function(args, onCallBack) {
  this.GetCallbackHelper().SendFuncCallback(args, onCallBack);
 },
 OnCallback: function (result) {
  var html = result.html;
  this.HideFilterControlPopup();
  var isFuncCallback = html.indexOf("FB|") == 0;
  this.afterCallbackRequired = !isFuncCallback; 
  if(isFuncCallback)
   this.OnFunctionalCallback(html);
  else
   this.OnGeneralCallback(result);
 },
 OnGeneralCallback: function(result) {
  var html = result.html;
  this.UpdateStateObjectWithObject(result.stateObject);
  this.GetFilterHelper().LoadSearchEditorValueOnCallback();
  if(this.RequirePartialUpdate(html))
   this.ProcessPartialCallbackResult(html);
  else
   this.ProcessFullCallbackResult(html);
 },
 RequirePartialUpdate: function(html) {
  var helper = this.GetEndlessPagingHelper();
  return html.indexOf("EP|") == 0 && helper;
 },
 ProcessPartialCallbackResult: function(result) {
  var helper = this.GetEndlessPagingHelper();
  helper.OnCallback(result);
 },
 ProcessFullCallbackResult: function(result) {
  var rootTD = this.GetGridTD();
  if(rootTD)
   ASPx.SetInnerHtml(rootTD, result);
 },
 OnFunctionalCallback: function(result){
  this.PreventCallbackAnimation();
  var result = this.ParseFuncCallbackResult(result.substr(3));
  if(!result) return;
  if(this.IsHeaderFilterFuncCallback(result.callback))
   this.OnFuncCallback(result);
  else 
   window.setTimeout(function() { this.OnFuncCallback(result); }.aspxBind(this), 0);
 },
 OnCallbackFinalized: function() {
  if(this.afterCallbackRequired)
   this.OnAfterCallback();
 },
 IsHeaderFilterFuncCallback: function(callback) {
  return callback === this.GetFilterHelper().OnHeaderFilterCallback;
 },
 ParseFuncCallbackResult: function(result) {
  var pos = result.indexOf("|");
  if(pos < 0) return;
  var index = parseInt(result.substr(0, pos), 10);
  var info = this.GetCallbackHelper().GetFuncCallBackInfo(index);
  if(info && info.callback)
   return { callback: info.callback, params: result.substr(pos + 1) };
 },
 OnFuncCallback: function(result) {
  if(result && result.callback)
   result.callback(eval("(" + result.params + ")"));
 },
 OnCallbackErrorAfterUserHandle: function(errorMessage, data) {
  this.SetCallbackErrorData(errorMessage, data, true);
 },
 OnCallbackError: function(result, data){
  this.SetCallbackErrorData(result, data, false);
  this.SetAfterCallbackRequired();
 },
 SetAfterCallbackRequired: function() {
  if(this.GetGridTD())
   this.afterCallbackRequired = true;
 },
 SetCallbackErrorData: function(errorMessage, data, userHandled) {
  this.showingError = errorMessage;
  this.errorData = data;
  this.userHandledCallbackError = userHandled;
 },
 ShowCallbackError: function(errorText, errorData) {
  var batchEditHelper = this.GetBatchEditHelper();
  if(batchEditHelper && batchEditHelper.ShowCallbackError(errorText, errorData))
   return;
  var displayIn = this;
  var popupForm = this.GetPopupEditForm();
  if(popupForm) {
   displayIn = popupForm;
   this.ShowPopupEditForm();
  }
  this.ShowCallbackErrorCore(displayIn, errorText);
 },
 ShowCallbackErrorCore: function(displayIn, errorText) {
  var errorTextContainer = this.GetErrorTextContainer(displayIn);
  if(errorTextContainer)
   errorTextContainer.innerHTML = errorText;
  else
   ASPx.ShowErrorAlert(errorText);
 },
 GetErrorTextContainer: function(displayIn) { },
 CreateEditingErrorItem: function(visibleIndex) { },
 CancelCallbackCore: function() {
  this.RestoreCallbackSettings();
  this.InitializeAccessibilityEvents();
  this.InitializeCommandColumnHeaderLinkEvents();
  this.ResetGestureElementPosition();
  this.GetFilterHelper().OnCancelCallbackCore();
  this.keyboardLock = false;
 },
 ResetGestureElementPosition: function() {  
  if(!ASPx.GesturesHelper) return;
  var handler = ASPx.GesturesHelper.handlers[this.name];
  if(handler)
   handler.ResetGestureElementPosition();
 },
 OnBeforeCallbackOrPostBack: function() {
  this.GetFilterHelper().LockFilter();
  this.HidePopupEditForm();
  ASPxClientGridBase.SaveActiveElementSettings(this);
 },
 OnBeforeCallback: function(command) {
  this.GetFilterHelper().OnBeforeCallback();
  this.GetToolbarHelper().OnBeforeCallback();
  this.keyboardLock = true;
  var endlessPagingHelper = this.GetEndlessPagingHelper();
  if(endlessPagingHelper)
   endlessPagingHelper.OnBeforeCallback(command);
  var scrollHelper = this.GetScrollHelper();
  if(scrollHelper)
   scrollHelper.OnBeforeCallback(command);
  var cellFocusHelper = this.GetCellFocusHelper();
  if(cellFocusHelper)
   cellFocusHelper.OnBeforeCallback();
  var batchEditHelper = this.GetBatchEditHelper();
  if(batchEditHelper)
   batchEditHelper.OnBeforeCallback();
  this.ShowLoadingElements();
  this.SaveCallbackSettings();
  if(this.accessibilityCompliant)
   this.isAccessibleRowEditing = this.IsRowEditingCommand(command);
 },
 IsRowEditingCommand: function(command) {
  return command == ASPxClientGridViewCallbackCommand.AddNewRow || 
      command == ASPxClientGridViewCallbackCommand.StartEdit;
 },
 OnAfterCallback: function() {
  this.InitializeBubbleEvents();
  this.GetFilterHelper().OnAfterCallback();
  this.GetToolbarHelper().OnAfterCallback();
  var endlessPagingHelper = this.GetEndlessPagingHelper();
  if(endlessPagingHelper)
   endlessPagingHelper.OnAfterCallback();
  var checkBoxCollectionReinitializeRequired = !this.HasCallbackError(); 
  this.ProcessGridCallbackError();
  this.pendingCommands = [ ];
  try {
   this._setFocusedItemInputValue();
   this.EnsureRowKeys();
   this.SetHeadersClientEvents();
   this.RestoreCallbackSettings();
   this.InitializeAccessibilityEvents();
   this.InitializeCommandColumnHeaderLinkEvents();
   this.EnsureRowHotTrackItems();
   if(this.kbdHelper && !this.useEndlessPaging)
    this.kbdHelper.EnsureFocusedRowVisible();
  }
  finally {
   this.keyboardLock = false;
  }
  this.CheckPendingEvents();
  this.PrepareCommandButtons();
  if(this.checkBoxImageProperties && checkBoxCollectionReinitializeRequired){
   this.CreateInternalCheckBoxCollection();
   this.UpdateSelectAllCheckboxesState();
  }
  var batchEditHelper = this.GetBatchEditHelper();
  if(batchEditHelper)
   batchEditHelper.OnAfterCallback();
  var cellSelectionHelper = this.GetCellSelectionHelper();
  if(cellSelectionHelper)
   cellSelectionHelper.OnAfterCallback();
  var cellFocusHelper = this.GetCellFocusHelper();
  if(cellFocusHelper)
   cellFocusHelper.OnAfterCallback();
  this.CheckEndlessPagingLoadNextPage();
  window.setTimeout(this.scrollToElementAsignedFromServer.bind(this), 0);
  if(this.isAccessibleRowEditing)
   this.HandleAccessibleFocusForEditingRow();
 },
 HasCallbackError: function() { return !!this.showingError; },
 ProcessGridCallbackError: function() {
  if(!this.HasCallbackError()) return;
  var batchEditHelper = this.GetBatchEditHelper();
  if(batchEditHelper)
   batchEditHelper.ProcessGridCallbackError();
  if(this.userHandledCallbackError)
   this.ProcessCallbackErrorAfterUserHandle();
  else
   this.ShowCallbackError(this.showingError, this.errorData);
  this.SetCallbackErrorData(null, null, false);
 },
 ProcessCallbackErrorAfterUserHandle: function() {
  this.ShowPopupEditForm();
 },
 SaveCallbackSettings: function() {
  this.SaveCustWindowScroll();
 },
 RestoreCallbackSettings: function() {
  this.RestoreCustWindowScroll();
  this.ApplyPostBackSyncData();
  this.ResetControlAdjustment(); 
  ASPxClientGridBase.RestoreActiveElementSettings(this); 
 },
 SaveCustWindowScroll: function() {
  var custWindow = this.GetCustomizationWindow();
  var contentContainer = custWindow && custWindow.IsVisible() && custWindow.GetContentContainer(-1);
  if(contentContainer)
   this.savedCustWindowScroll = { left: contentContainer.scrollLeft, top: contentContainer.scrollTop };
 },
 RestoreCustWindowScroll: function() {   
  var custWindow = this.GetCustomizationWindow();
  var contentContainer = custWindow && custWindow.IsVisible() && custWindow.GetContentContainer(-1);
  if(contentContainer && ASPx.IsExists(this.savedCustWindowScroll)) {
   contentContainer.scrollLeft = this.savedCustWindowScroll.left;
   contentContainer.scrollTop = this.savedCustWindowScroll.top;
  }
 },
 ShowPopupEditForm: function() {
  var popupForm = this.GetPopupEditForm();
  if(popupForm && !popupForm.IsVisible())
   popupForm.Show();
 },
 HidePopupEditForm: function() {
  var popup = this.GetPopupEditForm();
  if(popup)
   popup.Hide();
 },
 OnPopupEditFormInit: function(popup) {
  if(this.HasHorzScroll() && this.GetVisibleItemsOnPage() > 0) {
   var popupHorzOffset = popup.GetPopupHorizontalOffset();
   popup.SetPopupHorizontalOffset(popupHorzOffset - this.GetPopupEditFormHorzOffsetCorrection(popup));
  }
  popup.Show();
 },
 GetPopupEditFormHorzOffsetCorrection: function(popup) {
  return 0;
 },
 HandleAccessibleFocusForEditingRow: function() {
  var editingRow = this.GetEditingRow();
  if(!editingRow || !this.accessibilityFocusTreeLine)
   return;
  var focusElement = ASPx.FindFirstChildActionElement(editingRow, function(element) {
   return !this.IsCommandColumnItem(element);
  }.aspxBind(this));
  this.accessibilityFocusTreeLine = ASPx.RestoreFocusHelper.getTreeLineCore(this.GetMainElement(), focusElement);
  this.isAccessibleRowEditing = false;
 },
 _isRowSelected: function(visibleIndex) {
  if(!ASPx.IsExists(this.stateObject.selection)) return false;
  var index = this._getItemIndexOnPage(visibleIndex);
  return this._isTrueInCheckList(this.stateObject.selection, index);
 },
 _isTrueInCheckList: function(checkList, index) {
  if(index < 0 ||  index >= checkList.length) return false;
  return checkList.charAt(index) == "T";
 },
 _getSelectedRowCount: function() {
  var count = this.selectedWithoutPageRowCount + this._getSelectedRowCountOnPage();
  if(this.allowSelectSingleRowOnly)
   count = Math.min(count, 1);
  return count;
 },
 _getSelectedRowCountOnPage: function(){
  if(!ASPx.IsExists(this.stateObject.selection))
   return 0;
  var checkList = this.stateObject.selection;
  var selCount = 0;
  for(var i = 0; i < checkList.length; i++) {
   if(checkList.charAt(i) == "T") selCount ++;
  }
  return selCount;
 },
 _selectAllRowsOnPage: function(checked) {
  if(checked && this.allowSelectSingleRowOnly) {
   this.SelectItem(0, true);
   return;
  }
  if(!ASPx.IsExists(this.stateObject.selection)) return;
  this._selectAllSelBtn(checked);
  var prevSelectedRowCount = 0;
  var isTrueInCheckList = false;
  for(var i = 0; i < this.pageRowCount; i ++) {
   isTrueInCheckList = this._isTrueInCheckList(this.stateObject.selection, i);
   if(isTrueInCheckList) prevSelectedRowCount++; 
   if(isTrueInCheckList != checked)
    this.ChangeItemStyle(i + this.visibleStartIndex, this.GetSelectedItemStyle(checked));
  }
  if (prevSelectedRowCount == 0 && !checked) return;
  var selValue = "";
  if(checked) {
   for(var i = 0; i < this.pageRowCount; i ++)
    selValue += this.IsDataItem(this.visibleStartIndex + i ) ? "T" : "F";
  }
  if(selValue != this.stateObject.selection) {
   this.userChangedSelection = true;
   if(selValue == "") selValue = "U";
   this.stateObject.selection = selValue;
  }
  this.DoSelectionChanged(-1, checked, true);
  this.UpdateSelectAllCheckboxesState();
 },
 SelectAllItemsOnPage: function(selected) {
  if(!ASPx.IsExists(selected)) selected = true;
  this._selectAllRowsOnPage(selected);
 },
 UnselectAllItemsOnPage: function() {
  this.SelectAllItemsOnPage(false);
 },
 ConfirmDeleteGridItem: function() {
  return this.confirmDelete == "" || confirm(this.confirmDelete);
 },
 DeleteGridItem: function(visibleIndex) {
  if(!this.allowDelete || !this.ConfirmDeleteGridItem())
   return;
  this.DeleteItem(visibleIndex);
 },
 _selectAllSelBtn: function(checked, exceptName) {
  if(!this.checkBoxImageProperties) return;
  this.internalCheckBoxCollection.elementsMap.forEachEntry(function(key, checkBox) {
   if(key !== exceptName && checkBox.SetValue)
    checkBox.SetValue(checked ? ASPx.CheckBoxInputKey.Checked : ASPx.CheckBoxInputKey.Unchecked);
  });
 },
 doRowMultiSelect: function(row, rowIndex, evt) {
  var ctrlKey = evt.ctrlKey || evt.metaKey,
   shiftKey = evt.shiftKey;
  if(ctrlKey || shiftKey)
   ASPx.Selection.Clear();
  if(this.allowSelectSingleRowOnly)
   shiftKey = false;
  if(!ctrlKey && !shiftKey) {
   if(this._getSelectedRowCountOnPage() === 1 && this._isRowSelected(rowIndex))
    return;
   this._selectAllRowsOnPage(false);
   this.SelectItem(rowIndex, true);
   this.lastMultiSelectIndex = rowIndex;
  } else {
   if(ctrlKey) {
    this.SelectItem(rowIndex, !this._isRowSelected(rowIndex));
    this.lastMultiSelectIndex = rowIndex;
   } else {
    var startIndex = rowIndex > this.lastMultiSelectIndex ? this.lastMultiSelectIndex + 1 : rowIndex;
    var endIndex = rowIndex > this.lastMultiSelectIndex ? rowIndex : this.lastMultiSelectIndex - 1;
    for(var i = this.visibleStartIndex; i < this.pageRowCount + this.visibleStartIndex; i ++) {
     if(i == this.lastMultiSelectIndex) 
      continue;
     this.SelectItem(i, i >= startIndex && i <= endIndex);
    }
   }
  }
  this.UpdatePostBackSyncInput();
 },
 InitializeAccessibilityEvents: function() {
  if(!this.accessibilityCompliant)
   return;
  if(this.isAccessibleFilterRowMenu)
   this.AddKeyDownFilterRowButtonHandler();
  this.PreventMouseDownHeaderCaptionLinkEvent();
 },
 AddKeyDownFilterRowButtonHandler: function() {
  var filterRow = this.GetFilterRow();
  if(!filterRow)
   return;
  var buttons = [];
  ASPx.GetNodesByPartialId(filterRow, this.AccessibleFilterRowButtonID, buttons);
  var handler = { "keydown": ASPx.Evt.InvokeMouseClickByKeyDown };
  for(var i = 0; i < buttons.length; i++)
   this.AttachEventsToElement(buttons[i], handler);
 },
 PreventMouseDownHeaderCaptionLinkEvent: function () {
  var headerCaptionLinkSelector = "a[id^='" + this.name + "'][id$='_l']";
  var headerCaptionLinks = this.GetMainElement().querySelectorAll(headerCaptionLinkSelector);
  this.PreventMouseDownHeaderLinkEvent(headerCaptionLinks);
 },
 InitializeCommandColumnHeaderLinkEvents: function () { },
 PreventMouseDownHeaderLinkEvent: function(headerLinks) {
  var handler = {
   "mousedown": function (e) {
    ASPx.Evt.GetEventSource(e).focus();
    ASPx.Evt.PreventEvent(e);
   }
  };
  for(var i = 0; i < headerLinks.length; i++)
   this.AttachEventsToElement(headerLinks[i], handler, true);
 },
 SelectItemsByKey: function(keys, selected){
  if(!ASPx.IsExists(selected)) selected = true;
  if(!ASPx.IsExists(keys)) return;
  if(keys.constructor != Array)
   keys = [keys];
  this.gridCallBack([ASPxClientGridViewCallbackCommand.SelectRowsKey, selected].concat(keys));
 },
 SelectItem: function(visibleIndex, checked, fromCheckBox) {
  if(!this.IsPossibleSelectItem(visibleIndex, checked)) return;
  if(ASPx.IsExists(fromCheckBox)) fromCheckBox = false;
  var index = this._getItemIndexOnPage(visibleIndex);
  if(index < 0) return;
  if(checked && this.allowSelectSingleRowOnly)
   this._selectAllRowsOnPage(false);
  if(ASPx.IsExists(this.stateObject.selection)) {
   this.userChangedSelection = true;
   var checkList = this.stateObject.selection;
   if(index >= checkList.length) {
    if(!checked) return;
    for(var i = checkList.length; i <= index; i ++)
     checkList += "F";
   }
   checkList = checkList.substr(0, index) + (checked ? "T" : "F") + checkList.substr(index + 1, checkList.length - index - 1);
   if(checkList.indexOf("T") < 0) checkList = "U";
   this.stateObject.selection = checkList;
  }
  this.selectItemCheckbox(visibleIndex, checked);
  this.UpdateSelectAllCheckboxesState();
  this.ChangeItemStyle(visibleIndex, this.GetSelectedItemStyle(checked));
  this.DoSelectionChanged(visibleIndex, checked, false);
 },
 selectItemCheckbox: function(visibleIndex, checked) {
  var checkBox = this.GetDataRowSelBtn(visibleIndex);
  if(checkBox) {
   var internalCheckBox = this.internalCheckBoxCollection && this.internalCheckBoxCollection.Get(checkBox.id);
   if(internalCheckBox)
    internalCheckBox.SetValue(checked ? ASPx.CheckBoxInputKey.Checked : ASPx.CheckBoxInputKey.Unchecked);
  }
 },
 IsPossibleSelectItem: function(visibleIndex, newSelectedValue){
  if(this.IsBatchEditDeletedItem(visibleIndex))
   return false;
  return visibleIndex > -1 && this._isRowSelected(visibleIndex) != newSelectedValue;
 },
 UpdateSelectAllCheckboxesState: function(){
  if(!this.selectAllSettings)
   return;
  for(var i = 0; i < this.selectAllSettings.length; i++){
   var columnSelectAllSettings = this.selectAllSettings[i];
   if(columnSelectAllSettings === null)
    continue;
   var selectAllButtonInput = this.GetSelectAllBtn(columnSelectAllSettings.index);
   if(selectAllButtonInput && !this.IsCheckBoxDisabled(selectAllButtonInput))
    this.UpdateSelectAllCheckboxStateCore(selectAllButtonInput, columnSelectAllSettings.mode);
  }
 },
 UpdateSelectAllCheckboxStateCore: function(selectAllButtonInput, selectMode){
  var value = ASPx.CheckBoxInputKey.Indeterminate;
  var selectedRowCountOnPage = this.GetSelectedKeysOnPage().length;
  var considerSelectionOnPages = selectMode == 2 && this.selectAllBtnStateWithoutPage !== null;
  if(this.GetDataItemCountOnPage() == selectedRowCountOnPage && (!considerSelectionOnPages || this.selectAllBtnStateWithoutPage == ASPx.CheckBoxInputKey.Checked))
   value = ASPx.CheckBoxInputKey.Checked;
  else if(selectedRowCountOnPage == 0 && (!considerSelectionOnPages || this.selectAllBtnStateWithoutPage == ASPx.CheckBoxInputKey.Unchecked))
   value = ASPx.CheckBoxInputKey.Unchecked;
  var selectAllCheckBoxInst = this.internalCheckBoxCollection.Get(selectAllButtonInput.id);
  selectAllCheckBoxInst.SetValue(value);
 },
 GetDataItemCountOnPage: function(){
  return this.pageRowCount;
 },
 ScheduleUserCommand: function(args, postponed, eventSource) {
  if(!args || args.length == 0) 
   return;
  var commandName = args[0];
  var rowCommands = this.GetUserCommandNamesForRow();
  if((this.useEndlessPaging || this.allowBatchEditing) && ASPx.Data.ArrayIndexOf(rowCommands, commandName) > -1)
   args[args.length - 1] = this.FindParentRowVisibleIndex(eventSource, true);
  postponed &= this.IsMainTableChildElement(eventSource);
  this.ScheduleCommand(args, postponed);
 },
 GetUserCommandNamesForRow: function() { return [ "CustomButton", "Select", "StartEdit", "Delete", "Recover", "CancelEdit" ]; },
 IsMainTableChildElement: function(src) { return true; },
 FindParentRowVisibleIndex: function(element, dataAndGroupOnly) {
  var regEx = this.GetItemVisibleIndexRegExp(dataAndGroupOnly);
  var editingRow = this.GetEditingRow();
  while(element) {
   if(element.tagName === "BODY" || element.id == this.name)
    return this.InvalidItemIndex;
   var matches = regEx.exec(element.id);
   if(matches && matches.length == 3)
    return parseInt(matches[2]);
   if(element === editingRow)
    return this.editItemVisibleIndex;
   element = element.parentNode;
  }
  return this.InvalidItemIndex;
 },
 GetItemVisibleIndexRegExp: function(dataAndGroupOnly) {
  return this.GetItemVisibleIndexRegExpByIdParts();
 },
 GetItemVisibleIndexRegExpByIdParts: function(idParts){
  if(!idParts) idParts = [ ];
  return new RegExp("^(" + this.name + "_(?:" + idParts.join("|") + "))(-?\\d+)(?:_\\d+)?$");
 },
 ScheduleCommand: function(args, postponed) {
  if(postponed)
   this.pendingCommands.push(args);
  else 
   this.PerformScheduledCommand(args);
 },
 PerformScheduledCommand: function(args) {
  if(ASPx.IsFunction(args)) {
   args(); 
   return;
  }
  if(args && args.length > 0) {
   var commandName = "UA_" + args[0];
   if(this[commandName])
    this[commandName].apply(this, args.slice(1));
  }
 },
 PerformPendingCommands: function() {
  var commandCount = this.pendingCommands.length;
  for(var i = 0; i < commandCount; i++)
   this.PerformScheduledCommand(this.pendingCommands.pop());
 },
 getItemByHtmlEvent: function(evt) { return null; },
 getItemByHtmlEventCore: function(evt, partialID) {
  var item = ASPx.GetParentByPartialId(ASPx.Evt.GetEventSource(evt), partialID);
  if(item && item.id.indexOf(this.name) > -1)
   return item;
  return null;
 },
 NeedProcessTableClick: function(evt) {
  var source = ASPx.Evt.GetEventSource(evt);
  var handlingControl = this.GetTableClickHandlingControl(source);
  return handlingControl && this === handlingControl;
 },
 GetTableClickHandlingControl: function(source) {
  var treeLine = ASPx.GetElementTreeLine(source);
  for(var i = 0; i < treeLine.length; i++) {
   var control = ASPx.GetControlCollection().GetByName(treeLine[i].id);
   if(control && control instanceof ASPxClientGridBase)
    return control;
  }
  return null;
 },
 mainTableClick: function(evt) { this.mainTableClickCore(evt); },
 mainTableDblClick: function(evt) { 
  var item = this.getItemByHtmlEvent(evt);
  if(!item) return;
  var forceItemDblClickEvent = true;
  var itemIndex = this.getItemIndex(item.id);
  var batchEditHelper = this.GetBatchEditHelper();
  if(batchEditHelper){
   batchEditHelper.ProcessTableClick(item, ASPx.Evt.GetEventSource(evt), evt, true);
   forceItemDblClickEvent = batchEditHelper.GetEditingRecordKey() !== this.ConvertVisibleIndexToKey(itemIndex);
  }
  if(forceItemDblClickEvent)
   this.RaiseItemDblClick(itemIndex, evt);
 },
 mainTableClickCore: function(evt, fromCheckBox) {
  if(this.kbdHelper) {
   this.kbdHelper.preventBrowserScrollOnFocus = fromCheckBox;
   this.kbdHelper.HandleClick(evt);
   this.kbdHelper.preventBrowserScrollOnFocus = false;
  }
  var sendNotificationCallback = true;
  this.mainTableClickData.processing = true;
  try {
   this.ProcessTableClick(evt, fromCheckBox);
   var callbackHelper = this.GetCallbackHelper();
   var savedRequestCount = callbackHelper.GetTotalRequestCount();
   this.PerformPendingCommands();
   var currentRequestCount = callbackHelper.GetTotalRequestCount();
   sendNotificationCallback = currentRequestCount === savedRequestCount;
  } finally {
   if(sendNotificationCallback)
    if(this.mainTableClickData.focusChanged && !this.mainTableClickData.selectionChanged) {
     this.gridCallBack([ASPxClientGridViewCallbackCommand.FocusedRow]);
    } else if(this.mainTableClickData.selectionChanged) {
     this.gridCallBack([ASPxClientGridViewCallbackCommand.Selection]);
    }
   this.mainTableClickData.processing = false;
   this.mainTableClickData.focusChanged = false;
   this.mainTableClickData.selectionChanged = false;
  }
 },
 ProcessTableClick: function(evt, fromCheckBox) {
  var source = ASPx.Evt.GetEventSource(evt);
  var item = this.getItemByHtmlEvent(evt);
  if(item) {
   var itemIndex = this.getItemIndex(item.id);
   var isCommandColumnItem = this.IsCommandColumnItem(source);
   if(!isCommandColumnItem && !fromCheckBox) {
    var batchEditHelper = this.GetBatchEditHelper();
    if(batchEditHelper && batchEditHelper.ProcessTableClick(item, source, evt))
     return;
    if(this.RaiseItemClick(itemIndex, evt)) 
     return;
   }
   var prevFocusedItemIndex = this._getFocusedItemIndex();
   if(this.CanTryFocusItemOnTableClick())
    this.TryFocusItem(itemIndex, evt);
   if(this.allowSelectByItemClick) {
    if(!this.testActionElement(source) && !isCommandColumnItem && !fromCheckBox) {
     if(this.lookupBehavior) {
      var checked = this.allowSelectSingleRowOnly || !this._isRowSelected(itemIndex);
      this.SelectItem(itemIndex, checked);
     } else {
      if(!fromCheckBox && !evt.shiftKey && this.RequireProcessTableClickLikeCheckBoxClick(source, itemIndex)) { 
       var newSelected = this.allowSelectSingleRowOnly || !this._isRowSelected(itemIndex);
       this.SelectItem(itemIndex, newSelected);
       return;
      }
      var indexCorrection = 0;
      if(this.lastMultiSelectIndex < 0 && prevFocusedItemIndex > -1) {
       if(evt.shiftKey && itemIndex != prevFocusedItemIndex && !this._isRowSelected(prevFocusedItemIndex))
        indexCorrection = itemIndex > prevFocusedItemIndex ? -1 : 1;
       this.lastMultiSelectIndex = prevFocusedItemIndex + indexCorrection;
      }
      this.doRowMultiSelect(item, itemIndex, evt);
      this.lastMultiSelectIndex -= indexCorrection;
     }
    }
   } else {
    this.lastMultiSelectIndex = itemIndex;
   }
  }
 },
 testActionElement: function(element) {
  return element && element.tagName.match(/input|select|textarea|^a$/i);
 },
 IsCommandColumnItem: function(element) {
  if(!element) return false;
  if(ASPx.ElementHasCssClass(element, this.CommandColumnItemClassName))
   return true;
  return ASPx.GetIsParent(this.GetMainElement(), ASPx.GetParentByPartialId(element, "DXCBtn"));
 },
 RequireProcessTableClickLikeCheckBoxClick: function(tableClickSource, visibleIndex) { return false; },
 OnBeforeFocusedCellChanging: function(cellInfo, htmlEvent) {
  var visibleIndex = this.ConvertKeyToVisibleIndex(cellInfo.recordKey);
  if(this.allowFocusedRow && visibleIndex >= 0 && visibleIndex !== this.focusedRowIndex && !this.IsBatchEditDeletedItem(visibleIndex)) 
   return this.RaiseItemFocusing(visibleIndex, htmlEvent);
  return false;
 },
 OnFocusedCellChanged: function(cellInfo, htmlEvent) {
  this._setFocusedItemIndex(this.ConvertKeyToVisibleIndex(cellInfo.recordKey));
  var cellSelectionHelper = this.GetCellSelectionHelper();
  if(cellSelectionHelper)
   cellSelectionHelper.OnFocusedCellChanged(cellInfo, htmlEvent);
  if(!this.allowFocusedRow)
   this.ChangeToolbarItemsEnabling();
 },
 CanTryFocusItemOnTableClick: function() { return !this.GetCellFocusHelper(); },
 TryFocusItem: function(visibleIndex, htmlEvent) {
  if(this.allowFocusedRow && visibleIndex >= 0 && visibleIndex !== this.focusedRowIndex && !this.IsBatchEditDeletedItem(visibleIndex)) {
   var isCanceledByUser = this.RaiseItemFocusing(visibleIndex, htmlEvent);
   if(!isCanceledByUser) {
    this._setFocusedItemIndex(visibleIndex);
    return true;
   }
  }
  return false;
 },
 _setFocusedItemIndex: function(visibleIndex) {
  if(visibleIndex < 0) 
   visibleIndex = -1;
  if(!this.IsPossibleFocusItem(visibleIndex)) 
   return;
  var oldIndex = this.focusedRowIndex;
  this.focusedRowIndex = visibleIndex;
  this.ChangeFocusedItemStyle(oldIndex, false);
  this.ChangeFocusedItemStyle(this.focusedRowIndex, true);
  this._setFocusedItemInputValue();
  if(this.callbackOnFocusedRowChanged) {
   this.UpdatePostBackSyncInput(true);
   if(!this.mainTableClickData.processing) {
    this.gridCallBack([ASPxClientGridViewCallbackCommand.FocusedRow]);
   } else {
    this.mainTableClickData.focusChanged = true;
   }
   return;
  }
  this.ChangeToolbarItemsEnabling();
  this.RaiseFocusedItemChanged();
 },
 IsPossibleFocusItem: function(visibleIndex) { return this.allowFocusedRow && visibleIndex !== this.focusedRowIndex && !this.IsBatchEditDeletedItem(visibleIndex); },
 ChangeToolbarItemsEnabling: function(){
  var helper = this.GetToolbarHelper();
  helper.RefreshItemsState();
 },
 ChangeToolbarBatchEditItemsState: function(state) {
  var helper = this.GetToolbarHelper();
  if(helper)
   helper.OnBatchEditItemsStateChanged(state);
 },
 ChangeFocusedItemStyle: function(visibleIndex, focused) {
  if(visibleIndex < 0) return;
  var itemStyle = this.GetFocusedItemStyle(visibleIndex, focused);
  this.ChangeItemStyle(visibleIndex, itemStyle);
 },
 GetFocusedItemStyle: function(visibleIndex, focused){
  if(focused)
   return this.GetStyleHelper().GetFocusedItemStyle();
  return this.GetSelectedItemStyle(this._isRowSelected(visibleIndex));
 },
 GetFocusedCell: function() {
  var cellFocusHelper = this.GetCellFocusHelper();
  if(cellFocusHelper && cellFocusHelper.IsCellFocused()) {
   var info = cellFocusHelper.GetFocusedCellInfo();
   if(info)
    return this.CreateUserCellInfo(this.ConvertKeyToVisibleIndex(info.recordKey), this.GetColumn(info.columnIndex), info.recordKey);
  }
  return null;
 },
 SetFocusedCell: function(itemIndex, columnIndex) { this.SetFocusedCellByKey(this.ConvertVisibleIndexToKey(itemIndex), columnIndex); },
 SetFocusedCellByKey: function(key, columnIndex) {
  var cellFocusHelper = this.GetCellFocusHelper();
  if(cellFocusHelper)
   cellFocusHelper.SetFocusedCell(key, columnIndex);
 },
 _setFocusedItemInputValue: function() {
  if(ASPx.IsExists(this.stateObject.focusedRow)) 
   this.stateObject.focusedRow = this.focusedRowIndex;
 },
 _getFocusedItemIndex: function() {
  if(!this.allowFocusedRow) return -1;
  return this.focusedRowIndex;
 },
 getItemIndex: function(rowId) {   
  return this.tryGetNumberFromEndOfString(rowId).value;
 },
 tryGetNumberFromEndOfString: function(str) {
  var value = -1;
  var success = false;
  var n = str.length - 1;
  while(n >= 0 && !isNaN(parseInt(str.substr(n), 10))) {
   value = parseInt(str.substr(n), 10);
   success = true;
   n--;
  }
  return { success: success, value: value };
 },
 GetSelectedCells: function() {
  var result = [];
  var cellSelectionHelper = this.GetCellSelectionHelper();
  if(cellSelectionHelper) {
   var cellsInfo = cellSelectionHelper.GetSelectedCells();
   if(cellsInfo && cellsInfo.length > 0) {
    result = cellsInfo.map(function(info) {
     return this.CreateUserCellInfo(this.ConvertKeyToVisibleIndex(info.recordKey), this.GetColumn(info.columnIndex), info.recordKey);
    }.bind(this));
   }
  }
  return result;
 },
 SetCellSelection: function(key, columnIndex, isSelect) {
  var cellSelectionHelper = this.GetCellSelectionHelper();
  if(cellSelectionHelper) {
   var action = isSelect ? cellSelectionHelper.SelectCell : cellSelectionHelper.UnselectCell;
   action.call(cellSelectionHelper, cellSelectionHelper.CreateCellInfo(key, columnIndex));
  }
 },
 GetSelectedState: function() {
  if(!this.userChangedSelection) return null;
  if(!ASPx.IsExists(this.stateObject.selection)) return null;
  return this.stateObject.selection;
 },
 GetKeyValues: function() {
  return ASPx.Json.ToJson(this.stateObject.keys);
 },
 UpdateItemsStyle: function() {
  var start = this.GetTopVisibleIndex();
  var end = start + this.GetVisibleItemsOnPage();
  for(var i = start; i < end; i++) 
   this.UpdateItemStyle(i, this.GetItemStyle(i));
 },
 UpdateItemStyle: function(visibleIndex) {
  this.ChangeItemStyle(visibleIndex, this.GetItemStyle(visibleIndex));
 },
 GetSelectedItemStyle: function(selected) {
  var helper = this.GetStyleHelper();
  return selected ? helper.GetSelectedItemStyle() : helper.GetClearItemStyle();
 },
 GetItemStyle: function(visibleIndex){
  var helper = this.GetStyleHelper();
  var style = helper.GetClearItemStyle();
  if(this.IsBatchEditDeletedItem(visibleIndex))
   style = helper.GetBatchEditDeletedItemStyle();
  else if(this.allowFocusedRow && this._getFocusedItemIndex() == visibleIndex)
   style = helper.GetFocusedItemStyle();
  else if(this._isRowSelected(visibleIndex))
   style = helper.GetSelectedItemStyle();
  return style;
 },
 ChangeItemStyle: function(visibleIndex, rowStyle) {
  if(!this.RequireChangeItemStyle(visibleIndex, rowStyle))
   return;
  this.ApplyItemStyle(visibleIndex, rowStyle);
  var batchEditHelper = this.GetBatchEditHelper();
  if(batchEditHelper)
   batchEditHelper.OnItemStyleChanged(this.GetItemKey(visibleIndex), rowStyle);
 },
 ApplyItemStyle: function(visibleIndex, styleInfo) {
  var item = this.GetItem(visibleIndex);
  this.ApplyElementStyle(item, styleInfo);
 },
 ApplyElementStyle: function(element, styleInfo) {  
  this.GetStyleHelper().ApplyElementStyle(element, styleInfo);
 },
 RequireChangeItemStyle: function(visibleIndex, itemStyle){
  var focusedIndex = this._getFocusedItemIndex();
  var helper = this.GetStyleHelper();
  if(focusedIndex > -1 && focusedIndex == visibleIndex && !helper.IsFocusedItemStyle(itemStyle))
   return false;
  return !!this.GetItem(visibleIndex);
 },
 _getItemIndexOnPage: function(visibleIndex) { 
  return visibleIndex - this.visibleStartIndex; 
 },
 getColumnIndex: function(colId) {
  if(this.IsEmptyHeaderID(colId))
   return -1;
  var index = this.tryGetNumberFromEndOfString(colId).value;
  var postfix = "col" + index;
  if(colId.lastIndexOf(postfix) == colId.length - postfix.length)
   return index;
  return -1;
 },
 getColumnObject: function(colId) {
  var index = this.getColumnIndex(colId);
  return index > -1 ? this._getColumn(index) : null;
 },
 _getColumnIndexByColumnArgs: function(column) {
  column = this._getColumnObjectByArg(column);
  if(!column) return null;
  return column.index;
 },
 _getColumnObjectByArg: function(arg) {
  if(!ASPx.IsExists(arg)) return null;
  if(typeof(arg) == "number") return this._getColumn(arg);
  if(ASPx.IsExists(arg.index)) return arg;
  var column = this._getColumnById(arg);
  if(column) return column;
  return this._getColumnByField(arg);  
 },
 _getColumnCount: function() { return this.columns.length; },
 _getColumn: function(index) {
  for(var i = 0; i < this.columns.length; i++){
   if(this.columns[i].index == index) return this.columns[i];
  }
  return null;
 },
 _getColumnById: function(id) {
  if(!ASPx.IsExists(id)) return null;
  for(var i = 0; i < this.columns.length; i++) {
   if(this.columns[i].id == id) return this.columns[i];
  }
  return null;
 },
 _getColumnByField: function(fieldName) {
  if(!ASPx.IsExists(fieldName)) return null;
  for(var i = 0; i < this.columns.length; i++) {
   if(this.columns[i].fieldName == fieldName) return this.columns[i];
  }
  return null;
 },
 DoSelectionChanged: function(index, isSelected, isSelectAllOnPage){
  if(this.callbackOnSelectionChanged) {
   this.UpdatePostBackSyncInput(true);
   if(!this.mainTableClickData.processing) {
    this.gridCallBack([ASPxClientGridViewCallbackCommand.Selection]);
   } else {
    this.mainTableClickData.selectionChanged = true;
   }
   return;
  }
  this.ChangeToolbarItemsEnabling();
  this.RaiseSelectionChanged(index, isSelected, isSelectAllOnPage, false);
 },
 CommandCustomButton:function(id, index) {
  var processOnServer = true;
  if(!this.CustomButtonClick.IsEmpty()) {
   var e = this.CreateCommandCustomButtonEventArgs(index, id);
   this.CustomButtonClick.FireEvent(this, e);
   processOnServer = e.processOnServer;
  }
  if(processOnServer)
   this.gridCallBack([ASPxClientGridViewCallbackCommand.CustomButton, id, index]);
 },
 CreateCommandCustomButtonEventArgs: function(index, id){
  return null;
 },
 HeaderMouseDown: function(element, e){
  if(!ASPx.Evt.IsLeftButtonPressed(e)) 
   return;
  var source = ASPx.Evt.GetEventSource(e);
  if(this.isHeaderFilterButton(source))
   return;
  if(this.TryStartColumnResizing(e, element))
   return;
  var canDrag = this.canDragColumn(element) && source.tagName != "IMG";
  var dragHelper = this.GetDragHelper();
  var drag = dragHelper.CreateDrag(e, element, canDrag);
  if(!canDrag && (e.shiftKey || e.ctrlKey))
   drag.clearSelectionOnce = true;
  dragHelper.CreateTargets(drag, e);
 },
 isHeaderFilterButton: function(el) {
  return ASPx.ElementContainsCssClass(ASPx.getSpriteMainElement(el), this.HeaderFilterButtonClassName);
 },
 TryStartColumnResizing: function(e, headerCell) {
  return false;
 }, 
 OnParentRowMouseEnter: function(element) {
  if(this.GetParentRowsWindow() == null) return;
  if(this.GetParentRowsWindow().IsWindowVisible()) return;
  this.ParentRowsTimerId = window.setTimeout(function() {
   var gv = ASPx.GetControlCollection().Get(this.name);
   if(gv)
    gv.OnParentRowsTimer(element.id);
  }.aspxBind(this), 500);
 },
 OnParentRowsTimer: function(rowId) {
  var element = ASPx.GetElementById(rowId);
  if(element)
   this.ShowParentRows(element);
 },
 OnParentRowMouseLeave: function(evt) {
  ASPx.Timer.ClearTimer(this.ParentRowsTimerId);
  if(this.GetParentRowsWindow() == null) return;
  if(evt && evt.toElement) {
   if(ASPx.GetParentByPartialId(evt.toElement, this.GetParentRowsWindow().name) != null)
    return;
  }
  this.HideParentRows();
 },
 ShowParentRows: function(element) {
  this.ParentRowsTimerId = null;
  if(this.GetParentRowsWindow() != null) {
   this.GetParentRowsWindow().ShowAtElement(element);
  }
 },
 HideParentRows: function() {
  this.ParentRowsTimerId = null;
  if(this.GetParentRowsWindow() != null) {
   this.GetParentRowsWindow().Hide();
  }
 }, 
 canSortByColumn: function(headerElement) {
  return this.getColumnObject(headerElement.id).allowSort;
 },
 canGroupByColumn: function(column) {
  return false;
 },
 canHideColumn: function(column) {
  return false;
 },
 canDragColumn: function(headerElement) {
  return false;
 },
 doPagerOnClick: function(id) {
  if(!ASPx.IsExists(id)) return;
  this.gridCallBack([ASPxClientGridViewCallbackCommand.PagerOnClick, id]);
 },
 CanHandleGesture: function(evt) {
  var source = ASPx.Evt.GetEventSource(evt);
  var table = this.GetMainTable();
  if(!table) return false;
  if(ASPx.GetIsParent(table, source))
   return !this.NeedPreventGestures(source, table);
  if(table.parentNode.tagName == "DIV" && ASPx.GetIsParent(table.parentNode, source))
   return ASPx.Browser.TouchUI || evt.offsetX < table.parentNode.clientWidth;
  return false;
 },
 AllowStartGesture: function() {
  return ASPxClientControl.prototype.AllowStartGesture.call(this) && 
   (this.AllowExecutePagerGesture(this.pageIndex, this.pageCount, 1) || this.AllowExecutePagerGesture(this.pageIndex, this.pageCount, -1));
 },
 AllowExecuteGesture: function(value) {
  return this.AllowExecutePagerGesture(this.pageIndex, this.pageCount, value);
 },
 ExecuteGesture: function(value, count) {
  this.ExecutePagerGesture(this.pageIndex, this.pageCount, value, count, function(arg) { this.doPagerOnClick(arg); }.aspxBind(this));
 },
 ApplySearchPanelFilter: function(value, isInternalCall) {
  if(!ASPx.IsExists(value))
   value = "";
  var edit = this.GetSearchEditor();
  if(edit && !isInternalCall)
   edit.SetText(value);
  var scrollHelper = this.GetScrollHelper();
  if(scrollHelper)
   scrollHelper.ResetScrollTop();
  this.gridCallBack([ASPxClientGridViewCallbackCommand.ApplySearchPanelFilter, value]);
 },
 NeedShowLoadingPanelInsideEndlessPagingContainer: function() {
  var endlessPagingHelper = this.GetEndlessPagingHelper();
  return endlessPagingHelper && endlessPagingHelper.NeedShowLoadingPanelAtBottom();
 },
 ShowLoadingPanel: function() {
  var gridMainCell = this.GetGridTD();
  if(!gridMainCell)
   return;
  if(this.NeedShowLoadingPanelInsideEndlessPagingContainer()) {
   var container = this.GetEndlessPagingLPContainer();
   ASPx.SetElementDisplay(container, true);
   this.CreateLoadingPanelWithoutBordersInsideContainer(container);
   return;
  }
  var lpContainer = this.GetLoadingPanelContainer();
  if(lpContainer)
   this.CreateLoadingPanelInline(lpContainer);
  else
   this.CreateLoadingPanelWithAbsolutePosition(gridMainCell, this.GetLoadingPanelOffsetElement(gridMainCell));
 },
 ShowLoadingDiv: function () {
  if(!this.NeedShowLoadingPanelInsideEndlessPagingContainer())
   this.CreateLoadingDiv(this.GetGridTD());
 },
 ShowLoadingPanelInsideHeaderFilterPopup: function() {
  this.CreateLoadingPanelWithoutBordersInsideContainer(this.GetHeaderFilterPopup().GetContentContainer(-1));
 },
 GetCallbackAnimationElement: function() {
  var table = this.GetMainTable();
  if(table && table.parentNode && table.parentNode.tagName == "DIV")
   return table.parentNode;
  return table;
 },
 NeedPreventTouchUIMouseScrolling: function(element) {
  return this.NeedPreventGestures(element);
 },
 NeedPreventGestures: function(element, mainElement) {
  if(!ASPx.IsExists(mainElement)) {
   mainElement = this.GetMainElement();
   if(!ASPx.IsExists(mainElement) || !ASPx.GetIsParent(mainElement, element))
    return false;
  }
  var preventElement = this.IsHeaderChild(element) || this.IsActionElement(mainElement, element);
  if(preventElement)
   return true;
  return this.pageCount <= 1 ? !ASPx.Browser.MSTouchUI : false;
 },
 IsHeaderChild: function(source) {
  return false;
 },
 IsActionElement: function(mainElement, source) {
  return false;
 },
 _updateEdit: function() {
  var batchEditHelper = this.GetBatchEditHelper();
  if(batchEditHelper && !batchEditHelper.CanUpdate())
   return;
  if(!batchEditHelper && !this._validateEditors())
   return;
  if(batchEditHelper)
   batchEditHelper.OnUpdate();
  this.gridCallBack([ASPxClientGridViewCallbackCommand.UpdateEdit]);
 },
 _validateEditors: function() {
  var editors = this._getEditors();
  var isValid = true;
  if(editors.length > 0)
   isValid &= this._validate(editors);
  if(window.ASPxClientEdit)
   isValid &= ASPxClientEdit.ValidateEditorsInContainer(this.GetEditFormTable(), this.name);
  return isValid;
 },
 _validate: function(list) {
  var isValid = true;
  var firstInvalid = null;
  var edit;
  for(var i = 0; i < list.length; i ++) {
   edit = list[i];
   edit.Validate();
   isValid = edit.GetIsValid() && isValid;
   if(firstInvalid == null && edit.setFocusOnError && !edit.GetIsValid())
    firstInvalid = edit;
  }
  if (firstInvalid != null)
   firstInvalid.Focus();
  return isValid;
 },
 _getEditors: function() {
  var list = [ ];
  for(var i = 0; i < this.editorIDList.length; i++) {
   var editor = ASPx.GetControlCollection().Get(this.editorIDList[i]);
   if(editor && editor.enabled && editor.GetMainElement && ASPx.IsExistsElement(editor.GetMainElement())) {
    if(!editor.Validate || this.IsStaticBinaryImageEditor(editor)) 
     continue; 
    list.push(editor);
   }
  }
  return list;
 },
 GetEditorValues: function() {
  if(this.allowBatchEditing) return null;
  var list = this._getEditors();
  if(list.length == 0) return null;
  var res = list.length + ";";
  for(var i = 0; i < list.length; i ++) {
   res += this.GetEditorValue(list[i]);
  }
  return res;
 },
 GetEditorValue: function(editor) {
  var value = editor.GetValueString();
  var valueLength = -1;
  if(!ASPx.IsExists(value)) {
   value = "";
  } else {
   value = value.toString();
   valueLength = value.length;
  }
  return this.GetEditorIndex(editor.name) + "," + valueLength + "," + value + ";";
 },
 GetEditorIndex: function(editorId) {
  var i = editorId.lastIndexOf(this.GetEditorPrefix());
  if(i < 0) return -1;
  var result = editorId.substr(i + this.GetEditorPrefix().length);
  i = result.indexOf('_'); 
  return i > 0
   ? result.substr(0, i)
   : result;
 },
 GetBatchEditHelper: function() {
  if(!this.allowBatchEditing) return null;
  if(!this.batchEditHelper)
   this.batchEditHelper = this.CreateBatchEditHelper(this.GetBatchEditHelperOwner());
  return this.batchEditHelper;
 },
 GetBatchEditHelperOwner: function() {
  if(!this.allowBatchEditing) return null;
  if(!this.batchEditHelperOwner)
   this.batchEditHelperOwner = this.CreateBatchEditHelperOwner();
  return this.batchEditHelperOwner;
 },
 CreateBatchEditHelper: function(owner) { return new ASPx.GridBatchEditHelper(owner); },
 CreateBatchEditHelperOwner: function() { },
 GetScrollHelper: function() { return null; },
 GetDragHelper: function() {
  if(!this.dragHelper)
   this.dragHelper = new GridViewDragHelper(this);
  return this.dragHelper;
 },
 GetEndlessPagingHelper: function() {
  if(!this.useEndlessPaging) return null;
  if(!this.endlessPagingHelper)
   this.endlessPagingHelper = this.CreateEndlessPagingHelper();
  return this.endlessPagingHelper;
 },
 CreateEndlessPagingHelper: function() { return null; },
 GetCellFocusHelper: function() {
  if(!this.allowFocusedCell) return null;
  if(!this.cellFocusHelper)
   this.cellFocusHelper = this.CreateCellFocusHelper();
  return this.cellFocusHelper;
 },
 CreateCellFocusHelper: function() { return null; },
 GetCellSelectionHelper: function() {
  if(!this.allowSelectionCell) return null;
  if(!this.cellSelectionHelper)
   this.cellSelectionHelper = this.CreateCellSelectionHelper();
  return this.cellSelectionHelper;
 },
 CreateCellSelectionHelper: function() { return null; },
 GetClipboardHelper: function() {
  if(!this.allowFocusedCell) return null;
  if(!this.clipboardHelper)
   this.clipboardHelper = this.CreateClipboardHelper();
  return this.clipboardHelper;
 },
 CreateClipboardHelper: function() { return null; },
 GetStyleHelper: function() {
  if(!this.styleHelper)
   this.styleHelper = this.CreateStyleHelper(this);
  return this.styleHelper;
 },
 CreateStyleHelper: function() { return new GridStyleHelper(this); },
 GetLayoutHelper: function() {
  if(!this.layoutHelper)
   this.layoutHelper = this.CreateLayoutHelper();
  return this.layoutHelper;
 },
 CreateLayoutHelper: function() { return new GridLayoutHelper(this); },
 GetNavigationHelper: function() {
  if(!this.navigationHelper)
   this.navigationHelper = this.CreateNavigationHelper();
  return this.navigationHelper;
 },
 CreateNavigationHelper: function() { },
 GetCallbackHelper: function() {
  if(!this.callbackHelper)
   this.callbackHelper = this.CreateCallbackHelper();
  return this.callbackHelper;
 },
 CreateCallbackHelper: function() { return new GridCallbackHelper(this); },
 GetFilterHelper: function() {
  if(!this.filterHelper)
   this.filterHelper = this.CreateFilterHelper();
  return this.filterHelper;
 },
 CreateFilterHelper: function() { return new ASPx.GridFilterHelper(this); },
 GetToolbarHelper: function() {
  if(!this.toolbarHelper)
   this.toolbarHelper = this.CreateToolbarHelper();
  return this.toolbarHelper;
 },
 CreateToolbarHelper: function() { return new ASPx.GridToolbarHelper(this); },
 CreateKbdHelper: function() {
  return new ASPx.GridKbdHelper(this);
 },
 InitKbdHelper: function() {
  if(!this.kbdHelper && this.IsKbdHelperRequired())
   this.kbdHelper = this.CreateKbdHelper();
  if(this.kbdHelper) {
   if(this.IsKbdHelperRequired()) {
    this.kbdHelper.Init();
    ASPx.KbdHelper.RegisterAccessKey(this);
   }
   else
    this.kbdHelper.Dispose();
  }
 },
 OnKbdEventChanged: function() {
  this.InitKbdHelper();
 },
 IsKbdHelperRequired: function() {
  return !this.KeyDown.IsEmpty() || !this.KeyPress.IsEmpty() || !this.KeyUp.IsEmpty();
 },
 Invalidate: function() {
  this.InvalidateLayout();
 },
 InvalidateLayout: function() {
  this.GetLayoutHelper().Invalidate();
  var navigationHelper = this.GetNavigationHelper();
  if(navigationHelper)
   navigationHelper.Invalidate();
  this.serverVisibleIndicesHash = null;
 },
 IsLastCallbackProcessedAsEndless: function() {
  var helper = this.GetEndlessPagingHelper();
  return helper && helper.endlessCallbackComplete;
 },
 UpdateScrollableControls: function() {
  var helper = this.GetScrollHelper();
  if(helper)
   helper.Update();
 },
 SetHeight: function(height) {
  var mainElemnt = this.GetMainElement();
  if(!ASPx.IsExistsElement(mainElemnt)) return;
  var scrollHelper = this.GetScrollHelper();
  if(scrollHelper)
   scrollHelper.SetHeight(height);
 },
 AttachTableClickEvents: function(table) {
  var handlers = {
   "click": function(e) { ASPx.GTableClick(this.name, e); }.bind(this),
   "dblclick": function(e) { ASPx.GVTableDblClick(this.name, e); }.bind(this)
  };
  this.AttachEventsToElement(table, handlers, true);
 },
 AttachEventsToElement: function(element, handlers, useCapturing) {
  for(var eventName in handlers) {
   if(!handlers.hasOwnProperty(eventName))
    continue;
   var duplicateAttachLocker = "dxg" + eventName;
   if(element[duplicateAttachLocker])
    continue;
   ASPx.Evt.AttachEventToElement(element, eventName, handlers[eventName], useCapturing);
   element[duplicateAttachLocker] = true;
  }
 },
 AttachMainTableClickEvents: function() {
  var mainTable = this.GetMainTable();
  if(mainTable)
   this.AttachTableClickEvents(mainTable);
 },
 SetHeadersClientEvents: function() {
  var grid = this;
  var attachMouseDown = function(headerCell) { 
   ASPx.Evt.AttachEventToElement(headerCell, ASPx.TouchUIHelper.touchMouseDownEventName, function(e) { 
    grid.HeaderMouseDown(headerCell, e);
   }, true);
  };
  this.AttachEventToHeaderCells(attachMouseDown, false);
  this.AttachEventToHeaderCells(attachMouseDown, true);
  this.AttachEventToCustomizationWindowHeaderCells(attachMouseDown);
 },
 AttachEventToCustomizationWindowHeaderCells: function(attachFunc) {
  var custWindow = this.GetCustomizationWindowElement();
  if(!custWindow) return;
  var headers = this.GetCustomizationWindowHeaders();
  for(var i = 0; i < headers.length; i++)
   attachFunc(headers[i]);
 },
 AttachEventToHeaderCells: function(attachFunc, inGroupPanel) {
  for(var i = 0; i < this.columns.length; i++) {
   var header = this.GetHeader(this.columns[i].index, inGroupPanel);
   if(header) 
    attachFunc(header);
  }
 },
 GetCustomizationWindowHeaders: function() {
  return ASPx.GetNodesByPartialClassName(this.GetCustomizationWindowElement(), ASPx.GridViewConsts.HeaderCellCssClass);
 },
 UpdatePostBackSyncInput: function(isChangedNotification) {
  if(!ASPx.IsExists(this.stateObject.lastMultiSelectIndex)) return;
  var selectedIndex = isChangedNotification ? -1 : this.lastMultiSelectIndex; 
  this.stateObject.lastMultiSelectIndex = selectedIndex;
 },
 ApplyPostBackSyncData: function() {
  if(!ASPx.IsExists(this.stateObject.lastMultiSelectIndex)) return;
  this.lastMultiSelectIndex = this.stateObject.lastMultiSelectIndex;
 },
 shouldPreventFocusRestoringOnCallback: function () {
  return this.scrollToRowIndex !== -1 || this.shouldScrollToNewRow;
 },
 MakeRowVisible: function(visibleIndex) { },
 IsRowHotTrackEnabled: function() {
  return this.rowHotTrackStyle !== null;
 },
 EnsureRowHotTrackItems: function() {
  if(!this.IsRowHotTrackEnabled())
   return;
  var list = [ ];
  var rowIndices = this.GetRowHotTrackItemsRowIndices();
  for(var i = rowIndices.start; i < rowIndices.start + rowIndices.end; i++)
   list.push(this.GetDataItemIDPrefix() + i);
  if(list.length > 0)
   ASPx.AddHoverItems(this.name, [ [ [this.rowHotTrackStyle[0]], [this.rowHotTrackStyle[1]],  list, this.GetHotTrackItemPostfixes() ] ]);
 },
 GetHotTrackItemPostfixes: function(){ return null; },
 GetRowHotTrackItemsRowIndices: function() {
  return {
   start: this.visibleStartIndex,
   end: this.pageRowCount
  };
 },
 GetFooterCellIndex: function(element) {
  element = this.GetFooterCellElement(element, ASPx.GridViewConsts.FooterRowID);
  if(element == null)
   return -1;
  var matrix = this.GetHeaderMatrix();
  var leafIndex = element.cellIndex - this.GetFooterIndentCount(element.parentNode);
  var index = matrix.GetLeafIndices()[leafIndex];
  return ASPx.IsExists(index) ? index : -1;
 },
 GetGroupFooterCellIndex: function(element) {
  element = this.GetFooterCellElement(element, ASPx.GridViewConsts.GroupFooterRowID);
  return element != null ? this.GetColumnIndexByDataCell(element) : -1;
 },
 GetColumnIndexByDataCell: function(element) {
  return -1;
 },
 GetFooterCellElement: function(element, footerRowID) {
  var footerRowName = this.name + "_" + footerRowID;
  while(element.parentNode.id.indexOf(footerRowName) === -1) {
   if(element.tagName == "BODY")
    return null;
   element = element.parentElement;
  }
  return element;
 },
 GetFooterIndentCount: function(footerElement) {
  return ASPx.GetChildNodesByClassName(footerElement, "dxgvIndentCell").length;
 },
 Focus: function() {
  if(this.kbdHelper)
   this.kbdHelper.Focus();
 },
 PerformCallback: function(args, onSuccess){
  if(!ASPx.IsExists(args)) args = "";
  this.gridCallBack([ASPxClientGridViewCallbackCommand.CustomCallback, args], onSuccess);
 },
 GetValuesOnCustomCallback: function(args, onCallBack) {
  this.gridFuncCallBack([ASPxClientGridViewCallbackCommand.CustomValues, args], onCallBack);
 },
 GotoPage: function(pageIndex){
  if(this.useEndlessPaging)
   return;
  this.gridCallBack([ASPxClientGridViewCallbackCommand.GotoPage, pageIndex]);
 },
 GetPageIndex: function(){
  return this.pageIndex;
 },
 GetPageCount: function(){
  return this.pageCount;
 },
 NextPage: function(){
  this.gridCallBack([ASPxClientGridViewCallbackCommand.NextPage]);
 },
 PrevPage: function(focusBottomRow){
  if(!this.useEndlessPaging)
   this.gridCallBack([ASPxClientGridViewCallbackCommand.PreviousPage, focusBottomRow ? "T" : "F"]);
 },
 IsLastPage: function() {
  return this.pageIndex === this.pageCount - 1;
 },
 GetItemKey: function(visibleIndex) {
  var arrayIndex = visibleIndex - this.visibleStartIndex;
  if(arrayIndex < 0 || arrayIndex > this.keys.length - 1) 
   return null;
  var key = this.keys[arrayIndex];
  if(key == "/^DXN")
   key = null;
  return key;
 },   
 GetDataItemVisibleIndices: function(includeDeleted, fromAPI) {
  var helper = this.GetBatchEditHelper();
  if(helper) {
   includeDeleted |= helper.GetHighlightDeletedItems() && !fromAPI;
   var keys = helper.GetRecordKeys(!includeDeleted);
   return keys.map(function(key) { return this.ConvertKeyToVisibleIndex(key); }.bind(this));
  }
  return this.GetDataItemVisibleIndicesCore();
 },
 GetDataItemVisibleIndicesCore: function() {
  var indices = this.GetCurrentPageIndices();
  return indices.filter(function(index) { return this.GetDataItem(index); }.bind(this)); 
 },
 GetRecordKeys: function(includeDeleted) { 
  var indices = this.GetDataItemVisibleIndices(includeDeleted);
  return indices.map(this.ConvertVisibleIndexToKey.bind(this));
 },
 ConvertVisibleIndexToKey: function(visibleIndex) { 
  if(!ASPx.IsExists(visibleIndex))
   return null;
  if(visibleIndex < 0)
   return visibleIndex;
  var key = this.GetItemKey(visibleIndex);
  if(ASPx.IsExists(key))
   return key;
  var helper = this.GetBatchEditHelper();
  return helper && helper.GetSavedKeyByVisibleIndex(visibleIndex);
 },
 ConvertKeyToVisibleIndex: function(key) {
  var helper = this.GetBatchEditHelper();
  if(helper && helper.IsNewRecord(key))
   return parseInt(key);  
  this.EnsureServerVisibleIndicesHash();
  if(ASPx.IsExists(this.serverVisibleIndicesHash[key]))
   return this.serverVisibleIndicesHash[key];
  return helper ? helper.GetSavedVisibleIndexByKey(key) : null;
 },
 EnsureServerVisibleIndicesHash: function() {
  if(this.serverVisibleIndicesHash)
   return;
  this.serverVisibleIndicesHash = { };
  var indices = this.GetCurrentPageIndices();
  for(var i = 0; i < indices.length; i++) {
   var visibleIndex = indices[i];
   var key = this.GetItemKey(visibleIndex);
   this.serverVisibleIndicesHash[key] = visibleIndex;
  }
 },
 GetCurrentPageIndices: function() {
  var indices = [ ];
  var startIndex = this.GetTopVisibleIndex();
  var endIndex = startIndex + this.pageRowCount;
  for(var i = startIndex; i < endIndex; i++)
   indices.push(i);
  return indices;
 },
 StartEditItem: function(visibleIndex, columnIndex) {
  this.StartEditItemByKey(this.ConvertVisibleIndexToKey(visibleIndex), columnIndex);
 },
 StartEditItemByKey: function(key, columnIndex) {
  if(!this.HasKeyField() || key === null) 
   return;
  var batchEditHelper = this.GetBatchEditHelper();
  if(batchEditHelper)
   batchEditHelper.StartEditCell(key, columnIndex);
  else
   this.gridCallBack([ASPxClientGridViewCallbackCommand.StartEdit, key]);
 },
 IsEditing: function() { return this.editState > 0; },
 IsNewItemEditing: function() { return this.editState > 1; },
 IsEditingItem: function(visibleIndex) { return this.editItemVisibleIndex === visibleIndex; },
 IsNewRowAtBottom: function() { return this.editState == 3; },
 UpdateEdit: function(){
  this._updateEdit();
 },
 CancelEdit: function(visibleIndex) {
  var batchEditHelper = this.GetBatchEditHelper();
  if(batchEditHelper) {
   var recordKey = ASPx.IsExists(visibleIndex) && visibleIndex !== this.InvalidItemIndex ? this.ConvertVisibleIndexToKey(visibleIndex) : null;
   batchEditHelper.CancelEdit(recordKey);
  } else
   this.gridCallBack([ASPxClientGridViewCallbackCommand.CancelEdit]);
 },
 AddNewItem: function() {
  if(this.allowBatchEditing)
   this.batchEditApi.AddNewItem();
  else 
   this.AddNewItemOnServer();
 },
 AddNewItemOnServer: function() {
  if(!this.HasKeyField()) return;
  this.gridCallBack([ASPxClientGridViewCallbackCommand.AddNewRow]);
 },
 DeleteItem: function(visibleIndex) {
  if(this.allowBatchEditing)
   this.batchEditApi.DeleteItem(visibleIndex);  
  else
   this.DeleteItemByKey(this.GetItemKey(visibleIndex));
 },
 RecoverItem: function(visibleIndex){
  if(this.allowBatchEditing)
   this.batchEditApi.RecoverItem(visibleIndex);  
 },
 DeleteItemByKey: function(key) {
  if(this.allowBatchEditing)
   this.batchEditApi.DeleteItemByKey(key);
  else
   this.DeleteItemByKeyOnServer(key);
 },
 DeleteItemByKeyOnServer: function(key) {
  if(!this.HasKeyField() || key === null) 
   return;
  this.gridCallBack([ASPxClientGridViewCallbackCommand.DeleteRow, key]);
 },
 HasKeyField: function() {
  var result = this.keys.length > 0 || this.pageRowCount === 0;
  if(!result)
   alert(this.RequireKeyFieldNameText);
  return result;
 },
 Refresh: function(){
  var batchEditHelper = this.GetBatchEditHelper();
  if(batchEditHelper)
   batchEditHelper.CancelEdit();
  this.gridCallBack([ASPxClientGridViewCallbackCommand.Refresh]);
 },
 CopyToClipboard: function() {
  var clipboardHelper = this.GetClipboardHelper();
  if(clipboardHelper)
   clipboardHelper.CopyToClipboard();
 },
 PasteFromClipboard: function() {
  var clipboardHelper = this.GetClipboardHelper();
  if(clipboardHelper)
   clipboardHelper.PasteFromClipboard();
 },
 UpdateSummaries: function() {
  if(this.allowBatchEditing)
   this.gridFuncCallBack([ASPxClientGridViewCallbackCommand.UpdateSummaries], this.ProcessUpdateSummariesInfo.bind(this));
 },
 ProcessUpdateSummariesInfo: function(summaryInfo) {
  var batchEditHelper = this.GetBatchEditHelper();
  if(batchEditHelper)
   batchEditHelper.UpdateSummaries(summaryInfo);
 },
 ApplyFilter: function(expression){
  expression = expression || "";
  this.gridCallBack([ASPxClientGridViewCallbackCommand.ApplyFilter, expression]);
 },
 ClearFilter: function () {
  this.GetFilterHelper().ClearFilterEditorsState();
  this.ApplyFilter();
 },
 GetAutoFilterEditor: function(column) { 
  var index = this._getColumnIndexByColumnArgs(column);
  if(!ASPx.IsExists(index)) return null;
  return ASPx.GetControlCollection().Get(this.name + "_DXFREditorcol" + index);
 },
 AutoFilterByColumn: function(column, val){
  var index = this._getColumnIndexByColumnArgs(column);
  if(!ASPx.IsExists(index)) return;
  if(!ASPx.IsExists(val)) val = "";  
  this.gridCallBack([ASPxClientGridViewCallbackCommand.ApplyColumnFilter, index, val]);
 },
 ApplyHeaderFilterByColumn: function() {
  var popup = this.GetHeaderFilterPopup();
  popup.Hide();
  var helper = this.GetFilterHelper();
  var column = helper.GetHeaderFilterPopupRelatedColumn();
  if(column) {
   var state = helper.GetHeaderFilterCallbackState(column.index);
   this.gridCallBack([ASPxClientGridViewCallbackCommand.ApplyHeaderColumnFilter, column.index, ASPx.Json.ToJson(state)]);
  }
 },
 SortBy: function(column, sortOrder, reset, sortIndex){
  if(this.RaiseColumnSorting(this._getColumnObjectByArg(column))) return;
  column = this._getColumnIndexByColumnArgs(column);
  if(!ASPx.IsExists(sortIndex)) sortIndex = "";
  if(!ASPx.IsExists(sortOrder)) sortOrder = "";
  if(!ASPx.IsExists(reset)) reset = true;
  this.gridCallBack([ASPxClientGridViewCallbackCommand.Sort, column, sortIndex, sortOrder, reset]);
 },
 GroupBy: function(column, groupIndex, sortOrder){
  var columnObj = this._getColumnObjectByArg(column);
  if(!this.canGroupByColumn(columnObj)) return;
  if(this.RaiseColumnGrouping(columnObj)) return;
  column = this._getColumnIndexByColumnArgs(column);
  if(!ASPx.IsExists(groupIndex)) groupIndex = "";
  if(!ASPx.IsExists(sortOrder)) sortOrder = "ASC";
  this.gridCallBack([ASPxClientGridViewCallbackCommand.Group, column, groupIndex, sortOrder]);
 },
 Ungroup: function(column){
  column = this._getColumnIndexByColumnArgs(column);
  this.gridCallBack([ ASPxClientGridViewCallbackCommand.UnGroup, column ]);
 },
 ExpandAll: function(){
  this.gridCallBack([ASPxClientGridViewCallbackCommand.ExpandAll]);
 },
 CollapseAll: function(){
  this.gridCallBack([ASPxClientGridViewCallbackCommand.CollapseAll]);
 },
 MoveColumn: function(column, columnMoveTo, direction, moveToGroup, moveFromGroup){
  if(!ASPx.IsExists(column)) return;
  if(!ASPx.IsExists(columnMoveTo)) columnMoveTo = -1;
  if(!ASPx.IsExists(moveToGroup)) moveToGroup = false;
  if(!ASPx.IsExists(moveFromGroup)) moveFromGroup = false;
  if(moveToGroup) {
   if(this.RaiseColumnGrouping(this._getColumnObjectByArg(column))) return;
  }
  direction = this.getColumnMoveDirection(direction);
  column = this._getColumnIndexByColumnArgs(column);
  this.MoveColumnCore(column, columnMoveTo, direction, moveToGroup, moveFromGroup);
 },
 MoveColumnCore: function(sourceIndex, targetIndex, direction, moveToGroup, moveFromGroup) {
  this.gridCallBack([ASPxClientGridViewCallbackCommand.ColumnMove, sourceIndex, targetIndex, direction, moveToGroup, moveFromGroup]);
 },
 getColumnMoveDirection: function(direction){
  if(!ASPx.IsExists(direction))
   return ASPxClientGridColumnMovingTargetPosition.Left;
  if(direction === false)
   return ASPxClientGridColumnMovingTargetPosition.Left;
  if(direction === true)
   return ASPxClientGridColumnMovingTargetPosition.Right;
  if(ASPx.IsNumber(direction))
   return direction;
  return ASPxClientGridColumnMovingTargetPosition.Left;
 },
 IsCustomizationWindowVisible: function(){
  var custWindow = this.GetCustomizationWindow();
  return custWindow != null && custWindow.IsVisible();
 },
 ShowCustomizationWindow: function(showAtElement, accessibleFocusElement){
  var custWindow = this.GetCustomizationWindow();
  if(!custWindow) return;
  if(!showAtElement) showAtElement = this.GetMainElement();
  if(this.accessibilityCompliant && accessibleFocusElement)
   custWindow.accessibleFocusElement = accessibleFocusElement;
  custWindow.ShowAtElement(showAtElement);
 },
 HideCustomizationWindow: function(){
  var custWindow = this.GetCustomizationWindow();
  if(custWindow != null) custWindow.Hide();
 },
 ShowCustomizationDialog: function() { },
 ExportTo: function(format) {
  this.gridPostBack([ASPxClientGridViewCallbackCommand.Export, format]);
 },
 GetSelectedFieldValues: function(fieldNames, onCallBack) {
  this.gridFuncCallBack([ASPxClientGridViewCallbackCommand.SelFieldValues, fieldNames], onCallBack);
 },
 GetSelectedKeysOnPage: function() {
  var keys = [];
  for(var i = 0; i < this.pageRowCount; i++) {
   if(this._isRowSelected(this.visibleStartIndex + i))
    keys.push(this.keys[i]);
  }
  return keys; 
 },
 GetItemValues: function(visibleIndex, fieldNames, onCallBack) {
  this.gridFuncCallBack([ASPxClientGridViewCallbackCommand.RowValues, visibleIndex, fieldNames], onCallBack);
 },
 GetPageItemValues: function(fieldNames, onCallBack) {
  this.gridFuncCallBack([ASPxClientGridViewCallbackCommand.PageRowValues, fieldNames], onCallBack);
 },
 GetVisibleItemsOnPage: function() {
  var batchEditHelper = this.GetBatchEditHelper();
  if(batchEditHelper)
   return batchEditHelper.GetVisibleRecordsOnPageCount();
  return this.pageRowCount;
 },
 GetTopVisibleIndex: function() {
  return this.visibleStartIndex;
 },
 GetColumnsCount: function() {
  return this.GetColumnCount();
 },
 GetColumnCount: function() {
  return this._getColumnCount();
 },
 GetColumn: function(index) {
  return this._getColumn(index);
 },
 GetColumnById: function(id) {
  return this._getColumnById(id);
 },
 GetColumnByField: function(fieldName) {
  return this._getColumnByField(fieldName);
 },
 GetEditor: function(column) {
  var columnObject = this._getColumnObjectByArg(column);
  return columnObject != null ? this.GetEditorByColumnIndex(columnObject.index) : null;
 },
 FocusEditor: function(column) {
  var editor = this.GetEditor(column);
  if(editor && editor.SetFocus) {
   editor.SetFocus();  
  }
 },
 GetEditValue: function(column) {
  var editor = this.GetEditor(column);
  return editor != null && editor.enabled ? editor.GetValue() : null;
 },
 SetEditValue: function(column, value) {
  var editor = this.GetEditor(column);
  if(editor != null && editor.enabled)
   editor.SetValue(value);
 },
 ShowFilterControl: function() {
  this.PreventCallbackAnimation();
  this.gridCallBack([ASPxClientGridViewCallbackCommand.ShowFilterControl]);
 },
 CloseFilterControl: function() {
  this.PreventCallbackAnimation();
  this.HideFilterControlPopup();
  this.gridCallBack([ASPxClientGridViewCallbackCommand.CloseFilterControl]);
 },
 HideFilterControlPopup: function() {
  var popup = this.GetFilterControlPopup();
  if(popup) {
   popup.Hide();
   if(this.accessibilityCompliant) {
    var needToStoreFocusTreeLine = !this.accessibilityFocusTreeLine && ASPx.GetIsParent(this.GetMainElement(), ASPx.GetActiveElement());
    if(needToStoreFocusTreeLine)
     this.accessibilityFocusTreeLine = ASPx.RestoreFocusHelper.getFocusTreeLine(this);
   }
  }
 },
 ApplyFilterControl: function() {
  this.PreventCallbackAnimation();
  var fc = this.GetFilterControl();
  if(fc == null) return;
  if(!this.callBacksEnabled)
   this.HideFilterControlPopup();
  if(!fc.isApplied)
   fc.Apply(this);
 },
 SetFilterEnabled: function(isFilterEnabled) {
  this.gridCallBack([ASPxClientGridViewCallbackCommand.SetFilterEnabled, isFilterEnabled]);
 },
 GetVerticalScrollPosition: function() { return 0; },
 SetVerticalScrollPosition: function(value) { },
 RaiseSelectionChangedOutOfServer: function() {
  this.RaiseSelectionChanged(-1, false, false, true);
 },
 RaiseSelectionChanged: function(visibleIndex, isSelected, isAllRecordsOnPage, isChangedOnServer) {
  if(!this.SelectionChanged.IsEmpty()){
   var args = this.CreateSelectionEventArgs(visibleIndex, isSelected, isAllRecordsOnPage, isChangedOnServer);
   this.SelectionChanged.FireEvent(this, args);
   if(args.processOnServer) {
    this.gridCallBack([ASPxClientGridViewCallbackCommand.Selection]);
   }
  }
  return false; 
 },
 CreateSelectionEventArgs: function(visibleIndex, isSelected, isAllRecordsOnPage, isChangedOnServer){
  return null;
 },
 RaiseFocusedItemChangedOutOfServer: function() { 
  this.RaiseFocusedItemChanged(true); 
 },
 RaiseFocusedItemChanged: function(isChangedOnServer) { return false; },
 RaiseItemFocusing: function(visibleIndex, htmlEvent) { return false; },
 RaiseColumnSorting: function(column) {
  if(!this.ColumnSorting.IsEmpty()){
   var args = this.CreateColumnCancelEventArgs(column);
   this.ColumnSorting.FireEvent(this, args);
   return args.cancel;
  }
  return false; 
 },
 CreateColumnCancelEventArgs: function(column){
  return null;
 },
 RaiseColumnGrouping: function(column) {
  if(!this.ColumnGrouping.IsEmpty()){
   var args = this.CreateColumnCancelEventArgs(column);
   this.ColumnGrouping.FireEvent(this, args);
   return args.cancel;
  }
  return false; 
 },
 RaiseItemClick: function(visibleIndex, htmlEvent) {
  return false; 
 },
 RaiseItemDblClick: function(visibleIndex, htmlEvent) {
  return false; 
 },
 RaiseCustomizationWindowCloseUp: function() {
  if(!this.CustomizationWindowCloseUp.IsEmpty()){
   var args = new ASPxClientEventArgs();
   this.CustomizationWindowCloseUp.FireEvent(this, args);
  }
  return false; 
 },
 RaiseColumnMoving: function(targets) {
  return false;
 },
 RaiseToolbarItemClick: function(toolbarInfo, item) {
  if(this.ToolbarItemClick.IsEmpty())
   return false;
  var args = new ASPxClientGridToolbarItemClickEventArgs(toolbarInfo.index, toolbarInfo.name, item, false);
  this.ToolbarItemClick.FireEvent(this, args);
  if(!args.handled && args.processOnServer) {
   this.GetToolbarHelper().ProcessCustomToolbarItemClickOnServer(args.usePostBack);
   return true;
  }
  return args.handled;
 },
 RaiseKeyDown: function(evt) {
  if(this.KeyDown.IsEmpty())
   return false;
  var args = new ASPxClientGridKeyboardEventArgs(evt);
  this.KeyDown.FireEvent(this, args);
  return args.handled;
 },
 RaiseKeyPress: function(evt) {
  if(this.KeyPress.IsEmpty())
   return false;
  var args = new ASPxClientGridKeyboardEventArgs(evt);
  this.KeyPress.FireEvent(this, args);
  return args.handled;
 },
 RaiseKeyUp: function(evt) {
  if(this.KeyUp.IsEmpty())
   return false;
  var args = new ASPxClientGridKeyboardEventArgs(evt);
  this.KeyUp.FireEvent(this, args);
  return args.handled;
 },
 RaiseBatchEditSummaryDisplayText: function(summaryInfo, text, groupRowVisibleIndex) {
  if(!this.BatchEditSummaryDisplayText.IsEmpty()) {
   var args = new ASPxClientGridBatchEditSummaryDisplayTextEventArgs(summaryInfo, text, groupRowVisibleIndex);
   this.BatchEditSummaryDisplayText.FireEvent(this, args);
   return args.displayText;
  }
  return text;
 },
 RaiseBatchEditStartEditing: function(visibleIndex, column, rowValues) { return null; },
 RaiseBatchEditEndEditing: function(visibleIndex, focusedColumn, rowValues) { return null; },
 RaiseBatchEditItemChangesCanceling: function(visibleIndex, rowValues) { return null; },
 RaiseBatchEditItemValidating: function(visibleIndex, validationInfo) { return null; },
 RaiseBatchEditConfirmShowing: function(requestTriggerID) { return false; },
 RaiseBatchEditTemplateCellFocused: function(columnIndex) { return false; },
 RaiseBatchEditChangesSaving: function(valuesInfo) { return false; },
 RaiseBatchEditChangesCanceling: function(valuesInfo) { return false; },
 RaiseBatchEditItemInserting: function(visibleIndex) { return false; },
 RaiseBatchEditItemDeleting: function(visibleIndex, itemValues) { return false; },
 RaiseBatchEditItemRecovering: function(visibleIndex, itemValues) { return false; },
 RaiseClipboardCellPasting: function(info, oldValueInfo, newValueInfo) {
  var cellInfo = this.CreateUserCellInfo(this.ConvertKeyToVisibleIndex(info.recordKey), this.GetColumn(info.columnIndex), info.recordKey);
  var args = this.CreateClipboardCellPastingArgs(cellInfo, oldValueInfo, newValueInfo);
  if(!this.ClipboardCellPasting.IsEmpty())
   this.ClipboardCellPasting.FireEvent(this, args);
  return args;
 },
 CreateClipboardCellPastingArgs: function(cellInfo, originalValueInfo, valueInfo) { return null; },
 RaiseCellSelectionChanging: function(info, isSelected) {
  if(!this.CellSelectionChanging.IsEmpty()) {
   var key = info.recordKey;
   var cellInfo = this.CreateUserCellInfo(this.ConvertKeyToVisibleIndex(key), this.GetColumn(info.columnIndex), key);
   var newSelectionState = isSelected ? ASPxClientGridSelectionState.Selected : ASPxClientGridSelectionState.Unselected;
   var args = this.CreateCellSelectionChangingArgs(cellInfo, newSelectionState);
   this.CellSelectionChanging.FireEvent(this, args);
   return args.cancel;
  }
 },
 CreateCellSelectionChangingArgs: function(cellInfo, newSelectionState) { return null; },
 RaiseFocusedCellChanging: function(info) {
  if(!this.FocusedCellChanging.IsEmpty()){   
   var key = info.recordKey;
   var cellInfo = this.CreateUserCellInfo(this.ConvertKeyToVisibleIndex(key), this.GetColumn(info.columnIndex), key);
   var args = this.CreateFocusedCellChangingArgs(cellInfo);
   this.FocusedCellChanging.FireEvent(this, args);
   return args.cancel;
  }
  return false;   
 },
 CreateUserCellInfo: function(visibleIndex, column, key) { return null; },
 CreateFocusedCellChangingArgs: function(cellInfo) { return null; },
 RaiseInternalCheckBoxClick: function(visibleIndex) {
  if(!this.InternalCheckBoxClick.IsEmpty()){
   var args = {"visibleIndex": visibleIndex, cancel: false};
   this.InternalCheckBoxClick.FireEvent(this, args);
   return args.cancel;
  }
  return false;
 },
 UA_AddNew: function() {
  this.AddNewItem();
 },
 UA_StartEdit: function(visibleIndex) {
  this.StartEditItem(visibleIndex);
 },
 UA_Delete: function(visibleIndex) {
  this.DeleteGridItem(visibleIndex);
 },
 UA_Recover: function(visibleIndex) {
  this.RecoverItem(visibleIndex);
 },
 UA_UpdateEdit: function() {
  this.UpdateEdit();
 },
 UA_CancelEdit: function(visibleIndex) {
  this.CancelEdit(visibleIndex);
 },
 UA_CustomButton: function(id, visibleIndex) {
  this.CommandCustomButton(id, visibleIndex);
 },
 UA_Select: function(visibleIndex) {
  if(!this.lookupBehavior || this.allowSelectByItemClick){
   var selected = this.allowSelectSingleRowOnly || !this._isRowSelected(visibleIndex);
   this.SelectItem(visibleIndex, selected);
  }
 },
 UA_ClearFilter: function() {
  this.ClearFilter();
 },
 UA_ApplySearchFilter: function() {
  this.ApplySearchFilterFromEditor();
 },
 UA_ClearSearchFilter: function() {
  var editor = this.GetSearchEditor();
  if(editor)
   editor.SetValue(null);
  this.ApplySearchFilterFromEditor();
 },
 UA_UpdateSummaries: function() {
  this.UpdateSummaries();
 },
 ApplySearchFilterFromEditor: function() {
  this.GetFilterHelper().ApplySearchFilterFromEditor(this.GetSearchEditor());
 },
 ChangeCellInitialClass: function(cell, className, add) { this.GetStyleHelper().ChangeCellInitialClass(cell, className, add); },
 OnDispose: function() { 
  if(this.filterHelper)
   this.filterHelper.OnDispose();
  ASPxClientControl.prototype.OnDispose.call(this);
 },
 GetEditFormLayout: function() {
  if(this.GetPopupEditForm())
   return ASPx.GetControlCollection().Get(this.name + "_DXPEForm" + this.GetEditFormLayoutIDPostfix());
  return ASPx.GetControlCollection().Get(this.name + this.GetEditFormLayoutIDPostfix());
 },
 GetEditFormLayoutIDPostfix: function() { return ""; },
 GetEditFormLayoutItemByColumn: function(column) {
  var editFormLayout = this.GetEditFormLayout();
  var columnObject = this._getColumnObjectByArg(column);
  if(!editFormLayout || !columnObject)
   return null;
  return this.getEditFormLayoutItemByColumnCore(editFormLayout, columnObject);
 },
 getEditFormLayoutItemByColumnCore: function(editFormLayout, columnObject) {
  var findByColumnNamePredicate = function(item) {
   if(!item.columnProperties)
    return false;
   return columnObject.name && columnObject.name == item.columnProperties.name;
  };
  var findByColumnFieldNamePredicate = function(item) {
   if(!item.columnProperties)
    return false;
   return columnObject.fieldName && columnObject.fieldName == item.columnProperties.fieldName;
  };
  return editFormLayout.getItemByPredicate(findByColumnNamePredicate) || editFormLayout.getItemByPredicate(findByColumnFieldNamePredicate);
 },
 GetEditFormLayoutItemOrGroup: function(name) {
  var editFormLayout = this.GetEditFormLayout();
  return editFormLayout ? editFormLayout.GetItemByName(name) : null;
 }
});
ASPxClientGridBase.Cast = ASPxClientControl.Cast;
var GridCallbackHelper = ASPx.CreateClass(null, {
 constructor: function(grid) {
  this.grid = grid;
  this.funcCallbackInfoList = [ ];
  this.postbackRequestCount = 0;
 },
 GetAllowDelete: function() { return this.grid.allowDelete; },
 GetAllowEdit: function() { return this.grid.allowEdit; },
 GetAllowInsert: function() { return this.grid.allowInsert; },
 CanSendCallback: function() { return this.grid.callBack && this.grid.callBacksEnabled; },
 GetEditorValues: function() { return this.grid.GetEditorValues(); },
 GetSelectionState: function() { return this.grid.GetSelectedState(); },
 GetKeyValues: function() { return this.grid.GetKeyValues(); },
 GetFocusedRowState: function() { return this.grid.stateObject.focusedRow; },
 GetToolbarState: function() { return this.grid.GetToolbarHelper().GetCallbackState(); },
 GetRequestCount: function() { return this.grid.requestCount; },
 ResetUserChangedSelection: function() { 
  this.grid.userChangedSelection = false; 
 },
 GetTotalRequestCount: function() { return this.GetRequestCount() + this.postbackRequestCount; },
 CreateGridCallback: function(command, args, callbackHandler) {
  this.grid.CreateCallback(args, command, callbackHandler);
 },
 CreateGridPostback: function(args, preventConvertToUpdatePanelCallback) {
  this.grid.SendPostBack(args, preventConvertToUpdatePanelCallback);
 },
 OnBeforeCallbackOrPostBack: function() {
  this.grid.OnBeforeCallbackOrPostBack(); 
 },
 OnBeforeCallback: function(command) { this.grid.OnBeforeCallback(command); },
 SendRequest: function(args, callbackHandler) {
  var command = this.GetCorrectedCommand(args);
  if(!this.ValidateCommand(command))
   return;
  this.OnBeforeCallbackOrPostBack();
  if(this.CanSendCallback())
   this.SendCallback(command, args, callbackHandler);
  else
   this.SendPostback(args);
 },
 SendCallback: function(command, args, callbackHandler) {
  this.OnBeforeCallback(command);
  var callbackState = this.GetGridCallbackState();
  this.ResetUserChangedSelection();
  this.SendCallbackCore(command, args, callbackState, callbackHandler);
 },
 SendFuncCallback: function(args, onCallBack) {
  var callbackState = this.GetGridCallbackState();
  callbackState.push([ "FB", this.GetFuncCallBackIndex(onCallBack) ]);
  this.SendCallbackCore("FUNCTION", args, callbackState);
 },
 SendCallbackCore: function(command, commandArgs, callbackState, callbackHandler) {
  callbackState.push([ "GB", this.SerializeCallbackArgs(commandArgs) ]);
  this.CreateGridCallback(command, this.FormatCallbackState(callbackState), callbackHandler);
 },
 SendPostback: function(args) {
  this.postbackRequestCount++;
  this.CreateGridPostback(this.SerializeCallbackArgs(args), this.IsExportPostback(args));
 },
 ValidateCommand: function(command) {
  if(command === ASPxClientGridViewCallbackCommand.DeleteRow && !this.GetAllowDelete())
   return false;
  if(command === ASPxClientGridViewCallbackCommand.StartEdit && !this.GetAllowEdit())
   return false;
  if(command === ASPxClientGridViewCallbackCommand.AddNewRow && !this.GetAllowInsert())
   return false;
  return true;
 },
 GetCorrectedCommand: function(args) {
  if(args.length === 0) return "";
  var command = args[0];
  if(args.length > 1 && command === ASPxClientGridViewCallbackCommand.ColumnMove) {
   if(args[args.length - 1])
    command = ASPxClientGridViewCallbackCommand.UnGroup;
   if(args[args.length - 2])
    command = ASPxClientGridViewCallbackCommand.Group;
  }
  return command;
 },
 IsExportPostback: function(args) {
  if(!ASPx.Ident.IsArray(args) || args.length === 0)
   return false;
  return args[0] == ASPxClientGridViewCallbackCommand.Export || args[1] == ASPxClientGridViewCallbackCommand.Export;
 },
 GetGridCallbackState: function() {
  return [
   [ "EV", this.GetEditorValues() ],
   [ "SR", this.GetSelectionState() ],
   [ "KV", this.GetKeyValues() ],
   [ "FR", this.GetFocusedRowState() ],
   [ "CT", this.GetToolbarState() ]
  ];
 },
 GetFuncCallBackIndex: function(onCallBack) {
  var info = { date: new Date(), callback: onCallBack };
  for(var i = 0; i < this.funcCallbackInfoList.length; i ++) {
   if(this.funcCallbackInfoList[i] === null) {
    this.funcCallbackInfoList[i] = info;
    return i;
   }
  }
  this.funcCallbackInfoList.push(info);
  return this.funcCallbackInfoList.length - 1;
 },
 GetFuncCallBackInfo: function(index) {
  if(index < 0 || index >= this.funcCallbackInfoList.length) 
   return null;
  var result = this.funcCallbackInfoList[index];
  this.funcCallbackInfoList[index] = null;
  return result;
 },
 HasWaitedFuncCallbacks: function() {
  return this.funcCallbackInfoList.filter(function(i) { return i !== null; }).length > 0;
 },
 HasWaitedFuncCallbacksFromInterval: function(timeout) {
  var date = new Date();
  for(var i = 0; i < this.funcCallbackInfoList.length; i++) {
   var info = this.funcCallbackInfoList[i];
   if(info && (date - info.date) < timeout)
    return true;
  }
  return false;
 },
 FormatCallbackState: function(callbackState) {
  var result = [ ];
  for(var i = 0; i < callbackState.length; i++) {
   var stateItem = callbackState[i];
   if(!stateItem || stateItem.length !== 2)
    continue;
   var stateKey = stateItem[0];
   var stateValue = stateItem[1];
   if(ASPx.IsExists(stateValue) && stateValue !== "") {
    var stateValueString = stateValue.toString();
    result.push(stateKey);
    result.push("|");
    result.push(stateValueString.length);
    result.push(";");
    result.push(stateValueString);
    result.push(";");
   }
  }
  return result.join("");
 },
 SerializeCallbackArgs: function(args) {
  if(!ASPx.Ident.IsArray(args) || args.length === 0)
   return "";
  var result = [ ];
  for(var i = 0; i < args.length; i++) {
   var item = args[i].toString();
   result.push(item.length);
   result.push("|");
   result.push(item);
  }
  return result.join("");
 }
});
var GridStyleHelper = ASPx.CreateClass(ASPx.GridStyleHelperBase, {
 SelectedItemKey: "sel",
 FocusedItemKey: "fi",
 constructor: function(grid) {
  this.grid = grid;
 },
 GetStyles: function() { return this.grid.styleInfo; },
 GetSelectedItemStyle: function() { return this.GetStyleInfo(this.SelectedItemKey); },
 GetFocusedItemStyle: function() { return this.GetStyleInfo(this.FocusedItemKey); },
 IsSelectedItemStyle: function(style) { return this.CheckStyleInfoByKey(style, this.SelectedItemKey); },
 IsFocusedItemStyle: function(style) { return this.CheckStyleInfoByKey(style, this.FocusedItemKey); },
});
var ASPxClientGridColumnBase = ASPx.CreateClass(null, {
 constructor: function(prop) {
  this.index =   ASPx.IsExists(prop[0]) ? prop[0] : -1;
  this.visible =    ASPx.IsExists(prop[1]) ?  !!prop[1] : true;
  this.name =    ASPx.IsExists(prop[2]) ? prop[2] : "";
  this.fieldName =  ASPx.IsExists(prop[3]) ? prop[3] : "";
  this.allowSort =  ASPx.IsExists(prop[4]) ?  !!prop[4] : true;
  this.HFMode =     ASPx.IsExists(prop[5]) ? prop[5] : 1;
  this.sortIndex =  ASPx.IsExists(prop[6]) ? prop[6] : -1;
  this.sortOrder =  ASPx.IsExists(prop[7]) ? prop[7] : ASPx.GridSortOrder.None;
  this.id = this.name;
 }
});
var GridLayoutHelper = ASPx.CreateClass(null, { 
 constructor: function(grid) {
  this.grid = grid;
 },
 GetDataItemVisibleIndices: function(includeDeleted) { return this.grid.GetDataItemVisibleIndices(includeDeleted); },
 Invalidate: function() { 
 },
});
var GridViewDragHelper = ASPx.CreateClass(ASPx.GridDragHelperBase, {
 constructor: function(grid) {
  this.grid = grid;
  this.targets = null;
  this.constructor.prototype.constructor.call(this);
 },
 CreateDrag: function(e, element, canDrag) {
  var drag = new ASPx.DragHelper(e, element, true);
  drag.centerClone = true;
  drag.canDrag = canDrag;  
  drag.grid = this.grid;
  drag.ctrl = e.ctrlKey;
  drag.shift = e.shiftKey;
  drag.onDragDivCreating = this.OnDragDivCreating;
  drag.onDoClick = this.OnDoClick;
  drag.onCloneCreating = this.OnCloneCreating;
  drag.onEndDrag = this.OnEndDrag;
  drag.onCancelDrag = this.OnCancelDrag;
  this.OnDragCreated(true);
  return drag;
 },
 GetActiveTargets: function() { 
  if(this.targets && this.targets.list)
   return this.targets.list;
  return [ ];
 },
 GetScrollHelper: function() { return this.grid.GetScrollHelper(); },
 GetCustomizationWindowElement: function() { return this.grid.GetCustomizationWindowElement(); },
 GetHeaderLeaf: function(columnIndex, isLeft){ return this.grid.GetHeaderMatrix().GetLeaf(columnIndex, isLeft, false); },
 GetHeaderLevel: function(columnIndex){ return this.grid.GetHeaderMatrix().GetColumnLevel(columnIndex); },
 NeedScrollOnDrag: function(isHorzDrag) { 
  var hasFixedColumns = this.grid.GetFixedColumnsHelper && this.grid.GetFixedColumnsHelper();
  return ASPx.GridDragHelperBase.prototype.NeedScrollOnDrag.call(this, isHorzDrag) || hasFixedColumns; 
 },
 PrepareTargetHeightFunc: function() {
  GridViewDragHelper.Target_GetElementHeight = null;
  if(this.grid.allowChangeColumnHierarchy)
   return;
  var headerRowCount = this.grid.GetHeaderMatrix().GetRowCount();
  if(headerRowCount > 0) {
   var row = this.grid.GetHeaderRow(headerRowCount - 1);
   var headerBottom = ASPx.GetAbsoluteY(row) + row.offsetHeight;
   GridViewDragHelper.Target_GetElementHeight = function() {
    return headerBottom - this.absoluteY;
   };
  }
 },
 CreateTargets: function(drag, e) {
  if(!drag.canDrag) return;
  var grid = this.grid;
  this.PrepareTargetHeightFunc();
  var targets = new ASPx.CursorTargets(grid);
  targets.obj = drag.obj;
  targets.onTargetCreated = this.OnTargetCreated;
  targets.onTargetChanging = this.OnTargetChanging;
  targets.onTargetChanged = this.OnTargetChanged;
  targets.onTargetAllowed = this.OnHeaderTargetAllowed.aspxBind(this);
  this.targets = targets;
  var scrollLeft = null, scrollRight;
  var scrollHelper = grid.GetScrollHelper();
  var scrollableControl = scrollHelper && scrollHelper.GetHorzScrollableControl();
  if(scrollableControl) {
   scrollLeft = ASPx.GetAbsoluteX(scrollableControl);
   scrollRight = scrollLeft + scrollableControl.offsetWidth;
  }
  var sourceColumn = grid.getColumnObject(drag.obj.id);
  var win = grid.GetCustomizationWindow();
  if(win && !sourceColumn.inCustWindow)
   this.AddDragDropTarget(targets, win.GetWindowClientTable(-1));
  for(var i = 0; i < grid.columns.length; i++) {
   var column = grid.columns[i];
   for(var grouped = 0; grouped <= 1; grouped++) {
    var targetElement = grid.GetHeader(column.index, !!grouped);
    if(!targetElement)
     continue;
    if(this.IsValidColumnDragDropTarget(drag.obj, targetElement, sourceColumn, column))
     this.AddDragDropTarget(targets, targetElement);  
   }
  }
  this.AddAdaptivePanelTarget(targets, grid.GetAdaptiveHeaderPanel());
  this.AddAdaptivePanelTarget(targets, grid.GetAdaptiveGroupPanel());
  this.AddDragDropTarget(targets, grid.GetGroupPanel());
  this.AddDragDropTarget(targets, ASPx.GetElementById(grid.name + this.grid.EmptyHeaderSuffix));
 },
 IsValidColumnDragDropTarget: function(sourceElement, targetElement, sourceColumn, targetColumn) {
  if(sourceColumn == targetColumn)
   return false;
  if(this.grid.allowChangeColumnHierarchy)
   return true;
  if(sourceColumn.parentIndex == targetColumn.parentIndex)
   return true;
  if(sourceColumn.parentIndex == targetColumn.index) {
   return (sourceColumn.inCustWindow || this.IsGroupingTarget(sourceElement))
    && this.grid.GetHeaderMatrix().IsLeaf(targetColumn.index);
  }
  if(this.IsParentColumn(sourceColumn.index, targetColumn.index))
   return (sourceColumn.inCustWindow || this.IsGroupingTarget(sourceElement));
  if(this.IsGroupingTarget(targetElement))
   return true;
  if(this.IsValidAdaptiveTarget(sourceElement, targetElement, sourceColumn, targetColumn))
   return true;
  return false;
 },
 AddAdaptivePanelTarget: function(targets, panel) {
  if(!panel) return;
  this.AppendAdaptivePanelDragAreas(targets, panel);
  this.AddDragDropTarget(targets, panel);
 },
 AppendAdaptivePanelDragAreas: function(targets, panel) {
  panel.dragAreas = [ ];
  var headers = this.GetAdaptivePanelHeaders(panel);
  if(headers.length === 0) 
   return;
  var rows = [ ];
  var row = [ headers[0] ];
  rows.push(row);
  for(var i = 0; i < headers.length - 1; i++) {
   var currentHeader = headers[i];
   var nextHeader = headers[i + 1];
   if(ASPx.GetAbsoluteY(currentHeader) !== ASPx.GetAbsoluteY(nextHeader)) {
    row = [ ];
    rows.push(row);
   }
   row.push(nextHeader);
  }
  for(var i = 0; i < rows.length; i++) {
   var row = rows[i];
   this.CreateDragArea(panel, row[0], targets, true);
   this.CreateDragArea(panel, row[row.length - 1], targets,  false);
  }
 },
 GetAdaptivePanelHeaders: function(panel) {
  return ASPx.GetNodesByPartialClassName(panel, ASPx.GridViewConsts.HeaderCellCssClass);
 },
 CreateDragArea: function(panel, target, targets, isLeft) {
  if(!this.ContainsTarget(targets, target)) 
   return; 
  var targetTop = ASPx.GetAbsolutePositionY(target);
  var area = { 
   target: target,
   isLeft: isLeft,
   top: targetTop,
   bottom: targetTop + target.offsetHeight,
   left: isLeft ? ASPx.GetAbsolutePositionX(panel) : ASPx.GetAbsolutePositionX(target) + target.offsetWidth,
   right: isLeft ? ASPx.GetAbsolutePositionX(target) :  ASPx.GetAbsolutePositionX(panel) + panel.offsetWidth
  };
  panel.dragAreas.push(area);
 },
 ContainsTarget: function(targets, target) {
  for(var i = 0; i < targets.list.length; i++) {
   if(targets.list[i].element == target)
    return true;
  }
  return false;
 },
 IsValidAdaptiveTarget: function(sourceElement, targetElement, sourceColumn, targetColumn) {
  this.EnsureAdaptiveTargetInfo(sourceElement, targetElement, sourceColumn, targetColumn);
  return !!targetElement.adaptiveInfo;
 },
 EnsureAdaptiveTargetInfo: function(sourceElement, targetElement, sourceColumn, targetColumn) {
  if(!this.IsAdaptiveHeaderTarget(targetElement))
   return;
  var sourceLevel = this.GetHeaderLevel(sourceColumn.index);
  var targetLevel = this.GetHeaderLevel(targetColumn.index);
  targetElement.adaptiveInfo = null;
  if(targetLevel < 0 || sourceLevel >= targetLevel)
   return;
  var brother = this.FindColumnBrother(sourceColumn, targetColumn);
  if(!brother) 
   return;
  var leftLeaf = this.GetHeaderLeaf(brother.index, true);
  var rightLeaf = this.GetHeaderLeaf(brother.index, false);  
  if(targetColumn.index === leftLeaf || targetColumn.index === rightLeaf)
   targetElement.adaptiveInfo = { brotherIndex : brother.index, brotherHasOnlyOneLeaf: leftLeaf == rightLeaf, isLeftLeaf: targetColumn.index == leftLeaf };
 },
 FindColumnBrother: function(sourceColumn, targetColumn) {
  while(targetColumn && targetColumn.parentIndex !== sourceColumn.parentIndex)
   targetColumn = this.grid.GetColumn(targetColumn.parentIndex);
  return targetColumn;
 },
 AddDragDropTarget: function(targets, element) {
  if(element)
   targets.addElement(element);
 },
 IsAdaptiveHeaderPanelVisible: function() { return ASPx.IsElementDisplayed(this.grid.GetAdaptiveHeaderPanel()); },
 IsAdaptiveGroupPanelVisible: function() { return ASPx.IsElementDisplayed(this.grid.GetAdaptiveGroupPanel()); },
 IsDataHeaderTarget: function(element) { return element && element.id.indexOf(this.grid.name + "_col") == 0; },
 IsAdaptiveHeaderTarget: function(element) { return this.IsAdaptiveHeaderPanelVisible() && this.IsDataHeaderTarget(element) && element.adaptiveMoved; },
 IsAdaptivePanelTarget: function(element) { return element && (element == this.grid.GetAdaptiveHeaderPanel() || element == this.grid.GetAdaptiveGroupPanel()); },
 IsAdaptiveGroupHeaderTarget: function(element) { return this.IsAdaptiveGroupPanelVisible() && this.IsGroupHeaderTarget(element) && element.adaptiveMoved; },
 IsGroupHeaderTarget: function(element) {
  if(!element || !element.id)
   return false;
  return element.id.indexOf(this.grid.name + "_groupcol") == 0;
 },
 IsGroupingTarget: function(element) { 
  return element == this.grid.GetGroupPanel() || this.IsGroupHeaderTarget(element) || element ==  this.grid.GetAdaptiveGroupPanel();
 },
 IsCustWindowTarget: function(element) {
  var win = this.grid.GetCustomizationWindow();
  return win && element == win.GetWindowClientTable(-1); 
 },
 AllowVerticalTargetTags: function(element){
  return this.grid.allowChangeColumnHierarchy && !this.IsGroupingTarget(element) && !this.IsCustWindowTarget(element);
 },
 OnDragDivCreating: function(drag, dragDiv) {
  var rootTable = drag.grid.GetMainElement();
  if(!dragDiv || !rootTable) return;
  dragDiv.className = rootTable.className;
  dragDiv.style.cssText = rootTable.style.cssText;
 },
 OnDoClick: function(drag) {
  window.setTimeout(function() {
   var grid = drag.grid;
   var contextMenuHelper = grid.GetContextMenuHelper && grid.GetContextMenuHelper(); 
   if(contextMenuHelper && contextMenuHelper.contextMenuActivating) {
    contextMenuHelper.contextMenuActivating = false;
    return;
   }
   if(!grid.canSortByColumn(drag.obj) || grid.InRegularCallback()) 
    return;
   grid.SortBy(grid.getColumnIndex(drag.obj.id), drag.ctrl ? "NONE" : "", !drag.shift && !drag.ctrl);
  }, 0);
 },
 OnCancelDrag: function(drag) {
  drag.grid.dragHelper.DisplayTargetImages(false);
  drag.grid.dragHelper.CancelDrag();
 },
 OnEndDrag: function(drag) {
  if(!drag.targetElement)
   return;
  var grid = drag.grid;
  var sourceElement = drag.obj;
  var targetElement = drag.targetElement;
  var sourceIndex = grid.getColumnIndex(sourceElement.id);
  var targetIndex =  grid.getColumnIndex(targetElement.id);
  var direction = drag.targetTag;
  if(grid.IsEmptyHeaderID(targetElement.id) || targetElement == grid.GetAdaptiveHeaderPanel())
   targetIndex = 0;
  if(grid.dragHelper.IsAdaptiveHeaderTarget(targetElement) && targetElement.adaptiveInfo) {
   targetIndex = targetElement.adaptiveInfo.brotherIndex;
   var isLeft = !targetElement.adaptiveInfo.brotherHasOnlyOneLeaf ? targetElement.adaptiveInfo.isLeftLeaf : isLeft;
   direction = isLeft ? ASPx.CursorTargetTag.Left : ASPx.CursorTargetTag.Right;
  }
  if(grid.rtl && direction < 2)
   direction = direction == ASPx.CursorTargetTag.Left ? ASPx.CursorTargetTag.Right : ASPx.CursorTargetTag.Left;
  grid.MoveColumn(
   sourceIndex,
   targetIndex,
   direction,
   grid.dragHelper.IsGroupingTarget(targetElement),
   grid.dragHelper.IsGroupingTarget(sourceElement)
  );
 },
 OnCloneCreating: function(clone) {
  var table = document.createElement("table");
  table.cellSpacing = 0;
  if(this.obj.offsetWidth > 0)
   table.style.width = Math.min(200, this.obj.offsetWidth) + "px";
  if(this.obj.offsetHeight > 0)
   table.style.height = this.obj.offsetHeight + "px";
  var row = table.insertRow(-1);
  clone.style.borderLeftWidth = "";
  clone.style.borderTopWidth = "";
  clone.style.borderRightWidth = "";
  row.appendChild(clone);
  table.style.opacity = 0.80;
  table.style.filter = "alpha(opacity=80)"; 
  if(ASPx.IsElementRightToLeft(this.obj))
   table.dir = "rtl";
  return table;
 },
 OnTargetCreated: function(targets, targetObj) {
  var f = GridViewDragHelper.Target_GetElementHeight;
  var h = targets.control.dragHelper;
  var el = targetObj.element;
  if(f && !h.IsCustWindowTarget(el) && !h.IsGroupingTarget(el) && !h.IsAdaptiveHeaderTarget(el) && !h.IsAdaptivePanelTarget(el))
   targetObj.GetElementHeight = f;
 },
 OnTargetChanging: function(targets) {
  if(!targets.targetElement)
   return;
  var grid = targets.control;
  var allowVerticalTags = grid.dragHelper.AllowVerticalTargetTags(targets.targetElement);
  targets.refreshTargetTag(allowVerticalTags);
  if(allowVerticalTags)
   grid.dragHelper.CorrectTargetTagOnMovingColumnFromCustWindow(targets);
  var grouping = false;
  if(targets.targetElement == grid.GetGroupPanel() || targets.targetElement == grid.GetAdaptiveGroupPanel()) {
   targets.targetTag = ASPx.CursorTargetTag.Left;
   grouping = true;
  }  
  if(grid.dragHelper.IsGroupHeaderTarget(targets.targetElement)) {
   grouping = true;
  }
  var column = grid.getColumnObject(targets.obj.id);
  if(grouping && !grid.canGroupByColumn(column))
   targets.targetElement = null;
  if(targets.targetElement == grid.GetCustomizationWindowElement() && !grid.canHideColumn(column))
   targets.targetElement = null;
  if(grid.dragHelper.IsAdaptivePanelTarget(targets.targetElement)) {
   var info = grid.dragHelper.GetAdaptivePanelTargetInfo(targets, targets.targetElement);
   targets.targetTag = info.isLeftSide ? ASPx.CursorTargetTag.Left : ASPx.CursorTargetTag.Right;
   targets.targetElement = info.targetElement;
   targets.skipNeighbor = true;
  }
  if(targets.targetElement)
   grid.RaiseColumnMoving(targets);
 },
 CorrectTargetTagOnMovingColumnFromCustWindow: function(targets){
  if(!ASPx.currentDragHelper || !ASPx.currentDragHelper.obj || !targets.targetElement)
   return;
  var grid = targets.control;
  var sourceColumn = grid.getColumnObject(ASPx.currentDragHelper.obj.id);
  if(!sourceColumn || !sourceColumn.inCustWindow || !grid.GetColumnHelper().HasColumnChildren(sourceColumn.index))
   return;
  var sourceColumn = grid.getColumnObject(ASPx.currentDragHelper.obj.id);
  var targetColumn = grid.getColumnObject(targets.targetElement.id);
  if(targets.targetTag == ASPx.CursorTargetTag.Top || targets.targetTag == ASPx.CursorTargetTag.Bottom && grid.GetColumnHelper().HasColumnChildren(targetColumn.index))
   targets.refreshTargetTag(false);
 },
 GetAdaptivePanelTargetInfo: function(targets, panel) {
  var x = targets.x;
  var y = targets.y;
  for(var i = 0; i < panel.dragAreas.length; i++) {
   var dragArea = panel.dragAreas[i];
   if(x >= dragArea.left && x <= dragArea.right && y >= dragArea.top && y <= dragArea.bottom)
    return { targetElement: dragArea.target, isLeftSide: dragArea.isLeft };
  }
  return { targetElement: panel.children.length == 0 ? panel : null, isLeftSide: true };
 },
 OnTargetChanged: function(targets) {
  if(ASPx.currentDragHelper == null)
   return;
  var element = targets.targetElement;
  if(element == ASPx.currentDragHelper.obj)
   return;
  var grid = targets.control;
  grid.dragHelper.DisplayTargetImages(false);
  if(!element) {
   ASPx.currentDragHelper.targetElement = null;
   return;
  }
  ASPx.currentDragHelper.targetElement = element;
  ASPx.currentDragHelper.targetTag = targets.targetTag;
  var moveToCustWindow = grid.dragHelper.IsCustWindowTarget(element);
  if(moveToCustWindow) {
   ASPx.currentDragHelper.addElementToDragDiv(grid.GetArrowDragFieldImage());
   return;
  }
  var moveToGroup = grid.dragHelper.IsGroupingTarget(element);
  var info = grid.dragHelper.CreateTargetImagesInfo(targets, moveToGroup);
  if(!info) {
   ASPx.currentDragHelper.targetElement = null;
   return;
  }
  if(targets.skipNeighbor)
   info.neighbor = null;
  var position = grid.dragHelper.CreateTargetImagesPosition(element, info);
  grid.dragHelper.DisplayTargetImages(true, position);
 },
 CreateTargetImagesPosition: function(targetElement, info){
  if(info.side == ASPx.CursorTargetTag.Top || info.side == ASPx.CursorTargetTag.Bottom)
   return this.CreateVerticalTargetImagesPosition(targetElement, info);
  return this.CreateHorizontalTargetImagesPosition(targetElement, info);
 },
 CreateHorizontalTargetImagesPosition: function(targetElement, info){
  var left = ASPx.GetAbsoluteX(targetElement);
  var isRightSide = info.side == ASPx.CursorTargetTag.Right;
  if(targetElement == this.grid.GetGroupPanel() || targetElement == this.grid.GetAdaptiveHeaderPanel() || targetElement == this.grid.GetAdaptiveGroupPanel()) {
   if(this.grid.rtl)
    left += targetElement.offsetWidth;
  } else {
   if(isRightSide) {
    if(info.neighbor)
     left = ASPx.GetAbsoluteX(info.neighbor);
    else
     left += targetElement.offsetWidth;
   }
  }
  var top = ASPx.GetAbsoluteY(targetElement);
  var bottomElement = targetElement;
  var moveToGroup = this.IsGroupingTarget(targetElement);
  if(!moveToGroup && info.targetColumnIndex > -1)
   bottomElement = this.grid.GetHeader(this.GetHeaderLeaf(info.targetColumnIndex, !isRightSide));
  var bottom = ASPx.GetAbsoluteY(bottomElement) + bottomElement.offsetHeight;
  return { top: top, bottom: bottom, left: left, right: left };
 },
 CreateVerticalTargetImagesPosition: function(targetElement, info){
  var left = ASPx.GetAbsoluteX(targetElement);
  var right = left + targetElement.offsetWidth;
  var top = ASPx.GetAbsoluteY(targetElement);
  if(info.side == ASPx.CursorTargetTag.Bottom)
   top += targetElement.offsetHeight;
  return { top: top, bottom: top, left: left, right: right };
 },
 GetChildHeaderElement: function(parentIndex, childIndex, left){
  var grid = this.grid;
  var childColumnIndex = childIndex;
  var currentColumnIndex = childIndex;
  var getNextNeighborHeaderMatrixMethodName = "Get" + (left ? "Left" : "Right") + "Neighbor";
  while(ASPx.IsExists(currentColumnIndex) && this.IsParentColumn(parentIndex, currentColumnIndex)){
   childColumnIndex = currentColumnIndex; 
   currentColumnIndex = grid.GetHeaderMatrix()[getNextNeighborHeaderMatrixMethodName](childColumnIndex);
  }
  return grid.GetHeader(childColumnIndex);
 },
 IsParentColumn: function(parentIndex, columnIndex){
  var index = columnIndex;
  while(index >= 0 && index != parentIndex)
   index = this.grid.GetColumn(index).parentIndex;
  return index >= 0;
 },
 CreateTargetImagesInfo: function(targets, moveToGroup){
  if(moveToGroup)
   return this.CreateGroupPanelTargetImagesInfo(targets);
  var grid = targets.control;
  var targetElement = targets.targetElement;
  var info = {
   targetColumnIndex: grid.getColumnIndex(targetElement.id),
   side: targets.targetTag,
   neighbor: null
  };
  var isAdaptiveHeader = grid.dragHelper.IsAdaptiveHeaderTarget(targetElement);
  if(!isAdaptiveHeader && info.targetColumnIndex < 0)
   return info;
  if(isAdaptiveHeader && targetElement.adaptiveInfo) {
   info.targetColumnIndex = targetElement.adaptiveInfo.brotherIndex;
   if(!targetElement.adaptiveInfo.brotherHasOnlyOneLeaf)
    info.side = targetElement.adaptiveInfo.isLeftLeaf ? ASPx.CursorTargetTag.Left : ASPx.CursorTargetTag.Right;
  }
  var neighborIndex = this.FindHeaderNeighborIndexByHorizontal(info.side, info.targetColumnIndex, isAdaptiveHeader);
  if(neighborIndex == null)
   info = null;
  else if(neighborIndex > -1)
   info.neighbor = grid.GetHeader(neighborIndex);
  return info;
 },
 CreateGroupPanelTargetImagesInfo: function(targets){
  var grid = targets.control;
  var isRightSide = targets.targetTag == ASPx.CursorTargetTag.Right;
  var method = isRightSide ^ grid.rtl ? "nextSibling" : "previousSibling";
  var neighbor = grid.dragHelper.GetGroupNodeNeighbor(targets.targetElement, method);
  if(neighbor && neighbor.id == ASPx.currentDragHelper.obj.id)
   return null;
  return {
   targetColumnIndex: grid.getColumnIndex(targets.targetElement.id),
   side: targets.targetTag,
   neighbor: neighbor
  };
 },
 FindHeaderNeighborIndexByHorizontal: function(side, targetColumnIndex, isAdaptiveHeader){
  if(side == ASPx.CursorTargetTag.Top || side == ASPx.CursorTargetTag.Bottom)
   return targetColumnIndex;
  var grid = this.grid;
  var isRightSide = side == ASPx.CursorTargetTag.Right;
  var matrix =  grid.GetHeaderMatrix();
  var method = isRightSide ^ grid.rtl ? "GetRightNeighbor" : "GetLeftNeighbor";
  var neighborIndex = matrix[method](targetColumnIndex, !isAdaptiveHeader);
  var sourceColumn = grid.getColumnObject(ASPx.currentDragHelper.obj.id);
  if(neighborIndex == sourceColumn.index && !sourceColumn.inCustWindow && !this.IsGroupHeaderTarget(ASPx.currentDragHelper.obj))
   return sourceColumn.parentIndex != grid.GetColumn(targetColumnIndex).parentIndex ? -1 : null;
  if(!isNaN(neighborIndex)){
   if(isAdaptiveHeader && !matrix.IsLeaf(neighborIndex))
    neighborIndex = matrix.GetLeaf(neighborIndex, isRightSide);
  } else
   neighborIndex = -1;
  return neighborIndex;
 },
 GetGroupNodeNeighbor: function(element, method) {
  if(this.IsAdaptiveGroupHeaderTarget(element)) 
   return this.GetAdaptiveGroupNodeNeighbor(element, method);
  return this.GetGroupNodeNeighborCore(element, method, 2);
 },
 GetAdaptiveGroupNodeNeighbor: function(element, method) {   
  var headers = ASPx.GetNodesByPartialClassName(this.grid.GetAdaptiveGroupPanel(), ASPx.GridViewConsts.HeaderCellCssClass);
  var index = ASPx.Data.ArrayIndexOf(headers, element);
  if(index < 0) return null;   
  return method == "nextSibling" ? headers[index + 1] : headers[index - 1];
 },
 GetGroupNodeNeighborCore: function(element, method, distance) {
  var neighbor = element[method];
  if(neighbor && neighbor.nodeType == 1) {
   if(this.IsGroupingTarget(neighbor)) 
    return neighbor;
   if(distance > 1)
    return this.GetGroupNodeNeighborCore(neighbor, method, --distance);
  }
  return null;
 },
 DisplayTargetImages: function(visible, position){
  var downImage = this.grid.GetArrowDragDownImage();
  if(downImage){
   var showImage = visible && position.left == position.right;
   if(showImage) {
    ASPx.SetAbsoluteX(downImage, position.left - downImage.offsetWidth / 2);
    ASPx.SetAbsoluteY(downImage, position.top - downImage.offsetHeight);
   }
   ASPx.SetElementVisibility(downImage, showImage);
  }
  var upImage = this.grid.GetArrowDragUpImage();
  if(upImage){
   var showImage = visible && position.left == position.right;
   if(showImage) {
    ASPx.SetAbsoluteX(upImage, position.left - upImage.offsetWidth / 2);
    ASPx.SetAbsoluteY(upImage, position.bottom);
   }
   ASPx.SetElementVisibility(upImage, showImage);
  }
  var rightImage = this.grid.GetArrowDragRightImage();
  if(rightImage){
   var showImage = visible && position.left != position.right;
   if(showImage) {
    ASPx.SetAbsoluteX(rightImage, position.left - rightImage.offsetWidth);
    ASPx.SetAbsoluteY(rightImage, position.top - rightImage.offsetHeight / 2);
   }
   ASPx.SetElementVisibility(rightImage, showImage);
  }
  var leftImage = this.grid.GetArrowDragLeftImage();
  if(leftImage){
   var showImage = visible && position.left != position.right;
   if(showImage) {
    ASPx.SetAbsoluteX(leftImage, position.right);
    ASPx.SetAbsoluteY(leftImage, position.top - rightImage.offsetHeight / 2);
   }
   ASPx.SetElementVisibility(leftImage, showImage);
  }
 }
});
GridViewDragHelper.Target_GetElementHeight = null;
ASPx.GridViewDragHelper = GridViewDragHelper;
ASPxClientGridBase.SelectStartHandler = function(e) {
 if(ASPx.Evt.GetEventSource(e).tagName.match(/input|select|textarea/i))
  return;
 if(e.ctrlKey || e.shiftKey) {
  ASPx.Selection.Clear();
  ASPx.Evt.PreventEventAndBubble(e);
 }
};
ASPxClientGridBase.SaveActiveElementSettings = function(grid) {
 var element = grid.GetFilterHelper().GetActiveElement();
 grid.GetFilterHelper().ResetActiveElement();
 ASPxClientGridBase.activeElementData = null;
 if (!element || !element.id || element.tagName != "INPUT" || !(ASPx.GetIsParent(grid.GetMainElement(), element) || element.id.indexOf(grid.name + "_") == 0))
  return;  
 ASPxClientGridBase.activeElementData = [ grid.name, element.id, ASPx.Selection.GetInfo(element).endPos ];
 if(typeof(Sys) != "undefined" && typeof(Sys.Application) != "undefined") {
  if(!ASPxClientGridBase.MsAjaxActiveElementHandlerAdded) {
   Sys.Application.add_load(function() { ASPxClientGridBase.RestoreActiveElementSettings(); } );
   ASPxClientGridBase.MsAjaxActiveElementHandlerAdded = true;
  }
 } 
};
ASPxClientGridBase.RestoreActiveElementSettings = function(grid) {
 var data = ASPxClientGridBase.activeElementData;
 if(!data || grid && data[0] != grid.name) return;
 var element = ASPx.GetElementById(data[1]);
 if(element) {
  window.setTimeout(function() {
   element.focus();
   ASPx.Selection.Set(element, data[2], data[2]);
  }, 0);
 }
 ASPxClientGridBase.activeElementData = null;
};
var ASPxClientGridViewCallbackCommand = {
 NextPage: "NEXTPAGE",
 PreviousPage: "PREVPAGE",
 GotoPage: "GOTOPAGE",
 SelectRows: "SELECTROWS",
 SelectRowsKey: "SELECTROWSKEY",
 Selection: "SELECTION",
 FocusedRow: "FOCUSEDROW",
 Group: "GROUP",
 UnGroup: "UNGROUP",
 Sort: "SORT",
 ColumnMove: "COLUMNMOVE",
 CollapseAll: "COLLAPSEALL",
 ExpandAll: "EXPANDALL",
 ExpandRow: "EXPANDROW",
 CollapseRow: "COLLAPSEROW",
 HideAllDetail: "HIDEALLDETAIL",
 ShowAllDetail: "SHOWALLDETAIL",
 ShowDetailRow: "SHOWDETAILROW",
 HideDetailRow: "HIDEDETAILROW",
 PagerOnClick: "PAGERONCLICK",
 ApplyFilter: "APPLYFILTER",
 ApplyColumnFilter: "APPLYCOLUMNFILTER",
 ApplyMultiColumnFilter: "APPLYMULTICOLUMNFILTER",
 ApplyHeaderColumnFilter: "APPLYHEADERCOLUMNFILTER",
 ApplySearchPanelFilter: "APPLYSEARCHPANELFILTER",
 ApplyCustomizationDialogChanges: "APPLYCUSTOMIZATIONDIALOGCHANGES",
 FilterRowMenu: "FILTERROWMENU",
 StartEdit: "STARTEDIT",
 CancelEdit: "CANCELEDIT",
 UpdateEdit: "UPDATEEDIT",
 UpdateSummaries: "UPDATESUMMARIES",
 AddNewRow: "ADDNEWROW",
 DeleteRow: "DELETEROW",
 CustomButton: "CUSTOMBUTTON",
 CustomCallback: "CUSTOMCALLBACK",
 ShowFilterControl: "SHOWFILTERCONTROL",
 CloseFilterControl: "CLOSEFILTERCONTROL",
 SetFilterEnabled: "SETFILTERENABLED",
 Refresh: "REFRESH",
 SelFieldValues: "SELFIELDVALUES",
 RowValues: "ROWVALUES",
 PageRowValues: "PAGEROWVALUES",
 FilterPopup: "FILTERPOPUP",
 ContextMenu: "CONTEXTMENU",
 Toolbar: "TOOLBAR",
 Export: "EXPORT",
 CustomValues: "CUSTOMVALUES"
};
var ASPxClientGridExportFormat = {
 Pdf: "Pdf",
 Docx: "Docx",
 Rtf: "Rtf",
 Csv: "Csv",
 Xls: "Xls",
 Xlsx: "Xlsx"
};
var ASPxClientGridBatchEditStartEditingEventArgs = ASPx.CreateClass(ASPxClientCancelEventArgs, {
 constructor: function(visibleIndex, focusedColumn, itemValues) {
  this.constructor.prototype.constructor.call(this);
  this.visibleIndex = visibleIndex;
  this.focusedColumn = focusedColumn;
  this.itemValues = ASPx.CloneObject(itemValues);
 }
});
var ASPxClientGridBatchEditEndEditingEventArgs = ASPx.CreateClass(ASPxClientCancelEventArgs, {
 constructor: function(visibleIndex, focusedColumn, itemValues) {
  this.constructor.prototype.constructor.call(this);
  this.visibleIndex = visibleIndex;
  this.focusedColumn = focusedColumn;
  this.itemValues = ASPx.CloneObject(itemValues);
 }
});
var ASPxClientGridBatchEditItemChangesCancelingEventArgs = ASPx.CreateClass(ASPxClientCancelEventArgs, {
 constructor: function(visibleIndex, itemValues) {
  this.constructor.prototype.constructor.call(this);
  this.visibleIndex = visibleIndex;
  this.itemValues = ASPx.CloneObject(itemValues);
 }
});
var ASPxClientGridBatchEditItemValidatingEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(visibleIndex, validationInfo) {
  this.constructor.prototype.constructor.call(this);
  this.visibleIndex = visibleIndex;
  this.validationInfo = ASPx.CloneObject(validationInfo);
 }
});
var ASPxClientGridBatchEditConfirmShowingEventArgs = ASPx.CreateClass(ASPxClientCancelEventArgs, {
 constructor: function(requestTriggerID) {
  this.constructor.prototype.constructor.call(this);
  this.requestTriggerID = requestTriggerID;
 }
});
var ASPxClientGridBatchEditTemplateCellFocusedEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(column) {
  this.constructor.prototype.constructor.call(this);
  this.column = column;
  this.handled = false;
 }
});
var ASPxClientGridBatchEditClientChangesEventArgs = ASPx.CreateClass(ASPxClientCancelEventArgs, {
 constructor: function(insertedValues, deletedValues, updatedValues) {
  this.constructor.prototype.constructor.call(this);
  this.insertedValues = insertedValues;
  this.deletedValues = deletedValues;
  this.updatedValues = updatedValues;
 }
});
var ASPxClientGridBatchEditItemInsertingEventArgs = ASPx.CreateClass(ASPxClientCancelEventArgs, {
 constructor: function(visibleIndex) {
  this.constructor.prototype.constructor.call(this);
  this.visibleIndex = visibleIndex;
 }
});
var ASPxClientGridBatchEditItemDeletingEventArgs = ASPx.CreateClass(ASPxClientCancelEventArgs, {
 constructor: function(visibleIndex, itemValues) {
  this.constructor.prototype.constructor.call(this);
  this.visibleIndex = visibleIndex;
  this.itemValues = itemValues;
 }
});
var ASPxClientGridClipboardCellPastingEventArgs = ASPx.CreateClass(ASPxClientCancelEventArgs, {
 constructor: function(cellInfo, oldValueInfo, newValueInfo) {
  this.constructor.prototype.constructor.call(this);
  this.cellInfo = cellInfo;
  this.oldText = oldValueInfo.text;
  this.oldValue = oldValueInfo.value;
  this.newText = newValueInfo.text;
  this.newValue = newValueInfo.value;
 }
});
var ASPxClientGridCellSelectionChangingEventArgs = ASPx.CreateClass(ASPxClientCancelEventArgs, {
 constructor: function(cellInfo, newSelectionState) {
  this.constructor.prototype.constructor.call(this);
  this.cellInfo = cellInfo;
  this.newSelectionState = newSelectionState;
 }
});
var ASPxClientGridSelectionState = {
 Unselected: 0,
 Selected: 1
};
var ASPxClientGridFocusedCellChangingEventArgs = ASPx.CreateClass(ASPxClientCancelEventArgs, {
 constructor: function(cellInfo) {
  this.constructor.prototype.constructor.call(this);
  this.cellInfo = cellInfo;
 }
});
var ASPxClientGridBatchEditApi = ASPx.CreateClass(ASPx.BatchEditApi, {
 constructor: function(owner) {
  this.constructor.prototype.constructor.call(this, owner);
  this.grid = owner;
 },
 GetColumnIndex: function(column) { return this.grid._getColumnIndexByColumnArgs(column); },
 ConvertVisibleIndexToKey: function(visibleIndex) { return this.grid.ConvertVisibleIndexToKey(visibleIndex); },
 ConvertKeyToVisibleIndex: function(key) { return this.grid.ConvertKeyToVisibleIndex(key); },
 CreateControlCellInfo: function(key, column) {
  var visibleIndex = this.grid.ConvertKeyToVisibleIndex(key);
  return this.grid.CreateUserCellInfo(visibleIndex, column, key);
 },
 SetCellValue: function(visibleIndex, column, value, displayText, cancelCellHighlighting) { 
  return this.SetCellValueByKey(this.ConvertVisibleIndexToKey(visibleIndex), column, value, displayText, cancelCellHighlighting);
 },
 SetCellValueByKey: function(key, column, value, displayText, cancelCellHighlighting) {
  return this.SetCellValueCore(key, column, value, displayText, cancelCellHighlighting);
 },
 GetCellValue: function(visibleIndex, column, initial) { return this.GetCellValueByKey(this.ConvertVisibleIndexToKey(visibleIndex), column, initial); },
 GetCellValueByKey: function(key, column, initial) { return this.GetCellValueCore(key, column, initial); },
 GetCellTextContainer: function(visibleIndex, column) { return this.GetCellTextContainerByKey(this.ConvertVisibleIndexToKey(visibleIndex), column); },
 GetCellTextContainerByKey: function(key, column) { return this.GetCellTextContainerCore(key, column); },
 HasChanges: function(visibleIndex, column) { return this.HasChangesByKey(this.ConvertVisibleIndexToKey(visibleIndex), column); },
 HasChangesByKey: function(key, column) { return this.HasChangesCore(key, column); },
 ResetChanges: function(visibleIndex, columnIndex) { this.ResetChangesByKey(this.ConvertVisibleIndexToKey(visibleIndex), columnIndex); },
 ResetChangesByKey: function(key, columnIndex) { this.ResetChangesCore(key, columnIndex); },
 StartEdit: function(visibleIndex, columnIndex) { this.StartEditByKey(this.ConvertVisibleIndexToKey(visibleIndex), columnIndex); },
 StartEditByKey: function(key, columnIndex) { this.StartEditCore(key, columnIndex); },
 ValidateItem: function(visibleIndex) { return this.ValidateItemByKey(this.ConvertVisibleIndexToKey(visibleIndex)); },
 ValidateItemByKey: function(key) { return this.ValidateRecordCore(key); },
 IsDeletedItem: function(visibleIndex) { return this.IsDeletedItemByKey(this.ConvertVisibleIndexToKey(visibleIndex)); },
 IsDeletedItemByKey: function(key) { return this.IsDeletedRecordCore(key); },
 IsNewItem: function(visibleIndex) { return this.IsNewRecordCore(this.ConvertVisibleIndexToKey(visibleIndex)); },
 AddNewItem: function() { this.AddNewRecordCore(); }, 
 DeleteItem: function(visibleIndex) { this.DeleteItemByKey(this.ConvertVisibleIndexToKey(visibleIndex)); },
 DeleteItemByKey: function(key) { this.DeleteRecordCore(key); },
 RecoverItem: function(visibleIndex) { this.RecoverItemByKey(this.ConvertVisibleIndexToKey(visibleIndex)); },
 RecoverItemByKey: function(key) { this.RecoverRecordCore(key); },
 GetItemVisibleIndices: function(includeDeleted) { 
  var currentPageKeys = this.FilterCurrentPageKeys(this.GetRecordKeys(includeDeleted));
  return currentPageKeys.map(function(key) { return this.ConvertKeyToVisibleIndex(key); }.bind(this)); 
 },
 GetInsertedItemVisibleIndices: function() { return this.FilterCurrentPageKeys(this.GetInsertedRecordKeys()); },
 GetDeletedItemVisibleIndices: function() {
  var deletedIndices = [];
  var currentPageDeletedKeys = this.FilterCurrentPageKeys(this.GetDeletedRecordKeys());
  ASPx.Data.ForEach(currentPageDeletedKeys, function(key){  
   var visibleIndex = this.ConvertKeyToVisibleIndex(key);
   if(visibleIndex > -1) deletedIndices.push(visibleIndex);
  }.aspxBind(this));
  return deletedIndices;
 },
 GetUpdatedItemVisibleIndices: function() { 
  var keys = this.FilterCurrentPageKeys(this.GetUpdatedRecordKeys());
  return keys.map(function(key) { return this.ConvertKeyToVisibleIndex(key); }.bind(this));
 },
 IsCurrentPageRecord: function(key) {
  var helper = this.GetHelper();
  return !!helper && helper.IsCurrentPageRecord(key);
 },
 FilterCurrentPageKeys: function(keys) { return keys.filter(function (key) { return this.IsCurrentPageRecord(key); }.bind(this)); },
 GetTotalSummaryValue: function(summary) {
  var helper = this.GetHelper();
  if(!helper)
   return null;
  var summaryItemIndex = summary;
  if(typeof(summary) == "string")
   summaryItemIndex = helper.GetTotalSummaryByFieldName(summary);
  return helper.GetTotalSummaryValue(summaryItemIndex);
 },
 GetGroupSummaryValue: function(groupRowVisibleIndex, summary) {
  var helper = this.GetHelper();
  if(!helper)
   return null;
  var summaryItemIndex = summary;
  if(typeof(summary) == "string")
   summaryItemIndex = helper.GetGroupSummaryByFieldName(summary);
  return helper.GetGroupSummaryValue(groupRowVisibleIndex, summaryItemIndex);
 }
});
var ASPxClientGridCellInfo = ASPx.CreateClass(null, {
 constructor: function(itemIndex, column) {
  this.itemVisibleIndex = itemIndex;
  this.column = column;
 }
});
var ASPxClientGridToolbarItemClickEventArgs = ASPx.CreateClass(ASPxClientProcessingModeEventArgs, {
 constructor: function(toolbarIndex, toolbarName, item, processOnServer) {
  this.constructor.prototype.constructor.call(this, processOnServer);
  this.toolbarIndex = toolbarIndex;
  this.toolbarName = toolbarName;
  this.item = item;
  this.usePostBack = false;
  this.handled = false;
 }
});
var ASPxClientGridBatchEditSummaryDisplayTextEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(summaryInfo, text, groupRowVisibleIndex) {
  this.constructor.prototype.constructor.call(this);
  this.isGroupSummary = summaryInfo.isGroupSummary;
  this.isTotalSummary = !summaryInfo.isGroupSummary;
  this.summaryItemIndex = summaryInfo.summaryIndex;
  this.summaryType = summaryInfo.summaryType;
  this.summaryFieldName = summaryInfo.summaryFieldName;
  this.serverValue = summaryInfo.serverValue;
  this.value = summaryInfo.value;
  this.summaryElement = summaryInfo.summaryElement;
  this.displayText = text;
  this.groupRowVisibleIndex = groupRowVisibleIndex;
 }
});
var ASPxClientGridKeyboardEventArgs = ASPx.CreateClass(ASPx.ASPxClientGridKeyboardEventArgsBase, { });
var ASPxClientSummaryItemType = {
 Sum: 0,
 Min: 1,
 Max: 2,
 Count: 3,
 Average: 4,
 Custom: 5,
 None: 6
};
ASPxClientGridBase.PostponeInitialize = function(name, info){
 var grid = ASPx.GetControlCollection().Get(name);
 if(grid) {
  grid.styleInfo = info.styleInfo;
  grid.cButtonIDs = info.commandButtonIDs;
  if(grid.batchEditClientState) {
   grid.batchEditClientState.extraCommandButtonsInfo = info.extraCommandButtonsInfo;
  }
  grid.EnsureRowKeys();
  grid.UpdateItemsStyle();
 }
};
ASPx.GHeaderMouseDown = function(name, element, e) {
 var grid = ASPx.GetControlCollection().Get(name);
 if(grid != null) 
  grid.HeaderMouseDown(element, e);
};
ASPx.GSort = function(name, columnIndex) {
 var grid = ASPx.GetControlCollection().Get(name);
 if(grid != null)  
  grid.SortBy(columnIndex);
};
ASPx.GVPopupEditFormOnInit = function(name, popup) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null)
  window.setTimeout(function() { gv.OnPopupEditFormInit(popup); }, 0);
};
ASPx.GVPagerOnClick = function(name, value) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null) 
  gv.doPagerOnClick(value);
};
ASPx.GVFilterKeyPress = function(name, element, e) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null) 
  gv.GetFilterHelper().OnColumnFilterInputKeyPress(element, e);
};
ASPx.GVFilterSpecKeyPress = function(name, element, e) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null) 
  gv.GetFilterHelper().OnColumnFilterInputSpecKeyPress(element, e);
};
ASPx.GVFilterChanged = function(name, element) {
 window.setTimeout(function() {
  var gv = ASPx.GetControlCollection().Get(name);
  var el = ASPx.GetControlCollection().Get(element.name);
  if(gv != null && el != null) 
   gv.GetFilterHelper().OnColumnFilterInputChanged(el);
 }, 0);
};
ASPx.GVFilterUserInput = function(name, element) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null)
  gv.GetFilterHelper().OnColumnFilterUserInput(element);
};
ASPx.GVShowParentRows = function(name, evt, element) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null) {
  if(element)
   gv.OnParentRowMouseEnter(element);  
  else 
   gv.OnParentRowMouseLeave(evt);
 }
};
ASPx.GTableClick = function(name, evt) {
 var g = ASPx.GetControlCollection().Get(name);
 if(g != null && g.NeedProcessTableClick(evt))
  g.mainTableClick(evt);
};
ASPx.GVTableDblClick = function(name, evt) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null && gv.NeedProcessTableClick(evt))
  gv.mainTableDblClick(evt);
};
ASPx.GVCustWindowCloseUp = function(name) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null) {
  gv.RaiseCustomizationWindowCloseUp();
 }
};
ASPx.GVApplyFilterPopup = function(name) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null)
  gv.ApplyHeaderFilterByColumn();
};
ASPx.GVShowFilterControl = function(name) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null) {
  gv.ShowFilterControl();
 }
};
ASPx.GVCloseFilterControl = function(name) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null) {
  gv.CloseFilterControl();
 }
};
ASPx.GVSetFilterEnabled = function(name, value) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null) {
  gv.SetFilterEnabled(value);
 }
};
ASPx.GVApplyFilterControl = function(name) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null)
  gv.ApplyFilterControl();
};
ASPx.GVFilterRowMenu = function(name, columnIndex, element) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null)
  gv.GetFilterHelper().FilterRowMenuButtonClick(columnIndex, element);
};
ASPx.GVFilterRowMenuClick = function(name, e) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null)
  gv.GetFilterHelper().FilterRowMenuItemClick(e.item);
};
ASPx.GCmdToolbarMenuItemClick = function(name, toolbar, e) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null)
  gv.GetToolbarHelper().OnToolbarMenuItemClick(toolbar, e);
};
ASPx.GVScheduleCommand = function(name, commandArgs, postponed, event) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null)
  gv.ScheduleUserCommand(commandArgs, postponed, ASPx.Evt.GetEventSource(event));
};
ASPx.GVHFCancelButtonClick = function(name) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null)
  gv.GetHeaderFilterPopup().Hide();
};
ASPx.GridStyleHelper = GridStyleHelper;
ASPx.GridLayoutHelper = GridLayoutHelper;
ASPx.GridViewDragHelper = GridViewDragHelper;
ASPx.GridCallbackHelper = GridCallbackHelper;
ASPx.GridSortOrder = GridSortOrder;
ASPx.ASPxClientGridExportFormat = ASPxClientGridExportFormat;
window.ASPxClientGridBase = ASPxClientGridBase;
window.ASPxClientGridColumnBase = ASPxClientGridColumnBase;
window.ASPxClientGridViewCallbackCommand = ASPxClientGridViewCallbackCommand;
window.ASPxClientGridKeyboardEventArgs = ASPxClientGridKeyboardEventArgs;
window.ASPxClientGridBatchEditStartEditingEventArgs = ASPxClientGridBatchEditStartEditingEventArgs;
window.ASPxClientGridBatchEditEndEditingEventArgs = ASPxClientGridBatchEditEndEditingEventArgs;
window.ASPxClientGridBatchEditItemChangesCancelingEventArgs = ASPxClientGridBatchEditItemChangesCancelingEventArgs;
window.ASPxClientGridBatchEditItemValidatingEventArgs = ASPxClientGridBatchEditItemValidatingEventArgs;
window.ASPxClientGridBatchEditConfirmShowingEventArgs = ASPxClientGridBatchEditConfirmShowingEventArgs;
window.ASPxClientGridBatchEditTemplateCellFocusedEventArgs = ASPxClientGridBatchEditTemplateCellFocusedEventArgs;
window.ASPxClientGridBatchEditClientChangesEventArgs = ASPxClientGridBatchEditClientChangesEventArgs;
window.ASPxClientGridBatchEditItemInsertingEventArgs = ASPxClientGridBatchEditItemInsertingEventArgs;
window.ASPxClientGridBatchEditItemDeletingEventArgs = ASPxClientGridBatchEditItemDeletingEventArgs;
window.ASPxClientGridClipboardCellPastingEventArgs = ASPxClientGridClipboardCellPastingEventArgs;
window.ASPxClientGridCellSelectionChangingEventArgs = ASPxClientGridCellSelectionChangingEventArgs;
window.ASPxClientGridFocusedCellChangingEventArgs = ASPxClientGridFocusedCellChangingEventArgs;
window.ASPxClientGridBatchEditApi = ASPxClientGridBatchEditApi;
window.ASPxClientGridCellInfo = ASPxClientGridCellInfo;
window.ASPxClientGridColumnMovingTargetPosition = ASPxClientGridColumnMovingTargetPosition;
window.ASPxClientGridToolbarItemClickEventArgs = ASPxClientGridToolbarItemClickEventArgs;
window.ASPxClientSummaryItemType = ASPxClientSummaryItemType;
window.ASPxClientGridSelectionState = ASPxClientGridSelectionState;
})();

(function() {
var GridViewLayoutHelper = ASPx.CreateClass(ASPx.GridLayoutHelper, {
 constructor: function(grid) {
  this.constructor.prototype.constructor.call(this, grid);
  this.adaptiveLayoutInfo = null;
  this.mergeIntervals = null;
  this.groupLevels = null;
  this.spannedRowIds = [
   ASPx.GridViewConsts.GroupRowID,
   ASPx.GridViewConsts.GroupRowExpID,
   ASPx.GridViewConsts.PreviewRowID,
   ASPx.GridViewConsts.DetailRowID,
   ASPx.GridViewConsts.EmptyDataRowID,
   ASPx.GridViewConsts.EditingErrorItemID
  ];
  this.spannedTemplatedRowIds = [
   ASPx.GridViewConsts.DataRowID,
   ASPx.GridViewConsts.FooterRowID,
   ASPx.GridViewConsts.GroupFooterRowID,
   ASPx.GridViewConsts.FilterRowID,
   ASPx.GridViewConsts.EditingRowID
  ];
  this.spannedTemplatedCellIds = [
   ASPx.GridViewConsts.DataRowTemplateCellID,
   ASPx.GridViewConsts.FooterRowTemplateCellID,
   ASPx.GridViewConsts.GroupFooterRowTemplateCellID,
   ASPx.GridViewConsts.FilterRowTemplateCellID,
   ASPx.GridViewConsts.EditFormTableCellID
  ];
  this.cachedHasCellMerging = null;
  this.cachedHasServerGroupLevelInfo = null;
 },
 GetSpannedRowRegexp: function() {
  if(!this.spannedRowRegExp)
   this.spannedRowRegExp = new RegExp(this.GetSpannedElementPattern(this.spannedRowIds));
  return this.spannedRowRegExp;
 },
 GetSpannedTemplatedRowRegexp: function() {
  if(!this.spannedTemplatedRowRegExp)
   this.spannedTemplatedRowRegExp = new RegExp(this.GetSpannedElementPattern(this.spannedTemplatedRowIds));
  return this.spannedTemplatedRowRegExp;
 },
 GetSpannedTemplatedCellRegexp: function() {
  if(!this.spannedTemplatedCellRegExp)
   this.spannedTemplatedCellRegExp = new RegExp(this.GetSpannedElementPattern(this.spannedTemplatedCellIds));
  return this.spannedTemplatedCellRegExp;
 },
 GetSpannedElementPattern: function(idParts) {
  return "^" + this.grid.name + "_(" + idParts.join("|") + ")(-?\\d+)?(_\\d+)?$"; 
 },
 IsSpannedRow: function(row) { 
  if(!row) return false;
  var isTemplateRow = this.GetSpannedTemplatedRowRegexp().test(row.id);
  if(isTemplateRow) {
   var cell = this.GetSpannedCell(row);
   return this.IsSpannedCell(cell);
  }
  return this.GetSpannedRowRegexp().test(row.id) || this.IsBatchChangesViewCategoryRow(row);
 },
 IsSpannedCell: function(cell) {
  return cell && this.GetSpannedTemplatedCellRegexp().test(cell.id);
 },
 IsBatchChangesViewCategoryRow: function(row) {
  return row.id.indexOf(ASPx.GridViewConsts.BatchChangesPreviewGroupRowID) > 0;
 },
 GetSpannedCell: function(row) { return this.grid.GetLastNonAdaptiveIndentCell(row); },
 IsArmatureRowRequired: function() { return this.grid.HasScrolling() || this.grid.AllowResizing(); }, 
 GetArmatureRows: function() { return this.GetAllTables().map(function(table) { return table.rows[0]; }); },
 GetColumnWidthInfo: function() { return this.grid.clientMoveColumnWidths; },
 GetColumnWidth: function(columnIndex) { 
  var info = this.GetColumnWidthInfo();
  if(!info) return null;
  var colWidth = info[columnIndex];
  return colWidth || "";
 },
 GetGridName: function() { return this.grid.name; },
 GetTotalIndentCount: function() { return this.grid.indentColumnCount; },
 GetGroupFooterVisibleIndices: function() { return this.grid.GetGroupFooterVisibleIndices(); },
 GetShowColumnHeaders: function() { return this.grid.showColumnHeaders; },
 GetShowFilterRow: function() { return !!this.grid.GetFilterRow(); },
 GetShowFooterRow: function() { return !!this.grid.GetFooterRow(); },
 GetShowEditingRow: function() { return this.IsInlineEditMode() && this.grid.GetEditingRow(); },
 IsBatchEditMode: function() { return this.grid.IsBatchEditMode(); },
 IsBatchEditPreviewChangesMode: function() { return this.grid.IsBatchChangesViewMode(); },
 IsInlineEditMode: function() { return this.grid.IsInlineEditMode(); },
 IsFixedTableLayout: function() {
  return this.grid.GetMainTable().style.tableLayout === "fixed";
 },
 HasMergedGroups: function() { return !!this.grid.hasMergedGroups; },
 GetAllTableRows: function() {
  var rows = [];
  var tables = this.GetAllTables();
  for(var i = 0; i < tables.length; i++)
   rows = rows.concat([].slice.call(tables[i].rows));
  return rows;
 },
 GetAllTables: function() {
  var grid = this.grid;
  var helper = grid.GetTableHelper();
  var headerTable = helper ? helper.GetHeaderTable() : null;
  var contentTable = grid.GetMainTable();
  var footerTable = helper ? helper.GetFooterTable() : null;
  return [ headerTable, contentTable, footerTable ].filter(function(table) { return !!table; });
 },
 GetMainElementCell: function() {
  return this.grid.GetMainElement().rows[0].cells[0];
 },
 Invalidate: function() { 
  ASPx.GridLayoutHelper.prototype.Invalidate.call(this);
  this.adaptiveLayoutInfo = null;
  this.mergeIntervals = null;
  this.groupLevels = null;
  this.cachedHasCellMerging = null;
  this.cachedHasServerGroupLevelInfo = null;
 },
 GetFixedColumnsHelper: function() { return this.grid.GetFixedColumnsHelper(); },
 GetIndentColumnCount: function() { return this.grid.indentColumnCount; },
 GetHasDetailRows: function() { return this.grid.hasDetailRows; },
 GetShowDetailButton: function() { return this.grid.showDetailButton; },
 GetHasDetailButton: function() { return this.GetHasDetailRows() && this.GetShowDetailButton(); },
 GetShowGroupButton: function() { return this.grid.showGroupButton; },
 GetHasGroupButton: function(visibleIndex) { return this.GetGroupIndentsCount() > 0 && this.GetShowGroupButton() && !this.GetHasGroupRowTemplate(visibleIndex); },
 GetAdaptiveButtonPos: function() { return this.grid.adaptiveButtonPos; },
 GetHasFilterRowTemplate: function() { return this.grid.hasFilterRowTemplate; },
 GetHasDataRowTemplate: function() { return this.grid.hasDataRowTemplate; },
 GetHasGroupRowTemplate: function(visibleIndex) {
  if(this.grid.hasGroupRowTemplate)
   return true;
  var groupLevel = this.GetGroupRowLevel(visibleIndex);
  var groupColumns = this.GetColumnHelper().GetGroupColumns();
  return groupLevel >= 0 && groupLevel < groupColumns.length ? !!groupColumns[groupLevel].hasGroupRowTemplate : false;
 },
 GetHasGroupFooterRowTemplate: function() { return this.grid.hasGroupFooterRowTemplate; },
 GetHasFooterRowTemplate: function() { return this.grid.hasFooterRowTemplate; },
 IsDataRow: function(row) {
  if(!row || !row.id) return false;
  var dataRowIdPrefix = this.grid.name + "_" + ASPx.GridViewConsts.DataRowID;
  return row.id.indexOf(dataRowIdPrefix) > -1;
 },
 IsAdaptiveCell: function(cell) {
  var adaptiveClasses = [ASPx.GridViewConsts.AdaptiveDetailDataCellCssClass, ASPx.GridViewConsts.AdaptiveDetailCommandCellCssClass];
  return adaptiveClasses.some(function(className) { return ASPx.ElementHasCssClass(cell, className); });
 }, 
 IsServiceCell: function(cell) {
  var serviceCssClasses = [ASPx.GridViewConsts.IndentCellCssClass, ASPx.GridViewConsts.HorizontalExtraCellClassName, ASPx.GridViewConsts.AdaptiveIndentCellCssClass];
  return serviceCssClasses.some(function(className) { return ASPx.ElementHasCssClass(cell, className); });
 },
 HasServerGroupLevelInfo: function() {
  if(this.cachedHasServerGroupLevelInfo === null) {
   var groupLevelInfo = this.GetGroupLevelServerInfo();
   this.cachedHasServerGroupLevelInfo = groupLevelInfo && Object.keys(groupLevelInfo).length > 0;
  }
  return this.cachedHasServerGroupLevelInfo;
 },
 HasCellMerging: function() { 
  if(this.cachedHasCellMerging === null) {
   var mergedCellInfo = this.GetMergedCellServerInfo();
   this.cachedHasCellMerging = mergedCellInfo && Object.keys(mergedCellInfo).length > 0;
  }
  return this.cachedHasCellMerging;
 },
 GetGroupLevelServerInfo: function() { return this.grid.stateObject.groupLevelState || { }; },
 SetGroupLevelServerInfo: function(info) { this.grid.stateObject.groupLevelState = info; },
 GetGroupRowLevel: function(visibleIndex) { 
  this.EnsureGroupLevelInfo();
  if(!this.groupLevels) return -1;
  var level = this.groupLevels[visibleIndex];
  return ASPx.IsExists(level) ? level : -1;
 },
 EnsureGroupLevelInfo: function() {
  if(this.groupLevels || !this.HasServerGroupLevelInfo()) 
   return;
  var serverInfo = this.GetGroupLevelServerInfo();
  this.groupLevels = { };
  for(var level in serverInfo) {
   if(!serverInfo.hasOwnProperty(level)) continue;
   level = parseInt(level);
   var intervals = serverInfo[level];
   for(var i = 0; i < intervals.length; i++) {
    var interval = intervals[i];
    var start = interval[0];
    var end = interval[1];
    for(var visibleIndex = start; visibleIndex <= end; visibleIndex++)
     this.groupLevels[visibleIndex] = level;
   }
  }
 },
 GetGroupRowColSpan: function(visibleIndex) { 
  var groupLevel = this.GetGroupRowLevel(visibleIndex);
  if(!ASPx.IsExists(groupLevel))
   return -1;
  var groupIndentsCount = this.GetGroupIndentsCount();
  var layoutWidth = this.GetLayoutWidth();
  var detailButtonWidth = this.GetHasDetailButton() ? 1 : 0;
  var groupButtonWidth = this.GetHasGroupButton(visibleIndex) ? 1 : 0;
  return layoutWidth + detailButtonWidth + groupIndentsCount - groupLevel - groupButtonWidth;
 },
 GetGroupFooterRowColSpan: function(visibleIndex) { 
  var layoutWidth = this.GetLayoutWidth();
  var groupLevel = this.GetGroupRowLevel(visibleIndex);
  var footerIndentCount = this.GetGroupIndentsCount() - groupLevel - 1;
  return layoutWidth + footerIndentCount;
 },
 GetGroupIndentsCount: function() {
  return this.HasMergedGroups() ? 1 : this.GetColumnHelper().GetGroupColumnCount();
 },
 GetIndentCellCount: function(visibleIndex, levelIndex, rowType) { 
  var result = this.GetIndentCellCountCore(visibleIndex, rowType);
  if(levelIndex === 0)
   return Math.max(0, result);
  var groupIndentsCount = this.GetGroupIndentsCount();
  var detailButtonWidth = this.GetHasDetailButton() ? 1 : 0;
  if(rowType === ASPx.GridViewRowType.Footer && groupIndentsCount > 0) 
   result--;
  switch(rowType) {
   case ASPx.GridViewRowType.Footer:
   case ASPx.GridViewRowType.Filter:
   case ASPx.GridViewRowType.Data:
   case ASPx.GridViewRowType.BatchEtalon:
   case ASPx.GridViewRowType.GroupFooter:
    if(detailButtonWidth > 0)
     result--;
    break;
   case ASPx.GridViewRowType.Header:
    result = 0;
  }
  return Math.max(0, result);
 },
 GetIndentCellCountCore: function(visibleIndex, rowType) {
  var groupButtonWidth = this.GetHasGroupButton(visibleIndex) ? 1 : 0;
  var detailButtonWidth = this.GetHasDetailButton() ? 1 : 0;
  var leftAdaptiveButtonWidth = this.GetAdaptiveButtonPos() === ASPx.GridViewAdaptiveDetailButtonPosition.Left ? 1 : 0;
  var groupIndentsCount = this.GetGroupIndentsCount();
  var groupLevel = this.GetGroupRowLevel(visibleIndex);
  var totalIndentCount = groupIndentsCount + leftAdaptiveButtonWidth + detailButtonWidth;
  switch(rowType) {
   case ASPx.GridViewRowType.Header:
   case ASPx.GridViewRowType.Filter:
   case ASPx.GridViewRowType.Data:
   case ASPx.GridViewRowType.BatchEtalon:
   case ASPx.GridViewRowType.InlineEdit:
    return totalIndentCount;
   case ASPx.GridViewRowType.Footer:
    return leftAdaptiveButtonWidth + detailButtonWidth + (groupIndentsCount > 0 ? 1 : 0);
   case ASPx.GridViewRowType.Group:
    return groupLevel + groupButtonWidth;
   case ASPx.GridViewRowType.GroupFooter:
    var footerIndentCount = groupIndentsCount - groupLevel - 1;
    var dataIndentCount = totalIndentCount - footerIndentCount;
    var footerIndentWidth = (footerIndentCount > 0 && !this.GetHasGroupFooterRowTemplate()) ? 1 : 0;
    return dataIndentCount + footerIndentWidth;
  }
  return 0;
 },
 GetRowInfo: function(rowID) {
  if(!rowID) return null;
  var pattern = "^" + this.GetGridName() + "_([a-z]+)(-?\\d+)?(_\\d+)?$";
  var regex = new RegExp(pattern, "i");
  var matches = regex.exec(rowID);
  if(!matches || matches.length !== 4)
   return null;
  var firstNumber = parseInt(matches[2]);
  var secondNumber = matches[3] !== undefined ? parseInt(matches[3].substr(1)) : NaN;
  var rowType = this.GetRowTypeByPartialID(matches[1]);
  if(rowType === null)
   return null;
  var visibleIndex = -1;
  var level = 0;
  switch(rowType) {
   case ASPx.GridViewRowType.Header:
    if(!isNaN(secondNumber)) return null;
    level = firstNumber;
    break;
   case ASPx.GridViewRowType.Filter:
   case ASPx.GridViewRowType.Footer:
   case ASPx.GridViewRowType.InlineEdit:
   case ASPx.GridViewRowType.BatchEtalon:
    if(!isNaN(firstNumber)) return null;
    level = secondNumber;
    break;
   case ASPx.GridViewRowType.Group:
    if(isNaN(firstNumber) || !isNaN(secondNumber)) return null;
    visibleIndex = firstNumber;
    break;
   case ASPx.GridViewRowType.Data:
   case ASPx.GridViewRowType.GroupFooter:
    if(isNaN(firstNumber)) return null;
    visibleIndex = firstNumber;
    level = secondNumber;
    break;
  }
  if(isNaN(level))
   level = 0;
  return { rowType: rowType, visibleIndex: visibleIndex, level: level };
 },
 GetRowTypeByPartialID: function(partialID) {
  switch(partialID) {
   case ASPx.GridViewConsts.HeaderRowID:
    return ASPx.GridViewRowType.Header;
   case ASPx.GridViewConsts.FilterRowID:
    return ASPx.GridViewRowType.Filter;
   case ASPx.GridViewConsts.DataRowID:
    return ASPx.GridViewRowType.Data;
   case ASPx.GridViewConsts.GroupRowID:
   case ASPx.GridViewConsts.GroupRowExpID:
    return ASPx.GridViewRowType.Group;
   case ASPx.GridViewConsts.GroupFooterRowID:
    return ASPx.GridViewRowType.GroupFooter;
   case ASPx.GridViewConsts.FooterRowID:
    return ASPx.GridViewRowType.Footer;
   case ASPx.GridViewConsts.EditingRowID:
    return ASPx.GridViewRowType.InlineEdit; 
   case ASPx.GridViewConsts.DataRowID + this.GetEtalonBatchRecordPostfix():
    return ASPx.GridViewRowType.BatchEtalon;
  }
  return null;
 },
 GetEtalonBatchRecordPostfix: function() { return this.grid.EtalonBatchRecordPostFix; },
 GetRowCellMap: function(info) {
  if(!info || info.rowType === ASPx.GridViewRowType.Group) 
   return null;
  var layout = null;
  if(info.rowType === ASPx.GridViewRowType.Header)
   layout = this.GetHeaderLayout();
  else 
   layout = info.rowType === ASPx.GridViewRowType.Data ? this.GetDataRowLayout(info.visibleIndex) : this.GetEtalonDataRowLayout();
  var result = { };
  var indentCount = this.GetIndentCellCount(info.visibleIndex, info.level, info.rowType);
  var level = layout[info.level];
  for(var i = 0; i < level.length; i++)
   result[level[i].columnIndex] = indentCount + i;
  return result;
 },
 CopyIndentCells: function(row, cloneRow, visibleIndex, cloneLevelIndex, rowType) {
  if(!this.IsSpannedRow(row)) {
   this.CopyIndentCellsFromLeft(row, cloneRow, visibleIndex, cloneLevelIndex, rowType);
   this.CopyIndentCellsFromRight(row, cloneRow, visibleIndex, cloneLevelIndex, rowType);
  }
 },
 CopyIndentCellsFromLeft: function(row, cloneRow, visibleIndex, cloneLevelIndex, rowType) {
  if(rowType === ASPx.GridViewRowType.Header)
   return;
  var firstRowIndentCellCount = this.GetIndentCellCount(visibleIndex, 0, rowType);
  var cloneRowIndentCellCount = this.GetIndentCellCount(visibleIndex, cloneLevelIndex, rowType);
  var indentCellIndices = ASPx.Data.Range(firstRowIndentCellCount, 0);
  var detailIndentCellIndex = this.GetDetailIndentCellIndex(visibleIndex, 0, rowType);
  var footerGroupIndentCellIndex = this.GetFooterGroupIndentCellIndex(visibleIndex, 0, rowType);
  ASPx.Data.ArrayRemove(indentCellIndices, detailIndentCellIndex);
  ASPx.Data.ArrayRemove(indentCellIndices, footerGroupIndentCellIndex);
  if(indentCellIndices.length !== cloneRowIndentCellCount)
   throw "Wrong indent cell count for clonned row";
  this.CloneIndentCells(row, cloneRow, indentCellIndices);
 },
 CopyIndentCellsFromRight: function(row, cloneRow, visibleIndex, cloneLevelIndex, rowType) { 
  var layoutWidth = this.GetLayoutWidth(rowType === ASPx.GridViewRowType.Header);
  var indentCellCount = this.GetIndentCellCount(visibleIndex, 0, rowType);
  var rightIndentCellIndex = indentCellCount + layoutWidth;
  var indentCellIndices = ASPx.Data.Range(row.cells.length - rightIndentCellIndex, rightIndentCellIndex);
  this.CloneIndentCells(row, cloneRow, indentCellIndices);
 },
 CloneIndentCells: function(row, cloneRow, cellIndices) {
  var targetElement = cloneRow.insertCell();
  for(var i = 0; i < cellIndices.length; i++) {
   var cellIndex = cellIndices[i];
   var cloneCell = row.cells[cellIndex].cloneNode();
   cloneRow.insertBefore(cloneCell, targetElement);
  }
  ASPx.RemoveElement(targetElement);
 },
 GetDetailIndentCellIndex: function(visibleIndex, levelIndex, rowType) {
  if(!this.GetHasDetailButton() || levelIndex > 0) 
   return -1;
  var indentCellCount = this.GetIndentCellCount(visibleIndex, 0, rowType);
  return indentCellCount - 1;
 },
 GetFooterGroupIndentCellIndex: function(visibleIndex, levelIndex, rowType) {
  if(rowType !== ASPx.GridViewRowType.Footer || this.GetHasFooterRowTemplate() || levelIndex > 0) 
   return -1;
  var indentCellCount = this.GetIndentCellCount(visibleIndex, 0, rowType);
  var result = indentCellCount - 1;
  if(this.GetHasDetailButton())
   result--;
  return result;
 },
 UpdateIndentCellRowSpan: function(visibleIndex, rowType) {
  var indentCellCount = this.GetIndentCellCount(visibleIndex, 0, rowType);
  var totalIndentCellIndices = ASPx.Data.Range(indentCellCount, 0);
  var detailIndentCellIndex = this.GetDetailIndentCellIndex(visibleIndex, 0, rowType);
  var footerGroupIndentCellIndex = this.GetFooterGroupIndentCellIndex(visibleIndex, 0, rowType);
  var cellIndices = rowType === ASPx.GridViewRowType.Header ? totalIndentCellIndices : [ detailIndentCellIndex, footerGroupIndentCellIndex ];
  var height = this.GetLayoutHeight(rowType === ASPx.GridViewRowType.Header);
  var row = this.GetRow(visibleIndex, 0, rowType);
  for(var i = 0; i < cellIndices.length; i++) {
   var cellIndex = cellIndices[i];
   if(cellIndex >= 0 && cellIndex < row.cells.length)
    row.cells[cellIndex].rowSpan = height;
  }
 },
 GetColumnHelper: function() { return this.grid.GetColumnHelper(); },
 GetAdaptivityHelper: function() { return this.grid.GetAdaptivityHelper(); },
 GetMergedCellServerInfo: function() { return this.grid.stateObject.mergedCellState || { }; },
 SetMergedCellServerInfo: function(info) { this.grid.stateObject.mergedCellState = info; },
 GetHeaderLayout: function() { return this.GetColumnHelper().GetHeaderLayout(); },
 GetEtalonDataRowLayout: function() { return this.GetColumnHelper().GetDataRowLayout(); },
 GetDataRowLayout: function(visibleIndex) {
  var layout = this.GetEtalonDataRowLayout();
  if(!ASPx.IsExists(visibleIndex) || !this.HasCellMerging())
   return layout;
  var newLayout = [ ];
  for(var i = 0; i < layout.length; i++) {
   var level = layout[i].slice();
   for(var j = level.length - 1; j >= 0; j--) {
    if(this.IsHiddenMergedCell(visibleIndex, level[j].columnIndex))
     level.splice(j, 1); 
   }
   newLayout.push(level);
  }
  return newLayout;
 },
 GetHasRowTemplate: function(rowType) {
  switch(rowType) {
   case ASPx.GridViewRowType.Filter:
    return this.GetHasFilterRowTemplate();
   case ASPx.GridViewRowType.Data:
    return this.GetHasDataRowTemplate();
   case ASPx.GridViewRowType.GroupFooter:
    return this.GetHasGroupFooterRowTemplate();
   case ASPx.GridViewRowType.Footer:
    return this.GetHasFooterRowTemplate();
  }
  return false;
 },
 GetRow: function(visibleIndex, levelIndex, rowType) {
  switch(rowType) {
   case ASPx.GridViewRowType.Header:
    return this.grid.GetHeaderRow(levelIndex);
   case ASPx.GridViewRowType.Filter:
    return this.grid.GetFilterRow(levelIndex);
   case ASPx.GridViewRowType.Data:
    return this.grid.GetDataRow(visibleIndex, levelIndex);
   case ASPx.GridViewRowType.GroupFooter:
    return this.grid.GetGroupFooterRow(visibleIndex, levelIndex);
   case ASPx.GridViewRowType.Footer:
    return this.grid.GetFooterRow(levelIndex);
   case ASPx.GridViewRowType.InlineEdit:
    return this.grid.GetEditingRow(this.grid, levelIndex);
   case ASPx.GridViewRowType.BatchEtalon:
    return this.grid.GetBatchEtalonRow(levelIndex);   
  }
  return null;
 },
 GetStretchedRowColsSpan: function(visibleIndex, rowType) { 
  var layoutWidth = this.GetLayoutWidth();
  switch(rowType) {
   case ASPx.GridViewRowType.Filter:
   case ASPx.GridViewRowType.Data:
   case ASPx.GridViewRowType.Footer:
    return layoutWidth;
   case ASPx.GridViewRowType.Group:
    return this.GetGroupRowColSpan(visibleIndex);
   case ASPx.GridViewRowType.GroupFooter:
    return this.GetGroupFooterRowColSpan(visibleIndex);
  }
  return 0;
 },
 GetCell: function(visibleIndex, columnIndex, rowType) {
  switch(rowType) {
   case ASPx.GridViewRowType.Header:
    return this.GetHeaderCell(columnIndex);
   case ASPx.GridViewRowType.Filter:
    return this.GetFilterCell(columnIndex);
   case ASPx.GridViewRowType.Data:
    return this.GetDataCell(visibleIndex, columnIndex);
   case ASPx.GridViewRowType.GroupFooter:
    return this.GetGroupFooterCell(visibleIndex, columnIndex);
   case ASPx.GridViewRowType.Footer:
    return this.GetFooterCell(columnIndex);
   case ASPx.GridViewRowType.BatchEtalon:
    return this.GetBatchEtalonCell(visibleIndex, columnIndex);
   case ASPx.GridViewRowType.InlineEdit:
    return this.GetInlineEditCell(columnIndex);
  }
  return null;
 },
 UpdateStretchedRowsColSpan: function() {
  var helper = this.GetFixedColumnsHelper();
  this.UpdateStretchedRowsColSpanCore(helper ? helper.hiddenColumnCount : 0);
 },
 UpdateStretchedRowsColSpanCore: function(columnsToHide) {
  var groupRowRegexp = new RegExp(this.GetSpannedElementPattern([ ASPx.GridViewConsts.GroupRowID, ASPx.GridViewConsts.GroupRowExpID ]));
  var groupFooterRegexp = new RegExp(this.GetSpannedElementPattern([ ASPx.GridViewConsts.GroupFooterRowID ]));
  var totalSpan = this.GetLayoutWidth(false);
  var stretchedRows = this.GetAllTableRows().filter(function(row) { return this.IsSpannedRow(row); }.aspxBind(this));
  for(var i = 0; i < stretchedRows.length; i++) {
   var row = stretchedRows[i];
   var cell = this.GetSpannedCell(row);
   var colSpan = totalSpan;
   if(groupRowRegexp.test(row.id)) {
    var matches = row.id.match(groupRowRegexp);
    var visibleIndex = parseInt(matches[2]);
    colSpan = this.GetStretchedRowColsSpan(visibleIndex, ASPx.GridViewRowType.Group);
   }
   if(groupFooterRegexp.test(row.id)) {
    var matches = row.id.match(groupFooterRegexp);
    var visibleIndex = parseInt(matches[2]);
    colSpan = this.GetStretchedRowColsSpan(visibleIndex, ASPx.GridViewRowType.GroupFooter);
   }
   ASPx.Attr.ChangeCellSpanCount(cell, colSpan - columnsToHide, true);
  }
 },
 GetHeaderCell: function(columnIndex) { return this.grid.GetHeader(columnIndex); },
 GetFilterCell: function(columnIndex) { return this.GetCellCore(-1, columnIndex, ASPx.GridViewRowType.Filter); },
 GetDataCell: function(visibleIndex, columnIndex) { return this.GetCellCore(visibleIndex, columnIndex, ASPx.GridViewRowType.Data); },
 GetGroupFooterCell: function(visibleIndex, columnIndex) { return this.GetCellCore(visibleIndex, columnIndex, ASPx.GridViewRowType.GroupFooter); },
 GetFooterCell: function(columnIndex) { return this.GetCellCore(-1, columnIndex, ASPx.GridViewRowType.Footer); },
 GetBatchEtalonCell: function(visibleIndex, columnIndex) { return this.GetCellCore(visibleIndex, columnIndex, ASPx.GridViewRowType.BatchEtalon); },
 GetInlineEditCell: function(columnIndex) { 
  if(this.IsInlineEditMode())
   return this.GetCellCore(-1, columnIndex, ASPx.GridViewRowType.InlineEdit); 
  return null;
 },
 GetCellCore: function(visibleIndex, columnIndex, rowType) {
  if(this.GetHasRowTemplate(rowType)) return null;
  columnIndex = parseInt(columnIndex);
  var layout = this.GetEtalonDataRowLayout();
  var pos = this.GetColumnHelper().FindColumnLayoutPos(layout, columnIndex);
  if(pos.levelIndex < 0 || pos.cellIndex < 0)
   return null;
  var cellIndex = pos.cellIndex + this.GetIndentCellCount(visibleIndex, pos.levelIndex, rowType);
  if(!this.IsBatchEditPreviewChangesMode()) {
   visibleIndex = this.ResolveMergedCellVisibleIndex(visibleIndex, columnIndex);   
   if(this.HasCellMerging() && (rowType === ASPx.GridViewRowType.Data || rowType === ASPx.GridViewRowType.BatchEtalon))
    cellIndex -= this.CalcHiddenMergedCellCount(visibleIndex, columnIndex);
  }
  var row = this.GetRow(visibleIndex, pos.levelIndex, rowType);
  return row && cellIndex >= 0 && cellIndex < row.cells.length ? row.cells[cellIndex] : null;
 },
 GetHeaderRows: function() {
  var height = this.GetShowColumnHeaders() ? this.GetLayoutHeight(true) : 0;
  return ASPx.Data.Range(height, 0).map(function(i) { return this.grid.GetHeaderRow(i); }.bind(this));
 },
 GetFilterRows: function() {
  var height = this.GetLayoutHeight(false);
  return ASPx.Data.Range(height, 0).map(function(i) { return this.grid.GetFilterRow(i); }.bind(this));
 },
 GetFooterRows: function() {
  var height = this.GetLayoutHeight(false);
  return ASPx.Data.Range(height, 0).map(function(i) { return this.grid.GetFooterRow(i); }.bind(this));
 },
 GetLayoutWidth: function(isHeader) {
  var layout = isHeader ? this.GetHeaderLayout() : this.GetEtalonDataRowLayout();
  return this.GetLayoutWidthCore(layout);
 },
 GetLayoutWidthCore: function(layout) {
  if(!layout || layout.length === 0) 
   return 0;
  var firstLevel = layout[0];
  if(!firstLevel || firstLevel.length === 0)
   return 0;
  return firstLevel.reduce(function(prevValue, node) { return prevValue + node.colSpan; }, 0);
 },
 GetLayoutHeight: function(isHeader) {
  var layout = isHeader ? this.GetHeaderLayout() : this.GetEtalonDataRowLayout();
  return this.GetLayoutHeightCore(layout);
 },
 GetLayoutHeightCore: function(layout) {
  return layout ? layout.length : 0;
 },
 GetColumnIndex: function(cellIndex, visibleIndex, levelIndex) { 
  if(!levelIndex || levelIndex < 0)
   levelIndex = 0;
  var layout = this.GetDataRowLayout(visibleIndex); 
  if(layout.length <= levelIndex)
   return -1;
  var level = layout[levelIndex];
  cellIndex -= this.GetIndentCellCount(visibleIndex, levelIndex, ASPx.GridViewRowType.Data);
  return cellIndex >= 0 && cellIndex < level.length ? level[cellIndex].columnIndex : -1;
 },
 GetDataCellIndex: function(columnIndex, visibleIndex) { 
  var layout = this.GetDataRowLayout(visibleIndex);
  var pos = this.GetColumnHelper().FindColumnLayoutPos(layout, columnIndex);
  if(pos.levelIndex < 0 || pos.cellIndex < 0)
   return -1;
  return pos.cellIndex + this.GetIndentCellCount(visibleIndex, pos.levelIndex, ASPx.GridViewRowType.Data);
 },
 IsMergedCell: function(visibleIndex, columnIndex) { 
  return !!this.GetMergeInterval(visibleIndex, columnIndex);
 },
 IsHiddenMergedCell: function(visibleIndex, columnIndex) {
  return visibleIndex !== this.ResolveMergedCellVisibleIndex(visibleIndex, columnIndex);
 },
 IsMergedCellFirstRow: function(visibleIndex, columnIndex) { 
  var interval = this.GetMergeInterval(visibleIndex, columnIndex);
  return !!interval && interval[0] === visibleIndex;
 },
 IsMergedCellLastRow: function(visibleIndex, columnIndex) { 
  var interval = this.GetMergeInterval(visibleIndex, columnIndex);
  return !!interval && interval[1] === visibleIndex;
 },
 ResolveMergedCellVisibleIndex: function(visibleIndex, columnIndex) {
  if(!this.HasCellMerging()) return visibleIndex;
  var interval = this.GetMergeInterval(visibleIndex, columnIndex);
  return interval ? interval[0] : visibleIndex;
 },
 ResolveMergedCellVisibleIndexForNavigation: function(visibleIndex, columnIndex) {
  return this.IsBatchEditPreviewChangesMode() ? visibleIndex : this.ResolveMergedCellVisibleIndex(visibleIndex, columnIndex);
 },
 CalcHiddenMergedCellCount: function(visibleIndex, columnIndex) {
  var layout = this.GetEtalonDataRowLayout();
  var pos = this.GetColumnHelper().FindColumnLayoutPos(layout, columnIndex);
  if(pos.levelIndex < 0 || pos.cellIndex < 0)
   return 0;
  var result = 0;
  var level = layout[pos.levelIndex];
  for(var j = 0; j < pos.cellIndex; j++) {
   if(this.IsHiddenMergedCell(visibleIndex, level[j].columnIndex))
    result++;
  }
  return result;
 },
 GetMergeInterval: function(visibleIndex, columnIndex) {
  this.EnsureMergeIntervals();
  var columnIntervals = this.mergeIntervals[columnIndex];
  return columnIntervals ? columnIntervals[visibleIndex] : null;
 },
 EnsureMergeIntervals: function() {
  if(this.mergeIntervals) return;
  this.mergeIntervals = { };
  var serverInfo = this.GetMergedCellServerInfo();
  for(var columnIndex in serverInfo) {
   if(!serverInfo.hasOwnProperty(columnIndex)) continue;
   var columnIntervals = { };
   var serverIntervals = serverInfo[columnIndex];
   for(var i = 0; i < serverIntervals.length; i++) {
    var interval = serverIntervals[i];
    var start = interval[0];
    var end = interval[1];
    for(var j = start; j <= end; j++)
     columnIntervals[j] = interval;
   }
   this.mergeIntervals[parseInt(columnIndex)] = columnIntervals;
  }
 },
 GetAdaptiveRowLayoutInfo: function(visibleIndex) {
  if(!this.adaptiveLayoutInfo) 
   this.adaptiveLayoutInfo = this.CreateAdaptiveLayoutInfo();
  var baseAdaptiveLayout = this.adaptiveLayoutInfo.adaptiveRowLayout || [ ];
  return { 
   dataRowLayout: this.adaptiveLayoutInfo.dataRowLayout || this.GetEtalonDataRowLayout(),
   adaptiveRowLayout : this.IsAdaptiveDetailExpanded(visibleIndex) ? baseAdaptiveLayout : [ ]
  };
 },
 CreateAdaptiveLayoutInfo: function() {
  var adaptiveHelper = this.GetAdaptivityHelper();
  if(!adaptiveHelper) 
   return { };
  var dataRowLayout = [ ];
  var adaptiveColumnIndices = [ ];
  var columnHelper = this.GetColumnHelper();
  var isFormLayoutMode = adaptiveHelper.IsAdaptiveFormLayoutMode();
  if(adaptiveHelper.IsAdaptivityMode()) {
   var hasAnyAdaptive = adaptiveHelper.HasAnyAdaptiveElement();
   if(hasAnyAdaptive) {
    dataRowLayout = [ ];
    adaptiveColumnIndices = isFormLayoutMode ? adaptiveHelper.GetAdaptiveLayoutColumnIndices() : columnHelper.GetVisibleColumnIndices();
   } else {
    dataRowLayout = this.GetEtalonDataRowLayout();
    adaptiveColumnIndices = [ ];
   }
  } else {
   var adaptiveInfo = columnHelper.GetAdaptiveRowInfo();
   dataRowLayout = adaptiveInfo.dataRowLayout;
   var columnIndicesForAdaptiveIndicesOrder = isFormLayoutMode ? adaptiveHelper.GetAdaptiveLayoutColumnIndices() : columnHelper.GetVisibleColumnIndices();
   for(var i = 0; i < columnIndicesForAdaptiveIndicesOrder.length; i++) {
    var columnIndex = columnIndicesForAdaptiveIndicesOrder[i];
    if(adaptiveInfo.adaptiveColumnIndices.indexOf(columnIndex) > -1)
     adaptiveColumnIndices.push(columnIndex);
   }
  }
  return { dataRowLayout: dataRowLayout, adaptiveRowLayout: this.CreateAdaptiveRowLayout(adaptiveColumnIndices) };
 },
 CreateAdaptiveRowLayout: function(columnIndices) {
  var layout = [ ];
  var width = this.GetAdaptiveLayoutWidth();
  var height = Math.ceil(columnIndices.length / width);
  for(var i = 0; i < height; i++) {
   var level = [ ];
   for(var j = 0; j < width; j++) {
    var index = i * width + j;
    if(index < columnIndices.length)
     level.push({ columnIndex: columnIndices[index], colSpan: 1, rowSpan: 1 });
    else
     level[level.length - 1].colSpan++;
   }
   layout.push(level);
  }
  return layout;
 },
 IsAdaptiveDetailExpanded: function(visibleIndex) {
  var helper = this.GetAdaptivityHelper();
  if(!helper || !helper.HasAnyAdaptiveElement())
   return false;
  return helper.IsAdaptivityMode() || helper.IsAdaptiveDetailExpanded(visibleIndex);
 },
 GetAdaptiveLayoutWidth: function() {
  var helper = this.GetAdaptivityHelper();
  return helper.GetAdaptiveLayoutColumnCount();
 },
 AreDataRowsHidden: function() {
  var helper = this.GetAdaptivityHelper();
  return helper && helper.IsAdaptivityMode() && helper.HasAnyAdaptiveElement();
 },
 GetAdaptiveDataCellByChild: function(dataItem, element) {
  while(element && element.tagName !== "BODY") {
   if(ASPx.ElementHasCssClass(element, ASPx.GridViewConsts.AdaptiveDetailDataCellCssClass))
    return element;
   element = element.parentNode;
  }
  return null;
 },
 IsAdaptiveDetailRow: function(row) {
  if(!row || !row.id) return false;
  var grid = this.grid;
  var indexInfo = grid.tryGetNumberFromEndOfString(row.id);
  if(!indexInfo.success) return false;
  return row.id === this.GetAdaptiveDetailRowID(indexInfo.value);
 },
 GetAdaptiveDetailRowID: function(index) { return this.grid.name + "_" + ASPx.GridViewConsts.AdaptiveDetailRowID + index.toString(); },
 UpdateOnErrorRowInserting: function(visibleIndex, errorRow) {
  var mergedIndices = this.GetErrorRowMergedColumnIndices(visibleIndex);
  if(!mergedIndices.length) return;
  this.CreateErrorRowExtraCells(errorRow, this.GetErrorRowColSpans(mergedIndices));
  this.UpdateErrorRowIntersectedMergedCells(visibleIndex, 1);
  errorRow.dxMergedCellsIntersect = true;
 },
 UpdateOnErrorRowDeleting: function(visibleIndex, errorRow) {
  if(errorRow && errorRow.dxMergedCellsIntersect)
   this.UpdateErrorRowIntersectedMergedCells(visibleIndex, -1);
 },
 GetErrorRowMergedColumnIndices: function(visibleIndex) {
  return this.GetColumnHelper().GetVisibleColumnIndices().filter(function(columnIndex) { 
   return this.IsMergedCell(visibleIndex, columnIndex) && !this.IsMergedCellLastRow(visibleIndex, columnIndex); 
  }.bind(this));
 },
 CreateErrorRowExtraCells: function(errorRow, colSpans) {
  var errorRowCells = Array(colSpans.length);
  errorRowCells[0] = this.grid.GetLastNonAdaptiveIndentCell(errorRow);
  for(var i = 0; i < colSpans.length; i++) {
   if(!errorRowCells[i]) {
    var td = ASPx.CreateHtmlElement("TD", { className: ASPx.GridViewConsts.GridViewMarkerCssClass });
    ASPx.InsertElementAfter(td, errorRowCells[i - 1]);
    errorRowCells[i] = td;
   }
   ASPx.Attr.ChangeCellSpanCount(errorRowCells[i], colSpans[i], true);
  }
 },
 GetErrorRowColSpans: function(mergedIndices) {
  var columnIndices = this.GetColumnHelper().GetVisibleColumnIndices();
  var colSpans = [ ];
  for(var i = 0; i < columnIndices.length; i++) { 
   var isMergedCell = mergedIndices.indexOf(columnIndices[i]) > -1;
   if(isMergedCell || colSpans.length === 0)
    colSpans.push(0);
   if(!isMergedCell)
    ++colSpans[colSpans.length - 1];
  }
  return colSpans.filter(function(span) { return span > 0; });
 },
 UpdateErrorRowIntersectedMergedCells: function(visibleIndex, inc) {
  var indices = this.GetErrorRowMergedColumnIndices(visibleIndex);
  for(var i = 0; i <indices.length; i++) {
   var mergedCell = this.GetDataCell(visibleIndex, indices[i]);
   ASPx.Attr.ChangeCellSpanCount(mergedCell, mergedCell.rowSpan + inc);
  }
 },
 GetDataCellByChild: function(element) {
  return ASPx.GetParent(element, function(item) {
   if(this.IsServiceCell(item))
    return false;
   return this.IsAdaptiveCell(item) || this.IsDataRow(item.parentNode);
  }.aspxBind(this)); 
 },
 GetBatchOtherPagesChangedRecordVisibleIndices: function() { return this.grid.GetBatchOtherPagesChangedRecordVisibleIndices(); },
 GetGridElementsToChangeVisibilityInBatchChangesView: function() {
  var grid = this.grid;   
  var mainElement = grid.GetMainElement();
  var elements = [ ];
  elements.push(ASPx.GetNodesByPartialClassName(mainElement, "dxgvPagerBottomPanel")[0]);
  elements.push(ASPx.GetNodesByPartialClassName(mainElement, "dxgvPagerTopPanel")[0]);
  elements.push(ASPx.GetNodesByPartialClassName(mainElement, ASPx.GridViewConsts.GroupPanelCssClass)[0]);
  elements.push(grid.GetChildElement("DXSearchPanel"));
  elements.push(grid.GetChildElement("DXFilterBar"));
  elements.push(grid.GetAdaptiveGroupPanel());
  elements.push(grid.GetAdaptiveHeaderPanel());
  elements.push(grid.GetAdaptiveFooterPanel());
  elements.push(grid.GetAdaptiveFooterPanel());
  elements = elements.concat(this.GetRowsToChangeVisibilityInBatchChangesView());
  elements = elements.concat(this.GetIndentCellsToChangeVisibilityInBatchChangesView());
  var commandColumnIndices = this.GetColumnHelper().GetVisibleColumnIndices().filter(function(columnIndex) { return grid.GetColumn(columnIndex).isCommandColumn; });
  var selectAllElements = commandColumnIndices.map(function(columnIndex) {
   var el = grid.GetSelectAllBtn(columnIndex);
   return el && el.parentNode.parentNode; 
  });
  elements = elements.concat(selectAllElements);
  var filterHelper = grid.GetFilterHelper();
  if(filterHelper)
   elements = elements.concat(filterHelper.GetHeaderFilterButtons().map(function(b) { return b && b.parentNode; })); 
  var scrollHelper = grid.GetScrollHelper();
  if(scrollHelper) {
   elements.push(scrollHelper.GetVirtualScrollMarginDiv());
   elements.push(scrollHelper.GetVirtualScrollMarginDiv(true));
  }  
  return elements.filter(function(el) { return !!el; });
 },
 GetIndentCellsToChangeVisibilityInBatchChangesView: function () {
  var cells = [ ];
  var grid = this.grid;  
  var headerRow = grid.GetHeaderRow(0);
  if(headerRow) {
   var groupIndentsCount = this.GetGroupIndentsCount();
   var detailButtonWidth = this.GetHasDetailButton() ? 1 : 0;
   var indentCount = groupIndentsCount + detailButtonWidth;
   for(var i = 0; i < indentCount; i++)
    cells.push(headerRow.cells[i]);
   }  
  return cells;
 },
 GetRowsToChangeVisibilityInBatchChangesView: function() {
  var rows = [ ];
  var grid = this.grid;
  rows = rows.concat(this.GetFilterRows());
  var indices = grid.GetCurrentPageIndices();
  var batchHelper = grid.GetBatchEditHelper();
  indices = indices.concat(grid.useEndlessPaging ? batchHelper.GetInsertedRecordKeys() : batchHelper.GetCurrentPageInsertedKeys());
  for(var i = 0; i < indices.length; i++) {
   var visibleIndex = indices[i];
   rows = rows.concat(grid.GetBandedDataRows(visibleIndex));
   var extraRows = [ grid.GetGroupRow(visibleIndex), grid.GetPreviewRow(visibleIndex), grid.GetDetailRow(visibleIndex), grid.GetAdaptiveDetailRow(visibleIndex), grid.GetEditingErrorItem(null, visibleIndex) ];
   rows = rows.concat(extraRows);
  }
  var pagerEmptyRows = ASPx.Data.CollectionToArray(grid.GetMainTable().getElementsByClassName(ASPx.GridViewConsts.EmptyPagerRowCssClass));
  rows = rows.concat(pagerEmptyRows);
  var levelCount = this.GetLayoutHeight();
  for(var i = 0; i <= levelCount; i++) {
   var groupFooterVisibleIndices = grid.GetGroupFooterVisibleIndices();
   for(var j = 0; j < groupFooterVisibleIndices.length; j++)
    rows.push(grid.GetGroupFooterRow(groupFooterVisibleIndices[j], i));
   rows.push(grid.GetFooterRow(i));
  }
  return rows;
 }
});
ASPx.GridViewLayoutHelper = GridViewLayoutHelper;
})();
(function() {
var GridViewFilterHelper = ASPx.CreateClass(ASPx.GridFilterHelper, {
 constructor: function(grid) {
  this.constructor.prototype.constructor.call(this, grid);
  this.initialFilterRowState = { };
  this.filterKeyPressTimerId = -1;
  this.filterKeyPressEditor = null;
  this.preparedToCallbackFilterValue = undefined;
  this.preparedFilterValueClearDelay = 150;
  this.filterRowMenuColumnIndex = -1;
  this.currentCheckedItemIndex = -1;
 },
 GetCustDialogHelper: function() { return this.grid.GetCustDialogHelper(); },
 GetBatchEditHelper: function() { return this.grid.GetBatchEditHelper(); },
 GetAutoFilterDelay: function() { return this.grid.autoFilterDelay; },
 IsMultiColumnAutoFilter: function() { return this.grid.allowMultiColumnAutoFilter; },
 GetFilterRowMenu: function() { return this.grid.GetFilterRowMenu(); },
 GetAutoFilterEditor: function(columnIndex) { return this.grid.GetAutoFilterEditor(columnIndex); },
 GetFilterConditionState: function() { return this.grid.filterRowConditions; },
 AutoFilterByColumnCore: function(columnIndex, editorValue) { 
  this.grid.AutoFilterByColumn(columnIndex, editorValue); 
 },
 AutoFilterByMultipleColumns: function(args) {
  this.grid.gridCallBack([ASPxClientGridViewCallbackCommand.ApplyMultiColumnFilter].concat(args));
 },
 SendCallbackToChangeFilterCondition: function(args) {
  this.grid.gridCallBack([ASPxClientGridViewCallbackCommand.FilterRowMenu].concat(args));
 },
 GetColumnIndicesForFilterRow: function() { 
  var columnHelper = this.grid.GetColumnHelper();
  if(this.GetCustDialogHelper())
   return columnHelper.GetAllColumns().map(function(c) { return c.index; });
  return columnHelper.GetVisibleColumnIndices();
 },
 GetFilterCondition: function(columnIndex) { 
  var state = this.GetFilterConditionState();
  return state ? state[columnIndex] : "";
 },
 SetFilterCondition: function(columnIndex, value) { 
  var state = this.GetFilterConditionState();
  if(state)
   state[columnIndex] = value; 
 },
 IsCustDialogVisible: function() {
  var helper = this.GetCustDialogHelper();
  return helper && helper.IsDialogVisible();
 },
 AutoFilterByColumn: function(columnIndex, editorValue) { 
  if(!this.IsCustDialogVisible())
   this.AutoFilterByColumnCore(columnIndex, editorValue); 
 },
 IsBatchUpdateConfirmLocked: function() {
  var batchHelper = this.GetBatchEditHelper();
  return batchHelper && batchHelper.IsUpdateConfirmLocked();
 },
 ApplyColumnAutoFilterCore: function(editor) {
  if(this.IsFilterLocked()) 
   return;
  this.ClearAutoFilterInputTimer();
  var editorValue = editor.GetValueString();
  if(this.IsBatchUpdateConfirmLocked() && this.preparedToCallbackFilterValue != "undefined"  && editorValue === this.preparedToCallbackFilterValue) 
   return;
  var columnIndex = this.ResolveColumnIndex(editor.name);
  if(columnIndex < 0 || !this.IsColumnAutoFilterChanged(columnIndex)) 
   return;
  this.SaveFilterEditorActiveElement(editor);
  this.preparedToCallbackFilterValue = editorValue;
  window.setTimeout(function() { delete this.preparedToCallbackFilterValue;  }.bind(this), this.preparedFilterValueClearDelay);
  this.AutoFilterByColumn(columnIndex, editorValue);
  this.OnChange(columnIndex);
 },
 ApplyMultiColumnAutoFilter: function(editor) {
  if(this.IsFilterLocked()) 
   return;
  this.SaveFilterEditorActiveElement(editor);
  var args = this.SerializeChangedAutoFilterValues();
  if(args.length > 0)
   this.AutoFilterByMultipleColumns(args);
  var name = editor ? editor.name : "";
  this.OnChange(this.ResolveColumnIndex(name));
 },
 SerializeChangedAutoFilterValues: function() {
  var result = [ ];
  var changedValues = this.GetChangedAutoFilterValues();
  for(var columnIndex in changedValues) {
   if(!changedValues.hasOwnProperty(columnIndex)) continue;
   result.push(columnIndex);
   result.push(changedValues[columnIndex].value);
   result.push(changedValues[columnIndex].filterCondition);
  }
  return result;
 },
 SaveFilterEditorsState: function() {
  ASPx.GridFilterHelper.prototype.SaveFilterEditorsState.call(this);
  this.initialFilterRowState = this.GetFilterRowState();
 },
 ClearFilterEditorsState: function() { 
  ASPx.GridFilterHelper.prototype.ClearFilterEditorsState.call(this);
  this.initialFilterRowState = { };
 },
 GetFilterRowState: function() {
  var indices = this.GetColumnIndicesForFilterRow();
  return ASPx.Data.ArrayToHash(indices, function(columnIndex) { return columnIndex; }, function(columnIndex) { 
   var editor = this.GetAutoFilterEditor(columnIndex);
   return {
    value: editor && editor.GetMainElement() ? editor.GetValueString() : "",
    filterCondition: this.GetFilterCondition(columnIndex)
   };
  }.bind(this));
 },
 GetChangedAutoFilterValues: function() {
  var result = { };
  var currentFilterRowState = this.GetFilterRowState();
  for(var columnIndex in this.initialFilterRowState) {
   if(!this.initialFilterRowState.hasOwnProperty(columnIndex)) continue;
   columnIndex = parseInt(columnIndex);
   var initialState = this.initialFilterRowState[columnIndex];
   var currentState = currentFilterRowState[columnIndex];
   if(currentState.value !== initialState.value || currentState.filterCondition !== initialState.filterCondition)
    result[columnIndex] = { filterCondition: currentState.filterCondition, value: currentState.value !== null ? currentState.value : "" };
  }
  return result;
 },
 OnColumnFilterInputKeyPress: function(editor, e) {
  if(this.OnColumnFilterInputSpecKeyPress(editor, e))
   return;
  this.ClearAutoFilterInputTimer();
  this.CreateAutoFilterTimer(editor);
  this.OnChange(this.ResolveColumnIndex(editor.name));
 },
 OnColumnFilterInputSpecKeyPress: function(editor, e) {
  if(e.htmlEvent) 
   e = e.htmlEvent;
  if(e.keyCode == ASPx.Key.Tab) 
   return true;
  if(e.keyCode == ASPx.Key.Enter) {
   ASPx.Evt.PreventEventAndBubble(e);
   window.setTimeout(function() {
    editor.Validate();
    if(this.IsMultiColumnAutoFilter())
     this.ApplyMultiColumnAutoFilter(editor);
    else
     this.ApplyColumnAutoFilterCore(editor);
   }.bind(this), 0);
   return true;
  }
  if(e.keyCode == ASPx.Key.Delete && e.ctrlKey) {
   ASPx.Evt.PreventEventAndBubble(e);
   window.setTimeout(function() {
    editor.SetValue(null);
    if(!this.IsMultiColumnAutoFilter())
     this.ApplyColumnAutoFilterCore(editor);
   }.bind(this), 0);
   return true;
  }
  return false;
 },
 OnFilterKeyPressTick: function() {
  if(this.filterKeyPressEditor && this.IsValidInstance())
   this.ApplyColumnAutoFilterCore(this.filterKeyPressEditor);
 },
 OnColumnFilterInputChanged: function(editor) {
  this.ApplyColumnAutoFilterCore(editor);
 },
 OnColumnFilterUserInput: function(editor) {
  if(this.IsAutoFilterTimerActive()) return;
  this.ColumnFilterOnPaste(editor);
 },
 ColumnFilterOnPaste: function(editor) {
  this.EnsureEditorRawValue(editor);
  this.CreateAutoFilterTimer(editor);
 },
 IsAutoFilterTimerActive: function() {
  return this.filterKeyPressTimerId !== -1;
 },
 CreateAutoFilterTimer: function(editor) {
  this.filterKeyPressEditor = editor;
  this.filterKeyPressTimerId = window.setTimeout(this.OnFilterKeyPressTick.bind(this), this.GetAutoFilterDelay());
 },
 ClearAutoFilterInputTimer: function() {
  this.filterKeyPressTimerId = ASPx.Timer.ClearTimer(this.filterKeyPressTimerId);
 },
 OnChange: function(columnIndex) {
  if(this.IsCustDialogVisible())
   window.setTimeout(function() { this.GetCustDialogHelper().ProcessFilterChange(columnIndex); }.bind(this), 0);
 },
 ClearColumnFilter: function(columnIndex) {
  this.ClearColumnAutoFilter(columnIndex);
  this.ClearColumnHeaderFilter(columnIndex);
  this.OnChange(columnIndex);
 },
 ClearColumnAutoFilter: function(columnIndex) {
  var editor = this.GetAutoFilterEditor(columnIndex);
  if(editor)
   editor.SetValue(null);   
 },
 ClearColumnHeaderFilter: function(columnIndex) {
  var column = this.GetColumn(columnIndex);
  var hfMode = column.HFMode;
  var listBox = this.GetListBox(columnIndex);
  if(listBox) {
   listBox.UnselectAll();
   if(hfMode ===  ASPx.GridHeaderFilterMode.List)
    listBox.SelectIndex(0);
  }
  if(hfMode === ASPx.GridHeaderFilterMode.CheckedList) {
   var checkbox = this.GetSelectAllCheckBox(columnIndex); 
   if(checkbox)
    checkbox.SetCheckState(ASPx.CheckBoxCheckState.Unchecked);
  }
  if(hfMode === ASPx.GridHeaderFilterMode.DateRangePicker) {
   var dateEdit_From = this.GetDateEdit_From(columnIndex);
   if(dateEdit_From) 
    dateEdit_From.SetValue(null);
   var dateEdit_To = this.GetDateEdit_To(columnIndex);
   if(dateEdit_To)
    dateEdit_To.SetValue(null);
  }
  if(hfMode === ASPx.GridHeaderFilterMode.DateRangeCalendar) {
   var calendar = this.GetCalendar(columnIndex);
   if(calendar)
    calendar.SetValue(null);
  }
 },
 HasFilter: function(columnIndex) {
  return this.HasHeaderFilter(columnIndex) || this.HasAutoFilter(columnIndex);
 },
 HasHeaderFilter: function(columnIndex) {
  var state = this.GetHeaderFilterState(columnIndex);
  var column = this.GetColumn(columnIndex);
  if(!state || !column)
   return false;
  if(column.HFMode === ASPx.GridHeaderFilterMode.List && state.listBoxSelectedIndices[0] === 0)
   return false;
  var hasDateRange = state.pickerRange && (state.pickerRange.start || state.pickerRange.end);
  var hasSelectedDates = state.calendarDates && state.calendarDates.length > 0;
  return state.listBoxSelectedIndices.length > 0 || hasDateRange || hasSelectedDates;  
 },
 HasAutoFilter: function(columnIndex) {
  var editor = this.GetAutoFilterEditor(columnIndex);   
  var value = editor && editor.GetMainElement() && editor.GetValueString();
  return !!value;
 },
 IsColumnAutoFilterChanged: function(columnIndex) {   
  var editor = this.GetAutoFilterEditor(columnIndex);
  var initState = this.initialFilterRowState[columnIndex];
  if (!editor || !editor.GetMainElement() || !initState) 
   return false;
  var currentValue = editor.GetValueString();
  return initState.value !== currentValue || initState.filterCondition !== this.GetFilterCondition(columnIndex);
 },
 FilterRowMenuButtonClick: function(columnIndex, element) {
  var menu = this.GetFilterRowMenu();
  if(!menu) return;
  var column = this.GetColumn(columnIndex);
  if(!column) return;
  var checkedItemIndex;
  for(var i = menu.GetItemCount() - 1; i >= 0; i--) {
   var item = menu.GetItem(i);
   var isItemChecked = item.name.substr(0, item.name.indexOf("|")) == this.GetFilterCondition(columnIndex);
   item.SetChecked(isItemChecked);
   if(isItemChecked)
    checkedItemIndex = item.index;
   item.SetVisible(this.GetFilterRowMenuItemVisible(item, column));
  }
  menu.ShowAtElement(element);
  this.filterRowMenuColumnIndex = columnIndex;
  this.currentCheckedItemIndex = checkedItemIndex;
  if(this.GetEnableAccessibility())
   menu.accessibleFocusElement = element;
 },
 FilterRowMenuItemClick: function(item) { 
  var itemName = item.name.substr(0, item.name.indexOf("|"));
  item.menu.ProcessLostFocus();
  if(this.currentCheckedItemIndex === item.index)
   return;
  if(this.IsMultiColumnAutoFilter() || this.IsCustDialogVisible()) {
   this.SetFilterCondition(this.filterRowMenuColumnIndex, parseInt(itemName));
   this.OnChange(this.filterRowMenuColumnIndex);
  } else {
   var args = [this.filterRowMenuColumnIndex, itemName];
   if(!this.IsCustDialogVisible())
    this.SendCallbackToChangeFilterCondition(args);
  }
 },
 GetFilterRowMenuItemVisible: function(item, column) {
  if(column.filterRowTypeKind) {
   var visible = item.name.indexOf(column.filterRowTypeKind) > -1;
   if(!visible && column.showFilterMenuLikeItem)
    return item.name.indexOf("L") > -1;
   return visible;
  }
  return false;
 },
 SetHeaderFilterPopupHtml: function(htmlObj, columnIndex) {
  var processedByCustDialogHelper = false;
  if(this.IsCustDialogVisible())
   processedByCustDialogHelper = this.GetCustDialogHelper().ProcessHeaderFilterCallback(htmlObj, columnIndex);
  if(!processedByCustDialogHelper)
   ASPx.GridFilterHelper.prototype.SetHeaderFilterPopupHtml.call(this, htmlObj, columnIndex);
 },
 OnListBoxSelectionChanged: function(listBox) {
  ASPx.GridFilterHelper.prototype.OnListBoxSelectionChanged.call(this, listBox);
  this.OnChange(listBox.gvColumn.index);
 },
 OnSelectAllCheckedChanged: function(checkBox) {
  ASPx.GridFilterHelper.prototype.OnSelectAllCheckedChanged.call(this, checkBox);
  this.OnChange(checkBox.gvColumn.index);
 },
 OnEditChanged: function(editor) {
  ASPx.GridFilterHelper.prototype.OnEditChanged.call(this, editor);
  this.OnChange(editor.gvColumn.index);
 },
 RequireApplyHeaderFilterNow: function(mode, columnIndex) {
  if(this.IsCustDialogVisible())
   return false;
  return ASPx.GridFilterHelper.prototype.RequireApplyHeaderFilterNow.call(this, mode, columnIndex);
 },
 OnControlsInitialized: function() {
  ASPx.GridFilterHelper.prototype.OnControlsInitialized.call(this);
  if(this.IsCustDialogVisible())
   this.GetCustDialogHelper().ClearHeaderFilterAfterLoadValues();
 },
 AdjustHeaderFilterListBox: function(column) {
  if(this.IsCustDialogVisible() && this.RequireShowHeaderFilterListBoxScrollbar(column)) {
   var listBox = this.GetListBox(column.index);
   var listBoxMainElement = listBox && listBox.GetMainElement();
   if(listBoxMainElement) {
    ASPx.SetStyles(listBoxMainElement, { minHeight: listBoxMainElement.parentNode.offsetHeight });
    listBox.AdjustControl();
   }
  } else
   ASPx.GridFilterHelper.prototype.AdjustHeaderFilterListBox.call(this, column);
 }
});
ASPx.GridViewFilterHelper = GridViewFilterHelper;
})();

(function() {
var GridViewContextMenuItemType = {
 FullExpand: "FullExpand",
 FullCollapse: "FullCollapse",
 SortAscending: "SortAscending",
 SortDescending: "SortDescending",
 ClearSorting: "ClearSorting",
 ShowFilterBuilder: "ShowFilterEditor",
 ShowFilterRow: "ShowFilterRow",
 ClearFilter: "ClearFilter",
 ShowFilterRowMenu: "ShowFilterRowMenu",
 GroupByColumn: "GroupByColumn",
 UngroupColumn: "UngroupColumn",
 ClearGrouping: "ClearGrouping",
 ShowGroupPanel: "ShowGroupPanel",
 ShowSearchPanel: "ShowSearchPanel",
 ShowColumn: "ShowColumn",
 HideColumn: "HideColumn",
 ShowCustomizationDialog: "ShowCustomizationDialog",
 ShowCustomizationWindow: "ShowCustomizationWindow",
 ShowFooter: "ShowFooter",
 ExpandRow: "ExpandRow",
 CollapseRow: "CollapseRow",
 ExpandDetailRow: "ExpandDetailRow",
 CollapseDetailRow: "CollapseDetailRow",
 NewRow: "NewRow",
 EditRow: "EditRow",
 DeleteRow: "DeleteRow",
 Refresh: "Refresh",
 CopyToClipboard: "CopyToClipboard",
 PasteFromClipboard: "PasteFromClipboard",
 SummarySum: "SummarySum",
 SummaryMin: "SummaryMin",
 SummaryMax: "SummaryMax",
 SummaryAverage: "SummaryAverage",
 SummaryCount: "SummaryCount",
 SummaryNone: "SummaryNone",
 GroupSummarySum: "GroupSummarySum",
 GroupSummaryMin: "GroupSummaryMin",
 GroupSummaryMax: "GroupSummaryMax",
 GroupSummaryAverage: "GroupSummaryAverage",
 GroupSummaryCount: "GroupSummaryCount",
 GroupSummaryNone: "GroupSummaryNone",
 CustomItem: "CustomItem"
};
var CONTEXT_MENU_CLIENT_STATE_KEY = "contextMenu";
var GridViewContextMenuHelper = ASPx.CreateClass(ASPx.GridCommandMenuHelper, {
 constructor: function(grid) {
  this.constructor.prototype.constructor.call(this, ASPx.ASPxClientGridExportFormat);
  this.grid = grid;
  this.emptyElementIndex = -1;
  this.sourceContextMenuRow = null;
  this.activeContextMenu = null;
  this.contextMenuActivating = false;
  this.clickedMenuItem = null;
 },
 GetGridName: function() { return this.grid.name; },
 GetCustWindowSuffix: function() { return this.grid.CustomizationWindowSuffix; }, 
 IsDetailGrid: function() { return this.grid.IsDetailGrid(); },
 GetGroupPanelContextMenu: function() { return this.grid.GetGroupPanelContextMenu(); },
 GetColumnContextMenu: function() { return this.grid.GetColumnContextMenu(); },
 GetRowContextMenu: function() { return this.grid.GetRowContextMenu(); },
 GetFooterContextMenu: function() { return this.grid.GetFooterContextMenu(); },
 GetGroupFooterContextMenu: function() { return this.grid.GetGroupFooterContextMenu(); },
 GetRowHotTrackStyle: function() { return this.rowHotTrackStyle; },
 GetEnableAccessibility: function() { return this.grid.accessibilityCompliant; },
 IsCustWindowVisible: function() { return this.grid.IsCustomizationWindowVisible(); },
 HasContextMenuEventHandler: function() { return !this.grid.ContextMenu.IsEmpty(); },
 RaiseContextMenu: function(objectType, index, htmlEvent, menu, showBrowserMenu) { 
  return this.grid.RaiseContextMenu(objectType, index, htmlEvent, menu, showBrowserMenu);
 },
 RaiseContextMenuItemClick: function(e, itemInfo) {
  return this.grid.RaiseContextMenuItemClick(e, itemInfo);
 },
 HasAnyContextMenu: function() {
  return this.GetGroupPanelContextMenu() || this.GetColumnContextMenu() || this.GetRowContextMenu() || this.GetFooterContextMenu();
 },
 SendContextMenuCallback: function(args) {
  return this.grid.gridCallBack([ ASPxClientGridViewCallbackCommand.ContextMenu ].concat(args));
 },
 SendContextMenuPostBack: function(args) {
  return this.grid.gridPostBack([ ASPxClientGridViewCallbackCommand.ContextMenu ].concat(args));
 },
 OnAfterCallack: function() { 
  this.ResetState();
 },
 GetCallbackState: function() {
  if(!this.clickedMenuItem)
   return "";
  var menu = this.clickedMenuItem.menu;
  var elementInfo = menu.elementInfo;
  return menu.cpType + "," + this.clickedMenuItem.indexPath + "," + elementInfo.index;
 },
 SaveClientState: function() {
  this.SetClientStateValue(this.GetCallbackState());
 },
 ResetState: function() {
  this.clickedMenuItem = null;
  this.SetClientStateValue(null);
 },
 SetClientStateValue: function(value) {
  this.grid.stateObject[CONTEXT_MENU_CLIENT_STATE_KEY] = value;
 },
 OnContextMenuClick: function(e) {
  var showDefaultMenu = ASPx.EventStorage.getInstance().Load(e);
  if(showDefaultMenu)
   return showDefaultMenu;
  if(this.IsDetailGrid())
   ASPx.EventStorage.getInstance().Save(e, true);
  var args = this.GetContextMenuArgs(e);
  if(!args.objectType && !this.HasAnyContextMenu())
   return true;
  var menu = this.GetPreparedContextMenu(args);
  var showBrowserMenu = !menu && !this.HasContextMenuEventHandler();
  showBrowserMenu = this.RaiseContextMenu(args.objectType, args.index, e, menu, showBrowserMenu);
  if(menu && !showBrowserMenu) {
   if(this.GetEnableAccessibility())
    menu.accessibleFocusElement = ASPx.Evt.GetEventSource(e);
   this.ShowContextMenu(e, menu);
   return false;
  }
  return showBrowserMenu;
 },
 ShowContextMenu: function(mouseEvent, menu) {
  this.contextMenuActivating = true;
  this.HandleContextMenuHover(menu, mouseEvent);
  menu.ShowInternal(mouseEvent);
 },
 HandleContextMenuHover: function(menu, mouseEvent) {
  menu.handler = menu.handler || this.OnContextMenuCloseUp.bind(this);
  menu.CloseUp.AddHandler(menu.handler);
  if(!this.GetRowHotTrackStyle())
   return;
  this.activeContextMenu = menu;
  this.sourceContextMenuRow = this.grid.getItemByHtmlEvent(mouseEvent);
  ASPx.AddAfterClearHoverState(function(source, args) { this.OnClearHoverState(args.item, args.element, args.toElement); }.bind(this));
 },
 OnClearHoverState: function(hoverItem, hoverElement, newHoverElement) {
  if(!this.activeContextMenu || !this.activeContextMenu.GetVisible() || !this.sourceContextMenuRow) {
   ASPx.RemoveClassNameFromElement(hoverElement, this.GetRowHotTrackStyle()[0]);
   return;
  }
  if(this.sourceContextMenuRow.id === hoverElement.id) {
   var newHoverItem = hoverItem.Clone();
   newHoverItem.Apply(hoverElement);
  }
 },
 OnContextMenuCloseUp: function(e) {
  this.contextMenuActivating = false;
  if(!this.sourceContextMenuRow || !this.activeContextMenu || this.activeContextMenu.GetVisible()) return;
  var stateController = ASPx.GetStateController();
  if(!stateController) return;
  if(stateController.currentHoverElement !== this.sourceContextMenuRow)
   stateController.DoClearHoverState(this.sourceContextMenuRow, null);
  this.sourceContextMenuRow = null;
  this.activeContextMenu = null;
 },
 GetPreparedContextMenu: function(args) { 
  var menu = null;
  switch(args.objectType) {
   case "grouppanel":
    menu = this.GetGroupPanelContextMenu();
    break;
   case "header":
   case "emptyheader":
    menu = this.GetColumnContextMenu();
    break;
   case "row":
   case "grouprow":
   case "emptyrow":
    menu = this.GetRowContextMenu();
    break;
   case "footer":
    menu = this.GetFooterContextMenu();
    break;
   case "groupfooter":
    menu = this.GetGroupFooterContextMenu();
    break;
  }
  if(menu)
   this.ActivateContextMenuItems(menu, args);
  return menu;
 },
 GetContextMenuArgs: function(e) { 
  var args = this.GetContextMenuArgsCore(e);
  if(args.objectType || !this.grid.HasBandedDataRows())
   return args;
  var index = -1;
  var grid = this.grid;
  var dataRowIdPrefix = grid.name + "_" + ASPx.GridViewConsts.DataRowID;
  var isBandedDataRowFound = !!ASPx.GetParent(ASPx.Evt.GetEventSource(e), function(element){
   index = grid.getItemIndex(element.id);
   var level = grid.GetBandedDataRowLevelByID(element.id);
   return element.id == dataRowIdPrefix + index + "_" + level;
  });
  if(isBandedDataRowFound)
   args = { objectType: "row", index: index };
  return args;
 },
 GetContextMenuArgsCore: function(e) { 
  var objectTypes = this.GetObjectTypes();
  var src = ASPx.Evt.GetEventSource(e);
  var element = src;
  while(element && element.tagName !== "BODY") {
   var id = element.id;
   element = element.parentNode;
   if(!id) continue;
   var indexInfo = this.grid.tryGetNumberFromEndOfString(id);
   var index = indexInfo.success ? indexInfo.value : "";
   for(var partialID in objectTypes) {
    if(id == partialID + index) {
     var type = objectTypes[partialID];
     var isGroupFooter = type == "groupfooter";
     if(type == "footer" || isGroupFooter) {
      if(!isGroupFooter)
       index = this.grid.GetFooterCellIndex(src);
      else
       index = this.grid.GetGroupFooterCellIndex(src);
      if(index < 0)
       return { objectType: null, index: -1 };
     } else if(type == "emptyheader" || type == "grouppanel" || type == "emptyrow") {
      index = this.emptyElementIndex;
     }
     return { objectType: type, index: index };
    }
   }
  }
  return { objectType: null, index: -1 };
 },
 ActivateContextMenuItems: function(menu, args) {
  menu.elementInfo = args;
  this.SyncMenuItemsInfoSettings(menu, args.index, menu.cpItemsInfo);
 },
 SyncMenuItemsInfoSettings: function(menu, groupElementIndex, itemsInfo) {
  for(var i = 0; i < menu.GetItemCount() ; ++i) {
   var item = menu.GetItem(i);
   var itemInfo = itemsInfo[item.indexPath];
   var visible = this.GetItemServerState(itemInfo[0], groupElementIndex);
   var enabled = this.GetItemServerState(itemInfo[1], groupElementIndex);
   var checked = this.GetItemServerState(itemInfo[2], groupElementIndex);
   if(item.name === GridViewContextMenuItemType.ShowCustomizationWindow)
    checked = this.IsCustWindowVisible();
   var column;
   if(item.name === GridViewContextMenuItemType.GroupByColumn) {
    column = this.grid.GetColumn(menu.elementInfo.index);
    enabled &= this.grid.canGroupByColumn(column);
   }
   if(item.name === GridViewContextMenuItemType.HideColumn) {
    column = this.grid.GetColumn(menu.elementInfo.index);
    enabled &= this.grid.canHideColumn(column);
   }
   item.SetVisible(visible);
   item.SetEnabled(enabled);
   item.SetChecked(checked);
   if(visible && enabled && !checked)
    this.SyncMenuItemsInfoSettings(item, groupElementIndex, itemsInfo);
  }
 },
 GetContextMenuItemChecked: function(item) {
  var itemInfo = item.menu.cpItemsInfo[item.indexPath];
  var elementIndex = item.menu.elementInfo.index;
  return this.GetItemServerState(itemInfo[2], elementIndex);
 },
 GetItemServerState: function(itemInfo, groupElementIndex) {
  var saveVisible = !!itemInfo[0];
  var indices = itemInfo.length === 1 ? [ ] : itemInfo[1];
  return ASPx.Data.ArrayIndexOf(indices, groupElementIndex) > -1 ? saveVisible : !saveVisible;
 },
 OnContextMenuItemClick: function(e) {
  var elementInfo = e.item.menu.elementInfo;
  this.clickedMenuItem = e.item;
  this.SaveClientState();
  if(this.GetEnableAccessibility() && !e.item.items.length)
   e.item.menu.ProcessLostFocus();
  var handled = this.RaiseContextMenuItemClick(e, elementInfo);
  if(!handled)
   this.ProcessContextMenuItemClick(e);
  this.ResetState();
 },
 ProcessContextMenuItemClick: function(e){
  var item = e.item;
  var elementInfo = item.menu.elementInfo;
  if(!elementInfo) return;
  var command = this.GetItemCommand(item);
  switch(command) {
   case GridViewContextMenuItemType.FullExpand:
    this.grid.ExpandAll();
    break;
   case GridViewContextMenuItemType.FullCollapse:
    this.grid.CollapseAll();
    break;
   case GridViewContextMenuItemType.SortAscending:
    this.grid.SortBy(elementInfo.index, "ASC", false);
    break;
   case GridViewContextMenuItemType.SortDescending:
    this.grid.SortBy(elementInfo.index, "DSC", false);
    break;
   case GridViewContextMenuItemType.ClearSorting:
    this.grid.SortBy(elementInfo.index, "NONE", false);
    break;
   case GridViewContextMenuItemType.ShowFilterBuilder:
    this.grid.ShowFilterControl();
    break;
   case GridViewContextMenuItemType.ShowFilterRow:
    this.ContextMenuShowFilterRow(!this.GetContextMenuItemChecked(item));
    break;
   case GridViewContextMenuItemType.ClearFilter:
    this.grid.AutoFilterByColumn(this.grid.GetColumn(elementInfo.index));
    break;
   case GridViewContextMenuItemType.ShowFilterRowMenu:
    this.ContextMenuShowFilterRowMenu(!this.GetContextMenuItemChecked(item));
    break;
   case GridViewContextMenuItemType.ShowGroupPanel:
    this.ContextMenuShowGroupPanel(!this.GetContextMenuItemChecked(item));
    break;
   case GridViewContextMenuItemType.ShowSearchPanel:
    this.ContextMenuShowSearchPanel(!this.GetContextMenuItemChecked(item));
    break;
   case GridViewContextMenuItemType.ShowCustomizationDialog:
    this.grid.ShowCustomizationDialog();
    break;
   case GridViewContextMenuItemType.ShowCustomizationWindow:
    if(!this.IsCustWindowVisible())
     this.grid.ShowCustomizationWindow(false, e.item.menu.accessibleFocusElement);
    else
     this.grid.HideCustomizationWindow();
    break;
   case GridViewContextMenuItemType.ShowFooter:
    this.ContextMenuShowFooter(!this.GetContextMenuItemChecked(item));
    break;
   case GridViewContextMenuItemType.ExpandRow:
    this.grid.ExpandRow(elementInfo.index);
    break;
   case GridViewContextMenuItemType.CollapseRow:
    this.grid.CollapseRow(elementInfo.index);
    break;
   case GridViewContextMenuItemType.ExpandDetailRow:
    this.grid.ExpandDetailRow(elementInfo.index);
    break;
   case GridViewContextMenuItemType.CollapseDetailRow:
    this.grid.CollapseDetailRow(elementInfo.index);
    break;
   case GridViewContextMenuItemType.NewRow:
    this.grid.AddNewItem();
    break;
   case GridViewContextMenuItemType.EditRow:
    this.ContextMenuStartEditItem(elementInfo.index, e.item.menu);
    break;
   case GridViewContextMenuItemType.DeleteRow:
    this.grid.DeleteGridItem(elementInfo.index);
    break;
   case GridViewContextMenuItemType.Refresh:
    this.grid.Refresh();
    break;
   case GridViewContextMenuItemType.CopyToClipboard:
    this.grid.CopyToClipboard();
    break;
   case GridViewContextMenuItemType.PasteFromClipboard:
    this.grid.PasteFromClipboard();
    break;
   case GridViewContextMenuItemType.HideColumn:
    var groupped = ASPx.IsExists(this.grid.GetHeader(elementInfo.index, true));
    this.grid.MoveColumn(elementInfo.index, -1, false, false, groupped);
    break;
   case GridViewContextMenuItemType.ShowColumn:
    this.grid.MoveColumn(elementInfo.index, elementInfo.index);
    break;
   case GridViewContextMenuItemType.SummarySum:
    this.ContextMenuSetSummary(item, elementInfo.index, 0);
    break;
   case GridViewContextMenuItemType.SummaryMin:
    this.ContextMenuSetSummary(item, elementInfo.index, 1);
    break;
   case GridViewContextMenuItemType.SummaryMax:
    this.ContextMenuSetSummary(item, elementInfo.index, 2);
    break;
   case GridViewContextMenuItemType.SummaryCount:
    this.ContextMenuSetSummary(item, elementInfo.index, 3);
    break;
   case GridViewContextMenuItemType.SummaryAverage:
    this.ContextMenuSetSummary(item, elementInfo.index, 4);
    break;
   case GridViewContextMenuItemType.SummaryNone:
    this.ContextMenuClearSummary(elementInfo.index);
    break;
   case GridViewContextMenuItemType.GroupSummarySum:
    this.ContextMenuSetGroupSummary(item, elementInfo.index, 0);
    break;
   case GridViewContextMenuItemType.GroupSummaryMin:
    this.ContextMenuSetGroupSummary(item, elementInfo.index, 1);
    break;
   case GridViewContextMenuItemType.GroupSummaryMax:
    this.ContextMenuSetGroupSummary(item, elementInfo.index, 2);
    break;
   case GridViewContextMenuItemType.GroupSummaryCount:
    this.ContextMenuSetGroupSummary(item, elementInfo.index, 3);
    break;
   case GridViewContextMenuItemType.GroupSummaryAverage:
    this.ContextMenuSetGroupSummary(item, elementInfo.index, 4);
    break;
   case GridViewContextMenuItemType.GroupSummaryNone:
    this.ContextMenuClearGroupSummary(elementInfo);
    break;
   case GridViewContextMenuItemType.ClearGrouping:
    this.ContextMenuClearGrouping();
    break;
   case GridViewContextMenuItemType.GroupByColumn:
    var column = this.grid.GetColumn(elementInfo.index);
    if(column) {
     var order = null;
     if(column.sortOrder !== ASPx.GridSortOrder.None)
      order = column.sortOrder === ASPx.GridSortOrder.Ascending ? "ASC" : "DSC";
     this.grid.GroupBy(elementInfo.index, null, order);
    }
    break;
   case GridViewContextMenuItemType.UngroupColumn:
    this.grid.UnGroup(elementInfo.index);
    break;
  }
  if(this.IsExportItem(command))
   this.ContextMenuExport(item);
 },
 ContextMenuExport: function(item) {
  var command = this.GetItemCommand(item),
   exportFormat = this.GetExportFormat(command);
  this.grid.ExportTo(exportFormat);
 },
 ContextMenuStartEditItem: function(visibleIndex, menu) {
  var rowCells = this.grid.GetRow(visibleIndex).children;
  var colIndex = -1;
  var menuLocationX = menu.GetMainElement().getBoundingClientRect().left;
  for(var i = 0; i < rowCells.length; ++i) {
   var cell = rowCells[i];
   if(cell.tagName !== "TD") continue;
   var cellRect = cell.getBoundingClientRect();
   if(cellRect.left > menuLocationX) break;
   if(menuLocationX > cellRect.left && menuLocationX < cellRect.right) {
    colIndex = i;
    break;
   }
  }
  this.grid.StartEditItem(visibleIndex, colIndex);
 },
 ProcessCustomContextMenuItemClick: function(usePostBack) {
  var args = [ "" ];
  if(usePostBack)
   this.SendContextMenuPostBack(args);
  else
   this.SendContextMenuCallback(args);
 },
 ContextMenuShowGroupPanel: function(show) {
  this.SendContextMenuCallback([ "ShowGroupPanel", show ? 1 : 0 ]);
 },
 ContextMenuShowSearchPanel: function(show) {
  this.SendContextMenuCallback([ "ShowSearchPanel", show ? 1 : 0 ]);
 },
 ContextMenuShowFilterRow: function(show) {
  this.SendContextMenuCallback([ "ShowFilterRow", show ? 1 : 0 ]);
 },
 ContextMenuShowFilterRowMenu: function(show) {
  this.SendContextMenuCallback([ "ShowFilterRowMenu", show ? 1 : 0 ]);
 },
 ContextMenuShowFooter: function(show) {
  this.SendContextMenuCallback([ "ShowFooter", show ? 1 : 0 ]);
 },
 ContextMenuClearGrouping: function() {
  this.SendContextMenuCallback([ "ClearGrouping" ]);
 },
 ContextMenuSetSummary: function(item, index, typeSummary) {
  var checkSummary = this.GetContextMenuItemChecked(item) ? 0 : 1;
  this.SendContextMenuCallback([ "SetSummary", index, typeSummary, checkSummary ]);
 },
 ContextMenuSetGroupSummary: function(item, index, typeSummary, isGroupSummary) {
  var checkSummary = this.GetContextMenuItemChecked(item) ? 0 : 1;
  var isGroupFooterSummary = this.IsGroupFooterMenuItem(item) ? "1" : "0";
  this.SendContextMenuCallback([ "SetGroupSummary", index, typeSummary, checkSummary, isGroupFooterSummary ]);
 },
 ContextMenuClearSummary: function(index) {
  this.SendContextMenuCallback([ "ClearSummary", index ]);
 },
 ContextMenuClearGroupSummary: function(elementInfo) {
  var isGroupFooterSummary = elementInfo.objectType === "groupfooter" ? "1" : "0";
  this.SendContextMenuCallback([ "ClearGroupSummary", elementInfo.index, isGroupFooterSummary ]);
 },
 IsGroupFooterMenuItem: function(item) {
  return item.menu.name === this.grid.GetGroupFooterContextMenuName();
 },
 GetObjectTypes: function() {
  if(!this.objectTypes)
   this.objectTypes = this.CreateObjectTypes();
  return this.objectTypes;
 },
 CreateObjectTypes: function() {
  var gridName = this.GetGridName();
  var result = { };
  result[gridName + "_" + "grouppanel"]          = "grouppanel";
  result[gridName + "_" + ASPx.GridViewConsts.AdaptiveGroupPanelID]   = "grouppanel";
  result[gridName + "_" + ASPx.GridViewConsts.HeaderRowID]   = "emptyheader";
  result[gridName + "_" + "col"]           = "header";
  result[gridName + this.GetCustWindowSuffix() + "_" + "col"]   = "header";
  result[gridName + "_" + "groupcol"]         = "header";
  result[gridName + "_" + ASPx.GridViewConsts.DataRowID]     = "row";
  result[gridName + "_" + ASPx.GridViewConsts.DetailRowID]   = "row";
  result[gridName + "_" + ASPx.GridViewConsts.AdaptiveDetailRowID] = "row";
  result[gridName + "_" + ASPx.GridViewConsts.EmptyDataRowID]   = "emptyrow";
  result[gridName + "_" + ASPx.GridViewConsts.GroupRowID]    = "grouprow";
  result[gridName + "_" + ASPx.GridViewConsts.GroupRowID + "Exp"]  = "grouprow";
  result[gridName + "_" + ASPx.GridViewConsts.FooterRowID]   = "footer";
  result[gridName + "_" + ASPx.GridViewConsts.FilterRowID]   = "filterrow";
  result[gridName + "_" + ASPx.GridViewConsts.GroupFooterRowID]    = "groupfooter";
  return result;
 },
});
ASPx.GridViewContextMenuHelper = GridViewContextMenuHelper;
})();

(function() {
var GridViewToolbarCommandType = {
 Custom: "Custom",
 FullExpand: "FullExpand",
 FullCollapse: "FullCollapse",
 ClearSorting: "ClearSorting",
 ShowFilterBuilder: "ShowFilterEditor",
 ShowFilterRow: "ShowFilterRow",
 ClearFilter: "ClearFilter",
 ShowFilterRowMenu: "ShowFilterRowMenu",
 ClearGrouping: "ClearGrouping",
 ShowGroupPanel: "ShowGroupPanel",
 ShowSearchPanel: "ShowSearchPanel",
 ShowCustomizationWindow: "ShowCustomizationWindow",
 ShowFooter: "ShowFooter",
 ShowCustomizationDialog: "ShowCustomizationDialog",
 ExpandRow: "ExpandRow",
 CollapseRow: "CollapseRow",
 ExpandDetailRow: "ExpandDetailRow",
 CollapseDetailRow: "CollapseDetailRow",
 New: "New",
 Edit: "Edit",
 Delete: "Delete",
 DeleteSelectedRowsOnPage: "DeleteSelectedRowsOnPage",
 Refresh: "Refresh",
 Update: "Update",
 Cancel: "Cancel",
 PreviewChanges: "PreviewChanges",
 HidePreview: "HidePreview",
 UpdateSummaries: "UpdateSummaries"
};
var GridViewToolbarHelper = ASPx.CreateClass(ASPx.GridToolbarHelper, {
 constructor: function(grid) {
  this.constructor.prototype.constructor.call(this, grid);
 },
 ProcessToolbarItemClick: function(e) {
  var item = e.item,
   command = this.GetItemCommand(item);
  switch(command) {
   case GridViewToolbarCommandType.FullExpand:
    this.grid.ExpandAll();
    break;
   case GridViewToolbarCommandType.FullCollapse:
    this.grid.CollapseAll();
    break;
   case GridViewToolbarCommandType.ClearSorting:
    this.ToolbarClearSorting();
    break;
   case GridViewToolbarCommandType.ShowFilterBuilder:
    this.grid.ShowFilterControl();
    break;
   case GridViewToolbarCommandType.ShowFilterRow:
    this.ToolbarShowFilterRow(item.GetChecked());
    break;
   case GridViewToolbarCommandType.ClearFilter:
    this.grid.ClearFilter();
    break;
   case GridViewToolbarCommandType.ShowFilterRowMenu:
    this.ToolbarShowFilterRowMenu(item.GetChecked());
    break;
   case GridViewToolbarCommandType.ShowGroupPanel:
    this.ToolbarShowGroupPanel(item.GetChecked());
    break;
   case GridViewToolbarCommandType.ShowSearchPanel:
    this.ToolbarShowSearchPanel(item.GetChecked());
    break;
   case GridViewToolbarCommandType.ShowCustomizationWindow:
    if(!this.grid.IsCustomizationWindowVisible())
     this.grid.ShowCustomizationWindow();
    else
     this.grid.HideCustomizationWindow();
    break;
   case GridViewToolbarCommandType.ShowFooter:
    this.ToolbarShowFooter(item.GetChecked());
    break;
   case GridViewToolbarCommandType.ShowCustomizationDialog:
    this.grid.ShowCustomizationDialog();
    break;
   case GridViewToolbarCommandType.ExpandRow:
    this.grid.ExpandRow(this.grid.GetFocusedRowIndex());
    break;
   case GridViewToolbarCommandType.CollapseRow:
    this.grid.CollapseRow(this.grid.GetFocusedRowIndex());
    break;
   case GridViewToolbarCommandType.ExpandDetailRow:
    this.grid.ExpandDetailRow(this.grid.GetFocusedRowIndex());
    break;
   case GridViewToolbarCommandType.CollapseDetailRow:
    this.grid.CollapseDetailRow(this.grid.GetFocusedRowIndex());
    break;
   case GridViewToolbarCommandType.New:
    this.grid.AddNewItem();
    break;
   case GridViewToolbarCommandType.Edit:
    this.ToolbarStartEdit();
    break;
   case GridViewToolbarCommandType.Delete:
    this.ToolbarDeleteItem();
    break;
   case GridViewToolbarCommandType.DeleteSelectedRowsOnPage:
    this.ToolbarDeleteSelectedVisibleItems();
    break;
   case GridViewToolbarCommandType.Refresh:
    this.grid.Refresh();
    break;
   case GridViewToolbarCommandType.ClearGrouping:
    this.ToolbarClearGrouping();
    break;
   case GridViewToolbarCommandType.Update:
    this.grid.UpdateEdit();
    break;
   case GridViewToolbarCommandType.Cancel:
    this.grid.CancelEdit();
    break;
   case GridViewToolbarCommandType.PreviewChanges:
    this.ToolbarPreviewChanges();
    break;
   case GridViewToolbarCommandType.HidePreview:
    this.ToolbarHidePreview();
    break;
   case GridViewToolbarCommandType.UpdateSummaries:
    this.grid.UpdateSummaries();
    break;
   default:
    ASPx.GridToolbarHelper.prototype.ProcessToolbarItemClick.call(this, e);
    break;
  }
 },
 ToolbarShowGroupPanel: function(show) {
  this.SendToolbarCallback([ "ShowGroupPanel", show ? 1 : 0 ]);
 },
 ToolbarShowSearchPanel: function(show) {
  this.SendToolbarCallback([ "ShowSearchPanel", show ? 1 : 0 ]);
 },
 ToolbarShowFilterRow: function(show) {
  this.SendToolbarCallback([ "ShowFilterRow", show ? 1 : 0 ]);
 },
 ToolbarShowFilterRowMenu: function(show) {
  this.SendToolbarCallback([ "ShowFilterRowMenu", show ? 1 : 0 ]);
 },
 ToolbarShowFooter: function(show) {
  this.SendToolbarCallback([ "ShowFooter", show ? 1 : 0 ]);
 },
 ToolbarClearGrouping: function() {
  this.SendToolbarCallback([ "ClearGrouping" ]);
 },
 ToolbarClearSorting: function() {
  this.SendToolbarCallback([ "ClearSorting" ]);
 },
 ToolbarPreviewChanges: function() {
  var helper = this.GetBatchEditHelper();
  if(helper)
   helper.ShowPreviewChanges();
 },
 ToolbarHidePreview: function() {
  var helper = this.GetBatchEditHelper();
  if(helper)
   helper.HideChanges();
 },
 IsUpdateEditItem: function(item) {
  var command = this.GetItemCommand(item);
  switch(command) {
   case GridViewToolbarCommandType.Update:
   case GridViewToolbarCommandType.Cancel:
   case GridViewToolbarCommandType.PreviewChanges:
   case GridViewToolbarCommandType.HidePreview:
    return true;
  }
  return false;
 },
 IsShowCustomizationWindowItem: function(item) {
  return this.GetItemCommand(item) === GridViewToolbarCommandType.ShowCustomizationWindow;
 },
 RefreshItemBadge: function(item) {
  if(this.GetItemCommand(item) === GridViewToolbarCommandType.DeleteSelectedRowsOnPage)
   this.RefreshSelectionBasedItemBadge(item, this.GetSelectedVisibleGridItemCount());
 },
 GetToolbarItemEnabled: function(item){
  var command = this.GetItemCommand(item);
  switch(command) {
   case GridViewToolbarCommandType.Edit:
    return this.GetEditItemEnabled();
   case GridViewToolbarCommandType.Delete:
    return this.GetDeleteItemEnabled();
   case GridViewToolbarCommandType.DeleteSelectedRowsOnPage:
    return this.GetDeleteSelectedRowsOnPageItemEnabled();
   case GridViewToolbarCommandType.ExpandRow:
    return this.GetExpandRowItemEnabled();
   case GridViewToolbarCommandType.CollapseRow:
    return this.GetCollapseRowItemEnabled();
   case GridViewToolbarCommandType.ExpandDetailRow:
    return this.GetExpandDetailRowEnabled();
   case GridViewToolbarCommandType.CollapseDetailRow:
    return this.GetCollapseDetailRowEnabled();
  }
  return null;
 },
 GetEditItemEnabled: function(){
  var focusedIndex = this.GetFocusedItemIndex();
  return this.grid.allowEdit && this.IsDataRow(focusedIndex) && (this.HasBatchEditFocusedCell() || !this.IsEditingItem(focusedIndex));
 },
 GetDeleteItemEnabled: function(){
  var focusedIndex = this.GetFocusedItemIndex();
  return this.grid.allowDelete && this.IsDataRow(focusedIndex) && (this.HasBatchEditFocusedCell() || !this.IsEditingItem(focusedIndex));
 },
 GetDeleteSelectedRowsItemEnabled: function() {
  return this.grid.allowDelete && this.GetSelectedGridItemCount() > 0;
 },
 GetDeleteSelectedRowsOnPageItemEnabled: function() {
  return this.grid.allowDelete && this.GetSelectedVisibleGridItemCount() > 0;
 },
 GetExpandRowItemEnabled: function(){
  var focusedIndex = this.GetFocusedItemIndex();
  return this.IsGroupRow(focusedIndex) && !this.IsGroupRowExpanded(focusedIndex);
 },
 GetCollapseRowItemEnabled: function(){
  var focusedIndex = this.GetFocusedItemIndex();
  return this.IsGroupRow(focusedIndex) && this.IsGroupRowExpanded(focusedIndex);
 },
 GetExpandDetailRowEnabled: function(){
  var focusedIndex = this.GetFocusedItemIndex();
  return !this.IsGroupRow(focusedIndex) && !this.GetDetailRow(focusedIndex);
 },
 GetCollapseDetailRowEnabled: function(){
  var focusedIndex = this.GetFocusedItemIndex();
  return !!this.GetDetailRow(focusedIndex);
 },
 IsDataRow: function(visibleIndex) {
  return this.control.IsDataRow(visibleIndex);
 },
 IsGroupRow: function(visibleIndex) {
  return this.control.IsGroupRow(visibleIndex);
 },
 IsGroupRowExpanded: function(visibleIndex){
  return this.control.IsGroupRowExpanded(visibleIndex);
 },
 GetDetailRow: function(visibleIndex){
  return this.control.GetDetailRow(visibleIndex);
 },
 IsCustomItemVisibleOnChangesPreview: function(item) {
  return ASPx.Data.ArrayContains(item.menu.cpItemsProps.ibpv, item.indexPath);
 },
 UpdateBatchPreviewItemsState: function(item, state) {
  var command = this.GetItemCommand(item);
  switch(command) {
   case GridViewToolbarCommandType.PreviewChanges:
    this.UpdateItemBadge(item, state.previewChangesButtonChangesCount);
    item.SetVisible(state.previewChangesButtonVisible);
    break;
   case GridViewToolbarCommandType.HidePreview:
    item.SetVisible(state.hidePreviewButtonVisible);
    break;
   case GridViewToolbarCommandType.UpdateSummaries:
    item.SetVisible(state.updateSummariesButtonVisible);
    break;
  }
 },
 UpdateItemsOnBatchPreviewVisibilityChange: function(previewVisible) {  
  var setVisibleFunc = function(item) { 
   var visible = this.GetItemVisibilityOnChangesPreview(item, previewVisible);
   item.SetVisible(visible); 
  }.bind(this);
  this.ForEachItem(null, setVisibleFunc);
 },
 GetItemVisibilityOnChangesPreview: function(item, previewVisible) {
  var command = this.GetItemCommand(item);
  switch(command) {
   case GridViewToolbarCommandType.HidePreview:
    return previewVisible;
   case GridViewToolbarCommandType.UpdateSummaries:
    var helper = this.GetBatchEditHelper();
    return !previewVisible && helper && helper.IsUpdateSummariesButtonVisible();
  }
  return !previewVisible || this.IsItemVisibleOnChangesPreview(item);
 },
 IsItemVisibleOnChangesPreview: function(item) {
  var command = this.GetItemCommand(item);
  switch(command) {
   case GridViewToolbarCommandType.New:
   case GridViewToolbarCommandType.Edit:
   case GridViewToolbarCommandType.Delete:
   case GridViewToolbarCommandType.DeleteSelectedRowsOnPage:
   case GridViewToolbarCommandType.Refresh:
   case GridViewToolbarCommandType.Update:
   case GridViewToolbarCommandType.Cancel:
    return true;
   case GridViewToolbarCommandType.Custom:
    return this.IsCustomItemVisibleOnChangesPreview(item);
  }
  return false;
 }
});
ASPx.GridViewToolbarHelper = GridViewToolbarHelper;
})();
(function() {
 var Constants = {
  ALLOWED_CALC_WIDTH_DIFF: 0.5,
  ALLOWED_RENDER_WIDTH_DIFF: 0.01,
  MAX_ITERATION_COUNT: 1000
 };
 var GridViewColumnAdjustor = ASPx.CreateClass(null, {
  constructor: function(grid) {
   this.grid = grid;
   this.columnInfos = [];
   this.hasRestrictions = false;
   this.hasValidColumnWidths = true;
  },
  Initialize: function() {
   if(!this.IsFixedTableLayout())
    return;
   this.columnInfos = this.GetColumnInfos();
   this.hasRestrictions = this.CheckHasRestrictions(this.columnInfos);
   this.hasValidColumnWidths = this.IsValidGridLayout(this.columnInfos);
  },
  GetColumnInfos: function() {
   var columnInfos = [];
   var armRow = this.GetMainTableArmRow();
   var columns = this.grid.columns;
   for(var i = 0, column; column = columns[i]; i++) {
    if(!column.visible)
     continue;
    var cellIndex = this.grid.GetDataCellIndex(i);
    if(cellIndex === -1)
     continue;
    var armCell = armRow.cells[cellIndex];
    if(!armCell || armCell.colSpan > 1)
     continue;
    var styleWidth = armCell.style.width;
    var hasPercentageWidth = false;
    var hasFixedWidth = false;
    var width = -1;
    if(styleWidth) {
     hasPercentageWidth = ASPx.IsPercentageSize(styleWidth);
     hasFixedWidth = !hasPercentageWidth;
     width = hasPercentageWidth ? ASPx.PercentageToFloat(styleWidth) : ASPx.PxToInt(styleWidth);
    }
    var info = this.CreateColumnInfoObject(i, column, hasPercentageWidth, hasFixedWidth, width);
    columnInfos.push(info);
   }
   return columnInfos;
  },
  CheckHasRestrictions: function(columnInfos) {
   for(var info, i = 0; info = columnInfos[i]; i++) {
    if(info.minWidth > 0 || info.maxWidth > 0)
     return true;
   }
   return false;
  },
  HasRestrictions: function() {
   return this.hasRestrictions;
  },
  IsValidGridLayout: function(columnInfos) {
   var hasPercWidths = false,
    hasAutoWidths = false;
   for(var info, i = 0; info = columnInfos[i]; i++) {
    if(info.hasPercentageWidth) {
     if(hasAutoWidths)
      return false;
     hasPercWidths = true;
    }
    else if(!info.hasFixedWidth) {
     if(hasPercWidths)
      return false;
     hasAutoWidths = true;
    }
   }
   return true;
  },
  HasValidColumnWidths: function() {
   return this.hasValidColumnWidths;
  },
  ShouldAdjustColumns: function() {
   return this.HasRestrictions() && this.HasValidColumnWidths();
  },
  IsColumnAdjustmentAllowed: function() {
   return !this.grid.AllowResizing() && !this.grid.IsResponsiveAdaptivityMode();
  },
  TryAdjustColumns: function() {
   if(!this.ShouldAdjustColumns() || !this.IsColumnAdjustmentAllowed())
    return false;
   var savedStyle = this.CollapseTables();
   var gridWidth = this.GetGridOffsetWidth(); 
   this.AdjustColumnsCore(this.columnInfos, gridWidth);
   this.ExpandTables(savedStyle);
   return true;
  },
  AdjustColumnsCore: function(columnInfos, gridWidth) {
   this.ResetColumnViolations(columnInfos);
   var resolvedGridInfo = this.CalculateCompleteResolvedColumnInfos(columnInfos, gridWidth);
   this.ApplyColumnInfosToRender(resolvedGridInfo.columnInfos, resolvedGridInfo.maxWidth);
  },
  ResetColumnViolations: function(columnInfos) {
   for(var info, i = 0; info = columnInfos[i]; i++)
    info.violation = null;
  },
  GetModifiedColumnInfos: function(newColumnInfos, oldColumnInfos) {
   var result = [];
   for(var newInfo, i = 0; newInfo = newColumnInfos[i]; i++) {
    oldInfo = oldColumnInfos[i];
    if(!this.AreEqualByWidth(newInfo, oldInfo))
     result.push(newInfo);
   }
   return result;
  },
  CalculateCompleteResolvedColumnInfos: function(sourceColumnInfos, gridWidth) {
   var violation = null;
   var resolvedGridInfo = null;
   var counter = 0;
   do {
    resolvedGridInfo = this.CalculateResolvedGridInfo(gridWidth, sourceColumnInfos);
    var resolvedGridWidth = ASPx.IsExists(resolvedGridInfo.resolvedWidth) ? resolvedGridInfo.resolvedWidth : gridWidth;
    var widthInfos = this.CalculateColumnsCurrentWidths(resolvedGridWidth, resolvedGridInfo.columnInfos);
    violation = this.GetWidthViolation(widthInfos);
    if(violation)
     this.ResolveViolation(violation);
    if(++counter > Constants.MAX_ITERATION_COUNT)
     throw "GridView column calculation error.";
   } while(violation);
   return resolvedGridInfo;
  },
  CollapseTables: function() {
   var styles = [];
   var cell = this.GetMainElementCell();
   var style = cell.style;
   var savedStyle = { display: style.display, width: style.width, height: style.height, overflow: style.overflow };
   ASPx.SetStyles(cell, { display: "block", width: "0px", height: "0px", overflow: "hidden", maxWidth: "" });
   styles.push(savedStyle);
   if(this.IsGridWidthValueSetInPercentage()) {
    var mainElement = this.grid.GetMainElement();
    savedStyle = { width: mainElement.style.width };
    mainElement.style.width = this.grid.percentSizeConfig.width;
    styles.push(savedStyle);
   }
   return styles;
  },
  ExpandTables: function(styles) {
   var cell = this.GetMainElementCell();
   ASPx.SetStyles(cell, styles[0]);
   if(this.IsGridWidthValueSetInPercentage())
    this.grid.GetMainElement().style.width = styles[1].width;
  },
  IsGridWidthValueSetInPercentage: function() { return this.grid.widthValueSetInPercentage; },
  RestoreTableRenderColumnWidths: function(table) {
   this.ApplyColumnInfosToTable(table, this.columnInfos);
  },
  ApplyColumnInfosToTable: function(table, columnInfos) {
   var armRow = table.rows[0];
   for(var info, i = 0; info = columnInfos[i]; i++) {
    if(!info.column) continue;
    var widthStr = this.GetColumnInfoWidthString(info);
    var columnIndex = info.column.index;
    var cellIndex = this.grid.GetDataCellIndex(columnIndex);
    var armCell = armRow.cells[cellIndex];
    armCell.style.width = widthStr;
   }
  },
  ApplyColumnInfosToRender: function(columnInfos, maxGridWidth) {
   var tables = this.grid.GetLayoutHelper().GetAllTables();
   for(var table, i = 0; table = tables[i]; i++)
    this.ApplyColumnInfosToTable(table, columnInfos);
   if(ASPx.IsExists(maxGridWidth))
    this.grid.GetMainElement().style.maxWidth = maxGridWidth + "px";
  },
  ResolveViolation: function(violation) {
   violation.columnInfo.violation = violation;
  },
  GetWidthViolation: function(widthInfos) {
   var minViolation = null,
    maxViolation = null,
    summaryWidthDiff = 0;
   for(var info, i = 0; info = widthInfos[i]; i++) {
    var columnInfo = info.columnInfo.sourceColumnInfo || info.columnInfo;
    if(columnInfo.minWidth > 0) {
     var widthDiff = columnInfo.minWidth - info.width;
     if(widthDiff > Constants.ALLOWED_CALC_WIDTH_DIFF) {
      summaryWidthDiff += widthDiff;
      if(!minViolation)
       minViolation = this.CreateViolationObject(true, columnInfo, widthDiff, columnInfo.minWidth);
      continue;
     }
    }
    if(columnInfo.maxWidth > 0) {
     var widthDiff = info.width - columnInfo.maxWidth;
     if(widthDiff > Constants.ALLOWED_CALC_WIDTH_DIFF) {
      summaryWidthDiff -= widthDiff;
      if(!maxViolation)
       maxViolation = this.CreateViolationObject(false, columnInfo, -widthDiff, columnInfo.maxWidth);
      continue;
     }
    }
   }
   return summaryWidthDiff >= 0 ? minViolation : maxViolation;
  },
  CreateViolationObject: function(minWidthViolation, columnInfo, widthDiff, violatedWidth) {
   return {
    minWidthViolation: minWidthViolation,
    columnInfo: columnInfo,
    widthDiff: widthDiff,
    violatedWidth: violatedWidth
   };
  },
  CalculateResolvedGridInfo: function(gridWidth, columnInfos) {
   var groupedInfos = this.GroupInfosByWidthType(columnInfos);
   var autoWidthInfos = groupedInfos.autoWidthInfos,
    fixedWidthInfos = groupedInfos.fixedWidthInfos,
    percentageWidthInfos = groupedInfos.percentageWidthInfos;
   if(autoWidthInfos.length > 0 && percentageWidthInfos.length == 0) {
    return this.CalculateResolvedAutoWidthColumnsGridInfo(gridWidth, columnInfos);
   }
   if(autoWidthInfos.length == 0 && fixedWidthInfos.length > 0 && percentageWidthInfos.length == 0) {
    return this.CalculateResolvedFixedWidthColumnsGridInfo(gridWidth, columnInfos);
   }
   if(autoWidthInfos.length == 0 && percentageWidthInfos.length > 0) {
    return this.CalculateResolvedPercentageWidthColumnsGridInfo(gridWidth, columnInfos);
   }
   return null;
  },
  CalculateResolvedPercentageWidthColumnsGridInfo: function(gridWidth, columnInfos) {
   var result = { columnInfos: [] };
   var fixedColumnCount = 0;
   var fixedWidthSummary = 0;
   var percWidthSummary = 0;
   for(var info, i = 0; info = columnInfos[i]; i++) {
    if(info.hasFixedWidth || info.violation) {
     fixedColumnCount++;
     fixedWidthSummary += info.hasFixedWidth ? info.width : info.violation.violatedWidth;
    }
    else
     percWidthSummary += info.width;
   }
   var percColumnSummaryWidth = gridWidth - fixedWidthSummary;
   var percColumnCount = columnInfos.length - fixedColumnCount;
   if(percColumnSummaryWidth > 0 && percColumnCount == 0)
    result.maxWidth = result.resolvedWidth = fixedWidthSummary;
   if(percWidthSummary == 0)
    percWidthSummary = 1;
   for(var info, i = 0; info = columnInfos[i]; i++) {
    var hasFixedWidth = true;
    var width = info.width;
    if(info.violation)
     width = info.violation.violatedWidth;
    else if(!info.hasFixedWidth) {
     hasFixedWidth = false;
     width = info.width / percWidthSummary;
    }
    var columnInfo = this.CreateColumnInfoObject(info.index, info.column, !hasFixedWidth, hasFixedWidth, width, info);
    result.columnInfos.push(columnInfo);
   }
   return result;
  },
  CalculateResolvedFixedWidthColumnsGridInfo: function(gridWidth, columnInfos) {
   var result = { columnInfos: [] };
   var violatedWidthSummary = 0;
   var violatedColumnCount = 0;
   var normalColumnMinSummaryWidth = 0;
   for(var info, i = 0; info = columnInfos[i]; i++) {
    if(info.violation) {
     violatedWidthSummary += info.violation.violatedWidth;
     violatedColumnCount++;
    }
    else
     normalColumnMinSummaryWidth += info.width;
   }
   var newMinGridWidth = violatedWidthSummary + normalColumnMinSummaryWidth;
   if(gridWidth <= newMinGridWidth) {
    for(var info, i = 0; info = columnInfos[i]; i++) {
     var columnInfo = this.CreateColumnInfoObject(info.index, info.column, false, true, info.width, info);
     result.columnInfos.push(columnInfo);
    }
    return result;
   }
   else if(violatedColumnCount == columnInfos.length)
    result.maxWidth = result.resolvedWidth = gridWidth = violatedWidthSummary;
   var normalColumnSummaryWidth = gridWidth - violatedWidthSummary;
   var normalColumnSummaryPart = normalColumnSummaryWidth / gridWidth;
   var violatedColumnSummaryPart = 1 - normalColumnSummaryPart;
   for(var info, i = 0; info = columnInfos[i]; i++) {
    var part = info.violation
     ? (info.violation.violatedWidth / violatedWidthSummary) * violatedColumnSummaryPart
     : (info.width / normalColumnMinSummaryWidth) * normalColumnSummaryPart;
    var width = part * gridWidth;
    var columnInfo = this.CreateColumnInfoObject(info.index, info.column, false, true, width, info);
    result.columnInfos.push(columnInfo);
   }
   return result;
  },
  CalculateResolvedAutoWidthColumnsGridInfo: function(gridWidth, columnInfos) {
   var result = { columnInfos: [] };
   var fixedColumnCount = 0;
   var fixedWidthSummary = 0;
   for(var info, i = 0; info = columnInfos[i]; i++) {
    if(info.hasFixedWidth || info.violation) {
     fixedColumnCount++;
     fixedWidthSummary += info.hasFixedWidth ? info.width : info.violation.violatedWidth;
    }
   }
   var autoColumnSummaryWidth = gridWidth - fixedWidthSummary;
   var autoColumnCount = columnInfos.length - fixedColumnCount;
   var autoWidth = 0;
   if(autoColumnSummaryWidth > 0) {
    if(autoColumnCount > 0)
     autoWidth = autoColumnSummaryWidth / autoColumnCount;
    else
     result.maxWidth = result.resolvedWidth = fixedWidthSummary;
   }
   for(var info, i = 0; info = columnInfos[i]; i++) {
    var hasFixedWidth = !!info.violation || info.hasFixedWidth;
    var width = autoWidth;
    if(info.hasFixedWidth)
     width = info.width;
    else if(info.violation)
     width = info.violation.violatedWidth;
    var columnInfo = this.CreateColumnInfoObject(info.index, info.column, false, hasFixedWidth, width, info);
    result.columnInfos.push(columnInfo);
   }
   return result;
  },
  CalculateColumnsCurrentWidths: function(gridWidth, columnInfos) {
   var groupedInfos = this.GroupInfosByWidthType(columnInfos);
   var autoWidthInfos = groupedInfos.autoWidthInfos,
    fixedWidthInfos = groupedInfos.fixedWidthInfos,
    percentageWidthInfos = groupedInfos.percentageWidthInfos;
   var result = [];
   if(percentageWidthInfos.length > 0 && autoWidthInfos.length > 0)
    return null;
   var fixedWidthSum = 0;
   for(var info, i = 0; info = fixedWidthInfos[i]; i++)
    fixedWidthSum += info.width;
   if(fixedWidthInfos.length == columnInfos.length) {
    var coefficient = 1;
    if(fixedWidthSum > 0)
     coefficient = gridWidth / fixedWidthSum;
    if(coefficient < 1)
     coefficient = 1;
    for(var info, i = 0; info = fixedWidthInfos[i]; i++) {
     var width = coefficient * info.width;
     var widthInfo = this.CreateWidthInfoObject(width, info);
     result.push(widthInfo);
    }
   }
   else {
    var flexWidthSum = gridWidth - fixedWidthSum;
    var autoWidthColumnWidth = 0;
    if(autoWidthInfos.length > 0 && flexWidthSum > 0)
     autoWidthColumnWidth = flexWidthSum / autoWidthInfos.length;
    var percWidthColumnSum = 0;
    for(var info, i = 0; info = percentageWidthInfos[i]; i++)
     percWidthColumnSum += info.width;
    if(percWidthColumnSum == 0)
     percWidthColumnSum = 1;
    for(var info, i = 0; info = columnInfos[i]; i++) {
     var width = info.width;
     if(info.hasPercentageWidth)
      width = flexWidthSum * info.width / percWidthColumnSum;
     else if(!info.hasFixedWidth)
      width = autoWidthColumnWidth;
     var widthInfo = this.CreateWidthInfoObject(width, info);
     result.push(widthInfo);
    }
   }
   return result;
  },
  GetColumnInfoWidthString: function(columnInfo) {
   if(columnInfo.hasFixedWidth)
    return columnInfo.width + "px";
   else if(columnInfo.hasPercentageWidth)
    return (columnInfo.width * 100) + "%";
   else
    return "";
  },
  AreEqualByWidth: function(columnInfo1, columnInfo2) {
   return columnInfo1.hasFixedWidth === columnInfo2.hasFixedWidth &&
    columnInfo1.hasPercentageWidth === columnInfo2.hasPercentageWidth &&
    (!columnInfo1.hasFixedWidth && !columnInfo1.hasPercentageWidth ||
     Math.abs(columnInfo1.width - columnInfo2.width) < Constants.ALLOWED_RENDER_WIDTH_DIFF);
  },
  CreateWidthInfoObject: function(width, columnInfo) {
   return {
    width: width,
    columnInfo: columnInfo
   };
  },
  CreateColumnInfoObject: function(index, column, hasPercentageWidth, hasFixedWidth, width, sourceColumnInfo) {
   return {
    index: index,
    column: column,
    hasPercentageWidth: hasPercentageWidth,
    hasFixedWidth: hasFixedWidth,
    width: width,
    minWidth: column ? column.minWidth : 0,
    maxWidth: column ? column.maxWidth : 0,
    sourceColumnInfo: sourceColumnInfo
   };
  },
  GroupInfosByWidthType: function(infos) {
   var autoWidthInfos = [],
    fixedWidthInfos = [],
    percentageWidthInfos = [],
    violatedWidthInfos = [];
   for(var i = 0, info; info = infos[i]; i++) {
    if(info.hasFixedWidth)
     fixedWidthInfos.push(info);
    else if(info.hasPercentageWidth)
     percentageWidthInfos.push(info);
    else
     autoWidthInfos.push(info);
    if(info.violation)
     violatedWidthInfos.push(info);
   }
   return {
    autoWidthInfos: autoWidthInfos,
    fixedWidthInfos: fixedWidthInfos,
    percentageWidthInfos: percentageWidthInfos,
    violatedWidthInfos: violatedWidthInfos
   };
  },
  GetGridOffsetWidth: function() {
   return this.grid.GetMainElement().offsetWidth;
  },
  GetMainTableArmRow: function () {
   return this.grid.GetMainTable().rows[0];
  },
  GetMainElementCell: function() {
   return this.grid.GetLayoutHelper().GetMainElementCell();
  },
  IsFixedTableLayout: function() {
   return this.grid.GetLayoutHelper().IsFixedTableLayout();
  }
 });
 ASPx.GridViewColumnAdjustor = GridViewColumnAdjustor;
})();
(function() {
var GridViewColumnHelper = ASPx.CreateClass(null, {
 constructor: function(grid) {
  this.grid = grid;
  this.visibleHeaderTree = null;
  this.visibleDataRowTree = null;
  this.headerLayout = null;
  this.dataRowLayout = null;
  this.headerLeafs = null;
  this.dataRowLeafs = null;
  this.headerNodeHash = { };
  this.dataRowNodeHash = { };
  this.sortedVisibleChildColumnsHash = { };
  this.childColumnHash = { };
  this.fixedColumnsHash = null;
  this.visibleColumnIndices = null;
  this.visibleDataColumnIndices = null;
  this.rightTreeLines = null;
  this.cachedGroupColumns = -1;
 },
 GetAllColumns: function() { return this.grid.columns; },
 GetShowGroupedColumns: function() { return this.grid.showGroupedColumns; },
 FindColumn: function(index) {
  index = parseInt(index);
  return this.GetAllColumns().filter(function(c) { return c.index === index; })[0] || null;
 },
 HasColumnChildren: function(index) {
  return this.GetAllColumns().filter(function(c) { return c.parentIndex === index; }).length > 0;
 },
 GetGroupColumns: function() {
  if(this.cachedGroupColumns === -1)
   this.cachedGroupColumns = this.GetAllColumns().filter(function(c) { return c.groupIndex > -1; }).sort(function(c1, c2) { return c1.groupIndex - c2.groupIndex; });
  return this.cachedGroupColumns;
 },
 GetGroupColumnCount: function() { 
  return this.GetGroupColumns().length;
 },
 GetParentColumnIndices: function(columnIndex) {
  var node = this.FindNode(columnIndex);
  if(!node)
   return [ ];
  return this.CreateTreeLine(node, false).map(function(n) { return n.columnIndex; });
 },
 GetParentColumnIndex: function(columnIndex) {
  var parentColumnIndices = this.GetParentColumnIndices(columnIndex);
  return parentColumnIndices.length > 0 ? parentColumnIndices[0] : -1;
 },
 GetIsParentForAllColumns: function(parentColumnIndex, columnIndices) {
  if(columnIndices.length === 0)
   return false;
  return columnIndices.every(function(i) {
   return this.GetParentColumnIndices(i).indexOf(parentColumnIndex) > -1;
  }.bind(this));
 },
 FindColumnLayoutPos: function(layout, columnIndex) {
  for(var i = 0; i < layout.length; i++) {
   var level = layout[i];
   for(var j = 0; j < level.length; j++) {
    if(level[j].columnIndex === columnIndex)
     return { levelIndex: i, cellIndex: j };
   }
  }
  return { levelIndex: -1, cellIndex: -1 };
 },
 FindNode: function(columnIndex, isDataRowTree) {
  this.EnsureTrees();
  var hash = isDataRowTree ? this.dataRowNodeHash : this.headerNodeHash;
  return hash[columnIndex];
 },
 IsColumnFixed: function(columnIndex) {
  this.EnsureFixedColumnsHash();
  return this.fixedColumnsHash[columnIndex];
 },
 EnsureFixedColumnsHash: function() {
  if(this.fixedColumnsHash) 
   return;
  var firstLevelColumnsFixedState = { };
  var firstLevelColumns = this.GetVisibleChildColumns(-1, true);
  for(var i = 0; i < firstLevelColumns.length; i++) {
   var column = firstLevelColumns[i];
   firstLevelColumnsFixedState[column.index] = this.IsColumnFixedRecursive(column);
  }
  this.fixedColumnsHash = { };
  var allColumns = this.GetAllColumns();
  for(var i = 0; i < allColumns.length; i++) {
   var column = allColumns[i];
   var firstLevelColumn = column;
   while(firstLevelColumn.parentIndex >= 0)
    firstLevelColumn = this.FindColumn(firstLevelColumn.parentIndex);
   this.fixedColumnsHash[column.index] = firstLevelColumnsFixedState[firstLevelColumn.index];
  }
 },
 IsColumnFixedRecursive: function(column) {
  if(column.isFixed) return true;
  var childColumns = this.GetVisibleChildColumns(column.index, true);
  for(var i = 0; i < childColumns.length; i++) {
   if(this.IsColumnFixedRecursive(childColumns[i]))
    return true;
  }
  return false;
 },
 IsColumnInRightTreeLine: function(columnIndex, isHeader) {
  this.EnsureRightTreeLines();
  var treeLine = isHeader ? this.rightTreeLines.header : this.rightTreeLines.data;
  return treeLine.filter(function(n) { return n.columnIndex === columnIndex; }).length !== 0;
 },
 EnsureRightTreeLines: function() {
  if(this.rightTreeLines) return;
  this.rightTreeLines = { };
  var headerLeafs = this.GetHeaderLeafs();
  var dataRowLeafs = this.GetDataRowLeafs();
  this.rightTreeLines.header = this.CreateTreeLine(headerLeafs[headerLeafs.length - 1], true);
  this.rightTreeLines.data = this.CreateTreeLine(dataRowLeafs[dataRowLeafs.length - 1], true);
 },
 GetVisibleColumnIndices: function(isDataRowLayout) {
  if(!this.visibleColumnIndices)
   this.visibleColumnIndices = { header: this.CalculateVisibleColumnIndices(false), data: this.CalculateVisibleColumnIndices(true) };
  return isDataRowLayout ? this.visibleColumnIndices.data : this.visibleColumnIndices.header;
 },
 GetVisibleDataColumnIndices: function() {
  if(!this.visibleDataColumnIndices)
   this.visibleDataColumnIndices = this.GetVisibleColumnIndices()
    .filter(function(i) { return this.grid.GetColumn(i).isDataColumn; }.bind(this));
  return this.visibleDataColumnIndices;
 },
 CalculateVisibleColumnIndices: function(isDataRowLayout) {
  var layout = isDataRowLayout ? this.GetDataRowLayout() : this.GetHeaderLayout();
  return ASPx.Data.ArrayFlatten(layout).map(function(n) { return n.columnIndex; });
 },
 GetAdaptiveRowInfo: function() {
  var adaptiveNodes = [ ];
  var tree = this.GetVisibleDataRowTree();
  this.FindAdaptiveNodes(tree, adaptiveNodes, false);
  for(var i = 0; i < adaptiveNodes.length; i++) {
   var node = adaptiveNodes[i];
   ASPx.Data.ArrayRemove(node.parent.children, node);
  }
  var dataRowLayout = [ ];
  this.PopulateRowLayout(tree, dataRowLayout);
  this.Invalidate();
  return { 
   dataRowLayout: dataRowLayout, 
   adaptiveColumnIndices: adaptiveNodes.map(function(n) { return n.columnIndex; }) 
  };
 },
 FindAdaptiveNodes: function(node, adaptiveNodes, isAdaptiveParent) {
  var isColumnAdaptive = node.column && node.column.adaptiveHidden;
  if(isColumnAdaptive || isAdaptiveParent) {
   adaptiveNodes.push(node);
   isAdaptiveParent |= isColumnAdaptive;
  }
  for(var i = 0; i < node.children.length; i++)
   this.FindAdaptiveNodes(node.children[i], adaptiveNodes, isAdaptiveParent);
 },
 EnsureTrees: function() {
  this.GetVisibleHeaderTree();
  this.GetVisibleDataRowTree();
 },
 GetVisibleHeaderTree: function() {
  if(!this.visibleHeaderTree) {
   var root = this.CreateTreeNode(-1, null);
   this.PopulateVisualTreeNode(root, this.GetVisibleChildColumns(-1), false);
   this.PopulateHeaderNodeSpans(root);
   this.visibleHeaderTree = root;
  }
  return this.visibleHeaderTree;
 },
 GetVisibleDataRowTree: function() {
  if(!this.visibleDataRowTree) {
   var root = this.CreateTreeNode(-1, null);
   this.PopulateVisualTreeNode(root, this.GetVisibleChildColumns(-1), true);
   this.PopulateDataRowNodeSpans(root);
   this.visibleDataRowTree = root;
  }
  return this.visibleDataRowTree;
 },
 GetHeaderLayout: function() {
  if(!this.headerLayout) {
   this.headerLayout = [ ];
   this.PopulateRowLayout(this.GetVisibleHeaderTree(), this.headerLayout);
  }
  return this.headerLayout;
 },
 GetDataRowLayout: function() {
  if(!this.dataRowLayout) {
   this.dataRowLayout = [ ];
   this.PopulateRowLayout(this.GetVisibleDataRowTree(), this.dataRowLayout);
  }
  return this.dataRowLayout;
 },
 GetHeaderLeafs: function() { 
  if(!this.headerLeafs) {
   this.headerLeafs = [ ];
   this.PopulateLeafs(this.GetVisibleHeaderTree(), this.headerLeafs);
  }
  return this.headerLeafs;
 },
 GetDataRowLeafs: function() { 
  if(!this.dataRowLeafs) {
   this.dataRowLeafs = [ ];
   this.PopulateLeafs(this.GetVisibleDataRowTree(), this.dataRowLeafs);
  }
  return this.dataRowLeafs;
 },
 PopulateVisualTreeNode: function(node, visibleColumns, isDataRowTree) {
  var nodeHash = isDataRowTree ? this.dataRowNodeHash : this.headerNodeHash;
  for(var i = 0; i < visibleColumns.length; i++) {
   var bandNode = node;
   var column = visibleColumns[i];
   var childColumns = this.GetVisibleChildColumns(column.index);
   if(this.UseColumnInVisualTree(column, childColumns, isDataRowTree)) {
    var child = this.CreateTreeNode(column.index, node);
    node.children.push(child);
    nodeHash[column.index] = child;
    bandNode = child;
   }
   if(childColumns.length > 0)
    this.PopulateVisualTreeNode(bandNode, childColumns, isDataRowTree);
  }
 },
 UseColumnInVisualTree: function(column, childColumns, isDataRowTree) {
  if(column.groupIndex > -1 && !this.GetShowGroupedColumns())
   return false;
  if(isDataRowTree && column.isBand) {
   var childBandColumns = childColumns.filter(function(c) { return c.isBand; });
   if(childBandColumns.length > 0)
    return false;
   var visibleChildrenInTree = childColumns.filter(function(c) { return this.UseColumnInVisualTree(c, this.GetVisibleChildColumns(c.index), isDataRowTree); }.bind(this));
   return visibleChildrenInTree.length === 0;
  }
  return true;
 },
 GetChildColumns: function(columnIndex) {
  if(!this.childColumnHash[columnIndex])
   this.childColumnHash[columnIndex] = this.GetAllColumns().filter(function(c) { return c.parentIndex === columnIndex; });
  return this.childColumnHash[columnIndex];
 },
 GetVisibleChildColumns: function(columnIndex, unsorted) {
  columnIndex = parseInt(columnIndex);
  if(unsorted)
   return this.FindVisibleChildColumns(columnIndex, unsorted);
  if(!this.sortedVisibleChildColumnsHash[columnIndex])
   this.sortedVisibleChildColumnsHash[columnIndex] = this.FindVisibleChildColumns(columnIndex);
  return this.sortedVisibleChildColumnsHash[columnIndex];
 },
 FindVisibleChildColumns: function(columnIndex, unsorted) {
  var columns = this.GetChildColumns(columnIndex).filter(function(c) { return c.visible; }.bind(this));
  if(!unsorted)
   columns.sort(function(c1, c2) {
    var isRootLevel = columnIndex === -1;
    if(isRootLevel && this.IsColumnFixed(c1.index) !== this.IsColumnFixed(c2.index))
     return this.IsColumnFixed(c1.index) ? -1 : 1;
    if(c1.visibleIndex > c2.visibleIndex)
     return 1;
    if(c1.visibleIndex < c2.visibleIndex)
     return -1;
    return c1.collectionIndex - c2.collectionIndex;
   }.aspxBind(this));
  return columns;
 },
 PopulateRowLayout: function(node, layout) {
  for(var i = 0; i < node.children.length; i++) {
   var child = node.children[i];
   var levelIndex = this.FindNodeLayoutLevelIndex(child);
   while(layout.length < levelIndex + 1)
    layout.push([ ]);
   layout[levelIndex].push(child);
   this.PopulateRowLayout(child, layout);
  }
 },
 PopulateLeafs: function(node, leafs) {
  for(var i = 0; i < node.children.length; i++) {
   var child = node.children[i];
   if(child.children.length > 0)
    this.PopulateLeafs(child, leafs);
   else
    leafs.push(child);
  }
 },
 FindNodeLayoutLevelIndex: function(node) {
  var level = 0;
  node = node.parent;
  while(node.parent) {
   level += node.rowSpan;
   node = node.parent;
  }
  return level;
 },
 PopulateDataRowNodeSpans: function(root) {
  this.GetVisibleHeaderTree(); 
  root.rowSpan = root.colSpan = 1;
  var useBandedRowLayout = true; 
  for(var key in this.dataRowNodeHash) {
   if(!this.dataRowNodeHash.hasOwnProperty(key)) continue;
   var dataRowNode = this.dataRowNodeHash[key];
   var headerNode = this.headerNodeHash[key];
   dataRowNode.colSpan = headerNode.colSpan;
   dataRowNode.rowSpan = useBandedRowLayout ? headerNode.rowSpan : 1;
  }
  var bandColumnIndices = [ ];
  for(var key in this.headerNodeHash) {
   if(!this.headerNodeHash.hasOwnProperty(key)) continue;
   var headerNode = this.headerNodeHash[key];
   if(headerNode.column && headerNode.column.isBand)
    bandColumnIndices.push(headerNode.column.index);
  }
  if(bandColumnIndices.length > 0 && useBandedRowLayout)
   this.NormalizeDataRowTreeNodeRowSpans(bandColumnIndices);
 },
 NormalizeDataRowTreeNodeRowSpans: function(bandColumnIndices) {
  var matrix = this.CreateLayoutMatrixInfo(this.GetHeaderLayout()).matrix;
  var height = matrix.length;
  var width = matrix[0].length;
  for(var j = 0; j < width; j++) {
   var lastNotBandColumnIndex = matrix[height - 1][j];
   for(var i = height - 2; i >= 0; i--) {
    var columnIndex = matrix[i][j];
    if(bandColumnIndices.indexOf(columnIndex) > -1)
     matrix[i][j] = lastNotBandColumnIndex;
    else 
     lastNotBandColumnIndex = columnIndex;
   }
  }
  for(var i = height - 1; i > 0; i--) {
   if(this.IsMatrixRowEqual(matrix, i, i - 1))
    matrix.splice(i, 1);
  }
  height = matrix.length;
  var columnRowSpan = { };
  for(var j = 0; j < width; j++) {
   var columnIndices = this.GetColumnIndicesByColInd(height, j, matrix);
   var groupedIndices = columnIndices.reduce(function(r, cI) { (r[cI] = r[cI] || [ ]).push(cI); return r; }, { });
   for(var columnIndex in groupedIndices) {
    if(!groupedIndices.hasOwnProperty(columnIndex)) continue;
    columnRowSpan[columnIndex] = groupedIndices[columnIndex].length;
   }
  }
  for(var columnIndex in columnRowSpan) {
   if(!columnRowSpan.hasOwnProperty(columnIndex)) continue;
   this.dataRowNodeHash[columnIndex].rowSpan = columnRowSpan[columnIndex];
  }
 },
 GetColumnIndicesByColInd: function(height, colInd, matrix) {
  return ASPx.Data.Range(height).map(function(i) { return matrix[i][colInd]; });
 },
 PopulateHeaderNodeSpans: function(root) {
  var leafs = [ ];
  this.PopulateLeafs(root, leafs);
  if(leafs.length === 0)
   return;
  var leafTreeLines = [ ];
  for(var i = 0; i < leafs.length; i++) {
   var treeLine = [ ];
   var current = leafs[i];
   while(current != null) {
    current.colSpan |= 0;
    current.colSpan++;
    current.rowSpan = current.column ? current.column.rowSpan : 1;
    treeLine.push(current);
    current = current.parent;
   }
   leafTreeLines.push(treeLine);
  }
  var normalizeIterationCount = 2;
  for(var i = 0; i < normalizeIterationCount; i++)
   this.NormalizeHeaderNodesRowSpan(leafTreeLines);
 },
 NormalizeHeaderNodesRowSpan: function(leafTreeLines) {
  var height = leafTreeLines.reduce(function(prevValue, treeLine) { return Math.max(prevValue, treeLine.length); }, 0);
  for(var i = 0; i < leafTreeLines.length; i++) {
   var treeLine = leafTreeLines[i];
   var rowSpanHeight = treeLine.reduce(function(prevValue, node) { return prevValue + node.rowSpan; }, 0);
   var diff = height - rowSpanHeight;
   if(diff < 0)
    this.CalculateTreeLineRowSpanProportionally(treeLine, height);
   else
    treeLine[0].rowSpan += diff; 
  }
 },
 CalculateTreeLineRowSpanProportionally: function(treeLine, requiredHeight) {
  var rowSpans = this.CalculateTreeLineRowSpanProportionallyCore(treeLine, requiredHeight);
  for(var i = 0; i < treeLine.length; i++)
   treeLine[i].rowSpan = rowSpans[i];
 },
 CalculateTreeLineRowSpanProportionallyCore: function(treeLine, requiredHeight) {
  var result = [ ];
  var height = treeLine.reduce(function(prevValue, node) { return prevValue + node.rowSpan; }, 0);
  var delta = requiredHeight - height;
  if(delta >= 0) 
   return result;
  delta *= -1;
  var excess = delta;
  for(var i = 0; i < treeLine.length; i++) {
   var node = treeLine[i];
   result[i] = node.rowSpan;
   if(excess <= 0) continue;
   var k = Math.ceil(delta * node.rowSpan / height) + 1;
   if(k >= node.rowSpan)
    k = node.rowSpan - 1;
   excess -= k;
   if(excess < 0)
    k += excess;
   result[i] -= k;
  }
  return result;
 },
 CreateTreeNode: function(columnIndex, parent) {
  if(parent === undefined)
   parent = null;
  return { columnIndex: columnIndex, children: [ ], parent: parent, column: this.FindColumn(columnIndex) };
 },
 CreateTreeLine: function(node, insertCurrent) {
  var result = [ ];
  var current = insertCurrent ? node : node.parent;
  while(current.column !== null) {
   result.push(current);
   current = current.parent;
  }
  return result;
 },
 Invalidate: function() {
  this.visibleHeaderTree = null;
  this.visibleDataRowTree = null;
  this.headerLayout = null;
  this.dataRowLayout = null;
  this.headerLeafs = null;
  this.dataRowLeafs = null;
  this.headerNodeHash = { };
  this.dataRowNodeHash = { };
  this.sortedVisibleChildColumnsHash = { };
  this.childColumnHash = { };
  this.fixedColumnsHash = null;
  this.visibleColumnIndices = null;
  this.visibleDataColumnIndices = null;
  this.rightTreeLines = null;
  this.cachedGroupColumns = -1;
 },
 GetOrderedColumns: function() {
  var columns = this.GetAllColumns();
  columns.sort(function(c1, c2) { return c1.index - c2.index; });
  return columns;
 },
 SerializeColumnVisibleState: function() {
  var state = [ ];
  var columns = this.GetOrderedColumns();
  state.push("clientvis" + columns.length);
  for(var i = 0; i < columns.length; i++) {
   var column = columns[i];
   state.push((column.visible ? "t" : "f") + column.visibleIndex);
  }
  return state.join("|");
 },
 SerializeColumnHierarchyState: function() {
  var state = [ ];
  var columns = this.GetOrderedColumns();
  state.push("clienthierar" + columns.length);
  for(var i = 0; i < columns.length; i++) {
   var column = columns[i];
   state.push(column.index + "|" + column.parentIndex);
  }
  return state.join("|");
 },
 CreateLayoutMatrixInfo: function(layout) {
  var matrix = [ ];
  var inverseMatrix = { };
  for(var i = 0; i < layout.length; i++) {
   var lastFreeIndex = 0;
   var level = layout[i];
   for(var j = 0; j < level.length; j++) {
    var node = level[j];
    lastFreeIndex = this.FindMatrixFreeCellIndex(matrix, i, lastFreeIndex);
    this.FillMatrixBlock(matrix, inverseMatrix, i, lastFreeIndex, node.rowSpan, node.colSpan, node.columnIndex);
    lastFreeIndex += node.colSpan;
   }
  }
  return { matrix: matrix, inverseMatrix: inverseMatrix };
 },
 FindMatrixFreeCellIndex: function(matrix, rowIndex, lastFreeCell) {
  var row = matrix[rowIndex];
  var result = lastFreeCell;
  if(row) {
   while(!isNaN(row[result]))
    result++;
  } 
  return result;
 },
 FillMatrixBlock: function(matrix, inverseMatrix, rowIndex, cellIndex, rowSpan, colSpan, columnIndex) {
  var rect = {
   top: rowIndex,
   bottom: rowIndex + rowSpan - 1,
   left: cellIndex,
   right: cellIndex + colSpan - 1
  };
  for(var i = rect.top; i <= rect.bottom; i++) {
   while(!matrix[i])
    matrix.push([]);
   for(var j = rect.left; j <= rect.right; j++)
    matrix[i][j] = columnIndex;
  }
  inverseMatrix[columnIndex] = rect;
 },
 IsMatrixRowEqual: function(matrix, i1, i2) {
  var row1 = matrix[i1];
  var row2 = matrix[i2];
  for(var j = 0; j < row1.length; j++) {
   if(row1[j] !== row2[j])
    return false;
  }
  return true;
 }
});
ASPx.GridViewColumnHelper = GridViewColumnHelper;
})();
(function(){
var GridViewConsts = {
 AdaptiveGroupPanelID: "DXAGroupPanel",
 AdaptiveHeaderPanelID: "DXAHeaderPanel",
 AdaptiveFooterPanelID: "DXAFooterPanel",
 AdaptiveGroupHeaderID: "DXADGroupHeader",
 AdaptiveHeaderID: "DXADHeader",
 HeaderTableID: "DXHeaderTable",
 FooterTableID: "DXFooterTable",
 FilterRowID: "DXFilterRow",
 DataRowID: "DXDataRow",
 DetailRowID: "DXDRow",
 EditingRowID: "DXEditingRow",
 EditingErrorItemID: "DXEditingErrorItem",
 EditFormTableCellID: "DXEFC",
 AdaptiveDetailRowID: "DXADRow",
 PreviewRowID: "DXPRow",
 GroupRowID: "DXGroupRow",
 GroupRowExpID: "DXGroupRowExp",
 EmptyDataRowID: "DXEmptyRow",
 FooterRowID: "DXFooterRow",
 GroupFooterRowID: "DXGFRow",
 HeaderRowID: "DXHeadersRow",
 BatchChangesPreviewGroupRowID: "DXBatchChangesPreviewGroupRow",
 BatchEditorContainerID: "DXBEC",
 CommandButtonID: "DXCBtn",
 DataRowTemplateCellID: "tcrow",
 GroupFooterRowTemplateCellID: "tcgfr",
 FooterRowTemplateCellID: "tcFooterRow",
 FilterRowTemplateCellID: "tcFR",
 CustDialogWindowID: "DXCDWindow",
 DataRowPattern: "_DXDataRow(?:-?\\d+|new)(?:_\\d+)?$",
 BandedRowPattern: "_DXDataRow(-?\\d+|new)_(\\d+)$",
 GridViewMarkerCssClass: "dxgv",
 ControlClassName: "dxgvControl",
 DataRowCssClass: "dxgvDataRow",
 GroupRowCssClass: "dxgvGroupRow",
 EmptyPagerRowCssClass: "dxgvEPDR",
 GroupFooterRowClass: "dxgvGroupFooter",
 GroupPanelCssClass: "dxgvGroupPanel",
 FooterRowClass: "dxgvFooter",
 FooterScrollDivContainerCssClass: "dxgvFSDC",
 HeaderScrollDivContainerCssClass: "dxgvHSDC",
 HeaderCellCssClass: "dxgvHeader",
 HeaderCellEllipsisContainerCssClass: "dxgvHCEC",
 CommandColumnCellCssClass: "dxgvCommandColumn",
 IndentCellCssClass: "dxgvIndentCell",
 InlineEditCellCssClass: "dxgvInlineEditCell",
 DetailCellCssClass: "dxgvDetailCell",
 DetailIndentCellCssClass: "dxgvDIC",
 DetailButtonCellCssClass: "dxgvDetailButton",
 AdaptivityDisabledCssClass: "dxgvAdD",
 AdaptivityEnabledCssClass: "dxgvAE",
 AdaptivityWithLimitEnabledCssClass: "dxgvALE",
 AdaptiveHiddenCssClass: "dxgvAH",
 AdaptiveIndentCellCssClass: "dxgvAIC",
 AdaptiveDetailShowButtonCssClass: "dxgvADSB",
 AdaptiveDetailHideButtonCssClass: "dxgvADHB",
 AdaptiveDetailTableCssClass: "dxgvADT",
 AdaptiveDetailCaptionCellCssClass: "dxgvADCC",
 AdaptiveDetailDataCellCssClass: "dxgvADDC",
 AdaptiveDetailSpacerCellCssClass: "dxgvADSC",
 AdaptiveDetailCommandCellCssClass: "dxgvADCMDC",
 AdaptiveDetailLayoutItemContentCssClass: "dxgvADLIC",
 HorizontalExtraCellClassName: "dxgvHEC",
 HiddenHorizontalExtraCellMarkerClassName: "dxgvHHEC",
 FirstVisibleRowClassName: "dxgvFVR",
 LastVisibleRowClassName: "dxgvLVR",
 AccessibilityInvisibleRowClassName: "dxAIR",
 PageBottomVisibleCellsMarkerClassName: "dxgvPBVC",
 RemoveRightBorderClassName: "dxgRRB",
 BatchEditHiddenItemClassName: "dxgvBEHI",
 BatchEditChangesPreviewClassName: "dxgvBECP",
 BatchEditChangesPreviewScrollDivClassName: "dxgvBECPSD",
 CommandButtonTemplateReplacementMarkerCssClass: "dxgvCBTR",
 UnspecifiedScrollPosition: -1
};
var GridViewRowType = { Header: 1, Filter: 2, Data: 3, Group: 4, GroupFooter: 5, Footer: 6, InlineEdit: 7, BatchEtalon: 8 };
var GridViewAdaptiveDetailButtonPosition = { None: 0, Left: 1, Right: 2 };
var ASPxClientGridView = ASPx.CreateClass(ASPxClientGridBase, {
 NewRowVisibleIndex: -2147483647,
 constructor: function(name){
  this.constructor.prototype.constructor.call(this, name);
  this.editMode = 2;
  this.enablePostponeResizing = false;
  this.FocusedRowChanged = new ASPxClientEvent();
  this.RowFocusing = new ASPxClientEvent();
  this.ColumnStartDragging  = new ASPxClientEvent();
  this.ColumnResizing  = new ASPxClientEvent();
  this.ColumnResized  = new ASPxClientEvent();
  this.ColumnMoving = new ASPxClientEvent();
  this.RowExpanding  = new ASPxClientEvent();
  this.RowCollapsing  = new ASPxClientEvent();
  this.DetailRowExpanding  = new ASPxClientEvent();
  this.DetailRowCollapsing  = new ASPxClientEvent();
  this.RowClick  = new ASPxClientEvent();
  this.RowDblClick  = new ASPxClientEvent();
  this.ContextMenu = new ASPxClientEvent();
  this.ContextMenuItemClick = new ASPxClientEvent();
  this.BatchEditRowChangesCanceling = new ASPxClientEvent();
  this.BatchEditRowValidating = new ASPxClientEvent();
  this.BatchEditRowInserting = new ASPxClientEvent();
  this.BatchEditRowDeleting = new ASPxClientEvent();
  this.BatchEditRowRecovering = new ASPxClientEvent();
  this.BatchEditChangesPreviewShowing = new ASPxClientEvent();
  this.BatchEditChangesPreviewShown = new ASPxClientEvent();
  this.allowFixedGroups = false;
  this.virtualScrollMode = 0;
  this.fixedColumnCount = 0;
  this.hasDetailRows = false;
  this.showDetailButton = true;
  this.showGroupButton = true;
  this.adaptiveButtonPos = GridViewAdaptiveDetailButtonPosition.None;
  this.showColumnHeaders = true;
  this.showGroupedColumns = false;
  this.hasMergedGroups = false;
  this.hasFilterRowTemplate = false;
  this.hasDataRowTemplate = false;
  this.hasGroupRowTemplate = false;
  this.hasFooterRowTemplate = false;
  this.hasGroupFooterRowTemplate = false;
  this.hasEditFormTemplate = false;
  this.allowChangeColumnHierarchy = false;
  this.allowColumnClientMove = false;
  this.tableHelper = null;
  this.dragHelper = null;
  this.batchEditHelper = null;
  this.custDialogHelper = null;
  this.columnAdjustor = null;
  this.virtualScrollingDelay = 500;
  this.adaptivityMode = 0;
  this.adaptiveColumnsOrder = [];
  this.adaptivityHelper = null;
  this.enableCustDialog = false;
  this.custDialogApplyButtonName = "";
  this.custDialogCloseButtonName = "";
 },
 applyAccessibilityAttributes: function() {
  this.setAriaDescription("headerLayoutElements");
 },
 GetGroupPanelContextMenu: function() { return ASPx.GetControlCollection().Get(this.name + "_DXContextMenu_GroupPanel"); },
 GetColumnContextMenu: function() { return ASPx.GetControlCollection().Get(this.name + "_DXContextMenu_Columns"); },
 GetRowContextMenu: function() { return ASPx.GetControlCollection().Get(this.name + "_DXContextMenu_Rows"); },
 GetFooterContextMenu: function() { return ASPx.GetControlCollection().Get(this.name + "_DXContextMenu_Footer"); },
 GetGroupFooterContextMenu: function() { return ASPx.GetControlCollection().Get(this.GetGroupFooterContextMenuName()); },
 GetCustDialogWindow: function() { return ASPx.GetControlCollection().Get(this.name + "_" + GridViewConsts.CustDialogWindowID); },
 GetCustDialogHelper: function() {
  if(!this.custDialogHelper && typeof(ASPx.GridViewCustDialogHelper) != "undefined" && this.GetCustDialogWindow())
   this.custDialogHelper = this.CreateCustDialogHelper();
  return this.custDialogHelper;
 },
 CreateCustDialogHelper: function() { return new ASPx.GridViewCustDialogHelper(this); },
 GetGroupFooterContextMenuName: function() { return this.name + "_DXContextMenu_GroupFooter"; },
 GetColumnCaption: function(columnIndex) {
  var result = "";
  if (this.columnCaptions && this.columnCaptions[columnIndex]) {
   result = this.columnCaptions[columnIndex];
  }
  return result;
 },
 GetItem: function(visibleIndex, level){
  var res = this.GetDataRow(visibleIndex, level);
  if(res == null) res = this.GetGroupRow(visibleIndex);
  return res;
 },
 GetDataItem: function(visibleIndex) { return this.GetDataRow(visibleIndex); },
 IsDataItem: function(visibleIndex) { return this.IsDataRow(visibleIndex); },
 GetRow: function(visibleIndex) { return this.GetItem(visibleIndex); },
 GetDataItemIDPrefix: function() { return GridViewConsts.DataRowID; },
 GetEmptyDataItemIDPostfix: function() { return GridViewConsts.EmptyDataRowID; },
 GetHotTrackItemPostfixes: function(){
  if(!this.HasBandedDataRows())
   return ASPxClientGridBase.prototype.GetHotTrackItemPostfixes.call(this);
  var postfixes = [ ];
  var layout = this.GetLayoutHelper().GetEtalonDataRowLayout();
  for(var i = 0; i < layout.length; i++)
   postfixes.push('_' + i);
  return postfixes;
 },
 GetEmptyDataItemCell: function() { 
  var row = this.GetEmptyDataItem();
  return row ? this.GetLastNonAdaptiveIndentCell(row) : null;
 },
 GetDataRow: function(visibleIndex, level) {
  return this.GetChildElement(GridViewConsts.DataRowID + visibleIndex + this.GetBandedRowLevelPostfix(level));
 },
 GetDataRowSelBtn: function(index) { 
  var rowsToCheck = this.GetRowsToFindSelectButton(index);
  var idPostfix = this.GetDataRowSelBtnIDPrefix(index);
  for(var i = 0; i < rowsToCheck.length; i++) {
   var button = this.FindSelectButton(rowsToCheck[i], idPostfix);
   if(button) return button;
  }  
  return null; 
 },
 GetRowsToFindSelectButton: function(visibleIndex) {
  var rows = this.GetBandedDataRows(visibleIndex);
  if(this.HasAnyAdaptiveElement())
   rows.push(this.GetAdaptiveDetailRow(visibleIndex));
  return rows;
 },
 GetEditingRow: function(obj, level) {
  if(!this.HasBandedDataRows())
   return ASPxClientGridBase.prototype.GetEditingRow.call(this, obj);
  return ASPx.GetElementById((obj ? obj.name : this.name) + this.EditingRowID + this.GetBandedRowLevelPostfix(level));
 },
 GetEditingRowElements: function() {
  var rows = [];
  ASPx.GetNodesByPartialId(this.GetMainTable(), this.EditingRowID, rows);
  var adaptiveInlineEditRow = this.GetAdaptiveInlineEditRow();
  if(adaptiveInlineEditRow)
   rows.push(adaptiveInlineEditRow);
  return rows;
 },
 GetBatchEtalonRow: function(levelIndex) {
  var partialId = this.GetDataItemIDPrefix() + this.EtalonBatchRecordPostFix;
  return this.GetChildElement(partialId + this.GetBandedRowLevelPostfix(levelIndex));
 },
 GetBandedRowLevelPostfix: function(level){
  if(!this.HasBandedDataRows()) return "";
  if(!ASPx.IsExists(level))
   level = 0;
  return "_" + level;
 },
 GetBatchDataRow: function(visibleIndex) {   
  return this.GetDataRow(visibleIndex);
 },
 GetBatchBandedDataRows: function(visibleIndex) { 
  return this.GetBandedDataRows(visibleIndex);
 },
 GetBatchDataCell: function(visibleIndex, columnIndex) {
  var column = this.GetColumn(columnIndex);
  if(!column) return null;
  var adaptiveCell = column.adaptiveHidden ? this.GetAdaptiveCell(visibleIndex, columnIndex) : null;
  return adaptiveCell ? adaptiveCell : this.GetDataCell(visibleIndex, columnIndex);
 },
 GetBatchChangesPreviewGroupRow: function(groupIndex) { return this.GetChildElement(GridViewConsts.BatchChangesPreviewGroupRowID + groupIndex); },
 GetBatchEditPreviewChangesGroupCells: function() {  
  var rows = ASPx.GetNodesByPartialClassName(this.GetGridTD(), "dxgvBatchEditChangesPreviewGroupRow");  
  return rows.map(function(row) { return this.GetLastNonAdaptiveIndentCell(row);}.bind(this));
 },
 IsBatchChangesViewMode: function () {
  var helper = this.GetBatchEditHelper();
  return helper && helper.IsChangesViewVisible();
 },
 GetRecordKeysForNavigation: function(includeDeleted) {
  if(this.IsBatchChangesViewMode())
   return this.GetBatchEditHelper().GetChangedRecordKeys();
  return this.GetRecordKeys(includeDeleted);
 },
 GetBatchOtherPagesChangedRecordVisibleIndices: function () {
  return this.GetBatchEditHelper().GetOtherPagesChangedRecordKeys().map(function(key) { return this.ConvertKeyToVisibleIndex(key); }.bind(this));
 },
 GetEditFormTableCell: function() { return ASPx.GetElementById(this.name + "_" + GridViewConsts.EditFormTableCellID); },
 HasBandedDataRows: function() { return this.GetLayoutHelper().GetEtalonDataRowLayout().length > 1; }, 
 GetBandedDataRows: function(visibleIndex) {
  var height = this.GetLayoutHelper().GetLayoutHeight();
  var rows = ASPx.Data.Range(height, 0).map(function(i) { return this.GetDataRow(visibleIndex, i); }.bind(this));
  return rows.filter(function(row) { return !!row; });
 },
 GetBandedInlineEditRows: function() {
  var height = this.GetLayoutHelper().GetLayoutHeight();
  var rows = ASPx.Data.Range(height, 0).map(function(i) { return this.GetEditingRow(this, i); }.bind(this));
  return rows.filter(function(row) { return !!row; });
 },
 GetEditingCell: function(columnIndex) { 
  var row = this.GetEditingRow();
  var cellIndex = this.GetDataCellIndex(columnIndex);
  return row ? row.cells[cellIndex] : null;
 },
 GetEditingErrorCell: function(row) { 
  var row = row || this.GetEditingErrorItem();
  return row ? this.GetLastNonAdaptiveIndentCell(row) : null;
 },
 GetErrorTextContainer: function(displayIn) {
  var errorRow = this.GetEditingErrorItem(displayIn);
  if(!errorRow) {
   var editRow = this.GetEditingRow(displayIn);
   if(editRow) {
    errorRow = this.CreateEditingErrorItem();
    errorRow.id = editRow.id.replace("DXEditingRow", this.EditingErrorItemID);
    this.UpdateEditingErrorRowColSpan(errorRow, editRow);
    ASPx.InsertElementAfter(errorRow, editRow);
   }
  }
  return this.GetEditingErrorCell(errorRow);
 },
 CreateEditingErrorItem: function() {
  var wrapperElement = document.createElement("div");
  var helper = this.GetStyleHelper();
  wrapperElement.innerHTML = "<table><tbody>" + helper.GetErrorItemHtml() + "</tbody></table>";
  var row = wrapperElement.firstChild.rows[0];
  for(var i = 0; i < row.cells.length; i++) {
   var cell = row.cells[i];
   var colSpan = parseInt(ASPx.Attr.GetAttribute(cell, "data-colSpan"));
   if(!isNaN(colSpan)) 
    cell.colSpan = colSpan;
  }
  return row;
 },
 UpdateEditingErrorRowColSpan: function(row, previousRow) {
  if(this.HasAnyAdaptiveElement()) {
   var errorCell = this.GetLastNonAdaptiveIndentCell(row);
   var adaptiveSampleCell = this.GetSampleAdaptiveDetailCell();
   errorCell.colSpan = adaptiveSampleCell.colSpan;
   errorCell.originalColSpan = adaptiveSampleCell.originalColSpan;
  } 
  if(this.GetFixedColumnsHelper() && this.IsEditFormEditMode()) {
   var errorCell = this.GetLastNonAdaptiveIndentCell(row);
   var editRowCell = this.GetLastNonAdaptiveIndentCell(previousRow);
   errorCell.colSpan = editRowCell.colSpan;
  }
 },
 GetCustDialogApplyButton: function() { return ASPx.GetControlCollection().Get(this.custDialogApplyButtonName); },
 GetCustDialogCloseButton: function() { return ASPx.GetControlCollection().Get(this.custDialogCloseButtonName); },
 PrepareCommandButton: function(button) {
  ASPxClientGridBase.prototype.PrepareCommandButton.call(this, button);
  if(this.enableCustDialog) {
   this.EnsureCommandButtonClickArgs(button);
   var commandName = button.gvClickArgs && button.gvClickArgs[0][0];
   if(commandName === "CustDialogApply")
    this.custDialogApplyButtonName = button.name;
   if(commandName === "CustDialogClose")
    this.custDialogCloseButtonName = button.name;
  }
 },
 GetDetailRow: function(visibleIndex) { return this.GetChildElement(GridViewConsts.DetailRowID + visibleIndex); },
 GetDetailCell: function(visibleIndex) { 
  var row = this.GetDetailRow(visibleIndex);
  return row ? this.GetLastNonAdaptiveIndentCell(row) : null;
 },
 GetPreviewRow: function(visibleIndex) { return this.GetChildElement(GridViewConsts.PreviewRowID + visibleIndex); },
 GetPreviewCell: function(visibleIndex) { 
  var row = this.GetPreviewRow(visibleIndex);
  return row ? this.GetLastNonAdaptiveIndentCell(row) : null;
 },
 GetSampleAdaptiveDetailRow: function() { return this.GetChildElement(GridViewConsts.AdaptiveDetailRowID); },
 GetSampleAdaptiveDetailCell: function() { 
  var row = this.GetSampleAdaptiveDetailRow();
  return row ? this.GetLastNonAdaptiveIndentCell(row) : null;
 },
 GetAdaptiveDataRow: function(visibleIndex) { 
  var getDataItem = this.GetDataRow.aspxBind(this);
  var isValidDataItem = function(item) { return !!item; };
  var getInlineEditItem = this.GetEditingRow.aspxBind(this);
  return this.GetAdaptiveItem(visibleIndex, getDataItem, isValidDataItem, getInlineEditItem);
 },
 GetBandedAdaptiveDataRows: function(visibleIndex) {
  var getDataItem = this.GetBandedDataRows.aspxBind(this);
  var isValidDataItem = function(item) { return item && item.length; };
  var getInlineEditItem = this.GetBandedInlineEditRows.aspxBind(this);
  return this.GetAdaptiveItem(visibleIndex, getDataItem, isValidDataItem, getInlineEditItem) || [ ];
 },
 GetAdaptiveItem: function(visibleIndex, getDataItem, isValidDataItem, getInlineEditItem) {
  if(this.IsGroupRow(visibleIndex))
   return null;
  var item = getDataItem(visibleIndex);
  if(isValidDataItem(item))
   return item;
  if(this.IsInlineEditMode())
   return getInlineEditItem();
  return null;
 },
 GetAdaptiveDetailRow: function(visibleIndex, forceCreate) {
  var row = this.GetChildElement(GridViewConsts.AdaptiveDetailRowID + visibleIndex);
  if(!row && forceCreate) {
   var sampleRow = this.GetSampleAdaptiveDetailRow();
   var dataRow = null;
   if(this.HasBandedDataRows()){
    var bandedRows = this.GetBandedAdaptiveDataRows(visibleIndex);
    if(bandedRows.length)
     dataRow = bandedRows[bandedRows.length - 1];
   } else {
    dataRow = this.GetAdaptiveDataRow(visibleIndex);
   }
   if(sampleRow && dataRow) {
    row = sampleRow.cloneNode(true);
    row.id = this.name + "_" + GridViewConsts.AdaptiveDetailRowID + visibleIndex;
    this.GetLastNonAdaptiveIndentCell(row).originalColSpan = this.GetLastNonAdaptiveIndentCell(sampleRow).originalColSpan;
    this.EnsureAdaptiveDetailRowStyle(row, dataRow);
    ASPx.InsertElementAfter(row, dataRow);
    for(var i = 0; i < this.indentColumnCount; i++)
     row.cells[i].style.borderBottomWidth = dataRow.cells[i].style.borderBottomWidth;
   }
  }
  return row;
 },
 GetAdaptiveInlineEditRow: function() {
  if(!this.IsInlineEditMode() || !this.HasAdaptivity())
   return null;
  return this.GetAdaptiveDetailRow(this.editItemVisibleIndex);
 },
 GetAdaptiveHeaderContainer: function(columnIndex, adaptivePanel) { 
  if(!adaptivePanel) return null;
  var isGroupHeader = adaptivePanel === this.GetAdaptiveGroupPanel();
  var headerID = this.GetAdaptiveHeaderID(columnIndex, isGroupHeader);
  var adaptiveHeader = document.getElementById(headerID);
  if(!adaptiveHeader)
   adaptiveHeader = this.CreateAdaptiveHeader(adaptivePanel, headerID, isGroupHeader);
  return adaptiveHeader.dxHeaderContainer;
 },
 GetAdaptiveHeaderID: function(columnIndex, isGroupHeader) {
  return this.name + "_" + (isGroupHeader ? GridViewConsts.AdaptiveGroupHeaderID : GridViewConsts.AdaptiveHeaderID) + columnIndex;
 },
 CreateAdaptiveHeader: function(adaptivePanel, headerID, isGroupHeader) {
  var header = this.GetSampleAdaptiveHeader(isGroupHeader).cloneNode(true);
  header.id = headerID;
  ASPx.SetElementDisplay(header, true);
  header.dxHeaderContainer = this.FindAdaptiveHeaderContainer(header);
  adaptivePanel.appendChild(header);
  return header;
 },
 FindAdaptiveHeaderContainer: function(header) {
  var table = ASPx.GetChildByTagName(header, "TABLE", 0);
  return table.rows[0];
 },
 RemoveAdaptiveHeaders: function() {
  var columnIndices = this.GetVisibleColumnIndices();
  for(var i = 0; i < columnIndices.length; i++) {
   var column = this.GetColumn(columnIndices[i]);
   var headerID = this.GetAdaptiveHeaderID(column.index, column.groupIndex > -1);
   var header = document.getElementById(headerID);
   ASPx.RemoveElement(header);
  }
 },
 GetAdaptiveGroupPanel: function() { return this.GetChildElement(GridViewConsts.AdaptiveGroupPanelID); },
 GetAdaptiveHeaderPanel: function() { return this.GetChildElement(GridViewConsts.AdaptiveHeaderPanelID); },
 GetAdaptiveFooterPanel: function() { return this.GetChildElement(GridViewConsts.AdaptiveFooterPanelID); },
 GetSampleAdaptiveHeader: function(isGroupHeader) { return this.GetChildElement(isGroupHeader ? GridViewConsts.AdaptiveGroupHeaderID : GridViewConsts.AdaptiveHeaderID); },
 IsCellAdaptiveHidden: function(cell) {
  return ASPx.ElementContainsCssClass(cell, ASPx.GridViewConsts.AdaptiveHiddenCssClass);
 },
 IsAdaptiveDetailHideButton: function(button) {
  return ASPx.ElementContainsCssClass(button.GetMainElement(), ASPx.GridViewConsts.AdaptiveDetailHideButtonCssClass);
 },
 IsAdaptiveDetailShowButton: function(button) {
  return ASPx.ElementContainsCssClass(button.GetMainElement(), ASPx.GridViewConsts.AdaptiveDetailShowButtonCssClass);
 },
 GetAdaptiveCell: function(visibleIndex, columnIndex) {
  var adaptiveDetailsCell = this.GetAdaptiveDetailCell(visibleIndex, false);
  return adaptiveDetailsCell && adaptiveDetailsCell.adaptiveDetailsCells ? adaptiveDetailsCell.adaptiveDetailsCells[columnIndex] : null;
 },
 GetAdaptiveDetailCell: function(visibleIndex, forceCreate) { 
  var row = this.GetAdaptiveDetailRow(visibleIndex, forceCreate);
  return row ? this.GetLastNonAdaptiveIndentCell(row) : null;
 },
 GetDetailButtonCell: function(visibleIndex, fromAdaptiveRow) {
  var row = fromAdaptiveRow ? this.GetAdaptiveDetailRow(visibleIndex) : this.GetAdaptiveDataRow(visibleIndex);
  return ASPx.GetChildByPartialClassName(row, GridViewConsts.DetailButtonCellCssClass);
 },
 GetGroupRow: function(visibleIndex) { 
  var element = this.GetChildElement(GridViewConsts.GroupRowID + visibleIndex);
  if(!element)
   element = this.GetExpandedGroupRow(visibleIndex);
  return element; 
 },
 GetGroupCell: function(visibleIndex) { 
  var row = this.GetGroupRow(visibleIndex);
  return row ? this.GetLastNonAdaptiveIndentCell(row) : null;
 },
 GetGroupLevel: function(visibleIndex){
  var group = this.GetGroupRow(visibleIndex);
  return group ? this.GetFooterIndentCount(group) : -1;
 },
 GetExpandedGroupRow: function(visibleIndex) { return this.GetChildElement(GridViewConsts.GroupRowID + "Exp" + visibleIndex); },
 GetGroupFooterRow: function(visibleIndex, level) { return this.GetChildElement(GridViewConsts.GroupFooterRowID + visibleIndex + this.GetBandedRowLevelPostfix(level)); },
 GetGroupFooterVisibleIndices: function() { 
  var ids = [].slice.call(this.GetMainTable().rows).map(function(row) { return row.id; });
  return this.GetGroupFooterVisibleIndicesCore(ids);
 },
 GetGroupFooterVisibleIndicesCore: function(ids) {
  var result = [ ];
  var regex = this.GetGroupFooterVisibleIndicesRegExp();
  for(var i = 0; i < ids.length; i++) {
   var matches = ids[i].match(regex);
   if(matches && matches[1]) {
    var index = parseInt(matches[1]);
    if(result.indexOf(index) === -1)
     result.push(index);
   }
  }
  return result;
 },
 GetGroupFooterVisibleIndicesRegExp: function() {
  var pattern = "^" + this.name + "_" + GridViewConsts.GroupFooterRowID + "(\\d+)(_(\\d+))?$";
  return new RegExp(pattern);
 },
 _isGroupRow: function(row) { return row.id.indexOf(GridViewConsts.GroupRowID) > -1; },
 IsHeaderRow: function(row) { return this.IsHeaderRowID(row.id); },
 IsHeaderRowID: function(id) { return id.indexOf(this.name + "_" + GridViewConsts.HeaderRowID) == 0; },
 IsEmptyHeaderID: function(id) { return id.indexOf(this.EmptyHeaderSuffix) > -1; },
 IsBandedDataRowID: function(id) {
  var pattern = new RegExp(this.name + GridViewConsts.BandedRowPattern);
  return pattern.test(id);
 },
 CreateEndlessPagingHelper: function(){
  return new ASPx.GridViewEndlessPagingHelper(this);
 },
 GetCssClassNamePrefix: function() { return "dxgv"; },
 GetFilterRow: function(level) { return this.GetChildElement(GridViewConsts.FilterRowID + this.GetBandedRowLevelPostfix(level)); },
 GetFilterCell: function(columnIndex) { return this.GetLayoutHelper().GetFilterCell(columnIndex); },
 GetDataCellIndex: function(columnIndex, visibleIndex) { 
  return this.GetLayoutHelper().GetDataCellIndex(columnIndex, visibleIndex);
 },
 GetColumnIndexByDataCell: function(dataCell) { 
  if(!dataCell) return -1;
  if(ASPx.IsExists(dataCell.columnIndex)) return dataCell.columnIndex;
  var dataRow = this.GetDataItemByChild(dataCell);
  var visibleIndex = dataRow ? this.getItemIndex(dataRow.id) : -1;
  var level = dataRow ? this.GetBandedDataRowLevelByID(dataRow.id) : -1;
  return this.GetLayoutHelper().GetColumnIndex(dataCell.cellIndex, visibleIndex, level);
 },
 GetColumnIndexByHeaderCell: function(headerCell){
  var match = headerCell.id.match(/_col(\d+)$/);
  if(match)
   return match[1];
  return -1;
 },
 GetDataItemByChild: function(element) { return ASPx.GetParent(element, this.IsDataItemElement.aspxBind(this)); },
 IsDataItemElement: function(item) {
  if(!item || !item.id) return false;
  var regex = new RegExp(GridViewConsts.DataRowPattern);
  return regex.test(item.id) || item.id.indexOf(GridViewConsts.BatchChangesViewRowID) > 0;
 },
 GetDataCell: function(visibleIndex, columnIndex) {
  return this.GetLayoutHelper().GetDataCell(visibleIndex, columnIndex);
 },
 GetDataCellByRow: function(row, columnIndex, visibleIndex){
  if(!row)
   return null;
  var cellIndex = this.GetDataCellIndex(columnIndex, visibleIndex);
  return (0 <= cellIndex && cellIndex < row.cells.length) ? row.cells[cellIndex] : null;
 },
 GetVisibleColumnIndices: function() { return this.GetColumnHelper().GetVisibleColumnIndices(); },
 GetVisibleDataColumnIndices: function() { return this.GetColumnHelper().GetVisibleDataColumnIndices(); },
 IsSingleVisibleColumnWithData: function(column) {
  var visibleDataColumnIndices = this.GetVisibleDataColumnIndices();
  if(visibleDataColumnIndices.length === 1 && visibleDataColumnIndices[0] === column.index)
   return true;
  if(column.isBand && this.GetColumnHelper().GetIsParentForAllColumns(column.index, visibleDataColumnIndices))
   return true;
  return false;
 },
 GetArmatureCells: function(columnIndex) {
  var result = [ ];
  var cellIndex = this.GetDataCellIndex(columnIndex); 
  var tableHelper = this.GetTableHelper();
  if(tableHelper) {
   if(tableHelper.GetHeaderTable()) {
    var cells = tableHelper.GetArmatureCells(tableHelper.GetHeaderTable());
    if(cells) result.push(cells[cellIndex]);
   }
   if(tableHelper.GetContentTable()) {
    var cells = tableHelper.GetArmatureCells(tableHelper.GetContentTable());
    if(cells) result.push(cells[cellIndex]);
   }
   if(tableHelper.GetFooterTable()) {
    var cells = tableHelper.GetArmatureCells(tableHelper.GetFooterTable());
    if(cells) result.push(cells[cellIndex]);
   }
  }
  else {
   var mainTable = this.GetMainTable();
   result.push(mainTable.rows[0].cells[cellIndex]);
  }
  return result;
 },
 GetDataTableAccessibilityHeaderCells: function(columnIndex) {
  var result = [ ];
  if(this.accessibilityCompliant) {
   var cellIndex = this.GetDataCellIndex(columnIndex);
   var mainTable = this.GetMainTable();
   if(ASPx.ElementHasCssClass(mainTable.rows[1], GridViewConsts.AccessibilityInvisibleRowClassName))
    result.push(mainTable.rows[1].cells[cellIndex]);
  }
  return result;
 },
 GetLastNonAdaptiveIndentCell: function(row) {
  var count = 1;
  while(count <= row.cells.length){
   var cell = row.cells[row.cells.length - count];
   if(!ASPx.ElementHasCssClass(cell, GridViewConsts.AdaptiveIndentCellCssClass) && !ASPx.ElementHasCssClass(cell, GridViewConsts.HorizontalExtraCellClassName))
    return cell;
   count++;
  }
  return null;
 },
 GetHeaderScrollContainer:function() {
  return ASPx.GetNodeByClassName(this.GetMainElement(), GridViewConsts.HeaderScrollDivContainerCssClass);
 },
 GetFooterScrollContainer:function() {
  return ASPx.GetNodeByClassName(this.GetMainElement(), GridViewConsts.FooterScrollDivContainerCssClass);
 },
 SetHeadersClientEvents: function() {
  ASPxClientGridBase.prototype.SetHeadersClientEvents.call(this);
  if(!this.AllowResizing())
   return;
  var helper = this.GetResizingHelper();
  var attachMouseMove = function(headerCell) { 
   ASPx.Evt.AttachEventToElement(headerCell, "mousemove", function(e) { helper.UpdateCursor(e, headerCell); });
  };
  this.AttachEventToHeaderCells(attachMouseMove, false);
 },
 InitializeCommandColumnHeaderLinkEvents: function () {
  var headerCommandColumnLinkSelector = [".", GridViewConsts.HeaderCellCssClass, " ", "a.dxgvCommandColumnItem"].join("");
  var headerCommandColumnLinks = this.GetMainElement().querySelectorAll(headerCommandColumnLinkSelector);
  this.PreventMouseDownHeaderLinkEvent(headerCommandColumnLinks);
 },
 GetFooterRow: function(level){
  return this.GetChildElement(GridViewConsts.FooterRowID + this.GetBandedRowLevelPostfix(level));
 },
 GetFooterCell: function(columnIndex) { return this.GetLayoutHelper().GetFooterCell(columnIndex); },
 GetUserCommandNamesForRow: function() { return ASPxClientGridBase.prototype.GetUserCommandNamesForRow().concat([ "ShowAdaptiveDetail", "HideAdaptiveDetail" ]); },
 GetItemVisibleIndexRegExp: function(dataAndGroupOnly) {
  var idParts = [ GridViewConsts.DataRowID, GridViewConsts.GroupRowID + "(?:Exp)?", GridViewConsts.AdaptiveDetailRowID ];
  if(!dataAndGroupOnly) {
   idParts.push(GridViewConsts.PreviewRowID);
   idParts.push(GridViewConsts.DetailRowID);
  }
  return this.GetItemVisibleIndexRegExpByIdParts(idParts);
 },
 IsMainTableChildElement: function(src) {
  if(!src) return true;
  var tables = [ this.GetMainTable() ];
  var tableHelper = this.GetTableHelper();
  if(tableHelper) {
   tables.push(tableHelper.GetHeaderTable());
   tables.push(tableHelper.GetFooterTable());
  }
  for(var i = 0; i < tables.length; i++) {
   if(ASPx.GetIsParent(tables[i], src))
    return true;
  }
  return false;
 },
 CreateBatchEditApi: function() { return new ASPxClientGridViewBatchEditApi(this); },
 IsVirtualScrolling: function() { return this.virtualScrollMode > 0; },
 IsVirtualSmoothScrolling: function() { return this.virtualScrollMode === 2; },
 SetData: function(data){
  if(data.adaptiveModeInfo)
   this.SetAdaptiveMode(data.adaptiveModeInfo);
 },
 CreateColumn: function(prop) { return new ASPxClientGridViewColumn(prop); },
 InitializeBubbleEvents: function() {
  ASPxClientGridBase.prototype.InitializeBubbleEvents.call(this);
  this.AttachHeaderTableClickEvents();
 },
 AttachHeaderTableClickEvents: function() {
  var tableHelper = this.GetTableHelper();
  if(!tableHelper)
   return;
  var headerTable = tableHelper.GetHeaderTable();
  if(headerTable)
   this.AttachTableClickEvents(headerTable);
 },
 InlineInitialize: function() {
  ASPxClientGridBase.prototype.InlineInitialize.call(this);
  this.UpdateAdjustmentFlags();
  this.GetColumnAdjustor().Initialize();
 },
 Initialize: function() {
  ASPxClientGridBase.prototype.Initialize.call(this);
  this.ResetStretchedColumnWidth();
  this.PrepareEditorsToKeyboardNavigation();
  this.AttachInternalContexMenuEventHandler();
  this.InitializeDropDownElementsScrolling();
  this.SetFixedColumnScrollableRows();
  this.PrepareFixedGroups();
  var resizingHelper = this.GetResizingHelper();
  if(resizingHelper)
   resizingHelper.Initialize();
  var custDialogHelper = this.GetCustDialogHelper();
  if(custDialogHelper)
   custDialogHelper.OnInit();
  var adaptivityHelper = this.GetAdaptivityHelper();
  if(adaptivityHelper)
   adaptivityHelper.OnInitialize();
 },
 AfterInitialize: function() {
  if(this.HasAdaptivityAdjuster())
   this.GetAdaptivityAdjuster().CollapseMasterGridIfNeed(this);
  ASPxClientControl.prototype.AfterInitialize.call(this);
 },
 PrepareFixedGroups: function() {
  var helper = this.GetFixedGroupsHelper();
  if(helper)
   helper.Initialize();
 },
 InitializeDropDownElementsScrolling: function() {
  if(this.HasVertScroll()) {
   this.ScrollableContainerDropDownEditors = null;
   var vertScrollableControl = this.GetScrollHelper().GetVertScrollableControl();
   ASPx.Evt.AttachEventToElement(vertScrollableControl, "scroll", function(evt) {
    if(ASPx.Evt.GetEventSource(evt) === vertScrollableControl)
     this.AdjustDropDownElements();
   }.aspxBind(this));
  }
 },
 OnChildControlEndCallback: function(childControl) {
  this.InitializeCommandButtonsInContainer(childControl.getActualMainElement());
  var helper = this.GetBatchEditHelper();
  if(helper)
   helper.OnChildControlEndCallback(childControl);
 },
 InitializeCommandButtonsInContainer: function(container) {
  var buttons = container.querySelectorAll("*[id*=_" + GridViewConsts.CommandButtonID + "].dxbButtonSys." + GridViewConsts.CommandButtonTemplateReplacementMarkerCssClass);
  this.cButtonIDs = ASPx.NodeListToArray(buttons).filter(function(el) { return !el.cpGVCommandButtonInitialized; }).map(function(el) { return el.id; });
  this.PrepareCommandButtons();
 },
 AttachInternalContexMenuEventHandler: function() {
  if(this.IsDetailGrid()) {
   ASPx.Evt.AttachEventToElement(this.GetMainElement(), "contextmenu", function(e) {
    var showDefaultMenu = ASPx.EventStorage.getInstance().Load(e);
    if(showDefaultMenu)
     ASPx.Evt.CancelBubble(e);
    else 
     ASPx.EventStorage.getInstance().Save(e, true);
   }.aspxBind(this), true);
  }
 },
 AdjustControlCore: function() {
  this.CalculateAdaptivity();
  ASPxClientGridBase.prototype.AdjustControlCore.call(this);
  this.GetColumnAdjustor().TryAdjustColumns();
  this.UpdateIndentCellWidths();
  this.ValidateColumnWidths();
  this.UpdateFixedColumnsFrozenRowWidths();
  if(this.fixedGroupsHelper)
   this.fixedGroupsHelper.UpdateIntervalHeights();
 },
 IsAdjustmentRequired: function() {
  if(ASPxClientControl.prototype.IsAdjustmentRequired.call(this))
   return true;
  var scrollHelper = this.GetScrollHelper();
  return scrollHelper ? scrollHelper.IsRestoreScrollPosition() : false;
 },
 SaveCallbackSettings: function() {
  ASPxClientGridBase.prototype.SaveCallbackSettings.call(this);
  var helper = this.GetFixedColumnsHelper();
  if(helper != null) helper.SaveCallbackSettings();
 },
 RestoreCallbackSettings: function() {
  this.ResetStretchedColumnWidth();
  this.SetFixedColumnScrollableRows();
  var fixedColumnsHelper = this.GetFixedColumnsHelper();
  if(fixedColumnsHelper != null)
   fixedColumnsHelper.RestoreCallbackSettings();
  this.SaveAdaptiveScrollTop();
  this.UpdateScrollableControls();
  if(fixedColumnsHelper != null)
   fixedColumnsHelper.HideColumnsRelyOnScrollPosition();
  this.UpdateIndentCellWidths();
  this.ValidateColumnWidths();
  ASPxClientGridBase.prototype.RestoreCallbackSettings.call(this);
 },
 SaveAdaptiveScrollTop: function() {
  this.adaptiveScrollTop = this.stateObject.scrollState ? this.stateObject.scrollState[1] : null;
 },
 ApplyAdaptiveScrollTop: function() {
  if(ASPx.IsExists(this.adaptiveScrollTop)) {
   this.SetVerticalScrollPosition(this.adaptiveScrollTop);
   this.adaptiveScrollTop = null;
  }
 },
 GetPopupEditFormHorzOffsetCorrection: function(popup) {
  var scrollHelper = this.GetScrollHelper();
  return scrollHelper ? scrollHelper.GetPopupEditFormHorzOffsetCorrection(popup) : 0;
 },
 UpdateIndentCellWidths: function() {
  var tableHelper = this.GetTableHelper();
  if(tableHelper)
     tableHelper.UpdateIndentCellWidths();
 },
 UpdateFixedColumnsFrozenRowWidths: function() {
  var helper = this.GetFixedColumnsHelper();
  if(helper)
   helper.UpdateFrozenRowWidths();
 },
 OnBeforeCallbackOrPostBack: function() {
  ASPxClientGridBase.prototype.OnBeforeCallbackOrPostBack.call(this);
  this.SaveControlDimensions();
 },
 OnBeforeCallback: function(command) {
  ASPxClientGridBase.prototype.OnBeforeCallback.call(this, command);
  var scrollHelper = this.GetScrollHelper();
  if(scrollHelper && this.IsVirtualScrolling())
   scrollHelper.ClearVirtualScrollTimer();
 },
 OnAfterCallback: function() {
  this.ResetAdaptivityOnCallback();
  this.GetColumnAdjustor().Initialize();
  ASPxClientGridBase.prototype.OnAfterCallback.call(this);
  var isRestoreScrollRequired = false;
  if(this.HasAdaptivityAdjuster())
   isRestoreScrollRequired = this.GetAdaptivityAdjuster().TryCalculateMasterDetailGridsAdaptivity(this);
  isRestoreScrollRequired = this.GetColumnAdjustor().TryAdjustColumns() || isRestoreScrollRequired;
  if(isRestoreScrollRequired)
   GetGridViewAdjuster().RestoreDocumentScrollPosition(true);
  this.SaveControlDimensions();
  this.GetContextMenuHelper().OnAfterCallack();
  var resizingHelper = this.GetResizingHelper();
  if(resizingHelper)
   resizingHelper.OnAfterCallback();
  var fixedGroupsHelper = this.GetFixedGroupsHelper();
  if(fixedGroupsHelper)
   fixedGroupsHelper.OnAfterCallback();
  this.PrepareEditorsToKeyboardNavigation();
  this.InitializeDropDownElementsScrolling();
  if(this.accessibilityCompliant)
   this.applyAccessibilityAttributes();
  var custDialogHelper = this.GetCustDialogHelper();
  if(custDialogHelper)
   custDialogHelper.OnAfterCallback();
  var adaptivityHelper = this.GetAdaptivityHelper();
  if(adaptivityHelper)
   adaptivityHelper.OnAfterCallback();
 },
 PrepareEditorsToKeyboardNavigation: function() {
  if(!this.RequireEditorsKeyboardNavigation()) return;
  for(var i = 0; i < this.columns.length; i++) {
   this.AttachEventToEditor(this.columns[i].index, "GotFocus", function(s, e) { this.OnEditorGotFocus(s, e); }.aspxBind(this));
   this.AttachEventToEditor(this.columns[i].index, "KeyDown", function(s, e) { this.OnEditorKeyDown(s, e); }.aspxBind(this));
  }
 },
 RequireEditorsKeyboardNavigation: function() {
  return this.GetFixedColumnsHelper() && (this.IsInlineEditMode() || this.IsEditFormEditMode());
 },
 OnEditorGotFocus: function(s, e) {
  if(!this.RequireEditorsKeyboardNavigation()) return;
  this.TryMakeNeighborEditorVisible(s);
 },
 OnEditorKeyDown: function(s, e) {
  if(!this.RequireEditorsKeyboardNavigation()) return;
  var keyCode = ASPx.Evt.GetKeyCode(e.htmlEvent);
  if(keyCode !== ASPx.Key.Tab) return;
  var neighborEditor = this.GetNeighborEditor(s, e.htmlEvent.shiftKey);
  if(neighborEditor && this.TryMakeNeighborEditorVisible(neighborEditor)) {
   ASPx.Evt.PreventEventAndBubble(e.htmlEvent);
   ASPx.Selection.SetCaretPosition(s.GetInputElement());
   neighborEditor.Focus();
  }
 },
 GetNeighborEditor: function(editor, left) {
  var neighborEditor = null;
  if(this.IsEditFormEditMode()) {
   var neighborEditorIndex = this.editorIDList.indexOf(editor.name) + (left ? -1 : 1);
   var neighborEditorName = this.editorIDList[neighborEditorIndex];
   neighborEditor = ASPx.GetControlCollection().GetByName(neighborEditorName);
  } else {
   var matrix = this.GetHeaderMatrix();
   var neighborColumnIndex = left ? matrix.GetLeftNeighbor(editor.dxgvColumnIndex, true) : matrix.GetRightNeighbor(editor.dxgvColumnIndex, true);
   neighborEditor = this.GetEditorByColumnIndex(neighborColumnIndex);
  }
  return neighborEditor;
 },
 TryMakeNeighborEditorVisible: function(editor) {
  var helper = this.GetFixedColumnsHelper();
  if(this.IsEditFormEditMode())
   return helper.TryScrollToFocusedEditor(editor);
  var columnIndex = this.tryGetNumberFromEndOfString(editor.name).value;
  return helper.TryShowColumn(columnIndex, true);
 },
 IsInlineEditMode: function() { return this.editMode === 0; },
 IsEditFormEditMode: function() { return this.editMode === 1 || this.editMode === 2; },
 IsBatchEditMode: function() { return this.editMode === 4; },
 IsEditRowHasDisplayedDataRow: function() { return this.editMode >= 2; },
 IsBatchEditDeletedItem: function (visibleIndex) {
  if(this.IsGroupRow(visibleIndex))
   return false;
  return ASPxClientGridBase.prototype.IsBatchEditDeletedItem.call(this, visibleIndex);
 },
 canSortByColumn: function(headerElement) {
  if(this.IsBatchChangesViewMode())
   return false;
  return ASPxClientGridBase.prototype.canSortByColumn.call(this,headerElement);
 },
 canGroupByColumn: function(column) {
  return !this.IsBatchChangesViewMode()
   && column.allowGroup
   && this.GetVisibleDataColumnIndices().length > 0 
   && !this.IsSingleVisibleColumnWithData(column);
 },
 canHideColumn: function(column) {
  return this.GetColumnHelper().GetGroupColumnCount() === 0 || !this.IsSingleVisibleColumnWithData(column);
 },
 canDragColumn: function(headerElement) {
  if(this.IsBatchChangesViewMode() && !this.GetColumnMovingHelper())
   return false;
  var column = this._getColumnObjectByArg(this.getColumnIndex(headerElement.id));
  return !this.RaiseColumnStartDragging(column) && this.getColumnObject(headerElement.id).allowDrag;
 },
 doPagerOnClick: function(id) {
  if(!ASPx.IsExists(id)) return;
  this.AssignSlideAnimationDirectionByPagerArgument(id, this.pageIndex);
  var scrollHelper = this.GetScrollHelper();
  if(scrollHelper)
   scrollHelper.ResetScrollTop();
  ASPxClientGridBase.prototype.doPagerOnClick.call(this, id);
 },
 TryStartColumnResizing: function(e, headerCell) {
  var helper = this.GetResizingHelper();
  if(!helper || !helper.CanStartResizing(e, headerCell))
   return false;
  var columnIndex = helper.GetResizingColumnIndex(e, headerCell);
  var column = this.columns.filter(function(c) { return c.index == columnIndex; })[0];
  if(this.RaiseColumnResizing(column))
   return false;
  helper.StartResizing(column.index);
  return true;
 },
 IsPossibleSelectItem: function(visibleIndex, newSelectedValue){  
  if(!this.IsDataRow(visibleIndex) || !ASPxClientGridBase.prototype.IsPossibleSelectItem.call(this, visibleIndex, newSelectedValue))
   return false;
  return !this.IsRowHiddenInBatchChangesPreviewMode(visibleIndex);
 },
 _isRowSelected: function(visibleIndex) {
  return this.IsDataRow(visibleIndex) && ASPxClientGridBase.prototype._isRowSelected.call(this, visibleIndex);
 },
 GetDataItemCountOnPage: function(){
  var dataRowCount = 0;
  for(var i = 0; i < this.pageRowCount; i++){
   var index = i + this.visibleStartIndex;
   if(!this.IsGroupRow(index))
    dataRowCount++;
  }
  return dataRowCount;
 },
 RequireProcessTableClickLikeCheckBoxClick: function(tableClickSource, visibleIndex) { 
  var dataCell = this.GetLayoutHelper().GetDataCellByChild(tableClickSource);
  if(dataCell) {
   var column = this.GetColumn(this.GetColumnIndexByDataCell(dataCell));
   if(column && column.isCommandColumn) {
    var checkBoxElement = this.GetDataRowSelBtn(visibleIndex);
    return checkBoxElement && ASPx.GetIsParent(dataCell, checkBoxElement);
   }
  }
  return false; 
 },
 IsPossibleFocusItem: function(visibleIndex) { 
  if(!ASPxClientGridBase.prototype.IsPossibleFocusItem.call(this, visibleIndex))
   return false;
  return !this.IsRowHiddenInBatchChangesPreviewMode(visibleIndex);
 },
 IsRowHiddenInBatchChangesPreviewMode: function(visibleIndex) { return this.IsBatchChangesViewMode() && !this.batchEditApi.HasChanges(visibleIndex); },
 GetFocusedItemStyle: function(visibleIndex, focused){
  var row = this.GetItem(visibleIndex);
  if(focused && row) {
   var helper = this.GetStyleHelper();
   return this._isGroupRow(row) ? helper.GetFocusedGroupItemStyle() : helper.GetFocusedItemStyle();
  }
  return ASPxClientGridBase.prototype.GetFocusedItemStyle.call(this, visibleIndex, focused);
 },
 RequireChangeItemStyle: function(visibleIndex, itemStyle){
  if(!ASPxClientGridBase.prototype.RequireChangeItemStyle.call(this, visibleIndex, itemStyle))
   return false;
  var helper = this.GetStyleHelper();
  return !helper.IsSelectedItemStyle(itemStyle) || !this.IsGroupRow(visibleIndex); 
 },
 UpdateItemsStyle: function() {
  this.UpdateFirstAndLastVisibleRowMarkers();
  ASPxClientGridBase.prototype.UpdateItemsStyle.call(this);
 },
 GetItemStyle: function(visibleIndex){
  var style = ASPxClientGridBase.prototype.GetItemStyle.call(this, visibleIndex);
  var helper = this.GetStyleHelper();
  if(helper.IsFocusedItemStyle(style) && this.IsGroupRow(visibleIndex))
   style = helper.GetFocusedGroupItemStyle();
  return style;
 },
 ApplyItemStyle: function(visibleIndex, styleInfo) {
  if(this.HasBandedDataRows() && !this.IsGroupRow(visibleIndex)){
   var rows = this.GetBandedDataRows(visibleIndex);
   for(var i = 0; i < rows.length; i++)
    this.ApplyElementStyle(rows[i], styleInfo);
  } else
   ASPxClientGridBase.prototype.ApplyItemStyle.call(this, visibleIndex, styleInfo);
  var adaptivityHelper = this.GetAdaptivityHelper();
  if(adaptivityHelper && !adaptivityHelper.IsResponsiveMode()) {
   if(adaptivityHelper.HasAnyAdaptiveElement() && !this.IsGroupRow(visibleIndex)) {
    var dataRows = this.HasBandedDataRows() ? this.GetBandedAdaptiveDataRows(visibleIndex) : [this.GetDataRow(visibleIndex)];
    var hideRow = function(row) { if(row) ASPx.AddClassNameToElement(row, GridViewConsts.AdaptiveHiddenCssClass); };
    dataRows.forEach(hideRow);
   }
   var adaptiveItem = this.GetAdaptiveDetailRow(visibleIndex);
   if(adaptiveItem) {
    ASPx.Attr.SaveStyleAttribute(adaptiveItem, "display");
    this.ApplyElementStyle(adaptiveItem, styleInfo);
    ASPx.Attr.RestoreStyleAttribute(adaptiveItem, "display");
   }
  }
 },
 EnsureAdaptiveDetailRowStyle: function(adaptiveRow, dataRow) {
  if(this.GetAdaptivityHelper().IsResponsiveMode()) 
   return;
  var visibleIndex = this.getItemIndex(dataRow.id);
  this.ApplyItemStyle(visibleIndex, this.GetStyleHelper().GetClearItemStyle());
  var exceptions = [ GridViewConsts.DataRowCssClass, GridViewConsts.AdaptiveHiddenCssClass, GridViewConsts.FirstVisibleRowClassName, GridViewConsts.LastVisibleRowClassName ];
  var classNames = ASPx.GetClassNameList(dataRow);
  classNames = classNames.filter(function(name) { 
   for(var i = 0; i < exceptions.length; i++) {
    if(exceptions[i].indexOf(name) > -1)
     return false;
   }
   return true; 
  });
  for(var i = 0; i < classNames.length; i++)
   ASPx.AddClassNameToElement(adaptiveRow, classNames[i]);
  adaptiveRow.style.cssText = dataRow.style.cssText + " " + adaptiveRow.style.cssText;
  this.UpdateItemStyle(visibleIndex);
 },
 OnScroll: function(evt){
 },
 getItemByHtmlEvent: function(evt) {
  return this.getItemByHtmlEventCore(evt, GridViewConsts.DataRowID) || this.getItemByHtmlEventCore(evt, GridViewConsts.GroupRowID) || this.getItemByHtmlEventCore(evt, GridViewConsts.AdaptiveDetailRowID);
 },
 IsHeaderChild: function(source) {
  if(!this.showColumnHeaders) return false;
  var headerRowCount = this.GetHeaderMatrix().GetRowCount();
  for(var i = 0; i < headerRowCount; i++) {
   if(ASPx.GetIsParent(this.GetHeaderRow(i), source))
    return true;
  }
  return false;
 },
 IsActionElement: function(mainElement, source) {
  if(this.testActionElement(source))
   return true;
  var parent = source;
  var controlCollection = ASPx.GetControlCollection();
  while(parent.id !== mainElement.id) {
   var control = controlCollection.Get(parent.id);
   if(this.IsActionClientControl(control))
    return true;
   parent = parent.parentElement;
  }  
  return false;
 },
 IsActionClientControl: function(control) {
  if(!ASPx.IsExists(control)) return false;
  var isClientButton = typeof(ASPxClientButton) !== "undefined" && control instanceof ASPxClientButton;
  var isClientEditBase = typeof(ASPxClientEditBase) !== "undefined" && control instanceof ASPxClientEditBase;
  return isClientButton || isClientEditBase;
 },
 IsDetailGridFocused: function(evt) {
  var result = false;
  var mainTable = this.GetMainTable();
  var target = ASPx.Evt.GetEventSource(evt);  
  ASPx.GetControlCollection().ForEachControl(function(control) {   
   var isDetailGrid = control instanceof ASPxClientGridView && control !== this && ASPx.GetIsParent(mainTable, control.GetMainElement());
   if(isDetailGrid) {
    var helper = control.GetCellFocusHelper();
    if(helper && ASPx.GetIsParent(helper.GetCurrentFocusedCell(), target)) {
     result = true;
     return true;
    }
   }
  }, this);
  return result;
 },
 IsMasterGridFor: function(detailGrid) {
  return ASPx.GetIsParent(this.GetMainTable(), detailGrid.GetMainElement());
 },
 NeedPreventGestures: function(element, mainElement) {
  var gridElement = ASPx.GetParent(element, function(el) { return ASPx.GetControlCollection().GetByName(el.id) instanceof ASPxClientGridView; });
  if(gridElement !== this.GetMainElement())
   return true;
  return ASPxClientGridBase.prototype.NeedPreventGestures.call(this, element, mainElement);
 },
 getItemIndex: function(rowId) {
  if(this.IsHeaderRowID(rowId))
   return -1;
  if(this.IsBandedDataRowID(rowId))
   return this.GetBandedDataRowVisibleIndexByID(rowId);
  return ASPxClientGridBase.prototype.getItemIndex.call(this, rowId);
 },
 GetBandedDataRowLevelByID: function(rowId){
  if(!rowId) return -1;
  var matches = rowId.match(this.name + GridViewConsts.BandedRowPattern);
  return matches && matches.length > 2 ? parseInt(matches[2]) : -1;
 },
 GetBandedDataRowVisibleIndexByID: function(rowId){
  if(!rowId) return -1;
  var matches = rowId.match(this.name + GridViewConsts.BandedRowPattern);
  return matches && matches.length > 2 ? parseInt(matches[1]) : -1;
 },
 CreateBatchEditHelperOwner: function() { return new ASPx.GridViewBatchEditHelperOwner(this); },
 CreateCellFocusHelper: function() { return new ASPx.GridViewCellFocusHelper(this); },
 CreateCellSelectionHelper: function() { return new ASPx.GridViewCellSelectionHelper(this); },
 CreateClipboardHelper: function() { return new ASPx.GridViewClipboardHelper(this); },
 CreateStyleHelper: function() { return new GridViewStyleHelper(this); },
 GetColumnHelper: function() {
  if(!this.columnHelper)
   this.columnHelper = new ASPx.GridViewColumnHelper(this);
  return this.columnHelper;
 },
 GetColumnMovingHelper: function() {
  if(!this.allowColumnClientMove) return;
  if(!this.columnMovingHelper && typeof(ASPx.GridViewColumnMovingHelper) != "undefined")
   this.columnMovingHelper = new ASPx.GridViewColumnMovingHelper(this);
  return this.columnMovingHelper;
 },
 GetTableHelper: function() {
  if(!this.tableHelper)
   this.tableHelper = this.CreateTableHelper(this.MainTableID, GridViewConsts.HeaderTableID, GridViewConsts.FooterTableID, this.horzScroll, this.vertScroll);
  return this.tableHelper;
 },
 CreateTableHelper: function(contentTableIDSuffix, headerTableIDSuffix, footerTableIDSuffix, horzScroll, vertScroll) {
  if(typeof(ASPx.GridViewTableHelper) != "undefined")
   return new ASPx.GridViewTableHelper(this, contentTableIDSuffix, headerTableIDSuffix, footerTableIDSuffix, horzScroll, vertScroll);
 },
 GetScrollHelper: function() {
  if(!this.HasScrolling()) return null;
  if(!this.scrollableHelper)
   this.scrollableHelper = new ASPx.GridViewTableScrollHelper(this.GetTableHelper());
  return this.scrollableHelper;
 },
 GetFixedColumnsHelper: function() {
  if(!this.GetFixedColumnsDiv()) return null;
  if(!this.fixedColumnsHelper)
   this.fixedColumnsHelper = new ASPx.GridViewTableFixedColumnsHelper(this.GetTableHelper(), this.FixedColumnsDivID, this.FixedColumnsContentDivID, this.fixedColumnCount);
  return this.fixedColumnsHelper;
 },
 GetFixedGroupsHelper: function() {
  if(!this.allowFixedGroups) return null;
  if(!this.fixedGroupsHelper)
   this.fixedGroupsHelper = new ASPx.GridViewFixedGroupsHelper(this.GetTableHelper());
  return this.fixedGroupsHelper;
 },
 GetResizingHelper: function() {
  if(!this.AllowResizing()) return null;
  if(!this.resizingHelper)
   this.resizingHelper = new ASPx.GridViewTableResizingHelper(this.GetTableHelper());
  return this.resizingHelper;
 },
 GetHeaderMatrix: function() {
  if(!this.headerMatrix)
   this.headerMatrix = new GridViewHeaderMatrix(this);
  return this.headerMatrix;
 },
 GetContextMenuHelper: function() {
  if(!this.contextMenuHelper)
   this.contextMenuHelper = this.CreateContextMenuHelper();
  return this.contextMenuHelper;
 },
 CreateContextMenuHelper: function() { return new ASPx.GridViewContextMenuHelper(this); },
 CreateLayoutHelper: function() { return new ASPx.GridViewLayoutHelper(this); },
 CreateNavigationHelper: function() { return typeof(ASPx.GridViewNavigationHelper) != "undefined" ? new ASPx.GridViewNavigationHelper(this) : null; },
 CreateFilterHelper: function() { return new ASPx.GridViewFilterHelper(this); },
 CreateCallbackHelper: function() { return new GridViewCallbackHelper(this); },
 CreateToolbarHelper: function() { return new ASPx.GridViewToolbarHelper(this); },
 CreateKbdHelper: function() {
  if(this.enableKeyboard && this.customKbdHelperName)
   return new ASPx[this.customKbdHelperName](this);
  return new GridViewKbdHelper(this, this.enableKeyboard);
 },
 IsKbdHelperRequired: function() {
  return this.enableKeyboard || ASPxClientGridBase.prototype.IsKbdHelperRequired.call(this);
 },
 Invalidate: function() {
  this.GetColumnHelper().Invalidate();
  this.GetHeaderMatrix().Invalidate();
  ASPxClientGridBase.prototype.Invalidate.call(this);
 },
 ValidateColumnWidths: function() {
  var helper = this.GetResizingHelper();
  if(helper)
   helper.ValidateColumnWidths();
 },
 ResetStretchedColumnWidth: function() {
  var helper = this.GetResizingHelper();
  if(helper)
   helper.ResetStretchedColumnWidth();
 },
 SaveControlDimensions: function() {
  var helper = this.GetResizingHelper();
  if(helper)
   helper.SaveControlDimensions(true);
 },
 AdjustDropDownElements: function() {
  var vertScrollableControl = this.GetScrollHelper().GetVertScrollableControl();
  var scrollableRect = vertScrollableControl.getBoundingClientRect();
  ASPx.Data.ForEach(this.GetDropDownEditors(), function(dropDownEditor) {
   if(!ASPx.IsExists(dropDownEditor))
    return;
   var editorRect = dropDownEditor.GetMainElement().getBoundingClientRect();
   var editorBottomIsVisible = editorRect.top + editorRect.height < scrollableRect.bottom
    && editorRect.top + editorRect.height > scrollableRect.top;
   if(dropDownEditor.GetPopupControl().IsVisible())
    if(editorBottomIsVisible)
     dropDownEditor.AdjustDropDownWindow();
    else
     dropDownEditor.HideDropDown();
  });
 },
 GetDropDownEditors: function() {
  if(this.ScrollableContainerDropDownEditors === null) {
   var dropDownEditorPopupElementPostfixRegex = /_DDD_PW-\d+$/g;
   var controlCollection = ASPx.GetControlCollection();
   var vertScrollableControl = this.GetScrollHelper().GetVertScrollableControl();
   var popupElements = ASPx.GetNodesByClassName(vertScrollableControl, "dxpc-ddSys")
    .filter(function(element) { return element.id.match(dropDownEditorPopupElementPostfixRegex); });
   var editorNames = popupElements.map(function(element) { return element.id.replace(dropDownEditorPopupElementPostfixRegex, ""); });
   this.ScrollableContainerDropDownEditors = editorNames.map(controlCollection.GetByName.aspxBind(controlCollection));
  }
  return this.ScrollableContainerDropDownEditors;
 },
 BrowserWindowResizeSubscriber: function() {
  return this.IsFixedLayoutWithUnsetWidth() || this.enableCustDialog || ASPxClientGridBase.prototype.BrowserWindowResizeSubscriber.call(this);
 }, 
 IsFixedLayoutWithUnsetWidth: function() {
  var mainElement = this.GetMainElement();
  var mainTable = this.GetMainTable();
  if(mainElement && mainTable) {
   var mainElementStyle = ASPx.GetCurrentStyle(mainElement);
   var mainTableStyle = ASPx.GetCurrentStyle(mainTable);
   return mainTableStyle.tableLayout === "fixed" && mainElementStyle.width === "";
  }
 }, 
 OnBrowserWindowResize: function(e) {
  this.EndBatchEdit(e);
  if(this.AllowResizing() && !this.HasScrolling())
   this.ValidateColumnWidths();
  var custDialogHelper = this.GetCustDialogHelper();
  if(custDialogHelper)
   custDialogHelper.OnBrowserWindowResize(e);
  var fixedGroupsHelper = this.GetFixedGroupsHelper();
  if(fixedGroupsHelper)
   fixedGroupsHelper.OnBrowserWindowResize(e);
  var adaptivityHelper = this.GetAdaptivityHelper();
  if(adaptivityHelper)
   adaptivityHelper.OnBrowserWindowResize(e);
  if(!e || !e.virtualKeyboardShownOnAndroid)
   this.AdjustControl();
 },
 ShowCustomizationDialog: function() {
  var window = this.GetCustDialogWindow();
  if(window)
   window.Show();
 },
 EndBatchEdit: function(e){ 
  var batchEditHelper = this.GetBatchEditHelper();
  if(this.HasAdaptivity() && batchEditHelper && e.prevWndWidth != e.wndWidth)
   batchEditHelper.EndEdit();
 },
 GetColumnAdjustor: function() {
  if(!this.columnAdjustor)
   this.columnAdjustor = this.CreateColumnAdjustor();
  return this.columnAdjustor;
 },
 CreateColumnAdjustor: function() {
  return new ASPx.GridViewColumnAdjustor(this);
 },
 GetAdaptivityHelper: function() {
  if(this.adaptivityMode === 0) return null;
  if(!this.adaptivityHelper)
   this.adaptivityHelper = this.CreateAdaptivityHelper();
  return this.adaptivityHelper;
 },
 HasAdaptivity: function() { return !!this.GetAdaptivityHelper(); },
 HasAnyAdaptiveElement: function() { 
  var helper = this.GetAdaptivityHelper();
  return helper && helper.HasAnyAdaptiveElement();
 },
 CreateAdaptivityHelper: function() {
  if(this.adaptivityMode === 1) {
   return this.GetLayoutHelper().IsFixedTableLayout()
    ? this.CreateFixedTableLayoutAdaptivityHelper()
    : this.CreateAutoTableLayoutAdaptivityHelper();
  }
  else if(this.adaptivityMode === 2)
   return this.CreateAdaptiveModeAdaptivityHelper();
  throw "Incorrect adaptivity mode.";
 },
 CreateFixedTableLayoutAdaptivityHelper: function() {
  return new ASPx.GridViewFixedTableLayoutAdaptivityHelper(this);
 },
 CreateAutoTableLayoutAdaptivityHelper: function() {
  return new ASPx.GridViewAutoTableLayoutAdaptivityHelper(this);
 },
 CreateAdaptiveModeAdaptivityHelper: function() {
  return new ASPx.GridViewAdaptiveModeAdaptivityHelper(this);
 },
 SetAdaptiveMode: function(data) {
  this.adaptivityMode = data.adaptivityMode;
  var adaptivityHelper = this.GetAdaptivityHelper();
  if(adaptivityHelper)
   adaptivityHelper.ApplySettings(data);
 },
 IsResponsiveAdaptivityMode: function() {
  var adaptivityHelper = this.GetAdaptivityHelper();
  return adaptivityHelper && adaptivityHelper.IsResponsiveMode();
 },
 HasAdaptivityAdjuster: function() {
  return !!this.GetAdaptivityAdjuster();
 },
 GetAdaptivityAdjuster: function() {
  if(ASPx.GetGridViewAdaptivityAdjuster)
   return ASPx.GetGridViewAdaptivityAdjuster();
  return null;
 },
 CalculateAdaptivity: function(forceCalculate) {
  var adaptivityHelper = this.GetAdaptivityHelper();
  if(adaptivityHelper)
   adaptivityHelper.CalculateAdaptivity(forceCalculate);
 },
 ResetAdaptivityOnCallback: function(){
  var adaptivityHelper = this.GetAdaptivityHelper();
  if(adaptivityHelper)
   adaptivityHelper.ResetAdaptivityOnCallback();
 },
 RestoreAdaptivityState: function() {
  var adaptivityHelper = this.GetAdaptivityHelper();
  if(adaptivityHelper)
   adaptivityHelper.RestoreAdaptivityState();
 },
 ToggleAdaptiveDetails: function(visibleIndex) {
  var adaptivityHelper = this.GetAdaptivityHelper();
  if(adaptivityHelper) {
   adaptivityHelper.ToggleAdaptiveDetails(visibleIndex, false, true);
   this.InvalidateLayout();
  }
 },
 UA_ShowAdaptiveDetail: function(visibleIndex) {
  this.ToggleAdaptiveDetails(visibleIndex);
 },
 UA_HideAdaptiveDetail: function(visibleIndex) {
  this.ToggleAdaptiveDetails(visibleIndex);
 },
 UA_ApplyMultiColumnAutoFilter: function() {
  this.ApplyOnClickRowFilter();
 },
 UA_CustDialogApply: function() {
  var helper = this.GetCustDialogHelper();
  if(helper)
   helper.ApplyChanges();
 },
 UA_CustDialogClose: function() {
  var helper = this.GetCustDialogHelper();
  if(helper)
   helper.CancelChanges();
 },
 UA_PreviewChanges: function() {
  var helper = this.GetBatchEditHelper();
  if(helper)
   helper.ShowPreviewChanges();
 },
 UA_HidePreview: function() {
  var helper = this.GetBatchEditHelper();
  if(helper)
   helper.HideChanges();
 },
 IsLastDataRow: function(visibleIndex) {
  return visibleIndex == this.visibleStartIndex + this.pageRowCount - 1 && (this.IsLastPage() || this.pageIndex < 0);
 },
 UpdateFirstAndLastVisibleRowMarkers: function() {
  if(this.HasBandedDataRows())
   return;
  if(!this.GetHeaderRow(0))
   this.UpdateExtemeVisibleRowMarker(true);
  this.UpdateExtemeVisibleRowMarker(false);
 },
 UpdateExtemeVisibleRowMarker: function(isFirstVisibleRow) {
  var tBody = ASPx.GetNodeByTagName(this.GetMainTable(), "TBODY", 0);
  var markerClassName = isFirstVisibleRow ? GridViewConsts.FirstVisibleRowClassName : GridViewConsts.LastVisibleRowClassName;
  var prevMarkedRows = ASPx.GetChildNodesByClassName(tBody, markerClassName);
  var styleHelper = this.GetStyleHelper();
  for(var i = 0; i < prevMarkedRows.length; i++) {
   styleHelper.RemoveClassFromElement(prevMarkedRows[i], markerClassName);
  }
  var exteremeRow = this.FindExtemeVisibleRow(isFirstVisibleRow);
  if(exteremeRow) {
   styleHelper.AddClassToElement(exteremeRow, markerClassName);
   if(!isFirstVisibleRow && this.GetLayoutHelper().HasCellMerging())
    this.MarkPageBottomVisibleCells(exteremeRow);
  }
 },
 MarkPageBottomVisibleCells: function(row) {
  var helper = this.GetLayoutHelper();
  var visibleIndex = this.getItemIndex(row.id);
  if(visibleIndex === -1)
   return;
  var headerLayout = helper.GetHeaderLayout()[helper.GetLayoutHeight(true) - 1];
  var headerColumnIndices = headerLayout.map(function(item) { return item.columnIndex; });
  for(var i = 0; i < headerColumnIndices.length; i++) {
   var columnIndex = headerColumnIndices[i];
   if(helper.IsHiddenMergedCell(visibleIndex, columnIndex))
    ASPx.AddClassNameToElement(this.GetDataCell(visibleIndex, columnIndex), GridViewConsts.PageBottomVisibleCellsMarkerClassName);
  }
 },
 FindExtemeVisibleRow: function(isFirstVisibleRow) {
  var rows = this.GetMainTable().rows;
  var rowCount = rows.length;
  for(var i = 0; i < rowCount; i++) {
   var row = isFirstVisibleRow ? rows[i] : rows[rowCount - 1 - i];
   if(this.IsVisibleRow(row))
    return row;
  }
  return this.GetEmptyDataItem();
 },
 IsVisibleRow: function(row) {
  var isDataRow = this.GetItemVisibleIndexRegExp(false).test(row.id);
  var isEditingRow = row.id && row.id.indexOf(this.EditingRowID) > -1;
  var isGroupFooterRow = !!row.id.match(this.GetGroupFooterVisibleIndicesRegExp());
  return ASPx.ElementContainsCssClass(row, GridViewConsts.EmptyPagerRowCssClass) || ((isDataRow || isEditingRow || isGroupFooterRow) && ASPx.GetElementDisplay(row));
 },
 OnGeneralCallback: function(result) {
  GetGridViewAdjuster().SaveDocumentScrollPosition(true);
  ASPxClientGridBase.prototype.OnGeneralCallback.call(this, result);
  if(this.hasDetailRows) {
   GetGridViewAdjuster().SetMasterGridForAdjust(this);
   if(this.HasAdaptivityAdjuster())
    this.GetAdaptivityAdjuster().SetNeedCollapseMasterGrid(this);
  }
 },
 OnCallbackFinalized: function() {
  ASPxClientGridBase.prototype.OnCallbackFinalized.call(this);
  this.AdjustPagerControls();
  GetGridViewAdjuster().ResetDocumentScrollPosition();
 },
 SetWidth: function(width) {
  if(this.IsControlCollapsed())
   this.ExpandControl();
  var mainElemnt = this.GetMainElement();
  if(!ASPx.IsExistsElement(mainElemnt) || mainElemnt.offsetWidth === width) return;
  var scrollHelper = this.GetScrollHelper();
  if(scrollHelper)
   scrollHelper.OnSetWidth(width);
  this.ResetControlAdjustment();
  ASPxClientControl.prototype.SetWidth.call(this, width);
 },
 NeedCollapseControlCore: function() {
  return this.IsResponsiveAdaptivityMode() || ASPxClientGridBase.prototype.NeedCollapseControlCore.call(this);
 },
 SortBy: function(column, sortOrder, reset, sortIndex){
    ASPxClientGridBase.prototype.SortBy.call(this, column, sortOrder, reset, sortIndex);
 },
 MoveColumn: function(column, columnMoveTo, moveBefore, moveToGroup, moveFromGroup){
  ASPxClientGridBase.prototype.MoveColumn.call(this, column, columnMoveTo, moveBefore, moveToGroup, moveFromGroup);
 },
 MoveColumnCore: function(sourceIndex, targetIndex, direction, moveToGroup, moveFromGroup) {
  var helper = this.GetColumnMovingHelper();
  var requireCallback = !helper || !helper.MoveColumn(sourceIndex, targetIndex, direction, moveToGroup, moveFromGroup);
  this.Invalidate();
  if(requireCallback)
   ASPxClientGridBase.prototype.MoveColumnCore.call(this, sourceIndex, targetIndex, direction, moveToGroup, moveFromGroup);
  else {
   var adaptivityHelper = this.GetAdaptivityHelper();
   if(adaptivityHelper) {
    adaptivityHelper.ResetAdaptivity();
    this.RemoveAdaptiveHeaders();
    adaptivityHelper.CalculateAdaptivity(true);
   }
   var fixedHelper = this.GetFixedColumnsHelper();
   if(fixedHelper)
    fixedHelper.OnColumnClientMove();
   this.SaveClientColumnStateToCookies();
   this.stateObject.columnMoveState = helper.GetColumnMoveState();
  }
 },
 GetColumnLayout: function() {
  var helper = this.GetColumnMovingHelper();
  return helper ? helper.GetColumnLayout() : null;
 },
 SetColumnLayout: function(layout) {
  var helper = this.GetColumnMovingHelper();
  if(helper)
   helper.SetColumnLayout(layout);
 },
 SaveClientColumnStateToCookies: function() {
  if(!this.cookieName) return;
  var cookieValue = ASPx.Cookie.GetCookie(this.cookieName);
  if(!cookieValue) return;
  var prevClientStateIndex = cookieValue.indexOf("|clientvis");
  if(prevClientStateIndex > -1)
   cookieValue = cookieValue.substr(0, prevClientStateIndex);
  var columnHelper = this.GetColumnHelper();
  var visibleState = columnHelper.SerializeColumnVisibleState();
  var hierarchyState = columnHelper.SerializeColumnHierarchyState();
  cookieValue += "|" + hierarchyState + "|" + visibleState;
  ASPx.Cookie.SetCookie(this.cookieName, cookieValue);
 },
 GroupBy: function(column, groupIndex, sortOrder){
  ASPxClientGridBase.prototype.GroupBy.call(this, column, groupIndex, sortOrder);
 },
 UnGroup: function(column){
  this.Ungroup(column);
 },
 Ungroup: function(column){
  ASPxClientGridBase.prototype.Ungroup.call(this, column);
 },
 ExpandAll: function(){
  ASPxClientGridBase.prototype.ExpandAll.call(this);
 },
 CollapseAll: function(){
  ASPxClientGridBase.prototype.CollapseAll.call(this);
 },
 ExpandAllDetailRows: function(){
  this.gridCallBack([ASPxClientGridViewCallbackCommand.ShowAllDetail]);
 },
 CollapseAllDetailRows: function(){
  this.gridCallBack([ASPxClientGridViewCallbackCommand.HideAllDetail]);
 },
 ExpandRow: function(visibleIndex, recursive){
  if(this.RaiseRowExpanding(visibleIndex)) return;
  recursive = !!recursive;
  this.gridCallBack([ASPxClientGridViewCallbackCommand.ExpandRow, visibleIndex, recursive]);
 },
 CollapseRow: function(visibleIndex, recursive){
  if(this.RaiseRowCollapsing(visibleIndex)) return;
  recursive = !!recursive;
  this.gridCallBack([ASPxClientGridViewCallbackCommand.CollapseRow, visibleIndex, recursive]);
 },
 MakeRowVisible: function(visibleIndex) {
  if(!this.HasVertScroll()) return;
  var row = this.GetItem(visibleIndex);
  if(row == null && visibleIndex >= this.visibleStartIndex && visibleIndex < this.visibleStartIndex + this.pageRowCount) 
   row = this.GetEditingRow();
  if(row == null) return;
  this.GetScrollHelper().MakeRowVisible(row);
 },
 ExpandDetailRow: function(visibleIndex){
  var key = this.GetRowKey(visibleIndex);
  if(key == null) return;
  if(this.RaiseDetailRowExpanding(visibleIndex)) return;
  this.gridCallBack([ASPxClientGridViewCallbackCommand.ShowDetailRow, key]);
 },
 CollapseDetailRow: function(visibleIndex){
  var key = this.GetRowKey(visibleIndex);
  if(key == null) return;
  if(this.RaiseDetailRowCollapsing(visibleIndex)) return;
  this.gridCallBack([ASPxClientGridViewCallbackCommand.HideDetailRow, key]);
 },
 GetRowKey: function(visibleIndex) {
  return this.GetItemKey(visibleIndex);
 },
 StartEditRow: function(visibleIndex) {
    this.StartEditItem(visibleIndex);
 },
 StartEditRowByKey: function(key) {
  this.StartEditItemByKey(key);
 },
 IsNewRowEditing: function() {
  return this.IsNewItemEditing();
 },
 AddNewRow: function(){
    this.AddNewItem();
 },
 DeleteRow: function(visibleIndex){
  this.DeleteItem(visibleIndex);
 },
 DeleteRowByKey: function(key) {
  this.DeleteItemByKey(key);
 },
 GetFocusedRowIndex: function() {
  return this._getFocusedItemIndex();
 },
 SetFocusedRowIndex: function(visibleIndex) {
  return this._setFocusedItemIndex(visibleIndex);
 },
 SelectRows: function(visibleIndices, selected){
  this.SelectItemsCore(visibleIndices, selected, false);
 },
 SelectRowsByKey: function(keys, selected){
  this.SelectItemsByKey(keys, selected);
 },
 UnselectRowsByKey: function(keys){
  this.SelectRowsByKey(keys, false);
 },
 UnselectRows: function(visibleIndices){
  this.SelectRows(visibleIndices, false);
 },
 UnselectFilteredRows: function() {
  this.UnselectFilteredItemsCore();
 },
 SelectRowOnPage: function(visibleIndex, selected){
  if(!ASPx.IsExists(selected)) selected = true;
  this.SelectItem(visibleIndex, selected);
 },
 UnselectRowOnPage: function(visibleIndex){
  this.SelectRowOnPage(visibleIndex, false);
 },
 SelectAllRowsOnPage: function(selected){
  this.SelectAllItemsOnPage(selected);
 },
 UnselectAllRowsOnPage: function(){
  this.UnselectAllItemsOnPage();
 },
 GetSelectedRowCount: function() {
  return this._getSelectedRowCount();
 },
 IsRowSelectedOnPage: function(visibleIndex) {
  return this._isRowSelected(visibleIndex);
 },
 IsGroupRow: function(visibleIndex) {
  return this.GetGroupRow(visibleIndex) != null;
 },
 IsDataRow: function(visibleIndex) {
  return this.GetDataRow(visibleIndex) != null || this.HasBandedDataRows() && this.GetBandedDataRows(visibleIndex).length > 0;
 },
 IsGroupRowExpanded: function(visibleIndex) { 
  return this.GetExpandedGroupRow(visibleIndex) != null;
 },
 GetVertScrollPos: function() {
  return this.GetVerticalScrollPosition();
 },
 GetVerticalScrollPosition: function() {
  if(this.IsVirtualScrolling())
   return 0;
  var scrollHelper = this.GetScrollHelper();
  if(scrollHelper)
   return scrollHelper.GetVertScrollPosition();
  return 0;
 },
 GetHorzScrollPos: function() {
  return this.GetHorizontalScrollPosition();
 },
 GetHorizontalScrollPosition: function() {
  var scrollHelper = this.GetScrollHelper();
  if(scrollHelper)
   return scrollHelper.GetHorzScrollPosition();
  return 0;
 },
 SetVertScrollPos: function(value) {
  this.SetVerticalScrollPosition(value);
 },
 SetVerticalScrollPosition: function(value) {
  if(this.IsVirtualScrolling())
   return;
  var scrollHelper = this.GetScrollHelper();
  if(scrollHelper)
   scrollHelper.SetVertScrollPosition(value);
 },
 SetHorzScrollPos: function(value) {
  this.SetHorizontalScrollPosition(value);
 },
 SetHorizontalScrollPosition: function(value) {
  var scrollHelper = this.GetScrollHelper();
  if(scrollHelper)
   scrollHelper.SetHorzScrollPosition(value);
 },
 SetFixedColumnScrollableRows: function(scrollableRowSettings) {
  var helper = this.GetFixedColumnsHelper();
  if(helper)
   helper.SetFixedColumnScrollableRows(scrollableRowSettings);
 },
 ExportTo: function(format) {
  ASPxClientGridBase.prototype.ExportTo.call(this, format);
 },
 RaiseItemClick: function(visibleIndex, htmlEvent) {
  if(!this.RowClick.IsEmpty()){
   var args = new ASPxClientGridViewRowClickEventArgs(visibleIndex, htmlEvent);
   this.RowClick.FireEvent(this, args);
   return args.cancel;
  }
  return false; 
 },
 RaiseItemDblClick: function(visibleIndex, htmlEvent) {
  if(!this.RowDblClick.IsEmpty()){
   ASPx.Selection.Clear(); 
   var args = new ASPxClientGridViewRowClickEventArgs(visibleIndex, htmlEvent);
   this.RowDblClick.FireEvent(this, args);
   return args.cancel;
  }
  return false; 
 },
 RaiseContextMenu: function(objectType, index, htmlEvent, menu, showBrowserMenu) {
  var args = new ASPxClientGridViewContextMenuEventArgs(objectType, index, htmlEvent, menu, showBrowserMenu);
  if(!this.ContextMenu.IsEmpty())
   this.ContextMenu.FireEvent(this, args);
  return !!args.showBrowserMenu;
 },
 RaiseFocusedItemChanged: function(isChangedOnServer) {
  if(!this.FocusedRowChanged.IsEmpty()){
   var args = new ASPxClientGridViewFocusEventArgs(isChangedOnServer);
   this.FocusedRowChanged.FireEvent(this, args);
   if(args.processOnServer)
    this.gridCallBack([ASPxClientGridViewCallbackCommand.FocusedRow]);
  }
  return false; 
 },
 RaiseItemFocusing: function(visibleIndex, htmlEvent) { 
  if(!this.RowFocusing.IsEmpty()){
   var args = new ASPxClientGridViewRowFocusingEventArgs(visibleIndex, htmlEvent);
   this.RowFocusing.FireEvent(this, args);
   return args.cancel;
  }
  return false; 
 },
 RaiseColumnStartDragging: function(column) {
  if(!this.ColumnStartDragging.IsEmpty()){
   var args = new ASPxClientGridViewColumnCancelEventArgs(column);
   this.ColumnStartDragging.FireEvent(this, args);
   return args.cancel;
  }
  return false; 
 },
 RaiseColumnResizing: function(column) {
  if(!this.ColumnResizing.IsEmpty()){
   var args = new ASPxClientGridViewColumnCancelEventArgs(column);
   this.ColumnResizing.FireEvent(this, args);
   return args.cancel;
  }
  return false; 
 },
 RaiseColumnResized: function(column) {
  if(!this.ColumnResized.IsEmpty()){
   var args = new ASPxClientGridViewColumnProcessingModeEventArgs(column);
   this.ColumnResized.FireEvent(this, args);
   if(args.processOnServer)
    this.Refresh();
  }
 },
 RaiseRowExpanding: function(visibleIndex) {
  if(!this.RowExpanding.IsEmpty()){
   var args = new ASPxClientGridViewRowCancelEventArgs(visibleIndex);
   this.RowExpanding.FireEvent(this, args);
   return args.cancel;
  }
  return false; 
 },
 RaiseRowCollapsing: function(visibleIndex) {
  if(!this.RowCollapsing.IsEmpty()){
   var args = new ASPxClientGridViewRowCancelEventArgs(visibleIndex);
   this.RowCollapsing.FireEvent(this, args);
   return args.cancel;
  }
  return false; 
 },
 RaiseDetailRowExpanding: function(visibleIndex) {
  if(!this.DetailRowExpanding.IsEmpty()){
   var args = new ASPxClientGridViewRowCancelEventArgs(visibleIndex);
   this.DetailRowExpanding.FireEvent(this, args);
   return args.cancel;
  }
  return false; 
 },
 RaiseDetailRowCollapsing: function(visibleIndex) {
  if(!this.DetailRowCollapsing.IsEmpty()){
   var args = new ASPxClientGridViewRowCancelEventArgs(visibleIndex);
   this.DetailRowCollapsing.FireEvent(this, args);
   return args.cancel;
  }
  return false; 
 },
 RaiseBatchEditConfirmShowing: function(requestTriggerID) {
  if(!this.BatchEditConfirmShowing.IsEmpty()) {
   var args = new ASPxClientGridViewBatchEditConfirmShowingEventArgs(requestTriggerID);
   this.BatchEditConfirmShowing.FireEvent(this, args);
   return args.cancel;
  }
  return false;
 },
 RaiseBatchEditStartEditing: function(visibleIndex, column, rowValues) {
  var args = new ASPxClientGridViewBatchEditStartEditingEventArgs(visibleIndex, column, rowValues, this.ConvertVisibleIndexToKey(visibleIndex));
  if(!this.BatchEditStartEditing.IsEmpty())
   this.BatchEditStartEditing.FireEvent(this, args);
  return args;
 },
 RaiseBatchEditEndEditing: function(visibleIndex, focusedColumn, rowValues) {
  var args = new ASPxClientGridViewBatchEditEndEditingEventArgs(visibleIndex, rowValues, this.ConvertVisibleIndexToKey(visibleIndex), focusedColumn);
  if(!this.BatchEditEndEditing.IsEmpty())
   this.BatchEditEndEditing.FireEvent(this, args);
  return args;
 },
 RaiseBatchEditItemChangesCanceling: function(visibleIndex, rowValues) {
  var args = new ASPxClientGridViewBatchEditRowChangesCancelingEventArgs(visibleIndex, rowValues, this.ConvertVisibleIndexToKey(visibleIndex));
  if(!this.BatchEditRowChangesCanceling.IsEmpty())
   this.BatchEditRowChangesCanceling.FireEvent(this, args);
  return args;
 },
 RaiseBatchEditItemValidating: function(visibleIndex, validationInfo) {
  var args = new ASPxClientGridViewBatchEditRowValidatingEventArgs(visibleIndex, validationInfo, this.ConvertVisibleIndexToKey(visibleIndex));
  if(!this.BatchEditRowValidating.IsEmpty())
   this.BatchEditRowValidating.FireEvent(this, args);
  return args.validationInfo;
 },
 RaiseBatchEditTemplateCellFocused: function(columnIndex) {
  var column = this._getColumn(columnIndex);
  if(!column) return false;
  var args = new ASPxClientGridViewBatchEditTemplateCellFocusedEventArgs(column);
  if(!this.BatchEditTemplateCellFocused.IsEmpty())
   this.BatchEditTemplateCellFocused.FireEvent(this, args);
  return args.handled;
 },
 RaiseBatchEditChangesSaving: function(valuesInfo) { 
  if(!this.BatchEditChangesSaving.IsEmpty()){
   var args = new ASPxClientGridViewBatchEditChangesSavingEventArgs(valuesInfo.insertedValues, valuesInfo.deletedValues, valuesInfo.updatedValues);
   this.BatchEditChangesSaving.FireEvent(this, args);
   return args.cancel;
  }
  return false; 
 },
 RaiseBatchEditChangesCanceling: function(valuesInfo) { 
  if(!this.BatchEditChangesCanceling.IsEmpty()){
   var args = new ASPxClientGridViewBatchEditChangesCancelingEventArgs(valuesInfo.insertedValues, valuesInfo.deletedValues, valuesInfo.updatedValues);
   this.BatchEditChangesCanceling.FireEvent(this, args);
   return args.cancel;
  }
  return false; 
 },
 RaiseBatchEditItemInserting: function(visibleIndex) { 
  if(!this.BatchEditRowInserting.IsEmpty()){
   var args = new ASPxClientGridViewBatchEditRowInsertingEventArgs(visibleIndex);
   this.BatchEditRowInserting.FireEvent(this, args);
   return args.cancel;
  }
  return false; 
 },
 RaiseBatchEditItemDeleting: function(visibleIndex, itemValues) { 
  if(!this.BatchEditRowDeleting.IsEmpty()){
   var args = new ASPxClientGridViewBatchEditRowDeletingEventArgs(visibleIndex, itemValues, this.ConvertVisibleIndexToKey(visibleIndex));
   this.BatchEditRowDeleting.FireEvent(this, args);
   return args.cancel;
  }
  return false; 
 },
 RaiseBatchEditItemRecovering: function(visibleIndex, itemValues) { 
  if(!this.BatchEditRowRecovering.IsEmpty()){
   var args = new ASPxClientGridViewBatchEditRowRecoveringEventArgs(visibleIndex, itemValues, this.ConvertVisibleIndexToKey(visibleIndex));
   this.BatchEditRowRecovering.FireEvent(this, args);
   return args.cancel;
  }
  return false;
 },
 RaiseBatchEditChangesPreviewShowing: function() { 
  if(!this.BatchEditChangesPreviewShowing.IsEmpty()){
   var args = new ASPxClientCancelEventArgs();
   this.BatchEditChangesPreviewShowing.FireEvent(this, args);
   return args.cancel;
  }
  return false;
 },
 RaiseBatchEditChangesPreviewShown: function() { 
  if(!this.BatchEditChangesPreviewShown.IsEmpty()){
   var args = new ASPxClientEventArgs();
   this.BatchEditChangesPreviewShown.FireEvent(this, args);
  }
 },
 RaiseContextMenuItemClick: function(e, itemInfo) {
  if(this.ContextMenuItemClick.IsEmpty())
   return false;
  var args = new ASPxClientGridViewContextMenuItemClickEventArgs(e.item, itemInfo.objectType, itemInfo.index);
  this.ContextMenuItemClick.FireEvent(this, args);
  if(!args.handled && args.processOnServer) {
   this.GetContextMenuHelper().ProcessCustomContextMenuItemClick(args.usePostBack);
   return true;
  }
  return args.handled;
 },
 RaiseColumnMoving: function(targets) {
  if(this.ColumnMoving.IsEmpty()) return;
  var srcColumn = this.getColumnObject(targets.obj.id);
  var destColumn = this.getColumnObject(targets.targetElement.id);
  var isLeft = targets.isLeftPartOfElement();
  var isGroupPanel = targets.targetElement == targets.control.GetGroupPanel();
  var args = new ASPxClientGridViewColumnMovingEventArgs(srcColumn, destColumn, isLeft, isGroupPanel);
  this.ColumnMoving.FireEvent(this, args);
  if(!args.allow)
   targets.targetElement = null;
 },
 CreateCommandCustomButtonEventArgs: function(index, id){
  return new ASPxClientGridViewCustomButtonEventArgs(index, id);
 },
 CreateSelectionEventArgs: function(visibleIndex, isSelected, isAllRecordsOnPage, isChangedOnServer){
  return new ASPxClientGridViewSelectionEventArgs(visibleIndex, isSelected, isAllRecordsOnPage, isChangedOnServer);
 },
 CreateColumnCancelEventArgs: function(column){
  return new ASPxClientGridViewColumnCancelEventArgs(column);
 },
 CreateColumnMovingEventArgs: function(sourceColumn, destinationColumn, isDropBefore, isGroupPanel){
  return new ASPxClientGridViewColumnMovingEventArgs(sourceColumn, destinationColumn, isDropBefore, isGroupPanel);
 },
 CreateUserCellInfo: function(visibleIndex, column, key) { return new ASPxClientGridViewCellInfo(visibleIndex, column, key); },
 CreateFocusedCellChangingArgs: function(cellInfo) { return new ASPxClientGridViewFocusedCellChangingEventArgs(cellInfo); },
 CreateCellSelectionChangingArgs: function(cellInfo, newSelectionState) { return new ASPxClientGridViewCellSelectionChangingEventArgs(cellInfo, newSelectionState); },
 CreateClipboardCellPastingArgs: function(cellInfo, originalValueInfo, valueInfo) { return new ASPxClientGridViewClipboardCellPastingEventArgs(cellInfo, originalValueInfo, valueInfo); },
 GetRowValues: function(visibleIndex, fieldNames, onCallBack) {
  this.GetItemValues(visibleIndex, fieldNames, onCallBack);
 },
 GetPageRowValues: function(fieldNames, onCallBack) {
  this.GetPageItemValues(fieldNames, onCallBack);
 },
 GetVisibleRowsOnPage: function() {
  return this.GetVisibleItemsOnPage();
 }, 
 GetVisibleRowsIndicesForAdaptivity: function() {
  var batchEditHelper = this.GetBatchEditHelper();
  var currentPageIndices = this.GetCurrentPageIndices();
  if(batchEditHelper) {
   if(batchEditHelper.IsChangesViewVisible())
    return batchEditHelper.GetChangedRecordKeys().map(function(key) { return this.ConvertKeyToVisibleIndex(key); }.bind(this));
   var indices = this.GetDataItemVisibleIndices(batchEditHelper.GetHighlightDeletedItems());
   var groupRowIndices = currentPageIndices.filter(function(index){ this.IsGroupRow(index); }.bind(this));
   return indices.concat(groupRowIndices);
  }
  if(this.IsInlineEditMode() && this.IsNewRowEditing()) 
   currentPageIndices.push(this.NewRowVisibleIndex);
  return currentPageIndices;
 },
 GetClientChangedVisibleIndices: function(includeDeleted, fromAPI) {
  var helper = this.GetBatchEditHelper();
  if(!helper) 
   return [ ];
  return helper.GetChangedRecordKeys().map(function(key) { return this.ConvertKeyToVisibleIndex(key); }.bind(this));
 },
 GetRowIndicesVisibleInViewPort: function(includePartiallyVisible) {
  var mainTable = this.GetMainTable();
  var treeLine = ASPx.GetElementTreeLine(mainTable).filter(function(element) {
   var style = ASPx.GetCurrentStyle(element);
   return style.overflow !== "visible" || style.overflowY !== "visible";
  });
  treeLine.push(mainTable);
  treeLine.push(document.body);
  var treeLineDimensions = treeLine.map(function(element) { 
   var y = ASPx.GetAbsoluteY(element);
   var height = element.tagName === "BODY" ? ASPx.GetDocumentClientHeight() : element.offsetHeight;
   return { element: element, top: y, bottom: y + height - 1 };
  });
  var mainTableViewPortTop = ASPx.Data.Max(treeLineDimensions, function(info) { return info.top; });
  var mainTableViewPortBottom = ASPx.Data.Min(treeLineDimensions, function(info) { return info.bottom; });
  var dataRowVisibleIndices = this.GetLayoutHelper().GetDataItemVisibleIndices();
  var groupRowVisibleIndices = ASPx.Data.Range(this.GetVisibleRowsOnPage(), this.GetTopVisibleIndex()).filter(function(i) { return this.IsGroupRow(i); }.bind(this));
  var dataRows = dataRowVisibleIndices.map(function(i) {   return { visibleIndex: i, row: this.GetDataRow(i) }; }.bind(this));
  var groupRows = groupRowVisibleIndices.map(function(i) { return { visibleIndex: i, row: this.GetGroupRow(i) }; }.bind(this));
  var result = dataRows.concat(groupRows).filter(function(rowInfo) {
   var rowTop = ASPx.GetAbsoluteY(rowInfo.row);
   var rowBottom = rowTop + rowInfo.row.offsetHeight - 1;
   if(includePartiallyVisible)
    return rowTop <= mainTableViewPortBottom && rowBottom >= mainTableViewPortTop;
   return rowTop >= mainTableViewPortTop && rowBottom <= mainTableViewPortBottom;
  }).map(function(rowInfo) { return rowInfo.visibleIndex; });
  ASPx.Data.ArrayIntegerSort(result);
  return result;
 },
 ApplyOnClickRowFilter: function() {
  this.GetFilterHelper().ApplyMultiColumnAutoFilter();
 },
 GetEditFormLayout: function() {
  if(this.hasEditFormTemplate) {
   var result = null;
   if(this.IsEditing()) {
    var popupEditForm = this.GetPopupEditForm();
    var templateContainer = popupEditForm ? popupEditForm.GetWindowContentElement(-1) : this.GetEditFormTableCell();
    var editFormLayoutIDPostfix = this.GetEditFormLayoutIDPostfix();
    ASPx.GetControlCollection().ProcessControlsInContainer(templateContainer, function(control) { result = control; },
     function(control) { return control.name && ASPx.Str.EndsWith(control.name, editFormLayoutIDPostfix); }
    );
   }
   return result;
  }
  return ASPxClientGridBase.prototype.GetEditFormLayout.call(this);
 },
 GetEditFormLayoutIDPostfix: function() {
  return "_DXEFL";
 }
});
ASPxClientGridView.Cast = ASPxClientControl.Cast;
var ASPxClientGridViewColumn = ASPx.CreateClass(ASPxClientGridColumnBase, {
 constructor: function(prop){
  this.constructor.prototype.constructor.call(this, prop);
  this.visibleIndex =    ASPx.IsExists(prop[8])  ? prop[8]  : -1;
  this.groupIndex =      ASPx.IsExists(prop[9])  ? prop[9]  : -1;
  this.columnType =      ASPx.IsExists(prop[10]) ? prop[10] : 0;
  this.filterRowTypeKind =  ASPx.IsExists(prop[11]) ? prop[11] : "";
  this.isFixed =      ASPx.IsExists(prop[12]) ?  !!prop[12] : false;
  this.allowGroup =      ASPx.IsExists(prop[13]) ?  !!prop[13] : true;
  this.allowDrag =    ASPx.IsExists(prop[14]) ?  !!prop[14] : true;
  this.parentIndex =     ASPx.IsExists(prop[15]) ? prop[15] : -1;
  this.inCustWindow =    ASPx.IsExists(prop[16]) ?  !!prop[16] : false;
  this.minWidth =     ASPx.IsExists(prop[17]) ? prop[17] : 0;
  this.maxWidth =     ASPx.IsExists(prop[18]) ? prop[18] : 0;
  this.rowSpan =      ASPx.IsExists(prop[19]) ? prop[19] : 1;
  this.showFilterMenuLikeItem =   ASPx.IsExists(prop[20]) ?  !!prop[20] : false;
  this.collectionIndex  =   ASPx.IsExists(prop[21]) ? prop[21] : -1;
  this.showInCustomizationForm =  ASPx.IsExists(prop[22]) ?  !!prop[22] : true;
  this.hasGroupRowTemplate =   ASPx.IsExists(prop[23]) ?  !!prop[23] : false;
  this.isDataColumn = this.columnType === 0;
  this.isCommandColumn = this.columnType === 1;
  this.isBand = this.columnType === 2;
 }
});
var ASPxClientGridViewColumnCancelEventArgs = ASPx.CreateClass(ASPxClientCancelEventArgs, {
 constructor: function(column){
  this.constructor.prototype.constructor.call(this);
  this.column = column;
 }
});
var ASPxClientGridViewColumnProcessingModeEventArgs = ASPx.CreateClass(ASPxClientProcessingModeEventArgs, {
 constructor: function(column){
  this.constructor.prototype.constructor.call(this, false);
  this.column = column;
 }
});
var ASPxClientGridViewRowCancelEventArgs = ASPx.CreateClass(ASPxClientCancelEventArgs, {
 constructor: function(visibleIndex){
  this.constructor.prototype.constructor.call(this);
  this.visibleIndex = visibleIndex;
 }
});
var ASPxClientGridViewSelectionEventArgs = ASPx.CreateClass(ASPxClientProcessingModeEventArgs, {
 constructor: function(visibleIndex, isSelected, isAllRecordsOnPage, isChangedOnServer){
  this.constructor.prototype.constructor.call(this, false);
  this.visibleIndex = visibleIndex;
  this.isSelected = isSelected;
  this.isAllRecordsOnPage = isAllRecordsOnPage;
  this.isChangedOnServer = !!isChangedOnServer;
 }
});
var ASPxClientGridViewFocusEventArgs = ASPx.CreateClass(ASPxClientProcessingModeEventArgs, {
 constructor: function(isChangedOnServer){
  this.constructor.prototype.constructor.call(this, false);
  this.isChangedOnServer = !!isChangedOnServer;
 }
});
var ASPxClientGridViewRowFocusingEventArgs = ASPx.CreateClass(ASPxClientGridViewRowCancelEventArgs, {
 constructor: function(visibleIndex, htmlEvent){
  this.constructor.prototype.constructor.call(this, visibleIndex);
  this.htmlEvent = htmlEvent;
 }
});
var ASPxClientGridViewRowClickEventArgs = ASPx.CreateClass(ASPxClientGridViewRowCancelEventArgs, {
 constructor: function(visibleIndex, htmlEvent){
  this.constructor.prototype.constructor.call(this, visibleIndex);
  this.htmlEvent = htmlEvent;
 }
});
var ASPxClientGridViewContextMenuEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(objectType, index, htmlEvent, menu, showBrowserMenu) {
  this.constructor.prototype.constructor.call(this);
  this.objectType = objectType;
  this.index = index;
  this.htmlEvent = htmlEvent;
  this.menu = menu;
  this.showBrowserMenu = showBrowserMenu;
 }
});
var ASPxClientGridViewContextMenuItemClickEventArgs = ASPx.CreateClass(ASPxClientProcessingModeEventArgs, {
 constructor: function(item, objectType, elementIndex, processOnServer){
  this.constructor.prototype.constructor.call(this, processOnServer);
  this.item = item;
  this.objectType = objectType;
  this.elementIndex = elementIndex;
  this.usePostBack = false;
  this.handled = false;
 }
});
var ASPxClientGridViewCustomButtonEventArgs = ASPx.CreateClass(ASPxClientProcessingModeEventArgs, {
 constructor: function(visibleIndex, buttonID) {
  this.constructor.prototype.constructor.call(this, false);
  this.visibleIndex = visibleIndex;
  this.buttonID = buttonID;
 } 
});
var ASPxClientGridViewColumnMovingEventArgs = ASPx.CreateClass(ASPxClientEventArgs, {
 constructor: function(sourceColumn, destinationColumn, isDropBefore, isGroupPanel) {
  this.constructor.prototype.constructor.call(this);
  this.allow = true;
  this.sourceColumn = sourceColumn;
  this.destinationColumn = destinationColumn;
  this.isDropBefore = isDropBefore;
  this.isGroupPanel = isGroupPanel;
 }
});
var ASPxClientGridViewBatchEditConfirmShowingEventArgs = ASPx.CreateClass(ASPxClientGridBatchEditConfirmShowingEventArgs, {
 constructor: function(requestTriggerID) {
  this.constructor.prototype.constructor.call(this, requestTriggerID);
 }
});
var ASPxClientGridViewBatchEditStartEditingEventArgs = ASPx.CreateClass(ASPxClientGridBatchEditStartEditingEventArgs, {
 constructor: function(visibleIndex, focusedColumn, itemValues, key) {
  this.constructor.prototype.constructor.call(this, visibleIndex, focusedColumn, itemValues);
  this.rowValues = this.itemValues;
  this.key = key;
 }
});
var ASPxClientGridViewBatchEditEndEditingEventArgs = ASPx.CreateClass(ASPxClientGridBatchEditEndEditingEventArgs, {
 constructor: function(visibleIndex, itemValues, key, focusedColumn) {
  this.constructor.prototype.constructor.call(this, visibleIndex, focusedColumn, itemValues);
  this.rowValues = this.itemValues;
  this.key = key;
 }
});
var ASPxClientGridViewBatchEditRowChangesCancelingEventArgs = ASPx.CreateClass(ASPxClientGridBatchEditItemChangesCancelingEventArgs, {
 constructor: function(visibleIndex, itemValues, key) {
  this.constructor.prototype.constructor.call(this, visibleIndex, itemValues);
  this.rowValues = this.itemValues;
  this.key = key;
 }
});
var ASPxClientGridViewBatchEditRowValidatingEventArgs = ASPx.CreateClass(ASPxClientGridBatchEditItemValidatingEventArgs, {
 constructor: function(visibleIndex, validationInfo, key) {
  this.constructor.prototype.constructor.call(this, visibleIndex, validationInfo);
  this.key = key;
 }
});
var ASPxClientGridViewBatchEditTemplateCellFocusedEventArgs = ASPx.CreateClass(ASPxClientGridBatchEditTemplateCellFocusedEventArgs, {
 constructor: function(column) {
  this.constructor.prototype.constructor.call(this, column);
 }
});
var ASPxClientGridViewBatchEditChangesSavingEventArgs = ASPx.CreateClass(ASPxClientGridBatchEditClientChangesEventArgs, {
 constructor: function(insertedValues, deletedValues, updatedValues) {
  this.constructor.prototype.constructor.call(this, insertedValues, deletedValues, updatedValues);
 }
});
var ASPxClientGridViewBatchEditChangesCancelingEventArgs = ASPx.CreateClass(ASPxClientGridBatchEditClientChangesEventArgs, {
 constructor: function(insertedValues, deletedValues, updatedValues) {
  this.constructor.prototype.constructor.call(this, insertedValues, deletedValues, updatedValues);
 }
});
var ASPxClientGridViewBatchEditRowInsertingEventArgs = ASPx.CreateClass(ASPxClientGridBatchEditItemInsertingEventArgs, {
 constructor: function(visibleIndex) {
  this.constructor.prototype.constructor.call(this, visibleIndex);
 }
});
var ASPxClientGridViewBatchEditRowDeletingEventArgs = ASPx.CreateClass(ASPxClientGridBatchEditItemDeletingEventArgs, {
 constructor: function(visibleIndex, itemValues, key) {
  this.constructor.prototype.constructor.call(this, visibleIndex, itemValues, key);  
  this.rowValues = this.itemValues;  
  this.key = key;
 }
});
var ASPxClientGridViewBatchEditRowRecoveringEventArgs = ASPx.CreateClass(ASPxClientGridBatchEditItemDeletingEventArgs, {
 constructor: function(visibleIndex, itemValues, key) {
  this.constructor.prototype.constructor.call(this, visibleIndex, itemValues, key);  
  this.rowValues = this.itemValues; 
  this.key = key;
 }
});
var ASPxClientGridViewFocusedCellChangingEventArgs = ASPx.CreateClass(ASPxClientGridFocusedCellChangingEventArgs, {
 constructor: function(cellInfo) {
  this.constructor.prototype.constructor.call(this, cellInfo);
 }
});
var ASPxClientGridViewCellSelectionChangingEventArgs = ASPx.CreateClass(ASPxClientGridCellSelectionChangingEventArgs, {
 constructor: function(cellInfo, newSelectionState) {
  this.constructor.prototype.constructor.call(this, cellInfo, newSelectionState);
 }
});
var ASPxClientGridViewClipboardCellPastingEventArgs = ASPx.CreateClass(ASPxClientGridClipboardCellPastingEventArgs, {
 constructor: function(cellInfo, oldValueInfo, newValueInfo) {
  this.constructor.prototype.constructor.call(this, cellInfo, oldValueInfo, newValueInfo);
 }
});
var ASPxClientGridViewCellInfo = ASPx.CreateClass(ASPxClientGridCellInfo, {
 constructor: function(visibleIndex, column, key) {
  this.constructor.prototype.constructor.call(this, visibleIndex, column);
  this.rowVisibleIndex = this.itemVisibleIndex;
  this.key = key;
 }
});
ASPx.GVContextMenu = function(name, e) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null) {
  var showDefaultMenu = gv.GetContextMenuHelper().OnContextMenuClick(e);
  if(!showDefaultMenu)
   ASPx.Evt.PreventEventAndBubble(e);
  return showDefaultMenu;
  }
 return true;
};
ASPx.GVContextMenuItemClick = function(name, e) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null)
  gv.GetContextMenuHelper().OnContextMenuItemClick(e);
};
ASPx.GVExpandRow = function(name, visibleIndex, event) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null) {
  if(gv.useEndlessPaging && event)
   visibleIndex = gv.FindParentRowVisibleIndex(ASPx.Evt.GetEventSource(event), true);
  gv.ExpandRow(visibleIndex);
 }
};
ASPx.GVCollapseRow = function(name, visibleIndex, event) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null) {
  if(gv.useEndlessPaging && event)
   visibleIndex = gv.FindParentRowVisibleIndex(ASPx.Evt.GetEventSource(event), true);
  gv.CollapseRow(visibleIndex);
 }
};
ASPx.GVShowDetailRow = function(name, visibleIndex, event) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null) {
  if(gv.useEndlessPaging && event)
   visibleIndex = gv.FindParentRowVisibleIndex(ASPx.Evt.GetEventSource(event), true);
  gv.ExpandDetailRow(visibleIndex);
 }
};
ASPx.GVHideDetailRow = function(name, visibleIndex, event) {
 var gv = ASPx.GetControlCollection().Get(name);
 if(gv != null) {
  if(gv.useEndlessPaging && event)
   visibleIndex = gv.FindParentRowVisibleIndex(ASPx.Evt.GetEventSource(event), true);
  gv.CollapseDetailRow(visibleIndex);
 }
};
ASPx.Evt.AttachEventToElement(window, "scroll", function(evt) {
 ASPx.GetControlCollection().ForEachControl(function(control){
  if(control instanceof ASPxClientGridView && ASPx.IsExists(control.GetMainElement()))
   control.OnScroll(evt);
 });
});
var GridViewCallbackHelper = ASPx.CreateClass(ASPx.GridCallbackHelper, {
 constructor: function(grid) {
  this.constructor.prototype.constructor.call(this, grid);
 },
 GetResizingState: function() { return this.grid.stateObject.resizingState; },
 GetContextMenuState: function() { return this.grid.GetContextMenuHelper().GetCallbackState(); },
 GetGridCallbackState: function() {
  var state = ASPx.GridCallbackHelper.prototype.GetGridCallbackState.call(this);
  return state.concat([
   [ "CR", this.GetResizingState() ],
   [ "CM", this.GetContextMenuState() ]
  ]);
 },
 ValidateCommand: function(command) {
  if(!ASPx.GridCallbackHelper.prototype.ValidateCommand.call(this, command))
   return false;
  if(this.IsBatchChangesViewMode() && command !== ASPxClientGridViewCallbackCommand.UpdateEdit)
   return false;
  return true;
 },
 IsBatchChangesViewMode: function() { return this.grid.IsBatchChangesViewMode(); }
});
var GridViewKbdHelper = ASPx.CreateClass(ASPx.GridKbdHelper, {
 constructor: function(control, enableKeyboardNavigation) {
  this.constructor.prototype.constructor.call(this, control);
  this.preventBrowserScrollOnFocus = false;
  this.enableKeyboardNavigation = enableKeyboardNavigation;
 },
 RequirePreventScrollOnFocus: function() { return this.preventBrowserScrollOnFocus; },
 CanFocus: function(e) {
  var grid = this.control;
  if(grid.IsDetailGridFocused(e))
   return false;
  var batchEditHelper = grid.GetBatchEditHelper();
  if(batchEditHelper && batchEditHelper.CanStartEditOnTableClick(grid.getItemByHtmlEvent(e), e))
   return false;
  var popupsToCheck = [grid.GetCustomizationWindow(), grid.GetCustDialogWindow(), grid.GetFilterControlPopup(), grid.GetPopupEditForm(), grid.GetHeaderFilterPopup()];
  var isPopupVisible = popupsToCheck.some(function(p) { return p && p.IsVisible(); });
  if(isPopupVisible)
   return false;
  if(!this.canFocusOnActiveDropDownEditPopup())
   return false;
  return ASPx.GridKbdHelper.prototype.CanFocus.call(this, e);
 },
 canFocusOnActiveDropDownEditPopup: function() {
  return !this.getActiveDropDownEditPopup();
 },
 getActiveDropDownEditPopup: function() {
  var result = null;
  var activePopup = ASPx.GetPopupControlCollection && ASPx.GetPopupControlCollection().GetCurrentActiveWindowElement();
  if(activePopup) {
   var activePopupControl = ASPx.GetClientControlByElementID(activePopup.id);
   var isDropDownEditPopup = ASPx.IsExists(activePopupControl) && activePopupControl.usedInDropDown;
   if(isDropDownEditPopup) 
    result = activePopupControl;
  }
  return result;
 },
 HandleKeyDown: function(e) {
  var handled = ASPx.GridKbdHelper.prototype.HandleKeyDown.call(this, e);
  if(handled || !this.enableKeyboardNavigation)
   return false;
  var grid = this.control;
  this.moveIterationCount = 0;
  var index = grid.GetFocusedRowIndex();
  var busy = grid.keyboardLock;
  var key = ASPx.Evt.GetKeyCode(e);
  if(grid.rtl) {
   if(key == ASPx.Key.Left)
    key = ASPx.Key.Right;
   else if(key == ASPx.Key.Right)
    key = ASPx.Key.Left;
  }
  switch(key) {
   case ASPx.Key.Down:
    if(!busy) 
     this.TryMoveFocusDown(index, e.shiftKey, e);
    return true;
   case ASPx.Key.Up:
    if(!busy) 
     this.TryMoveFocusUp(index, e.shiftKey, e);
    return true;
   case ASPx.Key.Right:
    if(!busy) {
     if(!this.TryExpand(index))
      this.TryMoveFocusDown(index, e.shiftKey, e);
    }
    return true;
   case ASPx.Key.Left:
    if(!busy) {
     if(!this.TryCollapse(index))
      this.TryMoveFocusUp(index, e.shiftKey, e);
    }
    return true;
   case ASPx.Key.PageDown:
    if(e.shiftKey) {
     if(!busy && grid.pageIndex < grid.pageCount - 1)
      grid.NextPage();
     return true; 
    }
    break;
   case ASPx.Key.PageUp:
    if(e.shiftKey) {
     if(!busy && grid.pageIndex > 0)
      grid.PrevPage();
     return true; 
    }
    break;     
  }
  return false;
 },
 HandleKeyPress: function(e) {
  var handled = ASPx.GridKbdHelper.prototype.HandleKeyPress.call(this, e);
  if(handled || !this.enableKeyboardNavigation)
   return false;
  var grid = this.grid;
  var index = grid.GetFocusedRowIndex();
  var busy = grid.keyboardLock;
  switch(ASPx.Evt.GetKeyCode(e)) {
   case ASPx.Key.Space:
    if(!busy && this.IsRowSelectable(index))
     if(grid.IsRowSelectedOnPage(index)) {
      grid.UnselectRowOnPage(index);
     } else {
      grid.SelectRowOnPage(index);
     }
    return true;
    case 43:
    if(!busy)
     this.TryExpand(index);
    return true;
    case 45: 
    if(!busy)   
     this.TryCollapse(index);    
    return true;
  }
  return false;
 },
 EnsureFocusedRowVisible: function() {
  var grid = this.control;
  if(!grid.HasVertScroll()) return;
  var row = grid.GetItem(grid.GetFocusedRowIndex());
  grid.GetScrollHelper().MakeRowVisible(row, true);
 },
 HasDetailButton: function(expanded) {
  var grid = this.control;
  var row = grid.GetItem(grid.GetFocusedRowIndex());
  if(!row) return;
  var needle = expanded ? "ASPx.GVHideDetailRow" : "ASPx.GVShowDetailRow";
  return row.innerHTML.indexOf(needle) > -1;
 },
 IsRowSelectable: function(index) {
  if(this.control.allowSelectByItemClick)
   return true;
  var row = this.control.GetItem(index);
  if(row && row.innerHTML.indexOf("aspxGVSelectRow") > -1)
   return true;
  var check = this.control.GetDataRowSelBtn(index); 
  if(check && this.control.internalCheckBoxCollection && !!this.control.internalCheckBoxCollection.Get(check.id))
   return true;
  return false;
 },
 UpdateShiftSelection: function(start, end) {
  var grid = this.control;
  grid.UnselectAllRowsOnPage();
  if(grid.lastMultiSelectIndex > -1)   
   start = grid.lastMultiSelectIndex;
  else   
   grid.lastMultiSelectIndex = start;
  if(grid.allowSelectSingleRowOnly)
   start = end;
  for(var i = Math.min(start, end); i <= Math.max(start, end); i++)
   grid.SelectRowOnPage(i);
 },
 TryExpand: function(index) {
  var grid = this.control;
  if(grid.IsGroupRow(index) && !grid.IsGroupRowExpanded(index)) {
   grid.ExpandRow(index);
   return true;
  }
  if(this.HasDetailButton(false)) {
   grid.ExpandDetailRow(index);
   return true;
  }
  return false;
 },
 TryCollapse: function(index) {
  var grid = this.control;
  if(grid.IsGroupRow(index) && grid.IsGroupRowExpanded(index)) {
   grid.CollapseRow(index);
   return true;
  }
  if(this.HasDetailButton(true)) {
   grid.CollapseDetailRow(index);
   return true;
  }
  return false;
 },
 TryMoveFocusDown: function(index, select, htmlEvent) {
  this.moveIterationCount++;
  var grid = this.control;
  if(index < grid.visibleStartIndex + grid.pageRowCount - 1) {
   var focusedRowIndex = index >= 0 ? index + 1 : grid.visibleStartIndex;
   var focusChanged = grid.TryFocusItem(focusedRowIndex, htmlEvent);
   this.EnsureFocusedRowVisible();
   if(this.IsRowSelectable(index)) {
    if(select) {
     this.UpdateShiftSelection(index, index + 1);
    } else {
     grid.lastMultiSelectIndex = -1;
    }
   }
   if(grid.allowFocusedRow && !grid.InCallback() && !focusChanged && this.moveIterationCount < 100)
    this.TryMoveFocusDown(++index, select, htmlEvent);
  } else {
   if(grid.pageIndex < grid.pageCount - 1 && grid.pageIndex >= 0) {       
    grid.NextPage();
   }
  }  
 },
 TryMoveFocusUp: function(index, select, htmlEvent) {
  this.moveIterationCount++;
  var grid = this.control;
  if(index > grid.visibleStartIndex || index == -1) {
   var focusedRowIndex = index >= 0 ? index - 1 : grid.visibleStartIndex + grid.pageRowCount - 1;
   var focusChanged = grid.TryFocusItem(focusedRowIndex, htmlEvent);
   this.EnsureFocusedRowVisible();
   if(this.IsRowSelectable(index)) {
    if(select) {
     this.UpdateShiftSelection(index, index - 1);
    } else {
     grid.lastMultiSelectIndex = -1;
    }
   }
   if(grid.allowFocusedRow && !grid.InCallback() && !focusChanged && this.moveIterationCount < 100)
    this.TryMoveFocusUp(--index, select, htmlEvent);
  } else {
   if(grid.pageIndex > 0) {
    grid.PrevPage(true);
   }
  }
 }
});
var GridViewHeaderMatrix = ASPx.CreateClass(null, {
 constructor: function(grid) {
  this.grid = grid;
 },
 Invalidate: function() {
  this.matrix = null;
  this.inverseMatrix = null;
 },
 GetRowCount: function() {
  this.EnsureMatrix();
  return this.matrix.length;
 },
 IsLeftmostColumn: function(columnIndex) {
  this.EnsureMatrix();
  return this.inverseMatrix[columnIndex].left == 0;
 },
 IsRightmostColumn: function(columnIndex) {
  this.EnsureMatrix();  
  return this.inverseMatrix[columnIndex].right == this.matrix[0].length - 1;
 },
 IsLeaf: function(columnIndex) {
  this.EnsureMatrix();
  return this.inverseMatrix.hasOwnProperty(columnIndex) && this.inverseMatrix[columnIndex].bottom == this.matrix.length - 1;
 },
 GetLeaf: function(columnIndex, isLeft, isOuter) {
  this.EnsureMatrix();
  var rect = this.inverseMatrix[columnIndex];
  var row = this.matrix[this.matrix.length - 1];
  if(isLeft) {
   if(isOuter)
    return row[rect.left - 1];
   return row[rect.left];
  }
  if(isOuter)
   return row[rect.right + 1];
  return row[rect.right];
 },
 GetLeafIndex: function(columnIndex) {
  this.EnsureMatrix();
  return this.inverseMatrix[columnIndex].left;
 },
 GetLeafIndices: function() {
  return this.GetRowIndices(this.GetRowCount() - 1);
 },
 GetRowIndices: function(rowIndex) {
  this.EnsureMatrix();
  return this.matrix[rowIndex] || [];
 },
 GetRowSpan: function(columnIndex) {
  this.EnsureMatrix();
  var rect = this.inverseMatrix[columnIndex];
  return rect.bottom - rect.top + 1;
 },
 GetLeftNeighbor: function(columnIndex, skipHidden) {
  return this.GetNeighbor(columnIndex, true, skipHidden);
 },
 GetRightNeighbor: function(columnIndex, skipHidden) {
  return this.GetNeighbor(columnIndex, false, skipHidden);
 },
 GetNeighbor: function(columnIndex, isLeft, skipHidden) {
  this.EnsureMatrix();
  if(!skipHidden)
   return this.GetNeighborCore(columnIndex, isLeft);
  var boundLeafIndex = this.GetBoundLeaf(isLeft);
  while(columnIndex !== boundLeafIndex) {
   columnIndex = this.GetNeighborCore(columnIndex, isLeft);
   if(isNaN(columnIndex) || !this.GetColumn(columnIndex).adaptiveHidden)
    return columnIndex;
  }
 },
 GetNeighborCore: function(columnIndex, isLeft) {
  var rect = this.inverseMatrix[columnIndex];
  var cellIndex = isLeft ? rect.left - 1 : rect.right + 1;
  return this.matrix[rect.top][cellIndex];
 },
 GetBoundLeaf: function(isLeft) {
  var leafs = this.GetLeafIndices();
  var cellIndex = isLeft ? 0 : leafs.length - 1;
  return leafs[cellIndex];
 },
 GetColumnLevel: function(columnIndex) {
  this.EnsureMatrix();
  var rect = this.inverseMatrix[columnIndex];
  return rect ? rect.top : -1;
 },
 GetColumnHelper: function() { return this.grid.GetColumnHelper(); },
 GetColumn: function(columnIndex) { return this.grid.GetColumn(columnIndex); },
 EnsureMatrix: function() {
  if(!this.matrix)
   this.Fill();
 },
 Fill: function() {
  var columnHelper = this.GetColumnHelper();
  var headerLayout = columnHelper.GetHeaderLayout();
  var info = columnHelper.CreateLayoutMatrixInfo(headerLayout);
  this.matrix = info.matrix;
  this.inverseMatrix = info.inverseMatrix;
 }
});
var GridViewAdjuster = ASPx.CreateClass(null, {
 constructor: function() {
  this.masterGridForAdjust = null;
  this.documentScrollTop = GridViewConsts.UnspecifiedScrollPosition;
  this.lockDocumentScrollRestoring = false;
 },
 GetMasterGridForAdjust: function() {
  return this.masterGridForAdjust;
 },
 SetMasterGridForAdjust: function(grid) {
  this.masterGridForAdjust = grid;
 },
 SaveDocumentScrollPosition: function(lockRestoring) {
  if(this.documentScrollTop === GridViewConsts.UnspecifiedScrollPosition)
   this.documentScrollTop = ASPx.GetDocumentScrollTop();
  this.lockDocumentScrollRestoring = this.lockDocumentScrollRestoring || lockRestoring;
 },
 RestoreDocumentScrollPosition: function(forceRestoring) {
  if((!this.lockDocumentScrollRestoring || forceRestoring) && this.documentScrollTop !== GridViewConsts.UnspecifiedScrollPosition) {
   if(this.documentScrollTop !== ASPx.GetDocumentScrollTop())
    ASPx.SetDocumentScrollTop(this.documentScrollTop);
   this.documentScrollTop = GridViewConsts.UnspecifiedScrollPosition;
  }
  this.lockDocumentScrollRestoring = this.lockDocumentScrollRestoring && !forceRestoring;
 },
 ResetDocumentScrollPosition: function() {
  this.documentScrollTop = GridViewConsts.UnspecifiedScrollPosition;
  this.lockDocumentScrollRestoring = false;
 }
});
var gridViewAdjuster = new GridViewAdjuster();
function GetGridViewAdjuster() {
 return gridViewAdjuster;
}
var GridViewStyleHelper = ASPx.CreateClass(ASPx.GridStyleHelper, {
 BatchEditNewItemKey: "beni",
 FocusedGroupItemKey: "fgi",
 GetFocusedGroupItemStyle: function() { return this.GetStyleInfo(this.FocusedGroupItemKey); },
 GetBatchEditNewItemStyle: function() { return this.GetStyleInfo(this.BatchEditNewItemKey); },
 IsFocusedItemStyle: function(style) { 
  return  ASPx.GridStyleHelper.prototype.IsFocusedItemStyle.call(this, style) || this.IsFocusedGroupItemStyle(style);
 },
 IsFocusedGroupItemStyle: function(style) { return this.CheckStyleInfoByKey(style, this.FocusedGroupItemKey); }
});
var ASPxClientGridViewBatchEditApi = ASPx.CreateClass(ASPxClientGridBatchEditApi, {
 constructor: function(grid) {
  this.constructor.prototype.constructor.call(this, grid);
 },
 ValidateRows: function(validateOnlyModified, validateOnCurrentPageOnly) { 
  var res = this.ValidateItems(validateOnlyModified, validateOnCurrentPageOnly); 
  var helper = this.GetHelper();
  var needShowPreviewChanges = !res && !validateOnCurrentPageOnly && !!helper && helper.IsCallbacksEnabled();
  if(needShowPreviewChanges)
   helper.ShowPreviewChanges(true);
  return res;
 },
 ValidateRow: function(visibleIndex) { return this.ValidateItem(visibleIndex); },
 ValidateRowByKey: function(key) { return this.ValidateItemByKey(key); },
 GetRowVisibleIndices: function(includeDeleted) { return !this.IsPreviewChangesVisible() ?  this.GetItemVisibleIndices(includeDeleted) : [ ]; },
 GetDeletedRowIndices: function() { return !this.IsPreviewChangesVisible() ? this.GetDeletedItemVisibleIndices() : [ ]; },
 GetInsertedRowIndices: function() { return this.GetInsertedItemVisibleIndices(); },
 GetUpdatedRowIndices: function() { return !this.IsPreviewChangesVisible() ? this.GetUpdatedItemVisibleIndices() : [ ]; },
 IsDeletedRow: function(visibleIndex) { return this.IsDeletedItem(visibleIndex); },
 IsDeletedRowByKey: function(key) { return this.IsDeletedItemByKey(key); },
 IsNewRow: function(visibleIndex) { return this.IsNewItem(visibleIndex); },
 AddNewRow: function() { this.AddNewItem(); },
 DeleteRow: function(visibleIndex) { this.DeleteItem(visibleIndex); },
 DeleteRowByKey: function(key) { this.DeleteItemByKey(key); },
 RecoverRow: function(visibleIndex) { this.RecoverItem(visibleIndex); },
 RecoverRowByKey: function(key) { this.RecoverItemByKey(key); },
 ShowChangesPreview: function () {
  var helper = this.GetHelper();
  if(helper)
   helper.ShowPreviewChanges();
 },
 HideChangesPreview: function () {
  var helper = this.GetHelper();
  if(helper)
   helper.HideChanges();
 },
 IsCurrentPageRow: function(key) { return this.IsCurrentPageRecord(key); },
 IsPreviewChangesVisible: function() {
  var helper = this.GetHelper();
  return !!helper && helper.IsChangesViewVisible();
 },
 GetFocusedCell: function() { return this.grid.GetFocusedCell(); },
 SetFocusedCell: function(rowVisibleIndex, columnIndex) { this.grid.SetFocusedCell(rowVisibleIndex, columnIndex); },
 SetFocusedCellByKey: function(key, columnIndex) { this.grid.SetFocusedCellByKey(key, columnIndex); },
 GetSelectedCells: function() { return this.grid.GetSelectedCells(); },
 SelectCell: function(rowVisibleIndex, columnIndex) { this.SelectCellByKey(rowVisibleIndex, this.ConvertVisibleIndexToKey(columnIndex)); },
 SelectCellByKey: function(key, columnIndex) { this.grid.SetCellSelection(key, columnIndex, true); },
 UnselectCell: function(rowVisibleIndex, columnIndex) { this.UnselectCellByKey(rowVisibleIndex, this.ConvertVisibleIndexToKey(columnIndex)); },
 UnselectCellByKey: function(key, columnIndex) { this.grid.SetCellSelection(key, columnIndex, false); }
});
var ASPxClientGridViewGlobalEventsListener = ASPx.CreateClass(ASPxClientComponent, {
 OnGlobalEndCallback: function(args) {
  ASPxClientControl.prototype.OnGlobalEndCallback.call(this, args);
  var control = args.control;
  if(control instanceof ASPxClientGridView)
   return;
  var ownerGrid = control.findParentByType(ASPxClientGridView);
  if(ownerGrid && ownerGrid !== control)
   ownerGrid.OnChildControlEndCallback(control);
 }
});
var dummyGridViewGlobalEventsListener = new ASPxClientGridViewGlobalEventsListener("gvGlobalEventListener");
window.ASPxClientGridView = ASPxClientGridView;
window.ASPxClientGridViewColumn = ASPxClientGridViewColumn;
window.ASPxClientGridViewColumnCancelEventArgs = ASPxClientGridViewColumnCancelEventArgs;
window.ASPxClientGridViewColumnProcessingModeEventArgs = ASPxClientGridViewColumnProcessingModeEventArgs;
window.ASPxClientGridViewRowCancelEventArgs = ASPxClientGridViewRowCancelEventArgs;
window.ASPxClientGridViewSelectionEventArgs = ASPxClientGridViewSelectionEventArgs;
window.ASPxClientGridViewRowClickEventArgs = ASPxClientGridViewRowClickEventArgs;
window.ASPxClientGridViewContextMenuEventArgs = ASPxClientGridViewContextMenuEventArgs;
window.ASPxClientGridViewContextMenuItemClickEventArgs = ASPxClientGridViewContextMenuItemClickEventArgs;
window.ASPxClientGridViewCustomButtonEventArgs = ASPxClientGridViewCustomButtonEventArgs;
window.ASPxClientGridViewColumnMovingEventArgs = ASPxClientGridViewColumnMovingEventArgs;
window.ASPxClientGridViewBatchEditConfirmShowingEventArgs = ASPxClientGridViewBatchEditConfirmShowingEventArgs;
window.ASPxClientGridViewBatchEditStartEditingEventArgs = ASPxClientGridViewBatchEditStartEditingEventArgs;
window.ASPxClientGridViewBatchEditEndEditingEventArgs = ASPxClientGridViewBatchEditEndEditingEventArgs;
window.ASPxClientGridViewBatchEditRowChangesCancelingEventArgs = ASPxClientGridViewBatchEditRowChangesCancelingEventArgs;
window.ASPxClientGridViewBatchEditRowValidatingEventArgs = ASPxClientGridViewBatchEditRowValidatingEventArgs;
window.ASPxClientGridViewBatchEditTemplateCellFocusedEventArgs = ASPxClientGridViewBatchEditTemplateCellFocusedEventArgs;
window.ASPxClientGridViewBatchEditChangesSavingEventArgs = ASPxClientGridViewBatchEditChangesSavingEventArgs;
window.ASPxClientGridViewBatchEditChangesCancelingEventArgs = ASPxClientGridViewBatchEditChangesCancelingEventArgs;
window.ASPxClientGridViewBatchEditRowInsertingEventArgs = ASPxClientGridViewBatchEditRowInsertingEventArgs;
window.ASPxClientGridViewBatchEditRowDeletingEventArgs = ASPxClientGridViewBatchEditRowDeletingEventArgs;
window.ASPxClientGridViewBatchEditRowRecoveringEventArgs = ASPxClientGridViewBatchEditRowRecoveringEventArgs;
window.ASPxClientGridViewFocusedCellChangingEventArgs = ASPxClientGridViewFocusedCellChangingEventArgs;
window.ASPxClientGridViewCellSelectionChangingEventArgs = ASPxClientGridViewCellSelectionChangingEventArgs;
window.ASPxClientGridViewClipboardCellPastingEventArgs = ASPxClientGridViewClipboardCellPastingEventArgs;
ASPx.GridViewHeaderMatrix = GridViewHeaderMatrix;
ASPx.GridViewKbdHelper = GridViewKbdHelper;
ASPx.GridViewConsts = GridViewConsts;
ASPx.GridViewRowType = GridViewRowType;
ASPx.GridViewCallbackHelper = GridViewCallbackHelper;
ASPx.GridViewAdaptiveDetailButtonPosition = GridViewAdaptiveDetailButtonPosition;
ASPx.GetGridViewAdjuster = GetGridViewAdjuster;
ASPx.GridViewStyleHelper = GridViewStyleHelper;
window.ASPxClientGridViewBatchEditApi = ASPxClientGridViewBatchEditApi;
window.ASPxClientGridViewCellInfo = ASPxClientGridViewCellInfo;
window.ASPxClientGridViewExportFormat = ASPx.ASPxClientGridExportFormat;
})();

(function() {
var TableHelperBase = ASPx.CreateClass(null, {
 constructor: function(control, contentTableIDSuffix, headerTableIDSuffix, footerTableIDSuffix, horzScroll, vertScroll){
  this.control = control;
  this.horzScroll = horzScroll;
  this.vertScroll = vertScroll;
  this.contentTableIDSuffix = contentTableIDSuffix;
  this.headerTableIDSuffix = headerTableIDSuffix;
  this.footerTableIDSuffix = footerTableIDSuffix;
 },
 GetChildElement: function(idSuffix) {
  return this.control.GetChildElement(idSuffix);
 },
 GetTable: function(tableIDSuffix) {
  return this.GetChildElement(tableIDSuffix);
 },
 GetContentTable: function() {
  return this.GetTable(this.contentTableIDSuffix);
 },
 GetHeaderTable: function() {
  return this.GetTable(this.headerTableIDSuffix);
 },
 GetFooterTable: function() {
  return this.GetTable(this.footerTableIDSuffix);
 },
 HasHorzScroll: function() { return this.horzScroll != ASPx.ScrollBarMode.Hidden; }, 
 HasVertScroll: function() { return this.vertScroll != ASPx.ScrollBarMode.Hidden; },
 IsHorzAutoScroll: function() {
  return this.horzScroll == ASPx.ScrollBarMode.Auto;
 },
 IsVertAutoScroll: function() {
  return this.vertScroll == ASPx.ScrollBarMode.Auto;
 },
 IsRtl: function() { return false; },
 GetArmatureCells: function(table) { return [ ].slice.call(table.rows[0].cells); },
 GetArmatureCell: function(cell) {
  var index = this.GetArmatureCellIndexByOtherCell(cell);
  return this.GetArmatureCells(ASPx.GetParentByTagName(cell, "TABLE"))[index];
 },
 GetArmatureCellIndexByOtherCell: function(cell) {
  return cell.cellIndex;
 },
 GetCellRealWidth: function(cell) {
  var width = this.GetStylePxWidth(this.GetArmatureCell(cell));
  return width > -1 ? width : cell.offsetWidth;
 },
 GetStylePxWidth: function(element) {
  var width = element.style.width;
  if(width && width.indexOf("px") > -1) 
   return parseInt(width, 10);
  return -1;
 }
});
var TableHelperAdapter = ASPx.CreateClass(null, {
 constructor: function(tableHelper) {
  this.tableHelper = tableHelper;
  this.control = this.tableHelper.control;
 },
 GetContentTable: function() {
  return this.tableHelper.GetContentTable();
 },
 GetHeaderTable: function() {
  return this.tableHelper.GetHeaderTable();
 },
 GetFooterTable: function() {
  return this.tableHelper.GetFooterTable();
 },
 GetArmatureCells: function(table) {
  return this.tableHelper.GetArmatureCells(table);
 },
 GetArmatureCell: function(cell) {
  return this.tableHelper.GetArmatureCell(cell);
 },
 GetCellRealWidth: function(cell) {
  return this.tableHelper.GetCellRealWidth(cell);
 },
 GetStylePxWidth: function(element) {
  return this.tableHelper.GetStylePxWidth(element);
 },
 HasHorzScroll: function() {
  return this.tableHelper.HasHorzScroll();
 }, 
 HasVertScroll: function() {
  return this.tableHelper.HasVertScroll();
 },
 IsRtl: function() {
  return this.tableHelper.IsRtl();
 }
});
ASPx.TableHelperBase = TableHelperBase;
ASPx.TableHelperAdapter = TableHelperAdapter;
})();
(function() {
var GridViewTableHelper = ASPx.CreateClass(ASPx.TableHelperBase, {
 GridDetailIndentClassName : "dxgvDI",
 GridGroupIndentClassName : "dxgvGI",
 constructor: function(control, contentTableIDSuffix, headerTableIDSuffix, footerTableIDSuffix, horzScroll, vertScroll) {
  this.constructor.prototype.constructor.call(this, control, contentTableIDSuffix, headerTableIDSuffix, footerTableIDSuffix, horzScroll, vertScroll);
 },
 GetArmatureCellIndexByOtherCell: function(cell) {
  var grid = this.control;
  if(!grid.IsHeaderRow(cell.parentNode))
   ASPx.TableHelperBase.prototype.GetArmatureCellIndexByOtherCell.call(this, cell);
  var columnIndex = grid.getColumnIndex(cell.id);
  return this.GetArmatureCellIndex(columnIndex);
 },
 GetArmatureCellIndex: function(columnIndex) {
  var grid = this.control;
  return grid.indentColumnCount + grid.GetHeaderMatrix().GetLeafIndex(columnIndex);
 },
 UpdateIndentCellWidths: function() {
  var result = null;
  var grid = this.control;
  var layoutHelper = grid.GetLayoutHelper();
  var hasAnyIndentCell = grid.indentColumnCount > 0 || layoutHelper.GetAdaptiveButtonPos() === ASPx.GridViewAdaptiveDetailButtonPosition.Right;
  if(layoutHelper.IsFixedTableLayout() && hasAnyIndentCell)
   result = this.UpdateIndentCellWidthsCore();
  return result;
 },
 UpdateIndentCellWidthsCore: function() {
  var info = this.GetIndentsWidthInfo();
  var tables = [this.GetHeaderTable(), this.GetContentTable(), this.GetFooterTable()];
  for(var i = 0; i < tables.length; i++) {
   var table = tables[i];
   if(!table) continue;
   var armCells = this.GetArmatureCells(table);
   for(var j = 0; j < armCells.length; j++) {
    if(!info[j]) continue;
    var width = info[j];
    var cell = armCells[j];
    if(this.GetStylePxWidth(cell) != width)
     cell.style.width = width + "px";
   }
  }
 },
 GetIndentsWidthInfo: function() {
  var grid = this.control;
  var showAdaptiveDetailButton = grid.IsResponsiveAdaptivityMode() && !grid.HasAnyAdaptiveElement();
  if(showAdaptiveDetailButton)
   grid.GetAdaptivityHelper().SetAdaptivitySelectorVisible(true); 
  var result = this.GetIndentsWidthInfoCore();
  if(showAdaptiveDetailButton)
   grid.GetAdaptivityHelper().SetAdaptivitySelectorVisible(false);
  return result;
 },
 GetIndentsWidthInfoCore: function() {
  var grid = this.control;
  var table = this.GetHeaderTable() || this.GetContentTable() || this.GetFooterTable();
  var armCells = this.GetArmatureCells(table).filter(function(cell) { 
   return ASPx.ElementHasCssClass(cell, this.GridDetailIndentClassName) || ASPx.ElementHasCssClass(cell, this.GridGroupIndentClassName); 
  }.bind(this));
  var headerRow = grid.GetHeaderRow(0);
  var dataRow = this.FindFirstVisibleRow(false, false);
  var adaptiveDataRow = this.FindFirstVisibleRow(false, true);
  var groupRow = this.FindFirstVisibleRow(true);
  var result = { };
  var rows = [ headerRow, groupRow, dataRow, adaptiveDataRow ];
  for(var i = 0; i < armCells.length; i++){
   var cellIndex = armCells[i].cellIndex;
   var button = this.FindExpandCollapseButton(cellIndex, rows);
   result[cellIndex] = this.GetButtonWidth(button);
  }
  return result;
 },
 FindExpandCollapseButton: function(cellIndex, rows) {
  for(var i = 0; i < rows.length; i++) {
   var button = this.FindExpandCollapseButtonCore(rows[i], cellIndex);
   if(button) 
    return button;
  }
  return null;
 },
 FindExpandCollapseButtonCore: function(row, cellIndex) {
  if(row && cellIndex >= 0 && cellIndex < row.cells.length) {
   var cell = row.cells[cellIndex];
   if(cell.offsetWidth > 0)
    return this.FindExpandCollapseButtonInContainer(cell);
  }
  return null;
 },
 FindExpandCollapseButtonInContainer: function(container) {
  return ASPx.GetChildByTagName(container, "IMG");
 },
 FindFirstVisibleRow: function(isGroup, isAdaptive) { 
  var grid = this.control;
  var start = grid.GetTopVisibleIndex();
  var end = start + grid.GetVisibleRowsOnPage();
  for(var i = start; i < end; i++) {
   var row = isGroup ? grid.GetGroupRow(i) : (isAdaptive ? grid.GetAdaptiveDetailRow(i) : grid.GetDataRow(i));
   if(row) return row;
  }
 },
 GetButtonWidth: function(button) {
  if(!button) return -1;
  return button.offsetWidth + ASPx.GetLeftRightBordersAndPaddingsSummaryValue(button.parentNode);
 },
 IsRtl: function() { return this.control.rtl; }
});
ASPx.GridViewTableHelper = GridViewTableHelper;
})();
(function() {
ASPx.tableColumnResizing = null;
var TableResizingHelperBase = ASPx.CreateClass(ASPx.TableHelperAdapter, {
 PostponeResizingBarWrapperClassName: "dxgvPRB",
 PostponeVisibleResizingBarWrapperClassName: "dxgvPRBVisible",
 PostponeResizingBarLabelClassName: "dxgvPRBL",
 PostponeResizingOriginalBarClassName: "dxgvPRBO",
 PostponeResizingNewBarClassName: "dxgvPRBN",
 PostponeResizingBarAniimationDuration: 125,
 constructor: function(tableHelper) {
  this.constructor.prototype.constructor.call(this, tableHelper);
  this.maximumOffset = ASPx.Browser.TouchUI ? 10 : 3;
  this.defaultMinWidth = 16;
  this.prevX = 0;
  this.colInfo = { };
  this.nextColInfo = { };
  this.resizingInfo = null;
 },
 Initialize: function() {
  this.UpdateControlMinWidth();
 },
 OnAfterCallback: function() {
  this.UpdateControlMinWidth();
 },
 UpdateControlMinWidth: function() {
  this.controlMinWidth = undefined;
  if(this.IsControlColumnResizeMode() && !this.HasHorzScroll())
   this.controlMinWidth = this.CalcControlMinWidth();
 },
 IsResizing: function() { 
  return ASPx.tableColumnResizing == this;
 },
 CanStartResizing: function(e, headerCell) {
  this.prevX = ASPx.Evt.GetEventX(e);
  var left = ASPx.GetAbsoluteX(headerCell);
  var right = left + headerCell.offsetWidth - 1;
  var leftOffset = this.prevX - left;
  var rightOffset = right - this.prevX;
  var isLeftEdge = leftOffset < this.maximumOffset && leftOffset >= 0;
  var isRightEdge = rightOffset <= this.maximumOffset && rightOffset >= 0;
  if(!isLeftEdge && !isRightEdge)
   return false;
  return this.CanStartResizingCore(headerCell.id, isLeftEdge, isRightEdge);
 },
 CanStartResizingCore: function(cellId, isLeftEdge, isRightEdge) {
  var columnIndex = this.GetColumnIndexById(cellId);
  var rtl = this.IsRtl();
  if(isLeftEdge && !rtl || isRightEdge && rtl)
   return !this.IsLeftmostColumn(columnIndex);
  if(isRightEdge && !rtl || isLeftEdge && rtl) {
   if(!this.IsNextColumnResizable())
    return true;
   return !this.IsRightmostColumn(columnIndex);
  }
 },
 GetResizingColumnIndex: function(e, headerCell) {
  var isLeft = ASPx.Evt.GetEventX(e) < ASPx.GetAbsoluteX(headerCell) + headerCell.offsetWidth / 2;
  if(this.IsRtl())
   isLeft = !isLeft;
  var columnIndex = this.GetColumnIndexById(headerCell.id);
  return this.GetResizingColumnIndexCore(columnIndex, isLeft);
 },
 GetResizingColumnIndexCore: function(columnIndex, isLeft) {
  if(isLeft)
   return this.GetColumnNeighbor(columnIndex, true);
  return columnIndex;
 },
 StartResizing: function(columnIndex) {
  if(this.IsControlModeWithHorizontalScrolling())
   this.EnsureCellsHavePixelWidths();
  this.colInfo = this.GetColumnInfo(columnIndex);
  if(this.IsNextColumnResizable())
   this.nextColInfo = this.GetColumnInfo(this.GetColumnNeighbor(columnIndex, false));
  ASPx.tableColumnResizing = this;
  ASPx.Selection.SetElementSelectionEnabled(document.body, false);
  if(this.IsPostponeMode())
   this.StartPosponeResizing();
 },
 EndResizing: function(e) {
  this.ResetHorizontalScrollCorrection();
  if(this.IsPostponeMode())
   this.EndPostponeResizing();
  if(!this.colInfo.headerCell)
   return;
  this.SaveControlDimensions();
  this.AdjustInnerControls();
  this.control.AssignEllipsisTooltips();
  this.OnResized(this.colInfo.index);
 },
 CancelResizing: function() {
  this.ResetHorizontalScrollCorrection();
  ASPx.tableColumnResizing = null;
  ASPx.Selection.SetElementSelectionEnabled(document.body, true);
  this.prevX = 0;
  this.colInfo = { };
  this.nextColInfo = { };
  this.calculatedMinWidth = 0;
  this.UpdateScrollControlsSize();
 },
 AdjustInnerControls: function() {
  ASPx.GetControlCollection().AdjustControls(this.control.GetMainElement());
 },
 UpdateScrollControlsSize: function() {
  var scrollHelper = this.GetScrollHelper();
  if(scrollHelper)
   scrollHelper.Update();
 },
 OnMouseMove: function(e) {
  if(ASPx.TouchUIHelper.isTouchEvent(e) && !ASPx.TouchUIHelper.isGesture)
   ASPx.Evt.PreventEvent(e);
  if(this.colInfo.headerCell.cellIndex < 0) { 
   this.CancelResizing(e);
   return;
  }
  ASPx.Selection.Clear();
  this.Resize(e);
 },
 OnMouseUp: function(e) {
  this.EndResizing();
  this.CancelResizing();
 },
 Resize: function(e) {
  var resizingInfo = this.CalculateResizingInfo(e) || this.resizingInfo;
  if(!resizingInfo)
   return;
  if(this.IsPostponeMode())
   this.ResizePostpone(resizingInfo);
  else
   this.ResizeLive(resizingInfo);
 },
 StartPosponeResizing: function() {
  this.UpdateResizingBar(true);
  this.SetResizingBarVisible(true);
 },
 ResizePostpone: function(resizingInfo) {
  this.resizingInfo = resizingInfo;
  this.UpdateResizingBar(false);
 },
 ResizeLive: function(resizingInfo) {
  if(!resizingInfo) return;
  if(this.RequireHorizontalScrollCorrection() && this.IsRtl() && !this.initialScrollRight)
   this.initialScrollRight = this.GetScrollableDivScrollRight();
  this.ApplyColumnWidths(resizingInfo);
  if(this.RequireHorizontalScrollCorrection())
   this.CorrectHorizontalScroll(resizingInfo.delta);
 },
 EndPostponeResizing: function() {
  this.SetResizingBarVisible(false);
  this.ApplyColumnWidths(this.resizingInfo);
  this.resizingInfo = null;
 },
 SetResizingBarVisible: function(visible) {
  var wrapper = this.GetResizingBarWrapper();
  if(visible) {
   ASPx.SetElementDisplay(wrapper, visible);
   setTimeout(function() {
    ASPx.AddClassNameToElement(wrapper, this.PostponeVisibleResizingBarWrapperClassName);
   }.bind(this), 0);
  }
  else {
   ASPx.RemoveClassNameFromElement(wrapper, this.PostponeVisibleResizingBarWrapperClassName);
   setTimeout(function() {
    ASPx.SetElementDisplay(wrapper, visible);
   }, this.PostponeResizingBarAniimationDuration);
  }
 },
 UpdateResizingBar: function(updateOriginalBar) {
  var dimensions = this.CalcResizingBarDimensions(this.colInfo.headerCell);
  var wrapper = this.GetResizingBarWrapper();
  ASPx.SetAbsoluteY(wrapper, dimensions.top);
  ASPx.SetAbsoluteX(wrapper, dimensions.left);
  ASPx.SetOffsetWidth(wrapper, dimensions.width);
  ASPx.SetOffsetHeight(wrapper, dimensions.height);
  if(updateOriginalBar)
   ASPx.SetStyles(this.GetResizingOriginalBar(), { width: dimensions.width });
  this.UpdateResizingBarLabel(dimensions.columnWidth, dimensions.width);
 },
 UpdateResizingBarLabel: function(colWidth, barWidth) {
  var label = this.GetResizingBarLabel();
  label.innerHTML = "w: " + colWidth + "px";
 },
 CalcResizingBarDimensions: function(cell) {
  var borderCorrection = this.GetHeaderCellBorderCorrection(cell);
  var cellWidth = this.GetCellRealWidth(cell) + borderCorrection.width;
  var delta = this.resizingInfo ? this.resizingInfo.delta : 0;
  var columnWidth = cellWidth + delta;
  var top = ASPx.GetAbsoluteY(cell) - borderCorrection.top;
  var left = ASPx.GetAbsoluteX(cell) + borderCorrection.left;
  var width = this.CalcResizingBarWidth(columnWidth);
  var height = this.CalculatePostponeResizingBarHeight() + borderCorrection.top*2;
  var scrollCorrections = this.CorrectResizingBarScrollOverflow(left, cellWidth);
  if(this.IsRtl())
   left -= delta;
  return { 
   top: top, 
   left:   left + scrollCorrections.left, 
   width:  width + scrollCorrections.width, 
   height: height, 
   columnWidth: columnWidth 
  };
 },
 CorrectResizingBarScrollOverflow: function(cellLeft, cellWidth) {
  var result = { left: 0, width: 0 };
  var scrollHelper = this.GetScrollHelper();
  if(!scrollHelper || !scrollHelper.HasHorzScroll())
   return result;
  var scrollDiv = scrollHelper.GetScrollDiv(this.GetContentTable());
  var scrollDivLeft = ASPx.GetAbsoluteX(scrollDiv);
  if(!this.IsRtl()) {
   var diff = scrollDivLeft - cellLeft;
   if(diff > 0) {
    result.left = diff;
    result.width = -diff;
   }
  } else {
   var scrollDivRight = scrollDivLeft + scrollDiv.offsetWidth;
   var cellRight = cellLeft + cellWidth;
   var diff = cellRight - scrollDivRight;
   if(diff > 0)
    result.width = -diff;
  }
  return result;
 },
 CalcResizingBarWidth: function(columnWidth) { return columnWidth; }, 
 CalculatePostponeResizingBarHeight: function() {
  var result = 0;
  var scrollHelper = this.GetScrollHelper();
  var tables = [ this.GetHeaderTable(), this.GetContentTable() ];
  for(var i = 0; i < tables.length; i++) {
   var table = tables[i];
   if(table) {
    var height = table.offsetHeight;
    if(this.HasVertScroll())
     height = scrollHelper.GetScrollDiv(table).offsetHeight;
    result += height;
   }
  }
  if(this.HasHorzScroll() && this.HasVertScroll()) {
   var scrollDiv = scrollHelper.GetScrollDiv(this.GetContentTable());
   result -= scrollDiv.offsetHeight - scrollDiv.clientHeight;
  }
  if(!this.HasVertScroll())
   result -= this.GetFooterHeight();
  return result;
 },
 GetHeaderCellBorderCorrection: function(cell) {
  var result = { left: 0, width: 0, top: 0 };
  this.barBorderWidth = this.barBorderWidth || ASPx.PxToInt(ASPx.GetCurrentStyle(this.GetResizingOriginalBar()).borderTopWidth);
  var cellStyle = ASPx.GetCurrentStyle(cell);
  var borderLeftWidth = ASPx.PxToInt(cellStyle.borderLeftWidth);
  var borderRightWidth = ASPx.PxToInt(cellStyle.borderRightWidth);
  var borderTopWidth = ASPx.PxToInt(cellStyle.borderTopWidth);
  result.top = borderTopWidth ? this.barBorderWidth - borderTopWidth : this.barBorderWidth;
  if(borderRightWidth) {
   result.left = -borderRightWidth;
   result.width = borderRightWidth;
  } else if(borderLeftWidth)
   result.width = borderLeftWidth;
  return result;
 },
 ApplyColumnWidths: function(resizingInfo) {
  if(!resizingInfo) return;
  this.prevX = resizingInfo.newX;
  var table = this.control.GetMainElement();
  var tableWidth = table.offsetWidth;
  this.ApplyColumnWidth(this.colInfo.index, resizingInfo.newWidth + "px");
  this.colInfo.armCell.widthRestrictionsAssigned = false;
  if(this.IsNextColumnResizable()) {
   this.ApplyColumnWidth(this.nextColInfo.index, resizingInfo.nextColNewWidth + "px");
   this.nextColInfo.armCell.widthRestrictionsAssigned = false;
  } else if(!this.HasHorzScroll()) {
   ASPx.DropElementOriginalWidth(table);
   table.style.width = (tableWidth + resizingInfo.delta) + "px";
   if(this.HasVertScroll())
    this.GetScrollHelper().Update();
  }
 },
 IsHorzAutoScroll: function() { return this.tableHelper.IsHorzAutoScroll(); },
 GetScrollableDivScrollLeft: function() { return this.GetScrollableDiv().scrollLeft; },
 GetScrollableDivScrollRight: function() { return this.GetElementScrollRight(this.GetScrollableDiv()); },
 SetScrollableDivScrollRight: function(scrollRight) { this.SetElementScrollRight(this.GetScrollableDiv(), scrollRight); },
 GetScrollableDiv: function() {
  var scrollHelper = this.GetScrollHelper();
  if(!scrollHelper) return null;
  return scrollHelper.GetScrollDiv(scrollHelper.GetContentTable());
 },
 GetElementScrollRight: function(element) { return element.scrollWidth - element.clientWidth - element.scrollLeft; },
 SetElementScrollRight: function(element, value) { 
  element.scrollLeft = element.scrollWidth - element.clientWidth - value; 
 },
 RequireHorizontalScrollCorrection: function() {
  return this.IsControlModeWithHorizontalScrolling() && !this.IsPostponeMode();
 },
 IsControlModeWithHorizontalScrolling: function() {
  return this.HasHorzScroll() && this.IsControlColumnResizeMode();
 },
 IsControlColumnResizeMode: function() { return this.control.columnResizeMode === ASPx.ColumnResizeMode.Control; },
 CorrectHorizontalScroll: function(delta) {
  var scrollPosition = this.IsRtl() ? this.GetScrollableDivScrollLeft() : this.GetScrollableDivScrollRight();
  if(scrollPosition === 0 && delta < 0) {
   var extraCell = this.GetScrollHelper().GetArmatureExtraCell(this.GetScrollHelper().GetContentTable());
   this.SetExtraCellsWidth(extraCell.offsetWidth + Math.abs(delta));
  } else if(this.IsRtl())
   this.SetScrollableDivScrollRight(this.initialScrollRight);
 },
 EnsureCellsHavePixelWidths: function() {
  var tables = this.GetAllTables();
  for(var i = 0; i < tables.length; i++) {
   var armCells = this.GetScrollHelper().GetArmatureCells(tables[i]); 
   for(var j = 0; j < armCells.length; j++) {
    var cell = armCells[j];
    if(ASPx.IsPercentageSize(cell.style.width))
     ASPx.SetStyles(cell, { width: cell.offsetWidth });
   }
  }
 },
 SetExtraCellsWidth: function(width) {
  var tables = this.GetAllTables();
  var extraCells = tables.map(function(table) { return this.GetScrollHelper().GetArmatureExtraCell(table); }.bind(this));
  for(var i = 0; i < extraCells.length; i++)
   ASPx.SetStyles(extraCells[i], { width : width }); 
 },
 ResetHorizontalScrollCorrection: function() {
  if(this.RequireHorizontalScrollCorrection()) {
   this.SetExtraCellsWidth("auto");
   this.initialScrollRight = null;
  }
 },
 CalculateResizingInfo: function(e) {
  var newX = Math.round(ASPx.Evt.GetEventX(e));
  var delta = newX - this.prevX;
  if(this.IsRtl())
   delta = -delta;
  var newWidth = this.GetCellRealWidth(this.colInfo.headerCell) + delta;
  var minWidth = this.CalculateColumnMinWidth(this.colInfo, newWidth);
  var maxWidth = this.colInfo.maxWidth;
  var nextColNewWidth = 0;
  var nextColMinWidth = 0;
  var nextColMaxWidth = Number.MAX_VALUE;
  if(this.IsNextColumnResizable()) {
   nextColNewWidth = this.GetCellRealWidth(this.nextColInfo.headerCell) - delta;
   nextColMinWidth = this.nextColInfo.minWidth > 0 ? this.nextColInfo.minWidth : this.defaultMinWidth;
   nextColMaxWidth = this.nextColInfo.maxWidth;
  }
  if(newWidth < minWidth || nextColNewWidth < nextColMinWidth || (maxWidth > 0 && newWidth > maxWidth) || (nextColMaxWidth > 0 && nextColNewWidth > nextColMaxWidth))
   return null;
  return {
   delta: delta,
   newX: newX,
   newWidth: newWidth,
   minWidth: minWidth,
   nextColNewWidth: nextColNewWidth,
   nextColMinWidth: nextColMinWidth
  };
 },
 CalculateColumnMinWidth: function(colInfo, newWidth) {
  var columnMinWidth = colInfo.minWidth > 0 ? colInfo.minWidth : this.defaultMinWidth;
  if(!this.controlMinWidth)
   return columnMinWidth;
  if(!this.calculatedMinWidth) {
   var controlWidth = this.control.GetMainElement().offsetWidth;
   this.calculatedMinWidth = Math.max(columnMinWidth, newWidth - controlWidth + this.controlMinWidth);
  }
  return this.calculatedMinWidth;
 },
 CalcControlMinWidth: function() {
  var mainElement = this.control.GetMainElement();
  var contentElements = this.GetAllTables();
  var scrollHelper = this.GetScrollHelper();
  if(scrollHelper)
   contentElements = contentElements.map(function(table) { return scrollHelper.GetScrollDiv(table); });
  var scrollableTreeLine = this.GetScrollableTreeLine(mainElement);
  var controlStyleWidth = mainElement.style.width;
  ASPx.SetStyles(mainElement, { width: 1 });
  contentElements.forEach(function(el) { ASPx.SetElementDisplay(el, false); });
  var controlMinWidth = mainElement.offsetWidth;
  contentElements.forEach(function(el) { ASPx.SetElementDisplay(el, true); });
  mainElement.style.width = controlStyleWidth;
  for(var i = 0; i < scrollableTreeLine.length; i++) {
   var node = scrollableTreeLine[i];
   if(node.isDocumentElement)
    ASPx.SetDocumentScrollTop(node.scrollTop);
   else
    node.element.scrollTop = node.scrollTop;
  }
  return controlMinWidth;
 },
 GetScrollableTreeLine: function(rootElement) {
  var treeLine = ASPx.GetElementTreeLine(rootElement, "BODY").map(function(el) { return { element: el, scrollTop: el.scrollTop }; });
  treeLine.push({ element: null, scrollTop: ASPx.GetDocumentScrollTop(), isDocumentElement: true });
  return treeLine.filter(function(node) { return node.scrollTop > 0; });
 },
 ApplyColumnWidth: function(columnIndex, width) {
  var cellIndex = this.GetArmatureCellIndex(columnIndex);
  this.ApplyCellWidth(this.GetHeaderTable(), cellIndex, width);
  this.ApplyCellWidth(this.GetContentTable(), cellIndex, width);
  if(this.NeedResizeFooterTable())
   this.ApplyCellWidth(this.GetFooterTable(), cellIndex, width);
 },
 ApplyCellWidth: function(table, cellIndex, width) {
  if(!table)
   return;
  this.GetArmatureCells(table)[cellIndex].style.width = width;
 },
 GetResizingBarWrapper: function() {
  return ASPx.CacheHelper.GetCachedElement(this, "postponeResizingBar", this.CreatePostponeResizingBar);
 },
 GetResizingOriginalBar:  function() { return ASPx.GetChildByClassName(this.GetResizingBarWrapper(), this.PostponeResizingOriginalBarClassName, 0); },
 GetResizingBarLabel: function() { return ASPx.GetChildByClassName(this.GetResizingBarWrapper(), this.PostponeResizingBarLabelClassName, 0); },
 CreatePostponeResizingBar: function() {
  var bar = ASPx.CreateHtmlElement("div", { display: "none" });
  ASPx.AddClassNameToElement(bar, this.PostponeResizingBarWrapperClassName);
  ASPx.AddClassNameToElement(bar, this.GetResizingBarThemedClassName());
  var originalBar = ASPx.CreateHtmlElement("div");
  ASPx.AddClassNameToElement(originalBar, this.PostponeResizingOriginalBarClassName);
  if(this.IsRtl())
   ASPx.AddClassNameToElement(originalBar, "rtl");
  var newBar = ASPx.CreateHtmlElement("div");
  ASPx.AddClassNameToElement(newBar, this.PostponeResizingNewBarClassName);
  var label = ASPx.CreateHtmlElement("div");
  ASPx.AddClassNameToElement(label, this.PostponeResizingBarLabelClassName);
  bar.appendChild(originalBar);
  bar.appendChild(newBar);
  bar.appendChild(label);
  ASPx.InsertElementAfter(bar, this.control.GetMainElement());
  return bar;
 },
 GetResizingBarThemedClassName: function() {
  var controlClassName = this.GetControlClassName();
  var controlClassNames = ASPx.GetClassNameList(this.control.GetMainElement());
  var themedClassName = controlClassNames.filter(function(className) { return className.indexOf(controlClassName > -1); }.aspxBind(this))[0];
  var theme = themedClassName.substr(controlClassName.length);
  return theme ? this.PostponeResizingBarWrapperClassName + theme : "";
 },
 GetFooterHeight: function() { return 0; },
 GetAllTables: function() { return [ this.GetHeaderTable(), this.GetContentTable(), this.GetFooterTable() ].filter(function(table) { return !!table; }); },
 GetControlClassName: function() { },
 IsNextColumnResizable: function() { },
 IsPostponeMode: function() { },
 GetColumnIndices: function() { },
 GetColumnIndexById: function(id) { },
 GetColumnMinWidth: function(columnIndex) { },
 GetColumnMaxWidth: function(columnIndex) { },
 GetHeaderCell: function(columnIndex) { },
 GetArmatureCellIndex: function(columnIndex) { },
 GetScrollHelper: function() { },
 OnResized: function(columnIndex) { },
 NeedResizeFooterTable: function() { },
 GetControlDimensions: function() { },
 SetControlDimensions: function(dimensions) { },
 GetColumnNeighbor: function(columnIndex, isLeft) {
  var indices = this.GetColumnIndices();
  var index = -1;
  for(var i = 0; i < indices.length; i++) {
   if(indices[i] === columnIndex) {
    index = isLeft ? i - 1 : i + 1;
    break;
   }
  }
  if(index < 0 || index >= indices.length)
   return -1;
  return indices[index];
 },
 IsLeftmostColumn: function(columnIndex) {
  return this.GetColumnIndices()[0] === columnIndex;
 },
 IsRightmostColumn: function(columnIndex) {
  var indices = this.GetColumnIndices();
  return indices[indices.length - 1] === columnIndex;
 },
 SaveControlDimensions: function(onlyControlWidth) {
  if(onlyControlWidth && this.GetControlDimensions())
   return;
  var state = { };
  var controlWidthPx = ASPx.GetElementOriginalWidth(this.control.GetMainElement());
  var controlWidth = ASPx.PxToInt(controlWidthPx);
  if(controlWidth > 0 && this.AllowStoreControlWidth())
   state["ctrlWidth"] = controlWidth;
  if(!onlyControlWidth)
   ASPx.Data.MergeHashTables(state, this.GetColumnWidths());
  this.SetControlDimensions(ASPx.Json.ToJson(state));
 },
 AllowStoreControlWidth: function() {
  return !this.control.widthValueSetInPercentage;
 },
 GetColumnWidths: function(){
  var state = { };
  var indices = this.GetColumnIndices();
  for(var i = 0; i < indices.length; i++) {
   var index = indices[i];
   state[index] = this.GetCellRealWidth(this.GetHeaderCell(index));
  }
  return state;
 },
 UpdateCursor: function(e, headerCell) {
  if(this.IsResizing() || this.CanStartResizing(e, headerCell))
   ASPx.Attr.ChangeStyleAttribute(headerCell, "cursor", "w-resize");
  else
   ASPx.Attr.RestoreStyleAttribute(headerCell, "cursor");
 },
 GetColumnInfoList: function() {
  var list = [ ];
  var indices = this.GetColumnIndices();
  for(var i = 0; i < indices.length; i++)
   list.push(this.GetColumnInfo(indices[i]));
  list.sort(function(i1, i2) { 
   var w1 = i1.minWidth;
   var w2 = i2.minWidth;
   if(w1 > w2)
    return 1;
   else if(w1 < w2)
    return -1;
   else
    return 0;
  });
  return list;
 },
 GetColumnInfo: function(columnIndex) {
  var headerCell = this.GetHeaderCell(columnIndex);
  if(!headerCell) return { };
  var armCell = this.GetArmatureCell(headerCell);
  return {
   index: columnIndex,
   headerCell: headerCell,
   armCell: armCell,
   minWidth: this.GetColumnMinWidth(columnIndex),
   maxWidth: this.GetColumnMaxWidth(columnIndex),
   pxWidth: this.GetStylePxWidth(armCell),
   widthRestrictionsAssigned: armCell.widthRestrictionsAssigned
  };
 },
 ValidateColumnWidths: function() {
  var columnInfoList = this.GetColumnInfoList();
  var validationRequired = false;
  for(var i = 0; i < columnInfoList.length; i++) {
   if(columnInfoList[i].minWidth > 0 || columnInfoList[i].maxWidth > 0) {
    validationRequired = true;
    break;
   }
  }
  if(!validationRequired)
   return;
  var totalColumnWidth = 0;
  var allColumnsHasWidth = true;
  for(var i = 0; i < columnInfoList.length && allColumnsHasWidth; i++) {
   var info = columnInfoList[i];
   allColumnsHasWidth &= info.pxWidth > 0;
   totalColumnWidth += info.pxWidth;
  }
  var mainElement = this.control.GetMainElement();
  var tablePxWidth = this.GetStylePxWidth(mainElement);
  if(allColumnsHasWidth && tablePxWidth > -1 && tablePxWidth <= totalColumnWidth)
   return;
  var processedList = [ ];
  for(var i = 0; i < columnInfoList.length; i++) {
   var info = columnInfoList[i];
   if((info.minWidth > 0 || info.maxWidth > 0) && (info.pxWidth <= 0 || info.widthRestrictionsAssigned))
    processedList.push(info);
  }
  var savedTableOffsetWidth = ASPx.GetElementOffsetWidth(mainElement);
  this.ValidateColumnWidthsCore(processedList);
  this.AdjustColumnsPercentageWidth();
  var needAdjustInnerControls = savedTableOffsetWidth !== ASPx.GetElementOffsetWidth(mainElement);
  if(this.HasVertScroll())
   this.GetScrollHelper().Update();
  else if(needAdjustInnerControls) 
   this.AdjustInnerControls();
 },
 ValidateColumnWidthsCore: function(columnInfoList) {
  for(var i = 0; i < columnInfoList.length; i++) {
   var info = columnInfoList[i];
   if(info.widthRestrictionsAssigned)
    info.widthRestrictionsAssigned = !this.TryRestoreColumnWidth(info);
   else
    info.widthRestrictionsAssigned = this.TryCorrectColumnWidth(info);
  }
  for(var i = 0; i < columnInfoList.length; i++) {
   var info = columnInfoList[i];
   if(!info.widthRestrictionsAssigned)
    this.TryCorrectColumnWidth(info);
  }
 },
 AdjustColumnsPercentageWidth: function() {
  var columnInfoList = this.GetColumnInfoList();
  var percentageColumnInfos = columnInfoList.filter(function(info) { return ASPx.IsPercentageSize(info.armCell.style.width); });
  if(percentageColumnInfos.length > 0) {
   var currentPercentageWidthSummary = 0;
   for(var i = 0; i < percentageColumnInfos.length; i++)
    currentPercentageWidthSummary += ASPx.PercentageToFloat(percentageColumnInfos[i].armCell.style.width);
   var accumulativePercentageSummary = 0;
   for(var i = 0; i < percentageColumnInfos.length; i++) {
    var width = 0;
    if(i == percentageColumnInfos.length - 1)
     width = 1 - accumulativePercentageSummary;
    else {
     width = ASPx.PercentageToFloat(percentageColumnInfos[i].armCell.style.width) / currentPercentageWidthSummary;
     accumulativePercentageSummary += width;
    }
    this.ApplyColumnWidth(percentageColumnInfos[i].index,width * 100 + "%");
   }
  }
 },
 TryRestoreColumnWidth: function(columnInfo) {
  var armCell = columnInfo.armCell;
  armCell.style.width = armCell.savedWidth;
  if(armCell.offsetWidth <= columnInfo.minWidth) {
   armCell.style.width = columnInfo.minWidth + "px";
   return false;
  }
  this.ApplyColumnWidth(columnInfo.index, armCell.savedWidth);
  armCell.widthRestrictionsAssigned = false;
  armCell.savedWidth = null;
  return true;
 },
 TryCorrectColumnWidth: function(columnInfo) {
  var armCell = columnInfo.armCell;
  var armCellWidth = armCell.offsetWidth;
  var maxWidth = columnInfo.maxWidth > 0 ? columnInfo.maxWidth : Number.MAX_VALUE;
  if(armCellWidth >= columnInfo.minWidth && armCellWidth <= maxWidth)
   return false;
  armCell.savedWidth = armCell.style.width;
  armCell.widthRestrictionsAssigned = true;
  var widthToApply = armCellWidth < columnInfo.minWidth ? columnInfo.minWidth : maxWidth;
  this.ApplyColumnWidth(columnInfo.index, widthToApply + "px");
  return true;
 },
 ResetStretchedColumnWidth: function() {
  if(this.HasHorzScroll())
   return;
  var columnIndex = this.FindStretchedColumn();
  if(columnIndex > -1)
   this.ApplyColumnWidth(columnIndex, "");
 },
 FindStretchedColumn: function() {
  var columnInfoList = this.GetColumnInfoList();
  if(columnInfoList.length == 0)
   return -1;
  for(var i = 0; i < columnInfoList.length; i++) {
   if(columnInfoList[i].pxWidth < 0)
    return -1;
  }
  var indices = this.GetColumnIndices();
  return indices[indices.length - 1];
 },
 GenerateRandomClassName: function() {
  return "dx" + Math.floor((Math.random() + 1) * 100000).toString(36);
 }
});
ASPx.Evt.AttachEventToDocument(ASPx.TouchUIHelper.touchMouseMoveEventName, function(e) {
 if(ASPx.tableColumnResizing != null && !(ASPx.Browser.WebKitTouchUI && ASPx.TouchUIHelper.isGesture)) {
  ASPx.tableColumnResizing.OnMouseMove(e);
  return true;
 }
});
ASPx.Evt.AttachEventToDocument(ASPx.TouchUIHelper.touchMouseUpEventName, function(e) {
 if(ASPx.tableColumnResizing != null) {
  ASPx.tableColumnResizing.OnMouseUp(e);
  return true;
 }
});
ASPx.TableResizingHelperBase = TableResizingHelperBase;
})();

(function() {
var GridViewTableResizingHelper = ASPx.CreateClass(ASPx.TableResizingHelperBase, {
 constructor: function(tableHelper) {
  this.constructor.prototype.constructor.call(this, tableHelper);
 },
 IsNextColumnResizable: function() { 
  return this.control.columnResizeMode == ASPx.ColumnResizeMode.NextColumn;
 },
 IsPostponeMode: function() {
  return this.control.enablePostponeResizing;
 },
 GetFooterHeight: function() {
  var footer = this.control.GetFooterRow();
  if(footer)
   return footer.offsetHeight;
  return ASPx.TableResizingHelperBase.prototype.GetFooterHeight.call(this);
 },
 GetControlClassName: function() { return ASPx.GridViewConsts.ControlClassName; },
 IsRightmostColumn: function(columnIndex) {
  return !ASPx.IsExists(this.GetHeaderMatrix().GetRightNeighbor(columnIndex, true));
 },
 GetScrollHelper: function() { 
  return this.control.GetScrollHelper(); 
 },
 GetHeaderCell: function(columnIndex) { 
  return this.control.GetHeader(columnIndex); 
 },
 GetColumnHelper: function(){
  return this.control.GetColumnHelper();
 },
 GetHeaderMatrix: function(){
  return this.control.GetHeaderMatrix();
 },
 GetColumnIndices: function() { 
  return this.GetHeaderMatrix().GetLeafIndices(); 
 },
 GetColumnIndexById: function(id) { 
  return this.control.getColumnIndex(id); 
 },
 GetColumnMinWidth: function(columnIndex) {
  return this.control.GetColumn(columnIndex).minWidth;
 },
 GetColumnMaxWidth: function(columnIndex) {
  return this.control.GetColumn(columnIndex).maxWidth;
 },
 GetArmatureCellIndex: function(columnIndex) {
  return this.tableHelper.GetArmatureCellIndex(columnIndex);
 },
 GetColumnNeighbor: function(columnIndex, isLeft) {
  var matrix = this.GetHeaderMatrix();
  return matrix.GetLeaf(columnIndex, isLeft, true);
 },
 GetResizingColumnIndexCore: function(columnIndex, isLeft) {
  var matrix = this.GetHeaderMatrix();
  return matrix.GetLeaf(columnIndex, isLeft, isLeft);
 },
 NeedResizeFooterTable: function() {
  return !this.control.hasFooterRowTemplate;
 },
 OnResized: function(columnIndex) {
  var fixedGroupsHelper = this.control.GetFixedGroupsHelper();
  if(fixedGroupsHelper)
   fixedGroupsHelper.UpdateIntervalHeights();
  var fixedColumnHelper = this.control.GetFixedColumnsHelper();
  if(fixedColumnHelper)
   fixedColumnHelper.UpdateRowHeights(true);
  this.control.RaiseColumnResized(this.control.GetColumn(columnIndex));
 },
 GetControlDimensions: function() {
  return this.control.stateObject.resizingState;
 },
 SetControlDimensions: function(dimensions) {
  this.control.stateObject.resizingState = dimensions;
 },
 IsAdaptiveCollapsed: function() {
  var adaptivityHelper = this.control.GetAdaptivityHelper();
  if(adaptivityHelper)
   return !adaptivityHelper.IsResponsiveMode() && adaptivityHelper.HasAnyAdaptiveElement();
  return false;
 },
 CanStartResizing: function(e, headerCell) {
  if(this.IsAdaptiveCollapsed())
   return false;
  var dragHelper = this.control.GetDragHelper();
  return ASPx.TableResizingHelperBase.prototype.CanStartResizing.call(this, e, headerCell) && dragHelper.IsDataHeaderTarget(headerCell);
 },
 CanStartResizingCore: function(cellId, isLeftEdge, isRightEdge) {
  if(this.IsAdaptiveCollapsed())
   return false;
  var fixedColumnHelper = this.control.GetFixedColumnsHelper();
  if(fixedColumnHelper) {
   var columnIndex = this.GetColumnIndexById(cellId);
   var leftNeighborColumnIndex = this.GetColumnNeighbor(columnIndex, true);
   var leftNeighborCellIndex = this.GetColumnIndices().indexOf(leftNeighborColumnIndex);
   if(isLeftEdge && leftNeighborCellIndex < fixedColumnHelper.hiddenColumnCount + fixedColumnHelper.FixedColumnCount)
    return false;
  }
  return ASPx.TableResizingHelperBase.prototype.CanStartResizingCore.call(this, cellId, isLeftEdge, isRightEdge);
 },
 ResetStretchedColumnWidth: function() {
  if(this.IsAdaptiveCollapsed())
   return;
  ASPx.TableResizingHelperBase.prototype.ResetStretchedColumnWidth.call(this);
 },
 ValidateColumnWidths: function() {
  if(this.IsAdaptiveCollapsed())
   return;
  ASPx.TableResizingHelperBase.prototype.ValidateColumnWidths.call(this);
 },
 GetColumnWidths: function(){
  var leafWidths = ASPx.TableResizingHelperBase.prototype.GetColumnWidths.call(this);
  return this.GetColumnWidthsByLeafWidths(leafWidths);
 },
 GetColumnWidthsByLeafWidths: function(leafWidths){
  var columnWidths = ASPx.Data.MergeHashTables({ }, leafWidths);
  var layout = this.GetColumnHelper().GetHeaderLayout();
  for(var level = layout.length - 2; level >= 0; level--){
   var rowLayout = layout[level];
   for(var i = 0; i < rowLayout.length; i++){
    var node = rowLayout[i];
    if(columnWidths.hasOwnProperty(node.columnIndex)) continue;
    var columnWidth = 0;
    for(var j = 0; j < node.children.length; j++)
     columnWidth += columnWidths[node.children[j].columnIndex] || 0;
    columnWidths[node.columnIndex] = columnWidth;
   }
  }
  return columnWidths;
 },
 UpdateScrollControlsSize: function() {
  ASPx.TableResizingHelperBase.prototype.UpdateScrollControlsSize.call(this);
  var fixedColumnHelper = this.control.GetFixedColumnsHelper();
  if(fixedColumnHelper && this.IsHorzAutoScroll() && this.HasVertScroll() && this.IsControlColumnResizeMode())
   this.GetScrollHelper().Update();
 },
});
ASPx.GridViewTableResizingHelper = GridViewTableResizingHelper;
})();
(function() {
var CheckBoxValidStateMode = {
 Checked: "Checked",
 CheckedAndUnchecked: "CheckedAndUnchecked"
};
var CheckBoxRequiredValidationPattern = ASPx.CreateClass(ASPx.ValidationPattern, {
 constructor: function(checkBox, errorText) {
  this.constructor.prototype.constructor.call(this, errorText);
  this.checkBox = checkBox;
 },
 EvaluateIsValid: function(value) {
  var checkState = this.checkBox.GetCheckState();
  if(this.checkBox.validStateMode === CheckBoxValidStateMode.Checked)
   return checkState === ASPx.CheckBoxCheckState.Checked;
  else
   return checkState !== ASPx.CheckBoxCheckState.Indeterminate;
 },
});
var ASPxClientCheckBox = ASPx.CreateClass(ASPxClientEdit, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.isASPxClientCheckEdit = true;
  this.valueChecked = true;
  this.valueUnchecked = false;
  this.valueGrayed = null;
  this.allowGrayed = false;
  this.isNative = false;
  this.stateController = null;
  this.imageProperties = null;
  this.allowGrayedByClick = true;
  this.displaySwitch = false;
  this.internalCheckBox = null;
  this.icbFocusedStyle = [];
  this.checkedIsValidOnly = false;
  this.sizingConfig.allowSetWidth = false;
  this.sizingConfig.allowSetHeight = false;
  this.isRequiredCheckBox = false;
  this.requiredCheckBoxErrorText = "*";
  this.validStateMode = CheckBoxValidStateMode.Checked;
  this.CheckedChanged = new ASPxClientEvent();
 },
 InlineInitialize: function() {
  this.isNative = !this.imageProperties;
  this.allowGrayed = this.IsGrayedAllowed();
  this.stateController = ASPx.CheckableElementStateController.Create(this.imageProperties, this.valueChecked,  this.valueUnchecked, this.valueGrayed, this.allowGrayed);
  if(!this.isNative)
   this.CreateInternalCheckBox();
  if(this.isRequiredCheckBox)
   this.validationPatterns.push(new CheckBoxRequiredValidationPattern(this, this.requiredCheckBoxErrorText));
  ASPxClientEdit.prototype.InlineInitialize.call(this);
 },
 Initialize: function() {
  ASPxClientEdit.prototype.Initialize.call(this);
  if(!ASPx.IsExistsElement(this.GetMainElement()))
   return;
  if(!this.isNative) {
   this.previousValue = this.GetStateInput().value;
   if(this.GetValue() !== null)
    this.UpdateInternalCheckState(); 
   this.SetValue(this.GetValue());
  }
  else
   this.previousValue = this.GetInputElement().checked;
 },
 UpdateInternalCheckState: function() {
  var stateInput = this.GetStateInput();
  stateInput.value = this.stateController.GetInputKeyByValue(true);
  stateInput.value = this.stateController.GetInputKeyByValue(false);
  var checkState = this.stateController.GetCheckStateByInputKey(this.previousValue);
  this.SetCheckState(checkState);
 },
 GetInputElement: function() {
  if(this.isNative)
   return ASPxClientEdit.prototype.GetInputElement.call(this);
  else
   return this.GetStateInput();
 },
 CreateInternalCheckBox: function() {
  var instance = this;
  this.internalCheckBox = new ASPx.CheckBoxInternal(this.GetStateInput(), this.stateController, this.allowGrayed, this.allowGrayedByClick, 
   ASPx.CheckEditElementHelper.Instance, this.GetMainElement(), true, undefined, undefined, this.accessibilityCompliant, this.displaySwitch);
  this.internalCheckBox.CreateFocusDecoration(this.icbFocusedStyle);
  this.internalCheckBox.SetValue(this.GetValue(), true); 
  this.internalCheckBox.SetEnabled(this.GetEnabled());
  this.internalCheckBox.GetReadOnly = this.GetReadOnly.bind(this);
  this.internalCheckBox.CheckedChanged.AddHandler(function(s, e) { instance.OnClick(e); });
  this.internalCheckBox.Focus.AddHandler(function() { instance.OnFocus(); });
  this.internalCheckBox.LostFocus.AddHandler(function() { instance.OnLostFocus(); });
  if(ASPx.Browser.WebKitFamily) 
   ASPx.Evt.AttachEventToElement(this.internalCheckBox.mainElement.parentNode, "selectstart", ASPx.Evt.PreventEventAndBubble);
 },
 FindInputElement: function() {
  var element = this.GetMainElement();
  if(ASPx.IsExistsElement(element) && element.tagName != "INPUT")
   element = this.GetChildElement("I");
  return element;
 },
 GetFocusableInputElement: function() {
  if(this.isNative)
   return this.GetInputElement();
  return this.accessibilityCompliant ? this.GetICBMainElement() : this.GetInputElement();
 },
 IsGrayedAllowed: function() {
  for(var propertyKey in this.imageProperties)
   if(this.imageProperties[propertyKey].length === 3)
    return true;
  return false;
 },
 RaiseValueChangedEvent: function() {
  var processOnServer = ASPxClientEdit.prototype.RaiseValueChangedEvent.call(this);
  processOnServer = this.RaiseCheckedChanged(processOnServer);
  return processOnServer;
 }, 
 OnClick: function() {
  if(this.ToogleCheckState() && !this.focused)
   this.SetFocus();
 },  
 ToogleCheckState: function() {
  if(!this.GetEnabled() || this.GetReadOnly())
   return false;
  var value = this.GetCorrectValue(this.previousValue);
  value = this.stateController.GetNextCheckBoxValue(value, this.allowGrayedByClick && this.allowGrayed);    
  this.SetValue(value);
  this.OnValueChanged();
  return true;
 },
 IsElementBelongToInputElement: function(element) {
  return false; 
 },
 ForceRefocusEditor: function() {
  if(this.isNative)
   ASPxClientEdit.prototype.ForceRefocusEditor.call(this);
 },
 GetValue: function() {
  var value = this.stateController.GetValueByInputKey(this.GetStateInput().value);
  if(value === "" && this.convertEmptyStringToNull)
   value = null;     
  return value;
 },  
 SetValue: function(value) {
  this.previousValue = value;
  value = this.GetCorrectValue(value);
  if(this.isNative)
   this.GetInputElement().checked = (this.previousValue == this.valueChecked);
  else
   this.internalCheckBox.SetValue(value);
  this.GetStateInput().value = this.stateController.GetInputKeyByValue(value);
  if(this.accessibilityCompliant) {
   var state = this.GetCheckState();
   var mainElement = this.GetICBMainElement();
   this.stateController.SetAriaCheckedSelectedAttributes(mainElement, state);
  }
  this.OnValueSet();
 },
 GetICBMainElement: function() {
  return ASPx.CheckableElementHelper.Instance.GetICBMainElementByInput(this.GetStateInput());
 },
 GetLabelElement: function() {
  return ASPx.CheckEditElementHelper.Instance.GetLabelElement(this.GetMainElement());
 },
 GetStateInput: function() {
  return this.GetChildElement("S");
 },
 GetAccessibilityActiveElements: function() {
  return [this.GetFocusableInputElement()];
 },
 GetCorrectValue: function(value) {
  var stateIsExist = typeof(this.stateController.GetInputKeyByValue(value)) != "undefined";
  if(!stateIsExist)
   return this.allowGrayed ? this.valueGrayed : this.valueUnchecked; 
  return value;
 },
 OnValueSet: function() {},
 RaiseCheckedChanged: function(processOnServer) {
  if(!this.CheckedChanged.IsEmpty()) {
   var args = new ASPxClientProcessingModeEventArgs(processOnServer);
   this.CheckedChanged.FireEvent(this, args);
   processOnServer = args.processOnServer;
  }
  return processOnServer;
 },
 SetEnabled: function(enabled) {
  ASPxClientEdit.prototype.SetEnabled.call(this, enabled);
  if(!this.isNative) 
    this.internalCheckBox.SetEnabled(enabled);
 },
 GetChecked: function() {
  return this.stateController.GetCheckStateByInputKey(this.GetStateInput().value) == ASPx.CheckBoxCheckState.Checked;
 },
 SetChecked: function(isChecked) {
  this.SetCheckState(isChecked ? ASPx.CheckBoxCheckState.Checked : ASPx.CheckBoxCheckState.Unchecked);
 },
 GetText: function() {
  var labelElement = this.GetLabelElement();
  return (labelElement != null) ? labelElement.innerHTML : "";
 },
 GetCheckState: function() {
  var internalCheckeState = this.stateController.GetCheckStateByInputKey(this.GetStateInput().value);
  if(internalCheckeState != ASPx.CheckBoxCheckState.Indeterminate || this.allowGrayed)
   return internalCheckeState;
  else 
   return ASPx.CheckBoxCheckState.Unchecked;
 },
 SetCheckState: function(checkState) {
  if(checkState != ASPx.CheckBoxCheckState.Indeterminate || this.allowGrayed) {
   var value = this.stateController.GetValueByCheckState(checkState);
   this.SetValue(value);
  }
 },
 SetText: function(text) {
  var labelElement = this.GetLabelElement();
  if(labelElement != null) 
   ASPx.SetInnerHtml(labelElement, text);
 },
 ChangeEnabledAttributes: function(enabled){
  if(this.isNative) {
   this.ChangeInputEnabledAttributes(this.GetInputElement(), ASPx.Attr.ChangeAttributesMethod(enabled));
   this.ChangeSpecialInputEnabledAttributes(this.GetInputElement(), ASPx.Attr.ChangeEventsMethod(enabled), true);
   this.GetInputElement().disabled = !enabled;
  } else
   this.internalCheckBox.SetEnabled(enabled);
 },
 ChangeEnabledStateItems: function(enabled){
  ASPx.GetStateController().SetElementEnabled(this.GetMainElement(), enabled);
  this.GetStateInput().disabled = !enabled;
 },
 ChangeInputEnabledAttributes: function(element, method){
  method(element, "onclick");
 }
});
ASPxClientCheckBox.Cast = ASPxClientControl.Cast;
var ASPxClientRadioButton = ASPx.CreateClass(ASPxClientCheckBox, {
 constructor: function(name) {
  this.constructor.prototype.constructor.call(this, name);
  this.isASPxClientRadioButton = true;
  this.groupName = "";
 },
 Initialize: function() {
  ASPxClientCheckBox.prototype.Initialize.call(this);
  if(this.accessibilityCompliant && this.groupName)
   this.setAccessibilityGroupAttributes();
 },
 setAccessibilityGroupAttributes: function() {
  var members = this.GetGroupMembers();
  var currentIndex = members.indexOf(this);
  var focusableElement = this.GetFocusableInputElement();
  ASPx.Attr.SetAttribute(focusableElement, "aria-setsize", members.length);
  ASPx.Attr.SetAttribute(focusableElement, "aria-posinset", currentIndex + 1);
 },
 OnValueSet: function() {
  if(this.previousValue === true) 
   this.UncheckOtherGroupMembers(true );
 },
 OnClick: function() {
  if(!this.previousValue) {
   this.UncheckOtherGroupMembers();
   ASPxClientCheckBox.prototype.OnClick.call(this);
  } else {
   if(!this.focused)
    this.SetFocus();
  }
 },
 CreateInternalCheckBox: function() {
  ASPxClientCheckBox.prototype.CreateInternalCheckBox.call(this);
  this.internalCheckBox.autoSwitchEnabled = false;
 },
 UncheckOtherGroupMembers: function(suppressEvents) {
  var members = this.GetGroupMembers();
  for(var i = 0; i < members.length; i++) {
   var radioButton = members[i];
   if(!ASPx.IsExistsElement(radioButton.GetMainElement()))
    members[i] = null;
   else {
    if(radioButton != this && radioButton.GetValue()){
     radioButton.SetValue(false);
     if(!suppressEvents)
      radioButton.RaiseValueChangedEvent();
    }
   }
  }
 },
 OnReadonlyClick: function() {
  if(!this.previousValue) {   
   var members = this.GetGroupMembers();   
   for(var i = 0; i < members.length; i++) {
    var radioButton = members[i];
    radioButton.SetValue(radioButton.GetValue());
   }
  }
 },
 GetGroupName: function() {
  if(!this.isNative)
   return this.groupName;
  var inputElement = this.GetInputElement();
  if (!ASPx.IsExistsElement(inputElement))
   return null;
  var name = inputElement.name;
  if(!name.length)
   name = "";
  return name;
 },
 GetGroupMembers: function() {
  var result = [ ];
  var groupName = this.GetGroupName();
  if(groupName.length > 0) {
   ASPx.GetControlCollection().ForEachControl(function(control) {
    if(ASPx.Ident.IsASPxClientRadioButton(control)) {
     var controlGroupName = control.GetGroupName();
     if (controlGroupName != null && controlGroupName == groupName)
      result.push(control);
    }
   });
  } else {
   result.push(this);
  }
  return result;  
 },
 GetChecked: function() {
  return this.GetValue() == true;
 },
 SetChecked: function(isChecked) {
  this.SetValue(isChecked);
 }
});
ASPxClientRadioButton.Cast = ASPxClientControl.Cast;
ASPx.Ident.IsASPxClientCheckEdit = function(obj) {
 return !!obj.isASPxClientCheckEdit;
};
ASPx.Ident.IsASPxClientRadioButton = function(obj) {
 return !!obj.isASPxClientRadioButton;
};
ASPx.Ident.IsASPxClientCheckBox = function(obj) {
 return ASPx.Ident.IsASPxClientCheckEdit(obj) && !ASPx.Ident.IsASPxClientRadioButton(obj);
};
ASPx.ChkOnClick = function(name) {
 var edit = ASPx.GetControlCollection().Get(name);
 if(edit) {
  if(edit.isNative && edit.GetReadOnly())
   return false;
  edit.OnClick();
 }
};
ASPx.ERBOnReadonlyClick = function(name) {
 var rb = ASPx.GetControlCollection().Get(name);
 if(rb)
  rb.OnReadonlyClick();
};
window.ASPxClientCheckBox = ASPxClientCheckBox;
window.ASPxClientRadioButton = ASPxClientRadioButton;
})();

